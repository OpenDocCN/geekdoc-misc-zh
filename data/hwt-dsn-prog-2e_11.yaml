- en: 'Intermezzo 4: The Nature of NumbersğŸ”—'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å°èŠ‚4ï¼šæ•°å­—çš„æœ¬è´¨ğŸ”—
- en: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/i4-5.html](https://htdp.org/2024-11-6/Book/i4-5.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/i4-5.html](https://htdp.org/2024-11-6/Book/i4-5.html)
- en: '| Â Â Â Â [Fixed-Size Number Arithmetic](#%28part._.Fixed-.Size_.Number_.Arithmetic%29)
    |'
  id: totrans-2
  prefs: []
  type: TYPE_TB
  zh: '|Â Â Â [å›ºå®šå¤§å°æ•°å­—ç®—æœ¯](#%28part._.Fixed-.Size_.Number_.Arithmetic%29) |'
- en: '| Â Â Â Â [Overflow](#%28part._.Overflow%29) |'
  id: totrans-3
  prefs: []
  type: TYPE_TB
  zh: '|Â Â Â [æº¢å‡º](#%28part._.Overflow%29) |'
- en: '| Â Â Â Â [Underflow](#%28part._.Underflow%29) |'
  id: totrans-4
  prefs: []
  type: TYPE_TB
  zh: '|Â Â Â [ä¸‹æº¢](#%28part._.Underflow%29) |'
- en: '| Â Â Â Â [*SL Numbers](#%28part.__.S.L_.Numbers%29) |'
  id: totrans-5
  prefs: []
  type: TYPE_TB
  zh: '|Â Â Â [*SL æ•°å­—](#%28part.__.S.L_.Numbers%29) |'
- en: When it comes to numbers, programming languages mediate the gap between the
    underlying hardware and true mathematics. The typical computer hardware represents
    numbers with fixed-size chunks of data;These chunks are called bits, bytes, and
    words. they also come with processors that work on just such chunks. In paper-and-pencil
    calculations, we donâ€™t worry about how many digits we process; in principle, we
    can deal with numbers that consist of one digit, 10 digits, or 10,000 digits.
    Thus, if a programming language uses the numbers from the underlying hardware,
    its calculations are as efficient as possible. If it sticks to the numbers we
    know from mathematics, it must translate those into chunks of hardware data and
    backâ€”<wbr>and these translations cost time. Because of this cost, most creators
    of programming languages adopt the hardware-based choice.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æ¶‰åŠåˆ°æ•°å­—æ—¶ï¼Œç¼–ç¨‹è¯­è¨€åœ¨åº•å±‚ç¡¬ä»¶å’ŒçœŸæ­£çš„æ•°å­¦ä¹‹é—´èµ·åˆ°äº†æ¡¥æ¢çš„ä½œç”¨ã€‚å…¸å‹çš„è®¡ç®—æœºç¡¬ä»¶ä½¿ç”¨å›ºå®šå¤§å°çš„æ•°æ®å—æ¥è¡¨ç¤ºæ•°å­—ï¼›è¿™äº›å—è¢«ç§°ä¸ºä½ã€å­—èŠ‚å’Œå­—ã€‚å®ƒä»¬è¿˜é…å¤‡äº†ä»…åœ¨è¿™äº›å—ä¸Šå·¥ä½œçš„å¤„ç†å™¨ã€‚åœ¨çº¸ç¬”è®¡ç®—ä¸­ï¼Œæˆ‘ä»¬ä¸å¿…æ‹…å¿ƒæˆ‘ä»¬å¤„ç†äº†å¤šå°‘ä½æ•°å­—ï¼›åŸåˆ™ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å¤„ç†ç”±ä¸€ä¸ªæ•°å­—ã€10ä¸ªæ•°å­—æˆ–10,000ä¸ªæ•°å­—ç»„æˆçš„æ•°å­—ã€‚å› æ­¤ï¼Œå¦‚æœç¼–ç¨‹è¯­è¨€ä½¿ç”¨åº•å±‚ç¡¬ä»¶ä¸­çš„æ•°å­—ï¼Œå…¶è®¡ç®—å°†å°½å¯èƒ½é«˜æ•ˆã€‚å¦‚æœå®ƒåšæŒä½¿ç”¨æˆ‘ä»¬ä»æ•°å­¦ä¸­çŸ¥é“çš„æ•°å­—ï¼Œå®ƒå¿…é¡»å°†è¿™äº›æ•°å­—è½¬æ¢æˆç¡¬ä»¶æ•°æ®å—ï¼Œç„¶åå†è½¬æ¢å›æ¥â€”â€”<wbr>è¿™äº›è½¬æ¢ä¼šèŠ±è´¹æ—¶é—´ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€çš„åˆ›é€ è€…é‡‡ç”¨äº†åŸºäºç¡¬ä»¶çš„é€‰æ‹©ã€‚
- en: 'This intermezzo explains the hardware representation of numbers as an exercise
    in data representation. Concretely, the first subsection introduces a concrete
    fixed-size data representation for numbers, discusses how to map numbers into
    this representation, and hints at how calculations work on such numbers. The second
    and third sections illustrate the two most fundamental problems of this choice:
    arithmetic overflow and underflow, respectively. The last one sketches how arithmetic
    in the teaching languages works; its number system generalizes what you find in
    most of todayâ€™s programming languages. The final exercises show how bad things
    can get when programs compute with numbers.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™éƒ¨åˆ†å°èŠ‚é€šè¿‡æ•°æ®è¡¨ç¤ºçš„ç»ƒä¹ æ¥è§£é‡Šæ•°å­—çš„ç¡¬ä»¶è¡¨ç¤ºã€‚å…·ä½“æ¥è¯´ï¼Œç¬¬ä¸€å°èŠ‚ä»‹ç»äº†ä¸€ç§å…·ä½“çš„å›ºå®šå¤§å°æ•°å­—è¡¨ç¤ºæ–¹æ³•ï¼Œè®¨è®ºäº†å¦‚ä½•å°†æ•°å­—æ˜ å°„åˆ°è¿™ç§è¡¨ç¤ºï¼Œå¹¶æš—ç¤ºäº†åœ¨è¿™ç§æ•°å­—ä¸Šçš„è®¡ç®—æ˜¯å¦‚ä½•è¿›è¡Œçš„ã€‚ç¬¬äºŒå’Œç¬¬ä¸‰éƒ¨åˆ†åˆ†åˆ«è¯´æ˜äº†è¿™ç§é€‰æ‹©ä¸­æœ€åŸºæœ¬çš„ä¸¤ä¸ªé—®é¢˜ï¼šç®—æœ¯æº¢å‡ºå’Œä¸‹æº¢ã€‚æœ€åä¸€éƒ¨åˆ†æ¦‚è¿°äº†æ•™å­¦è¯­è¨€ä¸­çš„ç®—æœ¯æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼›å®ƒçš„æ•°ç³»æ¨å¹¿äº†ä½ åœ¨å¤§å¤šæ•°ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸­æ‰¾åˆ°çš„å†…å®¹ã€‚æœ€åçš„ç»ƒä¹ å±•ç¤ºäº†å½“ç¨‹åºä½¿ç”¨æ•°å­—è¿›è¡Œè®¡ç®—æ—¶å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚
- en: Fixed-Size Number Arithmetic[ğŸ”—](#(part._.Fixed-.Size_.Number_.Arithmetic) "Link
    to here")
  id: totrans-8
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: å›ºå®šå¤§å°æ•°å­—ç®—æœ¯[ğŸ”—](#(part._.Fixed-.Size_.Number_.Arithmetic) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Suppose we can use four digits to represent numbers. If we represent natural
    numbers, one representable range is [0,10000). For real numbers, we could pick
    10,000 fractions between 0 and 1 or 5,000 between 0 and 1 and another 5,000 between
    1 and 2, and so on. In either case, four digits can represent at most 10,000 numbers
    for some chosen interval, while the number line for this interval contains an
    infinite number of numbers.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å››ä¸ªæ•°å­—æ¥è¡¨ç¤ºæ•°å­—ã€‚å¦‚æœæˆ‘ä»¬è¡¨ç¤ºè‡ªç„¶æ•°ï¼Œä¸€ä¸ªå¯è¡¨ç¤ºçš„èŒƒå›´æ˜¯[0,10000)ã€‚å¯¹äºå®æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨0å’Œ1ä¹‹é—´é€‰æ‹©10,000ä¸ªåˆ†æ•°ï¼Œæˆ–è€…åœ¨0å’Œ1ä¹‹é—´é€‰æ‹©5,000ä¸ªï¼Œåœ¨1å’Œ2ä¹‹é—´å†é€‰æ‹©5,000ä¸ªï¼Œä¾æ­¤ç±»æ¨ã€‚åœ¨ä»»ä¸€æƒ…å†µä¸‹ï¼Œå››ä¸ªæ•°å­—å¯¹äºæŸä¸ªé€‰æ‹©çš„åŒºé—´æœ€å¤šå¯ä»¥è¡¨ç¤º10,000ä¸ªæ•°å­—ï¼Œè€Œè¯¥åŒºé—´çš„æ•°çº¿åŒ…å«æ— é™å¤šä¸ªæ•°å­—ã€‚
- en: The common choice for hardware numbers is to use so-called scientific notation,
    meaning numbers are represented with two parts:For pure scientific notation, the
    base is between 0 and 9; we ignore this constraint.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ç¡¬ä»¶æ•°å­—çš„å¸¸è§é€‰æ‹©æ˜¯ä½¿ç”¨æ‰€è°“çš„ç§‘å­¦è®°æ•°æ³•ï¼Œè¿™æ„å‘³ç€æ•°å­—ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå¯¹äºçº¯ç§‘å­¦è®°æ•°æ³•ï¼ŒåŸºæ•°åœ¨0åˆ°9ä¹‹é—´ï¼›æˆ‘ä»¬å¿½ç•¥è¿™ä¸ªçº¦æŸã€‚
- en: a mantissa, which is a base number, and
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå°¾æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºæ•°ï¼Œ
- en: an exponent, which is used to determine a 10-based factor.
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªæŒ‡æ•°ï¼Œç”¨äºç¡®å®šä¸€ä¸ªä»¥10ä¸ºåŸºçš„å› å­ã€‚
- en: Expressed as a formula, we write numbers as
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨å…¬å¼è¡¨ç¤ºï¼Œæˆ‘ä»¬å†™ä½œ
- en: '![image](../Images/797ac4b17eae5ebe56eda6d586da7a9f.png)'
  id: totrans-14
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![å›¾ç‰‡](../Images/797ac4b17eae5ebe56eda6d586da7a9f.png)'
- en: where m is the mantissa and e the exponent. For example, one representation
    of 1200 with this scheme is
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­mæ˜¯å°¾æ•°ï¼Œeæ˜¯æŒ‡æ•°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨è¿™ç§æ–¹æ¡ˆè¡¨ç¤º1200çš„ä¸€ç§è¡¨ç¤ºæ–¹æ³•æ˜¯
- en: '![image](../Images/8a52272b3360c2f1cb18dae832c0c483.png)'
  id: totrans-16
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![å›¾ç‰‡](../Images/8a52272b3360c2f1cb18dae832c0c483.png)'
- en: another one is
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: å¦ä¸€ä¸ªä¾‹å­æ˜¯
- en: '![image](../Images/1376d0cccca83b7e9b1b3fec091c64e9.png)'
  id: totrans-18
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/1376d0cccca83b7e9b1b3fec091c64e9.png)'
- en: 'In general, a number has several equivalents in this representation.We can
    also use negative exponents, which add fractions at the cost of one extra piece
    of data: the sign of the exponent. For example,'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼Œä¸€ä¸ªæ•°å­—åœ¨è¿™ä¸ªè¡¨ç¤ºæ³•ä¸­æœ‰å‡ ä¸ªç­‰ä»·å½¢å¼ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨è´ŸæŒ‡æ•°ï¼Œè¿™ä¼šå¢åŠ åˆ†æ•°ï¼Œä½†éœ€è¦é¢å¤–çš„ä¸€ä¸ªæ•°æ®é¡¹ï¼šæŒ‡æ•°çš„ç¬¦å·ã€‚ä¾‹å¦‚ï¼Œ
- en: '![image](../Images/d566bc84c6c4ad42b139ffbc208fe339.png)'
  id: totrans-20
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/d566bc84c6c4ad42b139ffbc208fe339.png)'
- en: stands for
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨ç¤º
- en: '![image](../Images/ac69110bb4c54630dd14e9d8f85af770.png)'
  id: totrans-22
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/ac69110bb4c54630dd14e9d8f85af770.png)'
- en: To use a form of mantissa-exponent notation for our problem, we must decide
    how many of the four digits we wish to use for the representation of the mantissa
    and how many for the exponent. Here we use two for each plus a sign for the exponent;
    other choices are possible. Given this decision, we can still represent 0 as
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä½¿ç”¨æŒ‡æ•°-å°¾æ•°è¡¨ç¤ºæ³•ï¼Œæˆ‘ä»¬å¿…é¡»å†³å®šæˆ‘ä»¬å¸Œæœ›ç”¨å››ä¸ªæ•°å­—ä¸­çš„å‡ ä¸ªæ¥è¡¨ç¤ºå°¾æ•°ï¼Œä»¥åŠå‡ ä¸ªæ¥è¡¨ç¤ºæŒ‡æ•°ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªæ•°ä½¿ç”¨ä¸¤ä¸ªæ•°å­—ï¼Œå¹¶ä¸ºæŒ‡æ•°ä½¿ç”¨ä¸€ä¸ªæ­£å·ï¼›å…¶ä»–é€‰æ‹©ä¹Ÿæ˜¯å¯èƒ½çš„ã€‚åšå‡ºè¿™ä¸ªå†³å®šåï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è¡¨ç¤º0ï¼Œå¦‚ä¸‹æ‰€ç¤º
- en: '![image](../Images/cdb487d793ead5049d131d09c02223fe.png)'
  id: totrans-24
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/cdb487d793ead5049d131d09c02223fe.png)'
- en: The maximal number we can represent is
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°å­—æ˜¯
- en: '![image](../Images/93f071c604dfee7fafac77d69d9ccc39.png)'
  id: totrans-26
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/93f071c604dfee7fafac77d69d9ccc39.png)'
- en: which is 99 followed by 99 0â€™s. Using the negative exponents, we can add fractions
    all the way down to
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ç”±99åé¢è·Ÿç€99ä¸ª0ç»„æˆçš„ã€‚ä½¿ç”¨è´ŸæŒ‡æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†åˆ†æ•°åŠ åˆ°
- en: '![image](../Images/752c9969d8ca2c9c7a8d27591a83f7c4.png)'
  id: totrans-28
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/752c9969d8ca2c9c7a8d27591a83f7c4.png)'
- en: which is the smallest representable number. In sum, using scientific notation
    with four digits (and a sign), we can represent a vast range of numbers and fractions,
    but this improvement comes with its own problems.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æœ€å°çš„å¯è¡¨ç¤ºæ•°å­—ã€‚æ€»çš„æ¥è¯´ï¼Œä½¿ç”¨å››ä½æ•°å­—ï¼ˆåŒ…æ‹¬æ­£å·ï¼‰çš„ç§‘å­¦è®°æ•°æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¡¨ç¤ºå¹¿æ³›çš„æ•°å­—å’Œåˆ†æ•°ï¼Œä½†è¿™ç§æ”¹è¿›ä¹Ÿä¼´éšç€å®ƒè‡ªå·±çš„é—®é¢˜ã€‚
- en: '| ;Â [N](part_two.html#%28tech._n%29)  [Number](part_one.html#%28tech._number%29)  [N](part_two.html#%28tech._n%29)
    -> [Inex](#%28tech._inex%29) |'
  id: totrans-30
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [N](part_two.html#%28tech._n%29)  [Number](part_one.html#%28tech._number%29)  [N](part_two.html#%28tech._n%29)
    -> [Inex](#%28tech._inex%29) |'
- en: '| ;Â makes an instance of [Inex](#%28tech._inex%29) after checking the arguments
    |'
  id: totrans-31
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â makes an instance of [Inex](#%28tech._inex%29) after checking the arguments
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â (create-inexÂ mÂ sÂ e)
    |'
  id: totrans-32
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â (create-inexÂ mÂ sÂ e)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cond%29%29)
    |'
  id: totrans-33
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._and%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3c~3d%29%29)Â 0Â mÂ 99)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3c~3d%29%29)Â 0Â eÂ 99)Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._or%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3d%29%29)Â sÂ 1)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3d%29%29)Â sÂ -1)))
    |'
  id: totrans-34
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._and%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3c~3d%29%29)Â 0Â mÂ 99)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3c~3d%29%29)Â 0Â eÂ 99)Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._or%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3d%29%29)Â sÂ 1)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3d%29%29)Â sÂ -1)))
    |'
- en: '| Â Â Â Â Â (make-inexÂ mÂ sÂ e)] |'
  id: totrans-35
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (make-inexÂ mÂ sÂ e)] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._error%29%29)Â "bad
    values given")])) |'
  id: totrans-36
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._error%29%29)Â "bad
    values given")])) |'
- en: '| Â  |'
  id: totrans-37
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  |'
- en: '| ;Â [Inex](#%28tech._inex%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-38
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Inex](#%28tech._inex%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â converts an [inex](#%28tech._inex%29) into its numeric equivalent |'
  id: totrans-39
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â converts an [inex](#%28tech._inex%29) into its numeric equivalent |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â (inex->numberÂ an-inex)
    |'
  id: totrans-40
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â (inex->numberÂ an-inex)
    |'
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2A%29%29)Â (inex-mantissaÂ an-inex)
    |'
  id: totrans-41
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2A%29%29)Â (inex-mantissaÂ an-inex)
    |'
- en: '| Â Â Â Â Â ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)
    |'
  id: totrans-42
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)
    |'
- en: '| Â Â Â Â Â Â Â 10Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2A%29%29)Â (inex-signÂ an-inex)Â (inex-exponentÂ an-inex)))))
    |'
  id: totrans-43
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â 10Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2A%29%29)Â (inex-signÂ an-inex)Â (inex-exponentÂ an-inex)))))
    |'
- en: ''
  id: totrans-44
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 143: Functions for inexact representations'
  id: totrans-45
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾143ï¼šä¸ç²¾ç¡®è¡¨ç¤ºçš„å‡½æ•°
- en: 'To understand the problems, it is best to make these choices concrete with
    a data representation in ISL+ and by running some experiments. Letâ€™s represent
    a fixed-size number with a structure that has three fields:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: è¦ç†è§£è¿™äº›é—®é¢˜ï¼Œæœ€å¥½é€šè¿‡åœ¨ISL+ä¸­çš„æ•°æ®è¡¨ç¤ºå’Œè¿è¡Œä¸€äº›å®éªŒæ¥ä½¿è¿™äº›é€‰æ‹©å…·ä½“åŒ–ã€‚è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªæœ‰ä¸‰ä¸ªå­—æ®µçš„ç»“æ„çš„å›ºå®šå¤§å°æ•°å­—æ¥è¡¨ç¤ºï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define-struct%29%29)Â inexÂ [mantissaÂ signÂ exponent])
    |'
  id: totrans-47
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define-struct%29%29)Â inexÂ [mantissaÂ signÂ exponent])
    |'
- en: '| ;Â An Inex is a structure: |'
  id: totrans-48
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An Inex is a structure: |'
- en: '| ;Â Â Â (make-inex  [N99](#%28tech._n99%29)  [S](#%28tech._%29)  [N99](#%28tech._n99%29))
    |'
  id: totrans-49
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-inex  [N99](#%28tech._n99%29)  [S](#%28tech._%29)  [N99](#%28tech._n99%29))
    |'
- en: '| ;Â An S is one of: |'
  id: totrans-50
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An S is one of: |'
- en: '| ;Â â€“  1 |'
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  1 |'
- en: '| ;Â â€“  -1 |'
  id: totrans-52
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  -1 |'
- en: '| ;Â An N99 is an [N](part_two.html#%28tech._n%29) between 0 and 99 (inclusive).
    |'
  id: totrans-53
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An N99 is an [N](part_two.html#%28tech._n%29) between 0 and 99 (inclusive).
    |'
- en: 'Because the conditions on the fields of an [Inex](#%28tech._inex%29) are so
    stringent, we define the function create-inex to instantiate this structure type
    definition; see [figureÂ 143](#%28counter._%28figure._fig~3ainexact-construct%29%29).
    The figure also defines inex->number, which turns [Inex](#%28tech._inex%29)es
    into numbers using the above formula.Letâ€™s translate the above example, 1200,
    into our data representation:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºå¯¹[Inex](#%28tech._inex%29)å­—æ®µçš„é™åˆ¶éå¸¸ä¸¥æ ¼ï¼Œæˆ‘ä»¬å®šä¹‰äº†`create-inex`å‡½æ•°æ¥å®ä¾‹åŒ–è¿™ç§ç»“æ„ç±»å‹å®šä¹‰ï¼›å‚è§[å›¾143](#%28counter._%28figure._fig~3ainexact-construct%29%29)ã€‚è¯¥å›¾è¿˜å®šä¹‰äº†`inex->number`ï¼Œå®ƒä½¿ç”¨ä¸Šè¿°å…¬å¼å°†[Inex](#%28tech._inex%29)è½¬æ¢ä¸ºæ•°å­—ã€‚è®©æˆ‘ä»¬å°†ä¸Šè¿°ç¤ºä¾‹ï¼Œ1200ï¼Œè½¬æ¢ä¸ºæˆ‘ä»¬çš„æ•°æ®è¡¨ç¤ºï¼š
- en: (create-inexÂ 12Â 1Â 2)
  id: totrans-55
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (create-inexÂ 12Â 1Â 2)
- en: 'Representing 1200 as ![image](../Images/5150a3fb1680b953f0da7aa0ef26de23.png)
    is illegal, however, according to our [Inex](#%28tech._inex%29) data definition:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: å°†1200è¡¨ç¤ºä¸º![image](../Images/5150a3fb1680b953f0da7aa0ef26de23.png)æ˜¯éæ³•çš„ï¼Œæ ¹æ®æˆ‘ä»¬çš„[Inex](#%28tech._inex%29)æ•°æ®å®šä¹‰ï¼š
- en: '| > (create-inexÂ 120Â 1Â 1) |'
  id: totrans-57
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (create-inexÂ 120Â 1Â 1) |'
- en: '| bad values given |'
  id: totrans-58
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| bad values given |'
- en: 'For other numbers, though, we can find two [Inex](#%28tech._inex%29) equivalents.
    One example is 5e-19:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºå…¶ä»–æ•°å­—ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰¾åˆ°ä¸¤ä¸ª[Inex](#%28tech._inex%29)ç­‰ä»·å€¼ã€‚ä¸€ä¸ªä¾‹å­æ˜¯5e-19ï¼š
- en: '| > (create-inexÂ 50Â -1Â 20) |'
  id: totrans-60
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (create-inexÂ 50Â -1Â 20) |'
- en: '| (make-inex 50 -1 20) |'
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (make-inex 50 -1 20) |'
- en: '| > (create-inexÂ 5Â -1Â 19) |'
  id: totrans-62
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (create-inexÂ 5Â -1Â 19) |'
- en: '| (make-inex 5 -1 19) |'
  id: totrans-63
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (make-inex 5 -1 19) |'
- en: 'Use inex->number to confirm the equivalence of these two numbers.With create-inex
    it is also easy to delimit the range of representable numbers, which is actually
    quite small for many applications:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨`inex->number`æ¥ç¡®è®¤è¿™ä¸¤ä¸ªæ•°çš„ç­‰ä»·æ€§ã€‚ä½¿ç”¨`create-inex`ä¹Ÿå¯ä»¥è½»æ¾ç•Œå®šå¯è¡¨ç¤ºæ•°å­—çš„èŒƒå›´ï¼Œå®é™…ä¸Šå¯¹äºè®¸å¤šåº”ç”¨æ¥è¯´è¿™ä¸ªèŒƒå›´ç›¸å½“å°ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â MAX-POSITIVEÂ (create-inexÂ 99Â 1Â 99))
    |'
  id: totrans-65
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â MAX-POSITIVEÂ (create-inexÂ 99Â 1Â 99))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â MIN-POSITIVEÂ (create-inexÂ 1Â -1Â 99))
    |'
  id: totrans-66
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â MIN-POSITIVEÂ (create-inexÂ 1Â -1Â 99))
    |'
- en: The question is which of the real numbers in the range between 0 and MAX-POSITIVE
    can be translated into an [Inex](#%28tech._inex%29). In particular, any positive
    number less than
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: é—®é¢˜æ˜¯å“ªä¸ªä»‹äº 0 å’Œ MAX-POSITIVE ä¹‹é—´çš„å®æ•°å¯ä»¥è¢«è½¬æ¢æˆ [Inex](#%28tech._inex%29)ã€‚ç‰¹åˆ«æ˜¯ï¼Œä»»ä½•å°äº
- en: '![image](../Images/f2b4fbe32d56023c28a2e74b879a9614.png)'
  id: totrans-68
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/f2b4fbe32d56023c28a2e74b879a9614.png)'
- en: has no equivalent [Inex](#%28tech._inex%29). Similarly, the representation has
    gaps in the middle. For example, the immediate successor of
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: æ²¡æœ‰ç­‰æ•ˆçš„ [Inex](#%28tech._inex%29)ã€‚åŒæ ·ï¼Œè¡¨ç¤ºåœ¨ä¸­é—´æœ‰é—´éš™ã€‚ä¾‹å¦‚ï¼Œçš„ç›´æ¥åç»§è€…
- en: (create-inexÂ 12Â 1Â 2)
  id: totrans-70
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (create-inexÂ 12Â 1Â 2)
- en: is
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: is
- en: (create-inexÂ 13Â 1Â 2)
  id: totrans-72
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (create-inexÂ 13Â 1Â 2)
- en: 'The first [Inex](#%28tech._inex%29) represents 1200, the second one 1300. Numbers
    in the middle, say 1240, can be represented as one or the otherâ€”<wbr>no other
    [Inex](#%28tech._inex%29) makes sense. The standard choice is to round the number
    to the closest representable equivalent, and that is what computer scientists
    mean with inexact numbers. That is, the chosen data representation forces us to
    map mathematical numbers to approximations.Finally, we must also consider arithmetic
    operations on [Inex](#%28tech._inex%29) structures. Adding two [Inex](#%28tech._inex%29)
    representations with the same exponent means adding the two mantissas:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ª [Inex](#%28tech._inex%29) ä»£è¡¨ 1200ï¼Œç¬¬äºŒä¸ªä»£è¡¨ 1300ã€‚ä¸­é—´çš„æ•°å­—ï¼Œæ¯”å¦‚ 1240ï¼Œå¯ä»¥è¡¨ç¤ºä¸ºå…¶ä¸­ä¸€ä¸ªï¼Œæˆ–è€…å¦ä¸€ä¸ªâ€”â€”<wbr>æ²¡æœ‰å…¶ä»–
    [Inex](#%28tech._inex%29) æœ‰æ„ä¹‰ã€‚æ ‡å‡†çš„é€‰æ‹©æ˜¯å°†æ•°å­—å››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„å¯è¡¨ç¤ºç­‰ä»·æ•°ï¼Œè¿™å°±æ˜¯è®¡ç®—æœºç§‘å­¦å®¶æ‰€è¯´çš„ä¸ç²¾ç¡®æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€‰æ‹©çš„æ•°æ®è¡¨ç¤ºæ–¹å¼è¿«ä½¿æˆ‘ä»¬æŠŠæ•°å­¦æ•°æ˜ å°„åˆ°è¿‘ä¼¼å€¼ã€‚æœ€åï¼Œæˆ‘ä»¬è¿˜å¿…é¡»è€ƒè™‘
    [Inex](#%28tech._inex%29) ç»“æ„ä¸Šçš„ç®—æœ¯è¿ç®—ã€‚å…·æœ‰ç›¸åŒæŒ‡æ•°çš„ä¸¤ä¸ª [Inex](#%28tech._inex%29) è¡¨ç¤ºç›¸åŠ æ„å‘³ç€å°†ä¸¤ä¸ªå°¾æ•°ç›¸åŠ ï¼š
- en: '| (inex+Â (create-inexÂ 1Â 1Â 0)Â (create-inexÂ 2Â 1Â 0)) |'
  id: totrans-74
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (inex+Â (create-inexÂ 1Â 1Â 0)Â (create-inexÂ 2Â 1Â 0)) |'
- en: '| == |'
  id: totrans-75
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (create-inexÂ 3Â 1Â 0) |'
  id: totrans-76
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (create-inexÂ 3Â 1Â 0) |'
- en: Translated into mathematical notation, we have
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: å°†å…¶è½¬æ¢ä¸ºæ•°å­¦ç¬¦å·ï¼Œæˆ‘ä»¬å¾—åˆ°
- en: '![image](../Images/a6bfe7a3671587f8edd5ccc3880c13f8.png)'
  id: totrans-78
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/a6bfe7a3671587f8edd5ccc3880c13f8.png)'
- en: When the addition of two mantissas yields too many digits, we have to use the
    closest neighbor in [Inex](#%28tech._inex%29). Consider adding ![image](../Images/0d676191f6000dcbfaa5917dc1cd8e6b.png)
    to itself. Mathematically we get
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä¸¤ä¸ªå°¾æ•°çš„ç›¸åŠ äº§ç”Ÿå¤ªå¤šçš„ä½æ•°æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ [Inex](#%28tech._inex%29) ä¸­çš„æœ€æ¥è¿‘çš„é‚»å±…ã€‚è€ƒè™‘å°† ![image](../Images/0d676191f6000dcbfaa5917dc1cd8e6b.png)
    åŠ åˆ°å®ƒè‡ªå·±ä¸Šã€‚ä»æ•°å­¦ä¸Šæˆ‘ä»¬å¾—åˆ°
- en: '![image](../Images/7d37ac193d72dff101e92e636e601dca.png)'
  id: totrans-80
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/7d37ac193d72dff101e92e636e601dca.png)'
- en: but we canâ€™t just translate this number naively into our chosen representation
    because ![image](../Images/a9030652b13da3ab0232c40923194fd5.png). The proper corrective
    action is to represent the result as
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æˆ‘ä»¬ä¸èƒ½ç®€å•åœ°æŠŠè¿™ä¸ªæ•°å­—å¤©çœŸåœ°è½¬æ¢æˆæˆ‘ä»¬é€‰æ‹©çš„è¡¨ç°å½¢å¼ï¼Œå› ä¸º ![image](../Images/a9030652b13da3ab0232c40923194fd5.png)ã€‚é€‚å½“çš„çº æ­£æªæ–½æ˜¯å°†ç»“æœè¡¨ç¤ºä¸º
- en: '![image](../Images/8a5cc142bb817cfa0a018f88b3ad5573.png)'
  id: totrans-82
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/8a5cc142bb817cfa0a018f88b3ad5573.png)'
- en: 'Or, translated into ISL+, we must ensure that inex+ computes as follows:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ–è€…ï¼Œè½¬æ¢æˆ ISL+ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿ inex+ æŒ‰ä»¥ä¸‹æ–¹å¼è®¡ç®—ï¼š
- en: '| (inex+Â (create-inexÂ 55Â 1Â 0)Â (create-inexÂ 55Â 1Â 0)) |'
  id: totrans-84
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (inex+Â (create-inexÂ 55Â 1Â 0)Â (create-inexÂ 55Â 1Â 0)) |'
- en: '| == |'
  id: totrans-85
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (create-inexÂ 11Â 1Â 1) |'
  id: totrans-86
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (create-inexÂ 11Â 1Â 1) |'
- en: 'More generally, if the mantissa of the result is too large, we must divide
    it by 10 and increase the exponent by one.Sometimes the result contains more mantissa
    digits than we can represent. In those cases, inex+ must round to the closest
    equivalent in the [Inex](#%28tech._inex%29) world. For example:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: æ›´ä¸€èˆ¬åœ°ï¼Œå¦‚æœç»“æœçš„å°¾æ•°å¤ªå¤§ï¼Œæˆ‘ä»¬å¿…é¡»å°†å…¶é™¤ä»¥ 10 å¹¶å¢åŠ æŒ‡æ•°ä¸€ä½ã€‚æœ‰æ—¶ç»“æœåŒ…å«çš„å°¾æ•°ä½æ•°æ¯”æˆ‘ä»¬èƒ½è¡¨ç¤ºçš„è¿˜è¦å¤šã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œinex+ å¿…é¡»å››èˆäº”å…¥åˆ°
    [Inex](#%28tech._inex%29) ä¸–ç•Œä¸­æœ€æ¥è¿‘çš„ç­‰æ•ˆæ•°ã€‚ä¾‹å¦‚ï¼š
- en: '| (inex+Â (create-inexÂ 56Â 1Â 0)Â (create-inexÂ 56Â 1Â 0)) |'
  id: totrans-88
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (inex+Â (create-inexÂ 56Â 1Â 0)Â (create-inexÂ 56Â 1Â 0)) |'
- en: '| == |'
  id: totrans-89
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (create-inexÂ 11Â 1Â 1) |'
  id: totrans-90
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (create-inexÂ 11Â 1Â 1) |'
- en: 'Compare this with the precise calculation:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ç²¾ç¡®è®¡ç®—ç›¸æ¯”ï¼š
- en: '![image](../Images/2ea6285e1dfc5564663a77ace7df9ebd.png)'
  id: totrans-92
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/2ea6285e1dfc5564663a77ace7df9ebd.png)'
- en: 'Because the result has too many mantissa digits, the integer division of the
    result mantissa by 10 produces an approximate result:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: å› ä¸ºç»“æœæœ‰å¤ªå¤šçš„å°¾æ•°ä½ï¼Œæ‰€ä»¥å°†ç»“æœå°¾æ•°é™¤ä»¥ 10 çš„æ•´æ•°é™¤æ³•äº§ç”Ÿäº†ä¸€ä¸ªè¿‘ä¼¼ç»“æœï¼š
- en: '![image](../Images/f79b1c43f53b5931e06ccac353095f4e.png)'
  id: totrans-94
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/f79b1c43f53b5931e06ccac353095f4e.png)'
- en: This is an example of the many approximations in [Inex](#%28tech._inex%29) arithmetic.And
    inexact is appropriate.We can also multiply [Inex](#%28tech._inex%29) numbers.
    Recall that
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸ç²¾ç¡® [Inex](#%28tech._inex%29) ç®—æœ¯ä¸­è®¸å¤šè¿‘ä¼¼çš„ä¸€ä¸ªä¾‹å­ã€‚å¹¶ä¸”ä¸ç²¾ç¡®æ˜¯åˆé€‚çš„ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¹˜ä»¥ [Inex](#%28tech._inex%29)
    æ•°å­—ã€‚å›æƒ³ä¸€ä¸‹
- en: '![image](../Images/4fc08d40a787bbb4d10284483778bb41.png)'
  id: totrans-96
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/4fc08d40a787bbb4d10284483778bb41.png)'
- en: 'Thus we get:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤æˆ‘ä»¬å¾—åˆ°ï¼š
- en: '![image](../Images/e6dfa678d68ed23816ee6a137e75b96a.png)'
  id: totrans-98
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/e6dfa678d68ed23816ee6a137e75b96a.png)'
- en: 'or, in ISL+ notation:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ–è€…ï¼Œåœ¨ ISL+ è¡¨ç¤ºæ³•ä¸­ï¼š
- en: '| (inex*Â (create-inexÂ 2Â 1Â 4)Â (create-inexÂ 8Â 1Â 10)) |'
  id: totrans-100
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (inex*Â (create-inexÂ 2Â 1Â 4)Â (create-inexÂ 8Â 1Â 10)) |'
- en: '| == |'
  id: totrans-101
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (create-inexÂ 16Â 1Â 14) |'
  id: totrans-102
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (create-inexÂ 16Â 1Â 14) |'
- en: 'As with addition, things are not straightforward. When the result has too many
    significant digits in the mantissa, inex* has to increase the exponent:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸åŠ æ³•ä¸€æ ·ï¼Œäº‹æƒ…å¹¶ä¸ç®€å•ã€‚å½“ç»“æœåœ¨å°¾æ•°éƒ¨åˆ†æœ‰å¤ªå¤šæœ‰æ•ˆæ•°å­—æ—¶ï¼Œinex å¿…é¡»å¢åŠ æŒ‡æ•°ï¼š
- en: '| (inex*Â (create-inexÂ 20Â 1Â 1)Â (create-inexÂ Â 5Â 1Â 4)) |'
  id: totrans-104
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (inex*Â (create-inexÂ 20Â 1Â 1)Â (create-inexÂ Â 5Â 1Â 4)) |'
- en: '| == |'
  id: totrans-105
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (create-inexÂ 10Â 1Â 6) |'
  id: totrans-106
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (create-inexÂ 10Â 1Â 6) |'
- en: 'And just like inex+, inex* introduces an approximation if the true mantissa
    doesnâ€™t have an exact equivalent in [Inex](#%28tech._inex%29):'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£å¦‚ inex+ ä¸€æ ·ï¼Œinex* å¦‚æœçœŸæ­£çš„å°¾æ•°åœ¨ [Inex](#%28tech._inex%29) ä¸­æ²¡æœ‰ç²¾ç¡®çš„ç­‰ä»·ç‰©ï¼Œä¹Ÿä¼šå¼•å…¥ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼š
- en: '| (inex*Â (create-inexÂ 27Â -1Â 1)Â (create-inexÂ Â 7Â 1Â 4)) |'
  id: totrans-108
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (inex*Â (create-inexÂ 27Â -1Â 1)Â (create-inexÂ Â 7Â 1Â 4)) |'
- en: '| == |'
  id: totrans-109
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (create-inexÂ 19Â 1Â 4) |'
  id: totrans-110
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (create-inexÂ 19Â 1Â 4) |'
- en: ExerciseÂ 412\. Design inex+. The function adds two [Inex](#%28tech._inex%29)
    representations of numbers that have the same exponent. The function must be able
    to deal with inputs that increase the exponent. Furthermore, it must signal its
    own error if the result is out of range, not rely on create-inex for error checking.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  412ã€‚è®¾è®¡ inex+ã€‚è¯¥å‡½æ•°å°†ä¸¤ä¸ªå…·æœ‰ç›¸åŒæŒ‡æ•°çš„ [Inex](#%28tech._inex%29) æ•°å­—è¡¨ç¤ºç›¸åŠ ã€‚è¯¥å‡½æ•°å¿…é¡»èƒ½å¤Ÿå¤„ç†å¢åŠ æŒ‡æ•°çš„è¾“å…¥ã€‚æ­¤å¤–ï¼Œå¦‚æœç»“æœè¶…å‡ºèŒƒå›´ï¼Œå®ƒå¿…é¡»å‘å‡ºè‡ªå·±çš„é”™è¯¯ä¿¡å·ï¼Œè€Œä¸æ˜¯ä¾èµ–äº
    create-inex è¿›è¡Œé”™è¯¯æ£€æŸ¥ã€‚
- en: 'Challenge Extend inex+ so that it can deal with inputs whose exponents differ
    by 1:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‘æˆ˜æ‰©å±• inex+ ä»¥å¤„ç†æŒ‡æ•°ç›¸å·® 1 çš„è¾“å…¥ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29)
    |'
  id: totrans-113
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (inex+Â (create-inexÂ 1Â 1Â 0)Â (create-inexÂ 1Â -1Â 1)) |'
  id: totrans-114
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (inex+Â (create-inexÂ 1Â 1Â 0)Â (create-inexÂ 1Â -1Â 1)) |'
- en: '| Â Â (create-inexÂ 11Â -1Â 1)) |'
  id: totrans-115
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (create-inexÂ 11Â -1Â 1)) |'
- en: Do not attempt to deal with larger classes of inputs than that without reading
    the following subsection.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨é˜…è¯»ä»¥ä¸‹å°èŠ‚ä¹‹å‰ï¼Œä¸è¦å°è¯•å¤„ç†æ¯”è¿™æ›´å¤§çš„è¾“å…¥ç±»åˆ«ã€‚
- en: ExerciseÂ 413\. Design inex*. The function multiplies two [Inex](#%28tech._inex%29)
    representations of numbers, including inputs that force an additional increase
    of the outputâ€™s exponent. Like inex+, it must signal its own error if the result
    is out of range, not rely on create-inex to perform error checking.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  413ã€‚è®¾è®¡ inex*ã€‚è¯¥å‡½æ•°å°†ä¸¤ä¸ª [Inex](#%28tech._inex%29) æ•°å­—è¡¨ç¤ºç›¸ä¹˜ï¼ŒåŒ…æ‹¬å¼ºåˆ¶è¾“å‡ºæŒ‡æ•°é¢å¤–å¢åŠ çš„è¾“å…¥ã€‚åƒ inex+
    ä¸€æ ·ï¼Œå¦‚æœç»“æœè¶…å‡ºèŒƒå›´ï¼Œå®ƒå¿…é¡»å‘å‡ºè‡ªå·±çš„é”™è¯¯ä¿¡å·ï¼Œè€Œä¸æ˜¯ä¾èµ–äº create-inex è¿›è¡Œé”™è¯¯æ£€æŸ¥ã€‚
- en: ExerciseÂ 414\. As this section illustrates, gaps in the data representation
    lead to round-off errors when numbers are mapped to [Inex](#%28tech._inex%29)es.
    The problem is, such round-off errors accumulate across computations.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  414ã€‚æ­£å¦‚æœ¬èŠ‚æ‰€ç¤ºï¼Œæ•°æ®è¡¨ç¤ºä¸­çš„é—´éš™ä¼šå¯¼è‡´å°†æ•°å­—æ˜ å°„åˆ° [Inex](#%28tech._inex%29) æ—¶å‡ºç°èˆå…¥è¯¯å·®ã€‚é—®é¢˜æ˜¯ï¼Œè¿™ç§èˆå…¥è¯¯å·®ä¼šåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ç´¯ç§¯ã€‚
- en: 'Design add, a function that adds up n copies of #i1/185. For your examples,
    use 0 and 1; for the latter, use a tolerance of 0.0001. What is the result for
    (add  185)? What would you expect? What happens if you multiply the result with
    a large number?'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 'è®¾è®¡ addï¼Œä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°† n ä¸ª #i1/185 ç›¸åŠ ã€‚å¯¹äºç¤ºä¾‹ï¼Œä½¿ç”¨ 0 å’Œ 1ï¼›å¯¹äºåè€…ï¼Œä½¿ç”¨å…¬å·®ä¸º 0.0001ã€‚(add  185) çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿä½ æœŸæœ›ä»€ä¹ˆç»“æœï¼Ÿå¦‚æœä½ å°†ç»“æœä¹˜ä»¥ä¸€ä¸ªå¤§æ•°ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ'
- en: Design sub. The function counts how often 1/185 can be subtracted from the argument
    until it is 0. Use 0 and 1/185 for your examples. What are the expected results?
    What are the results for (sub  1) and (subÂ #i1.0)? What happens in the second
    case? Why?
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ subã€‚è¯¥å‡½æ•°è®¡ç®— 1/185 å¯ä»¥ä»å‚æ•°ä¸­å‡å»å¤šå°‘æ¬¡ç›´åˆ°å®ƒå˜ä¸º 0ã€‚ä½¿ç”¨ 0 å’Œ 1/185 ä½œä¸ºç¤ºä¾‹ã€‚é¢„æœŸçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ(sub  1) å’Œ
    (subÂ #i1.0) çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿåœ¨ç¬¬äºŒç§æƒ…å†µä¸‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
- en: Overflow[ğŸ”—](#(part._.Overflow) "Link to here")
  id: totrans-121
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: æº¢å‡º[ğŸ”—](#(part._.Overflow) "é“¾æ¥åˆ°æ­¤å¤„")
- en: While scientific notation expands the range of numbers we can represent with
    fixed-size chunks of data, it is still finite. Some numbers are just too big to
    fit into a fixed-size number representation. For example,
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶ç§‘å­¦è®°æ•°æ³•é€šè¿‡å›ºå®šå¤§å°çš„æ•°æ®å—æ‰©å±•äº†æˆ‘ä»¬èƒ½å¤Ÿè¡¨ç¤ºçš„æ•°å­—èŒƒå›´ï¼Œä½†å®ƒä»ç„¶æ˜¯æœ‰é™çš„ã€‚æœ‰äº›æ•°å­—å¤ªå¤§ï¼Œæ— æ³•é€‚åº”å›ºå®šå¤§å°çš„æ•°å­—è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œ
- en: '![image](../Images/c72bde11d3dcaed712a42652a1801078.png)'
  id: totrans-123
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/c72bde11d3dcaed712a42652a1801078.png)'
- en: 'canâ€™t be represented because the exponent 500 wonâ€™t fit into two digits, and
    the mantissa is as large as legally possible.Numbers that are too large for [Inex](#%28tech._inex%29)
    can arise during a computation. For example, two numbers that we can represent
    can add up to a number that we cannot represent:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæŒ‡æ•° 500 æ— æ³•é€‚åº”ä¸¤ä½æ•°å­—ï¼Œå°¾æ•°è¾¾åˆ°æ³•å¾‹å…è®¸çš„æœ€å¤§å€¼ï¼Œå› æ­¤æ— æ³•è¡¨ç¤ºã€‚åœ¨è®¡ç®—è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°è¶…å‡º [Inex](#%28tech._inex%29)
    èŒƒå›´çš„æ•°å­—ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¡¨ç¤ºçš„ä¸¤ä¸ªæ•°å­—ç›¸åŠ å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªæˆ‘ä»¬æ— æ³•è¡¨ç¤ºçš„æ•°å­—ï¼š
- en: '| (inex+Â (create-inexÂ 50Â 1Â 99)Â (create-inexÂ 50Â 1Â 99)) |'
  id: totrans-125
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (inex+Â (create-inexÂ 50Â 1Â 99)Â (create-inexÂ 50Â 1Â 99)) |'
- en: '| == |'
  id: totrans-126
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (create-inexÂ 100Â 1Â 99) |'
  id: totrans-127
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (create-inexÂ 100Â 1Â 99) |'
- en: which violates the data definition. When [Inex](#%28tech._inex%29) arithmetic
    produces numbers that are too large to be represented, we speak of (arithmetic)
    overflow.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™è¿åäº†æ•°æ®å®šä¹‰ã€‚å½“ [Inex](#%28tech._inex%29) ç®—æœ¯äº§ç”Ÿçš„æ•°å­—å¤ªå¤§è€Œæ— æ³•è¡¨ç¤ºæ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºï¼ˆç®—æœ¯ï¼‰æº¢å‡ºã€‚
- en: When overflow takes place, some language implementations signal an error and
    stop the computation. Others designate some symbolic value, called infinity, to
    represent such numbers and propagate it through arithmetic operations.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: å½“å‘ç”Ÿæº¢å‡ºæ—¶ï¼ŒæŸäº›è¯­è¨€å®ç°ä¼šå‘å‡ºé”™è¯¯ä¿¡å·å¹¶åœæ­¢è®¡ç®—ã€‚å…¶ä»–åˆ™æŒ‡å®šä¸€ä¸ªç¬¦å·å€¼ï¼Œç§°ä¸ºæ— ç©·å¤§ï¼Œæ¥è¡¨ç¤ºè¿™æ ·çš„æ•°ï¼Œå¹¶åœ¨ç®—æœ¯è¿ç®—ä¸­ä¼ æ’­å®ƒã€‚
- en: Note If [Inex](#%28tech._inex%29)es had a sign field for the mantissa, then
    two negative numbers can add up to one that is so negative that it canâ€™t be represented
    either. This is called overflow in the negative direction. End
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼šå¦‚æœ [Inex](#%28tech._inex%29) æœ‰ä¸€ä¸ªç”¨äºå°¾æ•°çš„ç¬¦å·å­—æ®µï¼Œé‚£ä¹ˆä¸¤ä¸ªè´Ÿæ•°ç›¸åŠ å¯èƒ½å¾—åˆ°ä¸€ä¸ªå¦‚æ­¤è´Ÿçš„æ•°ï¼Œä»¥è‡³äºå®ƒä¹Ÿæ— æ³•è¡¨ç¤ºã€‚è¿™è¢«ç§°ä¸ºè´Ÿæ–¹å‘çš„æº¢å‡ºã€‚ç»“æŸ
- en: ExerciseÂ 415\. ISL+ uses +inf.0 to deal with overflow. Determine the integer
    n such that
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  415ã€‚ISL+ ä½¿ç”¨ +inf.0 æ¥å¤„ç†æº¢å‡ºã€‚ç¡®å®šæ•´æ•° nï¼Œä½¿å¾—
- en: '| ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â #i10.0Â n)
    |'
  id: totrans-132
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â #i10.0Â n)
    |'
- en: is an inexact number while ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â #i10.Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2B%29%29)Â nÂ 1))
    is approximated with +inf.0. Hint Design a function to compute n.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¯ä¸€ä¸ªä¸ç²¾ç¡®çš„æ•°å­—ï¼Œè€Œ ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â #i10.Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2B%29%29)Â nÂ 1))
    è¢«è¿‘ä¼¼ä¸º +inf.0ã€‚æç¤ºï¼šè®¾è®¡ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®— nã€‚
- en: Underflow[ğŸ”—](#(part._.Underflow) "Link to here")
  id: totrans-134
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Underflow[ğŸ”—](#(part._.Underflow) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'At the opposite end of the spectrum, there are small numbers that donâ€™t have
    a representation in [Inex](#%28tech._inex%29). For example, ![image](../Images/2c2b463c45832817b98140a29e8e090d.png)
    is not 0, but itâ€™s smaller than the smallest non-zero number we can represent.
    An (arithmetic) underflow arises when we multiply two small numbers and the result
    is too small for [Inex](#%28tech._inex%29):'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å…‰è°±çš„å¦ä¸€ç«¯ï¼Œæœ‰ä¸€äº›å°æ•°åœ¨ [Inex](#%28tech._inex%29) ä¸­æ²¡æœ‰è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œ![image](../Images/2c2b463c45832817b98140a29e8e090d.png)
    ä¸æ˜¯ 0ï¼Œä½†å®ƒæ¯”æˆ‘ä»¬èƒ½è¡¨ç¤ºçš„æœ€å°éé›¶æ•°è¿˜è¦å°ã€‚å½“æˆ‘ä»¬ä¹˜ä»¥ä¸¤ä¸ªå°æ•°ï¼Œç»“æœå¤ªå°è€Œæ— æ³•åœ¨ [Inex](#%28tech._inex%29) ä¸­è¡¨ç¤ºæ—¶ï¼Œä¼šå‡ºç°ï¼ˆç®—æœ¯ï¼‰ä¸‹æº¢ï¼š
- en: '| (inex*Â (create-inexÂ 1Â -1Â 10)Â (create-inexÂ 1Â -1Â 99)) |'
  id: totrans-136
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (inex*Â (create-inexÂ 1Â -1Â 10)Â (create-inexÂ 1Â -1Â 99)) |'
- en: '| == |'
  id: totrans-137
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (create-inexÂ 1Â -1Â 109) |'
  id: totrans-138
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (create-inexÂ 1Â -1Â 109) |'
- en: which signals an error.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¼šå¼•å‘é”™è¯¯ã€‚
- en: When underflow occurs, some language implementations signal an error; others
    use 0 to approximate the result. Using 0 to approximate underflow is qualitatively
    different from picking an approximate representation of a number in [Inex](#%28tech._inex%29).
    Concretely, approximating 1250 with (create-inex  12  1  2) drops significant
    digits from the mantissa, but the result is always within 10% of the number to
    be represented. Approximating an underflow, however, means dropping the entire
    mantissa, meaning the result is not within a predictable percentage range of the
    true result.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: å½“å‘ç”Ÿä¸‹æº¢æ—¶ï¼ŒæŸäº›è¯­è¨€å®ç°ä¼šå‘å‡ºé”™è¯¯ä¿¡å·ï¼›å…¶ä»–åˆ™ä½¿ç”¨ 0 æ¥è¿‘ä¼¼ç»“æœã€‚ä½¿ç”¨ 0 æ¥è¿‘ä¼¼ä¸‹æº¢ä¸åœ¨ [Inex](#%28tech._inex%29) ä¸­é€‰æ‹©ä¸€ä¸ªæ•°çš„è¿‘ä¼¼è¡¨ç¤ºåœ¨å®šæ€§ä¸Šæ˜¯ä¸åŒçš„ã€‚å…·ä½“æ¥è¯´ï¼Œç”¨
    (create-inex  12  1  2) æ¥è¿‘ä¼¼ 1250 ä¼šä»å°¾æ•°ä¸­åˆ é™¤æœ‰æ•ˆæ•°å­—ï¼Œä½†ç»“æœå§‹ç»ˆåœ¨è¦è¡¨ç¤ºçš„æ•°çš„ 10% ä»¥å†…ã€‚ç„¶è€Œï¼Œè¿‘ä¼¼ä¸‹æº¢æ„å‘³ç€åˆ é™¤æ•´ä¸ªå°¾æ•°ï¼Œè¿™æ„å‘³ç€ç»“æœä¸åœ¨å¯é¢„æµ‹çš„ç™¾åˆ†æ¯”èŒƒå›´å†…ã€‚
- en: 'ExerciseÂ 416\. ISL+ uses #i0.0 to approximate underflow. Determine the smallest
    integer n such that ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â #i10.0Â n)
    is still an inexact ISL+ number and ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â #i10.Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._-%29%29)Â nÂ 1))
    is approximated with 0. Hint Use a function to compute n. Consider abstracting
    over this function and the solution of [exerciseÂ 415](#%28counter._%28exercise._ex~3aflow-large%29%29).'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹  416\. ISL+ ä½¿ç”¨ #i0.0 æ¥è¿‘ä¼¼ä¸‹æº¢ã€‚ç¡®å®šæœ€å°çš„æ•´æ•° nï¼Œä½¿å¾— ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â #i10.0Â n)
    ä»ç„¶æ˜¯ä¸€ä¸ªä¸ç²¾ç¡®çš„ ISL+ æ•°ï¼Œå¹¶ä¸” ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â #i10.Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._-%29%29)Â nÂ 1))
    è¢«è¿‘ä¼¼ä¸º 0ã€‚æç¤ºï¼šä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®— nã€‚è€ƒè™‘å°†è¿™ä¸ªå‡½æ•°åŠå…¶ [ç»ƒä¹  415](#%28counter._%28exercise._ex~3aflow-large%29%29)
    çš„è§£è¿›è¡ŒæŠ½è±¡ã€‚'
- en: '*SL Numbers[ğŸ”—](#(part.__.S.L_.Numbers) "Link to here")'
  id: totrans-142
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '*SL æ•°[ğŸ”—](#(part.__.S.L_.Numbers) "é“¾æ¥åˆ°æ­¤å¤„")'
- en: 'Most programming languages support only approximate number representationsInexact
    real representations come in several flavors: float, double, extflonum, and so
    on. and arithmetic for numbers. A typical language limits its integers to an interval
    that is related to the size of the chunks of the hardware on which it runs. Its
    representation of real numbers is loosely based on the sketch in the preceding
    sections, though with larger chunks than the four digits [Inex](#%28tech._inex%29)
    uses and with digits from the 2-based number system.'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€åªæ”¯æŒè¿‘ä¼¼æ•°å­—è¡¨ç¤ºå’Œä¸ç²¾ç¡®æ•°å­—çš„ç®—æœ¯ã€‚ä¸ç²¾ç¡®çš„å®æ•°è¡¨ç¤ºæœ‰å¤šç§ç±»å‹ï¼šæµ®ç‚¹æ•°ã€åŒç²¾åº¦æµ®ç‚¹æ•°ã€extflonum ç­‰ã€‚ä¸€ç§å…¸å‹çš„è¯­è¨€å°†å…¶æ•´æ•°é™åˆ¶åœ¨ä¸å…¶è¿è¡Œçš„ç¡¬ä»¶æ•°æ®å—å¤§å°ç›¸å…³çš„åŒºé—´å†…ã€‚å®ƒå¯¹å®æ•°çš„è¡¨ç¤ºåŸºäºå‰å‡ èŠ‚ä¸­çš„è‰å›¾ï¼Œå°½ç®¡æ•°æ®å—æ¯”
    [Inex](#%28tech._inex%29) ä½¿ç”¨çš„å››ä½æ•°å­—è¦å¤§ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯åŸºäº 2 çš„æ•°åˆ¶ä¸­çš„æ•°å­—ã€‚
- en: 'The teaching languages support both exact and inexact numbers. Their integers
    and rationals are arbitrarily large and precise, limited only by the absolute
    size of the computerâ€™s entire memory. For calculations on these numbers, our teaching
    languages use the underlying hardware as long as the involved rationals fit into
    the supported chunks of data; it automatically switches to a different representation
    and to a different version of the arithmetic operations for numbers outside of
    this interval. Their real numbers come in two flavors: exact and inexact. An exact
    number truly represents a real number; an inexact one approximates a real number
    in the spirit of the preceding sections. Arithmetic operations preserve exactness
    when possible; they produce an inexact result when necessary. Thus, [sqrt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._sqrt%29%29)
    returns an inexact number for both the exact and inexact representation of 2.
    In contrast, [sqrt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._sqrt%29%29)
    produces an exact 2 when given exact 4 and #i2.0 for an input of #i4.0. Finally,
    a numeric constant in a teaching program is understood as an exact rational, unless
    it is prefixed with #i.'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 'æ•™å­¦è¯­è¨€æ”¯æŒç²¾ç¡®å’Œä¸ç²¾ç¡®çš„æ•°å­—ã€‚å®ƒä»¬çš„æ•´æ•°å’Œæœ‰ç†æ•°å¯ä»¥ä»»æ„å¤§å’Œç²¾ç¡®ï¼Œä»…é™äºè®¡ç®—æœºæ•´ä¸ªå†…å­˜çš„ç»å¯¹å¤§å°ã€‚å¯¹äºè¿™äº›æ•°å­—çš„è®¡ç®—ï¼Œæˆ‘ä»¬çš„æ•™å­¦è¯­è¨€åªè¦æ¶‰åŠçš„åˆ†æ•°å¯ä»¥é€‚åº”æ”¯æŒçš„æ•°æ®å—ï¼Œå°±ä¼šä½¿ç”¨åº•å±‚ç¡¬ä»¶ï¼›å½“æ•°å­—è¶…å‡ºè¿™ä¸ªèŒƒå›´æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸åŒçš„è¡¨ç¤ºå½¢å¼å’Œç®—æœ¯æ“ä½œçš„ä¸åŒç‰ˆæœ¬ã€‚å®ƒä»¬çš„å®æ•°æœ‰ä¸¤ç§ç±»å‹ï¼šç²¾ç¡®å’Œä¸ç²¾ç¡®ã€‚ç²¾ç¡®æ•°çœŸæ­£è¡¨ç¤ºä¸€ä¸ªå®æ•°ï¼›ä¸ç²¾ç¡®æ•°åœ¨ç²¾ç¥ä¸Šè¿‘ä¼¼å‰å‡ èŠ‚ä¸­çš„å®æ•°ã€‚å½“å¯èƒ½æ—¶ï¼Œç®—æœ¯æ“ä½œä¼šä¿æŒç²¾ç¡®æ€§ï¼›å½“å¿…è¦æ—¶ï¼Œå®ƒä»¬ä¼šäº§ç”Ÿä¸ç²¾ç¡®çš„ç»“æœã€‚å› æ­¤ï¼Œ[sqrt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._sqrt%29%29)
    å¯¹äº 2 çš„ç²¾ç¡®å’Œä¸ç²¾ç¡®è¡¨ç¤ºéƒ½è¿”å›ä¸€ä¸ªä¸ç²¾ç¡®æ•°ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ[sqrt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._sqrt%29%29)
    å½“ç»™å®šç²¾ç¡®çš„ 4 å’Œ #i2.0 ä½œä¸º #i4.0 çš„è¾“å…¥æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªç²¾ç¡®çš„ 2ã€‚æœ€åï¼Œæ•™å­¦ç¨‹åºä¸­çš„æ•°å€¼å¸¸é‡è¢«ç†è§£ä¸ºç²¾ç¡®æœ‰ç†æ•°ï¼Œé™¤éå®ƒä»¥ #i å‰ç¼€å¼€å¤´ã€‚'
- en: 'Plain Racket interprets all decimal numbers as inexact numbers; it also renders
    all real numbers as decimals, regardless of whether they are exact or inexact.
    The implication is that all such numbers are dangerous because they are likely
    to be inexact approximations of the true number. A programmer can force Racket
    to interpret numbers with a dot as exact by prefixing numerical constants with
    #e.'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç®€å•çš„ Racket è§£é‡Šå™¨å°†æ‰€æœ‰åè¿›åˆ¶æ•°å­—è§£é‡Šä¸ºä¸ç²¾ç¡®æ•°å­—ï¼›å®ƒè¿˜å°†æ‰€æœ‰å®æ•°è¡¨ç¤ºä¸ºåè¿›åˆ¶ï¼Œæ— è®ºå®ƒä»¬æ˜¯ç²¾ç¡®çš„è¿˜æ˜¯ä¸ç²¾ç¡®çš„ã€‚è¿™æ„å‘³ç€æ‰€æœ‰è¿™äº›æ•°å­—éƒ½æ˜¯å±é™©çš„ï¼Œå› ä¸ºå®ƒä»¬å¾ˆå¯èƒ½æ˜¯çœŸå®æ•°å­—çš„ä¸ç²¾ç¡®è¿‘ä¼¼ã€‚ç¨‹åºå‘˜å¯ä»¥é€šè¿‡åœ¨æ•°å€¼å¸¸é‡å‰åŠ 
    #e æ¥å¼ºåˆ¶ Racket è§£é‡Šå¸¦ç‚¹çš„æ•°å­—ä¸ºç²¾ç¡®æ•°å­—ã€‚'
- en: At this point, you may wonder how much a programâ€™s results may differ from the
    true results if it uses these inexact numbers. This question is one that early
    computer scientists struggled with a lot, and over the pastFor an accessible introductionâ€”<wbr>using
    Racketâ€”<wbr>read [Practically Accurate Floating-Point Math](Https://jeapostrophe.github.io/home/static/tm-cise2014.pdf),
    an article on error analysis by Neil Toronto and Jay McCarthy. It is also fun
    to watch [Debugging Floating-Point Math in Racket](https://www.youtube.com/watch?v=HmtgHVwja4k),
    Neil Torontoâ€™s RacketCon 2011 lecture, available on YouTube. few decades these
    studies have created a separate field, called numerical analysis. Every computer
    scientist, and indeed, every person who uses computers and software, ought to
    be aware of its existence and some of its basic insights into the workings of
    numeric programs. As a first taste, the following exercises illustrate how bad
    things can get. Work through them to never lose sight of the problems of inexact
    numbers.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ å¯èƒ½æƒ³çŸ¥é“å¦‚æœç¨‹åºä½¿ç”¨è¿™äº›ä¸ç²¾ç¡®çš„æ•°å­—ï¼Œå…¶ç»“æœå¯èƒ½æœ‰å¤šå°‘å·®å¼‚ã€‚è¿™æ˜¯ä¸€ä¸ªæ—©æœŸè®¡ç®—æœºç§‘å­¦å®¶ä»¬å¤§é‡æŒ£æ‰çš„é—®é¢˜ï¼Œåœ¨è¿‡å»çš„å‡ åå¹´é‡Œï¼Œè¿™äº›ç ”ç©¶å·²ç»åˆ›é€ äº†ä¸€ä¸ªç‹¬ç«‹çš„é¢†åŸŸï¼Œç§°ä¸ºæ•°å€¼åˆ†æã€‚æ¯ä¸ªè®¡ç®—æœºç§‘å­¦å®¶ï¼Œå®é™…ä¸Šï¼Œæ¯ä¸ªä½¿ç”¨è®¡ç®—æœºå’Œè½¯ä»¶çš„äººï¼Œéƒ½åº”è¯¥æ„è¯†åˆ°å®ƒçš„å­˜åœ¨ä»¥åŠå®ƒå¯¹æ•°å€¼ç¨‹åºå·¥ä½œåŸç†çš„ä¸€äº›åŸºæœ¬æ´å¯Ÿã€‚ä½œä¸ºä¸€ä¸ªåˆæ­¥çš„ä½“éªŒï¼Œä»¥ä¸‹ç»ƒä¹ è¯´æ˜äº†äº‹æƒ…å¯èƒ½å˜å¾—å¤šä¹ˆç³Ÿç³•ã€‚å®Œæˆå®ƒä»¬ï¼Œæ°¸è¿œä¸è¦å¿½è§†ä¸ç²¾ç¡®æ•°å­—çš„é—®é¢˜ã€‚
- en: ExerciseÂ 417\. Evaluate ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)  1.001  1e-12)
    in Racket and in ISL+. Explain what you see.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  417. åœ¨ Racket å’Œ ISL+ ä¸­è¯„ä¼° ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)  1.001  1e-12)ã€‚è§£é‡Šä½ æ‰€çœ‹åˆ°çš„ç»“æœã€‚
- en: ExerciseÂ 418\. Design my-expt without using [expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29).
    The function raises the first given number to the power of the second one, a natural
    number. Using this function, conduct the following experiment. Add
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  418. è®¾è®¡ my-expt å‡½æ•°ï¼Œä¸ä½¿ç”¨ [expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)ã€‚è¯¥å‡½æ•°å°†ç¬¬ä¸€ä¸ªç»™å®šçš„æ•°å­—æå‡ä¸ºç¬¬äºŒä¸ªæ•°å­—çš„å¹‚ï¼Œå³ä¸€ä¸ªè‡ªç„¶æ•°ã€‚ä½¿ç”¨æ­¤å‡½æ•°è¿›è¡Œä»¥ä¸‹å®éªŒã€‚æ·»åŠ 
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â inexÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2B%29%29)Â 1Â #i1e-12))
    |'
  id: totrans-149
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â inexÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2B%29%29)Â 1Â #i1e-12))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â exacÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2B%29%29)Â 1Â 1e-12))
    |'
  id: totrans-150
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â exacÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2B%29%29)Â 1Â 1e-12))
    |'
- en: to the definitions area. What is (my-expt  inex  30)? And how about (my-expt  exac  30)?
    Which answer is more useful?
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: å°†å…¶æ·»åŠ åˆ°å®šä¹‰åŒºåŸŸã€‚ä»€ä¹ˆæ˜¯ (my-expt  inex  30)ï¼Ÿè¿˜æœ‰ (my-expt  exac  30) å‘¢ï¼Ÿå“ªä¸ªç­”æ¡ˆæ›´æœ‰ç”¨ï¼Ÿ
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â JANUS
    |'
  id: totrans-152
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â JANUS
    |'
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29)Â 31.0
    |'
  id: totrans-153
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29)Â 31.0
    |'
- en: '| Â Â Â Â Â Â Â Â #i2e+34 |'
  id: totrans-154
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â #i2e+34 |'
- en: '| Â Â Â Â Â Â Â Â #i-1.2345678901235e+80 |'
  id: totrans-155
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â #i-1.2345678901235e+80 |'
- en: '| Â Â Â Â Â Â Â Â 2749.0 |'
  id: totrans-156
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â 2749.0 |'
- en: '| Â Â Â Â Â Â Â Â -2939234.0 |'
  id: totrans-157
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â -2939234.0 |'
- en: '| Â Â Â Â Â Â Â Â #i-2e+33 |'
  id: totrans-158
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â #i-2e+33 |'
- en: '| Â Â Â Â Â Â Â Â #i3.2e+270 |'
  id: totrans-159
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â #i3.2e+270 |'
- en: '| Â Â Â Â Â Â Â Â 17.0 |'
  id: totrans-160
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â 17.0 |'
- en: '| Â Â Â Â Â Â Â Â #i-2.4e+270 |'
  id: totrans-161
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â #i-2.4e+270 |'
- en: '| Â Â Â Â Â Â Â Â #i4.2344294738446e+170 |'
  id: totrans-162
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â #i4.2344294738446e+170 |'
- en: '| Â Â Â Â Â Â Â Â 1.0 |'
  id: totrans-163
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â 1.0 |'
- en: '| Â Â Â Â Â Â Â Â #i-8e+269 |'
  id: totrans-164
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â #i-8e+269 |'
- en: '| Â Â Â Â Â Â Â Â 0.0 |'
  id: totrans-165
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â 0.0 |'
- en: '| Â Â Â Â Â Â Â Â 99.0)) |'
  id: totrans-166
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â 99.0)) |'
- en: ''
  id: totrans-167
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 144: A Janus-faced series of inexact numbers'
  id: totrans-168
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 144ï¼šä¸€ä¸ªåŒé¢æ•°çš„ Janus ç³»åˆ—å›¾
- en: 'ExerciseÂ 419\. When you add two inexact numbers of vastly different orders
    of magnitude, you may get the larger one back as the result. For example, if a
    number system uses only 15 significant digits, we run into problems when adding
    numbers that vary by more than a factor of ![image](../Images/769a0712df6472da5d4ad975c9a35864.png):'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  419ã€‚å½“ä½ å°†ä¸¤ä¸ªæ•°é‡çº§å·®å¼‚å¾ˆå¤§çš„ä¸ç²¾ç¡®æ•°å­—ç›¸åŠ æ—¶ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°è¾ƒå¤§çš„ä¸€ä¸ªä½œä¸ºç»“æœã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ•°åˆ¶åªä½¿ç”¨ 15 ä½æœ‰æ•ˆæ•°å­—ï¼Œå½“æˆ‘ä»¬ç›¸åŠ ç›¸å·®è¶…è¿‡
    ![image](../Images/769a0712df6472da5d4ad975c9a35864.png) çš„æ•°å­—æ—¶ï¼Œæˆ‘ä»¬å°±ä¼šé‡åˆ°é—®é¢˜ï¼š
- en: '![image](../Images/c1aa1c0e98f213fc9d6cace4dc3292fd.png)'
  id: totrans-170
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/c1aa1c0e98f213fc9d6cace4dc3292fd.png)'
- en: 'but the closest representable answer is ![image](../Images/6bf392428c09f79b62a1830fbb0d7727.png).At
    first glance, this approximation doesnâ€™t look too bad. Being wrong by one part
    in ![image](../Images/8fdfdacb4c508ab1cd38aa14f6242203.png) (ten million billion)
    is close enough to the truth. Unfortunately, this kind of problem can add up to
    huge problems. Consider the list of numbers in [figureÂ 144](#%28counter._%28figure._fig~3ajanus%29%29)
    and determine the values of these expressions:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æœ€æ¥è¿‘çš„å¯è¡¨ç¤ºç­”æ¡ˆæ˜¯ ![image](../Images/6bf392428c09f79b62a1830fbb0d7727.png)ã€‚ä¹ä¸€çœ‹ï¼Œè¿™ç§è¿‘ä¼¼çœ‹èµ·æ¥å¹¶ä¸å¤ªç³Ÿç³•ã€‚é”™è¯¯çš„éƒ¨åˆ†åœ¨
    ![image](../Images/8fdfdacb4c508ab1cd38aa14f6242203.png)ï¼ˆåäº¿äº¿åˆ†ä¹‹ä¸€ï¼‰å†…ï¼Œè¶³å¤Ÿæ¥è¿‘çœŸå®å€¼ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™ç±»é—®é¢˜å¯èƒ½ä¼šç´¯ç§¯æˆå·¨å¤§çš„é—®é¢˜ã€‚è€ƒè™‘å›¾
    144 ä¸­çš„æ•°å­—åˆ—è¡¨ï¼Œå¹¶ç¡®å®šè¿™äº›è¡¨è¾¾å¼çš„å€¼ï¼š
- en: (sum  JANUS)
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (sum  JANUS)
- en: (sum  ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._reverse%29%29)  JANUS))
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (sum  ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._reverse%29%29)  JANUS))
- en: (sum  ([sort](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._sort%29%29)  JANUS  [<](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3c%29%29)))
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (sum  ([sort](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._sort%29%29)  JANUS  [<](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3c%29%29)))
- en: 'Assuming sum adds the numbers in a list from left to right, explain what these
    expressions compute. What do you think of the results?Generic advice on inexact
    calculations tells programmers to start additions with the smallest numbers. While
    adding a big number to two small numbers might yield the big one, adding small
    numbers first creates a large one, which might change the outcome:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ sum ä»å·¦åˆ°å³å°†åˆ—è¡¨ä¸­çš„æ•°å­—ç›¸åŠ ï¼Œè§£é‡Šè¿™äº›è¡¨è¾¾å¼è®¡ç®—çš„æ˜¯ä»€ä¹ˆã€‚ä½ è®¤ä¸ºç»“æœå¦‚ä½•ï¼Ÿå…³äºä¸ç²¾ç¡®è®¡ç®—çš„é€šç”¨å»ºè®®å‘Šè¯‰ç¨‹åºå‘˜ä»æœ€å°çš„æ•°å­—å¼€å§‹åŠ æ³•ã€‚è™½ç„¶å°†ä¸€ä¸ªå¤§æ•°å­—åŠ åˆ°ä¸¤ä¸ªå°æ•°å­—ä¸Šå¯èƒ½ä¼šå¾—åˆ°å¤§æ•°å­—ï¼Œä½†å…ˆåŠ å°æ•°å­—ä¼šå¾—åˆ°ä¸€ä¸ªè¾ƒå¤§çš„æ•°å­—ï¼Œè¿™å¯èƒ½ä¼šæ”¹å˜ç»“æœï¼š
- en: '| > ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â 2Â #i53.0)
    |'
  id: totrans-176
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â 2Â #i53.0)
    |'
- en: '| #i9007199254740992.0 |'
  id: totrans-177
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #i9007199254740992.0 |'
- en: '| > (sumÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29)Â #i1.0Â ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â 2Â #i53.0)))
    |'
  id: totrans-178
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (sumÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29)Â #i1.0Â ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â 2Â #i53.0)))
    |'
- en: '| #i9007199254740992.0 |'
  id: totrans-179
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #i9007199254740992.0 |'
- en: '| > (sumÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29)Â #i1.0Â #i1.0Â ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â 2Â #i53.0)))
    |'
  id: totrans-180
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (sumÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._list%29%29)Â #i1.0Â #i1.0Â ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â 2Â #i53.0)))
    |'
- en: '| #i9007199254740994.0 |'
  id: totrans-181
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #i9007199254740994.0 |'
- en: 'This trick may not work; see the JANUS interactions above.In a language such
    as ISL+, you can convert the numbers to exact rationals, use exact arithmetic
    on those, and convert the result back:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæŠ€å·§å¯èƒ½ä¸èµ·ä½œç”¨ï¼›å‚è§ä¸Šé¢çš„JANUSäº¤äº’ã€‚åœ¨ISL+ä¹‹ç±»çš„è¯­è¨€ä¸­ï¼Œä½ å¯ä»¥å°†æ•°å­—è½¬æ¢ä¸ºç²¾ç¡®æœ‰ç†æ•°ï¼Œåœ¨è¿™äº›æ•°å­—ä¸Šä½¿ç”¨ç²¾ç¡®ç®—æœ¯ï¼Œå¹¶å°†ç»“æœè½¬æ¢å›æ¥ï¼š
- en: ([exact->inexact](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._exact-~3einexact%29%29)Â (sumÂ ([map](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._map%29%29)Â [inexact->exact](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._inexact-~3eexact%29%29)Â JANUS)))
  id: totrans-183
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([ç²¾ç¡®åˆ°ä¸ç²¾ç¡®](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._exact-~3einexact%29%29)Â (sumÂ ([map](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._map%29%29)Â [inexact->exact](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._inexact-~3eexact%29%29)Â JANUS)))
- en: 'Evaluate this expression and compare the result to the three sums above. What
    do you think now about advice from the web?ExerciseÂ 420\. JANUS is just a fixed
    list, but take a look at this function:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: è¯„ä¼°è¿™ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶å°†ç»“æœä¸ä¸Šé¢çš„ä¸‰ä¸ªæ±‚å’Œç»“æœè¿›è¡Œæ¯”è¾ƒã€‚ä½ ç°åœ¨å¯¹æ¥è‡ªç½‘ç»œçš„å»ºè®®æœ‰ä½•çœ‹æ³•ï¼Ÿç»ƒä¹ 420ã€‚JANUSåªæ˜¯ä¸€ä¸ªå›ºå®šåˆ—è¡¨ï¼Œä½†çœ‹çœ‹è¿™ä¸ªå‡½æ•°ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â (oscillateÂ n)
    |'
  id: totrans-185
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â (oscillateÂ n)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â (OÂ i)
    |'
  id: totrans-186
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._define%29%29)Â (OÂ i)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cond%29%29)
    |'
  id: totrans-187
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3e%29%29)Â iÂ n)Â ''()]
    |'
  id: totrans-188
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._~3e%29%29)Â iÂ n)Â ''()]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._else%29%29)
    |'
  id: totrans-189
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28form._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cons%29%29)Â ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â #i-0.99Â i)Â (OÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2B%29%29)Â iÂ 1)))])))
    |'
  id: totrans-190
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._cons%29%29)Â ([expt](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._expt%29%29)Â #i-0.99Â i)Â (OÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2B%29%29)Â iÂ 1)))])))
    |'
- en: '| Â Â Â Â (OÂ 1))) |'
  id: totrans-191
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (OÂ 1))) |'
- en: Applying oscillate to a natural number n produces the first n elements of a
    mathematical series. It is best understood as a graph, like the one in [figureÂ 145](#%28counter._%28figure._fig~3aoscillate%29%29).
    Run (oscillate  15) in DrRacket and inspect the result.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: å°†æŒ¯è¡åº”ç”¨äºè‡ªç„¶æ•°nä¼šäº§ç”Ÿæ•°å­¦çº§æ•°çš„å‰nä¸ªå…ƒç´ ã€‚æœ€å¥½å°†å…¶ç†è§£ä¸ºå›¾è¡¨ï¼Œå°±åƒ[å›¾145](#%28counter._%28figure._fig~3aoscillate%29%29)ä¸­çš„é‚£æ ·ã€‚åœ¨DrRacketä¸­è¿è¡Œ(oscillate  15)å¹¶æ£€æŸ¥ç»“æœã€‚
- en: '![image](../Images/027195280e1b9cd07d49364a20b6b029.png)'
  id: totrans-193
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/027195280e1b9cd07d49364a20b6b029.png)'
- en: ''
  id: totrans-194
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 145: The graph of oscillate'
  id: totrans-195
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾145ï¼šæŒ¯è¡å›¾
- en: 'Summing its results from left to right computes a different result than from
    right to left:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: ä»å·¦åˆ°å³ç´¯åŠ å…¶ç»“æœä¸ä»å³åˆ°å·¦ç´¯åŠ çš„ç»“æœä¸åŒï¼š
- en: '| > (sumÂ (oscillateÂ #i1000.0)) |'
  id: totrans-197
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (sumÂ (oscillateÂ #i1000.0)) |'
- en: '| #i-0.49746596003269394 |'
  id: totrans-198
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #i-0.49746596003269394 |'
- en: '| > (sumÂ ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._reverse%29%29)Â (oscillateÂ #i1000.0)))
    |'
  id: totrans-199
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (sumÂ ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._reverse%29%29)Â (oscillateÂ #i1000.0)))
    |'
- en: '| #i-0.4974659600326953 |'
  id: totrans-200
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #i-0.4974659600326953 |'
- en: 'Again, the difference may appear to be small until we see the context:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: å†æ¬¡ï¼Œå·®å¼‚å¯èƒ½çœ‹èµ·æ¥å¾ˆå°ï¼Œç›´åˆ°æˆ‘ä»¬çœ‹åˆ°ä¸Šä¸‹æ–‡ï¼š
- en: '|'
  id: totrans-202
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-203
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([-](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._-%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2A%29%29)Â 1e+16Â (sumÂ (oscillateÂ #i1000.0)))
    &#124;'
  id: totrans-204
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([-](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._-%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2A%29%29)Â 1e+16Â (sumÂ (oscillateÂ #i1000.0))))
    |'
- en: '&#124; Â Â Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2A%29%29)Â 1e+16Â (sumÂ ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._reverse%29%29)Â (oscillateÂ #i1000.0)))))
    &#124;'
  id: totrans-205
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._%2A%29%29)Â 1e+16Â (sumÂ ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._reverse%29%29)Â (oscillateÂ #i1000.0))))
    |'
- en: ''
  id: totrans-206
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-207
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| #i14.0 |'
  id: totrans-208
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #i14.0 |'
- en: Can this difference matter? Can we trust computers?
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§å·®å¼‚é‡è¦å—ï¼Ÿæˆ‘ä»¬èƒ½ä¿¡ä»»è®¡ç®—æœºå—ï¼Ÿ
- en: The question is which numbers programmers should use in their programs if they
    are given a choice. The answer depends on the context, of course. In the world
    of financial statements, numerical constants should be interpreted as exact numbers,
    and computational manipulations of financial statements ought to be able to rely
    on the exactness-preserving nature of mathematical operations. After all, the
    law cannot accommodate the serious errors that come with inexact numbers and their
    operations. In scientific computations, however, the extra time needed to produce
    exact results might impose too much of a burden. Scientists therefore tend to
    use inexact numbers but carefully analyze their programs to make sure that the
    numerical errors are tolerable for their uses of the outputs of programs.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: é—®é¢˜æ˜¯ï¼Œå¦‚æœç¨‹åºå‘˜æœ‰é€‰æ‹©çš„è¯ï¼Œä»–ä»¬åº”è¯¥åœ¨ç¨‹åºä¸­ä½¿ç”¨å“ªäº›æ•°å­—ã€‚ç­”æ¡ˆå½“ç„¶å–å†³äºä¸Šä¸‹æ–‡ã€‚åœ¨è´¢åŠ¡æŠ¥è¡¨çš„ä¸–ç•Œé‡Œï¼Œæ•°å€¼å¸¸æ•°åº”è¢«è§£é‡Šä¸ºç²¾ç¡®æ•°å­—ï¼Œè´¢åŠ¡æŠ¥è¡¨çš„è®¡ç®—æ“ä½œåº”è¯¥èƒ½å¤Ÿä¾èµ–äºæ•°å­¦è¿ç®—çš„ç²¾ç¡®æ€§ä¿æŒæ€§è´¨ã€‚æ¯•ç«Ÿï¼Œæ³•å¾‹æ— æ³•å®¹å¿ä¸ç²¾ç¡®æ•°å­—åŠå…¶æ“ä½œå¸¦æ¥çš„ä¸¥é‡é”™è¯¯ã€‚ç„¶è€Œï¼Œåœ¨ç§‘å­¦è®¡ç®—ä¸­ï¼Œäº§ç”Ÿç²¾ç¡®ç»“æœæ‰€éœ€çš„å¤šä½™æ—¶é—´å¯èƒ½ä¼šå¸¦æ¥è¿‡é‡çš„è´Ÿæ‹…ã€‚å› æ­¤ï¼Œç§‘å­¦å®¶å€¾å‘äºä½¿ç”¨ä¸ç²¾ç¡®æ•°å­—ï¼Œä½†ä¼šä»”ç»†åˆ†æä»–ä»¬çš„ç¨‹åºï¼Œä»¥ç¡®ä¿æ•°å€¼è¯¯å·®å¯¹äºä»–ä»¬ä½¿ç”¨ç¨‹åºè¾“å‡ºæ˜¯å¯å®¹å¿çš„ã€‚
