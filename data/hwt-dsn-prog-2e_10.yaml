- en: IVÂ Intertwined DatağŸ”—
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: IVÂ äº¤ç»‡æ•°æ®ğŸ”—
- en: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/part_four.html](https://htdp.org/2024-11-6/Book/part_four.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/part_four.html](https://htdp.org/2024-11-6/Book/part_four.html)
- en: '| Â Â Â Â [19Â The Poetry of S-expressions](#%28part._ch~3apoetry-sexp%29) |'
  id: totrans-2
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â [19Â Sè¡¨è¾¾å¼çš„è¯—æ„](#%28part._ch~3apoetry-sexp%29) |'
- en: '| Â Â Â Â Â Â [19.1Â Trees](#%28part._sec~3abtrees%29) |'
  id: totrans-3
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [19.1Â æ ‘](#%28part._sec~3abtrees%29) |'
- en: '| Â Â Â Â Â Â [19.2Â Forests](#%28part._sec~3aforests%29) |'
  id: totrans-4
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [19.2Â æ£®æ—](#%28part._sec~3aforests%29) |'
- en: '| Â Â Â Â Â Â [19.3Â S-expressions](#%28part._sec~3asexp%29) |'
  id: totrans-5
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [19.3Â Sè¡¨è¾¾å¼](#%28part._sec~3asexp%29) |'
- en: '| Â Â Â Â Â Â [19.4Â Designing with Intertwined Data](#%28part._sec~3adesign-.N%29)
    |'
  id: totrans-6
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [19.4Â ä½¿ç”¨äº¤ç»‡æ•°æ®è®¾è®¡](#%28part._sec~3adesign-.N%29) |'
- en: '| Â Â Â Â Â Â [19.5Â Project: BSTs](#%28part._sec~3aproj-bst%29) |'
  id: totrans-7
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [19.5Â é¡¹ç›®ï¼šäºŒå‰æœç´¢æ ‘](#%28part._sec~3aproj-bst%29) |'
- en: '| Â Â Â Â Â Â [19.6Â Simplifying Functions](#%28part._sec~3asimplification%29) |'
  id: totrans-8
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [19.6Â ç®€åŒ–å‡½æ•°](#%28part._sec~3asimplification%29) |'
- en: '| Â Â Â Â [20Â Iterative Refinement](#%28part._ch~3afiles%29) |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â [20Â è¿­ä»£ç»†åŒ–](#%28part._ch~3afiles%29) |'
- en: '| Â Â Â Â Â Â [20.1Â Data Analysis](#%28part._sec~3afiles-what%29) |'
  id: totrans-10
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [20.1Â æ•°æ®åˆ†æ](#%28part._sec~3afiles-what%29) |'
- en: '| Â Â Â Â Â Â [20.2Â Refining Data Definitions](#%28part._sec~3afiles-models%29) |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [20.2Â ç»†åŒ–æ•°æ®å®šä¹‰](#%28part._sec~3afiles-models%29) |'
- en: '| Â Â Â Â Â Â [20.3Â Refining Functions](#%28part._sec~3arefine-funcs%29) |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [20.3Â ç»†åŒ–å‡½æ•°](#%28part._sec~3arefine-funcs%29) |'
- en: '| Â Â Â Â [21Â Refining Interpreters](#%28part._ch~3aevaluator%29) |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â [21Â ç»†åŒ–è§£é‡Šå™¨](#%28part._ch~3aevaluator%29) |'
- en: '| Â Â Â Â Â Â [21.1Â Interpreting Expressions](#%28part._sec~3ainterpreter%29) |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [21.1Â è§£é‡Šè¡¨è¾¾å¼](#%28part._sec~3ainterpreter%29) |'
- en: '| Â Â Â Â Â Â [21.2Â Interpreting Variables](#%28part._sec~3ainterpreter-variables%29)
    |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [21.2Â è§£é‡Šå˜é‡](#%28part._sec~3ainterpreter-variables%29) |'
- en: '| Â Â Â Â Â Â [21.3Â Interpreting Functions](#%28part._sec~3ainterpreter-functions%29)
    |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [21.3Â è§£é‡Šå‡½æ•°](#%28part._sec~3ainterpreter-functions%29)'
- en: '| Â Â Â Â Â Â [21.4Â Interpreting Everything](#%28part._sec~3ainterpreter-all%29)
    |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [21.4Â è§£é‡Šä¸€åˆ‡](#%28part._sec~3ainterpreter-all%29) |'
- en: '| Â Â Â Â [22Â Project: The Commerce of XML](#%28part._ch~3amoney-sexp%29) |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â [22Â é¡¹ç›®ï¼šXMLçš„å•†ä¸š](#%28part._ch~3amoney-sexp%29) |'
- en: '| Â Â Â Â Â Â [22.1Â XML as S-expressions](#%28part._sec~3axml%29) |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [22.1Â XMLä½œä¸ºSè¡¨è¾¾å¼](#%28part._sec~3axml%29) |'
- en: '| Â Â Â Â Â Â [22.2Â Rendering XML Enumerations](#%28part._sec~3aenum%29) |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [22.2Â æ¸²æŸ“XMLæšä¸¾](#%28part._sec~3aenum%29) |'
- en: '| Â Â Â Â Â Â [22.3Â Domain-Specific Languages](#%28part._sec~3aconfig%29) |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [22.3Â é¢†åŸŸç‰¹å®šè¯­è¨€](#%28part._sec~3aconfig%29) |'
- en: '| Â Â Â Â Â Â [22.4Â Reading XML](#%28part._sub~3areading-xml%29) |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [22.4Â è¯»å–XML](#%28part._sub~3areading-xml%29) |'
- en: '| Â Â Â Â [23Â Simultaneous Processing](#%28part._ch~3asimu%29) |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â [23Â åŒæ—¶å¤„ç†](#%28part._ch~3asimu%29) |'
- en: '| Â Â Â Â Â Â [23.1Â Processing Two Lists Simultaneously: Case 1](#%28part._sec~3atwo-inputs~3acase1%29)
    |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [23.1Â åŒæ—¶å¤„ç†ä¸¤ä¸ªåˆ—è¡¨ï¼šæƒ…å†µ1](#%28part._sec~3atwo-inputs~3acase1%29) |'
- en: '| Â Â Â Â Â Â [23.2Â Processing Two Lists Simultaneously: Case 2](#%28part._sec~3atwo-inputs~3acase2%29)
    |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [23.2Â åŒæ—¶å¤„ç†ä¸¤ä¸ªåˆ—è¡¨ï¼šæƒ…å†µ2](#%28part._sec~3atwo-inputs~3acase2%29) |'
- en: '| Â Â Â Â Â Â [23.3Â Processing Two Lists Simultaneously: Case 3](#%28part._sec~3atwo-inputs~3acase3%29)
    |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [23.3Â åŒæ—¶å¤„ç†ä¸¤ä¸ªåˆ—è¡¨ï¼šæƒ…å†µ3](#%28part._sec~3atwo-inputs~3acase3%29) |'
- en: '| Â Â Â Â Â Â [23.4Â Function Simplification](#%28part._sec~3atwo-inputs~3asimplify%29)
    |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [23.4Â å‡½æ•°ç®€åŒ–](#%28part._sec~3atwo-inputs~3asimplify%29) |'
- en: '| Â Â Â Â Â Â [23.5Â Designing Functions that Consume Two Complex Inputs](#%28part._sec~3atwo-inputs~3adesign%29)
    |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [23.5Â è®¾è®¡æ¶ˆè´¹ä¸¤ä¸ªå¤æ‚è¾“å…¥çš„å‡½æ•°](#%28part._sec~3atwo-inputs~3adesign%29) |'
- en: '| Â Â Â Â Â Â [23.6Â Finger Exercises: Two Inputs](#%28part._sec~3atwo-inputs~3aex%29)
    |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [23.6Â æ‰‹æŒ‡ç»ƒä¹ ï¼šä¸¤ä¸ªè¾“å…¥](#%28part._sec~3atwo-inputs~3aex%29) |'
- en: '| Â Â Â Â Â Â [23.7Â Project: Database](#%28part._db._sec~3aproj-db%29) |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [23.7Â é¡¹ç›®ï¼šæ•°æ®åº“](#%28part._db._sec~3aproj-db%29) |'
- en: '| Â Â Â Â [24Â Summary](#%28part._ch~3asummary4%29) |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| Â Â Â Â [24Â æ€»ç»“](#%28part._ch~3asummary4%29) |'
- en: You might think that the data definitions for lists and natural numbers are
    quite unusual. These data definitions refer to themselves, and in all likelihood
    they are the first such definitions you have ever encountered. As it turns out,
    many classes of data require even more complex data definitions than these two.
    Common generalizations involve many self-references in one data definition or
    a bunch of data definitions that refer to each other. These forms of data have
    become ubiquitous, and it is therefore critical for a programmer to learn to cope
    with any collection of data definitions. And thatâ€™s what the design recipe is
    all about.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½ä¼šè®¤ä¸ºåˆ—è¡¨å’Œè‡ªç„¶æ•°çš„å®šä¹‰ç›¸å½“ä¸å¯»å¸¸ã€‚è¿™äº›æ•°æ®å®šä¹‰æ¶‰åŠè‡ªèº«ï¼Œå¹¶ä¸”å¾ˆå¯èƒ½è¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡é‡åˆ°è¿™æ ·çš„å®šä¹‰ã€‚å®é™…ä¸Šï¼Œè®¸å¤šæ•°æ®ç±»åˆ«éœ€è¦æ¯”è¿™ä¸¤ä¸ªæ›´å¤æ‚çš„æ•°æ®å®šä¹‰ã€‚å¸¸è§çš„æ¨å¹¿æ¶‰åŠä¸€ä¸ªæ•°æ®å®šä¹‰ä¸­çš„è®¸å¤šè‡ªæˆ‘å¼•ç”¨æˆ–ä¸€ç³»åˆ—ç›¸äº’å¼•ç”¨çš„æ•°æ®å®šä¹‰ã€‚è¿™äº›æ•°æ®å½¢å¼å·²ç»å˜å¾—æ— å¤„ä¸åœ¨ï¼Œå› æ­¤å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œå­¦ä¼šå¤„ç†ä»»ä½•æ•°æ®å®šä¹‰é›†åˆè‡³å…³é‡è¦ã€‚è¿™æ­£æ˜¯è®¾è®¡é£Ÿè°±çš„å…¨éƒ¨å†…å®¹ã€‚
- en: 'This part starts with a generalization of the design recipe so that it works
    for all forms of structural data definitions. Next, it introduces the concept
    of iterative refinement from [Projects: Lists](part_two.html#%28part._ch~3aproj-lists%29)
    on a rigorous basis because complex data definitions are not developed in one
    fell swoop but in several stages. Indeed, the use of iterative refinement is one
    of the reasons why all programmers are little scientists and why our discipline
    uses the word â€œscienceâ€ in its American name. Two last chapters illustrate these
    ideas: one explains how to design an interpreter for BSL and another is about
    processing XML, a data exchange language for the web. The last chapter expands
    the design recipe one more time, reworking it for functions that process two complex
    arguments at the same time.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬éƒ¨åˆ†ä»å¯¹è®¾è®¡æ–¹æ¡ˆçš„æ³›åŒ–å¼€å§‹ï¼Œä½¿å…¶é€‚ç”¨äºæ‰€æœ‰å½¢å¼çš„ç»“æ„åŒ–æ•°æ®å®šä¹‰ã€‚æ¥ä¸‹æ¥ï¼Œå®ƒåŸºäº[é¡¹ç›®ï¼šåˆ—è¡¨](part_two.html#%28part._ch~3aproj-lists%29)ä¸­çš„è¿­ä»£ç»†åŒ–æ¦‚å¿µè¿›è¡Œä»‹ç»ï¼Œå› ä¸ºå¤æ‚çš„æ•°æ®å®šä¹‰ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œè€Œæ˜¯åœ¨å‡ ä¸ªé˜¶æ®µé€æ­¥å‘å±•ã€‚å®é™…ä¸Šï¼Œè¿­ä»£ç»†åŒ–çš„ä½¿ç”¨æ˜¯æ‰€æœ‰ç¨‹åºå‘˜éƒ½æ˜¯å°å°ç§‘å­¦å®¶ä»¥åŠæˆ‘ä»¬çš„å­¦ç§‘åœ¨ç¾å¼åç§°ä¸­ä½¿ç”¨â€œç§‘å­¦â€ä¸€è¯çš„åŸå› ä¹‹ä¸€ã€‚æœ€åä¸¤ç« é˜è¿°äº†è¿™äº›æ€æƒ³ï¼šä¸€ç« è§£é‡Šäº†å¦‚ä½•ä¸ºBSLè®¾è®¡è§£é‡Šå™¨ï¼Œå¦ä¸€ç« æ˜¯å…³äºå¤„ç†XMLï¼Œè¿™æ˜¯ä¸€ç§ç½‘ç»œæ•°æ®äº¤æ¢è¯­è¨€ã€‚æœ€åä¸€ç« å†æ¬¡æ‰©å±•äº†è®¾è®¡æ–¹æ¡ˆï¼Œé‡æ–°è®¾è®¡ä»¥å¤„ç†åŒæ—¶å¤„ç†ä¸¤ä¸ªå¤æ‚å‚æ•°çš„å‡½æ•°ã€‚
- en: 19The Poetry of S-expressions[ğŸ”—](#(part._ch~3apoetry-sexp) "Link to here")
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 19 Sè¡¨è¾¾å¼çš„è¯—æ„[ğŸ”—](#(part._ch~3apoetry-sexp) "é“¾æ¥è‡³æ­¤")
- en: Programming resembles poetry. Like poets, programmers practice their skill on
    seemingly pointless ideas. They revise and edit all the time, as the preceding
    chapter explains. This chapter introduces increasingly complex forms of dataâ€”<wbr>seemingly
    without a real-world purpose. Even when we provide a motivational background,
    the chosen kinds of data are pure to an extreme, and it is unlikely that you will
    ever encounter them again.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: ç¼–ç¨‹ç±»ä¼¼äºè¯—æ­Œã€‚åƒè¯—äººä¸€æ ·ï¼Œç¨‹åºå‘˜åœ¨çœ‹ä¼¼æ— æ„ä¹‰çš„æ€æƒ³ä¸Šç»ƒä¹ ä»–ä»¬çš„æŠ€èƒ½ã€‚ä»–ä»¬ä¸æ–­åœ°ä¿®è®¢å’Œç¼–è¾‘ï¼Œæ­£å¦‚å‰ä¸€ç« æ‰€è§£é‡Šçš„ã€‚æœ¬ç« ä»‹ç»äº†è¶Šæ¥è¶Šå¤æ‚çš„æ•°æ®å½¢å¼â€”â€”çœ‹ä¼¼æ²¡æœ‰çœŸæ­£çš„ç°å®ä¸–ç•Œç”¨é€”ã€‚å³ä½¿æˆ‘ä»¬æä¾›äº†åŠ¨æœºèƒŒæ™¯ï¼Œé€‰æ‹©çš„æ•°æ®ç±»å‹ä¹Ÿæ˜¯æç«¯çº¯ç²¹çš„ï¼Œä½ ä¸å¤ªå¯èƒ½å†æ¬¡é‡åˆ°å®ƒä»¬ã€‚
- en: 'Nevertheless, this chapter shows the full power of the design recipe and introduces
    you to the kinds of data that real-world programs cope with. To connect this material
    with what you will encounter in your life as a programmer, we label each section
    with appropriate names: trees, forests, XML. The last one is a bit misleading
    because it is really about S-expressions; the connection between S-expressions
    and XML is clarified in [Project: The Commerce of XML](#%28part._ch~3amoney-sexp%29),
    which, in contrast to this chapter, comes much closer to real-world uses of complex
    forms of data.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œæœ¬ç« å±•ç¤ºäº†è®¾è®¡æ–¹æ¡ˆçš„å®Œæ•´åŠ›é‡ï¼Œå¹¶ä»‹ç»äº†ç°å®ä¸–ç•Œç¨‹åºå¤„ç†çš„æ•°æ®ç±»å‹ã€‚ä¸ºäº†å°†è¿™éƒ¨åˆ†å†…å®¹ä¸ä½ åœ¨ä½œä¸ºç¨‹åºå‘˜çš„ç”Ÿæ´»ä¸­ä¼šé‡åˆ°çš„å†…å®¹è”ç³»èµ·æ¥ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªéƒ¨åˆ†æ·»åŠ äº†é€‚å½“çš„åç§°ï¼šæ ‘ã€æ£®æ—ã€XMLã€‚æœ€åä¸€ä¸ªåç§°æœ‰ç‚¹è¯¯å¯¼ï¼Œå› ä¸ºå®ƒå®é™…ä¸Šå…³äºSè¡¨è¾¾å¼ï¼›Sè¡¨è¾¾å¼ä¸XMLä¹‹é—´çš„è”ç³»åœ¨[é¡¹ç›®ï¼šXMLçš„å•†ä¸šäº¤æ˜“](#%28part._ch~3amoney-sexp%29)ä¸­å¾—åˆ°äº†é˜æ˜ï¼Œä¸æœ¬ç« ç›¸æ¯”ï¼Œå®ƒæ›´æ¥è¿‘ç°å®ä¸–ç•Œä¸­å¤æ‚æ•°æ®å½¢å¼çš„åº”ç”¨ã€‚
- en: 19.1Trees[ğŸ”—](#(part._sec~3abtrees) "Link to here")
  id: totrans-37
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.1 æ ‘[ğŸ”—](#(part._sec~3abtrees) "é“¾æ¥è‡³æ­¤")
- en: All of us have a family tree. One way to draw a family tree is to add an element
    every time a child is born and to connect the elements of the father and mother.
    For those people whose parents are unknown, there is no connection to draw. The
    result is an ancestor family tree because, given any person, the tree points to
    all of the personâ€™s known ancestors.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æ¯ä¸ªäººéƒ½æœ‰ä¸€ä¸ªå®¶æ—æ ‘ã€‚ç»˜åˆ¶å®¶æ—æ ‘çš„ä¸€ç§æ–¹æ³•æ˜¯åœ¨æ¯æ¬¡æœ‰å­©å­å‡ºç”Ÿæ—¶æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†çˆ¶äº²å’Œæ¯äº²çš„å…ƒç´ è¿æ¥èµ·æ¥ã€‚å¯¹äºé‚£äº›çˆ¶æ¯ä¸ä¸ºäººçŸ¥çš„äººï¼Œæ²¡æœ‰å¯ä»¥è¿æ¥çš„å…ƒç´ ã€‚ç»“æœæ˜¯ç¥–å…ˆå®¶æ—æ ‘ï¼Œå› ä¸ºï¼Œå¯¹äºä»»ä½•ä¸€ä¸ªäººæ¥è¯´ï¼Œè¿™æ£µæ ‘éƒ½æŒ‡å‘è¯¥äººæ‰€æœ‰å·²çŸ¥çš„ç¥–å…ˆã€‚
- en: '![image](../Images/ee2a68d522cfb0c9128cc6dda4bee436.png)'
  id: totrans-39
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![å›¾ç‰‡](../Images/ee2a68d522cfb0c9128cc6dda4bee436.png)'
- en: ''
  id: totrans-40
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 111: A family tree'
  id: totrans-41
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾111ï¼šå®¶æ—æ ‘
- en: '[FigureÂ 111](#%28counter._%28figure._fig~3afamily-tree%29%29) displays a three-tier
    family tree. Gustav is the child of Eva and Fred, while Eva is the child of Carl
    and Bettina. In addition to peopleâ€™s names and family relationships, the tree
    also records years of birth and eye colors. Based on this sketch, you can easily
    imagine a family tree reaching back many generations and one that records other
    kinds of information.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾111](#%28counter._%28figure._fig~3afamily-tree%29%29)å±•ç¤ºäº†ä¸€ä¸ªä¸‰å±‚å®¶åº­æ ‘ã€‚å¤æ–¯å¡”å¤«æ˜¯ä¼Šå¨ƒå’Œå¼—é›·å¾·çš„å„¿å­ï¼Œè€Œä¼Šå¨ƒæ˜¯å¡å°”å’Œè´è’‚å¨œçš„å¥³å„¿ã€‚é™¤äº†äººä»¬çš„åå­—å’Œå®¶åº­å…³ç³»å¤–ï¼Œè¿™æ£µæ ‘è¿˜è®°å½•äº†å‡ºç”Ÿå¹´ä»½å’Œçœ¼ç›é¢œè‰²ã€‚åŸºäºè¿™ä¸ªè‰å›¾ï¼Œä½ å¯ä»¥è½»æ¾åœ°æƒ³è±¡ä¸€æ£µå¯ä»¥è¿½æº¯åˆ°è®¸å¤šä»£äººçš„å®¶æ—æ ‘ï¼Œå¹¶è®°å½•å…¶ä»–ç±»å‹çš„ä¿¡æ¯ã€‚'
- en: 'Once a family tree is large, it makes sense to represent it as data and to
    design programs that process this kind of data. Given that a point in a family
    tree combines five pieces of informationâ€”<wbr>the father, the mother, the name,
    the birth date, and the eye colorâ€”<wbr>we should define a structure type:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦å®¶è°±å˜å¾—åºå¤§ï¼Œå°†å…¶è¡¨ç¤ºä¸ºæ•°æ®å¹¶è®¾è®¡å¤„ç†æ­¤ç±»æ•°æ®çš„ç¨‹åºå°±å˜å¾—æœ‰æ„ä¹‰ã€‚é‰´äºå®¶è°±ä¸­çš„ä¸€ä¸ªç‚¹ç»“åˆäº†äº”æ¡ä¿¡æ¯â€”â€”çˆ¶äº²ã€æ¯äº²ã€åå­—ã€å‡ºç”Ÿæ—¥æœŸå’Œçœ¼ç›é¢œè‰²â€”â€”æˆ‘ä»¬åº”è¯¥å®šä¹‰ä¸€ä¸ªç»“æ„ç±»å‹ï¼š
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â childÂ [fatherÂ motherÂ nameÂ dateÂ eyes])
  id: totrans-44
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â childÂ [fatherÂ motherÂ nameÂ dateÂ eyes])
- en: 'The structure type definition calls a data definition:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: ç»“æ„ç±»å‹å®šä¹‰è°ƒç”¨æ•°æ®å®šä¹‰ï¼š
- en: '| ;Â A Child is a structure: |'
  id: totrans-46
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Child is a structure: |'
- en: '| ;Â Â Â (make-child  [Child](#%28tech._child%29)  [Child](#%28tech._child%29)  [String](part_one.html#%28tech._string%29)  [N](part_two.html#%28tech._n%29)  [String](part_one.html#%28tech._string%29))
    |'
  id: totrans-47
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-child  [Child](#%28tech._child%29)  [Child](#%28tech._child%29)  [String](part_one.html#%28tech._string%29)  [N](part_two.html#%28tech._n%29)  [String](part_one.html#%28tech._string%29))
    |'
- en: While this data definition looks straightforward, it is also useless. It refers
    to itself, but, because it doesnâ€™t have any clauses, there is no way to create
    a proper instance [Child](#%28tech._child%29). Roughly, we would have to write
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶è¿™ä¸ªæ•°æ®å®šä¹‰çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å®ƒä¹Ÿæ˜¯æ— ç”¨çš„ã€‚å®ƒæŒ‡å‘è‡ªèº«ï¼Œä½†ç”±äºå®ƒæ²¡æœ‰ä»»ä½•å­å¥ï¼Œå› æ­¤æ— æ³•åˆ›å»ºä¸€ä¸ªåˆé€‚çš„å®ä¾‹ [Child](#%28tech._child%29)ã€‚å¤§è‡´æ¥è¯´ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å†™å‡ºä»¥ä¸‹å†…å®¹ï¼š
- en: (make-childÂ (make-childÂ (make-childÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
  id: totrans-49
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (make-childÂ (make-childÂ (make-childÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
- en: 'without end. To avoid such pointless data definitions, we demand that a self-referential
    data definition have several clauses and that at least one of them does not refer
    back to the data definition.Letâ€™s postpone the data definition for a moment, and
    experiment instead. Suppose we are about to add a child to an existing family
    tree and that we already have representations for the parents. In that case, we
    can simply construct a new child structure. For example, to represent Adam in
    a program that already represents Carl and Bettina, it suffices to add the following
    child structure:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: æ²¡æœ‰å°½å¤´ã€‚ä¸ºäº†é¿å…è¿™ç§æ— æ„ä¹‰çš„æ•°æ®å®šä¹‰ï¼Œæˆ‘ä»¬è¦æ±‚è‡ªå¼•ç”¨çš„æ•°æ®å®šä¹‰æœ‰å‡ ä¸ªå­å¥ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå­å¥ä¸å¼•ç”¨æ•°æ®å®šä¹‰æœ¬èº«ã€‚è®©æˆ‘ä»¬æš‚æ—¶æ¨è¿Ÿæ•°æ®å®šä¹‰ï¼Œå…ˆè¿›è¡Œå®éªŒã€‚å‡è®¾æˆ‘ä»¬å³å°†å‘ç°æœ‰çš„å®¶è°±ä¸­æ·»åŠ ä¸€ä¸ªå­©å­ï¼Œå¹¶ä¸”æˆ‘ä»¬å·²ç»æœ‰äº†çˆ¶æ¯çš„è¡¨ç¤ºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€æ„å»ºä¸€ä¸ªæ–°çš„å­©å­ç»“æ„ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†åœ¨å·²ç»è¡¨ç¤ºäº†Carlå’ŒBetinaçš„ç¨‹åºä¸­è¡¨ç¤ºAdamï¼Œåªéœ€æ·»åŠ ä»¥ä¸‹å­©å­ç»“æ„ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â Adam
    |'
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â Adam
    |'
- en: '| Â Â (make-childÂ CarlÂ BettinaÂ "Adam"Â 1950Â "hazel")) |'
  id: totrans-52
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-childÂ CarlÂ BettinaÂ "Adam"Â 1950Â "hazel")) |'
- en: 'assuming Carl and Bettina stand for representations of Adamâ€™s parents.Then
    again, a personâ€™s parents may be unknown, like Bettinaâ€™s in the family tree of
    [figureÂ 111](#%28counter._%28figure._fig~3afamily-tree%29%29). Yet, even then,
    we must fill the corresponding parent field(s) in the child representation. Whatever
    data we choose, it must signal an absence of information. On the one hand, we
    could use #false, "none", or ''() from the pool of existing values. On the other
    hand, we should really say that the information is missing from a family tree.
    We can achieve this objective best with the introduction of a structure type with
    an appropriate name:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾Carlå’ŒBetinaä»£è¡¨Adamçˆ¶æ¯çš„è¡¨ç¤ºã€‚å†æ¬¡ï¼Œä¸€ä¸ªäººçš„çˆ¶æ¯å¯èƒ½æ˜¯æœªçŸ¥çš„ï¼Œå°±åƒåœ¨[å›¾111](#%28counter._%28figure._fig~3afamily-tree%29%29)çš„å®¶åº­æ ‘ä¸­Bettinaçš„æƒ…å†µä¸€æ ·ã€‚å³ä½¿åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»åœ¨å­©å­è¡¨ç¤ºä¸­å¡«å†™ç›¸åº”çš„çˆ¶æ¯å­—æ®µã€‚æ— è®ºæˆ‘ä»¬é€‰æ‹©ä»€ä¹ˆæ•°æ®ï¼Œå®ƒéƒ½å¿…é¡»è¡¨ç¤ºä¿¡æ¯çš„ç¼ºå¤±ã€‚ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç°æœ‰çš„å€¼æ± ä¸­çš„#falseã€"none"æˆ–'()ã€‚å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å®é™…ä¸Šåº”è¯¥è¯´ä¿¡æ¯åœ¨å®¶åº­æ ‘ä¸­ç¼ºå¤±ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ä¸€ä¸ªå…·æœ‰é€‚å½“åç§°çš„ç»“æ„ç±»å‹æ¥å®ç°è¿™ä¸€ç›®æ ‡ï¼š
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â no-parentÂ [])
  id: totrans-54
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â no-parentÂ [])
- en: Now, to construct a child structure for Bettina, we say
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œä¸ºäº†æ„å»ºä¸€ä¸ªBettinaçš„å­ç»“æ„ï¼Œæˆ‘ä»¬è¯´
- en: '| (make-childÂ (make-no-parent) |'
  id: totrans-56
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (make-childÂ (make-no-parent) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (make-no-parent) |'
  id: totrans-57
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â (make-no-parent) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â "Bettina"Â 1926Â "green") |'
  id: totrans-58
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â "Bettina"Â 1926Â "green") |'
- en: 'Of course, if only one piece of information is missing, we fill just that field
    with this special value.Our experimentation suggests two insights. First, we are
    not looking for a data definition that describes how to generate instances of
    child structures but for a data definition that describes how to represent family
    trees. Second, the data definition consists of two clauses, one for the variant
    describing unknown family trees and another one for known family trees:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œå¦‚æœåªæœ‰ä¸€æ¡ä¿¡æ¯ç¼ºå¤±ï¼Œæˆ‘ä»¬åªéœ€ç”¨è¿™ä¸ªç‰¹æ®Šå€¼å¡«å……è¯¥å­—æ®µã€‚æˆ‘ä»¬çš„å®éªŒè¡¨æ˜æœ‰ä¸¤ä¸ªè§è§£ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä¸æ˜¯åœ¨å¯»æ‰¾æè¿°å¦‚ä½•ç”Ÿæˆå­ç»“æ„å®ä¾‹çš„æ•°æ®å®šä¹‰ï¼Œè€Œæ˜¯åœ¨å¯»æ‰¾æè¿°å¦‚ä½•è¡¨ç¤ºå®¶è°±çš„æ•°æ®å®šä¹‰ã€‚å…¶æ¬¡ï¼Œæ•°æ®å®šä¹‰ç”±ä¸¤ä¸ªå­å¥ç»„æˆï¼Œä¸€ä¸ªç”¨äºæè¿°æœªçŸ¥å®¶è°±çš„å˜ä½“ï¼Œå¦ä¸€ä¸ªç”¨äºæè¿°å·²çŸ¥å®¶è°±ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â no-parentÂ [])
    |'
  id: totrans-60
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â no-parentÂ [])
    |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â childÂ [fatherÂ motherÂ nameÂ dateÂ eyes])
    |'
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â childÂ [fatherÂ motherÂ nameÂ dateÂ eyes])
    |'
- en: '| ;Â An FT (short for family tree) is one of: |'
  id: totrans-62
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An FT (short for family tree) is one of: |'
- en: '| ;Â â€“  (make-no-parent) |'
  id: totrans-63
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  (make-no-parent) |'
- en: '| ;Â â€“  (make-child  [FT](#%28tech._ft%29)  [FT](#%28tech._ft%29)  [String](part_one.html#%28tech._string%29)  [N](part_two.html#%28tech._n%29)  [String](part_one.html#%28tech._string%29))
    |'
  id: totrans-64
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  (make-child  [FT](#%28tech._ft%29)  [FT](#%28tech._ft%29)  [String](part_one.html#%28tech._string%29)  [N](part_two.html#%28tech._n%29)  [String](part_one.html#%28tech._string%29))
    |'
- en: 'Since the â€œno parentâ€ tree is going to show up a lot in our programs, we define
    NP as a short-hand and revise the data definition a bit:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 'Since the â€œno parentâ€ tree is going to show up a lot in our programs, we define
    NP as a short-hand and revise the data definition a bit:'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â NPÂ (make-no-parent))
    |'
  id: totrans-66
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â NPÂ (make-no-parent))
    |'
- en: '| ;Â An FT is one of: |'
  id: totrans-67
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An FT is one of: |'
- en: '| ;Â â€“  NP |'
  id: totrans-68
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  NP |'
- en: '| ;Â â€“  (make-child  [FT](#%28tech._ft%29)  [FT](#%28tech._ft%29)  [String](part_one.html#%28tech._string%29)  [N](part_two.html#%28tech._n%29)  [String](part_one.html#%28tech._string%29))
    |'
  id: totrans-69
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  (make-child  [FT](#%28tech._ft%29)  [FT](#%28tech._ft%29)  [String](part_one.html#%28tech._string%29)  [N](part_two.html#%28tech._n%29)  [String](part_one.html#%28tech._string%29))
    |'
- en: 'Following the design recipe from [Designing with Self-Referential Data Definitions](part_two.html#%28part._ch~3adesign-lists%29),
    we use the data definition to create examples of family trees. Specifically, we
    translate the family tree in [figureÂ 111](#%28counter._%28figure._fig~3afamily-tree%29%29)
    into our data representation. The information for Carl is easy to translate into
    data:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®[è®¾è®¡è‡ªå¼•ç”¨æ•°æ®å®šä¹‰](part_two.html#%28part._ch~3adesign-lists%29)çš„è®¾è®¡é…æ–¹ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•°æ®å®šä¹‰æ¥åˆ›å»ºå®¶è°±çš„ç¤ºä¾‹ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†[å›¾111](#%28counter._%28figure._fig~3afamily-tree%29%29)ä¸­çš„å®¶è°±è½¬æ¢ä¸ºæˆ‘ä»¬çš„æ•°æ®è¡¨ç¤ºã€‚Carlçš„ä¿¡æ¯å¾ˆå®¹æ˜“è½¬æ¢ä¸ºæ•°æ®ï¼š
- en: (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green")
  id: totrans-71
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green")
- en: 'Bettina and Fred are represented with similar instances of child. The case
    for Adam calls for nested children, one for Carl and one for Bettina:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: Bettinaå’ŒFredç”¨ç±»ä¼¼çš„å­ç»“æ„å®ä¾‹è¡¨ç¤ºã€‚å¯¹äºAdamçš„æƒ…å†µï¼Œéœ€è¦åµŒå¥—å­ç»“æ„ï¼Œä¸€ä¸ªç”¨äºCarlï¼Œä¸€ä¸ªç”¨äºBettinaï¼š
- en: '| (make-childÂ (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green") |'
  id: totrans-73
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (make-childÂ (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green") |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (make-childÂ NPÂ NPÂ "Bettina"Â 1926Â "green") |'
  id: totrans-74
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â (make-childÂ NPÂ NPÂ "Bettina"Â 1926Â "green") |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â "Adam" |'
  id: totrans-75
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â "Adam" |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â 1950 |'
  id: totrans-76
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â 1950 |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â "hazel") |'
  id: totrans-77
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â "hazel") |'
- en: Since the records for Carl and Bettina are also needed to construct the records
    for Dave and Eva, it is better to introduce definitions that name specific instances
    of child and to use the variable names elsewhere. [FigureÂ 112](#%28counter._%28figure._fig~3afamily.S%29%29)
    illustrates this approach for the complete data representation of the family tree
    from [figureÂ 111](#%28counter._%28figure._fig~3afamily-tree%29%29). Take a close
    look; the tree serves as our running example for the following design exercise.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº Carl å’Œ Bettina çš„è®°å½•ä¹Ÿéœ€è¦ç”¨æ¥æ„å»º Dave å’Œ Eva çš„è®°å½•ï¼Œå› æ­¤å¼•å…¥å‘½åç‰¹å®šå­å®ä¾‹çš„å®šä¹‰å¹¶ä½¿ç”¨å˜é‡ååœ¨å…¶ä»–åœ°æ–¹ä¼šæ›´å¥½ã€‚[å›¾
    112](#%28counter._%28figure._fig~3afamily.S%29%29) å±•ç¤ºäº†ä» [å›¾ 111](#%28counter._%28figure._fig~3afamily-tree%29%29)
    åˆ°å®¶è°±å®Œæ•´æ•°æ®è¡¨ç¤ºçš„è¿™ç§æ–¹æ³•ã€‚ä»”ç»†è§‚å¯Ÿï¼›è¿™æ£µæ ‘å°†ä½œä¸ºæˆ‘ä»¬ä»¥ä¸‹è®¾è®¡ç»ƒä¹ çš„è¿è¡Œç¤ºä¾‹ã€‚
- en: '| ;Â Oldest Generation: |'
  id: totrans-79
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æœ€è€ä¸€ä»£ï¼š |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â CarlÂ (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green"))
    |'
  id: totrans-80
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â CarlÂ (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green"))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â BettinaÂ (make-childÂ NPÂ NPÂ "Bettina"Â 1926Â "green"))
    |'
  id: totrans-81
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â BettinaÂ (make-childÂ NPÂ NPÂ "Bettina"Â 1926Â "green"))
    |'
- en: '| Â  |'
  id: totrans-82
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â Middle Generation: |'
  id: totrans-83
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸­é—´ä¸€ä»£ï¼š |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â AdamÂ (make-childÂ CarlÂ BettinaÂ "Adam"Â 1950Â "hazel"))
    |'
  id: totrans-84
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â AdamÂ (make-childÂ CarlÂ BettinaÂ "Adam"Â 1950Â "hazel"))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â DaveÂ (make-childÂ CarlÂ BettinaÂ "Dave"Â 1955Â "black"))
    |'
  id: totrans-85
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â DaveÂ (make-childÂ CarlÂ BettinaÂ "Dave"Â 1955Â "black"))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â EvaÂ (make-childÂ CarlÂ BettinaÂ "Eva"Â 1965Â "blue"))
    |'
  id: totrans-86
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â EvaÂ (make-childÂ CarlÂ BettinaÂ "Eva"Â 1965Â "blue"))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â FredÂ (make-childÂ NPÂ NPÂ "Fred"Â 1966Â "pink"))
    |'
  id: totrans-87
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â FredÂ (make-childÂ NPÂ NPÂ "Fred"Â 1966Â "pink"))
    |'
- en: '| Â  |'
  id: totrans-88
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â Youngest Generation: |'
  id: totrans-89
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¹´è½»ä¸€ä»£ï¼š |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â GustavÂ (make-childÂ FredÂ EvaÂ "Gustav"Â 1988Â "brown"))
    |'
  id: totrans-90
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â GustavÂ (make-childÂ FredÂ EvaÂ "Gustav"Â 1988Â "brown"))
    |'
- en: ''
  id: totrans-91
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 112: A data representation of the sample family tree'
  id: totrans-92
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 112ï¼šæ ·æœ¬å®¶è°±çš„æ•°æ®è¡¨ç¤º
- en: 'Instead of designing a concrete function on family trees, letâ€™s first look
    at the generic organization of such a function. That is, letâ€™s work through the
    design recipe as much as possible without having a concrete task in mind. We start
    with the header material, that is, step 2 of the recipe:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: è€Œä¸æ˜¯ä¸ºå®¶è°±è®¾è®¡ä¸€ä¸ªå…·ä½“çš„å‡½æ•°ï¼Œè®©æˆ‘ä»¬é¦–å…ˆçœ‹çœ‹è¿™æ ·ä¸€ä¸ªå‡½æ•°çš„é€šç”¨ç»„ç»‡ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè®©æˆ‘ä»¬å°½å¯èƒ½å¤šåœ°æŒ‰ç…§è®¾è®¡é…æ–¹è¿›è¡Œæ“ä½œï¼Œè€Œä¸éœ€è¦è€ƒè™‘å…·ä½“ä»»åŠ¡ã€‚æˆ‘ä»¬ä»å¤´éƒ¨ææ–™å¼€å§‹ï¼Œå³é…æ–¹çš„ç¬¬äºŒæ­¥ï¼š
- en: '| ;Â [FT](#%28tech._ft%29) -> ??? |'
  id: totrans-94
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [FT](#%28tech._ft%29) -> ??? |'
- en: '| ;Â ... |'
  id: totrans-95
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ... |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fun-FTÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-96
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fun-FTÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: 'Even though we arenâ€™t stating the purpose of the function, we do know that
    it consumes a family tree and that this form of data is the main input. The â€œ???â€
    in the signature says that we donâ€™t know what kind of data the function produces;
    the â€œ...â€ remind us that we donâ€™t know its purpose.The lack of purpose means we
    cannot make up functional examples. Nevertheless, we can exploit the organization
    of the data definition for FT to design a template. Since it consists of two clauses,
    the template must consist of a [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    expression with two clauses:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡æˆ‘ä»¬æ²¡æœ‰æ˜ç¡®è¯´æ˜å‡½æ•°çš„ç›®çš„ï¼Œä½†æˆ‘ä»¬çŸ¥é“å®ƒæ¶ˆè€—ä¸€ä¸ªå®¶è°±æ ‘ï¼Œå¹¶ä¸”è¿™ç§æ•°æ®å½¢å¼æ˜¯ä¸»è¦è¾“å…¥ã€‚ç­¾åä¸­çš„â€œ???â€è¡¨ç¤ºæˆ‘ä»¬ä¸çŸ¥é“å‡½æ•°äº§ç”Ÿä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼›â€œ...â€æé†’æˆ‘ä»¬ä¸çŸ¥é“å®ƒçš„ç›®çš„ã€‚ç›®çš„çš„ç¼ºå¤±æ„å‘³ç€æˆ‘ä»¬æ— æ³•æ„å»ºåŠŸèƒ½ç¤ºä¾‹ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨FTæ•°æ®å®šä¹‰çš„ç»„ç»‡æ¥è®¾è®¡ä¸€ä¸ªæ¨¡æ¿ã€‚ç”±äºå®ƒç”±ä¸¤ä¸ªå­å¥ç»„æˆï¼Œå› æ­¤æ¨¡æ¿å¿…é¡»ç”±ä¸¤ä¸ªå­å¥çš„[æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)è¡¨è¾¾å¼ç»„æˆï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fun-FTÂ an-ftree)
    |'
  id: totrans-98
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fun-FTÂ an-ftree)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-99
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(no-parent?Â an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-100
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(no-parent?Â an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    |'
  id: totrans-101
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    |'
- en: 'In case the argument to fun-FT satisfies no-parent?, the structure contains
    no additional data, so the first clause is complete. For the second clause, the
    input contains five pieces of data, which we indicate with five selectors in the
    template:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœfun-FTçš„å‚æ•°æ»¡è¶³no-parent?ï¼Œåˆ™ç»“æ„ä¸­ä¸åŒ…å«å…¶ä»–æ•°æ®ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå­å¥æ˜¯å®Œæ•´çš„ã€‚å¯¹äºç¬¬äºŒä¸ªå­å¥ï¼Œè¾“å…¥åŒ…å«äº”ä¸ªæ•°æ®é¡¹ï¼Œæˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨äº”ä¸ªé€‰æ‹©å™¨æ¥è¡¨ç¤ºï¼š
- en: '| ;Â [FT](#%28tech._ft%29) -> ??? |'
  id: totrans-103
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [FT](#%28tech._ft%29) -> ??? |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fun-FTÂ an-ftree)
    |'
  id: totrans-104
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fun-FTÂ an-ftree)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-105
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(no-parent?Â an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-106
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(no-parent?Â an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-fatherÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-107
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-fatherÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-motherÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-108
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-motherÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-nameÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-109
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-nameÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-dateÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-110
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-dateÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-eyesÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  id: totrans-111
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-eyesÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
- en: 'The last addition to templates concerns self-references. If a data definition
    refers to itself, the function is likely to recur and templates indicate so with
    suggestive natural recursions. The definition for [FT](#%28tech._ft%29) has two
    self-references, and the template therefore needs two such recursions:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡æ¿ä¸­æœ€åå¢åŠ çš„å†…å®¹æ¶‰åŠè‡ªå¼•ç”¨ã€‚å¦‚æœä¸€ä¸ªæ•°æ®å®šä¹‰å¼•ç”¨äº†è‡ªèº«ï¼Œå‡½æ•°å¾ˆå¯èƒ½ä¼šé€’å½’ï¼Œæ¨¡æ¿é€šè¿‡æš—ç¤ºæ€§çš„è‡ªç„¶é€’å½’æ¥è¡¨ç¤ºè¿™ä¸€ç‚¹ã€‚å¯¹äº[FT](#%28tech._ft%29)çš„å®šä¹‰æœ‰ä¸¤ä¸ªè‡ªå¼•ç”¨ï¼Œå› æ­¤æ¨¡æ¿éœ€è¦ä¸¤ä¸ªè¿™æ ·çš„é€’å½’ï¼š
- en: '| ;Â [FT](#%28tech._ft%29) -> ??? |'
  id: totrans-113
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [FT](#%28tech._ft%29) -> ??? |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fun-FTÂ an-ftree)
    |'
  id: totrans-114
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fun-FTÂ an-ftree)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-115
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(no-parent?Â an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-116
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(no-parent?Â an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (fun-FTÂ (child-fatherÂ an-ftree))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-117
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (fun-FTÂ (child-fatherÂ an-ftree))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (fun-FTÂ (child-motherÂ an-ftree))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-118
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (fun-FTÂ (child-motherÂ an-ftree))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-nameÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-119
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-nameÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-dateÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-120
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-dateÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-eyesÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  id: totrans-121
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-eyesÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
- en: 'Specifically, fun-FT is applied to the data representation for fathers and
    mothers in the second [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause because the second clause of the data definition contains corresponding
    self-references.Letâ€™s now turn to a concrete example, the blue-eyed-child? function.
    Its purpose is to determine whether any child structure in a given family tree
    has blue eyes. You may copy, paste, and rename fun-FT to get its template; we
    replace â€œ???â€ with [Boolean](part_one.html#%28tech._boolean%29) and add a purpose
    statement:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: å…·ä½“æ¥è¯´ï¼Œfun-FTè¢«åº”ç”¨äºç¬¬äºŒ[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥ä¸­çˆ¶äº²å’Œæ¯äº²çš„è¡¨ç¤ºæ•°æ®ï¼Œå› ä¸ºæ•°æ®å®šä¹‰çš„ç¬¬äºŒå­å¥åŒ…å«ç›¸åº”çš„è‡ªå¼•ç”¨ã€‚ç°åœ¨è®©æˆ‘ä»¬è½¬å‘ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œå³blue-eyed-child?å‡½æ•°ã€‚å®ƒçš„ç›®çš„æ˜¯ç¡®å®šç»™å®šå®¶è°±æ ‘ä¸­æ˜¯å¦æœ‰ä»»ä½•å­©å­ç»“æ„æœ‰è“çœ¼ç›ã€‚æ‚¨å¯ä»¥å¤åˆ¶ã€ç²˜è´´å¹¶é‡å‘½åfun-FTä»¥è·å–å…¶æ¨¡æ¿ï¼›æˆ‘ä»¬å°†â€œ???â€æ›¿æ¢ä¸º[å¸ƒå°”](part_one.html#%28tech._boolean%29)å¹¶æ·»åŠ ä¸€ä¸ªç›®çš„è¯´æ˜ï¼š
- en: '| ;Â [FT](#%28tech._ft%29) -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-123
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [FT](#%28tech._ft%29) -> [å¸ƒå°”](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â does an-ftree contain a child |'
  id: totrans-124
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â an-ftreeæ˜¯å¦åŒ…å«å­©å­ |'
- en: '| ;Â structure with "blue" in the eyes field |'
  id: totrans-125
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç»“æ„ä¸­çœ¼ç›å­—æ®µåŒ…å«"blue" |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (blue-eyed-child?Â an-ftree)
    |'
  id: totrans-126
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (blue-eyed-child?Â an-ftree)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-127
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(no-parent?Â an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-128
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â [(no-parent?Â an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (blue-eyed-child?
    |'
  id: totrans-129
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (blue-eyed-child?
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (child-fatherÂ an-ftree))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-130
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (child-fatherÂ an-ftree))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (blue-eyed-child?
    |'
  id: totrans-131
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (blue-eyed-child?
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (child-motherÂ an-ftree))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-132
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (child-motherÂ an-ftree))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-nameÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-133
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-nameÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-dateÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-134
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-dateÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-eyesÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  id: totrans-135
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (child-eyesÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
- en: 'When you work in this fashion, you must replace the templateâ€™s generic name
    with a specific one.Checking with our recipe, we realize that we need to backtrack
    and develop some examples before we move on to the definition step. If we start
    with Carl, the first person in the family tree, we see that Carlâ€™s family tree
    does not contain a child with a "blue" eye color. Specifically, the child representing
    Carl says the eye color is "green"; given that Carlâ€™s ancestor trees are empty,
    they cannot possibly contain a child with "blue" eye color:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä½ ä»¥è¿™ç§æ–¹å¼å·¥ä½œæ—¶ï¼Œä½ å¿…é¡»ç”¨ç‰¹å®šçš„åç§°æ›¿æ¢æ¨¡æ¿çš„é€šç”¨åç§°ã€‚æ ¹æ®æˆ‘ä»¬çš„é…æ–¹æ£€æŸ¥ï¼Œæˆ‘ä»¬æ„è¯†åˆ°åœ¨è¿›å…¥å®šä¹‰æ­¥éª¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å›æº¯å¹¶å¼€å‘ä¸€äº›ç¤ºä¾‹ã€‚å¦‚æœæˆ‘ä»¬ä»å®¶è°±ä¸­çš„ç¬¬ä¸€ä¸ªäººå¡å°”å¼€å§‹ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¡å°”çš„å®¶è°±ä¸­ä¸åŒ…å«æœ‰â€œè“è‰²â€çœ¼ç›é¢œè‰²çš„å­©å­ã€‚å…·ä½“æ¥è¯´ï¼Œä»£è¡¨å¡å°”çš„å­©å­çš„çœ¼ç›é¢œè‰²æ˜¯â€œç»¿è‰²â€ï¼›é‰´äºå¡å°”çš„ç¥–å…ˆæ ‘æ˜¯ç©ºçš„ï¼Œå®ƒä»¬ä¸å¯èƒ½åŒ…å«æœ‰â€œè“è‰²â€çœ¼ç›é¢œè‰²çš„å­©å­ï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child?Â Carl)Â #false)
  id: totrans-137
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child?Â Carl)Â #false)
- en: 'In contrast, Gustav contains a child for Eva who does have blue eyes:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¤æ–¯å¡”å¤«æœ‰ä¸€ä¸ªå­©å­å«ä¼Šå¨ƒï¼Œå¥¹ç¡®å®æœ‰è“çœ¼ç›ï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child?Â Gustav)Â #true)
  id: totrans-139
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child?Â Gustav)Â #true)
- en: 'Now we are ready to define the actual function. The function distinguishes
    between two cases: a no-parent and a child. For the first case, the answer should
    be obvious even though we havenâ€™t made up any examples. Since the given family
    tree does not contain any child whatsoever, it cannot contain one with "blue"
    as the eye color. Hence the result in the first [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause is #false.'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½å®šä¹‰å®é™…å‡½æ•°äº†ã€‚è¯¥å‡½æ•°åŒºåˆ†ä¸¤ç§æƒ…å†µï¼šæ— çˆ¶æ¯å’Œæœ‰å­©å­ã€‚å¯¹äºç¬¬ä¸€ç§æƒ…å†µï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰ä¸¾å‡ºä»»ä½•ä¾‹å­ï¼Œç­”æ¡ˆä¹Ÿåº”è¯¥å¾ˆæ˜æ˜¾ã€‚ç”±äºç»™å®šçš„å®¶è°±æ ¹æœ¬ä¸åŒ…å«ä»»ä½•å­©å­ï¼Œå®ƒä¸å¯èƒ½åŒ…å«ä¸€ä¸ªçœ¼ç›é¢œè‰²ä¸ºâ€œè“è‰²â€çš„å­©å­ã€‚å› æ­¤ï¼Œç¬¬ä¸€ä¸ª
    [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    å­å¥çš„ç»“æœæ˜¯ #falseã€‚'
- en: 'For the second [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause, the design requires a lot more work. Again following the design recipe,
    we first remind ourselves what the expressions in the template accomplish:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºç¬¬äºŒä¸ª [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    å­å¥ï¼Œè®¾è®¡éœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚å†æ¬¡éµå¾ªè®¾è®¡é…æ–¹ï¼Œæˆ‘ä»¬é¦–å…ˆæé†’è‡ªå·±æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼å®Œæˆäº†ä»€ä¹ˆï¼š
- en: according to the purpose statement for the function,
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ ¹æ®å‡½æ•°çš„ç›®çš„å£°æ˜ï¼Œ
- en: (blue-eyed-child?Â (child-fatherÂ an-ftree))
  id: totrans-143
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (blue-eyed-child?Â (child-fatherÂ an-ftree))
- en: determines whether some child in the fatherâ€™s [FT](#%28tech._ft%29) has "blue"
    eyes;
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: åˆ¤æ–­çˆ¶äº²[FT](#%28tech._ft%29)ä¸­çš„æŸä¸ªå­©å­æ˜¯å¦æœ‰ "blue" çœ¼ç›ï¼›
- en: likewise, (blue-eyed-child?  (child-mother  an-ftree)) determines whether someone
    in the motherâ€™s [FT](#%28tech._ft%29) has blue eyes; and
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åŒæ ·åœ°ï¼Œ(blue-eyed-child?  (child-mother  an-ftree)) åˆ¤æ–­æ¯äº²[FT](#%28tech._ft%29)ä¸­æ˜¯å¦æœ‰äººæœ‰è“çœ¼ç›ï¼›å¹¶ä¸”
- en: the selector expressions (child-name  an-ftree), (child-date  an-ftree), and
    (child-eyes  an-ftree) extract the name, birth date, and eye color from the given
    child structure, respectively.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: é€‰æ‹©è¡¨è¾¾å¼ (child-name  an-ftree), (child-date  an-ftree), å’Œ (child-eyes  an-ftree)
    åˆ†åˆ«ä»ç»™å®šçš„å­©å­ç»“æ„ä¸­æå–åç§°ã€å‡ºç”Ÿæ—¥æœŸå’Œçœ¼ç›é¢œè‰²ã€‚
- en: Now we just need to figure out how to combine these expressions.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬åªéœ€è¦å¼„æ¸…æ¥šå¦‚ä½•ç»„åˆè¿™äº›è¡¨è¾¾å¼ã€‚
- en: 'Clearly, if the child structure contains "blue" in the eyes field, the functionâ€™s
    answer is #true. Next, the expressions concerning names and birth dates are useless,
    which leaves us with the recursive calls. As stated, (blue-eyed-child?  (child-father  an-ftree))
    traverses the tree on the fatherâ€™s side, while the motherâ€™s side of the family
    tree is processed with (blue-eyed-child?  (child-mother  an-ftree)). If either
    of these expressions returns #true, an-ftree contains a child with "blue" eyes.'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 'æ˜¾ç„¶ï¼Œå¦‚æœå­©å­ç»“æ„ä¸­çš„çœ¼ç›å­—æ®µåŒ…å« "blue"ï¼Œåˆ™å‡½æ•°çš„ç­”æ¡ˆæ˜¯ #trueã€‚æ¥ä¸‹æ¥ï¼Œå…³äºåç§°å’Œå‡ºç”Ÿæ—¥æœŸçš„è¡¨è¾¾å¼æ˜¯æ— ç”¨çš„ï¼Œè¿™è®©æˆ‘ä»¬åªå‰©ä¸‹é€’å½’è°ƒç”¨ã€‚æ­£å¦‚æ‰€è¿°ï¼Œ(blue-eyed-child?  (child-father  an-ftree))
    éå†çˆ¶äº²ä¸€ä¾§çš„æ ‘ï¼Œè€Œå®¶åº­æ ‘çš„æ¯äº²ä¸€ä¾§åˆ™é€šè¿‡ (blue-eyed-child?  (child-mother  an-ftree)) å¤„ç†ã€‚å¦‚æœè¿™äº›è¡¨è¾¾å¼ä¸­çš„ä»»ä½•ä¸€ä¸ªè¿”å›
    #trueï¼Œåˆ™ an-ftree åŒ…å«ä¸€ä¸ªæœ‰ "blue" çœ¼ç›çš„å­©å­ã€‚'
- en: 'Our analysis suggests that the result should be #true if one of the following
    three expressions is #true:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 'æˆ‘ä»¬çš„åˆ†æè¡¨æ˜ï¼Œå¦‚æœä»¥ä¸‹ä¸‰ä¸ªè¡¨è¾¾å¼ä¸­çš„ä»»ä½•ä¸€ä¸ªä¸º #trueï¼Œåˆ™ç»“æœåº”è¯¥æ˜¯ #trueï¼š'
- en: ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)  (child-eyes  an-ftree)  "blue")
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)  (child-eyes  an-ftree)  "blue")
- en: (blue-eyed-child?  (child-father  an-ftree))
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (blue-eyed-child?  (child-father  an-ftree))
- en: (blue-eyed-child?  (child-mother  an-ftree))
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (blue-eyed-child?  (child-mother  an-ftree))
- en: 'which, in turn, means we need to combine these expressions with [or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29):'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™åè¿‡æ¥æ„å‘³ç€æˆ‘ä»¬éœ€è¦å°†è¿™äº›è¡¨è¾¾å¼ä¸ [or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)
    ç»“åˆèµ·æ¥ï¼š
- en: '| ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â (child-eyesÂ an-ftree)Â "blue")
    |'
  id: totrans-154
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â (child-eyesÂ an-ftree)Â "blue")
    |'
- en: '| Â Â Â Â (blue-eyed-child?Â (child-fatherÂ an-ftree)) |'
  id: totrans-155
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (blue-eyed-child?Â (child-fatherÂ an-ftree)) |'
- en: '| Â Â Â Â (blue-eyed-child?Â (child-motherÂ an-ftree))) |'
  id: totrans-156
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (blue-eyed-child?Â (child-motherÂ an-ftree))) |'
- en: '[FigureÂ 113](#%28counter._%28figure._fig~3ablue-eyes%29%29) pulls everything
    together in a single definition.'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾Â 113](#%28counter._%28figure._fig~3ablue-eyes%29%29) å°†æ‰€æœ‰å†…å®¹åœ¨ä¸€ä¸ªå®šä¹‰ä¸­æ±‡æ€»ã€‚'
- en: '| ;Â [FT](#%28tech._ft%29) -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-158
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [FT](#%28tech._ft%29) -> [Boolean](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â does an-ftree contain a child |'
  id: totrans-159
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â an-ftree æ˜¯å¦åŒ…å«ä¸€ä¸ªå­©å­ |'
- en: '| ;Â structure with "blue" in the eyes field |'
  id: totrans-160
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â çœ¼ç›å­—æ®µä¸­åŒ…å« "blue" çš„ç»“æ„ |'
- en: '| Â  |'
  id: totrans-161
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child?Â Carl)Â #false)
    |'
  id: totrans-162
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child?Â Carl)Â #false)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child?Â Gustav)Â #true)
    |'
  id: totrans-163
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child?Â Gustav)Â #true)
    |'
- en: '| Â  |'
  id: totrans-164
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (blue-eyed-child?Â an-ftree)
    |'
  id: totrans-165
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (blue-eyed-child?Â an-ftree)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-166
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(no-parent?Â an-ftree)Â #false] |'
  id: totrans-167
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(no-parent?Â an-ftree)Â #false] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â (child-eyesÂ an-ftree)Â "blue")
    |'
  id: totrans-168
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â (child-eyesÂ an-ftree)Â "blue")
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (blue-eyed-child?Â (child-fatherÂ an-ftree)) |'
  id: totrans-169
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (blue-eyed-child?Â (child-fatherÂ an-ftree)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (blue-eyed-child?Â (child-motherÂ an-ftree)))])) |'
  id: totrans-170
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (blue-eyed-child?Â (child-motherÂ an-ftree)))])) |'
- en: ''
  id: totrans-171
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 113: Finding a blue-eyed child in an ancestor tree'
  id: totrans-172
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 113ï¼šåœ¨ç¥–å…ˆæ ‘ä¸­å¯»æ‰¾è“çœ¼ç›çš„å­©å­
- en: 'Since this function is the very first one to use two recursions, we simulate
    the stepperâ€™s action for (blue-eyed-child?  Carl) to give you an impression of
    how it all works:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºè¿™ä¸ªå‡½æ•°æ˜¯ç¬¬ä¸€ä¸ªä½¿ç”¨ä¸¤æ¬¡é€’å½’çš„å‡½æ•°ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿäº†æ­¥è¿›å™¨çš„åŠ¨ä½œæ¥ä¸º (blue-eyed-child? Carl) æä¾›ä¸€ä¸ªå¦‚ä½•å·¥ä½œçš„å°è±¡ï¼š
- en: '| (blue-eyed-child?Â Carl) |'
  id: totrans-174
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (blue-eyed-child?Â Carl) |'
- en: '| == |'
  id: totrans-175
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (blue-eyed-child? |'
  id: totrans-176
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (blue-eyed-child? |'
- en: '| Â Â (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green")) |'
  id: totrans-177
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green")) |'
- en: 'Letâ€™s act as if NP were a value and letâ€™s use carl as an abbreviation for the
    instance of child:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å‡è®¾ NP æ˜¯ä¸€ä¸ªå€¼ï¼Œå¹¶ä½¿ç”¨ carl ä½œä¸º child å®ä¾‹çš„ç¼©å†™ï¼š
- en: '| == |'
  id: totrans-179
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-180
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â [(no-parent? |'
  id: totrans-181
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [(no-parent? |'
- en: '| Â Â Â Â Â (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green")) |'
  id: totrans-182
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green")) |'
- en: '| Â Â Â #false] |'
  id: totrans-183
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â #false] |'
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â (child-eyesÂ carl)Â "blue")
    |'
  id: totrans-184
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â (child-eyesÂ carl)Â "blue")
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (blue-eyed-child?Â (child-fatherÂ carl)) |'
  id: totrans-185
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â (blue-eyed-child?Â (child-fatherÂ carl)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (blue-eyed-child?Â (child-motherÂ carl)))]) |'
  id: totrans-186
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â (blue-eyed-child?Â (child-motherÂ carl)))]) |'
- en: 'After dropping the first [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    line, itâ€™s time to replace carl with its value and to perform the three auxiliary
    calculations in [figureÂ 114](#%28counter._%28figure._fig~3acalc-trees%29%29).
    Using these to replace equals with equals, the rest of the computation is explained
    easily:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨åˆ é™¤ç¬¬ä¸€æ¡ [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    è¡Œä¹‹åï¼Œæ˜¯æ—¶å€™ç”¨å…¶å€¼æ›¿æ¢ carl å¹¶æ‰§è¡Œ [å›¾ 114](#%28counter._%28figure._fig~3acalc-trees%29%29)
    ä¸­çš„ä¸‰ä¸ªè¾…åŠ©è®¡ç®—äº†ã€‚ä½¿ç”¨è¿™äº›è®¡ç®—ç»“æœæ¥æ›¿æ¢ç­‰å·ä¸¤è¾¹çš„ç­‰å·ï¼Œå…¶ä½™çš„è®¡ç®—è§£é‡Šèµ·æ¥å°±å¾ˆå®¹æ˜“äº†ï¼š
- en: '| == |'
  id: totrans-188
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â "green"Â "blue")
    |'
  id: totrans-189
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â "green"Â "blue")
    |'
- en: '| Â Â Â Â (blue-eyed-child?Â (child-fatherÂ carl)) |'
  id: totrans-190
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (blue-eyed-child?Â (child-fatherÂ carl)) |'
- en: '| Â Â Â Â (blue-eyed-child?Â (child-motherÂ carl))) |'
  id: totrans-191
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (blue-eyed-child?Â (child-motherÂ carl))) |'
- en: '| ==Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â #falseÂ #falseÂ #false)
    |'
  id: totrans-192
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â ([æˆ–](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â #falseÂ #falseÂ #false)
    |'
- en: '| ==Â #false |'
  id: totrans-193
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â #false |'
- en: While we trust that you have seen such auxiliary calculations in your mathematics
    courses, you also need to understand that the stepper would not perform such calculations;
    instead it works out only those calculations that are absolutely needed.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶æˆ‘ä»¬ç›¸ä¿¡ä½ åœ¨æ•°å­¦è¯¾ç¨‹ä¸­å·²ç»è§è¿‡è¿™æ ·çš„è¾…åŠ©è®¡ç®—ï¼Œä½†ä½ è¿˜éœ€è¦ç†è§£ï¼Œæ­¥è¿›å™¨ä¸ä¼šæ‰§è¡Œè¿™æ ·çš„è®¡ç®—ï¼›ç›¸åï¼Œå®ƒåªè®¡ç®—å‡ºç»å¯¹å¿…è¦çš„è®¡ç®—ã€‚
- en: '| ;Â (1) |'
  id: totrans-195
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â (1) |'
- en: '| (child-eyesÂ (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green")) |'
  id: totrans-196
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| (å­çœ¼ç›Â (åˆ›å»ºå­èŠ‚ç‚¹Â NPÂ NPÂ "å¡å°”"Â 1926Â "ç»¿è‰²")) |'
- en: '| == |'
  id: totrans-197
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| "green" |'
  id: totrans-198
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| "ç»¿è‰²" |'
- en: '| Â  |'
  id: totrans-199
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â (2) |'
  id: totrans-200
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â (2) |'
- en: '| (blue-eyed-child? |'
  id: totrans-201
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| (è“è‰²çœ¼ç›çš„å­©å­ï¼Ÿ |'
- en: '| Â Â (child-father |'
  id: totrans-202
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (å­çˆ¶äº² |'
- en: '| Â Â Â Â (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green"))) |'
  id: totrans-203
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (åˆ›å»ºå­èŠ‚ç‚¹Â NPÂ NPÂ "å¡å°”"Â 1926Â "ç»¿è‰²")) |'
- en: '| == |'
  id: totrans-204
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (blue-eyed-child?Â NP) |'
  id: totrans-205
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| (è“è‰²çœ¼ç›çš„å­©å­ï¼ŸÂ NP) |'
- en: '| == |'
  id: totrans-206
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| #false |'
  id: totrans-207
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| #false |'
- en: '| Â  |'
  id: totrans-208
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â (3) |'
  id: totrans-209
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â (3) |'
- en: '| (blue-eyed-child? |'
  id: totrans-210
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| (è“è‰²çœ¼ç›çš„å­©å­ï¼Ÿ |'
- en: '| Â Â (child-mother |'
  id: totrans-211
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (å­æ¯äº² |'
- en: '| Â Â Â Â (make-childÂ NPÂ NPÂ "Carl"Â 1926Â "green"))) |'
  id: totrans-212
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (åˆ›å»ºå­èŠ‚ç‚¹Â NPÂ NPÂ "å¡å°”"Â 1926Â "ç»¿è‰²")) |'
- en: '| == |'
  id: totrans-213
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| (blue-eyed-child?Â NP) |'
  id: totrans-214
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| (è“è‰²çœ¼ç›çš„å­©å­ï¼ŸÂ NP) |'
- en: '| == |'
  id: totrans-215
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| #false |'
  id: totrans-216
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| #false |'
- en: ''
  id: totrans-217
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 114: Calculating with trees'
  id: totrans-218
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾114ï¼šä½¿ç”¨æ ‘è¿›è¡Œè®¡ç®—
- en: ExerciseÂ 310\. Develop count-persons. The function consumes a family tree and
    counts the child structures in the tree.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 310ã€‚å¼€å‘count-personså‡½æ•°ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªå®¶è°±å¹¶è®¡ç®—æ ‘ä¸­çš„å­ç»“æ„æ•°é‡ã€‚
- en: ExerciseÂ 311\. Develop the function average-age. It consumes a family tree and
    the current year. It produces the average age of all child structures in the family
    tree.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 311ã€‚å¼€å‘å‡½æ•°average-ageã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªå®¶è°±å’Œå½“å‰å¹´ä»½ã€‚å®ƒäº§ç”Ÿå®¶è°±ä¸­æ‰€æœ‰å­ç»“æ„çš„å¹³å‡å¹´é¾„ã€‚
- en: ExerciseÂ 312\. Develop the function eye-colors, which consumes a family tree
    and produces a list of all eye colors in the tree. An eye color may occur more
    than once in the resulting list. Hint Use [append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)
    to concatenate the lists resulting from the recursive calls.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 312ã€‚å¼€å‘å‡½æ•°eye-colorsï¼Œå®ƒæ¶ˆè€—ä¸€ä¸ªå®¶è°±å¹¶ç”Ÿæˆæ ‘ä¸­æ‰€æœ‰çœ¼ç›é¢œè‰²çš„åˆ—è¡¨ã€‚çœ¼ç›é¢œè‰²å¯èƒ½åœ¨ç»“æœåˆ—è¡¨ä¸­å‡ºç°å¤šæ¬¡ã€‚æç¤ºï¼šä½¿ç”¨[append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)æ¥è¿æ¥é€’å½’è°ƒç”¨äº§ç”Ÿçš„åˆ—è¡¨ã€‚
- en: 'ExerciseÂ 313\. Suppose we need the function blue-eyed-ancestor?, which is like
    blue-eyed-child? but responds with #true only when a proper ancestor, not the
    given child itself, has blue eyes.'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 313ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦å‡½æ•°blue-eyed-ancestor?ï¼Œå®ƒç±»ä¼¼äºblue-eyed-child?ï¼Œä½†åªæœ‰å½“é€‚å½“çš„ç¥–å…ˆï¼ˆè€Œéç»™å®šçš„å­©å­æœ¬èº«ï¼‰æœ‰è“è‰²çœ¼ç›æ—¶ï¼Œæ‰è¿”å›#trueã€‚
- en: 'Although the goals clearly differ, the signatures are the same:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡ç›®æ ‡æ˜æ˜¾ä¸åŒï¼Œä½†ç­¾åæ˜¯ç›¸åŒçš„ï¼š
- en: '| ;Â [FT](#%28tech._ft%29) -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-224
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [FT](#%28tech._ft%29) -> [å¸ƒå°”](part_one.html#%28tech._boolean%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (blue-eyed-ancestor?Â an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-225
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (è“è‰²çœ¼ç›çš„ç¥–å…ˆï¼ŸÂ an-ftree)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: 'Stop! Formulate a purpose statement for the function.To appreciate the difference,
    we take a look at Eva:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä¸ºè¯¥å‡½æ•°åˆ¶å®šä¸€ä¸ªç›®çš„å£°æ˜ã€‚ä¸ºäº†æ¬£èµè¿™ç§å·®å¼‚ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Evaï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child?Â Eva)Â #true)
  id: totrans-227
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (è“è‰²çœ¼ç›çš„å­©å­ï¼ŸÂ Eva)Â #true)
- en: Eva is blue-eyed, but has no blue-eyed ancestor. Hence,
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: Evaæ˜¯è“è‰²çš„çœ¼ç›ï¼Œä½†æ²¡æœ‰è“è‰²çœ¼ç›çš„ç¥–å…ˆã€‚å› æ­¤ï¼Œ
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-ancestor?Â Eva)Â #false)
  id: totrans-229
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (è“è‰²çœ¼ç›çš„ç¥–å…ˆï¼ŸÂ Eva)Â #false)
- en: 'In contrast, Gustav is Evaâ€™s son and does have a blue-eyed ancestor:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸åï¼ŒGustavæ˜¯Evaçš„å„¿å­ï¼Œç¡®å®æœ‰ä¸€ä¸ªè“è‰²çœ¼ç›çš„ç¥–å…ˆï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-ancestor?Â Gustav)Â #true)
  id: totrans-231
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-ancestor?Â Gustav)Â #true)
- en: 'Now suppose a friend comes up with this solution:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨å‡è®¾ä¸€ä¸ªæœ‹å‹æå‡ºäº†è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (blue-eyed-ancestor?Â an-ftree)
    |'
  id: totrans-233
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (blue-eyed-ancestor?Â an-ftree)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-234
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(no-parent?Â an-ftree)Â #false] |'
  id: totrans-235
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(no-parent?Â an-ftree)Â #false] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-236
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)
    |'
  id: totrans-237
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)
    |'
- en: '| Â Â Â Â Â Â Â (blue-eyed-ancestor? |'
  id: totrans-238
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â (blue-eyed-ancestor? |'
- en: '| Â Â Â Â Â Â Â Â Â (child-fatherÂ an-ftree)) |'
  id: totrans-239
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([child-fatherÂ an-ftree)) |'
- en: '| Â Â Â Â Â Â Â (blue-eyed-ancestor? |'
  id: totrans-240
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â (blue-eyed-ancestor? |'
- en: '| Â Â Â Â Â Â Â Â Â (child-motherÂ an-ftree)))])) |'
  id: totrans-241
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([child-motherÂ an-ftree)))])) |'
- en: Explain why this function fails one of its tests. What is the result of (blue-eyed-ancestor?  A)
    no matter which A you choose? Can you fix your friendâ€™s solution?
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: è§£é‡Šä¸ºä»€ä¹ˆè¿™ä¸ªå‡½æ•°æœªèƒ½é€šè¿‡å…¶æµ‹è¯•ä¹‹ä¸€ã€‚æ— è®ºä½ é€‰æ‹©å“ªä¸ªAï¼Œ(blue-eyed-ancestor? A)çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿä½ èƒ½ä¿®å¤ä½ æœ‹å‹çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ
- en: Note on variable and structure names The initial discussion of family relationships
    suggests the name child for the structure type definition. The five pieces of
    information represent the child of particular parents. The rest of the development
    is about ancestor trees, however. If you were to skim the chapter just to focus
    on function definitions, like the one in [figureÂ 113](#%28counter._%28figure._fig~3ablue-eyes%29%29),
    the names child-father, child-mother, and child-eyes might mislead you a bit,
    mostly because they might seem to conflict with the recursive nature of the function.
    An experienced developer would probably use DrRacketâ€™s renaming functionalityCheck
    syntax. Right-click on the name of the structure. Select rename. to replace child
    with person. In general, variable naming are critical for helping readers of code
    to understand the thinking behind it.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: å˜é‡å’Œç»“æ„å‘½åæ³¨æ„äº‹é¡¹ åˆå§‹å¯¹å®¶åº­å…³ç³»çš„è®¨è®ºå»ºè®®å°†ç»“æ„ç±»å‹å®šä¹‰å‘½åä¸ºchildã€‚è¿™äº”æ¡ä¿¡æ¯ä»£è¡¨ç‰¹å®šçˆ¶æ¯çš„å­©å­ã€‚ç„¶è€Œï¼Œå…¶ä½™çš„å‘å±•æ˜¯å…³äºç¥–å…ˆæ ‘ã€‚å¦‚æœä½ åªæ˜¯æµè§ˆæœ¬ç« ï¼Œä¸“æ³¨äºå‡½æ•°å®šä¹‰ï¼Œæ¯”å¦‚[å›¾113](#%28counter._%28figure._fig~3ablue-eyes%29%29)ä¸­çš„é‚£ä¸ªï¼Œchild-fatherã€child-motherå’Œchild-eyesè¿™äº›åç§°å¯èƒ½ä¼šè®©ä½ æœ‰äº›è¯¯å¯¼ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒä»¬ä¼¼ä¹ä¸å‡½æ•°çš„é€’å½’æ€§è´¨ç›¸å†²çªã€‚ç»éªŒä¸°å¯Œçš„å¼€å‘è€…å¯èƒ½ä¼šä½¿ç”¨DrRacketçš„é‡å‘½ååŠŸèƒ½æ£€æŸ¥è¯­æ³•ã€‚å³é”®å•å‡»ç»“æ„çš„åç§°ã€‚é€‰æ‹©é‡å‘½åï¼Œå°†childæ›¿æ¢ä¸ºpersonã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå˜é‡å‘½åå¯¹äºå¸®åŠ©ä»£ç çš„è¯»è€…ç†è§£å…¶èƒŒåçš„æ€è€ƒè‡³å…³é‡è¦ã€‚
- en: 19.2Forests[ğŸ”—](#(part._sec~3aforests) "Link to here")
  id: totrans-244
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.2 æ£®æ—[ğŸ”—](#(part._sec~3aforests) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'It is a short step from a family tree to a family forest:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: ä»å®¶è°±æ ‘åˆ°å®¶è°±æ£®æ—åªæœ‰ä¸€å°æ­¥ï¼š
- en: '| ;Â An FF (short for family forest) is one of: |'
  id: totrans-246
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An FF (short for family forest) is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-247
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [FT](#%28tech._ft%29)  [FF](#%28tech._ff%29))
    |'
  id: totrans-248
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [FT](#%28tech._ft%29)  [FF](#%28tech._ff%29))
    |'
- en: '| ;Â interpretation a family forest represents several |'
  id: totrans-249
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation a family forest represents several |'
- en: '| ;Â families (say, a town) and their ancestor trees |'
  id: totrans-250
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â families (say, a town) and their ancestor trees |'
- en: 'Here are some tree excerpts from [figureÂ 111](#%28counter._%28figure._fig~3afamily-tree%29%29)
    arranged as forests:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯ä¸€äº›æ¥è‡ª[å›¾111](#%28counter._%28figure._fig~3afamily-tree%29%29)çš„æ ‘æ‘˜å½•ï¼Œæ’åˆ—æˆæ£®æ—ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ff1Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â CarlÂ Bettina))
    |'
  id: totrans-252
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ff1Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â CarlÂ Bettina))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ff2Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â FredÂ Eva))
    |'
  id: totrans-253
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ff2Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â FredÂ Eva))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ff3Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â FredÂ EvaÂ Carl))
    |'
  id: totrans-254
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ff3Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â FredÂ EvaÂ Carl))
    |'
- en: 'The first two forests contain two unrelated families, and the third one illustrates
    that unlike in real forests, trees in family forests can overlap.Now consider
    this representative problem concerning family trees:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: å‰ä¸¤ä¸ªæ£®æ—åŒ…å«ä¸¤ä¸ªæ— å…³çš„å®¶åº­ï¼Œç¬¬ä¸‰ä¸ªæ£®æ—è¯´æ˜äº†ä¸çœŸå®æ£®æ—ä¸åŒï¼Œå®¶æ—æ£®æ—ä¸­çš„æ ‘æœ¨å¯ä»¥é‡å ã€‚ç°åœ¨è€ƒè™‘è¿™ä¸ªå…³äºå®¶æ—æ ‘çš„ä»£è¡¨æ€§é—®é¢˜ï¼š
- en: Sample Problem Design the function blue-eyed-child-in-forest?, which determines
    whether a family forest contains a child with "blue" in the eyes field.
  id: totrans-256
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·ä¾‹é—®é¢˜ï¼šè®¾è®¡å‡½æ•° blue-eyed-child-in-forest?ï¼Œè¯¥å‡½æ•°ç”¨äºç¡®å®šä¸€ä¸ªå®¶æ—æ£®æ—ä¸­æ˜¯å¦åŒ…å«çœ¼ç›é¢œè‰²ä¸ºâ€œè“è‰²â€çš„å­©å­ã€‚
- en: '| ;Â [FF](#%28tech._ff%29) -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-257
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; [FF](#%28tech._ff%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| ;Â does the forest contain any child with "blue"  eyes |'
  id: totrans-258
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; æ£®æ—ä¸­æ˜¯å¦åŒ…å«ä»»ä½•çœ¼ç›ä¸ºâ€œè“è‰²â€çš„å­©å­ |'
- en: '| Â  |'
  id: totrans-259
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   | |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child-in-forest?Â ff1)Â #false)
    |'
  id: totrans-260
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child-in-forest?Â ff1)Â #false)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child-in-forest?Â ff2)Â #true)
    |'
  id: totrans-261
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child-in-forest?Â ff2)Â #true)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child-in-forest?Â ff3)Â #true)
    |'
  id: totrans-262
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (blue-eyed-child-in-forest?Â ff3)Â #true)
    |'
- en: '| Â  |'
  id: totrans-263
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (blue-eyed-child-in-forest?Â a-forest)
    |'
  id: totrans-264
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (blue-eyed-child-in-forest?Â a-forest)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-265
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â a-forest)Â #false]
    |'
  id: totrans-266
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â a-forest)Â #false]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-267
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |[[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â (blue-eyed-child?Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â a-forest))
    |'
  id: totrans-268
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â (blue-eyed-child?Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â a-forest))
    |'
- en: '| Â Â Â Â Â Â Â Â Â (blue-eyed-child-in-forest?Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â a-forest)))]))
    |'
  id: totrans-269
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â (blue-eyed-child-in-forest?Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â a-forest)))]))
    |'
- en: ''
  id: totrans-270
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 115: Finding a blue-eyed child in a family forest'
  id: totrans-271
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾115ï¼šåœ¨å®¶æ—æ£®æ—ä¸­æ‰¾åˆ°ä¸€ä¸ªè“çœ¼ç›çš„å­©å­
- en: The straightforward solution is displayed in [figureÂ 115](#%28counter._%28figure._fig~3ablue-eyed-child%29%29).
    Study the signature, the purpose statement, and the examples on your own. We focus
    on the program organization. Concerning the template, the design may employ the
    list template because the function consumes a list. If each item on the list were
    a structure with an eyes field and nothing else, the function would iterate over
    those structures using the selector function for the eyes field and a string comparison.
    In this case, each item is a family tree, but, luckily, we already know how to
    process family trees.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: ç›´æ¥çš„è§£å†³æ–¹æ¡ˆåœ¨[å›¾115](#%28counter._%28figure._fig~3ablue-eyed-child%29%29)ä¸­æ˜¾ç¤ºã€‚è‡ªå·±ç ”ç©¶ç­¾åã€ç›®çš„é™ˆè¿°å’Œç¤ºä¾‹ã€‚æˆ‘ä»¬å…³æ³¨ç¨‹åºç»„ç»‡ã€‚å…³äºæ¨¡æ¿ï¼Œè®¾è®¡å¯èƒ½ä½¿ç”¨åˆ—è¡¨æ¨¡æ¿ï¼Œå› ä¸ºè¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªåˆ—è¡¨ã€‚å¦‚æœåˆ—è¡¨ä¸­çš„æ¯ä¸ªé¡¹éƒ½æ˜¯ä¸€ä¸ªå…·æœ‰çœ¼ç›å­—æ®µçš„ç»“æ„çš„å…¶ä½™éƒ¨åˆ†ï¼Œåˆ™å‡½æ•°å°†ä½¿ç”¨çœ¼ç›å­—æ®µçš„é€‰æ‹©å‡½æ•°å’Œå­—ç¬¦ä¸²æ¯”è¾ƒéå†è¿™äº›ç»“æ„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ªé¡¹æ˜¯ä¸€ä¸ªå®¶æ—æ ‘ï¼Œä½†å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“å¦‚ä½•å¤„ç†å®¶æ—æ ‘ã€‚
- en: Letâ€™s step back and inspect how we explained [figureÂ 115](#%28counter._%28figure._fig~3ablue-eyed-child%29%29).
    The starting point is a pair of data definitions where the second refers to the
    first and both refer to themselves. The result is a pair of functions where the
    second refers to the first and both refer to themselves. In other words, the function
    definitions refer to each other the same way the data definitions refer to each
    other. Early chapters gloss over this kind of relationship, but now the situation
    is sufficiently complicated and deserves attention.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æˆ‘ä»¬æ˜¯å¦‚ä½•è§£é‡Š[å›¾115](#%28counter._%28figure._fig~3ablue-eyed-child%29%29)çš„ã€‚èµ·ç‚¹æ˜¯ä¸€å¯¹æ•°æ®å®šä¹‰ï¼Œå…¶ä¸­ç¬¬äºŒä¸ªå¼•ç”¨äº†ç¬¬ä¸€ä¸ªï¼Œå¹¶ä¸”ä¸¤è€…éƒ½å¼•ç”¨äº†è‡ªèº«ã€‚ç»“æœæ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œå…¶ä¸­ç¬¬äºŒä¸ªå¼•ç”¨äº†ç¬¬ä¸€ä¸ªï¼Œå¹¶ä¸”ä¸¤è€…éƒ½å¼•ç”¨äº†è‡ªèº«ã€‚æ¢å¥è¯è¯´ï¼Œå‡½æ•°å®šä¹‰ç›¸äº’å¼•ç”¨çš„æ–¹å¼ä¸æ•°æ®å®šä¹‰ç›¸äº’å¼•ç”¨çš„æ–¹å¼ç›¸åŒã€‚æ—©æœŸç« èŠ‚ç•¥è¿‡äº†è¿™ç§å…³ç³»ï¼Œä½†ç°åœ¨æƒ…å†µè¶³å¤Ÿå¤æ‚ï¼Œå€¼å¾—æ³¨æ„ã€‚
- en: ExerciseÂ 314\. Reformulate the data definition for [FF](#%28tech._ff%29) with
    the [List-of](part_three.html#%28tech._sim-dd._list._of%29) abstraction. Now do
    the same for the blue-eyed-child-in-forest? function. Finally, define blue-eyed-child-in-forest?
    using one of the list abstractions from the preceding chapter.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 314ã€‚ä½¿ç”¨[List-of](part_three.html#%28tech._sim-dd._list._of%29)æŠ½è±¡é‡æ–°è¡¨è¿°[FF](#%28tech._ff%29)çš„æ•°æ®å®šä¹‰ã€‚ç°åœ¨ä¹Ÿä¸ºblue-eyed-child-in-forest?å‡½æ•°åšåŒæ ·çš„æ“ä½œã€‚æœ€åï¼Œä½¿ç”¨å‰ä¸€ç« ä¸­çš„ä¸€ç§åˆ—è¡¨æŠ½è±¡å®šä¹‰blue-eyed-child-in-forest?ã€‚
- en: ExerciseÂ 315\. Design the function average-age. It consumes a family forest
    and a year ([N](part_two.html#%28tech._n%29)). From this data, it produces the
    average age of all child instances in the forest. Note If the trees in this forest
    overlap, the result isnâ€™t a true average because some people contribute more than
    others. For this exercise, act as if the trees donâ€™t overlap.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 315ã€‚è®¾è®¡average-ageå‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªå®¶æ—æ£®æ—å’Œä¸€å¹´([N](part_two.html#%28tech._n%29))ã€‚ä»è¿™ä¸ªæ•°æ®ä¸­ï¼Œå®ƒäº§ç”Ÿæ£®æ—ä¸­æ‰€æœ‰å­©å­å®ä¾‹çš„å¹³å‡å¹´é¾„ã€‚æ³¨æ„ï¼šå¦‚æœæ£®æ—ä¸­çš„æ ‘é‡å ï¼Œç»“æœä¸æ˜¯çœŸæ­£çš„å¹³å‡å€¼ï¼Œå› ä¸ºæœ‰äº›äººè´¡çŒ®å¾—æ›´å¤šã€‚å¯¹äºè¿™ä¸ªç»ƒä¹ ï¼Œå‡è®¾æ ‘ä¸é‡å ã€‚
- en: 19.3S-expressions[ğŸ”—](#(part._sec~3asexp) "Link to here")
  id: totrans-276
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.3Sè¡¨è¾¾å¼[ğŸ”—](#(part._sec~3asexp) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'While [Intermezzo 2: Quote, Unquote](i2-3.html) introduced S-expressions on
    an informal basis, it is possible to describe them with a combination of three
    data definitions:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶[é—´å¥æ›²2ï¼šå¼•ç”¨ï¼Œä¸å¼•ç”¨](i2-3.html)éæ­£å¼åœ°ä»‹ç»äº†Sè¡¨è¾¾å¼ï¼Œä½†å¯ä»¥ç”¨ä¸‰ç§æ•°æ®å®šä¹‰çš„ç»„åˆæ¥æè¿°å®ƒä»¬ï¼š
- en: '|'
  id: totrans-278
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-279
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â An S-expr is one of: &#124;'
  id: totrans-280
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â ä¸€ä¸ªSè¡¨è¾¾å¼æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š&#124;'
- en: '&#124; ;Â â€“  [Atom](#%28tech._atom%29) &#124;'
  id: totrans-281
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  [åŸå­](#%28tech._atom%29) &#124;'
- en: '&#124; ;Â â€“  [SL](#%28tech._sl%29) &#124;'
  id: totrans-282
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  [SL](#%28tech._sl%29) &#124;'
- en: '&#124; Â  &#124;'
  id: totrans-283
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â  &#124;'
- en: '&#124; ;Â An SL is one of: &#124;'
  id: totrans-284
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â ä¸€ä¸ªSLæ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š&#124;'
- en: '&#124; ;Â â€“  ''() &#124;'
  id: totrans-285
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  ''() &#124;'
- en: '&#124; ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [S-expr](#%28tech._s._expr%29)  [SL](#%28tech._sl%29))
    &#124;'
  id: totrans-286
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [S-expr](#%28tech._s._expr%29)  [SL](#%28tech._sl%29))
    &#124;'
- en: ''
  id: totrans-287
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-288
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-289
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â An Atom is one of: &#124;'
  id: totrans-290
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â ä¸€ä¸ªåŸå­æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š &#124;'
- en: '&#124; ;Â â€“  [Number](part_one.html#%28tech._number%29) &#124;'
  id: totrans-291
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  [æ•°å­—](part_one.html#%28tech._number%29) &#124;'
- en: '&#124; ;Â â€“  [String](part_one.html#%28tech._string%29) &#124;'
  id: totrans-292
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) &#124;'
- en: '&#124; ;Â â€“  [Symbol](i2-3.html#%28tech._symbol%29) &#124;'
  id: totrans-293
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  [ç¬¦å·](i2-3.html#%28tech._symbol%29) &#124;'
- en: ''
  id: totrans-294
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-295
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: Recall that [Symbol](i2-3.html#%28tech._symbol%29)s look like strings with a
    single quote at the beginning and with no quote at the end.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: å›æƒ³ä¸€ä¸‹ï¼Œ[ç¬¦å·](i2-3.html#%28tech._symbol%29) çœ‹èµ·æ¥åƒå­—ç¬¦ä¸²ï¼Œä»¥ä¸€ä¸ªå•å¼•å·å¼€å¤´ï¼Œä»¥æ²¡æœ‰å¼•å·ç»“å°¾ã€‚
- en: 'The idea of S-expressions is due to John McCarthy and his Lispers, who created
    S-expressions in 1958 so that they could process Lisp programs with other Lisp
    programs. This seemingly circular reasoning may sound esoteric, but, as mentioned
    in [Intermezzo 2: Quote, Unquote](i2-3.html), S-expressions are a versatile form
    of data that is often rediscovered, most recently with applications to the world
    wide web. Working with S-expressions thus prepares a discussion of how to design
    functions for highly intertwined data definitions.'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: S è¡¨è¾¾å¼çš„æƒ³æ³•å½’åŠŸäºçº¦ç¿°Â·éº¦å¡é”¡å’Œä»–çš„ Lisp ç¨‹åºå‘˜ï¼Œä»–ä»¬åœ¨ 1958 å¹´åˆ›é€ äº† S è¡¨è¾¾å¼ï¼Œä»¥ä¾¿ä»–ä»¬å¯ä»¥ç”¨å…¶ä»– Lisp ç¨‹åºå¤„ç† Lisp ç¨‹åºã€‚è¿™ç§çœ‹ä¼¼å¾ªç¯çš„æ¨ç†å¯èƒ½å¬èµ·æ¥å¾ˆç¥ç§˜ï¼Œä½†æ­£å¦‚åœ¨
    [é—´å¥æ›² 2ï¼šå¼•ç”¨ï¼Œéå¼•ç”¨](i2-3.html) ä¸­æåˆ°çš„ï¼ŒS è¡¨è¾¾å¼æ˜¯ä¸€ç§å¤šæ‰å¤šè‰ºçš„æ•°æ®å½¢å¼ï¼Œå®ƒç»å¸¸è¢«é‡æ–°å‘ç°ï¼Œæœ€è¿‘åœ¨ä¸‡ç»´ç½‘åº”ç”¨ä¸­å¾—åˆ°äº†åº”ç”¨ã€‚å› æ­¤ï¼Œä½¿ç”¨
    S è¡¨è¾¾å¼ä¸ºè®¨è®ºå¦‚ä½•ä¸ºé«˜åº¦äº¤ç»‡çš„æ•°æ®å®šä¹‰è®¾è®¡å‡½æ•°åšå¥½äº†å‡†å¤‡ã€‚
- en: ExerciseÂ 316\. Define the atom? function.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  316. å®šä¹‰ atom? å‡½æ•°ã€‚
- en: 'Up to this point in this book, no data has required a data definition as complex
    as the one for S-expressions. And yet, with one extra hint, you can design functions
    that process S-expressions if you follow the design recipe. To demonstrate this
    point, letâ€™s work through a specific example:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæœ¬ä¹¦ä¸­è¿˜æ²¡æœ‰æ•°æ®éœ€è¦åƒ S è¡¨è¾¾å¼é‚£æ ·å¤æ‚çš„æ•°æ®å®šä¹‰ã€‚ç„¶è€Œï¼Œåªè¦æœ‰ä¸€ç‚¹æç¤ºï¼Œå¦‚æœä½ éµå¾ªè®¾è®¡é…æ–¹ï¼Œä½ å°±å¯ä»¥è®¾è®¡å¤„ç† S è¡¨è¾¾å¼çš„å‡½æ•°ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥åˆ†æï¼š
- en: Sample Problem Design the function count, which determines how many times some
    symbol occurs in some S-expression.
  id: totrans-300
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·ä¾‹é—®é¢˜ è®¾è®¡ä¸€ä¸ªåä¸º count çš„å‡½æ•°ï¼Œå®ƒç¡®å®šæŸä¸ªç¬¦å·åœ¨æŸä¸ª S è¡¨è¾¾å¼ï¼ˆS-expressionï¼‰ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚
- en: 'While the first step calls for data definitions and appears to have been completed,
    remember that it also calls for the creation of data examples, especially when
    the definition is complex.A data definition is supposed to be a prescription of
    how to create data, and its â€œtestâ€ is whether it is usable. One point that the
    data definition for [S-expr](#%28tech._s._expr%29) makes is that every [Atom](#%28tech._atom%29)
    is an element of [S-expr](#%28tech._s._expr%29), and you know that [Atom](#%28tech._atom%29)s
    are easy to fabricate:'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶ç¬¬ä¸€æ­¥éœ€è¦æ•°æ®å®šä¹‰å¹¶ä¸”çœ‹èµ·æ¥å·²ç»å®Œæˆï¼Œä½†è¯·è®°ä½ï¼Œå®ƒè¿˜è¦æ±‚åˆ›å»ºæ•°æ®ç¤ºä¾‹ï¼Œå°¤å…¶æ˜¯åœ¨å®šä¹‰å¤æ‚æ—¶ã€‚æ•°æ®å®šä¹‰åº”è¯¥æ˜¯ä¸€ä»½å¦‚ä½•åˆ›å»ºæ•°æ®çš„è¯´æ˜ï¼Œå…¶â€œæµ‹è¯•â€æ˜¯å®ƒæ˜¯å¦å¯ç”¨ã€‚[S-expr](#%28tech._s._expr%29)
    çš„æ•°æ®å®šä¹‰æå‡ºçš„ä¸€ä¸ªè§‚ç‚¹æ˜¯æ¯ä¸ª [åŸå­](#%28tech._atom%29) éƒ½æ˜¯ [S-expr](#%28tech._s._expr%29) çš„ä¸€ä¸ªå…ƒç´ ï¼Œè€Œä¸”ä½ çŸ¥é“
    [åŸå­](#%28tech._atom%29) æ˜¯å¾ˆå®¹æ˜“åˆ¶é€ çš„ï¼š
- en: '| ''hello |'
  id: totrans-302
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''hello |'
- en: '| 20.12 |'
  id: totrans-303
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 20.12 |'
- en: '| "world" |'
  id: totrans-304
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "world" |'
- en: 'In the same vein, every [SL](#%28tech._sl%29) is a list as well as an [S-expr](#%28tech._s._expr%29):'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ ·åœ°ï¼Œæ¯ä¸ª [SL](#%28tech._sl%29) ä¹Ÿæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª [S-expr](#%28tech._s._expr%29)ï¼š
- en: '| ''() |'
  id: totrans-306
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''() |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''helloÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 20.12Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â "world"Â ''())))
    |'
  id: totrans-307
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''helloÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 20.12Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â "world"Â ''())))
    |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''helloÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 20.12Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â "world"Â ''())))
    |'
  id: totrans-308
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''helloÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 20.12Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â "world"Â ''())))
    |'
- en: '| Â Â Â Â Â Â ''()) |'
  id: totrans-309
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ''()) |'
- en: 'The first two are obvious; the third one deserves a second look. It repeats
    the second [S-expr](#%28tech._s._expr%29) but nested inside ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''()).
    What this means is that it is a list that contains a single item, namely, the
    second example. You can simplify the example with [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29):'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: å‰ä¸¤ä¸ªå¾ˆæ˜æ˜¾ï¼›ç¬¬ä¸‰ä¸ªå€¼å¾—ä»”ç»†çœ‹çœ‹ã€‚å®ƒé‡å¤äº†ç¬¬äºŒä¸ª[S-expr](#%28tech._s._expr%29)ï¼Œä½†åµŒå¥—åœ¨([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  '())ä¸­ã€‚è¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªåŒ…å«å•ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œå³ç¬¬äºŒä¸ªç¤ºä¾‹ã€‚ä½ å¯ä»¥ä½¿ç”¨[list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)æ¥ç®€åŒ–ç¤ºä¾‹ï¼š
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''helloÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 20.12Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â "world"Â ''()))))
    |'
  id: totrans-311
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''helloÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 20.12Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â "world"Â ''()))))
    |'
- en: '| ;Â or |'
  id: totrans-312
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â or |'
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ''helloÂ 20.12Â "world"))
    |'
  id: totrans-313
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ''helloÂ 20.12Â "world"))
    |'
- en: 'Indeed, with the quotation mechanism of [Intermezzo 2: Quote, Unquote](i2-3.html)
    it is even easier to write down S-expressions. Here are the last three:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 'äº‹å®ä¸Šï¼Œä½¿ç”¨[Intermezzo 2: Quote, Unquote](i2-3.html)çš„å¼•ç”¨æœºåˆ¶ï¼Œå†™ä¸‹S-expressionsç”šè‡³æ›´å®¹æ˜“ã€‚ä»¥ä¸‹æ˜¯æœ€åä¸‰ä¸ªï¼š'
- en: '| > ''() |'
  id: totrans-315
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ''() |'
- en: '| ''() |'
  id: totrans-316
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''() |'
- en: '| > ''(helloÂ 20.12Â "world") |'
  id: totrans-317
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ''(helloÂ 20.12Â "world") |'
- en: '| (list ''hello #i20.12 "world") |'
  id: totrans-318
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list ''hello #i20.12 "world") |'
- en: '| > ''((helloÂ 20.12Â "world")) |'
  id: totrans-319
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ''((helloÂ 20.12Â "world")) |'
- en: '| (list (list ''hello #i20.12 "world")) |'
  id: totrans-320
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list (list ''hello #i20.12 "world")) |'
- en: 'To help you out, we evaluate these examples in the interactions area of DrRacket
    so that you can see the result, which is closer to the above constructions than
    the [quote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)
    notation.With [quote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29),
    it is quite easy to make up complex examples:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å¸®åŠ©æ‚¨ï¼Œæˆ‘ä»¬åœ¨DrRacketçš„äº¤äº’åŒºåŸŸè¯„ä¼°è¿™äº›ç¤ºä¾‹ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥çœ‹åˆ°ç»“æœï¼Œè¿™ä¸ªç»“æœæ¯”[quote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)è¡¨ç¤ºæ³•æ›´æ¥è¿‘ã€‚ä½¿ç”¨[quote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)ï¼Œæ„å»ºå¤æ‚ç¤ºä¾‹éå¸¸å®¹æ˜“ï¼š
- en: '|'
  id: totrans-322
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-323
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ''(defineÂ (fÂ x) &#124;'
  id: totrans-324
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ''(defineÂ (fÂ x) &#124;'
- en: '&#124; Â Â Â Â Â (+Â xÂ 55)) &#124;'
  id: totrans-325
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â Â (+Â xÂ 55)) &#124;'
- en: ''
  id: totrans-326
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-327
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| (list ''define (list ''f ''x) (list ''+ ''x 55)) |'
  id: totrans-328
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list ''define (list ''f ''x) (list ''+ ''x 55)) |'
- en: 'This example may strike you as odd because it looks like a definition in BSL,
    but, as the interaction with DrRacket shows, it is just a piece of data. Here
    is another one:'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªä¾‹å­å¯èƒ½è®©æ‚¨è§‰å¾—å¥‡æ€ªï¼Œå› ä¸ºå®ƒçœ‹èµ·æ¥åƒBSLä¸­çš„å®šä¹‰ï¼Œä½†æ­£å¦‚ä¸DrRacketçš„äº¤äº’æ‰€æ˜¾ç¤ºçš„ï¼Œå®ƒåªæ˜¯ä¸€å—æ•°æ®ã€‚è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªä¾‹å­ï¼š
- en: '|'
  id: totrans-330
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-331
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ''((6Â f) &#124;'
  id: totrans-332
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ''((6Â f) &#124;'
- en: '&#124; Â Â Â Â (5Â e) &#124;'
  id: totrans-333
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â (5Â e) &#124;'
- en: '&#124; Â Â Â Â (4Â d)) &#124;'
  id: totrans-334
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â (4Â d)) &#124;'
- en: ''
  id: totrans-335
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-336
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| (list (list 6 ''f) (list 5 ''e) (list 4 ''d)) |'
  id: totrans-337
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list (list 6 ''f) (list 5 ''e) (list 4 ''d)) |'
- en: 'This piece of data looks like a table, associating letters with numbers. The
    last example is a piece of art:'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å—æ•°æ®çœ‹èµ·æ¥åƒä¸€å¼ è¡¨ï¼Œå°†å­—æ¯ä¸æ•°å­—å…³è”èµ·æ¥ã€‚æœ€åä¸€ä¸ªä¾‹å­æ˜¯ä¸€å¹…è‰ºæœ¯å“ï¼š
- en: '| > ''(wingÂ (wingÂ bodyÂ wing)Â wing) |'
  id: totrans-339
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ''(wingÂ (wingÂ bodyÂ wing)Â wing) |'
- en: '| (list ''wing (list ''wing ''body ''wing) ''wing) |'
  id: totrans-340
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list ''wing (list ''wing ''body ''wing) ''wing) |'
- en: 'It is now time to write down the rather obvious header for count:'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æ˜¯æ—¶å€™å†™ä¸‹countçš„ç›¸å½“æ˜æ˜¾çš„æ ‡é¢˜äº†ï¼š
- en: '| ;Â [S-expr](#%28tech._s._expr%29)  [Symbol](i2-3.html#%28tech._symbol%29)
    -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-342
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [S-expr](#%28tech._s._expr%29)  [Symbol](i2-3.html#%28tech._symbol%29)
    -> [N](part_two.html#%28tech._n%29) |'
- en: '| ;Â counts all occurrences of sy in sexp |'
  id: totrans-343
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â counts all occurrences of sy in sexp |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (countÂ sexpÂ sy)
    |'
  id: totrans-344
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (countÂ sexpÂ sy)
    |'
- en: '| Â Â 0) |'
  id: totrans-345
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â 0) |'
- en: 'Since the header is obvious, we move on to functional examples. If the given
    [S-expr](#%28tech._s._expr%29) is ''world and the to-be-counted symbol is ''world,
    the answer is obviously 1. Here are some more examples, immediately formulated
    as tests:'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæ ‡é¢˜å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬ç»§ç»­åˆ°åŠŸèƒ½ç¤ºä¾‹ã€‚å¦‚æœç»™å®šçš„[S-expr](#%28tech._s._expr%29)æ˜¯'worldï¼Œè¦è®¡æ•°çš„ç¬¦å·ä¹Ÿæ˜¯'worldï¼Œç­”æ¡ˆæ˜¾ç„¶æ˜¯1ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ›´å¤šç¤ºä¾‹ï¼Œç«‹å³ä½œä¸ºæµ‹è¯•æ¥åˆ¶å®šï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (countÂ ''worldÂ ''hello)Â 0)
    |'
  id: totrans-347
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (countÂ ''worldÂ ''hello)Â 0)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (countÂ ''(worldÂ hello)Â ''hello)Â 1)
    |'
  id: totrans-348
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (countÂ ''(worldÂ hello)Â ''hello)Â 1)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (countÂ ''(((world)Â hello)Â hello)Â ''hello)Â 2)
    |'
  id: totrans-349
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (countÂ ''(((world)Â hello)Â hello)Â ''hello)Â 2)
    |'
- en: 'You can see how convenient quotation notation is for test cases. When it comes
    to templates, however, thinking in terms of [quote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)
    is disastrous.Before we move on to the template step, we need to prepare you for
    the next generalization of the design recipe:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: æ‚¨å¯ä»¥çœ‹åˆ°å¼•ç”¨è¡¨ç¤ºæ³•å¯¹äºæµ‹è¯•ç”¨ä¾‹æ˜¯å¤šä¹ˆæ–¹ä¾¿ã€‚ç„¶è€Œï¼Œå½“æ¶‰åŠåˆ°æ¨¡æ¿æ—¶ï¼Œä»[quote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)çš„è§’åº¦æ€è€ƒæ˜¯ç¾éš¾æ€§çš„ã€‚åœ¨æˆ‘ä»¬ç»§ç»­åˆ°æ¨¡æ¿æ­¥éª¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ‚¨å‡†å¤‡ä¸‹ä¸€ä¸ªè®¾è®¡é£Ÿè°±çš„æ³›åŒ–ï¼š
- en: Hint For intertwined data definitions, create one template per data definition.
    Create them in parallel. Make sure they refer to each other in the same way the
    data definitions do. End
  id: totrans-351
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æç¤ºï¼šå¯¹äºäº¤ç»‡çš„æ•°æ®å®šä¹‰ï¼Œä¸ºæ¯ä¸ªæ•°æ®å®šä¹‰åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ã€‚å¹¶è¡Œåˆ›å»ºå®ƒä»¬ã€‚ç¡®ä¿å®ƒä»¬ä»¥ä¸æ•°æ®å®šä¹‰ç›¸åŒçš„æ–¹å¼ç›¸äº’å¼•ç”¨ã€‚ç»“æŸ
- en: 'This hint sounds more complicated than it is. For our problem, it means we
    need three templates:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæç¤ºå¬èµ·æ¥æ¯”å®é™…è¦å¤æ‚ã€‚å¯¹äºæˆ‘ä»¬çš„é—®é¢˜ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ä¸‰ä¸ªæ¨¡æ¿ï¼š
- en: one for count, which counts occurrences of symbols in [S-expr](#%28tech._s._expr%29)s;
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªç”¨äºè®¡æ•°[S-expr](#%28tech._s._expr%29)ä¸­ç¬¦å·å‡ºç°çš„å‡½æ•°ï¼›
- en: one for a function that counts occurrences of symbols in [SL](#%28tech._sl%29)s;
    and
  id: totrans-354
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªç”¨äºè®¡æ•°[SL](#%28tech._sl%29)ä¸­ç¬¦å·å‡ºç°çš„å‡½æ•°ï¼›å¹¶ä¸”
- en: one for a function that counts occurrences of symbols in [Atom](#%28tech._atom%29)s.
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªç”¨äºè®¡æ•°[Atom](#%28tech._atom%29)ä¸­ç¬¦å·å‡ºç°çš„å‡½æ•°ã€‚
- en: 'And here are three partial templates, with conditionals as suggested by the
    three data definitions:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæä¾›äº†ä¸‰ä¸ªéƒ¨åˆ†æ¨¡æ¿ï¼Œæ¡ä»¶ä¸ä¸‰ä¸ªæ•°æ®å®šä¹‰å»ºè®®ä¸€è‡´ï¼š
- en: '|'
  id: totrans-357
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (countÂ sexpÂ sy)
    &#124;'
  id: totrans-358
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[[define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (count sexp sy)] &#124;'
- en: '&#124; Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  id: totrans-359
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â [[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    ...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    &#124;'
- en: '&#124; Â Â Â [(atom?Â sexp)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-360
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; [(atom?Â sexp) ...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    &#124;'
- en: '&#124; Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    &#124;'
  id: totrans-361
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    ...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    &#124;'
- en: '&#124; Â  &#124;'
  id: totrans-362
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â  &#124;'
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-slÂ slÂ sy)
    &#124;'
  id: totrans-363
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[[define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (count-sl sl sy)] &#124;'
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  id: totrans-364
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    ...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    &#124;'
- en: '&#124; Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â sl)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-365
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; [[empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    sl] ...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    &#124;'
- en: '&#124; Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    &#124;'
  id: totrans-366
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    ...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    &#124;'
- en: ''
  id: totrans-367
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-368
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-369
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-atomÂ atÂ sy)
    &#124;'
  id: totrans-370
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[[define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (count-atom at sy)] &#124;'
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  id: totrans-371
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    ...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    &#124;'
- en: '&#124; Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â at)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-372
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[[number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)
    at] ...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    &#124;'
- en: '&#124; Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â at)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-373
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`|   Â Â Â ([([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â at)
    [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |)'
- en: '&#124; Â Â Â Â [([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    &#124;'
  id: totrans-374
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`|  Â Â Â ([([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)
    [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)])
    |)'
- en: ''
  id: totrans-375
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-376
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: 'The template for count contains a two-pronged conditional because the data
    definition for [S-expr](#%28tech._s._expr%29) has two clauses. It uses the atom?
    function to distinguish the case for [Atom](#%28tech._atom%29)s from the case
    for [SL](#%28tech._sl%29)s. The template named count-sl consumes an element of
    [SL](#%28tech._sl%29) and a symbol, and because [SL](#%28tech._sl%29) is basically
    a list, count-sl also contains a two-pronged [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29).
    Finally, count-atom is supposed to work for both [Atom](#%28tech._atom%29)s and
    [Symbol](i2-3.html#%28tech._symbol%29)s. And this means that its template checks
    for the three distinct forms of data mentioned in the data definition of [Atom](#%28tech._atom%29).The
    next step is to take apart compound data in the relevant clauses:'
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡æ¿`count`åŒ…å«ä¸€ä¸ªåŒæ¡ä»¶åˆ†æ”¯ï¼Œå› ä¸º[S-expr](#%28tech._s._expr%29)çš„æ•°æ®å®šä¹‰æœ‰ä¸¤ä¸ªå­å¥ã€‚å®ƒä½¿ç”¨`atom?`å‡½æ•°æ¥åŒºåˆ†[Atom](#%28tech._atom%29)çš„æƒ…å†µå’Œ[SL](#%28tech._sl%29)çš„æƒ…å†µã€‚åä¸º`count-sl`çš„æ¨¡æ¿æ¶ˆè€—ä¸€ä¸ª[SL](#%28tech._sl%29)å…ƒç´ å’Œä¸€ä¸ªç¬¦å·ï¼Œå› ä¸º[SL](#%28tech._sl%29)åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ‰€ä»¥`count-sl`ä¹ŸåŒ…å«ä¸€ä¸ªåŒæ¡ä»¶`cond`ã€‚æœ€åï¼Œ`count-atom`åº”è¯¥é€‚ç”¨äº[Atom](#%28tech._atom%29)å’Œ[Symbol](i2-3.html#%28tech._symbol%29)ã€‚è¿™æ„å‘³ç€å®ƒçš„æ¨¡æ¿æ£€æŸ¥äº†[Atom](#%28tech._atom%29)æ•°æ®å®šä¹‰ä¸­æåˆ°çš„ä¸‰ç§ä¸åŒçš„æ•°æ®å½¢å¼ã€‚ä¸‹ä¸€æ­¥æ˜¯å°†ç›¸å…³å­å¥ä¸­çš„å¤åˆæ•°æ®æ‹†åˆ†å‡ºæ¥ï¼š
- en: '|'
  id: totrans-378
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (countÂ sexpÂ sy)
    &#124;'
  id: totrans-379
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (countÂ sexpÂ sy)
    |)'
- en: '&#124; Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  id: totrans-380
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`|   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |)'
- en: '&#124; Â Â Â [(atom?Â sexp)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-381
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`|  Â Â Â [(atom?Â sexp) [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |)'
- en: '&#124; Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    &#124;'
  id: totrans-382
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`|  Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    |)'
- en: '&#124; Â  &#124;'
  id: totrans-383
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`|   | '
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-slÂ slÂ sy)
    &#124;'
  id: totrans-384
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-slÂ slÂ sy)
    |)'
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  id: totrans-385
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`|   | ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |)'
- en: '&#124; Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â sl)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-386
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [(empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    sl) | '
- en: '&#124; Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    &#124;'
  id: totrans-387
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [(else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    | '
- en: '&#124; Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sl)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    &#124;'
  id: totrans-388
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    sl) [(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    | '
- en: '&#124; Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â sl))]))
    &#124;'
  id: totrans-389
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [(rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    sl))])) | '
- en: ''
  id: totrans-390
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-391
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | '
- en: ''
  id: totrans-392
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-atomÂ atÂ sy)
    &#124;'
  id: totrans-393
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [(define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (count-atom at sy) | '
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  id: totrans-394
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [(cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    | '
- en: '&#124; Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â at)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-395
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [(number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)
    at) | '
- en: '&#124; Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â at)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-396
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [(string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)
    at) |'
- en: '&#124; Â Â Â Â [([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    &#124;'
  id: totrans-397
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [(symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)
    at) [(...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    | '
- en: ''
  id: totrans-398
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-399
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| '
- en: 'Why do we add just two selector expressions to count-sl?The last step in the
    template creation process calls for an inspection of self-references in the data
    definitions. In our context, this means self-references and references from one
    data definition to another and (possibly) back. Letâ€™s inspect the [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    lines in the three templates:'
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºä»€ä¹ˆæˆ‘ä»¬åªå‘ count-sl æ·»åŠ ä¸¤ä¸ªé€‰æ‹©è¡¨è¾¾å¼ï¼Ÿæ¨¡æ¿åˆ›å»ºè¿‡ç¨‹çš„æœ€åä¸€æ­¥éœ€è¦æ£€æŸ¥æ•°æ®å®šä¹‰ä¸­çš„è‡ªå¼•ç”¨ã€‚åœ¨æˆ‘ä»¬çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™æ„å‘³ç€è‡ªå¼•ç”¨ä»¥åŠä¸€ä¸ªæ•°æ®å®šä¹‰åˆ°å¦ä¸€ä¸ªæ•°æ®å®šä¹‰çš„å¼•ç”¨ï¼Œä»¥åŠï¼ˆå¯èƒ½ï¼‰åå‘å¼•ç”¨ã€‚è®©æˆ‘ä»¬æ£€æŸ¥ä¸‰ä¸ªæ¨¡æ¿ä¸­çš„
    [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    è¡Œï¼š
- en: The atom? line in count corresponds to the first line in the definition of [S-expr](#%28tech._s._expr%29).
    To indicate the cross-reference from here to [Atom](#%28tech._atom%29), we add
    (count-atom  sexp  sy), meaning we interpret sexp as an [Atom](#%28tech._atom%29)
    and let the appropriate function deal with it.
  id: totrans-401
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: count ä¸­çš„ atom? è¡Œå¯¹åº”äº [S-expr](#%28tech._s._expr%29) å®šä¹‰çš„ç¬¬ä¸€è¡Œã€‚ä¸ºäº†è¡¨ç¤ºä»è¿™é‡Œåˆ° [Atom](#%28tech._atom%29)
    çš„äº¤å‰å¼•ç”¨ï¼Œæˆ‘ä»¬æ·»åŠ äº† (count-atom  sexp  sy)ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å°† sexp è§£é‡Šä¸º [Atom](#%28tech._atom%29)
    å¹¶è®©é€‚å½“çš„å‡½æ•°å¤„ç†å®ƒã€‚
- en: Following the same line of thought, the second [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    line in count calls for the addition of (count-sl  sexp  sy).
  id: totrans-402
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '&#124;  Following the same line of thought, the second [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    line in count calls for the addition of (count-sl  sexp  sy).'
- en: The [empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    line in count-sl corresponds to a line in the data definition that makes no reference
    to another data definition.
  id: totrans-403
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: count-sl ä¸­çš„ [ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    è¡Œå¯¹åº”äºæ•°æ®å®šä¹‰ä¸­ä¸å¼•ç”¨å…¶ä»–æ•°æ®å®šä¹‰çš„ä¸€è¡Œã€‚
- en: In contrast, the [else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    line contains two selector expressions, and each extracts a different kind of
    value. Specifically, ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  sl)
    is an element of [S-expr](#%28tech._s._expr%29), which means that we wrap it in
    (count  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)).
    After all, count is responsible for counting inside of arbitrary [S-expr](#%28tech._s._expr%29)s.
    Next, ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  sl)
    corresponds to a self-reference, and we know that we need to deal with those via
    recursive function calls.
  id: totrans-404
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç›¸æ¯”ä¹‹ä¸‹ï¼Œ[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    è¡ŒåŒ…å«ä¸¤ä¸ªé€‰æ‹©è¡¨è¾¾å¼ï¼Œæ¯ä¸ªéƒ½æå–ä¸åŒç±»å‹çš„æ•°æ®ã€‚å…·ä½“æ¥è¯´ï¼Œ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  sl)
    æ˜¯ [S-expr](#%28tech._s._expr%29) çš„ä¸€ä¸ªå…ƒç´ ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å°†å…¶åŒ…è£¹åœ¨ (count  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    ä¸­ã€‚æ¯•ç«Ÿï¼Œcount è´Ÿè´£è®¡ç®—ä»»æ„ [S-expr](#%28tech._s._expr%29) å†…éƒ¨çš„å…ƒç´ ã€‚æ¥ä¸‹æ¥ï¼Œ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  sl)
    å¯¹åº”äºä¸€ä¸ªè‡ªå¼•ç”¨ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬éœ€è¦é€šè¿‡é€’å½’å‡½æ•°è°ƒç”¨æ¥å¤„ç†è¿™äº›ã€‚
- en: Finally, all three cases in [Atom](#%28tech._atom%29) refer to atomic forms
    of data. Therefore the count-atom function does not need to change.
  id: totrans-405
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æœ€åï¼Œ[Atom](#%28tech._atom%29) ä¸­çš„æ‰€æœ‰ä¸‰ä¸ªæƒ…å†µéƒ½æŒ‡çš„æ˜¯æ•°æ®çš„åŸºæœ¬å½¢å¼ã€‚å› æ­¤ï¼Œcount-atom å‡½æ•°ä¸éœ€è¦æ›´æ”¹ã€‚
- en: '|'
  id: totrans-406
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-407
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (countÂ sexpÂ sy)
    &#124;'
  id: totrans-408
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;    ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (countÂ sexpÂ sy)
    &#124;'
- en: '&#124; Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  id: totrans-409
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;     ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
- en: '&#124; Â Â Â [(atom?Â sexp) &#124;'
  id: totrans-410
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;   Â Â [(atom?Â sexp) &#124;'
- en: '&#124; Â Â Â Â (count-atomÂ sexpÂ sy)] &#124;'
  id: totrans-411
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;    Â Â Â Â (count-atomÂ sexpÂ sy)] &#124;'
- en: '&#124; Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    &#124;'
  id: totrans-412
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (count-slÂ sexpÂ sy)])) &#124;'
  id: totrans-413
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â  &#124;'
  id: totrans-414
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-slÂ slÂ sy)
    &#124;'
  id: totrans-415
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  id: totrans-416
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â sl)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-417
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    &#124;'
  id: totrans-418
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    &#124;'
  id: totrans-419
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â (countÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sl)Â sy)
    &#124;'
  id: totrans-420
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    &#124;'
  id: totrans-421
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â (count-slÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â sl)Â sy)
    &#124;'
  id: totrans-422
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    &#124;'
  id: totrans-423
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  id: totrans-424
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-425
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  id: totrans-426
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-atomÂ atÂ sy)
    &#124;'
  id: totrans-427
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  id: totrans-428
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â at)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-429
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â at)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    &#124;'
  id: totrans-430
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    &#124;'
  id: totrans-431
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| &#124; Â Â Â Â [([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    &#124;'
- en: ''
  id: totrans-432
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-433
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-434
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 116: A template for S-expressions'
  id: totrans-435
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| å›¾Â 116ï¼šS-è¡¨è¾¾å¼çš„æ¨¡æ¿'
- en: '| ;Â [S-expr](#%28tech._s._expr%29)  [Symbol](i2-3.html#%28tech._symbol%29)
    -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-436
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [S-expr](#%28tech._s._expr%29)  [Symbol](i2-3.html#%28tech._symbol%29)
    -> [N](part_two.html#%28tech._n%29) |'
- en: '| ;Â counts all occurrences of sy in sexp |'
  id: totrans-437
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â counts all occurrences of sy in sexp |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (countÂ sexpÂ sy)
    |'
  id: totrans-438
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (countÂ sexpÂ sy)
    |'
- en: '| Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-439
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â [(atom?Â sexp)Â (count-atomÂ sexpÂ sy)] |'
  id: totrans-440
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â [(atom?Â sexp)Â (count-atomÂ sexpÂ sy)] |'
- en: '| Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (count-slÂ sexpÂ sy)]))
    |'
  id: totrans-441
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (count-slÂ sexpÂ sy)]))
    |'
- en: '| Â  |'
  id: totrans-442
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [SL](#%28tech._sl%29)  [Symbol](i2-3.html#%28tech._symbol%29) -> [N](part_two.html#%28tech._n%29)
    |'
  id: totrans-443
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [SL](#%28tech._sl%29)  [Symbol](i2-3.html#%28tech._symbol%29) -> [N](part_two.html#%28tech._n%29)
    |'
- en: '| ;Â counts all occurrences of sy in sl |'
  id: totrans-444
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â counts all occurrences of sy in sl |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-slÂ slÂ sy)
    |'
  id: totrans-445
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-slÂ slÂ sy)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-446
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â sl)Â 0]
    |'
  id: totrans-447
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â sl)Â 0]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-448
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (countÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sl)Â sy)Â (count-slÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â sl)Â sy))]))
    |'
  id: totrans-449
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (countÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sl)Â sy)Â (count-slÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â sl)Â sy))]))
    |'
- en: '| Â  |'
  id: totrans-450
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Atom](#%28tech._atom%29)  [Symbol](i2-3.html#%28tech._symbol%29) -> [N](part_two.html#%28tech._n%29)
    |'
  id: totrans-451
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Atom](#%28tech._atom%29)  [Symbol](i2-3.html#%28tech._symbol%29) -> [N](part_two.html#%28tech._n%29)
    |'
- en: '| ;Â counts all occurrences of sy in at |'
  id: totrans-452
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â counts all occurrences of sy in at |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-atomÂ atÂ sy)
    |'
  id: totrans-453
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (count-atomÂ atÂ sy)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-454
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â at)Â 0]
    |'
  id: totrans-455
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â at)Â 0]
    |'
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â at)Â 0]
    |'
  id: totrans-456
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â at)Â 0]
    |'
- en: '| Â Â Â Â [([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â atÂ sy)Â 1Â 0)]))
    |'
  id: totrans-457
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â atÂ sy)Â 1Â 0)]))
    |'
- en: ''
  id: totrans-458
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 117: A program for S-expressions'
  id: totrans-459
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 117ï¼šS-expr çš„ç¨‹åº
- en: '[FigureÂ 116](#%28counter._%28figure._fig~3asexp-template%29%29) presents the
    three complete templates. Filling in the blanks in these templates is straightforward,
    as [figureÂ 117](#%28counter._%28figure._fig~3asexp-function%29%29) shows. You
    ought to be able to explain any random line in the three definitions. For example:'
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾ 116](#%28counter._%28figure._fig~3asexp-template%29%29) å±•ç¤ºäº†ä¸‰ä¸ªå®Œæ•´çš„æ¨¡æ¿ã€‚å¦‚å›¾ [å›¾
    117](#%28counter._%28figure._fig~3asexp-function%29%29) æ‰€ç¤ºï¼Œå¡«å……è¿™äº›æ¨¡æ¿ä¸­çš„ç©ºç™½æ˜¯ç›´æ¥çš„ã€‚ä½ åº”è¯¥èƒ½å¤Ÿè§£é‡Šä¸‰ä¸ªå®šä¹‰ä¸­çš„ä»»ä½•ä¸€è¡Œã€‚ä¾‹å¦‚ï¼š'
- en: '[(atom?Â sexp)Â (count-atomÂ sexpÂ sy)]'
  id: totrans-461
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[(atom?Â sexp)Â (count-atomÂ sexpÂ sy)]'
- en: determines whether sexp is an [Atom](#%28tech._atom%29) and, if so, interprets
    the [S-expr](#%28tech._s._expr%29) as an [Atom](#%28tech._atom%29) via count-atom.
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ¤æ–­ sexp æ˜¯å¦æ˜¯ [åŸå­](#%28tech._atom%29)ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™é€šè¿‡ count-atom å°† [S-expr](#%28tech._s._expr%29)
    è§£é‡Šä¸º [åŸå­](#%28tech._atom%29)ã€‚
- en: '| [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-463
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (countÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sl)Â sy)Â (count-slÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â sl)Â sy))]
    |'
  id: totrans-464
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (countÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sl)Â sy)Â (count-slÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â sl)Â sy))]
    |'
- en: 'means the given list consists of two parts: an [S-expr](#%28tech._s._expr%29)
    and an [SL](#%28tech._sl%29). By using count and count-sl, the corresponding functions
    are used to count how often sy appears in each part, and the two numbers are added
    upâ€”<wbr>yielding the total number of sys in all of sexp.'
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: æ„å‘³ç€ç»™å®šçš„åˆ—è¡¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ª [S-expr](#%28tech._s._expr%29) å’Œä¸€ä¸ª [SL](#%28tech._sl%29)ã€‚é€šè¿‡ä½¿ç”¨
    count å’Œ count-slï¼Œç›¸åº”çš„å‡½æ•°ç”¨äºè®¡ç®— sy åœ¨æ¯ä¸€éƒ¨åˆ†ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åå°†è¿™ä¸¤ä¸ªæ•°å­—ç›¸åŠ â€”â€”<wbr>å¾—åˆ° sexp ä¸­ sys çš„æ€»æ•°ã€‚
- en: '[([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â atÂ sy)Â 1Â 0)]'
  id: totrans-466
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â atÂ sy)Â 1Â 0)]'
- en: tells us that if an [Atom](#%28tech._atom%29) is a [Symbol](i2-3.html#%28tech._symbol%29),
    sy occurs once if it is equal to sexp and otherwise it does not occur at all.
    Since the two pieces of data are atomic, there is no other possibility.
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: å‘Šè¯‰æˆ‘ä»¬ï¼Œå¦‚æœä¸€ä¸ª [åŸå­](#%28tech._atom%29) æ˜¯ä¸€ä¸ª [ç¬¦å·](i2-3.html#%28tech._symbol%29)ï¼Œsy
    å¦‚æœç­‰äº sexp åˆ™å‡ºç°ä¸€æ¬¡ï¼Œå¦åˆ™æ ¹æœ¬ä¸å‡ºç°ã€‚ç”±äºè¿™ä¸¤ä»½æ•°æ®æ˜¯åŸå­çš„ï¼Œæ²¡æœ‰å…¶ä»–å¯èƒ½æ€§ã€‚
- en: ExerciseÂ 317\. A program that consists of three connected functions ought to
    express this relationship with a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    expression.
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  317. ç”±ä¸‰ä¸ªè¿æ¥å‡½æ•°ç»„æˆçš„ç¨‹åºåº”è¯¥ä½¿ç”¨ [å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    è¡¨è¾¾å¼æ¥è¡¨è¾¾è¿™ç§å…³ç³»ã€‚
- en: Copy and reorganize the program from [figureÂ 117](#%28counter._%28figure._fig~3asexp-function%29%29)
    into a single function using [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29).
    Validate the revised code with the test suite for count.
  id: totrans-469
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ [å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    å°† [å›¾ 117](#%28counter._%28figure._fig~3asexp-function%29%29) ä¸­çš„ç¨‹åºå¤åˆ¶å¹¶é‡æ–°ç»„ç»‡æˆä¸€ä¸ªå•ä¸€å‡½æ•°ã€‚ä½¿ç”¨
    count çš„æµ‹è¯•å¥—ä»¶éªŒè¯ä¿®æ”¹åçš„ä»£ç ã€‚
- en: The second argument to the local functions, sy, never changes. It is always
    the same as the original symbol. Hence you can eliminate it from the local function
    definitions to tell the reader that sy is a constant across the traversal process.
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: å±€éƒ¨å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•° sy ä»ä¸æ”¹å˜ã€‚å®ƒå§‹ç»ˆä¸åŸå§‹ç¬¦å·ç›¸åŒã€‚å› æ­¤ï¼Œä½ å¯ä»¥ä»å±€éƒ¨å‡½æ•°å®šä¹‰ä¸­æ¶ˆé™¤å®ƒï¼Œä»¥å‘ŠçŸ¥è¯»è€… sy åœ¨éå†è¿‡ç¨‹ä¸­æ˜¯å¸¸æ•°ã€‚
- en: ExerciseÂ 318\. Design depth. The function consumes an S-expression and determines
    its depth. An [Atom](#%28tech._atom%29) has a depth of 1. The depth of a list
    of S-expressions is the maximum depth of its items plus 1.
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  318. è®¾è®¡æ·±åº¦ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ª S è¡¨è¾¾å¼å¹¶ç¡®å®šå…¶æ·±åº¦ã€‚ä¸€ä¸ª [åŸå­](#%28tech._atom%29) çš„æ·±åº¦ä¸º 1ã€‚S è¡¨è¾¾å¼åˆ—è¡¨çš„æ·±åº¦æ˜¯å…¶é¡¹çš„æœ€å¤§æ·±åº¦åŠ 
    1ã€‚
- en: ExerciseÂ 319\. Design substitute. It consumes an S-expression s and two symbols,
    old and new. The result is like s with all occurrences of old replaced by new.
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  319. è®¾è®¡æ›¿æ¢å‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ª S è¡¨è¾¾å¼ s å’Œä¸¤ä¸ªç¬¦å·ï¼Œæ—§çš„å’Œæ–°çš„ã€‚ç»“æœæ˜¯ sï¼Œå…¶ä¸­æ‰€æœ‰æ—§çš„å‡ºç°éƒ½è¢«æ–°æ›¿æ¢ã€‚
- en: ExerciseÂ 320\. Practice the step from data definition to function design with
    two changes to the definition of [S-expr](#%28tech._s._expr%29).
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  320. ä½¿ç”¨å¯¹ [S-expr](#%28tech._s._expr%29) å®šä¹‰çš„ä¸¤ä¸ªæ›´æ”¹æ¥ç»ƒä¹ ä»æ•°æ®å®šä¹‰åˆ°å‡½æ•°è®¾è®¡çš„è¿‡ç¨‹ã€‚
- en: For the first step, reformulate the data definition for [S-expr](#%28tech._s._expr%29)
    so that the first clause of the first data definition is expanded into the three
    clauses of [Atom](#%28tech._atom%29) and the second data definition uses the [List-of](part_three.html#%28tech._sim-dd._list._of%29)
    abstraction. Redesign the count function for this data definition.
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºç¬¬ä¸€æ­¥ï¼Œé‡æ–°åˆ¶å®š [S-expr](#%28tech._s._expr%29) çš„æ•°æ®å®šä¹‰ï¼Œä»¥ä¾¿ç¬¬ä¸€ä¸ªæ•°æ®å®šä¹‰çš„ç¬¬ä¸€ä¸ªå­å¥æ‰©å±•ä¸º [åŸå­](#%28tech._atom%29)
    çš„ä¸‰ä¸ªå­å¥ï¼Œç¬¬äºŒä¸ªæ•°æ®å®šä¹‰ä½¿ç”¨ [List-of](part_three.html#%28tech._sim-dd._list._of%29) æŠ½è±¡ã€‚ä¸ºæ­¤æ•°æ®å®šä¹‰é‡æ–°è®¾è®¡
    count å‡½æ•°ã€‚
- en: For the second step, Integrate the data definition of [SL](#%28tech._sl%29)
    into the one for [S-expr](#%28tech._s._expr%29). Simplify count again. Hint Use
    [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29).
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºç¬¬äºŒæ­¥ï¼Œå°† [SL](#%28tech._sl%29) çš„æ•°æ®å®šä¹‰é›†æˆåˆ° [S-expr](#%28tech._s._expr%29) çš„å®šä¹‰ä¸­ã€‚å†æ¬¡ç®€åŒ–
    countã€‚æç¤ºï¼šä½¿ç”¨ [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)ã€‚
- en: ExerciseÂ 321\. Abstract the data definitions for [S-expr](#%28tech._s._expr%29)
    and [SL](#%28tech._sl%29) so that they abstract over the kinds of [Atom](#%28tech._atom%29)s
    that may appear.
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  321. æŠ½è±¡ [S-expr](#%28tech._s._expr%29) å’Œ [SL](#%28tech._sl%29) çš„æ•°æ®å®šä¹‰ï¼Œä»¥ä¾¿å®ƒä»¬æŠ½è±¡å‡ºå¯èƒ½å‡ºç°çš„
    [åŸå­](#%28tech._atom%29) ç±»å‹ã€‚
- en: 19.4Designing with Intertwined Data[ğŸ”—](#(part._sec~3adesign-.N) "Link to here")
  id: totrans-477
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.4 ä½¿ç”¨äº¤ç»‡æ•°æ®è®¾è®¡[ğŸ”—](#(part._sec~3adesign-.N) "é“¾æ¥åˆ°è¿™é‡Œ")
- en: 'The jump from self-referential data definitions to collections of data definitions
    with mutual references is far smaller than the one from data definitions for finite
    data to self-referential data definitions. Indeed, the design recipe for self-referential
    data definitionsâ€”<wbr>see [Designing with Self-Referential Data Definitions](part_two.html#%28part._ch~3adesign-lists%29)â€”<wbr>needs
    only minor adjustments to apply to this seemingly complex situation:'
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: ä»è‡ªå¼•ç”¨æ•°æ®å®šä¹‰åˆ°å…·æœ‰ç›¸äº’å¼•ç”¨çš„æ•°æ®å®šä¹‰é›†åˆçš„è·³è·ƒè¿œå°äºä»æœ‰é™æ•°æ®çš„æ•°æ®å®šä¹‰åˆ°è‡ªå¼•ç”¨æ•°æ®å®šä¹‰çš„è·³è·ƒã€‚ç¡®å®ï¼Œè‡ªå¼•ç”¨æ•°æ®å®šä¹‰çš„è®¾è®¡é…æ–¹â€”â€”è§ [ä½¿ç”¨è‡ªå¼•ç”¨æ•°æ®å®šä¹‰è®¾è®¡](part_two.html#%28part._ch~3adesign-lists%29)â€”â€”åªéœ€è¿›è¡Œå°‘é‡è°ƒæ•´å³å¯åº”ç”¨äºè¿™ç§çœ‹ä¼¼å¤æ‚çš„æƒ…å†µï¼š
- en: The need for â€œnestsâ€ of mutually related data definitions is similar to the
    one to the need for self-referential data definitions. The problem statement deals
    with many distinct kinds of information, and one form of information refers to
    other kinds.
  id: totrans-479
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: â€œç›¸äº’å…³è”çš„æ•°æ®å®šä¹‰çš„åµŒå¥—â€çš„éœ€æ±‚ä¸è‡ªå¼•ç”¨æ•°æ®å®šä¹‰çš„éœ€æ±‚ç›¸ä¼¼ã€‚é—®é¢˜é™ˆè¿°æ¶‰åŠè®¸å¤šä¸åŒç±»å‹çš„ä¿¡æ¯ï¼Œå…¶ä¸­ä¸€ç§ä¿¡æ¯å¼•ç”¨äº†å…¶ä»–ç±»å‹ã€‚
- en: Before you proceed in such situations, draw arrows to connect references to
    definitions. Consider the left side of [figureÂ 118](#%28counter._%28figure._fig~3adef-data-mutual-arrows%29%29).
    It displays the definition for [S-expr](#%28tech._s._expr%29), which contains
    references to [SL](#%28tech._sl%29) and [Atom](#%28tech._atom%29) that are connected
    to their respective definitions via arrows. Similarly, the definition of [SL](#%28tech._sl%29)
    contains one self-reference and one reference back to [S-expr](#%28tech._s._expr%29);
    again, both are connected by appropriate arrows.
  id: totrans-480
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: åœ¨æ­¤ç±»æƒ…å†µä¸‹ç»§ç»­ä¹‹å‰ï¼Œç»˜åˆ¶ç®­å¤´ä»¥è¿æ¥å¯¹å®šä¹‰çš„å¼•ç”¨ã€‚è€ƒè™‘[å›¾118](#%28counter._%28figure._fig~3adef-data-mutual-arrows%29%29)çš„å·¦ä¾§ã€‚å®ƒæ˜¾ç¤ºäº†[S-expr](#%28tech._s._expr%29)çš„å®šä¹‰ï¼Œå…¶ä¸­åŒ…å«å¯¹[SL](#%28tech._sl%29)å’Œ[Atom](#%28tech._atom%29)çš„å¼•ç”¨ï¼Œè¿™äº›å¼•ç”¨é€šè¿‡ç®­å¤´ä¸å„è‡ªçš„å®šä¹‰ç›¸è¿ã€‚åŒæ ·ï¼Œ[SL](#%28tech._sl%29)çš„å®šä¹‰åŒ…å«ä¸€ä¸ªè‡ªå¼•ç”¨å’Œä¸€ä¸ªå¯¹[S-expr](#%28tech._s._expr%29)çš„å¼•ç”¨ï¼›å†æ¬¡ï¼Œä¸¤è€…éƒ½é€šè¿‡é€‚å½“çš„ç®­å¤´ç›¸è¿ã€‚
- en: Like self-referential data definitions, these nests of definitions also call
    for validation. At a minimum, you must be able to construct some examples for
    every individual definition. Start from clauses that do not refer to any of the
    other data definitions in the nest. Keep in mind that the definition may be invalid
    if it is impossible to generate examples from them.
  id: totrans-481
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç±»ä¼¼äºè‡ªå¼•ç”¨çš„æ•°æ®å®šä¹‰ï¼Œè¿™äº›å®šä¹‰çš„åµŒå¥—ä¹Ÿéœ€è¦è¿›è¡ŒéªŒè¯ã€‚è‡³å°‘ï¼Œä½ å¿…é¡»èƒ½å¤Ÿä¸ºæ¯ä¸ªå•ç‹¬çš„å®šä¹‰æ„é€ ä¸€äº›ç¤ºä¾‹ã€‚ä»é‚£äº›ä¸å¼•ç”¨åµŒå¥—ä¸­å…¶ä»–æ•°æ®å®šä¹‰çš„å­å¥å¼€å§‹ã€‚è®°ä½ï¼Œå¦‚æœæ— æ³•ä»å®ƒä»¬ç”Ÿæˆç¤ºä¾‹ï¼Œå®šä¹‰å¯èƒ½æ˜¯æ— æ•ˆçš„ã€‚
- en: The key change is that you must design as many functions in parallel as there
    are data definitions. Each function specializes for one of the data definitions;
    all remaining arguments remain the same. Based on that, you start with a signature,
    a purpose statement, and a dummy definition for each function.
  id: totrans-482
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å…³é”®çš„æ”¹å˜æ˜¯ä½ å¿…é¡»è®¾è®¡ä¸æ•°æ®å®šä¹‰æ•°é‡ä¸€æ ·å¤šçš„å‡½æ•°ã€‚æ¯ä¸ªå‡½æ•°ä¸“é—¨é’ˆå¯¹ä¸€ä¸ªæ•°æ®å®šä¹‰ï¼›æ‰€æœ‰å‰©ä½™çš„å‚æ•°ä¿æŒä¸å˜ã€‚åŸºäºè¿™ä¸€ç‚¹ï¼Œä½ ä¸ºæ¯ä¸ªå‡½æ•°å¼€å§‹ä¸€ä¸ªç­¾åã€ä¸€ä¸ªç›®çš„å£°æ˜å’Œä¸€ä¸ªè™šæ‹Ÿå®šä¹‰ã€‚
- en: Be sure to work through functional examples that use all mutual references in
    the nest of data definitions.
  id: totrans-483
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç¡®ä¿å¤„ç†ä½¿ç”¨æ•°æ®å®šä¹‰åµŒå¥—ä¸­æ‰€æœ‰ç›¸äº’å¼•ç”¨çš„åŠŸèƒ½ç¤ºä¾‹ã€‚
- en: For each function, design the template according to its primary data definition.
    Use [figureÂ 52](part_two.html#%28counter._%28figure._fig~3atemplate-q%29%29) to
    guide the template creation up to the last step. The revised last step calls for
    a check for all self-references and cross-references. Use the data definitions
    annotated with arrows to guide this step. For each arrow in the data definitions,
    include an arrow in the templates. See the right side of [figureÂ 118](#%28counter._%28figure._fig~3adef-data-mutual-arrows%29%29)
    for the arrow-annotated version of the templates.
  id: totrans-484
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¯¹äºæ¯ä¸ªå‡½æ•°ï¼Œæ ¹æ®å…¶ä¸»è¦æ•°æ®å®šä¹‰è®¾è®¡æ¨¡æ¿ã€‚ä½¿ç”¨[å›¾52](part_two.html#%28counter._%28figure._fig~3atemplate-q%29%29)æ¥æŒ‡å¯¼æ¨¡æ¿åˆ›å»ºï¼Œç›´åˆ°æœ€åä¸€æ­¥ã€‚ä¿®è®¢çš„æœ€åä¸€æ­¥è¦æ±‚æ£€æŸ¥æ‰€æœ‰è‡ªå¼•ç”¨å’Œäº¤å‰å¼•ç”¨ã€‚ä½¿ç”¨å¸¦æœ‰ç®­å¤´çš„æ³¨é‡Šæ•°æ®å®šä¹‰æ¥æŒ‡å¯¼è¿™ä¸€æ­¥ã€‚åœ¨æ•°æ®å®šä¹‰ä¸­çš„æ¯ä¸ªç®­å¤´ä¸Šï¼Œæ¨¡æ¿ä¸­ä¹Ÿåº”åŒ…å«ä¸€ä¸ªç®­å¤´ã€‚å‚è§[å›¾118](#%28counter._%28figure._fig~3adef-data-mutual-arrows%29%29)çš„å³ä¾§ï¼Œä»¥æŸ¥çœ‹æ¨¡æ¿çš„ç®­å¤´æ³¨é‡Šç‰ˆæœ¬ã€‚
- en: '| ![image](../Images/cd031d07b7f1b4ecf6374520e88fbf20.png) |  | ![image](../Images/dac9d151af1b0eb7c0ee3406eab0db2a.png)
    |'
  id: totrans-485
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/cd031d07b7f1b4ecf6374520e88fbf20.png) |  | ![image](../Images/dac9d151af1b0eb7c0ee3406eab0db2a.png)
    |'
- en: ''
  id: totrans-486
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 118: Arrows for nests of data definitions and templates'
  id: totrans-487
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾118ï¼šæ•°æ®å®šä¹‰å’Œæ¨¡æ¿åµŒå¥—çš„ç®­å¤´
- en: Now replace the arrows with actual function calls. As you gain experience, you
    will naturally skip the arrow-drawing step and use function calls directly.
  id: totrans-488
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç°åœ¨ç”¨å®é™…çš„åŠŸèƒ½è°ƒç”¨æ›¿æ¢ç®­å¤´ã€‚éšç€ç»éªŒçš„ç§¯ç´¯ï¼Œä½ å°†è‡ªç„¶åœ°è·³è¿‡ç”»ç®­å¤´çš„æ­¥éª¤ï¼Œç›´æ¥ä½¿ç”¨åŠŸèƒ½è°ƒç”¨ã€‚
- en: Note Observe how both nestsâ€”<wbr>the one for data definitions and the one for
    function templatesâ€”<wbr>contain four arrows, and note how pairs of arrows correspond
    to each other. Researchers call this correspondence a symmetry. It is evidence
    that the design recipe provides a natural way for going from problems to solutions.
  id: totrans-489
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: æ³¨æ„è§‚å¯Ÿè¿™ä¸¤ä¸ªåµŒå¥—â€”â€”æ•°æ®å®šä¹‰çš„åµŒå¥—å’Œå‡½æ•°æ¨¡æ¿çš„åµŒå¥—â€”â€”éƒ½åŒ…å«å››ä¸ªç®­å¤´ï¼Œå¹¶æ³¨æ„ç®­å¤´å¯¹æ˜¯å¦‚ä½•ç›¸äº’å¯¹åº”çš„ã€‚ç ”ç©¶äººå‘˜ç§°è¿™ç§å¯¹åº”ä¸ºå¯¹ç§°æ€§ã€‚è¿™æ˜¯è®¾è®¡é…æ–¹æä¾›ä»é—®é¢˜åˆ°è§£å†³æ–¹æ¡ˆçš„è‡ªç„¶æ–¹å¼çš„è¯æ®ã€‚
- en: For the design of the body, we start with those [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    lines that do not contain natural recursions or calls to other functions. They
    are called base cases. The corresponding answers are typically easy to formulate
    or are already given by the examples. After that, you deal with the self-referential
    cases and the cases of cross-function calls. Let the questions and answers of
    [figureÂ 53](part_two.html#%28counter._%28figure._fig~3adefinition-q%29%29) guide
    you.
  id: totrans-490
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¯¹äºè®¾è®¡ä¸»ä½“ï¼Œæˆ‘ä»¬ä»é‚£äº›ä¸åŒ…å«è‡ªç„¶é€’å½’æˆ–å…¶ä»–å‡½æ•°è°ƒç”¨çš„[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)è¡Œå¼€å§‹ã€‚å®ƒä»¬è¢«ç§°ä¸ºåŸºæœ¬æƒ…å†µã€‚ç›¸åº”çš„ç­”æ¡ˆé€šå¸¸å¾ˆå®¹æ˜“åˆ¶å®šï¼Œæˆ–è€…å·²ç»ç”±ç¤ºä¾‹ç»™å‡ºã€‚ä¹‹åï¼Œä½ å¤„ç†è‡ªå¼•ç”¨çš„æƒ…å†µå’Œè·¨å‡½æ•°è°ƒç”¨çš„æƒ…å†µã€‚è®©[å›¾53](part_two.html#%28counter._%28figure._fig~3adefinition-q%29%29)ä¸­çš„é—®é¢˜å’Œç­”æ¡ˆå¼•å¯¼ä½ ã€‚
- en: Run the tests when all definitions are completed. If an auxiliary function is
    broken, you may get two error reports, one for the main function and another one
    for the flawed auxiliary definition. A single fix should eliminate both. Do make
    sure that running the tests covers all the pieces of the function.
  id: totrans-491
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å®Œæˆæ‰€æœ‰å®šä¹‰åï¼Œè¿è¡Œæµ‹è¯•ã€‚å¦‚æœä¸€ä¸ªè¾…åŠ©å‡½æ•°å‡ºé”™ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°ä¸¤ä¸ªé”™è¯¯æŠ¥å‘Šï¼Œä¸€ä¸ªé’ˆå¯¹ä¸»å‡½æ•°ï¼Œå¦ä¸€ä¸ªé’ˆå¯¹æœ‰ç¼ºé™·çš„è¾…åŠ©å®šä¹‰ã€‚ä¸€ä¸ªä¿®å¤åº”è¯¥å¯ä»¥æ¶ˆé™¤ä¸¤ä¸ªé”™è¯¯ã€‚ç¡®ä¿è¿è¡Œæµ‹è¯•è¦†ç›–äº†å‡½æ•°çš„æ‰€æœ‰éƒ¨åˆ†ã€‚
- en: Finally, if you are stuck in step 5, remember the table-based approach to guessing
    the combination function. In the case of intertwined data, you may need not only
    a table per case but also a table per case and per function to work out the combination.
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œå¦‚æœä½ åœ¨æ­¥éª¤5ä¸­é‡åˆ°äº†å›°éš¾ï¼Œè®°å¾—ä½¿ç”¨åŸºäºè¡¨çš„çŒœæµ‹ç»„åˆå‡½æ•°çš„æ–¹æ³•ã€‚åœ¨å¤„ç†äº¤ç»‡æ•°æ®çš„æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½ä¸ä»…éœ€è¦ä¸€ä¸ªé’ˆå¯¹æ¯ä¸ªæ¡ˆä¾‹çš„è¡¨ï¼Œè¿˜éœ€è¦é’ˆå¯¹æ¯ä¸ªæ¡ˆä¾‹å’Œæ¯ä¸ªå‡½æ•°çš„è¡¨æ¥è®¡ç®—å‡ºç»„åˆã€‚
- en: '19.5Project: BSTs[ğŸ”—](#(part._sec~3aproj-bst) "Link to here")'
  id: totrans-493
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.5é¡¹ç›®ï¼šBSTs[ğŸ”—](#(part._sec~3aproj-bst) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Programmers often work with tree representations of data to improve the performance
    of their functions. A particularly well-known form of tree is the binary search
    tree because it is a good way to store and retrieve information quickly.
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: ç¨‹åºå‘˜é€šå¸¸ä½¿ç”¨æ•°æ®æ ‘çš„è¡¨ç¤ºæ¥æé«˜ä»–ä»¬å‡½æ•°çš„æ€§èƒ½ã€‚ç‰¹åˆ«è‘—åçš„ä¸€ç§æ ‘æ˜¯äºŒå‰æœç´¢æ ‘ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§å¿«é€Ÿå­˜å‚¨å’Œæ£€ç´¢ä¿¡æ¯çš„å¥½æ–¹æ³•ã€‚
- en: 'To be concrete, letâ€™s discuss binary trees that manage information about people.
    Instead of the child structures in family trees, a binary tree contains nodes:'
  id: totrans-495
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å…·ä½“è¯´æ˜ï¼Œè®©æˆ‘ä»¬è®¨è®ºç®¡ç†äººå‘˜ä¿¡æ¯çš„äºŒå‰æ ‘ã€‚ä¸å®¶è°±ä¸­çš„å­ç»“æ„ä¸åŒï¼ŒäºŒå‰æ ‘åŒ…å«èŠ‚ç‚¹ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â no-infoÂ [])
    |'
  id: totrans-496
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â no-infoÂ [])
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â NONEÂ (make-no-info))
    |'
  id: totrans-497
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â NONEÂ (make-no-info))
    |'
- en: '| Â  |'
  id: totrans-498
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â nodeÂ [ssnÂ nameÂ [left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)Â [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
  id: totrans-499
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â nodeÂ [ssnÂ nameÂ [left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)Â [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
- en: '| ;Â A BT (short for BinaryTree) is one of: |'
  id: totrans-500
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A BT (short for BinaryTree) is one of: |'
- en: '| ;Â â€“  NONE |'
  id: totrans-501
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  NONE |'
- en: '| ;Â â€“  (make-node  [Number](part_one.html#%28tech._number%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [BT](#%28tech._bt%29)  [BT](#%28tech._bt%29))
    |'
  id: totrans-502
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  (make-node  [Number](part_one.html#%28tech._number%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [BT](#%28tech._bt%29)  [BT](#%28tech._bt%29))
    |'
- en: 'The corresponding data definition is like the one for family trees with NONE
    indicating a lack of information and each node recording a social security number,
    a name, and two other binary trees. The latter are like the parents of family
    trees, though the relationship between a node and its [left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    and [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)
    trees is not based on family relationships.Here are two binary trees:'
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸åº”çš„æ•°æ®å®šä¹‰ç±»ä¼¼äºå®¶è°±æ ‘ï¼Œå…¶ä¸­NONEè¡¨ç¤ºä¿¡æ¯ç¼ºå¤±ï¼Œæ¯ä¸ªèŠ‚ç‚¹è®°å½•ä¸€ä¸ªç¤¾ä¼šä¿é™©å·ã€ä¸€ä¸ªå§“åå’Œå¦å¤–ä¸¤ä¸ªäºŒå‰æ ‘ã€‚åè€…ç±»ä¼¼äºå®¶è°±æ ‘çš„çˆ¶æ¯ï¼Œå°½ç®¡èŠ‚ç‚¹ä¸å…¶[å·¦](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)å’Œ[å³](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)æ ‘ä¹‹é—´çš„å…³ç³»ä¸æ˜¯åŸºäºå®¶åº­å…³ç³»ã€‚ä»¥ä¸‹æ˜¯ä¸¤ä¸ªäºŒå‰æ ‘ï¼š
- en: '|'
  id: totrans-504
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-505
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (make-node &#124;'
  id: totrans-506
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (make-node &#124;'
- en: '&#124; Â Â 15 &#124;'
  id: totrans-507
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â 15 &#124;'
- en: '&#124; Â Â ''d &#124;'
  id: totrans-508
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ''d &#124;'
- en: '&#124; Â Â NONE &#124;'
  id: totrans-509
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â NONE &#124;'
- en: '&#124; Â Â (make-node &#124;'
  id: totrans-510
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â (make-node &#124;'
- en: '&#124; Â Â Â Â 24Â ''iÂ NONEÂ NONE)) &#124;'
  id: totrans-511
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â 24Â ''iÂ NONEÂ NONE)) &#124;'
- en: ''
  id: totrans-512
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-513
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-514
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (make-node &#124;'
  id: totrans-515
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (make-node &#124;'
- en: '&#124; Â Â 15 &#124;'
  id: totrans-516
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â 15 &#124;'
- en: '&#124; Â Â ''d &#124;'
  id: totrans-517
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ''d &#124;'
- en: '&#124; Â Â (make-node &#124;'
  id: totrans-518
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (make-node &#124;'
- en: '&#124; Â Â Â Â 87Â ''hÂ NONEÂ NONE) &#124;'
  id: totrans-519
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â 87Â ''hÂ NONEÂ NONE) &#124;'
- en: '&#124; Â Â NONE) &#124;'
  id: totrans-520
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â NONE) &#124;'
- en: ''
  id: totrans-521
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-522
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '[FigureÂ 119](#%28counter._%28figure._fig~3abst%29%29) shows how we should think
    about such trees as drawings. The trees are drawn upside down, with the root at
    the top and the crown of the tree at the bottom. Each circle corresponds to a
    node, labeled with the ssn field of a corresponding node structure. The drawings
    omit NONE.'
  id: totrans-523
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾119](#%28counter._%28figure._fig~3abst%29%29)æ˜¾ç¤ºäº†æˆ‘ä»¬åº”è¯¥å¦‚ä½•å°†æ­¤ç±»æ ‘è§†ä¸ºç»˜å›¾ã€‚è¿™äº›æ ‘æ˜¯å€’ç½®çš„ï¼Œæ ¹åœ¨é¡¶éƒ¨ï¼Œæ ‘çš„é¡¶éƒ¨åœ¨åº•éƒ¨ã€‚æ¯ä¸ªåœ†åœˆå¯¹åº”ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç”¨ç›¸åº”èŠ‚ç‚¹ç»“æ„çš„ssnå­—æ®µæ ‡è®°ã€‚è¿™äº›ç»˜å›¾çœç•¥äº†NONEã€‚'
- en: '| tree A |  | tree B |'
  id: totrans-524
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ ‘A |  | æ ‘B |'
- en: '|  |  |  |'
  id: totrans-525
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  |  |'
- en: '| ![image](../Images/4a6656d66e6ecde910040436499df1cd.png) |  | ![image](../Images/5bf6b2a3ec9a774b865e4865edc764ae.png)
    |'
  id: totrans-526
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/4a6656d66e6ecde910040436499df1cd.png) |  | ![image](../Images/5bf6b2a3ec9a774b865e4865edc764ae.png)
    |'
- en: ''
  id: totrans-527
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 119: A binary search tree and a binary tree'
  id: totrans-528
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾119ï¼šä¸€æ£µäºŒå‰æœç´¢æ ‘å’Œä¸€æ£µäºŒå‰æ ‘
- en: ExerciseÂ 322\. Draw the above two trees in the manner of [figureÂ 119](#%28counter._%28figure._fig~3abst%29%29).
    Then design contains-bt?, which determines whether a given number occurs in some
    given BT.
  id: totrans-529
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 322ã€‚ä»¥[å›¾119](#%28counter._%28figure._fig~3abst%29%29)çš„æ–¹å¼ç»˜åˆ¶ä¸Šè¿°ä¸¤ä¸ªæ ‘ã€‚ç„¶åè®¾è®¡contains-bt?ï¼Œå®ƒç¡®å®šç»™å®šçš„æ•°å­—æ˜¯å¦å‡ºç°åœ¨æŸä¸ªç»™å®šçš„äºŒå‰æ ‘BTä¸­ã€‚
- en: 'ExerciseÂ 323\. Design search-bt. The function consumes a number n and a BT.
    If the tree contains a node structure whose ssn field is n, the function produces
    the value of the [name](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._name%29%29)
    field in that node. Otherwise, the function produces #false.'
  id: totrans-530
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 323ã€‚è®¾è®¡search-btå‡½æ•°ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªæ•°å­—nå’Œä¸€ä¸ªäºŒå‰æ ‘BTã€‚å¦‚æœæ ‘ä¸­åŒ…å«ä¸€ä¸ªssnå­—æ®µä¸ºnçš„èŠ‚ç‚¹ç»“æ„ï¼Œåˆ™è¯¥å‡½æ•°äº§ç”Ÿè¯¥èŠ‚ç‚¹[name](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._name%29%29)å­—æ®µçš„å€¼ã€‚å¦åˆ™ï¼Œè¯¥å‡½æ•°äº§ç”Ÿ#falseã€‚
- en: Hint Consider using contains-bt? to check the entire tree first or [boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)
    to check the result of the natural recursion at each stage.
  id: totrans-531
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼šè€ƒè™‘é¦–å…ˆä½¿ç”¨contains-bt?æ£€æŸ¥æ•´ä¸ªæ ‘ï¼Œæˆ–è€…ä½¿ç”¨[boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)æ£€æŸ¥æ¯ä¸ªé˜¶æ®µçš„è‡ªç„¶é€’å½’çš„ç»“æœã€‚
- en: 'If we read the numbers in the two trees in [figureÂ 119](#%28counter._%28figure._fig~3abst%29%29)
    from left to right, we obtain two different sequences:'
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬ä»å·¦åˆ°å³è¯»å–[å›¾119](#%28counter._%28figure._fig~3abst%29%29)ä¸­ä¸¤ä¸ªæ ‘ä¸­çš„æ•°å­—ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸¤ä¸ªä¸åŒçš„åºåˆ—ï¼š
- en: '| tree A |  | 10 |  | 15 |  | 24 |  | 29 |  | 63 |  | 77 |  | 89 |  | 95 |  |
    99 |'
  id: totrans-533
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ ‘A |  | 10 |  | 15 |  | 24 |  | 29 |  | 63 |  | 77 |  | 89 |  | 95 |  | 99
    |'
- en: '| tree B |  | 87 |  | 15 |  | 24 |  | 29 |  | 63 |  | 33 |  | 89 |  | 95 |  |
    99 |'
  id: totrans-534
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ ‘B |  | 87 |  | 15 |  | 24 |  | 29 |  | 63 |  | 33 |  | 89 |  | 95 |  | 99
    |'
- en: 'The sequence for tree A is sorted in ascending order the one for B is not.
    A binary tree of the first kind is a binary search tree. Every binary search tree
    is a binary tree, but not every binary tree is a binary search tree. More concretely,
    we formulate a conditionâ€”<wbr>or data invariantâ€”<wbr>that distinguishes a binary
    search tree from a binary tree:'
  id: totrans-535
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‘Açš„åºåˆ—æ˜¯æŒ‰å‡åºæ’åºçš„ï¼Œè€Œæ ‘Bçš„ä¸æ˜¯ã€‚ç¬¬ä¸€ç±»äºŒå‰æ ‘æ˜¯äºŒå‰æœç´¢æ ‘ã€‚æ¯ä¸ªäºŒå‰æœç´¢æ ‘éƒ½æ˜¯äºŒå‰æ ‘ï¼Œä½†å¹¶éæ¯ä¸ªäºŒå‰æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬åˆ¶å®šäº†ä¸€ä¸ªæ¡ä»¶â€”â€”æˆ–æ•°æ®ä¸å˜é‡â€”â€”æ¥åŒºåˆ†äºŒå‰æœç´¢æ ‘å’ŒäºŒå‰æ ‘ï¼š
- en: The BST Invariant
  id: totrans-536
  prefs: []
  type: TYPE_NORMAL
  zh: BSTä¸å˜é‡
- en: 'A BST (short for binary search tree) is a [BT](#%28tech._bt%29) according to
    the following conditions:'
  id: totrans-537
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: BSTï¼ˆäºŒå‰æœç´¢æ ‘çš„ç¼©å†™ï¼‰æ˜¯æ ¹æ®ä»¥ä¸‹æ¡ä»¶å®šä¹‰çš„[BT](#%28tech._bt%29)ï¼š
- en: ''
  id: totrans-538
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: NONE is always a [BST](#%28tech._bst%29).
  id: totrans-539
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: NONEæ€»æ˜¯[BST](#%28tech._bst%29)ã€‚
- en: ''
  id: totrans-540
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-541
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: (make-node  ssn0  name0  L  R) is a [BST](#%28tech._bst%29) if
  id: totrans-542
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: (make-node  ssn0  name0  L  R) æ˜¯ä¸€ä¸ª[BST](#%28tech._bst%29)å½“ä¸”ä»…å½“
- en: ''
  id: totrans-543
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: L is a [BST](#%28tech._bst%29),
  id: totrans-544
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Læ˜¯ä¸€ä¸ª[BST](#%28tech._bst%29)ï¼Œ
- en: ''
  id: totrans-545
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-546
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: R is a [BST](#%28tech._bst%29),
  id: totrans-547
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ræ˜¯ä¸€ä¸ª[BST](#%28tech._bst%29)ï¼Œ
- en: ''
  id: totrans-548
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-549
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: all ssn fields in L are smaller than ssn0,
  id: totrans-550
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Lä¸­çš„æ‰€æœ‰ssnå­—æ®µéƒ½å°äºssn0ï¼Œ
- en: ''
  id: totrans-551
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-552
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: all ssn fields in R are larger than ssn0.
  id: totrans-553
  prefs:
  - PREF_BQ
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Rä¸­çš„æ‰€æœ‰ssnå­—æ®µéƒ½å¤§äºssn0ã€‚
- en: In other words, to check whether a [BT](#%28tech._bt%29) also belongs to [BST](#%28tech._bst%29),
    we must inspect all numbers in all subtrees and ensure that they are smaller or
    larger than some given number. This places an additional burden on the construction
    of data, but, as the following exercises show, it is well worth it.
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: æ¢å¥è¯è¯´ï¼Œä¸ºäº†æ£€æŸ¥ä¸€ä¸ª[BT](#%28tech._bt%29)æ˜¯å¦ä¹Ÿå±äº[BST](#%28tech._bst%29)ï¼Œæˆ‘ä»¬å¿…é¡»æ£€æŸ¥æ‰€æœ‰å­æ ‘ä¸­çš„æ‰€æœ‰æ•°å­—ï¼Œå¹¶ç¡®ä¿å®ƒä»¬æ¯”æŸä¸ªç»™å®šçš„æ•°å­—å°æˆ–å¤§ã€‚è¿™ç»™æ•°æ®æ„å»ºå¢åŠ äº†é¢å¤–çš„è´Ÿæ‹…ï¼Œä½†æ­£å¦‚ä»¥ä¸‹ç»ƒä¹ æ‰€ç¤ºï¼Œè¿™æ˜¯å€¼å¾—çš„ã€‚
- en: ExerciseÂ 324\. Design the function inorder. It consumes a binary tree and produces
    the sequence of all the ssn numbers in the tree as they show up from left to right
    when looking at a tree drawing.
  id: totrans-555
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 324ã€‚è®¾è®¡inorderå‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªäºŒå‰æ ‘ï¼Œå¹¶äº§ç”Ÿä»å·¦åˆ°å³æŸ¥çœ‹æ ‘å›¾æ—¶å‡ºç°çš„æ‰€æœ‰ssnæ•°å­—çš„åºåˆ—ã€‚
- en: 'Hint Use [append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29),
    which concatenates lists like thus:'
  id: totrans-556
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼šä½¿ç”¨[append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)ï¼Œå®ƒåƒè¿™æ ·è¿æ¥åˆ—è¡¨ï¼š
- en: '| ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 1Â 2Â 3)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 4)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 5Â 6Â 7))
    |'
  id: totrans-557
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 1Â 2Â 3)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 4)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 5Â 6Â 7))
    |'
- en: '| == |'
  id: totrans-558
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 1Â 2Â 3Â 4Â 5Â 6Â 7)
    |'
  id: totrans-559
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 1Â 2Â 3Â 4Â 5Â 6Â 7)
    |'
- en: What does inorder produce for a binary search tree?
  id: totrans-560
  prefs: []
  type: TYPE_NORMAL
  zh: äºŒå‰æœç´¢æ ‘çš„ä¸­åºä¼šäº§ç”Ÿä»€ä¹ˆï¼Ÿ
- en: Looking for a node with a given ssn in a BST may exploit the [BST](#%28tech._bst%29)
    invariant. To find out whether a BT contains a node with a specific ssn, a function
    may have to look at every node of the tree. In contrast, to find out whether a
    binary search tree contains the same ssn, a function may eliminate one of two
    subtrees for every node it inspects.
  id: totrans-561
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨BSTä¸­å¯»æ‰¾å…·æœ‰ç»™å®šssnçš„èŠ‚ç‚¹å¯èƒ½åˆ©ç”¨äº†[BST](#%28tech._bst%29)çš„ä¸å˜é‡ã€‚ä¸ºäº†æ‰¾å‡ºBTæ˜¯å¦åŒ…å«å…·æœ‰ç‰¹å®šssnçš„èŠ‚ç‚¹ï¼Œä¸€ä¸ªå‡½æ•°å¯èƒ½å¿…é¡»æŸ¥çœ‹æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸ºäº†æ‰¾å‡ºäºŒå‰æœç´¢æ ‘æ˜¯å¦åŒ…å«ç›¸åŒçš„ssnï¼Œä¸€ä¸ªå‡½æ•°å¯èƒ½å¯ä»¥æ¶ˆé™¤æ¯ä¸ªèŠ‚ç‚¹æ£€æŸ¥çš„ä¸¤ä¸ªå­æ ‘ä¸­çš„ä¸€ä¸ªã€‚
- en: 'Letâ€™s illustrate the idea with this sample BST:'
  id: totrans-562
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ç”¨è¿™ä¸ªæ ·æœ¬BSTæ¥è¯´æ˜è¿™ä¸ªæƒ³æ³•ï¼š
- en: (make-nodeÂ 66Â 'aÂ LÂ R)
  id: totrans-563
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (make-nodeÂ 66Â 'aÂ LÂ R)
- en: If we are looking for 66, we have found the node we are looking for. Now, if
    we are looking for a smaller number, say 63, we can focus the search on L because
    all nodes with ssn fields smaller than 66 are in L. Similarly, if we were to look
    for 99, we would ignore L and focus on R because all nodes with ssns larger than
    66 are in R.
  id: totrans-564
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬åœ¨å¯»æ‰¾ 66ï¼Œæˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†æˆ‘ä»¬æ­£åœ¨å¯»æ‰¾çš„èŠ‚ç‚¹ã€‚ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªæ›´å°çš„æ•°å­—ï¼Œæ¯”å¦‚è¯´ 63ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœç´¢é›†ä¸­åœ¨ L ä¸Šï¼Œå› ä¸ºæ‰€æœ‰å…·æœ‰å°äº
    66 çš„ ssn å­—æ®µçš„èŠ‚ç‚¹éƒ½åœ¨ L ä¸­ã€‚åŒæ ·ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å¯»æ‰¾ 99ï¼Œæˆ‘ä»¬ä¼šå¿½ç•¥ L å¹¶é›†ä¸­åœ¨ R ä¸Šï¼Œå› ä¸ºæ‰€æœ‰å…·æœ‰å¤§äº 66 çš„ ssns çš„èŠ‚ç‚¹éƒ½åœ¨
    R ä¸­ã€‚
- en: ExerciseÂ 325\. Design search-bst. The function consumes a number n and a BST.
    If the tree contains a node whose ssn field is n, the function produces the value
    of the [name](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._name%29%29)
    field in that node. Otherwise, the function produces NONE. The function organization
    must exploit the BST invariant so that the function performs as few comparisons
    as necessary.
  id: totrans-565
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  325ã€‚è®¾è®¡ search-bstã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªæ•°å­— n å’Œä¸€ä¸ª BSTã€‚å¦‚æœæ ‘åŒ…å«ä¸€ä¸ªå…·æœ‰ n å­—æ®µçš„èŠ‚ç‚¹ï¼Œåˆ™è¯¥å‡½æ•°äº§ç”Ÿè¯¥èŠ‚ç‚¹ä¸­ [name](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._name%29%29)
    å­—æ®µçš„å€¼ã€‚å¦åˆ™ï¼Œè¯¥å‡½æ•°äº§ç”Ÿ NONEã€‚å‡½æ•°ç»„ç»‡å¿…é¡»åˆ©ç”¨ BST ä¸å˜å¼ï¼Œä»¥ä¾¿è¯¥å‡½æ•°æ‰§è¡Œå°½å¯èƒ½å°‘çš„æ¯”è¾ƒã€‚
- en: See [exerciseÂ 189](part_two.html#%28counter._%28exercise._ex~3asort2%29%29)
    for searching in sorted lists. Compare!
  id: totrans-566
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹ç¬¬ [189](part_two.html#%28counter._%28exercise._ex~3asort2%29%29) é¢˜äº†è§£åœ¨æœ‰åºåˆ—è¡¨ä¸­è¿›è¡Œæœç´¢ã€‚æ¯”è¾ƒä¸€ä¸‹ï¼
- en: Building a binary tree is easy; building a binary search tree is complicated.
    Given any two [BT](#%28tech._bt%29)s, a number, and a name, we simply apply make-node
    to these values in the correct order, and voilÃ , we get a new [BT](#%28tech._bt%29).
    This same procedure fails for [BST](#%28tech._bst%29)s because the result would
    typically not be a BST. For example, if one [BST](#%28tech._bst%29) contains nodes
    with ssn fields 3 and 5 in the correct order, and the other one contains ssn fields
    2 and 6, simply combining the two trees with another social security number and
    a name does not produce a [BST](#%28tech._bst%29).
  id: totrans-567
  prefs: []
  type: TYPE_NORMAL
  zh: æ„å»ºäºŒå‰æ ‘å¾ˆç®€å•ï¼›æ„å»ºäºŒå‰æœç´¢æ ‘åˆ™æ¯”è¾ƒå¤æ‚ã€‚ç»™å®šä»»ä½•ä¸¤ä¸ª [BT](#%28tech._bt%29)ï¼Œä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªåç§°ï¼Œæˆ‘ä»¬åªéœ€æŒ‰ç…§æ­£ç¡®çš„é¡ºåºå°†è¿™äº›å€¼åº”ç”¨åˆ°
    make-node ä¸Šï¼Œç„¶å voilÃ ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„ [BT](#%28tech._bt%29)ã€‚åŒæ ·çš„è¿‡ç¨‹å¯¹äº [BST](#%28tech._bst%29)
    æ˜¯å¤±è´¥çš„ï¼Œå› ä¸ºç»“æœé€šå¸¸ä¸ä¼šæ˜¯ä¸€ä¸ª BSTã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ª [BST](#%28tech._bst%29) åŒ…å«å…·æœ‰æ­£ç¡®é¡ºåºçš„ ssn å­—æ®µ 3 å’Œ 5 çš„èŠ‚ç‚¹ï¼Œè€Œå¦ä¸€ä¸ªåŒ…å«
    ssn å­—æ®µ 2 å’Œ 6ï¼Œä»…ä»…é€šè¿‡å¦ä¸€ä¸ªç¤¾ä¼šä¿é™©å·ç å’Œåç§°å°†ä¸¤ä¸ªæ ‘åˆå¹¶å¹¶ä¸ä¼šäº§ç”Ÿä¸€ä¸ª [BST](#%28tech._bst%29)ã€‚
- en: The remaining two exercises explain how to build a [BST](#%28tech._bst%29) from
    a list of numbers and names. Specifically, the first exercise calls for a function
    that inserts a given ssn0 and name0 into a [BST](#%28tech._bst%29); that is, it
    produces a [BST](#%28tech._bst%29) like the one it is given with one more node
    inserted containing ssn0, name0, and NONE subtrees. The second exercise then requests
    a function that can deal with a complete list of numbers and names.
  id: totrans-568
  prefs: []
  type: TYPE_NORMAL
  zh: å‰©ä¸‹çš„ä¸¤ä¸ªç»ƒä¹ è§£é‡Šäº†å¦‚ä½•ä»ä¸€ä¸ªæ•°å­—å’Œåç§°åˆ—è¡¨ä¸­æ„å»ºä¸€ä¸ª [BST](#%28tech._bst%29)ã€‚å…·ä½“æ¥è¯´ï¼Œç¬¬ä¸€ä¸ªç»ƒä¹ è¦æ±‚ä¸€ä¸ªå‡½æ•°å°†ç»™å®šçš„ ssn0
    å’Œ name0 æ’å…¥åˆ°ä¸€ä¸ª [BST](#%28tech._bst%29) ä¸­ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒäº§ç”Ÿä¸€ä¸ª [BST](#%28tech._bst%29)ï¼Œå°±åƒå®ƒç»™å‡ºçš„é‚£æ ·ï¼Œæ’å…¥äº†ä¸€ä¸ªåŒ…å«
    ssn0ã€name0 å’Œ NONE å­æ ‘çš„èŠ‚ç‚¹ã€‚ç¬¬äºŒä¸ªç»ƒä¹ éšåè¦æ±‚ä¸€ä¸ªå‡½æ•°å¯ä»¥å¤„ç†ä¸€ä¸ªå®Œæ•´çš„æ•°å­—å’Œåç§°åˆ—è¡¨ã€‚
- en: ExerciseÂ 326\. Design the function create-bst. It consumes a BST B, a number
    N, and a symbol S. It produces a BST that is just like B and that in place of
    one NONE subtree contains the node structure
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  326ã€‚è®¾è®¡ create-bst å‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ª BST Bã€ä¸€ä¸ªæ•°å­— N å’Œä¸€ä¸ªç¬¦å· Sã€‚å®ƒäº§ç”Ÿä¸€ä¸ªä¸ B å®Œå…¨ç›¸åŒçš„ BSTï¼Œå¹¶ä¸”ç”¨ä¸€ä¸ªèŠ‚ç‚¹ç»“æ„æ›¿æ¢ä¸€ä¸ª
    NONE å­æ ‘
- en: (make-nodeÂ NÂ SÂ NONEÂ NONE)
  id: totrans-570
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (make-nodeÂ NÂ SÂ NONEÂ NONE)
- en: 'Once the design is completed, use the function on tree A from [figureÂ 119](#%28counter._%28figure._fig~3abst%29%29).ExerciseÂ 327\.
    Design the function create-bst-from-list. It consumes a list of numbers and names
    and produces a [BST](#%28tech._bst%29) by repeatedly applying create-bst. Here
    is the signature:'
  id: totrans-571
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦è®¾è®¡å®Œæˆï¼Œä½¿ç”¨è¯¥å‡½æ•°å¯¹å›¾ [119](#%28counter._%28figure._fig~3abst%29%29) ä¸­çš„æ ‘ A è¿›è¡Œæ“ä½œã€‚ç»ƒä¹ 
    327ã€‚è®¾è®¡ create-bst-from-list å‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªæ•°å­—å’Œåç§°åˆ—è¡¨ï¼Œå¹¶é€šè¿‡é‡å¤åº”ç”¨ create-bst æ„é€ ä¸€ä¸ª [BST](#%28tech._bst%29)ã€‚ä»¥ä¸‹æ˜¯å®ƒçš„ç­¾åï¼š
- en: ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List](part_three.html#%28tech._sim-dd._list%29)
    Number Symbol]] -> [BST](#%28tech._bst%29)
  id: totrans-572
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List](part_three.html#%28tech._sim-dd._list%29)
    Number Symbol]] -> [BST](#%28tech._bst%29)
- en: 'Use the complete function to create a [BST](#%28tech._bst%29) from this sample
    input:'
  id: totrans-573
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨å®Œæ•´çš„å‡½æ•°ä»è¿™ä¸ªæ ·æœ¬è¾“å…¥ä¸­åˆ›å»ºä¸€ä¸ª [BST](#%28tech._bst%29)ï¼š
- en: '| ''((99Â o) |'
  id: totrans-574
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''((99Â o) |'
- en: '| Â Â (77Â l) |'
  id: totrans-575
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (77Â l) |'
- en: '| Â Â (24Â i) |'
  id: totrans-576
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (24Â i) |'
- en: '| Â Â (10Â h) |'
  id: totrans-577
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (10Â h) |'
- en: '| Â Â (95Â g) |'
  id: totrans-578
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (95Â g) |'
- en: '| Â Â (15Â d) |'
  id: totrans-579
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (15Â d) |'
- en: '| Â Â (89Â c) |'
  id: totrans-580
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (89Â c) |'
- en: '| Â Â (29Â b) |'
  id: totrans-581
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (29Â b) |'
- en: '| Â Â (63Â a)) |'
  id: totrans-582
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (63Â a)) |'
- en: The result is tree A in [figureÂ 119](#%28counter._%28figure._fig~3abst%29%29),
    if you follow the structural design recipe. If you use an existing abstraction,
    you may still get this tree but you may also get an â€œinvertedâ€ one. Why?
  id: totrans-583
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœéµå¾ªç»“æ„è®¾è®¡é£Ÿè°±ï¼Œç»“æœæ˜¯å›¾ 119 ä¸­çš„æ ‘ Aã€‚å¦‚æœä½ ä½¿ç”¨ç°æœ‰çš„æŠ½è±¡ï¼Œä½ ä»ç„¶å¯èƒ½å¾—åˆ°è¿™æ£µæ ‘ï¼Œä½†ä½ ä¹Ÿå¯èƒ½å¾—åˆ°ä¸€ä¸ªâ€œå€’ç½®â€çš„æ ‘ã€‚ä¸ºä»€ä¹ˆï¼Ÿ
- en: 19.6Simplifying Functions[ğŸ”—](#(part._sec~3asimplification) "Link to here")
  id: totrans-584
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 19.6 ç®€åŒ–å‡½æ•°[ğŸ”—](#(part._sec~3asimplification) "é“¾æ¥åˆ°æ­¤å¤„")
- en: '[ExerciseÂ 317](#%28counter._%28exercise._ex~3acount-local%29%29) shows how
    to use [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    to organize a function that deals with an intertwined form of data. This organization
    also helps simplify functions once we know that the data definition is final.
    To demonstrate this point, we explain how to simplify the solution of [exerciseÂ 319](#%28counter._%28exercise._ex~3asubstitute%29%29).'
  id: totrans-585
  prefs: []
  type: TYPE_NORMAL
  zh: '[ç»ƒä¹  317](#%28counter._%28exercise._ex~3acount-local%29%29) å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ [å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    æ¥ç»„ç»‡å¤„ç†äº¤ç»‡æ•°æ®å½¢å¼çš„å‡½æ•°ã€‚è¿™ç§ç»„ç»‡æ–¹å¼ä¹Ÿæœ‰åŠ©äºåœ¨æ•°æ®å®šä¹‰æœ€ç»ˆç¡®å®šåç®€åŒ–å‡½æ•°ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è§£é‡Šäº†å¦‚ä½•ç®€åŒ– [ç»ƒä¹  319](#%28counter._%28exercise._ex~3asubstitute%29%29)
    çš„è§£å†³æ–¹æ¡ˆã€‚'
- en: '| ;Â [S-expr](#%28tech._s._expr%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [Atom](#%28tech._atom%29)
    -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-586
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: ; [S-è¡¨è¾¾å¼](#%28tech._s._expr%29)  [ç¬¦å·](i2-3.html#%28tech._symbol%29)  [åŸå­](#%28tech._atom%29)
    -> [S-è¡¨è¾¾å¼](#%28tech._s._expr%29) |
- en: '| ;Â replaces all occurrences of old in sexp with new |'
  id: totrans-587
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: ; æ›¿æ¢ sexp ä¸­æ‰€æœ‰ old çš„å‡ºç°ä¸º new |
- en: '| Â  |'
  id: totrans-588
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (substituteÂ ''(((world)Â bye)Â bye)Â ''byeÂ ''42)
    |'
  id: totrans-589
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    (æ›¿æ¢ ''(((world) bye) bye) ''bye ''42) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''(((world)Â 42)Â 42)) |'
  id: totrans-590
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    ''(((world) 42) 42)) |'
- en: '| Â  |'
  id: totrans-591
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (substituteÂ sexpÂ oldÂ new)
    |'
  id: totrans-592
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (æ›¿æ¢ sexp old new)))'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [S-expr](#%28tech._s._expr%29)
    -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-593
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (; [S-è¡¨è¾¾å¼](#%28tech._s._expr%29) -> [S-è¡¨è¾¾å¼](#%28tech._s._expr%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-sexpÂ sexp)
    |'
  id: totrans-594
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (for-sexp sexp)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-595
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [(atom?Â sexp)Â (for-atomÂ sexp)] |'
  id: totrans-596
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([å¦‚æœ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    ([åŸå­?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._atom~3f%29%29)
    sexp) ([for-åŸå­](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._for-atom%29%29)
    sexp))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (for-slÂ sexp)]))
    |'
  id: totrans-597
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    (for-sl sexp))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [SL](#%28tech._sl%29) -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-598
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: ; [SL](#%28tech._sl%29) -> [S-è¡¨è¾¾å¼](#%28tech._s._expr%29) |
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-slÂ sl)
    |'
  id: totrans-599
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (for-sl sl)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-600
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â sl)Â ''()]
    |'
  id: totrans-601
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([å¦‚æœ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    sl) ''()] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â (for-sexpÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sl))
    |'
  id: totrans-602
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â (for-sexpÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sl))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (for-slÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â sl)))]))
    |'
  id: totrans-603
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([for-sl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â sl)))]))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Atom](#%28tech._atom%29) -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-604
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â ; [åŸå­](#%28tech._atom%29) -> [S-è¡¨è¾¾å¼](#%28tech._s._expr%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-atomÂ at)
    |'
  id: totrans-605
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-atomÂ at)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-606
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â at)Â at]
    |'
  id: totrans-607
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([æ•°å­—?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â at)Â at]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â at)Â at]
    |'
  id: totrans-608
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([å­—ç¬¦ä¸²?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â at)Â at]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)Â atÂ old)Â newÂ at)])))
    |'
  id: totrans-609
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([ç¬¦å·?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([ç­‰äº?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)Â atÂ old)Â newÂ at)])))
    |'
- en: '| Â Â Â Â (for-sexpÂ sexp))) |'
  id: totrans-610
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â (for-sexpÂ sexp))) |'
- en: ''
  id: totrans-611
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 120: A program to be simplified'
  id: totrans-612
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾120ï¼šä¸€ä¸ªå¾…ç®€åŒ–çš„ç¨‹åº
- en: '[FigureÂ 120](#%28counter._%28figure._fig~3asimplifying1%29%29) displays a complete
    definition of the substitute function. The definition uses [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    and three auxiliary functions as suggested by the data definition. The figure
    includes a test case so that you can retest the function after each edit suggested
    below. Stop! Develop additional test cases; one is almost never enough.'
  id: totrans-613
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾120](#%28counter._%28figure._fig~3asimplifying1%29%29) å±•ç¤ºäº†æ›¿æ¢å‡½æ•°çš„å®Œæ•´å®šä¹‰ã€‚è¯¥å®šä¹‰ä½¿ç”¨äº†[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)å’Œä¸‰ä¸ªè¾…åŠ©å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ç”±æ•°æ®å®šä¹‰å»ºè®®ä½¿ç”¨ã€‚å›¾ä¸­åŒ…å«äº†ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥åœ¨ä»¥ä¸‹å»ºè®®çš„æ¯æ¬¡ç¼–è¾‘åé‡æ–°æµ‹è¯•è¯¥å‡½æ•°ã€‚åœæ­¢ï¼å¼€å‘é¢å¤–çš„æµ‹è¯•ç”¨ä¾‹ï¼›å‡ ä¹æ°¸è¿œä¸å¤Ÿä¸€ä¸ªã€‚'
- en: ExerciseÂ 328\. Copy and paste [figureÂ 120](#%28counter._%28figure._fig~3asimplifying1%29%29)
    into DrRacket; include your test suite. Validate the test suite. As you read along
    the remainder of this section, perform the edits and rerun the test suites to
    confirm the validity of our arguments.
  id: totrans-614
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 328ã€‚å°†[å›¾120](#%28counter._%28figure._fig~3asimplifying1%29%29)å¤åˆ¶å¹¶ç²˜è´´åˆ°DrRacketä¸­ï¼›åŒ…æ‹¬æ‚¨çš„æµ‹è¯•å¥—ä»¶ã€‚éªŒè¯æµ‹è¯•å¥—ä»¶ã€‚åœ¨é˜…è¯»æœ¬èŠ‚å‰©ä½™éƒ¨åˆ†æ—¶ï¼Œæ‰§è¡Œç¼–è¾‘å¹¶é‡æ–°è¿è¡Œæµ‹è¯•å¥—ä»¶ï¼Œä»¥ç¡®è®¤æˆ‘ä»¬è®ºç‚¹çš„æœ‰æ•ˆæ€§ã€‚
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (substituteÂ sexpÂ oldÂ new)
    |'
  id: totrans-615
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (substituteÂ sexpÂ oldÂ new)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [S-expr](#%28tech._s._expr%29)
    -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-616
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [S-è¡¨è¾¾å¼](#%28tech._s._expr%29)
    -> [S-è¡¨è¾¾å¼](#%28tech._s._expr%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-sexpÂ sexp)
    |'
  id: totrans-617
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-sexpÂ sexp)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-618
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [(atom?Â sexp)Â (for-atomÂ sexp)] |'
  id: totrans-619
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [(atom?Â sexp)Â (for-atomÂ sexp)] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (for-slÂ sexp)]))
    |'
  id: totrans-620
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (for-slÂ sexp)]))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [SL](#%28tech._sl%29) -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-621
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [SL](#%28tech._sl%29) -> [S-è¡¨è¾¾å¼](#%28tech._s._expr%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-slÂ sl)
    |'
  id: totrans-622
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-slÂ sl)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â for-sexpÂ sl))
    |'
  id: totrans-623
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â for-sexpÂ sl))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Atom](#%28tech._atom%29) -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-624
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [åŸå­](#%28tech._atom%29) -> [S-è¡¨è¾¾å¼](#%28tech._s._expr%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-atomÂ at)
    |'
  id: totrans-625
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-atomÂ at)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-626
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â at)Â at]
    |'
  id: totrans-627
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [([number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â at)Â at]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â at)Â at]
    |'
  id: totrans-628
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â at)Â at]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)Â atÂ old)Â newÂ at)])))
    |'
  id: totrans-629
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â at)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)Â atÂ old)Â newÂ at)])))
    |'
- en: '| Â Â Â Â (for-sexpÂ sexp))) |'
  id: totrans-630
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (for-sexpÂ sexp))) |'
- en: ''
  id: totrans-631
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 121: Program simplification, step 1'
  id: totrans-632
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 121ï¼šç¨‹åºç®€åŒ–ï¼Œæ­¥éª¤ 1
- en: Since we know that [SL](#%28tech._sl%29) describes lists of [S-expr](#%28tech._s._expr%29),
    we can use [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    to simplify for-sl. See [figureÂ 121](#%28counter._%28figure._fig~3asimplifying2%29%29)
    for the result. While the original program says that for-sexp is applied to every
    item on sl, its revised definition expresses the same idea more succinctly with
    [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29).
  id: totrans-633
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘ä»¬çŸ¥é“ [SL](#%28tech._sl%29) æè¿°äº† [S-expr](#%28tech._s._expr%29) çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    æ¥ç®€åŒ– for-slã€‚è§ [å›¾Â 121](#%28counter._%28figure._fig~3asimplifying2%29%29) ä»¥æŸ¥çœ‹ç»“æœã€‚è™½ç„¶åŸå§‹ç¨‹åºè¡¨ç¤º
    for-sexp åº”ç”¨äº sl ä¸Šçš„æ¯ä¸ªé¡¹ç›®ï¼Œä½†å…¶ä¿®è®¢åçš„å®šä¹‰ä½¿ç”¨ [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    æ›´ç®€æ´åœ°è¡¨è¾¾äº†ç›¸åŒçš„æ¦‚å¿µã€‚
- en: For the second simplification step, we need to remind you that [equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)
    compares two arbitrary values. With this in mind, the third [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    function becomes a one-liner. [FigureÂ 122](#%28counter._%28figure._fig~3asimplifying3%29%29)
    displays this second simplification.
  id: totrans-634
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºç¬¬äºŒä¸ªç®€åŒ–æ­¥éª¤ï¼Œæˆ‘ä»¬éœ€è¦æé†’æ‚¨ï¼Œ[equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)
    æ¯”è¾ƒä»»æ„ä¸¤ä¸ªå€¼ã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œç¬¬ä¸‰ä¸ª [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    å‡½æ•°å°±å˜æˆäº†ä¸€è¡Œä»£ç ã€‚[å›¾Â 122](#%28counter._%28figure._fig~3asimplifying3%29%29) å±•ç¤ºäº†è¿™ä¸€ç¬¬äºŒä¸ªç®€åŒ–è¿‡ç¨‹ã€‚
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (substituteÂ sexpÂ oldÂ new)
    |'
  id: totrans-635
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (substituteÂ sexpÂ oldÂ new)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [S-expr](#%28tech._s._expr%29)
    -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-636
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [S-expr](#%28tech._s._expr%29)
    -> [S-expr](#%28tech._s._expr%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-sexpÂ sexp)
    |'
  id: totrans-637
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-sexpÂ sexp)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-638
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [(atom?Â sexp)Â (for-atomÂ sexp)] |'
  id: totrans-639
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [(atom?Â sexp)Â (for-atomÂ sexp)] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (for-slÂ sexp)]))
    |'
  id: totrans-640
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (for-slÂ sexp)]))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [SL](#%28tech._sl%29) -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-641
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â [SL](#%28tech._sl%29) -> [S-expr](#%28tech._s._expr%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-slÂ sl)Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â for-sexpÂ sl))
    |'
  id: totrans-642
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-slÂ sl)Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â for-sexpÂ sl))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Atom](#%28tech._atom%29) -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-643
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â ;Â [Atom](#%28tech._atom%29) -> [S-expr](#%28tech._s._expr%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-atomÂ at)
    |'
  id: totrans-644
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-atomÂ at)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)Â atÂ old)Â newÂ at)))
    |'
  id: totrans-645
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)Â atÂ old)Â newÂ at)))
    |'
- en: '| Â Â Â Â (for-sexpÂ sexp))) |'
  id: totrans-646
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (for-sexpÂ sexp))) |'
- en: '| Â  |'
  id: totrans-647
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (substitute.v3Â sexpÂ oldÂ new)
    |'
  id: totrans-648
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (substitute.v3Â sexpÂ oldÂ new)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [S-expr](#%28tech._s._expr%29)
    -> [S-expr](#%28tech._s._expr%29) |'
  id: totrans-649
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (;Â [S-expr](#%28tech._s._expr%29) -> [S-expr](#%28tech._s._expr%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-sexpÂ sexp)
    |'
  id: totrans-650
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (for-sexpÂ sexp)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-651
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [(atom?Â sexp) |'
  id: totrans-652
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [(atom?Â sexp) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)Â sexpÂ old)Â newÂ sexp)]
    |'
  id: totrans-653
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (ifÂ ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)Â sexpÂ old)Â newÂ sexp)]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-654
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â for-sexpÂ sexp)])))
    |'
  id: totrans-655
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â for-sexpÂ sexp)])))
    |'
- en: '| Â Â Â Â (for-sexpÂ sexp))) |'
  id: totrans-656
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (for-sexpÂ sexp))) |'
- en: ''
  id: totrans-657
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 122: Program simplification, steps 2 and 3'
  id: totrans-658
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾122ï¼šç¨‹åºç®€åŒ–ï¼Œæ­¥éª¤2å’Œ3
- en: At this point the last two [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    definitions consist of a single line. Furthermore, neither definition is recursive.
    Hence we can in-line the functions in for-sexp. In-lining means replacing (for-atom  sexp)
    with ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)  ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)  sexp  old)  new  sexp),
    that is, we replace theWhile sexp is also a parameter, this substitution is really
    acceptable because it, too, stands in for an actual value. parameter at with the
    actual argument sexp. Similarly, for (for-sl  sexp) we put in ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)  for-sexp  sexp);
    see the bottom half of [figureÂ 121](#%28counter._%28figure._fig~3asimplifying2%29%29).
    All we are left with now is a function whose definition introduces one [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    function, which is called on the same major argument. If we systematically supplied
    the other two arguments, we would immediately see that the locally defined function
    can be used in lieu of the outer one.
  id: totrans-659
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæœ€åä¸¤ä¸ª[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)å®šä¹‰ç”±ä¸€è¡Œç»„æˆã€‚æ­¤å¤–ï¼Œè¿™ä¸¤ä¸ªå®šä¹‰éƒ½ä¸æ˜¯é€’å½’çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨for-sexpä¸­å†…è”å‡½æ•°ã€‚å†…è”æ„å‘³ç€ç”¨([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)
    ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)
    sexp old) new sexp)æ›¿æ¢(for-atom sexp)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç”¨å®é™…çš„å‚æ•°sexpæ›¿æ¢äº†å‚æ•°withã€‚åŒæ ·åœ°ï¼Œå¯¹äº(for-sl
    sexp)ï¼Œæˆ‘ä»¬æ”¾å…¥([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    for-sexp sexp)ï¼›å‚è§[å›¾121](#%28counter._%28figure._fig~3asimplifying2%29%29)çš„ä¸‹åŠéƒ¨åˆ†ã€‚æˆ‘ä»¬ç°åœ¨å‰©ä¸‹çš„åªæ˜¯ä¸€ä¸ªå®šä¹‰ä¸­å¼•å…¥äº†ä¸€ä¸ª[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)å‡½æ•°çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨ç›¸åŒçš„é‡å¤§å‚æ•°ä¸Šè¢«è°ƒç”¨ã€‚å¦‚æœæˆ‘ä»¬ç³»ç»Ÿåœ°æä¾›å…¶ä»–ä¸¤ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å°±ä¼šç«‹å³çœ‹åˆ°å±€éƒ¨å®šä¹‰çš„å‡½æ•°å¯ä»¥ç”¨ä½œå¤–éƒ¨å‡½æ•°çš„æ›¿ä»£ã€‚
- en: 'Here is the result of translating this last thought into code:'
  id: totrans-660
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯å°†è¿™ä¸ªæœ€åçš„æ€æƒ³ç¿»è¯‘æˆä»£ç çš„ç»“æœï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (substituteÂ sexpÂ oldÂ new)
    |'
  id: totrans-661
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ([substitute](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._substitute%29%29)
    sexp old new) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-662
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(atom?Â sexp)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)Â sexpÂ old)Â newÂ sexp)]
    |'
  id: totrans-663
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(atom? sexp) ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)
    ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)
    sexp old) new sexp)] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-664
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (s)Â (substituteÂ sÂ oldÂ new))Â sexp)]))
    |'
  id: totrans-665
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    (s) (substitute s old new))) sexp)])) |'
- en: Stop! Explain why we had to use [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    for this last simplification.
  id: totrans-666
  prefs: []
  type: TYPE_NORMAL
  zh: åœï¼è§£é‡Šä¸ºä»€ä¹ˆæˆ‘ä»¬å¿…é¡»ä½¿ç”¨[lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)æ¥å®Œæˆæœ€åçš„ç®€åŒ–ã€‚
- en: 20Iterative Refinement[ğŸ”—](#(part._ch~3afiles) "Link to here")
  id: totrans-667
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 20è¿­ä»£ç»†åŒ–[ğŸ”—](#(part._ch~3afiles) "é“¾æ¥è‡³æ­¤")
- en: When you develop real-world programs, you may confront complex forms of information
    and the problem of representing them with data. The best strategy to approach
    this task is to use iterative refinement, a well-known scientific process. A scientistâ€™s
    problem is to represent a part of the real world, using some form of mathematics.
    The result of the effort is called a model. The scientist then tests the model
    in many ways, in particular by predicting the outcome of experiments. If the discrepancies
    between the predictions and the measurements are too large, the model is refined
    with the goal of improving the predictions. This iterative process continues until
    the predictions are sufficiently accurate.
  id: totrans-668
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æ‚¨å¼€å‘ç°å®ä¸–ç•Œçš„ç¨‹åºæ—¶ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°å¤æ‚çš„ä¿¡æ¯å½¢å¼ä»¥åŠç”¨æ•°æ®è¡¨ç¤ºå®ƒä»¬çš„é—®é¢˜ã€‚å¤„ç†è¿™ä¸ªä»»åŠ¡çš„æœ€ä½³ç­–ç•¥æ˜¯ä½¿ç”¨è¿­ä»£ç»†åŒ–ï¼Œè¿™æ˜¯ä¸€ç§ä¼—æ‰€å‘¨çŸ¥çš„ç§‘å­¦è¿‡ç¨‹ã€‚ç§‘å­¦å®¶çš„ä»»åŠ¡æ˜¯ä½¿ç”¨æŸç§å½¢å¼çš„æ•°å­¦æ¥è¡¨ç¤ºç°å®ä¸–ç•Œçš„ä¸€éƒ¨åˆ†ã€‚è¿™ç§åŠªåŠ›çš„æˆæœè¢«ç§°ä¸ºæ¨¡å‹ã€‚ç„¶åç§‘å­¦å®¶é€šè¿‡å¤šç§æ–¹å¼æµ‹è¯•è¿™ä¸ªæ¨¡å‹ï¼Œç‰¹åˆ«æ˜¯é€šè¿‡é¢„æµ‹å®éªŒçš„ç»“æœã€‚å¦‚æœé¢„æµ‹å’Œæµ‹é‡ä¹‹é—´çš„å·®å¼‚å¤ªå¤§ï¼Œæ¨¡å‹å°±ä¼šé€šè¿‡æ”¹è¿›é¢„æµ‹çš„ç›®æ ‡è¿›è¡Œç»†åŒ–ã€‚è¿™ä¸ªè¿­ä»£è¿‡ç¨‹ä¸€ç›´æŒç»­åˆ°é¢„æµ‹è¶³å¤Ÿå‡†ç¡®ä¸ºæ­¢ã€‚
- en: Consider a physicist who wishes to predict a rocketâ€™s flight path. While a â€œrocket
    as a pointâ€ representation is simple, it is also quite inaccurate, failing to
    account for air friction, for example. In response, the physicist may add the
    rocketâ€™s rough contour and introduce the necessary mathematics to represent friction.
    This second model is a refinement of the first model. In general, a scientist
    repeatsâ€”<wbr>or as programmers say, iteratesâ€”<wbr>this process until the model
    predicts the rocketâ€™s flight path with sufficient accuracy.
  id: totrans-669
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘ä¸€ä½å¸Œæœ›é¢„æµ‹ç«ç®­é£è¡Œè½¨è¿¹çš„ç‰©ç†å­¦å®¶ã€‚è™½ç„¶â€œç«ç®­ä½œä¸ºä¸€ä¸ªç‚¹â€çš„è¡¨ç¤ºç®€å•ï¼Œä½†å®ƒä¹Ÿå¾ˆä¸å‡†ç¡®ï¼Œä¾‹å¦‚æ²¡æœ‰è€ƒè™‘åˆ°ç©ºæ°”æ‘©æ“¦ã€‚ä½œä¸ºå›åº”ï¼Œç‰©ç†å­¦å®¶å¯èƒ½ä¼šæ·»åŠ ç«ç®­çš„ç²—ç³™è½®å»“å¹¶å¼•å…¥å¿…è¦çš„æ•°å­¦æ¥è¡¨ç¤ºæ‘©æ“¦ã€‚è¿™ä¸ªç¬¬äºŒä¸ªæ¨¡å‹æ˜¯ç¬¬ä¸€ä¸ªæ¨¡å‹çš„ç»†åŒ–ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç§‘å­¦å®¶ä¼šé‡å¤â€”â€”æˆ–è€…è¯´ç¨‹åºå‘˜ä¼šè¿­ä»£â€”â€”è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ¨¡å‹èƒ½å¤Ÿä»¥è¶³å¤Ÿçš„å‡†ç¡®æ€§é¢„æµ‹ç«ç®­çš„é£è¡Œè½¨è¿¹ã€‚
- en: A programmer trained in a computer science department should proceed like this
    physicist. The key is to find an accurate data representation of the real-world
    information and functions that process them appropriately. Complicated situations
    call for a refinement process to get to a sufficient data representation combined
    with the proper functions. The process starts with the essential pieces of information
    and adds others as needed. Sometimes a programmer must refine a model after the
    program has been deployed because users request additional functionality.
  id: totrans-670
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è®¡ç®—æœºç§‘å­¦ç³»å—è¿‡è®­ç»ƒçš„ç¨‹åºå‘˜åº”è¯¥åƒè¿™ä½ç‰©ç†å­¦å®¶ä¸€æ ·è¡Œäº‹ã€‚å…³é”®æ˜¯æ‰¾åˆ°å‡†ç¡®çš„æ•°æ®è¡¨ç¤ºç°å®ä¸–ç•Œçš„ä¿¡æ¯ä»¥åŠå¤„ç†å®ƒä»¬çš„é€‚å½“å‡½æ•°ã€‚å¤æ‚æƒ…å†µéœ€è¦é€šè¿‡ç»†åŒ–è¿‡ç¨‹æ¥è¾¾åˆ°è¶³å¤Ÿçš„æ•°æ®è¡¨ç¤ºå’Œé€‚å½“çš„å‡½æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹ä»åŸºæœ¬çš„ä¿¡æ¯å—å¼€å§‹ï¼Œæ ¹æ®éœ€è¦æ·»åŠ å…¶ä»–ä¿¡æ¯ã€‚æœ‰æ—¶ç¨‹åºå‘˜å¿…é¡»åœ¨ç¨‹åºéƒ¨ç½²åå¯¹æ¨¡å‹è¿›è¡Œç»†åŒ–ï¼Œå› ä¸ºç”¨æˆ·è¯·æ±‚é¢å¤–çš„åŠŸèƒ½ã€‚
- en: So far we have used iterative refinement for you when it came to complex forms
    of data. This chapter illustrates iterative refinement as a principle of program
    development with an extended example, representing and processing (portions of)
    a computerâ€™s file system. We start with a brief discussion of the file system
    and then iteratively develop three data representations. Along the way, we propose
    some programming exercises so that you see how the design recipe also helps modify
    existing programs.
  id: totrans-671
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åœ¨å¤„ç†å¤æ‚æ•°æ®å½¢å¼æ—¶å·²ç»ä¸ºæ‚¨ä½¿ç”¨äº†è¿­ä»£ç»†åŒ–ã€‚æœ¬ç« é€šè¿‡ä¸€ä¸ªæ‰©å±•çš„ç¤ºä¾‹æ¥è¯´æ˜è¿­ä»£ç»†åŒ–ä½œä¸ºç¨‹åºå¼€å‘çš„åŸåˆ™ï¼Œè¯¥ç¤ºä¾‹ä»£è¡¨å’Œå¤„ç†ï¼ˆéƒ¨åˆ†ï¼‰è®¡ç®—æœºçš„æ–‡ä»¶ç³»ç»Ÿã€‚æˆ‘ä»¬é¦–å…ˆç®€è¦è®¨è®ºæ–‡ä»¶ç³»ç»Ÿï¼Œç„¶åè¿­ä»£åœ°å¼€å‘ä¸‰ç§æ•°æ®è¡¨ç¤ºã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€äº›ç¼–ç¨‹ç»ƒä¹ ï¼Œä»¥ä¾¿æ‚¨çœ‹åˆ°è®¾è®¡é…æ–¹å¦‚ä½•å¸®åŠ©ä¿®æ”¹ç°æœ‰ç¨‹åºã€‚
- en: 20.1Data Analysis[ğŸ”—](#(part._sec~3afiles-what) "Link to here")
  id: totrans-672
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 20.1æ•°æ®åˆ†æ[ğŸ”—](#(part._sec~3afiles-what) "é“¾æ¥è‡³æ­¤")
- en: Before you turn off DrRacket, you want to make sure that all your work is safely
    stashed away somewhere. Otherwise you have to reenter everythingA file is really
    a sequence of bytes, one after another. Try to define the class of files. when
    you fire up DrRacket next. So you ask your computer to save programs and data
    in files. A file is roughly a string.
  id: totrans-673
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å…³é—­DrRacketä¹‹å‰ï¼Œæ‚¨æƒ³è¦ç¡®ä¿æ‰€æœ‰çš„å·¥ä½œéƒ½å®‰å…¨åœ°ä¿å­˜åœ¨æŸä¸ªåœ°æ–¹ã€‚å¦åˆ™ï¼Œæ‚¨åœ¨ä¸‹æ¬¡å¯åŠ¨DrRacketæ—¶å¿…é¡»é‡æ–°è¾“å…¥ä¸€åˆ‡ã€‚æ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ç³»åˆ—å­—èŠ‚ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªã€‚å°è¯•å®šä¹‰æ–‡ä»¶ç±»ã€‚æ‰€ä»¥æ‚¨è¦æ±‚è®¡ç®—æœºå°†ç¨‹åºå’Œæ•°æ®ä¿å­˜åœ¨æ–‡ä»¶ä¸­ã€‚æ–‡ä»¶å¤§è‡´ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
- en: '![image](../Images/03add47aad5b4abed5766964bbdf1c3c.png)'
  id: totrans-674
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/03add47aad5b4abed5766964bbdf1c3c.png)'
- en: ''
  id: totrans-675
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 123: A sample directory tree'
  id: totrans-676
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾123ï¼šä¸€ä¸ªç¤ºä¾‹ç›®å½•æ ‘
- en: On most computer systems, files are organized in directories or folders. Roughly
    speaking, a directory contains some files and some more directories. The latter
    are called sub-directories and may contain yet more sub-directories and files.
    Because of the hierarchy, we speak of directory trees.
  id: totrans-677
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¤§å¤šæ•°è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶ç»„ç»‡åœ¨ç›®å½•æˆ–æ–‡ä»¶å¤¹ä¸­ã€‚ç²—ç•¥åœ°è¯´ï¼Œç›®å½•åŒ…å«ä¸€äº›æ–‡ä»¶å’Œä¸€äº›æ›´å¤šçš„ç›®å½•ã€‚åè€…ç§°ä¸ºå­ç›®å½•ï¼Œå¯èƒ½åŒ…å«æ›´å¤šçš„å­ç›®å½•å’Œæ–‡ä»¶ã€‚ç”±äºå±‚æ¬¡ç»“æ„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç›®å½•æ ‘ã€‚
- en: '[FigureÂ 123](#%28counter._%28figure._fig~3aaccountant%29%29) contains a graphical
    sketch of a small directory tree, and the picture explains why computer scientists
    call them trees. Contrary to convention in computer science, the figure shows
    the tree growing upward, with a root directory named TS. The root directory contains
    one file, called read!, and two sub-directories, called Text and Libs, respectively.
    The first sub-directory, Text, contains only three files; the latter, Libs, contains
    only two sub-directories, each of which contains at least one file. Finally, each
    box has one of two annotations: a directory is annotated with DIR, and a file
    is annotated with a number, its size.'
  id: totrans-678
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾123](#%28counter._%28figure._fig~3aaccountant%29%29)åŒ…å«äº†ä¸€ä¸ªå°ç›®å½•æ ‘çš„å›¾å½¢è‰å›¾ï¼Œå›¾ç‰‡è§£é‡Šäº†ä¸ºä»€ä¹ˆè®¡ç®—æœºç§‘å­¦å®¶ç§°å®ƒä»¬ä¸ºæ ‘ã€‚ä¸è®¡ç®—æœºç§‘å­¦çš„ä¼ ç»Ÿç›¸åï¼Œè¯¥å›¾æ˜¾ç¤ºæ ‘å‘ä¸Šç”Ÿé•¿ï¼Œæ ¹ç›®å½•å‘½åä¸ºTSã€‚æ ¹ç›®å½•åŒ…å«ä¸€ä¸ªåä¸ºread!çš„æ–‡ä»¶å’Œä¸¤ä¸ªå­ç›®å½•ï¼Œåˆ†åˆ«å‘½åä¸ºTextå’ŒLibsã€‚ç¬¬ä¸€ä¸ªå­ç›®å½•TextåªåŒ…å«ä¸‰ä¸ªæ–‡ä»¶ï¼›åè€…LibsåªåŒ…å«ä¸¤ä¸ªå­ç›®å½•ï¼Œæ¯ä¸ªå­ç›®å½•è‡³å°‘åŒ…å«ä¸€ä¸ªæ–‡ä»¶ã€‚æœ€åï¼Œæ¯ä¸ªæ¡†éƒ½æœ‰ä¸€ä¸ªæ³¨é‡Šï¼šç›®å½•ç”¨DIRæ³¨é‡Šï¼Œæ–‡ä»¶ç”¨æ•°å­—æ³¨é‡Šï¼Œè¡¨ç¤ºå…¶å¤§å°ã€‚'
- en: ExerciseÂ 329\. How many times does a file name read! occur in the directory
    tree TS? Can you describe the path from the root directory to the occurrences?
    What is the total size of all the files in the tree? What is the total size of
    the tree if each directory node has size 1? How many levels of directories does
    it contain?
  id: totrans-679
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 329ã€‚æ–‡ä»¶åread!åœ¨ç›®å½•æ ‘TSä¸­å‡ºç°äº†å¤šå°‘æ¬¡ï¼Ÿä½ èƒ½æè¿°ä»æ ¹ç›®å½•åˆ°å‡ºç°å¤„çš„è·¯å¾„å—ï¼Ÿæ ‘ä¸­æ‰€æœ‰æ–‡ä»¶çš„æ€»å¤§å°æ˜¯å¤šå°‘ï¼Ÿå¦‚æœæ¯ä¸ªç›®å½•èŠ‚ç‚¹çš„å¤§å°ä¸º1ï¼Œæ ‘çš„æ€»å¤§å°æ˜¯å¤šå°‘ï¼Ÿå®ƒåŒ…å«å¤šå°‘å±‚ç›®å½•ï¼Ÿ
- en: 20.2Refining Data Definitions[ğŸ”—](#(part._sec~3afiles-models) "Link to here")
  id: totrans-680
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 20.2ç»†åŒ–æ•°æ®å®šä¹‰[ğŸ”—](#(part._sec~3afiles-models) "é“¾æ¥åˆ°æ­¤å¤„")
- en: '[ExerciseÂ 329](#%28counter._%28exercise._ex~3adir0%29%29) lists some of the
    questions that users routinely ask about directories. To answer such questions,
    the computerâ€™s operating system provides programs that can answer them. If you
    want to design such programs, you need to develop a data representation for directory
    trees.'
  id: totrans-681
  prefs: []
  type: TYPE_NORMAL
  zh: '[ç»ƒä¹ 329](#%28counter._%28exercise._ex~3adir0%29%29)åˆ—å‡ºäº†ç”¨æˆ·é€šå¸¸å…³äºç›®å½•æå‡ºçš„ä¸€äº›é—®é¢˜ã€‚ä¸ºäº†å›ç­”è¿™äº›é—®é¢˜ï¼Œè®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿæä¾›äº†å¯ä»¥å›ç­”å®ƒä»¬çš„ç¨‹åºã€‚å¦‚æœæ‚¨æƒ³è®¾è®¡è¿™æ ·çš„ç¨‹åºï¼Œæ‚¨éœ€è¦ä¸ºç›®å½•æ ‘å¼€å‘æ•°æ®è¡¨ç¤ºã€‚'
- en: In this section, we use iterative refinement to develop three such data representations.
    For each stage, we need to decide which attributes to include and which to ignore.
    Consider the directory tree in [figureÂ 123](#%28counter._%28figure._fig~3aaccountant%29%29)
    and imagine how it is created. When a user first creates a directory, it is empty.
    As time goes by, the user adds files and directories. In general, a user refers
    to files by names but mostly thinks of directories as containers.
  id: totrans-682
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿­ä»£ç»†åŒ–æ¥å¼€å‘ä¸‰ç§è¿™æ ·çš„æ•°æ®è¡¨ç¤ºã€‚å¯¹äºæ¯ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬éœ€è¦å†³å®šåŒ…å«å“ªäº›å±æ€§ä»¥åŠå¿½ç•¥å“ªäº›å±æ€§ã€‚è€ƒè™‘[å›¾123](#%28counter._%28figure._fig~3aaccountant%29%29)ä¸­çš„ç›®å½•æ ‘ï¼Œå¹¶æƒ³è±¡å®ƒæ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚å½“ç”¨æˆ·é¦–æ¬¡åˆ›å»ºç›®å½•æ—¶ï¼Œå®ƒæ˜¯ç©ºçš„ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œç”¨æˆ·ä¼šæ·»åŠ æ–‡ä»¶å’Œç›®å½•ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·é€šè¿‡åç§°æ¥å¼•ç”¨æ–‡ä»¶ï¼Œä½†é€šå¸¸å°†ç›®å½•è§†ä¸ºå®¹å™¨ã€‚
- en: 'Model 1 Our thought experiment suggests that our first model should focus on
    files as atomic entities with a name and directories as containers. Here is a
    data definition that deals with directories as lists and files as strings, that
    is, their names:'
  id: totrans-683
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡å‹1æˆ‘ä»¬çš„æ€æƒ³å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ¨¡å‹åº”è¯¥ä¸“æ³¨äºæ–‡ä»¶ä½œä¸ºå…·æœ‰åç§°çš„åŸå­å®ä½“ï¼Œç›®å½•ä½œä¸ºå®¹å™¨ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¤„ç†ç›®å½•ä½œä¸ºåˆ—è¡¨å’Œæ–‡ä»¶ä½œä¸ºå­—ç¬¦ä¸²çš„æ•°æ®å®šä¹‰ï¼Œå³å®ƒä»¬çš„åç§°ï¼š
- en: '| ;Â A Dir.v1 (short for directory) is one of: |'
  id: totrans-684
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªDir.v1ï¼ˆç®€ç§°ä¸ºç›®å½•ï¼‰æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š|'
- en: '| ;Â â€“  ''() |'
  id: totrans-685
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [File.v1](#%28tech._file..v1%29)  [Dir.v1](#%28tech._dir..v1%29))
    |'
  id: totrans-686
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [File.v1](#%28tech._file..v1%29)  [Dir.v1](#%28tech._dir..v1%29))
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Dir.v1](#%28tech._dir..v1%29)  [Dir.v1](#%28tech._dir..v1%29))
    |'
  id: totrans-687
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Dir.v1](#%28tech._dir..v1%29)  [Dir.v1](#%28tech._dir..v1%29))
    |'
- en: '| Â  |'
  id: totrans-688
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A File.v1 is a [String](part_one.html#%28tech._string%29). |'
  id: totrans-689
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A File.v1 is a [String](part_one.html#%28tech._string%29). |'
- en: The names have a .v1 suffix to distinguish them from future refinements.
  id: totrans-690
  prefs: []
  type: TYPE_NORMAL
  zh: The names have a .v1 suffix to distinguish them from future refinements.
- en: ExerciseÂ 330\. Translate the directory tree in [figureÂ 123](#%28counter._%28figure._fig~3aaccountant%29%29)
    into a data representation according to model 1\.
  id: totrans-691
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  330\. å°† [å›¾ 123](#%28counter._%28figure._fig~3aaccountant%29%29) ä¸­çš„ç›®å½•æ ‘æ ¹æ®æ¨¡å‹
    1 è½¬æ¢ä¸ºæ•°æ®è¡¨ç¤ºã€‚
- en: ExerciseÂ 331\. Design the function how-many, which determines how many files
    a given [Dir.v1](#%28tech._dir..v1%29) contains. Remember to follow the design
    recipe; [exerciseÂ 330](#%28counter._%28exercise._ex~3afile-example1%29%29) provides
    you with data examples.
  id: totrans-692
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  331\. è®¾è®¡å‡½æ•° how-manyï¼Œè¯¥å‡½æ•°ç¡®å®šç»™å®š [Dir.v1](#%28tech._dir..v1%29) åŒ…å«å¤šå°‘ä¸ªæ–‡ä»¶ã€‚è¯·è®°ä½éµå¾ªè®¾è®¡é…æ–¹ï¼›[ç»ƒä¹ 
    330](#%28counter._%28exercise._ex~3afile-example1%29%29) ä¸ºä½ æä¾›äº†æ•°æ®ç¤ºä¾‹ã€‚
- en: 'Model 2 If you solved [exerciseÂ 331](#%28counter._%28exercise._ex~3adir-how-many1%29%29),
    you know that this first data definition is still reasonably simple. But, it also
    obscures the nature of directories. With this first representation, we would not
    be able to list all the names of the sub-directories of some given directory.
    To model directories in a more faithful manner than containers, we must introduce
    a structure type that combines a name with a container:'
  id: totrans-693
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡å‹ 2 å¦‚æœä½ è§£å†³äº† [ç»ƒä¹  331](#%28counter._%28exercise._ex~3adir-how-many1%29%29)ï¼Œä½ ä¼šçŸ¥é“è¿™ä¸ªç¬¬ä¸€ä¸ªæ•°æ®å®šä¹‰ä»ç„¶ç›¸å½“ç®€å•ã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿæ©ç›–äº†ç›®å½•çš„æœ¬è´¨ã€‚ä½¿ç”¨è¿™ç§ç¬¬ä¸€ç§è¡¨ç¤ºï¼Œæˆ‘ä»¬æ— æ³•åˆ—å‡ºæŸäº›ç»™å®šç›®å½•çš„æ‰€æœ‰å­ç›®å½•åç§°ã€‚ä¸ºäº†æ¯”å®¹å™¨æ›´å¿ å®åœ°å¯¹ç›®å½•è¿›è¡Œå»ºæ¨¡ï¼Œæˆ‘ä»¬å¿…é¡»å¼•å…¥ä¸€ä¸ªç»“åˆåç§°å’Œå®¹å™¨çš„ç»“æ„ç±»å‹ï¼š
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â dirÂ [nameÂ content])
  id: totrans-694
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â dirÂ [nameÂ content])
- en: 'This new structure type, in turn, suggests the following revision of the data
    definition:'
  id: totrans-695
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§æ–°çš„ç»“æ„ç±»å‹ï¼Œåè¿‡æ¥ï¼Œå»ºè®®å¯¹æ•°æ®å®šä¹‰è¿›è¡Œä»¥ä¸‹ä¿®è®¢ï¼š
- en: '| ;Â A Dir.v2 is a structure: |'
  id: totrans-696
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Dir.v2 is a structure: |'
- en: '| ;Â Â Â (make-dir  [String](part_one.html#%28tech._string%29)  [LOFD](#%28tech._lofd%29))
    |'
  id: totrans-697
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-dir  [String](part_one.html#%28tech._string%29)  [LOFD](#%28tech._lofd%29))
    |'
- en: '| Â  |'
  id: totrans-698
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â An LOFD (short for list of files and directories) is one of: |'
  id: totrans-699
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An LOFD (short for list of files and directories) is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-700
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [File.v2](#%28tech._file..v2%29)  LOFD)
    |'
  id: totrans-701
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [File.v2](#%28tech._file..v2%29)  LOFD)
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Dir.v2](#%28tech._dir..v2%29)  [LOFD](#%28tech._lofd%29))
    |'
  id: totrans-702
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Dir.v2](#%28tech._dir..v2%29)  [LOFD](#%28tech._lofd%29))
    |'
- en: '| Â  |'
  id: totrans-703
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A File.v2 is a [String](part_one.html#%28tech._string%29). |'
  id: totrans-704
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A File.v2 is a [String](part_one.html#%28tech._string%29). |'
- en: Note how the data definition for [Dir.v2](#%28tech._dir..v2%29) refers to the
    definition for [LOFD](#%28tech._lofd%29)s, and the one for [LOFD](#%28tech._lofd%29)s
    refers back to that of [Dir.v2](#%28tech._dir..v2%29). The two definitions are
    mutually recursive.
  id: totrans-705
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ [Dir.v2](#%28tech._dir..v2%29) çš„æ•°æ®å®šä¹‰å¦‚ä½•å¼•ç”¨ [LOFD](#%28tech._lofd%29) çš„å®šä¹‰ï¼Œä»¥åŠ
    [LOFD](#%28tech._lofd%29) çš„å®šä¹‰åˆå¦‚ä½•å›æŒ‡ [Dir.v2](#%28tech._dir..v2%29)ã€‚è¿™ä¸¤ä¸ªå®šä¹‰æ˜¯ç›¸äº’é€’å½’çš„ã€‚
- en: ExerciseÂ 332\. Translate the directory tree in [figureÂ 123](#%28counter._%28figure._fig~3aaccountant%29%29)
    into a data representation according to model 2\.
  id: totrans-706
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  332\. å°† [å›¾ 123](#%28counter._%28figure._fig~3aaccountant%29%29) ä¸­çš„ç›®å½•æ ‘æ ¹æ®æ¨¡å‹
    2 è½¬æ¢ä¸ºæ•°æ®è¡¨ç¤ºã€‚
- en: ExerciseÂ 333\. Design the function how-many, which determines how many files
    a given [Dir.v2](#%28tech._dir..v2%29) contains. [ExerciseÂ 332](#%28counter._%28exercise._ex~3afile-example2%29%29)
    provides you with data examples. Compare your result with that of [exerciseÂ 331](#%28counter._%28exercise._ex~3adir-how-many1%29%29).
  id: totrans-707
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  333. è®¾è®¡å‡½æ•° how-manyï¼Œè¯¥å‡½æ•°ç¡®å®šç»™å®š [Dir.v2](#%28tech._dir..v2%29) åŒ…å«å¤šå°‘ä¸ªæ–‡ä»¶ã€‚[ç»ƒä¹  332](#%28counter._%28exercise._ex~3afile-example2%29%29)
    æä¾›äº†æ•°æ®ç¤ºä¾‹ã€‚å°†ä½ çš„ç»“æœä¸ [ç»ƒä¹  331](#%28counter._%28exercise._ex~3adir-how-many1%29%29) çš„ç»“æœè¿›è¡Œæ¯”è¾ƒã€‚
- en: 'ExerciseÂ 334\. Show how to equip a directory with two more attributes: size
    and readability. The former measures how much space the directory itself (as opposed
    to its content) consumes; the latter specifies whether anyone else besides the
    user may browse the content of the directory.'
  id: totrans-708
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  334. å±•ç¤ºå¦‚ä½•ä¸ºä¸€ä¸ªç›®å½•æ·»åŠ ä¸¤ä¸ªå±æ€§ï¼šå¤§å°å’Œå¯è¯»æ€§ã€‚å‰è€…è¡¡é‡ç›®å½•æœ¬èº«ï¼ˆè€Œéå…¶å†…å®¹ï¼‰å ç”¨çš„ç©ºé—´ï¼›åè€…æŒ‡å®šé™¤ç”¨æˆ·å¤–ï¼Œå…¶ä»–äººæ˜¯å¦å¯ä»¥æµè§ˆç›®å½•å†…å®¹ã€‚
- en: 'Model 3 Like directories, files have attributes. To introduce these, we proceed
    just as above. First, we define a structure for files:'
  id: totrans-709
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ç›®å½•ç±»ä¼¼ï¼Œæ–‡ä»¶ä¹Ÿæœ‰å±æ€§ã€‚ä¸ºäº†å¼•å…¥è¿™äº›å±æ€§ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸Šè¿°æ–¹æ³•è¿›è¡Œã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä¸ºæ–‡ä»¶å®šä¹‰ä¸€ä¸ªç»“æ„ï¼š
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â fileÂ [nameÂ sizeÂ content])
  id: totrans-710
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â fileÂ [nameÂ sizeÂ content])
- en: 'Second, we provide a data definition:'
  id: totrans-711
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒï¼Œæˆ‘ä»¬æä¾›æ•°æ®å®šä¹‰ï¼š
- en: '| ;Â A File.v3 is a structure: |'
  id: totrans-712
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A File.v3 is a structure: |'
- en: '| ;Â Â Â (make-file  [String](part_one.html#%28tech._string%29)  [N](part_two.html#%28tech._n%29)  [String](part_one.html#%28tech._string%29))
    |'
  id: totrans-713
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-file  [String](part_one.html#%28tech._string%29)  [N](part_two.html#%28tech._n%29)  [String](part_one.html#%28tech._string%29))
    |'
- en: 'As indicated by the field names, the string represents the name of the file,
    the natural number its size, and the string its content.Finally, letâ€™s split the
    content field of directories into two pieces: a list of files and a list of sub-directories.
    This change requires a revision of the structure type definition:'
  id: totrans-714
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å­—æ®µåç§°æ‰€ç¤ºï¼Œå­—ç¬¦ä¸²è¡¨ç¤ºæ–‡ä»¶çš„åç§°ï¼Œè‡ªç„¶æ•°è¡¨ç¤ºå…¶å¤§å°ï¼Œå­—ç¬¦ä¸²è¡¨ç¤ºå…¶å†…å®¹ã€‚æœ€åï¼Œè®©æˆ‘ä»¬å°†ç›®å½•çš„å†…å®¹å­—æ®µæ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šæ–‡ä»¶åˆ—è¡¨å’Œå­ç›®å½•åˆ—è¡¨ã€‚æ­¤æ›´æ”¹éœ€è¦ä¿®æ”¹ç»“æ„ç±»å‹å®šä¹‰ï¼š
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â dir.v3Â [nameÂ dirsÂ files])
  id: totrans-715
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â dir.v3Â [nameÂ dirsÂ files])
- en: 'Here is the refined data definition:'
  id: totrans-716
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯ç²¾ç‚¼åçš„æ•°æ®å®šä¹‰ï¼š
- en: '| ;Â A Dir.v3 is a structure: |'
  id: totrans-717
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Dir.v3 is a structure: |'
- en: '| ;Â Â Â (make-dir.v3  [String](part_one.html#%28tech._string%29)  [Dir*](#%28tech._dir%2A%29)  [File*](#%28tech._file%2A%29))
    |'
  id: totrans-718
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-dir.v3  [String](part_one.html#%28tech._string%29)  [Dir*](#%28tech._dir%2A%29)  [File*](#%28tech._file%2A%29))
    |'
- en: '| Â  |'
  id: totrans-719
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A Dir* is one of: |'
  id: totrans-720
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Dir* is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-721
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Dir.v3](#%28tech._dir..v3%29)  [Dir*](#%28tech._dir%2A%29))
    |'
  id: totrans-722
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Dir.v3](#%28tech._dir..v3%29)  [Dir*](#%28tech._dir%2A%29))
    |'
- en: '| Â  |'
  id: totrans-723
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A File* is one of: |'
  id: totrans-724
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A File* is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-725
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [File.v3](#%28tech._file..v3%29)  [File*](#%28tech._file%2A%29))
    |'
  id: totrans-726
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [File.v3](#%28tech._file..v3%29)  [File*](#%28tech._file%2A%29))
    |'
- en: 'Following a convention in computer science, the use of [*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    as the ending of a name suggests â€œmanyâ€ and is a marker distinguishing the name
    from similar ones: [File.v3](#%28tech._file..v3%29) and [Dir.v3](#%28tech._dir..v3%29).'
  id: totrans-727
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç…§è®¡ç®—æœºç§‘å­¦ä¸­çš„æƒ¯ä¾‹ï¼Œåç§°æœ«å°¾ä½¿ç”¨ [*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    è¡¨ç¤ºâ€œå¤šä¸ªâ€ï¼Œå¹¶ä¸”æ˜¯åŒºåˆ†åç§°ä¸ç±»ä¼¼åç§°çš„æ ‡è®°ï¼š[File.v3](#%28tech._file..v3%29) å’Œ [Dir.v3](#%28tech._dir..v3%29)ã€‚
- en: ExerciseÂ 335\. Translate the directory tree in [figureÂ 123](#%28counter._%28figure._fig~3aaccountant%29%29)
    into a data representation according to model 3\. Use "" for the content of files.
  id: totrans-728
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  335. å°† [å›¾ 123](#%28counter._%28figure._fig~3aaccountant%29%29) ä¸­çš„ç›®å½•æ ‘è½¬æ¢ä¸ºæ¨¡å‹
    3 çš„æ•°æ®è¡¨ç¤ºã€‚æ–‡ä»¶çš„å†…å®¹ä½¿ç”¨ "" è¡¨ç¤ºã€‚
- en: ExerciseÂ 336\. Design the function how-many, which determines how many files
    a given [Dir.v3](#%28tech._dir..v3%29) contains. [ExerciseÂ 335](#%28counter._%28exercise._ex~3afile-example3%29%29)
    provides you with data examples. Compare your result with that of [exerciseÂ 333](#%28counter._%28exercise._ex~3adir-how-many2%29%29).
  id: totrans-729
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  336ã€‚è®¾è®¡å‡½æ•° how-manyï¼Œè¯¥å‡½æ•°ç¡®å®šç»™å®š [Dir.v3](#%28tech._dir..v3%29) åŒ…å«å¤šå°‘ä¸ªæ–‡ä»¶ã€‚[ç»ƒä¹  335](#%28counter._%28exercise._ex~3afile-example3%29%29)
    ä¸ºä½ æä¾›äº†æ•°æ®ç¤ºä¾‹ã€‚æ¯”è¾ƒä½ çš„ç»“æœä¸ [ç»ƒä¹  333](#%28counter._%28exercise._ex~3adir-how-many2%29%29)
    çš„ç»“æœã€‚
- en: Given the complexity of the data definition, contemplate how anyone can design
    correct functions. Why are you confident that how-many produces correct results?
  id: totrans-730
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘åˆ°æ•°æ®å®šä¹‰çš„å¤æ‚æ€§ï¼Œæ€è€ƒä»»ä½•äººå¦‚ä½•è®¾è®¡æ­£ç¡®çš„å‡½æ•°ã€‚ä¸ºä»€ä¹ˆä½ ç¡®ä¿¡ how-many äº§ç”Ÿæ­£ç¡®çš„ç»“æœï¼Ÿ
- en: ExerciseÂ 337\. Use [List-of](part_three.html#%28tech._sim-dd._list._of%29) to
    simplify the data definition [Dir.v3](#%28tech._dir..v3%29). Then use ISL+â€™s list-processing
    functions from [figuresÂ 95](part_three.html#%28counter._%28figure._fig~3aisl-ho-list%29%29)
    and [96](part_three.html#%28counter._%28figure._fig~3aisl-ho-list2%29%29) to simplify
    the function definition(s) for the solution of [exerciseÂ 336](#%28counter._%28exercise._ex~3adir-how-many3%29%29).
  id: totrans-731
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  337ã€‚ä½¿ç”¨ [List-of](part_three.html#%28tech._sim-dd._list._of%29) ç®€åŒ–æ•°æ®å®šä¹‰ [Dir.v3](#%28tech._dir..v3%29)ã€‚ç„¶åä½¿ç”¨
    ISL+ çš„åˆ—è¡¨å¤„ç†å‡½æ•°ä» [å›¾ 95](part_three.html#%28counter._%28figure._fig~3aisl-ho-list%29%29)
    å’Œ [96](part_three.html#%28counter._%28figure._fig~3aisl-ho-list2%29%29) ç®€åŒ– [ç»ƒä¹ 
    336](#%28counter._%28exercise._ex~3adir-how-many3%29%29) çš„è§£å†³æ–¹æ¡ˆçš„å‡½æ•°å®šä¹‰ã€‚
- en: Starting with a simple representation of the first model and refining it step-by-step,
    we have developed a reasonably accurate data representation for directory trees.
    Indeed, this third data representation captures the nature of a directory tree
    much more faithfully than the first two. Based on this model, we can create a
    number of other functions that users expect from a computerâ€™s operating system.
  id: totrans-732
  prefs: []
  type: TYPE_NORMAL
  zh: ä»ç¬¬ä¸€ä¸ªæ¨¡å‹çš„ä¸€ä¸ªç®€å•è¡¨ç¤ºå¼€å§‹ï¼Œé€æ­¥æ”¹è¿›ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªç›¸å½“å‡†ç¡®çš„æ•°æ®è¡¨ç¤ºï¼Œç”¨äºç›®å½•æ ‘ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªç¬¬ä¸‰ä¸ªæ•°æ®è¡¨ç¤ºæ¯”å‰ä¸¤ä¸ªæ›´å¿ å®äºç›®å½•æ ‘çš„æœ¬è´¨ã€‚åŸºäºè¿™ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºè®¸å¤šå…¶ä»–ç”¨æˆ·æœŸæœ›ä»è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸­è·å¾—çš„åŠŸèƒ½ã€‚
- en: 20.3Refining Functions[ğŸ”—](#(part._sec~3arefine-funcs) "Link to here")
  id: totrans-733
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 20.3 ä¼˜åŒ–å‡½æ•°[ğŸ”—](#(part._sec~3arefine-funcs) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'To make the following exercises somewhat realistic, DrRacket comes withAdd
    ([require](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._require%29%29)  htdp/dir)
    to the definitions area. the dir.rkt teachpack from the first edition of this
    book. This teachpack introduces the two structure type definitions from model
    3, though without the .v3 suffix. Furthermore, the teachpack provides a function
    that creates representations of directory trees on your computer:'
  id: totrans-734
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä½¿ä»¥ä¸‹ç»ƒä¹ æ›´å…·ç°å®æ€§ï¼ŒDrRacket å°†æ¥è‡ªæœ¬ä¹¦ç¬¬ä¸€ç‰ˆçš„ dir.rkt æ•™å­¦åŒ…çš„ Add ([require](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._require%29%29)  htdp/dir)
    æ·»åŠ åˆ°å®šä¹‰åŒºåŸŸã€‚è¿™ä¸ªæ•™å­¦åŒ…ä»‹ç»äº†æ¨¡å‹ 3 ä¸­çš„ä¸¤ç§ç»“æ„ç±»å‹å®šä¹‰ï¼Œå°½ç®¡æ²¡æœ‰ .v3 åç¼€ã€‚æ­¤å¤–ï¼Œè¯¥æ•™å­¦åŒ…æä¾›äº†ä¸€ä¸ªåˆ›å»ºè®¡ç®—æœºä¸Šç›®å½•æ ‘è¡¨ç¤ºçš„å‡½æ•°ï¼š
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [Dir.v3](#%28tech._dir..v3%29)
    |'
  id: totrans-735
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [String](part_one.html#%28tech._string%29) -> [Dir.v3](#%28tech._dir..v3%29)
    |'
- en: '| ;Â creates a representation of the a-path directory |'
  id: totrans-736
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åˆ›å»º a-path ç›®å½•çš„è¡¨ç¤º |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (create-dirÂ a-path)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-737
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (create-dirÂ a-path)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: 'For example, if you open DrRacket and enter the following three lines into
    the definitions area:'
  id: totrans-738
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œå¦‚æœä½ æ‰“å¼€ DrRacket å¹¶å°†ä»¥ä¸‹ä¸‰è¡Œä»£ç è¾“å…¥åˆ°å®šä¹‰åŒºåŸŸï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â OÂ (create-dirÂ "/Users/..."))Â ;Â on
    OS X |'
  id: totrans-739
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â OÂ (create-dirÂ "/Users/..."))Â ;Â åœ¨
    OS X ä¸Š |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â LÂ (create-dirÂ "/var/log/"))Â ;Â on
    Linux |'
  id: totrans-740
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â LÂ (create-dirÂ "/var/log/"))Â ;Â åœ¨
    Linux ä¸Š |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â WÂ (create-dirÂ "C:\\Users\\..."))Â ;Â on
    Windows |'
  id: totrans-741
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â WÂ (create-dirÂ "C:\\Users\\..."))Â ;Â åœ¨Windowsä¸Š
    |'
- en: you get data representations of directories on your computer after you save
    and then run the program. Indeed, you could use create-dir to map the entire file
    system on your computer to an instance of [Dir.v3](#%28tech._dir..v3%29).
  id: totrans-742
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä½ ä¿å­˜å¹¶è¿è¡Œç¨‹åºåï¼Œä½ ä¼šåœ¨è®¡ç®—æœºä¸Šå¾—åˆ°ç›®å½•çš„æ•°æ®è¡¨ç¤ºã€‚å®é™…ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨`create-dir`å°†ä½ è®¡ç®—æœºä¸Šçš„æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿæ˜ å°„åˆ°`[Dir.v3](#%28tech._dir..v3%29)`çš„ä¸€ä¸ªå®ä¾‹ã€‚
- en: Warnings (1) For large directory trees, DrRacket may need a lot of time to build
    a representation. Use create-dir on small directory trees first. (2) Do not define
    your own dir structure type. The teachpack already defines them, and you must
    not define a structure type twice.
  id: totrans-743
  prefs: []
  type: TYPE_NORMAL
  zh: è­¦å‘Šï¼ˆ1ï¼‰å¯¹äºå¤§å‹ç›®å½•æ ‘ï¼ŒDrRacketå¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´æ¥æ„å»ºè¡¨ç¤ºã€‚é¦–å…ˆåœ¨å°å‹ç›®å½•æ ‘ä¸Šä½¿ç”¨`create-dir`ã€‚ï¼ˆ2ï¼‰ä¸è¦å®šä¹‰ä½ è‡ªå·±çš„ç›®å½•ç»“æ„ç±»å‹ã€‚æ•™å­¦åŒ…å·²ç»å®šä¹‰äº†å®ƒä»¬ï¼Œå¹¶ä¸”ä½ ä¸èƒ½å®šä¹‰ç»“æ„ç±»å‹ä¸¤æ¬¡ã€‚
- en: Although create-dir delivers only a representation of a directory tree, it is
    sufficiently realistic to give you a sense of what it is like to design programs
    at that level. The following exercises illustrate this point. They use Dir to
    refer to the generic idea of a data representation for directory trees. Use the
    simplest data definition of Dir that allows you to complete the respective exercise.
    Feel free to use the data definition from [exerciseÂ 337](#%28counter._%28exercise._ex~3adir-how-many-map%29%29)
    and the functions from [figuresÂ 95](part_three.html#%28counter._%28figure._fig~3aisl-ho-list%29%29)
    and [96](part_three.html#%28counter._%28figure._fig~3aisl-ho-list2%29%29).
  id: totrans-744
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶`create-dir`åªæä¾›ç›®å½•æ ‘çš„è¡¨ç¤ºï¼Œä½†å®ƒè¶³å¤ŸçœŸå®ï¼Œå¯ä»¥è®©ä½ æ„Ÿå—åˆ°åœ¨é‚£ä¸ªçº§åˆ«è®¾è®¡ç¨‹åºçš„æ„Ÿè§‰ã€‚ä»¥ä¸‹ç»ƒä¹ è¯´æ˜äº†è¿™ä¸€ç‚¹ã€‚å®ƒä»¬ä½¿ç”¨`Dir`æ¥æŒ‡ä»£ç›®å½•æ ‘çš„æ•°æ®è¡¨ç¤ºçš„é€šç”¨æ¦‚å¿µã€‚è¯·ä½¿ç”¨æœ€ç®€å•çš„`Dir`æ•°æ®å®šä¹‰æ¥å®Œæˆç›¸åº”çš„ç»ƒä¹ ã€‚ä½ å¯ä»¥è‡ªç”±ä½¿ç”¨[ç»ƒä¹ 337](#%28counter._%28exercise._ex~3adir-how-many-map%29%29)ä¸­çš„æ•°æ®å®šä¹‰ä»¥åŠ[å›¾95](part_three.html#%28counter._%28figure._fig~3aisl-ho-list%29%29)å’Œ[96](part_three.html#%28counter._%28figure._fig~3aisl-ho-list2%29%29)ä¸­çš„å‡½æ•°ã€‚
- en: ExerciseÂ 338\. Use create-dir to turn some of your directories into ISL+ data
    representations. Then use how-many from [exerciseÂ 336](#%28counter._%28exercise._ex~3adir-how-many3%29%29)
    to count how many files they contain. Why are you confident that how-many produces
    correct results for these directories?
  id: totrans-745
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 338ã€‚ä½¿ç”¨`create-dir`å°†ä¸€äº›ç›®å½•è½¬æ¢ä¸ºISL+æ•°æ®è¡¨ç¤ºã€‚ç„¶åä½¿ç”¨[ç»ƒä¹ 336](#%28counter._%28exercise._ex~3adir-how-many3%29%29)ä¸­çš„`how-many`æ¥è®¡ç®—å®ƒä»¬åŒ…å«å¤šå°‘ä¸ªæ–‡ä»¶ã€‚ä¸ºä»€ä¹ˆä½ å¯¹`how-many`å¯¹è¿™äº›ç›®å½•äº§ç”Ÿæ­£ç¡®ç»“æœæœ‰ä¿¡å¿ƒï¼Ÿ
- en: ExerciseÂ 339\. Design find?. The function consumes a Dir and a file name and
    determines whether or not a file with this name occurs in the directory tree.
  id: totrans-746
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 339ã€‚è®¾è®¡`find?`å‡½æ•°ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ª`Dir`å’Œä¸€ä¸ªæ–‡ä»¶åä½œä¸ºå‚æ•°ï¼Œå¹¶ç¡®å®šæ˜¯å¦åœ¨ç›®å½•æ ‘ä¸­å­˜åœ¨å…·æœ‰è¯¥åç§°çš„æ–‡ä»¶ã€‚
- en: ExerciseÂ 340\. Design the function ls, which lists the names of all files and
    directories in a given Dir.
  id: totrans-747
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 340ã€‚è®¾è®¡ä¸€ä¸ªåä¸º`ls`çš„å‡½æ•°ï¼Œå®ƒåˆ—å‡ºç»™å®š`Dir`ä¸­æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•çš„åç§°ã€‚
- en: ExerciseÂ 341\. Design du, a function that consumes a Dir and computes the total
    size of all the files in the entire directory tree. Assume that storing a directory
    in a Dir structure costs 1 file storage unit. In the real world, a directory is
    basically a special file, and its size depends on how large its associated directory
    is.
  id: totrans-748
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 341ã€‚è®¾è®¡ä¸€ä¸ªåä¸º`du`çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª`Dir`ä½œä¸ºå‚æ•°ï¼Œå¹¶è®¡ç®—æ•´ä¸ªç›®å½•æ ‘ä¸­æ‰€æœ‰æ–‡ä»¶çš„æ€»å¤§å°ã€‚å‡è®¾å°†ç›®å½•å­˜å‚¨åœ¨`Dir`ç»“æ„ä¸­éœ€è¦1ä¸ªæ–‡ä»¶å­˜å‚¨å•ä½ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œç›®å½•åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶ï¼Œå…¶å¤§å°å–å†³äºå…¶å…³è”çš„ç›®å½•å¤§å°ã€‚
- en: 'The remaining exercises rely on the notion of a path, which for our purposes
    is a list of names:'
  id: totrans-749
  prefs: []
  type: TYPE_NORMAL
  zh: å‰©ä½™çš„ç»ƒä¹ ä¾èµ–äºè·¯å¾„çš„æ¦‚å¿µï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œè·¯å¾„æ˜¯ä¸€ç³»åˆ—åç§°ï¼š
- en: '| ;Â A Path is [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)].
    |'
  id: totrans-750
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è·¯å¾„æ˜¯ [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)].
    |'
- en: '| ;Â interpretation directions into a directory tree |'
  id: totrans-751
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†è§£é‡Šæ–¹å‘è½¬æ¢ä¸ºç›®å½•æ ‘ |'
- en: Take a second look at [figureÂ 123](#%28counter._%28figure._fig~3aaccountant%29%29).
    In that diagram, the path from TS to part1 is ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  "TS"  "Text"  "part1").
    Similarly, the path from TS to Code is ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  "TS"  "Libs"  "Code").
  id: totrans-752
  prefs: []
  type: TYPE_NORMAL
  zh: é‡æ–°å®¡è§† [å›¾ 123](#%28counter._%28figure._fig~3aaccountant%29%29)ã€‚åœ¨è¯¥å›¾ä¸­ï¼Œä» TS åˆ° part1
    çš„è·¯å¾„æ˜¯ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    "TS" "Text" "part1")ã€‚åŒæ ·ï¼Œä» TS åˆ° Code çš„è·¯å¾„æ˜¯ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    "TS" "Libs" "Code")ã€‚
- en: 'ExerciseÂ 342\. Design find. The function consumes a directory d and a file
    name f. If (find?  d  f) is #true, find produces a path to a file with name f;
    otherwise it produces #false.'
  id: totrans-753
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹  342ï¼šè®¾è®¡ find å‡½æ•°ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªç›®å½• d å’Œä¸€ä¸ªæ–‡ä»¶å fã€‚å¦‚æœ (find? d f) ä¸º #trueï¼Œåˆ™ find ç”Ÿæˆä¸€ä¸ªåä¸º
    f çš„æ–‡ä»¶çš„è·¯å¾„ï¼›å¦åˆ™å®ƒç”Ÿæˆ #falseã€‚'
- en: Hint While it is tempting to first check whether the file name occurs in the
    directory tree, you have to do so for every single sub-directory. Hence it is
    better to combine the functionality of find? and find.
  id: totrans-754
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼šè™½ç„¶é¦–å…ˆæ£€æŸ¥æ–‡ä»¶åæ˜¯å¦å‡ºç°åœ¨ç›®å½•æ ‘ä¸­å¾ˆæœ‰è¯±æƒ‘åŠ›ï¼Œä½†ä½ å¿…é¡»å¯¹æ¯ä¸ªå­ç›®å½•éƒ½è¿™æ ·åšã€‚å› æ­¤ï¼Œå°† find? å’Œ find çš„åŠŸèƒ½ç»“åˆèµ·æ¥ä¼šæ›´å¥½ã€‚
- en: 'Challenge The find function discovers only one of the two files named read!
    in [figureÂ 123](#%28counter._%28figure._fig~3aaccountant%29%29). Design find-all,
    which generalizes find and produces the list of all paths that lead to f in d.
    What should find-all produce when (find?  d  f) is #false? Is this part of the
    problem really a challenge compared to the basic problem?'
  id: totrans-755
  prefs: []
  type: TYPE_NORMAL
  zh: 'æŒ‘æˆ˜ï¼šfind å‡½æ•°åªå‘ç°äº† [å›¾ 123](#%28counter._%28figure._fig~3aaccountant%29%29) ä¸­åä¸º
    read! çš„ä¸¤ä¸ªæ–‡ä»¶ä¸­çš„ä¸€ä¸ªã€‚è®¾è®¡ find-allï¼Œå®ƒæ³›åŒ– find å¹¶ç”Ÿæˆæ‰€æœ‰é€šå‘ d ä¸­ f çš„è·¯å¾„çš„åˆ—è¡¨ã€‚å½“ (find? d f) ä¸º #false
    æ—¶ï¼Œfind-all åº”è¯¥äº§ç”Ÿä»€ä¹ˆï¼Ÿè¿™ä¸ªé—®é¢˜ä¸åŸºæœ¬é—®é¢˜ç›¸æ¯”ï¼Œè¿™éƒ¨åˆ†çœŸçš„æ˜¯ä¸€ä¸ªæŒ‘æˆ˜å—ï¼Ÿ'
- en: ExerciseÂ 343\. Design the function ls-R, which lists the paths to all files
    contained in a given Dir.
  id: totrans-756
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  343ï¼šè®¾è®¡ ls-R å‡½æ•°ï¼Œè¯¥å‡½æ•°åˆ—å‡ºç»™å®š Dir ä¸­æ‰€æœ‰æ–‡ä»¶çš„è·¯å¾„ã€‚
- en: ExerciseÂ 344\. Redesign find-all from [exerciseÂ 342](#%28counter._%28exercise._ex~3afile-find-path%29%29)
    using ls-R from [exerciseÂ 343](#%28counter._%28exercise._ex~3afile-ls-.R%29%29).
    This is design by composition, and if you solved the challenge part of [exerciseÂ 342](#%28counter._%28exercise._ex~3afile-find-path%29%29)
    your new function can find directories, too.
  id: totrans-757
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  344ï¼šä½¿ç”¨ [ç»ƒä¹  343](#%28counter._%28exercise._ex~3afile-ls-.R%29%29) ä¸­çš„ ls-R
    é‡æ–°è®¾è®¡ [ç»ƒä¹  342](#%28counter._%28exercise._ex~3afile-find-path%29%29) ä¸­çš„ find-allã€‚è¿™æ˜¯é€šè¿‡ç»„åˆè¿›è¡Œè®¾è®¡ï¼Œå¦‚æœä½ è§£å†³äº†
    [ç»ƒä¹  342](#%28counter._%28exercise._ex~3afile-find-path%29%29) ä¸­çš„æŒ‘æˆ˜éƒ¨åˆ†ï¼Œä½ çš„æ–°å‡½æ•°ä¹Ÿå¯ä»¥æ‰¾åˆ°ç›®å½•ã€‚
- en: 21Refining Interpreters[ğŸ”—](#(part._ch~3aevaluator) "Link to here")
  id: totrans-758
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 21 ç²¾ç‚¼è§£é‡Šå™¨[ğŸ”—](#(part._ch~3aevaluator) "é“¾æ¥åˆ°è¿™é‡Œ")
- en: 'DrRacket is a program. It is a complex one, dealing with many different kinds
    of data. Like most complex programs, DrRacket also consists of many functions:
    one that allows programmers to edit text, another one that acts like the interactions
    area, a third one that checks whether definitions and expressions are â€œgrammatical,â€
    and so on.'
  id: totrans-759
  prefs: []
  type: TYPE_NORMAL
  zh: DrRacket æ˜¯ä¸€ä¸ªç¨‹åºã€‚å®ƒæ˜¯ä¸€ä¸ªå¤æ‚çš„ç¨‹åºï¼Œå¤„ç†è®¸å¤šä¸åŒç±»å‹çš„æ•°æ®ã€‚åƒå¤§å¤šæ•°å¤æ‚çš„ç¨‹åºä¸€æ ·ï¼ŒDrRacket ä¹Ÿç”±è®¸å¤šå‡½æ•°ç»„æˆï¼šä¸€ä¸ªå…è®¸ç¨‹åºå‘˜ç¼–è¾‘æ–‡æœ¬çš„å‡½æ•°ï¼Œå¦ä¸€ä¸ªå……å½“äº¤äº’åŒºåŸŸï¼Œç¬¬ä¸‰ä¸ªæ£€æŸ¥å®šä¹‰å’Œè¡¨è¾¾å¼æ˜¯å¦â€œè¯­æ³•æ­£ç¡®â€ï¼Œç­‰ç­‰ã€‚
- en: In this chapter, we show you how to design the function that implements the
    heart of the interactions area. Naturally, we use iterative refinement for this
    design project. As a matter of fact, the very idea of focusing on this aspect
    of DrRacket is another instance of refinement, namely, the obvious one of implementing
    only one piece of functionality.
  id: totrans-760
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å‘æ‚¨å±•ç¤ºå¦‚ä½•è®¾è®¡å®ç°äº¤äº’åŒºåŸŸæ ¸å¿ƒåŠŸèƒ½çš„å‡½æ•°ã€‚è‡ªç„¶åœ°ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿­ä»£ç»†åŒ–æ¥å®Œæˆè¿™ä¸ªè®¾è®¡é¡¹ç›®ã€‚å®é™…ä¸Šï¼Œä¸“æ³¨äº DrRacket çš„è¿™ä¸ªæ–¹é¢çš„æƒ³æ³•æœ¬èº«å°±æ˜¯å¦ä¸€ä¸ªç»†åŒ–å®ä¾‹ï¼Œå³åªå®ç°ä¸€ä¸ªåŠŸèƒ½éƒ¨ä»¶çš„æ˜æ˜¾å®ä¾‹ã€‚
- en: Simply put, the interactions area performs the task of determining the values
    of expressions that you enter. After you click RUN, the interactions area knows
    about all the definitions. It is then ready to accept an expression that may refer
    to these definitions, to determine the value of this expression, and to repeat
    this cycle as often as you wish. For this reason, many people also refer to the
    interactions area as the read-eval-print loop, where eval is short for evaluator,
    a function that is also called interpreter.
  id: totrans-761
  prefs: []
  type: TYPE_NORMAL
  zh: ç®€è€Œè¨€ä¹‹ï¼Œäº¤äº’åŒºåŸŸæ‰§è¡Œç¡®å®šä½ è¾“å…¥çš„è¡¨è¾¾å¼å€¼çš„ä»»åŠ¡ã€‚ç‚¹å‡»è¿è¡Œåï¼Œäº¤äº’åŒºåŸŸäº†è§£æ‰€æœ‰å®šä¹‰ã€‚ç„¶åå®ƒå‡†å¤‡å¥½æ¥å—å¯èƒ½å¼•ç”¨è¿™äº›å®šä¹‰çš„è¡¨è¾¾å¼ï¼Œç¡®å®šè¿™ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œå¹¶ä¸”å¯ä»¥æŒ‰ç…§ä½ çš„æ„æ„¿é‡å¤è¿™ä¸ªå¾ªç¯ã€‚å› æ­¤ï¼Œè®¸å¤šäººä¹Ÿå°†äº¤äº’åŒºåŸŸç§°ä¸ºè¯»å–-è¯„ä¼°-æ‰“å°å¾ªç¯ï¼Œå…¶ä¸­evalæ˜¯evaluatorçš„ç®€ç§°ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¹Ÿè¢«ç§°ä¸ºè§£é‡Šå™¨çš„å‡½æ•°ã€‚
- en: Like this book, our refinement process starts with numeric BSL expressions.
    They are simple; they do not assume an understanding of definitions; and even
    your sister in fifth grade can determine their value. Once you understand this
    first step, you know the difference between a BSL expression and its representation.
    Next we move on to expressions with variables. The last step is to add definitions.
  id: totrans-762
  prefs: []
  type: TYPE_NORMAL
  zh: å°±åƒè¿™æœ¬ä¹¦ä¸€æ ·ï¼Œæˆ‘ä»¬çš„ç²¾ç‚¼è¿‡ç¨‹ä»æ•°å€¼BSLè¡¨è¾¾å¼å¼€å§‹ã€‚å®ƒä»¬å¾ˆç®€å•ï¼›å®ƒä»¬ä¸å‡è®¾å¯¹å®šä¹‰çš„ç†è§£ï¼›å³ä½¿ä½ çš„äº”å¹´çº§å¦¹å¦¹ä¹Ÿèƒ½ç¡®å®šå®ƒä»¬çš„å€¼ã€‚ä¸€æ—¦ä½ ç†è§£äº†è¿™ä¸ªç¬¬ä¸€æ­¥ï¼Œä½ å°±çŸ¥é“BSLè¡¨è¾¾å¼ä¸å…¶è¡¨ç¤ºä¹‹é—´çš„åŒºåˆ«ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è½¬å‘å¸¦æœ‰å˜é‡çš„è¡¨è¾¾å¼ã€‚æœ€åä¸€æ­¥æ˜¯æ·»åŠ å®šä¹‰ã€‚
- en: 21.1Interpreting Expressions[ğŸ”—](#(part._sec~3ainterpreter) "Link to here")
  id: totrans-763
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 21.1 è§£é‡Šè¡¨è¾¾å¼[ğŸ”—](#(part._sec~3ainterpreter) "é“¾æ¥è‡³æ­¤")
- en: Our first task is to agree on a data representation for BSL programs. That is,
    we must figure out how to represent a BSL expression as a piece of BSL data. At
    first, this sounds strange and unusual, but it is not difficult. Suppose we just
    want to represent numbers, additions, and multiplications for a start. Clearly,
    numbers can stand for numbers. An addition expression, however, calls for compound
    data because it contains two expressions and because it is distinct from a multiplication
    expression, which also needs a data representation.
  id: totrans-764
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„é¦–è¦ä»»åŠ¡æ˜¯å°±BSLç¨‹åºçš„è¡¨ç¤ºæ³•è¾¾æˆä¸€è‡´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¿…é¡»å¼„æ¸…æ¥šå¦‚ä½•å°†ä¸€ä¸ªBSLè¡¨è¾¾å¼è¡¨ç¤ºä¸ºBSLæ•°æ®çš„ä¸€éƒ¨åˆ†ã€‚èµ·åˆï¼Œè¿™å¬èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä½†å¹¶ä¸å›°éš¾ã€‚å‡è®¾æˆ‘ä»¬åªæ˜¯æƒ³è¡¨ç¤ºæ•°å­—ã€åŠ æ³•å’Œä¹˜æ³•ã€‚æ˜¾ç„¶ï¼Œæ•°å­—å¯ä»¥ä»£è¡¨æ•°å­—ã€‚ç„¶è€Œï¼ŒåŠ æ³•è¡¨è¾¾å¼éœ€è¦å¤åˆæ•°æ®ï¼Œå› ä¸ºå®ƒåŒ…å«ä¸¤ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶ä¸”å®ƒä¸ä¹˜æ³•è¡¨è¾¾å¼ä¸åŒï¼Œä¹˜æ³•è¡¨è¾¾å¼ä¹Ÿéœ€è¦æ•°æ®è¡¨ç¤ºã€‚
- en: 'Following [Adding Structure](part_one.html#%28part._ch~3astructure%29), a straightforward
    way to represent additions and multiplications is to define two structure types,
    each with two fields:'
  id: totrans-765
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®[æ·»åŠ ç»“æ„](part_one.html#%28part._ch~3astructure%29)ï¼Œè¡¨ç¤ºåŠ æ³•å’Œä¹˜æ³•çš„ä¸€ä¸ªç›´æ¥æ–¹æ³•æ˜¯ä¸ºæ¯ç§ç»“æ„ç±»å‹å®šä¹‰ä¸¤ä¸ªå­—æ®µï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â addÂ [[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)Â [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
  id: totrans-766
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â addÂ [[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)Â [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â mulÂ [[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)Â [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
  id: totrans-767
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â mulÂ [[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)Â [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
- en: 'The intention is that the [left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    field contains one operandâ€”<wbr>the one to the â€œleftâ€ of the operatorâ€”<wbr>and
    the [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)
    field contains the other operand. The following table shows three examples:'
  id: totrans-768
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®çš„æ˜¯ï¼Œ[å·¦](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    å­—æ®µåŒ…å«ä¸€ä¸ªæ“ä½œæ•°â€”â€”<wbr>ä½äºè¿ç®—ç¬¦â€œå·¦ä¾§â€çš„æ“ä½œæ•°â€”â€”<wbr>è€Œ [å³](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)
    å­—æ®µåŒ…å«å¦ä¸€ä¸ªæ“ä½œæ•°ã€‚ä»¥ä¸‹è¡¨æ ¼å±•ç¤ºäº†ä¸‰ä¸ªç¤ºä¾‹ï¼š
- en: '| BSL expression |  | representation of BSL expression |'
  id: totrans-769
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| BSLè¡¨è¾¾å¼ |  | BSLè¡¨è¾¾å¼çš„è¡¨ç¤º |'
- en: '| 3 |  | 3 |'
  id: totrans-770
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 3 |  | 3 |'
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 1Â 1)
    |  | (make-addÂ 1Â 1) |'
  id: totrans-771
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    1 1) |  | (make-add 1 1) |'
- en: '| ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 300001Â 100000)
    |  | (make-mulÂ 300001Â 100000) |'
  id: totrans-772
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    300001 100000) |  | (make-mul 300001 100000) |'
- en: 'The next question concerns an expression with sub-expressions:'
  id: totrans-773
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥çš„é—®é¢˜æ¶‰åŠå¸¦æœ‰å­è¡¨è¾¾å¼çš„è¡¨è¾¾å¼ï¼š
- en: ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â 3)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 4Â 4))
  id: totrans-774
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    3 3) ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    4 4))
- en: The surprisingly simple answer is that fields may contain any value. In this
    particular case, [left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    and [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)
    may contain representations of expressions, and you may nest this as deeply as
    you wish. See [figureÂ 124](#%28counter._%28figure._fig~3arepresenting-bsl%29%29)
    for additional examples.
  id: totrans-775
  prefs: []
  type: TYPE_NORMAL
  zh: æƒŠäººçš„ç®€å•ç­”æ¡ˆæ˜¯ï¼Œå­—æ®µå¯ä»¥åŒ…å«ä»»ä½•å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ[å·¦](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    å’Œ [å³](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)
    å­—æ®µå¯ä»¥åŒ…å«è¡¨è¾¾å¼çš„è¡¨ç¤ºï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦åµŒå¥—åˆ°ä»»æ„æ·±åº¦ã€‚å‚è§ [å›¾124](#%28counter._%28figure._fig~3arepresenting-bsl%29%29)
    ä»¥è·å–æ›´å¤šç¤ºä¾‹ã€‚
- en: '| BSL expression |  | representation of BSL expression |'
  id: totrans-776
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| BSLè¡¨è¾¾å¼ |  | BSLè¡¨è¾¾å¼çš„è¡¨ç¤º |'
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 1Â 1)Â 10)
    |  | (make-addÂ (make-mulÂ 1Â 1)Â 10) |'
  id: totrans-777
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    1 1) 10) |  | (make-add (make-mul 1 1) 10) |'
- en: '|'
  id: totrans-778
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-779
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â 3)
    &#124;'
  id: totrans-780
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    3 3) &#124;'
- en: '&#124; Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 4Â 4))
    &#124;'
  id: totrans-781
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;   Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    4 4)) &#124;'
- en: ''
  id: totrans-782
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-783
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-784
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (make-addÂ (make-mulÂ 3Â 3) &#124;'
  id: totrans-785
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (åŠ Â (ä¹˜Â 3Â 3) &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â Â (make-mulÂ 4Â 4)) &#124;'
  id: totrans-786
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â Â Â Â Â Â (ä¹˜Â 4Â 4)) &#124;'
- en: ''
  id: totrans-787
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-788
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '|'
  id: totrans-789
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-790
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 1Â 2)Â 3)
    &#124;'
  id: totrans-791
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 1Â 2)Â 3)
    &#124;'
- en: '&#124; Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 1Â 1)
    &#124;'
  id: totrans-792
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â Â Â (ä¹˜Â (ä¹˜Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 1Â 1)
    &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â 2) &#124;'
  id: totrans-793
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 2) &#124;'
- en: '&#124; Â Â Â Â Â Â 4)) &#124;'
  id: totrans-794
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â Â Â Â Â Â 4)) &#124;'
- en: ''
  id: totrans-795
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-796
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-797
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (make-addÂ (make-mulÂ (make-addÂ 1Â 2)Â 3) &#124;'
  id: totrans-798
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (åŠ Â (ä¹˜Â (åŠ Â 1Â 2)Â 3) &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â Â (make-mulÂ (make-mul &#124;'
  id: totrans-799
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â Â Â Â Â Â (ä¹˜Â (ä¹˜ &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (make-addÂ 1Â 1) &#124;'
  id: totrans-800
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (åŠ Â 1Â 1) &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 2) &#124;'
  id: totrans-801
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 2) &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 4)) &#124;'
  id: totrans-802
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 4)) &#124;'
- en: ''
  id: totrans-803
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-804
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-805
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 124: Representing BSL expressions in BSL'
  id: totrans-806
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'å›¾Â 124: åœ¨BSLä¸­è¡¨ç¤ºBSLè¡¨è¾¾å¼'
- en: ExerciseÂ 345\. Formulate a data definition for the representation of BSL expressions
    based on the structure type definitions of add and mul. Letâ€™s use BSL-expr in
    analogy for [S-expr](#%28tech._s._expr%29) for the new class of data.
  id: totrans-807
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 345ã€‚æ ¹æ®åŠ æ³•å’Œä¹˜æ³•çš„ç»“æ„ç±»å‹å®šä¹‰ï¼Œä¸ºBSLè¡¨è¾¾å¼çš„è¡¨ç¤ºå½¢å¼åˆ¶å®šä¸€ä¸ªæ•°æ®å®šä¹‰ã€‚è®©æˆ‘ä»¬ç”¨BSL-exprç±»æ¯”ä¸º[S-expr](#%28tech._s._expr%29)çš„æ–°æ•°æ®ç±»ã€‚
- en: 'Translate the following expressions into data:'
  id: totrans-808
  prefs: []
  type: TYPE_NORMAL
  zh: å°†ä»¥ä¸‹è¡¨è¾¾å¼è½¬æ¢ä¸ºæ•°æ®ï¼š
- en: ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  10  -10)
  id: totrans-809
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  10  -10)
- en: ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  20  3)  33)
  id: totrans-810
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 20Â 3)Â 
    33)
- en: ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  3.14  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  2  3))  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  3.14  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  -1  -9)))
  id: totrans-811
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  3.14  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  2  3))  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  3.14  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  -1  -9)))
- en: 'Interpret the following data as expressions:'
  id: totrans-812
  prefs: []
  type: TYPE_NORMAL
  zh: å°†ä»¥ä¸‹æ•°æ®è§£é‡Šä¸ºè¡¨è¾¾å¼ï¼š
- en: (make-add  -1  2)
  id: totrans-813
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (make-add  -1  2)
- en: (make-add  (make-mul  -2  -3)  33) Here â€œinterpretâ€ means â€œtranslate from data
    into information.â€ In contrast, â€œinterpreterâ€ in the title of this chapter refers
    to a program that consumes the representation of a program and produces its value.
    While the two ideas are related, they are not the same.
  id: totrans-814
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (make-add  (make-mul  -2  -3)  33) è¿™é‡Œâ€œè§£é‡Šâ€æ„å‘³ç€â€œå°†æ•°æ®è½¬æ¢ä¸ºä¿¡æ¯â€ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæœ¬ç« æ ‡é¢˜ä¸­çš„â€œè§£é‡Šå™¨â€æŒ‡çš„æ˜¯æ¶ˆè€—ç¨‹åºè¡¨ç¤ºå¹¶äº§ç”Ÿå…¶å€¼çš„ç¨‹åºã€‚è™½ç„¶è¿™ä¸¤ä¸ªæ¦‚å¿µç›¸å…³ï¼Œä½†å®ƒä»¬å¹¶ä¸ç›¸åŒã€‚
- en: (make-mul  (make-add  1  (make-mul  2  3))  3.14)
  id: totrans-815
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (make-mul  (make-add  1  (make-mul  2  3))  3.14)
- en: 'Now that you have a data representation for BSL programs, it is time to design
    an evaluator. This function consumes a representation of a BSL expression and
    produces its value. Again, this function is unlike any you have ever designed
    so it pays off to experiment with some examples. To this end, either you can use
    the rules of arithmetic to figure out what the value of an expression is or you
    can â€œplayâ€ in the interactions area of DrRacket. Take a look at the following
    table for our examples:'
  id: totrans-816
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä½ å·²ç»æœ‰äº†BSLç¨‹åºçš„è¡¨ç¤ºï¼Œæ˜¯æ—¶å€™è®¾è®¡ä¸€ä¸ªè¯„ä¼°å™¨äº†ã€‚è¿™ä¸ªå‡½æ•°æ¶ˆè€—BSLè¡¨è¾¾å¼çš„è¡¨ç¤ºå¹¶äº§ç”Ÿå…¶å€¼ã€‚åŒæ ·ï¼Œè¿™ä¸ªå‡½æ•°ä¸ä»»ä½•ä½ ä¹‹å‰è®¾è®¡çš„å‡½æ•°éƒ½ä¸åŒï¼Œå› æ­¤å°è¯•ä¸€äº›ç¤ºä¾‹ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ä¸ºæ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ç®—æœ¯è§„åˆ™æ¥ç¡®å®šè¡¨è¾¾å¼çš„å€¼ï¼Œæˆ–è€…ä½ å¯ä»¥åœ¨DrRacketçš„äº¤äº’åŒºåŸŸâ€œç©è€â€ã€‚ä»¥ä¸‹è¡¨æ ¼å±•ç¤ºäº†æˆ‘ä»¬çš„ç¤ºä¾‹ï¼š
- en: '| BSL expression |  | its representation |  | its value |'
  id: totrans-817
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| BSLè¡¨è¾¾å¼ |  | å…¶è¡¨ç¤º |  | å…¶å€¼ |'
- en: '| 3 |  | 3 |  | 3 |'
  id: totrans-818
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 3 |  | 3 |  | 3 |'
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 1Â 1)
    |  | (make-addÂ 1Â 1) |  | 2 |'
  id: totrans-819
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 1Â 1)
    |  | (make-addÂ 1Â 1) |  | 2 |'
- en: '| ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â 10)
    |  | (make-mulÂ 3Â 10) |  | 30 |'
  id: totrans-820
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â 10)
    |  | (make-mulÂ 3Â 10) |  | 30 |'
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 1Â 1)Â 10)
    |  | (make-addÂ (make-mulÂ 1Â 1)Â 10) |  | 11 |'
  id: totrans-821
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 1Â 1)Â 10)
    |  | (make-addÂ (make-mulÂ 1Â 1)Â 10) |  | 11 |'
- en: ExerciseÂ 346\. Formulate a data definition for the class of values to which
    a representation of a BSL expression can evaluate.
  id: totrans-822
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 346ã€‚ä¸ºBSLè¡¨è¾¾å¼çš„è¡¨ç¤ºå¯ä»¥è¯„ä¼°çš„å€¼çš„ç±»åˆ«åˆ¶å®šä¸€ä¸ªæ•°æ®å®šä¹‰ã€‚
- en: ExerciseÂ 347\. Design eval-expression. The function consumes a representation
    of a BSL expression and computes its value.
  id: totrans-823
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 347ã€‚è®¾è®¡eval-expressionå‡½æ•°ã€‚è¯¥å‡½æ•°æ¶ˆè€—BSLè¡¨è¾¾å¼çš„è¡¨ç¤ºå¹¶è®¡ç®—å…¶å€¼ã€‚
- en: 'ExerciseÂ 348\. Develop a data representation for [Boolean](part_one.html#%28tech._boolean%29)
    BSL expressions constructed from #true, #false, [and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29),
    [or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29),
    and [not](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._not%29%29).
    Then design eval-bool-expression, which consumes (representations of) [Boolean](part_one.html#%28tech._boolean%29)
    BSL expressions and computes their values. What kind of values do these [Boolean](part_one.html#%28tech._boolean%29)
    expressions yield?'
  id: totrans-824
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 348ã€‚ä¸ºä»#trueã€#falseã€[and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)ã€[or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)å’Œ[not](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._not%29%29)æ„é€ çš„[å¸ƒå°”](part_one.html#%28tech._boolean%29)
    BSLè¡¨è¾¾å¼å¼€å‘æ•°æ®è¡¨ç¤ºã€‚ç„¶åè®¾è®¡eval-bool-expressionï¼Œå®ƒæ¶ˆè€—ï¼ˆè¡¨ç¤ºï¼‰[å¸ƒå°”](part_one.html#%28tech._boolean%29)
    BSLè¡¨è¾¾å¼å¹¶è®¡ç®—å®ƒä»¬çš„å€¼ã€‚è¿™äº›å¸ƒå°”è¡¨è¾¾å¼ä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„å€¼ï¼Ÿ
- en: 'Convenience and parsing S-expressions offer a convenient way to represent BSL
    expressions in our programming language:'
  id: totrans-825
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾¿åˆ©æ€§å’Œè§£æS-expressionsä¸ºæˆ‘ä»¬ç¼–ç¨‹è¯­è¨€ä¸­è¡¨ç¤ºBSLè¡¨è¾¾å¼æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹æ³•ï¼š
- en: '| > ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 1Â 1)
    |'
  id: totrans-826
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    1 1) |'
- en: '| 2 |'
  id: totrans-827
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 2 |'
- en: '| > ''(+Â 1Â 1) |'
  id: totrans-828
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ''(+ 1 1) |'
- en: '| (list ''+ 1 1) |'
  id: totrans-829
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list ''+ 1 1) |'
- en: '| > ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â 3)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 4Â 4))
    |'
  id: totrans-830
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    3 3) ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    4 4)) |'
- en: '| 25 |'
  id: totrans-831
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 25 |'
- en: '| > ''(+Â (*Â 3Â 3)Â (*Â 4Â 4)) |'
  id: totrans-832
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ''(+ (* 3 3) (* 4 4)) |'
- en: '| (list ''+ (list ''* 3 3) (list ''* 4 4)) |'
  id: totrans-833
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list ''+ (list ''* 3 3) (list ''* 4 4)) |'
- en: By simply putting a quote in front of an expression, we get ISL+ data.
  id: totrans-834
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡åœ¨è¡¨è¾¾å¼å‰ç®€å•åœ°åŠ ä¸Šå¼•å·ï¼Œæˆ‘ä»¬å¾—åˆ°ISL+æ•°æ®ã€‚
- en: 'Interpreting an S-expression representation is clumsy, mostly because not all
    S-expressions represent [BSL-expr](#%28tech._bsl._expr%29)s. For example, #true,
    "hello", and ''(+  x  1) are not representatives of BSL expressions. As a result,
    S-expressions are quite inconvenient for the designers of interpreters.'
  id: totrans-835
  prefs: []
  type: TYPE_NORMAL
  zh: è§£é‡ŠS-expressionè¡¨ç¤ºæ˜¯ç¬¨æ‹™çš„ï¼Œä¸»è¦æ˜¯å› ä¸ºå¹¶éæ‰€æœ‰S-expressionéƒ½ä»£è¡¨[BSL-expr](#%28tech._bsl._expr%29)sã€‚ä¾‹å¦‚ï¼Œ#trueã€"hello"å’Œ'(+
    x 1)éƒ½ä¸æ˜¯BSLè¡¨è¾¾å¼çš„è¡¨ç¤ºã€‚å› æ­¤ï¼ŒS-expressionså¯¹äºè§£é‡Šå™¨çš„å¼€å‘è€…æ¥è¯´éå¸¸ä¸æ–¹ä¾¿ã€‚
- en: Programmers invented parsers to bridge the gap between convenience of use and
    implementation. A parser simultaneously checks whether some piece of data conforms
    to a data definition and, if it does, builds a matching element from the chosen
    class of data. The latter is called a parse tree. If the given data does not conform,
    a parser signals an error, much like the checked functions from [Input Errors](part_one.html#%28part._sec~3ainput-errors%29).
  id: totrans-836
  prefs: []
  type: TYPE_NORMAL
  zh: ç¨‹åºå‘˜å‘æ˜äº†è§£æå™¨æ¥å¼¥åˆä½¿ç”¨ä¾¿åˆ©æ€§å’Œå®ç°ä¹‹é—´çš„å·®è·ã€‚è§£æå™¨åŒæ—¶æ£€æŸ¥æŸäº›æ•°æ®æ˜¯å¦ç¬¦åˆæ•°æ®å®šä¹‰ï¼Œå¦‚æœç¬¦åˆï¼Œåˆ™ä»æ‰€é€‰æ•°æ®ç±»ä¸­æ„å»ºä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ã€‚åè€…ç§°ä¸ºè§£ææ ‘ã€‚å¦‚æœç»™å®šçš„æ•°æ®ä¸ç¬¦åˆï¼Œè§£æå™¨ä¼šå‘å‡ºé”™è¯¯ä¿¡å·ï¼Œå°±åƒæ¥è‡ª[è¾“å…¥é”™è¯¯](part_one.html#%28part._sec~3ainput-errors%29)çš„æ£€æŸ¥å‡½æ•°ä¸€æ ·ã€‚
- en: '[FigureÂ 125](#%28counter._%28figure._fig~3aparse-bsl-expr%29%29) presents a
    BSL parser for S-expressions. Specifically, parse consumes an [S-expr](#%28tech._s._expr%29)
    and produces a BSL-exprâ€”<wbr>if and only if the given S-expression is the result
    of quoting a BSL expression that has a BSL-expr representative.'
  id: totrans-837
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾125](#%28counter._%28figure._fig~3aparse-bsl-expr%29%29)å±•ç¤ºäº†S-expressionsçš„BSLè§£æå™¨ã€‚å…·ä½“æ¥è¯´ï¼Œparseæ¶ˆè€—ä¸€ä¸ª[S-expr](#%28tech._s._expr%29)å¹¶äº§ç”Ÿä¸€ä¸ªBSL-exprâ€”â€”å¦‚æœä¸”ä»…å½“ç»™å®šçš„S-expressionæ˜¯å¼•ç”¨ä¸€ä¸ªå…·æœ‰BSL-exprè¡¨ç¤ºçš„BSLè¡¨è¾¾å¼çš„ç»“æœã€‚'
- en: ExerciseÂ 349\. Create tests for parse until DrRacket tells you that every element
    in the definitions area is covered during the test run.
  id: totrans-838
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 349. ä¸ºparseåˆ›å»ºæµ‹è¯•ï¼Œç›´åˆ°DrRacketå‘Šè¯‰ä½ æµ‹è¯•è¿è¡ŒæœŸé—´å®šä¹‰åŒºåŸŸä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è¢«è¦†ç›–ã€‚
- en: ExerciseÂ 350\. What is unusual about the definition of this program with respect
    to the design recipe?
  id: totrans-839
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 350. ä¸è®¾è®¡é…æ–¹ç›¸æ¯”ï¼Œè¿™ä¸ªç¨‹åºçš„å®šä¹‰æœ‰ä»€ä¹ˆä¸åŒä¹‹å¤„ï¼Ÿ
- en: ExerciseÂ 351\. Design interpreter-expr. The function accepts S-expressions.
    If parse recognizes them as [BSL-expr](#%28tech._bsl._expr%29), it produces their
    value. Otherwise, it signals the same error as parse.
  id: totrans-840
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 351. è®¾è®¡interpreter-exprå‡½æ•°ã€‚è¯¥å‡½æ•°æ¥å—Sè¡¨è¾¾å¼ã€‚å¦‚æœparseå°†å…¶è¯†åˆ«ä¸º[BSL-expr](#%28tech._bsl._expr%29)ï¼Œåˆ™äº§ç”Ÿå®ƒä»¬çš„å€¼ã€‚å¦åˆ™ï¼Œå®ƒå‘å‡ºä¸parseç›¸åŒçš„é”™è¯¯ã€‚
- en: '| ;Â [S-expr](#%28tech._s._expr%29) -> [BSL-expr](#%28tech._bsl._expr%29) |'
  id: totrans-841
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [S-expr](#%28tech._s._expr%29) -> [BSL-expr](#%28tech._bsl._expr%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (parseÂ s)
    |'
  id: totrans-842
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (parseÂ s)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-843
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(atom?Â s)Â (parse-atomÂ s)] |'
  id: totrans-844
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |Â Â Â [(atom?Â s)Â (parse-atomÂ s)] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (parse-slÂ s)]))
    |'
  id: totrans-845
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (parse-slÂ s)]))
    |'
- en: '| Â  |'
  id: totrans-846
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |'
- en: '| ;Â [SL](#%28tech._sl%29) -> [BSL-expr](#%28tech._bsl._expr%29) |'
  id: totrans-847
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [SL](#%28tech._sl%29) -> [BSL-expr](#%28tech._bsl._expr%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (parse-slÂ s)
    |'
  id: totrans-848
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (parse-slÂ s)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-849
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â (consists-of-3Â s)Â ([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â s)))
    |'
  id: totrans-850
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â (consists-of-3Â s)Â ([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â s)))
    |'
- en: '| Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-851
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â [([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â s)Â ''+)
    |'
  id: totrans-852
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â s)Â ''+)
    |'
- en: '| Â Â Â Â Â Â Â Â (make-addÂ (parseÂ ([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â s))Â (parseÂ ([third](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._third%29%29)Â s)))]
    |'
  id: totrans-853
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |Â Â Â Â Â Â Â (make-addÂ (parseÂ ([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â s))Â (parseÂ ([third](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._third%29%29)Â s)))]
    |'
- en: '| Â Â Â Â Â Â Â [([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â s)Â ''*)
    |'
  id: totrans-854
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â ([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â s)Â ''*)
    |'
- en: '| Â Â Â Â Â Â Â Â (make-mulÂ (parseÂ ([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â s))Â (parseÂ ([third](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._third%29%29)Â s)))]
    |'
  id: totrans-855
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â ([make-mul](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-mul%29%29)Â ([parse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._parse%29%29)Â ([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â s))Â ([parse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._parse%29%29)Â ([third](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._third%29%29)Â s)))]
    |'
- en: '| Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â WRONG)])]
    |'
  id: totrans-856
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â WRONG)])]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â WRONG)]))
    |'
  id: totrans-857
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â WRONG)]))
    |'
- en: '| Â  |'
  id: totrans-858
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Atom](#%28tech._atom%29) -> [BSL-expr](#%28tech._bsl._expr%29) |'
  id: totrans-859
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [åŸå­](#%28tech._atom%29) -> [BSL-è¡¨è¾¾å¼](#%28tech._bsl._expr%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (parse-atomÂ s)
    |'
  id: totrans-860
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (parse-atomÂ s)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-861
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â s)Â s]
    |'
  id: totrans-862
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([number?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._number~3f%29%29)Â s)Â s]
    |'
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â s)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â WRONG)]
    |'
  id: totrans-863
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â s)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â WRONG)]
    |'
- en: '| Â Â Â Â [([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â s)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â WRONG)]))
    |'
  id: totrans-864
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)Â s)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â WRONG))
    |'
- en: '| Â  |'
  id: totrans-865
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [SL](#%28tech._sl%29) -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-866
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [SL](#%28tech._sl%29) -> [å¸ƒå°”](part_one.html#%28tech._boolean%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (consists-of-3Â s)
    |'
  id: totrans-867
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (consists-of-3Â s)
    |'
- en: '| Â Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â s)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â s))Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â s)))
    |'
  id: totrans-868
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â s)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â s))Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â s)))
    |'
- en: '| Â Â Â Â Â Â Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â s))))))
    |'
  id: totrans-869
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â s))))))
    |'
- en: ''
  id: totrans-870
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 125: From S-expr to BSL-expr'
  id: totrans-871
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾Â 125ï¼šä» S-expr åˆ° BSL-expr
- en: 21.2Interpreting Variables[ğŸ”—](#(part._sec~3ainterpreter-variables) "Link to
    here")
  id: totrans-872
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 21.2 è§£é‡Šå˜é‡[ğŸ”—](#(part._sec~3ainterpreter-variables) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Since the first section ignores constant definitions, an expression does not
    have a value if it contains a variable. Indeed, unless we know what x stands for,
    it makes no sense to evaluate ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  3  x).
    Hence, one first refinement of the evaluator is to add variables to the expressions
    that we wish to evaluate. The assumption is that the definitions area contains
    a definition such as
  id: totrans-873
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºç¬¬ä¸€éƒ¨åˆ†å¿½ç•¥äº†å¸¸é‡å®šä¹‰ï¼Œå¦‚æœè¡¨è¾¾å¼ä¸­åŒ…å«å˜é‡ï¼Œåˆ™è¯¥è¡¨è¾¾å¼æ²¡æœ‰å€¼ã€‚ç¡®å®ï¼Œé™¤éæˆ‘ä»¬çŸ¥é“ x ä»£è¡¨ä»€ä¹ˆï¼Œå¦åˆ™è¯„ä¼° ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    3  x) æ²¡æœ‰æ„ä¹‰ã€‚å› æ­¤ï¼Œè¯„ä¼°å™¨çš„ç¬¬ä¸€ä¸ªæ”¹è¿›æ˜¯å‘æˆ‘ä»¬è¦è¯„ä¼°çš„è¡¨è¾¾å¼ä¸­æ·»åŠ å˜é‡ã€‚å‡è®¾å®šä¹‰åŒºåŸŸåŒ…å«å¦‚ä¸‹å®šä¹‰
- en: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â xÂ 5)
  id: totrans-874
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â xÂ 5)
- en: 'and that programmers evaluate expressions containing x in the interactions
    area:'
  id: totrans-875
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¶ä¸”ç¨‹åºå‘˜åœ¨äº¤äº’åŒºåŸŸè¯„ä¼°åŒ…å« x çš„è¡¨è¾¾å¼ï¼š
- en: '| > x |'
  id: totrans-876
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > x |'
- en: '| 5 |'
  id: totrans-877
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 5 |'
- en: '| > ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 3)
    |'
  id: totrans-878
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 3)
    |'
- en: '| 8 |'
  id: totrans-879
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 8 |'
- en: '| > ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 1/2Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ 3))
    |'
  id: totrans-880
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 1/2Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ 3))
    |'
- en: '| 7.5 |'
  id: totrans-881
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 7.5 |'
- en: 'Indeed, you could imagine a second definition, say ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)  y  3),
    and interactions that involve two variables:'
  id: totrans-882
  prefs: []
  type: TYPE_NORMAL
  zh: äº‹å®ä¸Šï¼Œä½ å¯ä»¥æƒ³è±¡ä¸€ä¸ªç¬¬äºŒä¸ªå®šä¹‰ï¼Œæ¯”å¦‚è¯´ ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)  y  3)ï¼Œä»¥åŠæ¶‰åŠä¸¤ä¸ªå˜é‡çš„äº¤äº’ï¼š
- en: '|'
  id: totrans-883
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-884
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ x)
    &#124;'
  id: totrans-885
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ x)
    &#124;'
- en: '&#124; Â Â Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â yÂ y))
    &#124;'
  id: totrans-886
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â yÂ y))
    &#124;'
- en: ''
  id: totrans-887
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-888
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| 34 |'
  id: totrans-889
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 34 |'
- en: 'The preceding section implicitly proposes symbols as representations for variables.
    After all, if you were to choose quoted S-expressions to represent expressions
    with variables, symbols would appear naturally:'
  id: totrans-890
  prefs: []
  type: TYPE_NORMAL
  zh: å‰ä¸€èŠ‚éšå«åœ°æå‡ºå°†ç¬¦å·ä½œä¸ºå˜é‡çš„è¡¨ç¤ºã€‚æ¯•ç«Ÿï¼Œå¦‚æœä½ é€‰æ‹©å¼•ç”¨Sè¡¨è¾¾å¼æ¥è¡¨ç¤ºå¸¦æœ‰å˜é‡çš„è¡¨è¾¾å¼ï¼Œç¬¦å·å°±ä¼šè‡ªç„¶å‡ºç°ï¼š
- en: '| > ''x |'
  id: totrans-891
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ''x |'
- en: '| ''x |'
  id: totrans-892
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''x |'
- en: '| > ''(*Â 1/2Â (*Â xÂ 3)) |'
  id: totrans-893
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ''(*Â 1/2Â (*Â xÂ 3)) |'
- en: '| (list ''* 0.5 (list ''* ''x 3)) |'
  id: totrans-894
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list ''* 0.5 (list ''* ''x 3)) |'
- en: 'One obvious alternative is a string, so that "x" would represent x, but this
    book is not about designing interpreters, so we stick with symbols. From this
    decision, it follows how to modify the data definition from [exerciseÂ 345](#%28counter._%28exercise._ex~3absl-dd%29%29):'
  id: totrans-895
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªæ˜æ˜¾çš„æ›¿ä»£æ–¹æ¡ˆæ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ · "x" å°±ä»£è¡¨ xï¼Œä½†æœ¬ä¹¦ä¸æ˜¯å…³äºè®¾è®¡è§£é‡Šå™¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åšæŒä½¿ç”¨ç¬¦å·ã€‚ä»è¿™ä¸ªå†³å®šä¸­ï¼Œå¯ä»¥æ¨æ–­å‡ºå¦‚ä½•ä¿®æ”¹ä» [ç»ƒä¹ 345](#%28counter._%28exercise._ex~3absl-dd%29%29)
    çš„æ•°æ®å®šä¹‰ï¼š
- en: '| ;Â A BSL-var-expr is one of: |'
  id: totrans-896
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªBSL-å˜é‡è¡¨è¾¾å¼å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“  [Number](part_one.html#%28tech._number%29) |'
  id: totrans-897
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“ [æ•°å­—](part_one.html#%28tech._number%29) |'
- en: '| ;Â â€“  [Symbol](i2-3.html#%28tech._symbol%29) |'
  id: totrans-898
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“ [ç¬¦å·](i2-3.html#%28tech._symbol%29) |'
- en: '| ;Â â€“  (make-add  [BSL-var-expr](#%28tech._bsl._var._expr%29)  [BSL-var-expr](#%28tech._bsl._var._expr%29))
    |'
  id: totrans-899
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“ (make-add  [BSL-å˜é‡è¡¨è¾¾å¼](#%28tech._bsl._var._expr%29)  [BSL-å˜é‡è¡¨è¾¾å¼](#%28tech._bsl._var._expr%29))
    |'
- en: '| ;Â â€“  (make-mul  [BSL-var-expr](#%28tech._bsl._var._expr%29)  [BSL-var-expr](#%28tech._bsl._var._expr%29))
    |'
  id: totrans-900
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“ (make-mul  [BSL-å˜é‡è¡¨è¾¾å¼](#%28tech._bsl._var._expr%29)  [BSL-å˜é‡è¡¨è¾¾å¼](#%28tech._bsl._var._expr%29))
    |'
- en: 'We simply add one clause to the data definition.As for data examples, the following
    table shows some BSL expressions with variables and their [BSL-var-expr](#%28tech._bsl._var._expr%29)
    representation:'
  id: totrans-901
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬åªéœ€åœ¨æ•°æ®å®šä¹‰ä¸­æ·»åŠ ä¸€æ¡è§„åˆ™ã€‚è‡³äºæ•°æ®ç¤ºä¾‹ï¼Œä¸‹è¡¨å±•ç¤ºäº†å¸¦æœ‰å˜é‡çš„BSLè¡¨è¾¾å¼åŠå…¶ [BSL-å˜é‡è¡¨è¾¾å¼](#%28tech._bsl._var._expr%29)
    è¡¨ç¤ºï¼š
- en: '| BSL expression |  | representation of BSL expression |'
  id: totrans-902
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| BSLè¡¨è¾¾å¼ |  | BSLè¡¨è¾¾å¼çš„è¡¨ç¤º |'
- en: '| x |  | ''x |'
  id: totrans-903
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| x |  | ''x |'
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 3)
    |  | (make-addÂ ''xÂ 3) |'
  id: totrans-904
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 3)
    |  | (make-addÂ ''xÂ 3) |'
- en: '| ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 1/2Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ 3))
    |  | (make-mulÂ 1/2Â (make-mulÂ ''xÂ 3)) |'
  id: totrans-905
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 1/2Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ 3))
    |  | (make-mulÂ 1/2Â (make-mulÂ ''xÂ 3)) |'
- en: '|'
  id: totrans-906
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-907
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ x)
    &#124;'
  id: totrans-908
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    ''x ''x) &#124;'
- en: '&#124; Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â yÂ y))
    &#124;'
  id: totrans-909
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    y y)) &#124;'
- en: ''
  id: totrans-910
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-911
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-912
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (make-addÂ (make-mulÂ ''xÂ ''x) &#124;'
  id: totrans-913
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([make-add](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-add%29%29)
    ([make-mul](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-mul%29%29)
    ''x ''x) &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â Â (make-mulÂ ''yÂ ''y)) &#124;'
  id: totrans-914
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([make-mul](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-mul%29%29)
    ''y ''y)) &#124;'
- en: ''
  id: totrans-915
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-916
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: They are all taken from the interactions above, meaning you know the results
    when x is 5 and y 3.
  id: totrans-917
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä»¬éƒ½æ¥è‡ªä¸Šé¢çš„äº¤äº’ï¼Œè¿™æ„å‘³ç€ä½ çŸ¥é“å½“xæ˜¯5ä¸”yæ˜¯3æ—¶çš„ç»“æœã€‚
- en: One way to determine the value of variable expressions is to replace all variables
    with the values that they represent. This is the way you know from mathematics
    classes in school, and it is a perfectly fine way.
  id: totrans-918
  prefs: []
  type: TYPE_NORMAL
  zh: ç¡®å®šå˜é‡è¡¨è¾¾å¼å€¼çš„ä¸€ç§æ–¹æ³•æ˜¯å°†æ‰€æœ‰å˜é‡æ›¿æ¢ä¸ºå®ƒä»¬æ‰€ä»£è¡¨çš„å€¼ã€‚è¿™æ˜¯ä½ åœ¨å­¦æ ¡æ•°å­¦è¯¾ä¸Šæ‰€çŸ¥é“çš„æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œå…¨åˆé€‚çš„æ–¹æ³•ã€‚
- en: ExerciseÂ 352\. Design subst. The function consumes a [BSL-var-expr](#%28tech._bsl._var._expr%29)
    ex, a [Symbol](i2-3.html#%28tech._symbol%29) x, and a [Number](part_one.html#%28tech._number%29)
    v. It produces a [BSL-var-expr](#%28tech._bsl._var._expr%29) like ex with all
    occurrences of x replaced by v.
  id: totrans-919
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 352ã€‚è®¾è®¡å­å‡½æ•°ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ª[BSL-var-expr](#%28tech._bsl._var._expr%29)è¡¨è¾¾å¼ã€ä¸€ä¸ª[Symbol](i2-3.html#%28tech._symbol%29)
    xå’Œä¸€ä¸ª[Number](part_one.html#%28tech._number%29) vã€‚å®ƒäº§ç”Ÿä¸€ä¸ªåƒexä¸€æ ·çš„[BSL-var-expr](#%28tech._bsl._var._expr%29)ï¼Œå…¶ä¸­æ‰€æœ‰xçš„å‡ºç°éƒ½è¢«væ›¿æ¢ã€‚
- en: ExerciseÂ 353\. Design the numeric? function. It determines whether a [BSL-var-expr](#%28tech._bsl._var._expr%29)
    is also a [BSL-expr](#%28tech._bsl._expr%29). Here we assume that your solution
    to [exerciseÂ 345](#%28counter._%28exercise._ex~3absl-dd%29%29) is the definition
    for [BSL-var-expr](#%28tech._bsl._var._expr%29) without [Symbol](i2-3.html#%28tech._symbol%29)s.
  id: totrans-920
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 353ã€‚è®¾è®¡numeric?å‡½æ•°ã€‚å®ƒç¡®å®šä¸€ä¸ª[BSL-var-expr](#%28tech._bsl._var._expr%29)æ˜¯å¦ä¹Ÿæ˜¯ä¸€ä¸ª[BSL-expr](#%28tech._bsl._expr%29)ã€‚è¿™é‡Œæˆ‘ä»¬å‡è®¾ä½ å¯¹[ç»ƒä¹ 345](#%28counter._%28exercise._ex~3absl-dd%29%29)çš„è§£å†³æ–¹æ¡ˆæ˜¯[BSL-var-expr](#%28tech._bsl._var._expr%29)çš„å®šä¹‰ï¼Œæ²¡æœ‰[Symbol](i2-3.html#%28tech._symbol%29)sã€‚
- en: ExerciseÂ 354\. Design eval-variable. The checked function consumes a BSL-var-expr
    and determines its value if numeric? yields true for the input. Otherwise it signals
    an error.
  id: totrans-921
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 354ã€‚è®¾è®¡eval-variableã€‚æ£€æŸ¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªBSL-var-exprå¹¶ç¡®å®šå…¶å€¼ï¼Œå¦‚æœnumeric?å¯¹è¾“å…¥è¿”å›trueã€‚å¦åˆ™ï¼Œå®ƒå‘å‡ºé”™è¯¯ä¿¡å·ã€‚
- en: 'In general, a program defines many constants in the definitions area, and expressions
    contain more than one variable. To evaluate such expressions, we need a representation
    of the definitions area when it contains a series of constant definitions. For
    this exercise we use association lists:'
  id: totrans-922
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼Œä¸€ä¸ªç¨‹åºåœ¨å®šä¹‰åŒºåŸŸä¸­å®šä¹‰äº†è®¸å¤šå¸¸é‡ï¼Œè¡¨è¾¾å¼åŒ…å«å¤šä¸ªå˜é‡ã€‚ä¸ºäº†è¯„ä¼°è¿™æ ·çš„è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åŒ…å«ä¸€ç³»åˆ—å¸¸é‡å®šä¹‰æ—¶å®šä¹‰åŒºåŸŸçš„è¡¨ç¤ºã€‚å¯¹äºè¿™ä¸ªç»ƒä¹ ï¼Œæˆ‘ä»¬ä½¿ç”¨å…³è”åˆ—è¡¨ï¼š
- en: '| ;Â An AL (short for association list) is [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Association](#%28tech._association%29)].
    |'
  id: totrans-923
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ALï¼ˆå…³è”åˆ—è¡¨çš„ç®€ç§°ï¼‰æ˜¯[[List-of](part_three.html#%28tech._sim-dd._list._of%29) [Association](#%28tech._association%29)]]ã€‚|'
- en: '| ;Â An Association is a list of two items: |'
  id: totrans-924
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ä¸€ä¸ªå…³è”åˆ—è¡¨æ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼š|'
- en: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  ''())).
    |'
  id: totrans-925
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    [Symbol](i2-3.html#%28tech._symbol%29) ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    [Number](part_one.html#%28tech._number%29) ''()))) |'
- en: Make up elements of [AL](#%28tech._al%29).
  id: totrans-926
  prefs: []
  type: TYPE_NORMAL
  zh: æ„é€ [AL](#%28tech._al%29)çš„å…ƒç´ ã€‚
- en: Design eval-variable*. The function consumes a [BSL-var-expr](#%28tech._bsl._var._expr%29)
    ex and an association list da. Starting from ex, it iteratively applies subst
    to all associations in da. If numeric? holds for the result, it determines its
    value; otherwise it signals the same error as eval-variable. Hint Think of the
    given [BSL-var-expr](#%28tech._bsl._var._expr%29) as an atomic value and traverse
    the given association list instead. We provide this hint because the creation
    of this function requires a little design knowledge from [Simultaneous Processing](#%28part._ch~3asimu%29).
  id: totrans-927
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ eval-variable* å‡½æ•°ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ª [BSL-var-expr](#%28tech._bsl._var._expr%29) ex
    å’Œä¸€ä¸ªå…³è”åˆ—è¡¨ daã€‚ä» ex å¼€å§‹ï¼Œå®ƒè¿­ä»£åœ°å°† subst åº”ç”¨åˆ° da ä¸­çš„æ‰€æœ‰å…³è”ä¸­ã€‚å¦‚æœç»“æœä¸º numeric?ï¼Œåˆ™ç¡®å®šå…¶å€¼ï¼›å¦åˆ™ï¼Œå®ƒå‘å‡ºä¸ eval-variable
    ç›¸åŒçš„é”™è¯¯ä¿¡å·ã€‚æç¤ºï¼šå°†ç»™å®šçš„ [BSL-var-expr](#%28tech._bsl._var._expr%29) è§†ä¸ºä¸€ä¸ªåŸå­å€¼ï¼Œå¹¶éå†ç»™å®šçš„å…³è”åˆ—è¡¨ã€‚æˆ‘ä»¬æä¾›è¿™ä¸ªæç¤ºï¼Œå› ä¸ºåˆ›å»ºæ­¤å‡½æ•°éœ€è¦ä»
    [Simultaneous Processing](#%28part._ch~3asimu%29) ä¸­è·å¾—ä¸€ç‚¹è®¾è®¡çŸ¥è¯†ã€‚
- en: An environment model [ExerciseÂ 354](#%28counter._%28exercise._ex~3absl-var-eval%29%29)
    relies on the mathematical understanding of constant definitions. If a name is
    defined to stand for some value, all occurrences of the name can be replaced with
    the value. Substitution performs this replacement once and for all before the
    evaluation process even starts.
  id: totrans-928
  prefs: []
  type: TYPE_NORMAL
  zh: ç¯å¢ƒæ¨¡å‹ [ç»ƒä¹  354](#%28counter._%28exercise._ex~3absl-var-eval%29%29) ä¾èµ–äºå¯¹å¸¸é‡å®šä¹‰çš„æ•°å­¦ç†è§£ã€‚å¦‚æœä¸€ä¸ªåç§°è¢«å®šä¹‰ä¸ºä»£è¡¨æŸä¸ªå€¼ï¼Œé‚£ä¹ˆè¯¥åç§°çš„æ‰€æœ‰å‡ºç°éƒ½å¯ä»¥ç”¨è¯¥å€¼æ›¿æ¢ã€‚æ›¿æ¢åœ¨è¯„ä¼°è¿‡ç¨‹å¼€å§‹ä¹‹å‰ä¸€æ¬¡æ€§å®Œæˆè¿™ä¸ªæ›¿æ¢ã€‚
- en: An alternative approach, dubbed the environment model, is to look up the value
    of a variable when needed. The evaluator starts processing the expression immediately
    but also carries along the representation of the definitions area. Every time
    the evaluator encounters a variable, it looks in the definitions area for its
    value and uses it.
  id: totrans-929
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ç§æ›¿ä»£æ–¹æ³•ï¼Œè¢«ç§°ä¸ºç¯å¢ƒæ¨¡å‹ï¼Œæ˜¯åœ¨éœ€è¦æ—¶æŸ¥æ‰¾å˜é‡çš„å€¼ã€‚è¯„ä¼°å™¨ç«‹å³å¼€å§‹å¤„ç†è¡¨è¾¾å¼ï¼Œä½†åŒæ—¶ä¹Ÿæºå¸¦å®šä¹‰åŒºåŸŸçš„è¡¨ç¤ºã€‚æ¯æ¬¡è¯„ä¼°å™¨é‡åˆ°ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒéƒ½ä¼šåœ¨å®šä¹‰åŒºåŸŸä¸­æŸ¥æ‰¾å…¶å€¼å¹¶ä½¿ç”¨å®ƒã€‚
- en: 'ExerciseÂ 355\. Design eval-var-lookup. This function has the same signature
    as eval-variable*:'
  id: totrans-930
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  355ã€‚è®¾è®¡ eval-var-lookup å‡½æ•°ã€‚æ­¤å‡½æ•°ä¸ eval-variable* å…·æœ‰ç›¸åŒçš„ç­¾åï¼š
- en: '| ;Â [BSL-var-expr](#%28tech._bsl._var._expr%29)  [AL](#%28tech._al%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-931
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [BSL-var-expr](#%28tech._bsl._var._expr%29)  [AL](#%28tech._al%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (eval-var-lookupÂ [e](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._e%29%29)Â da)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-932
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (eval-var-lookupÂ [e](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._e%29%29)da)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: Instead of using substitution, the function traverses the expression in the
    manner that the design recipe for [BSL-var-expr](#%28tech._bsl._var._expr%29)
    suggests. As it descends the expression, it â€œcarries alongâ€ da. When it encounters
    a symbol x, it uses [assq](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._assq%29%29)
    to look up the value of x in the association list. If there is no value, eval-var-lookup
    signals an error.
  id: totrans-933
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥å‡½æ•°ä¸æ˜¯ä½¿ç”¨æ›¿æ¢ï¼Œè€Œæ˜¯æŒ‰ç…§ [BSL-var-expr](#%28tech._bsl._var._expr%29) çš„è®¾è®¡é£Ÿè°±éå†è¡¨è¾¾å¼ã€‚åœ¨éå†è¡¨è¾¾å¼æ—¶ï¼Œå®ƒâ€œæºå¸¦â€ç€
    daã€‚å½“å®ƒé‡åˆ°ç¬¦å· x æ—¶ï¼Œå®ƒä½¿ç”¨ [assq](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._assq%29%29)
    åœ¨å…³è”åˆ—è¡¨ä¸­æŸ¥æ‰¾ x çš„å€¼ã€‚å¦‚æœæ²¡æœ‰å€¼ï¼Œeval-var-lookup ä¼šå‘å‡ºé”™è¯¯ä¿¡å·ã€‚
- en: 21.3Interpreting Functions[ğŸ”—](#(part._sec~3ainterpreter-functions) "Link to
    here")
  id: totrans-934
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 21.3 è§£é‡Šå‡½æ•°[ğŸ”—](#(part._sec~3ainterpreter-functions) "é“¾æ¥åˆ°æ­¤å¤„")
- en: At this point, you understand how to evaluate BSL programs that consist of constant
    definitions and variable expressions. Naturally you want to add function definitions
    so that you knowâ€”<wbr>at least in principleâ€”<wbr>how to deal with all of BSL.
  id: totrans-935
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»äº†è§£äº†å¦‚ä½•è¯„ä¼°ç”±å¸¸é‡å®šä¹‰å’Œå˜é‡è¡¨è¾¾å¼ç»„æˆçš„BSLç¨‹åºã€‚è‡ªç„¶åœ°ï¼Œä½ æƒ³è¦æ·»åŠ å‡½æ•°å®šä¹‰ï¼Œè¿™æ ·ä½ è‡³å°‘åœ¨åŸåˆ™ä¸ŠçŸ¥é“å¦‚ä½•å¤„ç†æ‰€æœ‰çš„BSLã€‚
- en: The goal of this section is to refine the evaluator of [Interpreting Variables](#%28part._sec~3ainterpreter-variables%29)
    so that it can cope with functions. Since function definitions show up in the
    definitions area, another way to describe the refined evaluator is to say that
    it simulates DrRacket when the definitions area contains a number of function
    definitions and a programmer enters an expression in the interactions area that
    contains uses of these functions.
  id: totrans-936
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬èŠ‚çš„ç›®æ ‡æ˜¯æ”¹è¿› [è§£é‡Šå˜é‡](#%28part._sec~3ainterpreter-variables%29) çš„è¯„ä¼°å™¨ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†å‡½æ•°ã€‚ç”±äºå‡½æ•°å®šä¹‰å‡ºç°åœ¨å®šä¹‰åŒºåŸŸï¼Œå¦ä¸€ç§æè¿°æ”¹è¿›çš„è¯„ä¼°å™¨çš„æ–¹å¼æ˜¯è¯´ï¼Œå½“å®šä¹‰åŒºåŸŸåŒ…å«å¤šä¸ªå‡½æ•°å®šä¹‰æ—¶ï¼Œå®ƒæ¨¡æ‹Ÿ
    DrRacketï¼Œå½“ç¨‹åºå‘˜åœ¨äº¤äº’åŒºåŸŸè¾“å…¥åŒ…å«è¿™äº›å‡½æ•°ä½¿ç”¨çš„è¡¨è¾¾å¼æ—¶ã€‚
- en: For simplicity, letâ€™s assume that all functions in the definitions area consume
    one argument and that there is only one such definition. The necessary domain
    knowledge dates back to school where you learned that f(x) = e represents the
    definition of function f, that f(a) represents the application of f to a, and
    that to evaluate the latter, you substitute a for x in e. As it turns out, the
    evaluation of function applications in a language such as BSL works mostly like
    that, too.
  id: totrans-937
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ç®€å•èµ·è§ï¼Œè®©æˆ‘ä»¬å‡è®¾å®šä¹‰åŒºåŸŸä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½æ¶ˆè€—ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªè¿™æ ·çš„å®šä¹‰ã€‚å¿…è¦çš„é¢†åŸŸçŸ¥è¯†å¯ä»¥è¿½æº¯åˆ°ä½ åœ¨å­¦æ ¡å­¦ä¹ æ—¶ï¼Œä½ äº†è§£åˆ° f(x) = e
    ä»£è¡¨å‡½æ•° f çš„å®šä¹‰ï¼Œf(a) ä»£è¡¨å°† f åº”ç”¨åˆ° a ä¸Šï¼Œå¹¶ä¸”ä¸ºäº†è¯„ä¼°åè€…ï¼Œä½ å°† a æ›¿æ¢ä¸º e ä¸­çš„ xã€‚å®é™…ä¸Šï¼Œåœ¨ BSL è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå‡½æ•°åº”ç”¨çš„è¯„ä¼°ä¹Ÿå¤§è‡´å¦‚æ­¤ã€‚
- en: Before tackling the following exercises, you may wish to refresh your knowledge
    of the terminology concerning functions as presented in intermezzo 1\. Most of
    the time, algebra courses gloss over this aspect of mathematics, but a precise
    use and understanding of terminology is needed when you wish to solve these problems.
  id: totrans-938
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è§£å†³ä»¥ä¸‹ç»ƒä¹ ä¹‹å‰ï¼Œä½ å¯èƒ½å¸Œæœ›å¤ä¹ ä¸€ä¸‹ç¬¬ 1 éƒ¨åˆ†ä¸­å…³äºå‡½æ•°çš„æœ¯è¯­ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œä»£æ•°è¯¾ç¨‹ä¼šå¿½ç•¥æ•°å­¦çš„è¿™ä¸€æ–¹é¢ï¼Œä½†å½“ä½ å¸Œæœ›è§£å†³è¿™äº›é—®é¢˜æ—¶ï¼Œç²¾ç¡®çš„æœ¯è¯­ä½¿ç”¨å’Œç†è§£æ˜¯å¿…è¦çš„ã€‚
- en: 'ExerciseÂ 356\. Extend the data representation of [Interpreting Variables](#%28part._sec~3ainterpreter-variables%29)
    to include the application of a programmer-defined function. Recall that a function
    application consists of two pieces: a name and an expression. The former is the
    name of the function that is applied; the latter is the argument.'
  id: totrans-939
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  356ã€‚æ‰©å±• [è§£é‡Šå˜é‡](#%28part._sec~3ainterpreter-variables%29) çš„æ•°æ®è¡¨ç¤ºï¼Œä»¥åŒ…æ‹¬ç¨‹åºå‘˜å®šä¹‰çš„å‡½æ•°çš„åº”ç”¨ã€‚å›æƒ³ä¸€ä¸‹ï¼Œå‡½æ•°åº”ç”¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ªåç§°å’Œä¸€ä¸ªè¡¨è¾¾å¼ã€‚å‰è€…æ˜¯åº”ç”¨åˆ°çš„å‡½æ•°çš„åç§°ï¼›åè€…æ˜¯å‚æ•°ã€‚
- en: 'Represent these expressions: (k  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  1  1)),
    ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  5  (k  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  1  1))),
    ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  (i  5)  (k  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  1  1))).
    We refer to this newly defined class of data as BSL-fun-expr.'
  id: totrans-940
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨ç¤ºä»¥ä¸‹è¡¨è¾¾å¼ï¼šï¼ˆk  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  1  1))ï¼Œ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  5  (k  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  1  1)))ï¼Œ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  (i  5)  (k  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  1  1)))ã€‚æˆ‘ä»¬å°†è¿™ä¸ªæ–°å®šä¹‰çš„æ•°æ®ç±»åˆ«ç§°ä¸º
    BSL-fun-exprã€‚
- en: 'ExerciseÂ 357\. Design eval-definition1. The function consumes four arguments:'
  id: totrans-941
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  357ã€‚è®¾è®¡ eval-definition1ã€‚è¯¥å‡½æ•°æ¥å—å››ä¸ªå‚æ•°ï¼š
- en: a [BSL-fun-expr](#%28tech._bsl._fun._expr%29) ex;
  id: totrans-942
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ª [BSL-fun-expr](#%28tech._bsl._fun._expr%29) exï¼›
- en: a symbol f, which represents a function name;
  id: totrans-943
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªç¬¦å· fï¼Œå®ƒä»£è¡¨ä¸€ä¸ªå‡½æ•°åï¼›
- en: a symbol x, which represents the functionsâ€™ parameter; and
  id: totrans-944
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªç¬¦å· xï¼Œå®ƒä»£è¡¨å‡½æ•°çš„å‚æ•°ï¼›ä»¥åŠ
- en: a [BSL-fun-expr](#%28tech._bsl._fun._expr%29) b, which represents the functionâ€™s
    body.
  id: totrans-945
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ª [BSL-fun-expr](#%28tech._bsl._fun._expr%29) bï¼Œå®ƒä»£è¡¨å‡½æ•°çš„ä¸»ä½“ã€‚
- en: It determines the value of ex. When eval-definition1 encounters an application
    of f to some argument, it
  id: totrans-946
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒç¡®å®šexçš„å€¼ã€‚å½“eval-definition1é‡åˆ°å¯¹fçš„æŸä¸ªå‚æ•°çš„åº”ç”¨æ—¶ï¼Œ
- en: evaluates the argument,
  id: totrans-947
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è¯„ä¼°å‚æ•°ï¼Œ
- en: substitutes the value of the argument for x in b; and
  id: totrans-948
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å°†å‚æ•°çš„å€¼æ›¿æ¢ä¸ºbä¸­çš„xï¼›
- en: finally evaluates the resulting expression with eval-definition1.
  id: totrans-949
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æœ€åä½¿ç”¨eval-definition1è¯„ä¼°ç»“æœè¡¨è¾¾å¼ã€‚
- en: 'Here is how to express the steps as code, assuming arg is the argument of the
    function application:'
  id: totrans-950
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯å¦‚ä½•å°†æ­¥éª¤è¡¨ç¤ºä¸ºä»£ç çš„ç¤ºä¾‹ï¼Œå‡è®¾argæ˜¯å‡½æ•°åº”ç”¨çš„å‚æ•°ï¼š
- en: '| ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â valueÂ (eval-definition1Â argÂ fÂ xÂ b))
    |'
  id: totrans-951
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    value (è¯„ä¼°å®šä¹‰1 arg f x b))) |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â plugdÂ (substÂ bÂ xÂ value)))
    |'
  id: totrans-952
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    plugd (æ›¿æ¢ b x value))) |'
- en: '| Â Â (eval-definition1Â plugdÂ fÂ xÂ b)) |'
  id: totrans-953
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (è¯„ä¼°å®šä¹‰1 plugd f x b)) |'
- en: Notice that this line uses a form of recursion that has not been covered. The
    proper design of such functions is discussed in [Generative Recursion](part_five.html).
  id: totrans-954
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„åˆ°è¿™ä¸€è¡Œä½¿ç”¨äº†å°šæœªä»‹ç»è¿‡çš„é€’å½’å½¢å¼ã€‚æ­¤ç±»å‡½æ•°çš„é€‚å½“è®¾è®¡åœ¨[ç”Ÿæˆé€’å½’](part_five.html)ä¸­è®¨è®ºã€‚
- en: If eval-definition1 encounters a variable, it signals the same error as eval-variable
    from [exerciseÂ 354](#%28counter._%28exercise._ex~3absl-var-eval%29%29). It also
    signals an error for function applications that refer to a function name other
    than f.
  id: totrans-955
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœeval-definition1é‡åˆ°å˜é‡ï¼Œå®ƒå°†å‘å‡ºä¸[ç»ƒä¹ 354](#%28counter._%28exercise._ex~3absl-var-eval%29%29)ä¸­çš„eval-variableç›¸åŒçš„é”™è¯¯ã€‚å®ƒè¿˜ä¼šå¯¹å¼•ç”¨é™¤fä¹‹å¤–çš„å…¶ä»–å‡½æ•°åçš„å‡½æ•°åº”ç”¨å‘å‡ºé”™è¯¯ã€‚
- en: 'Warning The use of this uncovered form of recursion introduces a new element
    into your computations: non-termination. That is, a program may run forever instead
    of delivering a result or signaling an error. If you followed the design recipes
    of the first four parts, you cannot write down such programs. For fun, construct
    an input for eval-definition1 that causes it to run forever. Use STOP to terminate
    the program.'
  id: totrans-956
  prefs: []
  type: TYPE_NORMAL
  zh: è­¦å‘Šï¼šä½¿ç”¨è¿™ç§æœªå‘ç°çš„é€’å½’å½¢å¼å°†å¼•å…¥ä½ çš„è®¡ç®—ä¸­çš„ä¸€ä¸ªæ–°å…ƒç´ ï¼šéç»ˆæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¨‹åºå¯èƒ½æ°¸è¿œè¿è¡Œè€Œä¸æ˜¯æä¾›ç»“æœæˆ–å‘å‡ºé”™è¯¯ã€‚å¦‚æœä½ éµå¾ªäº†å‰å››éƒ¨åˆ†çš„è®¾è®¡é£Ÿè°±ï¼Œä½ ä¸èƒ½ç¼–å†™è¿™æ ·çš„ç¨‹åºã€‚ä¸ºäº†å¥½ç©ï¼Œæ„é€ ä¸€ä¸ªè¾“å…¥ï¼Œä½¿eval-definition1æ— é™æœŸè¿è¡Œã€‚ä½¿ç”¨STOPæ¥ç»ˆæ­¢ç¨‹åºã€‚
- en: For an evaluator that mimics the interactions area, we need a representation
    of the definitions area. We assume that it is a list of definitions.
  id: totrans-957
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºæ¨¡æ‹Ÿäº¤äº’åŒºåŸŸçš„è¯„ä¼°å™¨ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰åŒºåŸŸçš„ä¸€ä¸ªè¡¨ç¤ºã€‚æˆ‘ä»¬å‡è®¾å®ƒæ˜¯ä¸€ä¸ªå®šä¹‰åˆ—è¡¨ã€‚
- en: 'ExerciseÂ 358\. Provide a structure type and a data definition for function
    definitions. Recall that such a definition has three essential attributes:'
  id: totrans-958
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 358ã€‚æä¾›ä¸€ä¸ªç»“æ„ç±»å‹å’Œæ•°æ®å®šä¹‰ç”¨äºå‡½æ•°å®šä¹‰ã€‚å›æƒ³ä¸€ä¸‹ï¼Œæ­¤ç±»å®šä¹‰æœ‰ä¸‰ä¸ªåŸºæœ¬å±æ€§ï¼š
- en: the functionâ€™s name, which is represented with a symbol;
  id: totrans-959
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å‡½æ•°çš„åç§°ï¼Œå®ƒç”¨ç¬¦å·è¡¨ç¤ºï¼›
- en: the functionâ€™s parameter, which is also a name; and
  id: totrans-960
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å‡½æ•°çš„å‚æ•°ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªåç§°ï¼›å¹¶ä¸”
- en: the functionâ€™s body, which is a variable expression.
  id: totrans-961
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å‡½æ•°çš„ä¸»ä½“ï¼Œå®ƒæ˜¯ä¸€ä¸ªå˜é‡è¡¨è¾¾å¼ã€‚
- en: 'We use BSL-fun-def to refer to this class of data.Use your data definition
    to represent these BSL function definitions:'
  id: totrans-962
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½¿ç”¨BSL-fun-defæ¥æŒ‡ä»£æ­¤ç±»æ•°æ®ã€‚ä½¿ç”¨ä½ çš„æ•°æ®å®šä¹‰æ¥è¡¨ç¤ºè¿™äº›BSLå‡½æ•°å®šä¹‰ï¼š
- en: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)  (f  x)  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  3  x))
  id: totrans-963
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (f x) ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    3 x))
- en: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)  (g  y)  (f  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  2  y)))
  id: totrans-964
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (g y) (f ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    2 y)))
- en: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)  (h  v)  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  (f  v)  (g  v)))
  id: totrans-965
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)  (h  v)  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  (f  v)  (g  v)))
- en: Next, define the class BSL-fun-def* to represent a definitions area that consists
    of a number of one-argument function definitions. Translate the definitions area
    that defines f, g, and h into your data representation and name it da-fgh.
  id: totrans-966
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œå®šä¹‰ç±»BSL-fun-def*æ¥è¡¨ç¤ºç”±å¤šä¸ªå•å‚æ•°å‡½æ•°å®šä¹‰ç»„æˆçš„å®šä¹‰åŒºåŸŸã€‚å°†å®šä¹‰fã€gå’Œhçš„å®šä¹‰åŒºåŸŸè½¬æ¢ä¸ºä½ çš„æ•°æ®è¡¨ç¤ºï¼Œå¹¶å‘½åä¸ºda-fghã€‚
- en: 'Finally, work on the following wish:'
  id: totrans-967
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œç€æ‰‹ä»¥ä¸‹æ„¿æœ›ï¼š
- en: '| ;Â [BSL-fun-def*](#%28tech._bsl._fun._def%2A%29)  [Symbol](i2-3.html#%28tech._symbol%29)
    -> [BSL-fun-def](#%28tech._bsl._fun._def%29) |'
  id: totrans-968
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [BSL-fun-def*](#%28tech._bsl._fun._def%2A%29)  [Symbol](i2-3.html#%28tech._symbol%29)
    -> [BSL-fun-def](#%28tech._bsl._fun._def%29) |'
- en: '| ;Â retrieves the definition of f in da |'
  id: totrans-969
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨daä¸­æ£€ç´¢fçš„å®šä¹‰ |'
- en: '| ;Â signals an error if there is none |'
  id: totrans-970
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœæ²¡æœ‰å®šä¹‰ï¼Œåˆ™å‘å‡ºé”™è¯¯ä¿¡å· |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (lookup-defÂ da-fghÂ ''g)Â g)
    |'
  id: totrans-971
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (lookup-defÂ da-fghÂ ''g)Â g)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (lookup-defÂ daÂ f)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-972
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (lookup-defÂ daÂ f)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: Looking up a definition is needed for the evaluation of applications.
  id: totrans-973
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¯„ä¼°åº”ç”¨æ—¶éœ€è¦æŸ¥æ‰¾å®šä¹‰ã€‚
- en: ExerciseÂ 359\. Design eval-function*. The function consumes ex, a [BSL-fun-expr](#%28tech._bsl._fun._expr%29),
    and da, a [BSL-fun-def*](#%28tech._bsl._fun._def%2A%29) representation of a definitions
    area. It produces the result that DrRacket shows if you evaluate ex in the interactions
    area, assuming the definitions area contains da.
  id: totrans-974
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 359ã€‚è®¾è®¡eval-function*å‡½æ•°ã€‚è¯¥å‡½æ•°æ¶ˆè€—exï¼Œä¸€ä¸ª[BSL-fun-expr](#%28tech._bsl._fun._expr%29)è¡¨è¾¾å¼ï¼Œä»¥åŠdaï¼Œä¸€ä¸ªè¡¨ç¤ºå®šä¹‰åŒºåŸŸçš„[BSL-fun-def*](#%28tech._bsl._fun._def%2A%29)è¡¨ç¤ºã€‚å¦‚æœå®šä¹‰åŒºåŸŸåŒ…å«daï¼Œå®ƒå°†äº§ç”ŸDrRacketåœ¨äº¤äº’åŒºåŸŸä¸­è¯„ä¼°exæ—¶æ˜¾ç¤ºçš„ç»“æœã€‚
- en: The function works like eval-definition1 from [exerciseÂ 357](#%28counter._%28exercise._ex~3absl-eval-def1%29%29).
    For an application of some function f, it
  id: totrans-975
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥å‡½æ•°çš„å·¥ä½œæ–¹å¼ç±»ä¼¼äº[ç»ƒä¹ 357](#%28counter._%28exercise._ex~3absl-eval-def1%29%29)ä¸­çš„eval-definition1ã€‚å¯¹äºæŸä¸ªå‡½æ•°fçš„åº”ç”¨ï¼Œå®ƒ
- en: evaluates the argument;
  id: totrans-976
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è¯„ä¼°å‚æ•°ï¼›
- en: looks up the definition of f in the [BSL-fun-def](#%28tech._bsl._fun._def%29)
    representation of da, which comes with a parameter and a body;
  id: totrans-977
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨daçš„[BSL-fun-def](#%28tech._bsl._fun._def%29)è¡¨ç¤ºä¸­æŸ¥æ‰¾fçš„å®šä¹‰ï¼Œè¯¥è¡¨ç¤ºåŒ…å«å‚æ•°å’Œä¸»ä½“ï¼›
- en: substitutes the value of the argument for the function parameter in the functionâ€™s
    body; and
  id: totrans-978
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å°†å‚æ•°çš„å€¼æ›¿æ¢ä¸ºå‡½æ•°ä¸»ä½“ä¸­çš„å‡½æ•°å‚æ•°ï¼›ç„¶å
- en: evaluates the new expression via recursion.
  id: totrans-979
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: é€šè¿‡é€’å½’è¯„ä¼°æ–°çš„è¡¨è¾¾å¼ã€‚
- en: Like DrRacket, eval-function* signals an error when it encounters a variable
    or function name without definition in the definitions area.
  id: totrans-980
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸DrRacketç±»ä¼¼ï¼Œå½“eval-function*é‡åˆ°å®šä¹‰åŒºåŸŸä¸­æœªå®šä¹‰çš„å˜é‡æˆ–å‡½æ•°åæ—¶ï¼Œä¼šå‘å‡ºé”™è¯¯ä¿¡å·ã€‚
- en: 21.4Interpreting Everything[ğŸ”—](#(part._sec~3ainterpreter-all) "Link to here")
  id: totrans-981
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 21.4 è§£é‡Šæ‰€æœ‰å†…å®¹[ğŸ”—](#(part._sec~3ainterpreter-all) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Take a look at the following BSL program:'
  id: totrans-982
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹ä»¥ä¸‹BSLç¨‹åºï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â close-to-piÂ 3.14)
    |'
  id: totrans-983
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â close-to-piÂ 3.14)
    |'
- en: '| Â  |'
  id: totrans-984
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (area-of-circleÂ r)
    |'
  id: totrans-985
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (area-of-circleÂ r)
    |'
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â close-to-piÂ ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â rÂ r)))
    |'
  id: totrans-986
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â close-to-piÂ ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â rÂ r)))
    |'
- en: '| Â  |'
  id: totrans-987
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (volume-of-10-cylinderÂ r)
    |'
  id: totrans-988
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (volume-of-10-cylinderÂ r)
    |'
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 10Â (area-of-circleÂ r)))
    |'
  id: totrans-989
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 10Â (area-of-circleÂ r)))
    |'
- en: 'Think of these definitions as the definitions area in DrRacket. After you click
    RUN, you can evaluate expressions involving close-to-pi, area-of-circle, and volume-of-10-cylinder
    in the interactions area:'
  id: totrans-990
  prefs: []
  type: TYPE_NORMAL
  zh: å°†è¿™äº›å®šä¹‰è§†ä¸º DrRacket ä¸­çš„å®šä¹‰åŒºåŸŸã€‚åœ¨ç‚¹å‡» RUN åï¼Œä½ å¯ä»¥åœ¨äº¤äº’åŒºåŸŸè¯„ä¼°æ¶‰åŠ close-to-piã€area-of-circle å’Œ
    volume-of-10-cylinder çš„è¡¨è¾¾å¼ï¼š
- en: '| > (area-of-circleÂ 1) |'
  id: totrans-991
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (area-of-circleÂ 1) |'
- en: '| #i3.14 |'
  id: totrans-992
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #i3.14 |'
- en: '| > (volume-of-10-cylinderÂ 1) |'
  id: totrans-993
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (volume-of-10-cylinderÂ 1) |'
- en: '| #i31.400000000000002 |'
  id: totrans-994
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #i31.400000000000002 |'
- en: '| > ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â close-to-pi)
    |'
  id: totrans-995
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â close-to-pi)
    |'
- en: '| #i9.42 |'
  id: totrans-996
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #i9.42 |'
- en: The goal of this section is to refine your evaluator again so that it can mimic
    this much of DrRacket.
  id: totrans-997
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬èŠ‚çš„ç›®æ ‡æ˜¯å†æ¬¡æ”¹è¿›ä½ çš„è¯„ä¼°å™¨ï¼Œä½¿å…¶èƒ½å¤Ÿæ¨¡ä»¿ DrRacket çš„è¿™ä¸€éƒ¨åˆ†ã€‚
- en: ExerciseÂ 360\. Formulate a data definition for the representation of DrRacketâ€™s
    definitions area. Concretely, the data representation should work for a sequence
    that freely mixes constant definitions and one-argument function definitions.
    Make sure you can represent the definitions area consisting of three definitions
    at the beginning of this section. We name this class of data BSL-da-all.
  id: totrans-998
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  360ã€‚ä¸º DrRacket çš„å®šä¹‰åŒºåŸŸè¡¨ç¤ºå½¢å¼åˆ¶å®šæ•°æ®å®šä¹‰ã€‚å…·ä½“æ¥è¯´ï¼Œæ•°æ®è¡¨ç¤ºåº”è¯¥é€‚ç”¨äºè‡ªç”±æ··åˆå¸¸é‡å®šä¹‰å’Œå•å‚æ•°å‡½æ•°å®šä¹‰çš„åºåˆ—ã€‚ç¡®ä¿ä½ å¯ä»¥è¡¨ç¤ºæœ¬èŠ‚å¼€å¤´åŒ…å«ä¸‰ä¸ªå®šä¹‰çš„å®šä¹‰åŒºåŸŸã€‚æˆ‘ä»¬ç§°æ­¤ç±»æ•°æ®ä¸º
    BSL-da-allã€‚
- en: Design the function lookup-con-def. It consumes a [BSL-da-all](#%28tech._bsl._da._all%29)
    da and a symbol x. It produces the representation of a constant definition whose
    name is x, if such a piece of data exists in da; otherwise the function signals
    an error saying that no such constant definition can be found.
  id: totrans-999
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ lookup-con-def å‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ª [BSL-da-all](#%28tech._bsl._da._all%29) da å’Œä¸€ä¸ªç¬¦å·
    xã€‚å¦‚æœ da ä¸­å­˜åœ¨åä¸º x çš„å¸¸é‡å®šä¹‰ï¼Œåˆ™è¯¥å‡½æ•°äº§ç”Ÿè¯¥å¸¸é‡å®šä¹‰çš„è¡¨ç¤ºï¼›å¦åˆ™ï¼Œå‡½æ•°ä¼šå‘å‡ºé”™è¯¯ä¿¡å·ï¼Œè¡¨ç¤ºæ‰¾ä¸åˆ°æ­¤ç±»å¸¸é‡å®šä¹‰ã€‚
- en: Design the function lookup-fun-def. It consumes a [BSL-da-all](#%28tech._bsl._da._all%29)
    da and a symbol f. It produces the representation of a function definition whose
    name is f, if such a piece of data exists in da; otherwise the function signals
    an error saying that no such function definition can be found.
  id: totrans-1000
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ lookup-fun-def å‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ª [BSL-da-all](#%28tech._bsl._da._all%29) da å’Œä¸€ä¸ªç¬¦å·
    fã€‚å¦‚æœ da ä¸­å­˜åœ¨åä¸º f çš„å‡½æ•°å®šä¹‰ï¼Œåˆ™è¯¥å‡½æ•°äº§ç”Ÿè¯¥å‡½æ•°å®šä¹‰çš„è¡¨ç¤ºï¼›å¦åˆ™ï¼Œå‡½æ•°ä¼šå‘å‡ºé”™è¯¯ä¿¡å·ï¼Œè¡¨ç¤ºæ‰¾ä¸åˆ°æ­¤ç±»å‡½æ•°å®šä¹‰ã€‚
- en: ExerciseÂ 361\. Design eval-all. Like eval-function* from [exerciseÂ 359](#%28counter._%28exercise._ex~3absl-eval-def%29%29),
    this function consumes the representation of an expression and a definitions area.
    It produces the same value that DrRacket shows if the expression is entered at
    the prompt in the interactions area and the definitions area contains the appropriate
    definitions. Hint Your eval-all function should process variables in the given
    expression like eval-var-lookup in [exerciseÂ 355](#%28counter._%28exercise._ex~3absl-var-eval2%29%29).
  id: totrans-1001
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  361ã€‚è®¾è®¡ eval-all å‡½æ•°ã€‚ç±»ä¼¼äºç»ƒä¹  359 ä¸­çš„ eval-function*ï¼Œè¿™ä¸ªå‡½æ•°æ¶ˆè€—ä¸€ä¸ªè¡¨è¾¾å¼çš„è¡¨ç¤ºå’Œå®šä¹‰åŒºåŸŸã€‚å¦‚æœè¡¨è¾¾å¼åœ¨äº¤äº’åŒºåŸŸçš„æç¤ºç¬¦ä¸­è¾“å…¥ï¼Œå¹¶ä¸”å®šä¹‰åŒºåŸŸåŒ…å«é€‚å½“çš„å®šä¹‰ï¼Œå®ƒå°†äº§ç”Ÿ
    DrRacket æ˜¾ç¤ºçš„ç›¸åŒå€¼ã€‚æç¤ºï¼šä½ çš„ eval-all å‡½æ•°åº”è¯¥åƒç»ƒä¹  355 ä¸­çš„ eval-var-lookup ä¸€æ ·å¤„ç†ç»™å®šè¡¨è¾¾å¼ä¸­çš„å˜é‡ã€‚
- en: ExerciseÂ 362\. It is cumbersome to enter the structure-based data representation
    of BSL expressions and a definitions area. As the end of [Interpreting Expressions](#%28part._sec~3ainterpreter%29)
    demonstrates, it is much easier to quote expressions and (lists of) definitions.
  id: totrans-1002
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  362ã€‚è¾“å…¥åŸºäºç»“æ„çš„ BSL è¡¨è¾¾å¼å’Œå®šä¹‰åŒºåŸŸå¾ˆéº»çƒ¦ã€‚æ­£å¦‚[è§£é‡Šè¡¨è¾¾å¼](#%28part._sec~3ainterpreter%29)çš„ç»“å°¾æ‰€å±•ç¤ºçš„ï¼Œå¼•ç”¨è¡¨è¾¾å¼å’Œï¼ˆå®šä¹‰çš„ï¼‰åˆ—è¡¨è¦å®¹æ˜“å¾—å¤šã€‚
- en: Design a function interpreter. It consumes an S-expr and an Sl. The former is
    supposed to represent an expression and the latter a list of definitions. The
    function parses both with the appropriate parsing functions and then uses eval-all
    from [exerciseÂ 361](#%28counter._%28exercise._ex~3absl-eval-all%29%29) to evaluate
    the expression. Hint You must adapt the ideas of [exerciseÂ 350](#%28counter._%28exercise._ex~3absl-parse2%29%29)
    to create a parser for definitions and lists of definitions.
  id: totrans-1003
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªå‡½æ•°è§£é‡Šå™¨ã€‚å®ƒæ¥å—ä¸€ä¸ª S-expr å’Œä¸€ä¸ª Slã€‚å‰è€…åº”è¯¥è¡¨ç¤ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåè€…æ˜¯ä¸€ä¸ªå®šä¹‰åˆ—è¡¨ã€‚è¯¥å‡½æ•°ä½¿ç”¨é€‚å½“çš„è§£æå‡½æ•°è§£æè¿™ä¸¤ä¸ªï¼Œç„¶åä½¿ç”¨æ¥è‡ª[ç»ƒä¹ 
    361](#%28counter._%28exercise._ex~3absl-eval-all%29%29)çš„ eval-all æ¥è¯„ä¼°è¡¨è¾¾å¼ã€‚æç¤ºï¼šä½ å¿…é¡»å°†[ç»ƒä¹ 
    350](#%28counter._%28exercise._ex~3absl-parse2%29%29)ä¸­çš„æƒ³æ³•æ”¹ç¼–æˆå®šä¹‰å’Œå®šä¹‰åˆ—è¡¨çš„è§£æå™¨ã€‚
- en: 'At this point, you know a lot about interpreting BSL. Here are some of the
    missing pieces: [Boolean](part_one.html#%28tech._boolean%29)s with [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    or [if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29);
    [String](part_one.html#%28tech._string%29)s and such operations as [string-length](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-length%29%29)
    or [string-append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-append%29%29);
    and lists with ''(), [empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29),
    [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29),
    [cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29),
    [first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29),
    [rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29);
    and so on. Once your evaluator can cope with all these, it is basically complete
    because your evaluators already know how to interpret recursive functions. Now
    when we say â€œtrust us, you know how to design these refinements,â€ we mean it.'
  id: totrans-1004
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å¯¹è§£é‡Š BSLï¼ˆå¸ƒå°”ç¬¦å·è¯­è¨€ï¼‰æœ‰äº†å¾ˆå¤šäº†è§£ã€‚è¿™é‡Œæœ‰ä¸€äº›ç¼ºå¤±çš„éƒ¨åˆ†ï¼š[å¸ƒå°”](part_one.html#%28tech._boolean%29)ä¸[æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)æˆ–[if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)ç»“åˆï¼›[å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)ä»¥åŠè¯¸å¦‚[string-length](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-length%29%29)æˆ–[string-append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-append%29%29)è¿™æ ·çš„æ“ä½œï¼›ä»¥åŠä½¿ç”¨'()ã€[empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)ã€[cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)ã€[cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)ã€[first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)ã€[rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)ç­‰æ“ä½œçš„åˆ—è¡¨ï¼›ç­‰ç­‰ã€‚ä¸€æ—¦ä½ çš„è¯„ä¼°å™¨èƒ½å¤Ÿå¤„ç†æ‰€æœ‰è¿™äº›ï¼ŒåŸºæœ¬ä¸Šå°±å®Œæˆäº†ï¼Œå› ä¸ºä½ çš„è¯„ä¼°å™¨å·²ç»çŸ¥é“å¦‚ä½•è§£é‡Šé€’å½’å‡½æ•°ã€‚ç°åœ¨å½“æˆ‘ä»¬è¯´â€œç›¸ä¿¡æˆ‘ä»¬ï¼Œä½ çŸ¥é“å¦‚ä½•è®¾è®¡è¿™äº›æ”¹è¿›â€æ—¶ï¼Œæˆ‘ä»¬æ˜¯è®¤çœŸçš„ã€‚
- en: '22Project: The Commerce of XML[ğŸ”—](#(part._ch~3amoney-sexp) "Link to here")'
  id: totrans-1005
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 22é¡¹ç›®ï¼šXMLçš„å•†ä¸š[ğŸ”—](#(part._ch~3amoney-sexp) "é“¾æ¥åˆ°æ­¤å¤„")
- en: XML is a widely used data language. One use concerns message exchanges between
    programs running on different computers. For example, when you point your web
    browser at a web site, you are connecting a program on your computer to a program
    on another computer, and the latter sends XML data to the former. Once the browser
    receives the XML data, it renders it as an image on your computerâ€™s monitor.
  id: totrans-1006
  prefs: []
  type: TYPE_NORMAL
  zh: XMLæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„æ•°æ®è¯­è¨€ã€‚ä¸€ç§ç”¨é€”æ¶‰åŠåœ¨ä¸åŒè®¡ç®—æœºä¸Šè¿è¡Œçš„ç¨‹åºä¹‹é—´çš„æ¶ˆæ¯äº¤æ¢ã€‚ä¾‹å¦‚ï¼Œå½“ä½ ç”¨ç½‘ç»œæµè§ˆå™¨æŒ‡å‘ä¸€ä¸ªç½‘ç«™æ—¶ï¼Œä½ æ˜¯åœ¨å°†ä½ ç”µè„‘ä¸Šçš„ä¸€ä¸ªç¨‹åºè¿æ¥åˆ°å¦ä¸€å°ç”µè„‘ä¸Šçš„ä¸€ä¸ªç¨‹åºï¼Œåè€…å°†XMLæ•°æ®å‘é€åˆ°å‰è€…ã€‚ä¸€æ—¦æµè§ˆå™¨æ¥æ”¶åˆ°XMLæ•°æ®ï¼Œå®ƒå°±ä¼šåœ¨ä½ çš„ç”µè„‘æ˜¾ç¤ºå™¨ä¸Šå°†å…¶æ¸²æŸ“ä¸ºå›¾åƒã€‚
- en: 'The following comparison illustrates this idea with a concrete example:'
  id: totrans-1007
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ¯”è¾ƒé€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä¾‹å­è¯´æ˜äº†è¿™ä¸ªæƒ³æ³•ï¼š
- en: '| XML data |  | rendered in a browser |'
  id: totrans-1008
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| XMLæ•°æ® |  | åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“ |'
- en: '|'
  id: totrans-1009
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1010
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; <ul> &#124;'
  id: totrans-1011
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; <ul> &#124;'
- en: '&#124; Â <li> hello </li> &#124;'
  id: totrans-1012
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â <li> hello </li> &#124;'
- en: '&#124; Â <li> <ul> &#124;'
  id: totrans-1013
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â <li> <ul> &#124;'
- en: '&#124; Â Â Â Â Â <li> one </li> &#124;'
  id: totrans-1014
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â Â <li> one </li> &#124;'
- en: '&#124; Â Â Â Â Â <li> two </li> &#124;'
  id: totrans-1015
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â Â <li> two </li> &#124;'
- en: '&#124; Â Â Â Â </ul> &#124;'
  id: totrans-1016
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â </ul> &#124;'
- en: '&#124; Â </li> &#124;'
  id: totrans-1017
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â </li> &#124;'
- en: '&#124; Â <li> world </li> &#124;'
  id: totrans-1018
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â <li> world </li> &#124;'
- en: '&#124; Â <li> good bye </li> &#124;'
  id: totrans-1019
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â <li> good bye </li> &#124;'
- en: '&#124; </ul> &#124;'
  id: totrans-1020
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; </ul> &#124;'
- en: ''
  id: totrans-1021
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![](../Images/a8b82bdb5f9d0eb29ca092c00c8bfdcf.png) |'
  id: totrans-1022
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | ![](../Images/a8b82bdb5f9d0eb29ca092c00c8bfdcf.png) |'
- en: On the left, you see a piece of XML data that a web site may send to your web
    browser. On the right, you see how one popular browser renders this snippet graphically.
  id: totrans-1023
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å·¦è¾¹ï¼Œä½ çœ‹åˆ°çš„æ˜¯ä¸€ä¸ªç½‘ç«™å¯èƒ½å‘é€åˆ°ä½ çš„ç½‘ç»œæµè§ˆå™¨çš„XMLæ•°æ®ç‰‡æ®µã€‚åœ¨å³è¾¹ï¼Œä½ çœ‹åˆ°çš„æ˜¯ä¸€ä¸ªæµè¡Œçš„æµè§ˆå™¨å¦‚ä½•å›¾å½¢åŒ–åœ°æ¸²æŸ“è¿™ä¸ªç‰‡æ®µã€‚
- en: This chapter explains the basics of processing XML as another design exercise
    concerning intertwined data definitions and iterative refinement. The next section
    starts with an informal comparison of S-expressions and XML data and uses it to
    formulate a full-fledged dataIf you think XML is too old-fashioned for 2024, feel
    free to redo the exercise for JSON or some other modern data exchange format.
    The design principles remain the same. definition. The remaining sections explain
    with examples how to process an S-expression of XML data.
  id: totrans-1024
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ç« è§£é‡Šäº†å°†XMLä½œä¸ºå¦ä¸€ä¸ªæ¶‰åŠäº¤ç»‡æ•°æ®å®šä¹‰å’Œè¿­ä»£ç²¾ç‚¼çš„è®¾è®¡ç»ƒä¹ çš„åŸºæœ¬å¤„ç†æ–¹æ³•ã€‚ä¸‹ä¸€èŠ‚ä»éæ­£å¼æ¯”è¾ƒSè¡¨è¾¾å¼å’ŒXMLæ•°æ®å¼€å§‹ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥åˆ¶å®šå®Œæ•´çš„æ•°æ®å®šä¹‰ã€‚å…¶ä½™éƒ¨åˆ†é€šè¿‡ç¤ºä¾‹è§£é‡Šå¦‚ä½•å¤„ç†XMLæ•°æ®çš„Sè¡¨è¾¾å¼ã€‚
- en: 22.1XML as S-expressions[ğŸ”—](#(part._sec~3axml) "Link to here")
  id: totrans-1025
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 22.1XMLä½œä¸ºSè¡¨è¾¾å¼[ğŸ”—](#(part._sec~3axml) "é“¾æ¥è‡³æ­¤")
- en: 'The most basic piece of XML data looks like this:'
  id: totrans-1026
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åŸºæœ¬çš„XMLæ•°æ®çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
- en: '| <machine> </machine> |'
  id: totrans-1027
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| <machine> </machine> |'
- en: 'It is called an element and â€œmachineâ€ is the name of the element. The two parts
    of the element are like parentheses that delimit the content of an element. When
    there is no content between the two partsâ€”<wbr>other than white spaceâ€”<wbr>XML
    allows a short-hand:'
  id: totrans-1028
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒè¢«ç§°ä¸ºå…ƒç´ ï¼Œå…¶ä¸­â€œmachineâ€æ˜¯å…ƒç´ çš„åç§°ã€‚å…ƒç´ çš„ä¸¤ä¸ªéƒ¨åˆ†å°±åƒæ‹¬å·ï¼Œç”¨äºç•Œå®šå…ƒç´ çš„å†…å®¹ã€‚å½“ä¸¤ä¸ªéƒ¨åˆ†ä¹‹é—´æ²¡æœ‰å†…å®¹ï¼ˆé™¤äº†ç©ºç™½å­—ç¬¦ï¼‰æ—¶ï¼ŒXMLå…è®¸ä½¿ç”¨ç¼©å†™ï¼š
- en: '| <machine /> |'
  id: totrans-1029
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| <machine /> |'
- en: 'But, as far as we are concerned here, this short-hand is equivalent to the
    explicitly bracketed version.From an S-expression perspective, an XML element
    is a named pair of parentheses that surround some content.Racketâ€™s xml library
    represents XML with structures as well as S-expressions. And indeed, representing
    the above with an S-expression is quite natural:'
  id: totrans-1030
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯ï¼Œå°±æˆ‘ä»¬åœ¨è¿™é‡Œè®¨è®ºçš„å†…å®¹è€Œè¨€ï¼Œè¿™ä¸ªç¼©å†™ä¸æ˜¾å¼æ‹¬å·ç‰ˆæœ¬ç­‰æ•ˆã€‚ä»Sè¡¨è¾¾å¼è§’åº¦æ¥çœ‹ï¼ŒXMLå…ƒç´ æ˜¯ä¸€ä¸ªå‘½åå¯¹æ‹¬å·ï¼Œå®ƒåŒ…å›´äº†ä¸€äº›å†…å®¹ã€‚Racketçš„xmlåº“ä½¿ç”¨ç»“æ„ä»¥åŠSè¡¨è¾¾å¼æ¥è¡¨ç¤ºXMLã€‚å®é™…ä¸Šï¼Œä½¿ç”¨Sè¡¨è¾¾å¼æ¥è¡¨ç¤ºä¸Šè¿°å†…å®¹æ˜¯éå¸¸è‡ªç„¶çš„ï¼š
- en: '''(machine)'
  id: totrans-1031
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '''(machine)'
- en: 'This piece of data has the opening and closing parentheses, and it comes with
    space to embed content.Here is a piece of XML data with content:'
  id: totrans-1032
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç‰‡æ•°æ®æœ‰å¼€é—­æ‹¬å·ï¼Œå¹¶å¸¦æœ‰åµŒå…¥å†…å®¹çš„ç©ºé—´ã€‚è¿™é‡Œæœ‰ä¸€ç‰‡å¸¦æœ‰å†…å®¹çš„XMLæ•°æ®ï¼š
- en: '| <machine><action /></machine> |'
  id: totrans-1033
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| <machine><action /></machine> |'
- en: 'Remember that the <action /> part is a short-hand, meaning we are really looking
    at this piece of data:'
  id: totrans-1034
  prefs: []
  type: TYPE_NORMAL
  zh: è®°ä½ï¼Œ<action />éƒ¨åˆ†æ˜¯ä¸€ä¸ªç¼©å†™ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å®é™…ä¸Šæ­£åœ¨æŸ¥çœ‹ä»¥ä¸‹æ•°æ®ç‰‡æ®µï¼š
- en: '| <machine><action></action></machine> |'
  id: totrans-1035
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| <machine><action></action></machine> |'
- en: 'In general, the content of an XML element is a series of XML elements:'
  id: totrans-1036
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼ŒXMLå…ƒç´ çš„å†…å®¹æ˜¯ä¸€ç³»åˆ—XMLå…ƒç´ ï¼š
- en: '| <machine><action /><action /><action /></machine> |'
  id: totrans-1037
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| <machine><action /><action /><action /></machine> |'
- en: 'Stop! Expand the short-hand for <action /> before you continue.The S-expression
    representation continues to look simple. Here is the first one:'
  id: totrans-1038
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼åœ¨ç»§ç»­ä¹‹å‰ï¼Œå…ˆå±•å¼€<action />çš„ç¼©å†™ã€‚Sè¡¨è¾¾å¼è¡¨ç¤ºæ³•çœ‹èµ·æ¥ä»ç„¶å¾ˆç®€å•ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼š
- en: '''(machineÂ (action))'
  id: totrans-1039
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '''(machineÂ (action))'
- en: 'And this is the representation for the second one:'
  id: totrans-1040
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ç¬¬äºŒä¸ªè¡¨ç¤ºï¼š
- en: '''(machineÂ (action)Â (action)Â (action))'
  id: totrans-1041
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '''(machineÂ (action)Â (action)Â (action))'
- en: When you look at the piece of XML data with a sequence of three <action /> elements
    as its content, you realize that you may wish to distinguish such elements from
    each other. To this end, XML elements come with attributes. For example,
  id: totrans-1042
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä½ æŸ¥çœ‹åŒ…å«ä¸‰ä¸ª<action />å…ƒç´ åºåˆ—çš„XMLæ•°æ®æ—¶ï¼Œä½ ä¼šæ„è¯†åˆ°ä½ å¯èƒ½å¸Œæœ›åŒºåˆ†è¿™äº›å…ƒç´ ã€‚ä¸ºæ­¤ï¼ŒXMLå…ƒç´ å¸¦æœ‰å±æ€§ã€‚ä¾‹å¦‚ï¼Œ
- en: '| <machine initial="red"></machine> |'
  id: totrans-1043
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| <machine initial="red"></machine> |'
- en: 'is the â€œmachineâ€ element equipped with one attribute whose name is â€œinitialâ€
    and whose value is â€œredâ€ between string quotes. Here is a complex XML element
    with nested elements that have attributes, too:'
  id: totrans-1044
  prefs: []
  type: TYPE_NORMAL
  zh: â€œmachineâ€å…ƒç´ åŒ…å«ä¸€ä¸ªåä¸ºâ€œinitialâ€çš„å±æ€§ï¼Œå…¶å€¼åœ¨å­—ç¬¦ä¸²å¼•å·å†…ä¸ºâ€œredâ€ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…·æœ‰åµŒå¥—å…ƒç´ ä¸”ä¹Ÿå…·æœ‰å±æ€§çš„å¤æ‚XMLå…ƒç´ ï¼š
- en: '| <machine initial="red"> |'
  id: totrans-1045
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| <machine initial="red"> |'
- en: '| Â Â <action state="red"Â Â Â Â next="green" /> |'
  id: totrans-1046
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <action state="red"Â Â Â Â next="green" /> |'
- en: '| Â Â <action state="green"Â Â next="yellow" /> |'
  id: totrans-1047
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <action state="green"Â Â next="yellow" /> |'
- en: '| Â Â <action state="yellow" next="red" /> |'
  id: totrans-1048
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <action state="yellow" next="red" /> |'
- en: '| </machine> |'
  id: totrans-1049
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| </machine> |'
- en: We use blanks, indentation, and line breaks to make the element readable, but
    this white space has no meaning for our XML data here.Naturally, S-expressions
    for these â€œmachineâ€ elements look much like their XML cousins:XML is 40 years
    younger than S-expressions.
  id: totrans-1050
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½¿ç”¨ç©ºæ ¼ã€ç¼©è¿›å’Œæ¢è¡Œæ¥ä½¿å…ƒç´ å¯è¯»ï¼Œä½†åœ¨è¿™é‡Œï¼Œè¿™ç§ç©ºç™½æ²¡æœ‰æ„ä¹‰ã€‚è‡ªç„¶åœ°ï¼Œè¿™äº›â€œmachineâ€å…ƒç´ çš„Sè¡¨è¾¾å¼çœ‹èµ·æ¥ä¸å®ƒä»¬çš„XMLè¡¨äº²éå¸¸ç›¸ä¼¼ï¼šXMLæ¯”Sè¡¨è¾¾å¼å¹´è½»40å¹´ã€‚
- en: '''(machineÂ ((initialÂ "red")))'
  id: totrans-1051
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '''(machineÂ ((initialÂ "red")))'
- en: 'To add attributes to an element, we use a list of lists where each of the latter
    contains two items: a symbol and a string. The symbol represents the name of the
    attribute and the string its value. This idea naturally applies to complex forms
    of XML data, too:'
  id: totrans-1052
  prefs: []
  type: TYPE_NORMAL
  zh: è¦å‘å…ƒç´ æ·»åŠ å±æ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨çš„åˆ—è¡¨ï¼Œå…¶ä¸­åè€…åŒ…å«ä¸¤ä¸ªé¡¹ç›®ï¼šä¸€ä¸ªç¬¦å·å’Œä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ç¬¦å·ä»£è¡¨å±æ€§çš„åç§°ï¼Œå­—ç¬¦ä¸²ä»£è¡¨å…¶å€¼ã€‚è¿™ä¸ªæƒ³æ³•è‡ªç„¶ä¹Ÿé€‚ç”¨äºæ›´å¤æ‚çš„XMLæ•°æ®å½¢å¼ï¼š
- en: '| ''(machineÂ ((initialÂ "red")) |'
  id: totrans-1053
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''(machineÂ ((initialÂ "red")) |'
- en: '| Â Â (actionÂ ((stateÂ "red")Â (nextÂ "green"))) |'
  id: totrans-1054
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (actionÂ ((stateÂ "red")Â (nextÂ "green"))) |'
- en: '| Â Â (actionÂ ((stateÂ "green")Â (nextÂ "yellow"))) |'
  id: totrans-1055
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (actionÂ ((stateÂ "green")Â (nextÂ "yellow"))) |'
- en: '| Â Â (actionÂ ((stateÂ "yellow")Â (nextÂ "red")))) |'
  id: totrans-1056
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (actionÂ ((stateÂ "yellow")Â (nextÂ "red")))) |'
- en: For now note how the attributes are marked by two opening parentheses and the
    remaining list of (representations of) XML elements has one opening parenthesis.
  id: totrans-1057
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®å‰è¯·æ³¨æ„ï¼Œå±æ€§é€šè¿‡ä¸¤ä¸ªå¼€æ‹¬å·æ ‡è®°ï¼Œè€Œå‰©ä½™çš„XMLå…ƒç´ è¡¨ç¤ºåˆ—è¡¨åªæœ‰ä¸€ä¸ªå¼€æ‹¬å·ã€‚
- en: 'You may recall the idea from [Intermezzo 2: Quote, Unquote](i2-3.html), which
    uses S-expressions to represent XHTML, a special dialect of XML. In particular,
    the intermezzo shows how easily a programmer can write down nontrivial XML data
    and even templates of XML representations using backquote and [unquote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._unquote%29%29).
    Of course, [Interpreting Expressions](#%28part._sec~3ainterpreter%29) points out
    that you need a parser to determine whether any given S-expression is a representation
    of XML data, and a parser is a complex and unusual kind of function.'
  id: totrans-1058
  prefs: []
  type: TYPE_NORMAL
  zh: 'ä½ å¯èƒ½è¿˜è®°å¾—æ¥è‡ª[Intermezzo 2: Quote, Unquote](i2-3.html)çš„æƒ³æ³•ï¼Œå®ƒä½¿ç”¨Sè¡¨è¾¾å¼æ¥è¡¨ç¤ºXHTMLï¼Œè¿™æ˜¯XMLçš„ä¸€ç§ç‰¹æ®Šæ–¹è¨€ã€‚ç‰¹åˆ«æ˜¯ï¼Œè¿™ä¸ªç‰‡æ®µå±•ç¤ºäº†ç¨‹åºå‘˜å¦‚ä½•è½»æ¾åœ°å†™ä¸‹éå¹³å‡¡çš„XMLæ•°æ®å’ŒXMLè¡¨ç¤ºçš„æ¨¡æ¿ï¼Œä½¿ç”¨åå¼•å·å’Œ[unquote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._unquote%29%29)ã€‚å½“ç„¶ï¼Œ[Interpreting
    Expressions](#%28part._sec~3ainterpreter%29)æŒ‡å‡ºï¼Œä½ éœ€è¦ä¸€ä¸ªè§£æå™¨æ¥ç¡®å®šä»»ä½•ç»™å®šçš„Sè¡¨è¾¾å¼æ˜¯å¦æ˜¯XMLæ•°æ®çš„è¡¨ç¤ºï¼Œè€Œè§£æå™¨æ˜¯ä¸€ç§å¤æ‚ä¸”ä¸å¯»å¸¸çš„å‡½æ•°ã€‚'
- en: 'Nevertheless, we choose to go with a representation of XML based on S-expressions
    to demonstrate the usefulness of this old, poetic idea in practical terms. We
    proceed gradually to work out a data definition, putting iterative refinement
    to work. Here is a first attempt:'
  id: totrans-1059
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨åŸºäºSè¡¨è¾¾å¼çš„XMLè¡¨ç¤ºæ¥å±•ç¤ºè¿™ä¸ªå¤è€ã€å¯Œæœ‰è¯—æ„çš„æƒ³æ³•åœ¨å®è·µä¸­çš„å®ç”¨æ€§ã€‚æˆ‘ä»¬é€æ­¥è¿›è¡Œï¼Œä»¥å®ç°æ•°æ®å®šä¹‰ï¼Œå¹¶åˆ©ç”¨è¿­ä»£ä¼˜åŒ–ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåˆæ­¥å°è¯•ï¼š
- en: '| ;Â An Xexpr.v0 (short for X-expression) is a one-item list: |'
  id: totrans-1060
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An Xexpr.v0 (short for X-expression) is a one-item list: |'
- en: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  ''())
    |'
  id: totrans-1061
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  ''())
    |'
- en: 'This is the â€œnamed parenthesesâ€ idea from the beginning of this section. Equipping
    this element representation with content is easy:'
  id: totrans-1062
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æœ¬èŠ‚å¼€å¤´æåˆ°çš„â€œå‘½åæ‹¬å·â€æ€æƒ³ã€‚ä¸ºè¿™ä¸ªå…ƒç´ è¡¨ç¤ºæ·»åŠ å†…å®¹å¾ˆå®¹æ˜“ï¼š
- en: '| ;Â An Xexpr.v1 is a list: |'
  id: totrans-1063
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ª Xexpr.v1 æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼š|'
- en: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [List-of  [Xexpr.v1](#%28tech._xexpr..v1%29)])
    |'
  id: totrans-1064
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [List-of  [Xexpr.v1](#%28tech._xexpr..v1%29)])
    |'
- en: 'The symbolic name becomes the first item on a list that otherwise consists
    of XML element representatives.The last refinement step is to add attributes.
    Since the attributes in an XML element are optional, the revised data definition
    has two clauses:'
  id: totrans-1065
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¦å·åç§°æˆä¸ºåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Œè¯¥åˆ—è¡¨ç”±å…¶ä»– XML å…ƒç´ è¡¨ç¤ºç»„æˆã€‚æœ€åçš„ç»†åŒ–æ­¥éª¤æ˜¯æ·»åŠ å±æ€§ã€‚ç”±äº XML å…ƒç´ ä¸­çš„å±æ€§æ˜¯å¯é€‰çš„ï¼Œä¿®è®¢åçš„æ•°æ®å®šä¹‰æœ‰ä¸¤ä¸ªå­å¥ï¼š
- en: '| ;Â An Xexpr.v2 is a list: |'
  id: totrans-1066
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ª Xexpr.v2 æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼š|'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  Body)
    |'
  id: totrans-1067
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  Body)
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]  Body))
    |'
  id: totrans-1068
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]  Body))
    |'
- en: '| ;Â where Body is short for [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Xexpr.v2](#%28tech._xexpr..v2%29)]
    |'
  id: totrans-1069
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å…¶ä¸­ Body æ˜¯ [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Xexpr.v2](#%28tech._xexpr..v2%29)]
    çš„ç®€ç§° |'
- en: '| ;Â An Attribute is a list of two items: |'
  id: totrans-1070
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªå±æ€§æ˜¯ä¸¤ä¸ªé¡¹ç›®çš„åˆ—è¡¨ï¼š|'
- en: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [String](part_one.html#%28tech._string%29)  ''()))
    |'
  id: totrans-1071
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [String](part_one.html#%28tech._string%29)  ''()))
    |'
- en: ExerciseÂ 363\. All elements of [Xexpr.v2](#%28tech._xexpr..v2%29) start with
    a [Symbol](i2-3.html#%28tech._symbol%29), but some are followed by a list of attributes
    and some by just a list of [Xexpr.v2](#%28tech._xexpr..v2%29)s. Reformulate the
    definition of [Xexpr.v2](#%28tech._xexpr..v2%29) to isolate the common beginning
    and highlight the different kinds of endings.
  id: totrans-1072
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  363. [Xexpr.v2](#%28tech._xexpr..v2%29) çš„æ‰€æœ‰å…ƒç´ éƒ½ä»¥ [Symbol](i2-3.html#%28tech._symbol%29)
    å¼€å¤´ï¼Œä½†æœ‰äº›åé¢è·Ÿç€å±æ€§åˆ—è¡¨ï¼Œæœ‰äº›åˆ™åªè·Ÿç€ [Xexpr.v2](#%28tech._xexpr..v2%29) åˆ—è¡¨ã€‚é‡æ–°åˆ¶å®š [Xexpr.v2](#%28tech._xexpr..v2%29)
    çš„å®šä¹‰ï¼Œä»¥éš”ç¦»å…±åŒçš„å¼€å¤´å¹¶çªå‡ºä¸åŒçš„ç»“å°¾ç±»å‹ã€‚
- en: Eliminate the use of [List-of](part_three.html#%28tech._sim-dd._list._of%29)
    from [Xexpr.v2](#%28tech._xexpr..v2%29).
  id: totrans-1073
  prefs: []
  type: TYPE_NORMAL
  zh: ä» [Xexpr.v2](#%28tech._xexpr..v2%29) ä¸­æ¶ˆé™¤ [List-of](part_three.html#%28tech._sim-dd._list._of%29)
    çš„ä½¿ç”¨ã€‚
- en: 'ExerciseÂ 364\. Represent this XML data as elements of [Xexpr.v2](#%28tech._xexpr..v2%29):'
  id: totrans-1074
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  364. å°†æ­¤ XML æ•°æ®è¡¨ç¤ºä¸º [Xexpr.v2](#%28tech._xexpr..v2%29) çš„å…ƒç´ ï¼š
- en: <transition from="seen-e" to="seen-f" />
  id: totrans-1075
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: <transition from="seen-e" to="seen-f" />
- en: <ul><li><word /><word /></li><li><word /></li></ul>
  id: totrans-1076
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: <ul><li><word /><word /></li><li><word /></li></ul>
- en: 'Which one could be represented in [Xexpr.v0](#%28tech._xexpr..v0%29) or [Xexpr.v1](#%28tech._xexpr..v1%29)?ExerciseÂ 365\.
    Interpret the following elements of [Xexpr.v2](#%28tech._xexpr..v2%29) as XML
    data:'
  id: totrans-1077
  prefs: []
  type: TYPE_NORMAL
  zh: å“ªä¸€ä¸ªå¯ä»¥ç”¨ [Xexpr.v0](#%28tech._xexpr..v0%29) æˆ– [Xexpr.v1](#%28tech._xexpr..v1%29)
    è¡¨ç¤ºï¼Ÿç»ƒä¹  365. è§£é‡Šä»¥ä¸‹ [Xexpr.v2](#%28tech._xexpr..v2%29) å…ƒç´ ä½œä¸º XML æ•°æ®ï¼š
- en: '''(server  ((name  "example.org")))'
  id: totrans-1078
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '''(server  ((name  "example.org")))'
- en: '''(carcas  (board  (grass))  (player  ((name  "sam"))))'
  id: totrans-1079
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '''(carcas  (board  (grass))  (player  ((name  "sam"))))'
- en: '''(start)'
  id: totrans-1080
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '''(start)'
- en: 'Which ones are elements of [Xexpr.v0](#%28tech._xexpr..v0%29) or [Xexpr.v1](#%28tech._xexpr..v1%29)?Roughly
    speaking, X-expressions simulate structures via lists. The simulation is convenient
    for programmers; it asks for the least amount of keyboard typing. For example,
    if an X-expression does not come with an attribute list, it is simply omitted.
    This choice of data representation represents a trade-off between authoring such
    expressions manually and processing them automatically. The best way to deal with
    the latter problem is to provide functions that make X-expressions look like structures,
    especially functions that access the quasi-fields:'
  id: totrans-1081
  prefs: []
  type: TYPE_NORMAL
  zh: å“ªäº›æ˜¯[Xexpr.v0](#%28tech._xexpr..v0%29)æˆ–[Xexpr.v1](#%28tech._xexpr..v1%29)çš„å…ƒç´ ï¼Ÿç²—ç•¥åœ°è¯´ï¼ŒXè¡¨è¾¾å¼é€šè¿‡åˆ—è¡¨æ¨¡æ‹Ÿç»“æ„ã€‚è¿™ç§æ¨¡æ‹Ÿå¯¹ç¨‹åºå‘˜æ¥è¯´å¾ˆæ–¹ä¾¿ï¼›å®ƒè¦æ±‚æœ€å°‘çš„é”®ç›˜è¾“å…¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªXè¡¨è¾¾å¼ä¸å¸¦å±æ€§åˆ—è¡¨ï¼Œå®ƒå°±ç®€å•åœ°è¢«çœç•¥ã€‚è¿™ç§æ•°æ®è¡¨ç¤ºçš„é€‰æ‹©ä»£è¡¨äº†åœ¨æ‰‹åŠ¨ç¼–å†™æ­¤ç±»è¡¨è¾¾å¼å’Œå¤„ç†å®ƒä»¬ä¹‹é—´çš„ä¸€ç§æƒè¡¡ã€‚è§£å†³åè€…çš„æœ€ä½³æ–¹æ³•æ˜¯æä¾›ä½¿Xè¡¨è¾¾å¼çœ‹èµ·æ¥åƒç»“æ„çš„å‡½æ•°ï¼Œç‰¹åˆ«æ˜¯è®¿é—®å‡†å­—æ®µçš„å‡½æ•°ï¼š
- en: xexpr-name, which extracts the tag of the element representation;
  id: totrans-1082
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: xexpr-nameï¼Œå®ƒæå–å…ƒç´ è¡¨ç¤ºçš„æ ‡ç­¾ï¼›
- en: xexpr-attr, which extracts the list of attributes; and
  id: totrans-1083
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: xexpr-attrï¼Œå®ƒæå–å±æ€§åˆ—è¡¨ï¼›å¹¶ä¸”
- en: xexpr-content, which extracts the list of content elements.
  id: totrans-1084
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: xexpr-contentï¼Œå®ƒæå–å†…å®¹å…ƒç´ åˆ—è¡¨ã€‚
- en: 'Once we have these functions, we can use lists to represent XML yet that act
    as if they were instances of a structure type.These functions parse S-expressions,
    and parsers are tricky to design. So letâ€™s design them carefully, starting with
    some data examples:'
  id: totrans-1085
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æˆ‘ä»¬æœ‰äº†è¿™äº›å‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨åˆ—è¡¨æ¥è¡¨ç¤ºXMLï¼ŒåŒæ—¶å®ƒä»¬è¡¨ç°å¾—åƒç»“æ„ç±»å‹çš„å®ä¾‹ã€‚è¿™äº›å‡½æ•°è§£æSè¡¨è¾¾å¼ï¼Œè§£æå™¨çš„è®¾è®¡å¾ˆå¤æ‚ã€‚æ‰€ä»¥è®©æˆ‘ä»¬ä»”ç»†è®¾è®¡å®ƒä»¬ï¼Œä»ä¸€äº›æ•°æ®ç¤ºä¾‹å¼€å§‹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â a0Â ''((initialÂ "X")))
    |'
  id: totrans-1086
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â a0Â ''((initialÂ "X")))
    |'
- en: '| Â  |'
  id: totrans-1087
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e0Â ''(machine))
    |'
  id: totrans-1088
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e0Â ''(machine))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e1Â `(machineÂ ,a0))
    |'
  id: totrans-1089
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e1Â `(machineÂ ,a0))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e2Â ''(machineÂ (action)))
    |'
  id: totrans-1090
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e2Â ''(machineÂ (action)))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e3Â ''(machineÂ ()Â (action)))
    |'
  id: totrans-1091
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e3Â ''(machineÂ ()Â (action)))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e4Â `(machineÂ ,a0Â (action)Â (action)))
    |'
  id: totrans-1092
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e4Â `(machineÂ ,a0Â (action)Â (action)))
    |'
- en: 'The first definition introduces a list of attributes, which is reused twice
    in the construction of X-expressions. The definition of e0 reminds us that an
    X-expression may not come with either attributes or content. You should be able
    to explain why e2 and e3 are basically equivalent.Next we formulate a signature,
    a purpose statement, and a header:'
  id: totrans-1093
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªå®šä¹‰å¼•å…¥äº†ä¸€ä¸ªå±æ€§åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨åœ¨æ„å»ºXè¡¨è¾¾å¼æ—¶è¢«é‡å¤ä½¿ç”¨ä¸¤æ¬¡ã€‚e0çš„å®šä¹‰æé†’æˆ‘ä»¬ï¼ŒXè¡¨è¾¾å¼å¯èƒ½æ—¢ä¸å¸¦å±æ€§ä¹Ÿä¸å¸¦å†…å®¹ã€‚ä½ åº”è¯¥èƒ½å¤Ÿè§£é‡Šä¸ºä»€ä¹ˆe2å’Œe3åŸºæœ¬ä¸Šæ˜¯ç­‰ä»·çš„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ¶å®šäº†ä¸€ä¸ªç­¾åã€ä¸€ä¸ªç›®çš„å£°æ˜å’Œä¸€ä¸ªå¤´ä¿¡æ¯ï¼š
- en: '| ;Â [Xexpr.v2](#%28tech._xexpr..v2%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]
    |'
  id: totrans-1094
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Xexpr.v2](#%28tech._xexpr..v2%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]
    |'
- en: '| ;Â retrieves the list of attributes of xe |'
  id: totrans-1095
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â retrieves the list of attributes of xe |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xexpr-attrÂ xe)Â ''())
    |'
  id: totrans-1096
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xexpr-attrÂ xe)Â ''())
    |'
- en: 'Here we focus on xexpr-attr; we leave the other two as exercises.Making up
    functional examples requires a decision concerning the extraction of attributes
    from X-expressions without any. While our chosen representation completely omits
    missing attributes, we must supply ''() for the structure-based representation
    of XML. The function therefore produces ''() for such X-expressions:'
  id: totrans-1097
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å…³æ³¨xexpr-attrï¼›å…¶ä»–ä¸¤ä¸ªç•™ä½œç»ƒä¹ ã€‚æ„å»ºåŠŸèƒ½ç¤ºä¾‹éœ€è¦å†³å®šä»æ²¡æœ‰ä»»ä½•å±æ€§çš„Xè¡¨è¾¾å¼ä¸­æå–å±æ€§ã€‚è™½ç„¶æˆ‘ä»¬é€‰æ‹©çš„è¡¨ç°å½¢å¼å®Œå…¨çœç•¥äº†ç¼ºå¤±çš„å±æ€§ï¼Œä½†æˆ‘ä»¬å¿…é¡»ä¸ºXMLçš„ç»“æ„åŒ–è¡¨ç¤ºæä¾›'()ã€‚å› æ­¤ï¼Œè¯¥å‡½æ•°ä¸ºè¿™æ ·çš„Xè¡¨è¾¾å¼äº§ç”Ÿ'()ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xexpr-attrÂ e0)Â ''())
    |'
  id: totrans-1098
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xexpr-attrÂ e0)Â ''())
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xexpr-attrÂ e1)Â ''((initialÂ "X")))
    |'
  id: totrans-1099
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xexpr-attrÂ e1)Â ''((initialÂ "X")))
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xexpr-attrÂ e2)Â ''())
    |'
  id: totrans-1100
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xexpr-attrÂ e2)Â ''())
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xexpr-attrÂ e3)Â ''())
    |'
  id: totrans-1101
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xexpr-attrÂ e3)Â ''())
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xexpr-attrÂ e4)Â ''((initialÂ "X")))
    |'
  id: totrans-1102
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xexpr-attrÂ e4)Â ''((initialÂ "X")))
    |'
- en: 'It is time to develop the template. Since the data definition for [Xexpr.v2](#%28tech._xexpr..v2%29)
    is complex, we proceed slowly, step-by-step. First, while the data definition
    distinguishes two kinds of X-expressions, both clauses describe data constructed
    by [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)ing
    a symbol onto a list. Second, what differentiates the two clauses is the rest
    of the list and especially the optional presence of a list of attributes. Letâ€™s
    translate these two insights into a template:'
  id: totrans-1103
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¯æ—¶å€™å¼€å‘æ¨¡æ¿äº†ã€‚ç”±äº[Xexpr.v2](#%28tech._xexpr..v2%29)çš„æ•°æ®å®šä¹‰å¤æ‚ï¼Œæˆ‘ä»¬é€æ­¥è¿›è¡Œã€‚é¦–å…ˆï¼Œæ•°æ®å®šä¹‰åŒºåˆ†äº†ä¸¤ç§Xè¡¨è¾¾å¼ï¼Œä½†ä¸¤ä¸ªå­å¥éƒ½æè¿°äº†é€šè¿‡[cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)å°†ç¬¦å·æ·»åŠ åˆ°åˆ—è¡¨ä¸­æ„å»ºçš„æ•°æ®ã€‚å…¶æ¬¡ï¼Œä¸¤ä¸ªå­å¥çš„åŒºåˆ«åœ¨äºåˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ï¼Œç‰¹åˆ«æ˜¯å±æ€§åˆ—è¡¨çš„å¯é€‰å­˜åœ¨ã€‚è®©æˆ‘ä»¬å°†è¿™äº›æ´å¯Ÿè½¬åŒ–ä¸ºæ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xexpr-attrÂ xe)
    |'
  id: totrans-1104
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xexpr-attrÂ xe)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â optional-loa+contentÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â xe)))
    |'
  id: totrans-1105
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â optional-loa+contentÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â xe)))
    |'
- en: '| Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1106
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â optional-loa+content)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-1107
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    å¯é€‰åŠ è½½å†…å®¹) [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)])))
    |'
  id: totrans-1108
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)])))
    |'
- en: 'The local definition chops off the name of the X-expression and leaves the
    remainder of the list, which may or may not start with a list of attributes. The
    key is that it is just a list, and the two [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clauses indicate so. Third, this list is not defined via a self-reference but
    as the optional [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    of some attributes onto a possibly empty list of X-expressions. In other words,
    we still need to distinguish the two usual cases and extract the usual pieces:'
  id: totrans-1109
  prefs: []
  type: TYPE_NORMAL
  zh: å±€éƒ¨å®šä¹‰åˆ‡æ‰äº† X è¡¨è¾¾å¼çš„åç§°ï¼Œå¹¶ç•™ä¸‹äº†åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†å¯èƒ½ä»¥å±æ€§åˆ—è¡¨å¼€å§‹ï¼Œä¹Ÿå¯èƒ½ä¸ä»¥å±æ€§åˆ—è¡¨å¼€å§‹ã€‚å…³é”®æ˜¯å®ƒåªæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œè€Œä¸¤ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    æ¡ä»¶å­å¥è¡¨æ˜äº†è¿™ä¸€ç‚¹ã€‚ç¬¬ä¸‰ï¼Œè¿™ä¸ªåˆ—è¡¨ä¸æ˜¯é€šè¿‡è‡ªå¼•ç”¨å®šä¹‰çš„ï¼Œè€Œæ˜¯é€šè¿‡å°†ä¸€äº›å±æ€§ä½œä¸ºå¯é€‰çš„ [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    é¡¹æ·»åŠ åˆ°ä¸€ä¸ªå¯èƒ½ä¸ºç©ºçš„ X è¡¨è¾¾å¼åˆ—è¡¨ä¸Šå®šä¹‰çš„ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦åŒºåˆ†ä¸¤ç§å¸¸è§æƒ…å†µå¹¶æå–é€šå¸¸çš„ç‰‡æ®µï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xexpr-attrÂ xe)
    |'
  id: totrans-1110
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (xexpr-attr xe) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â optional-loa+contentÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â xe)))
    |'
  id: totrans-1111
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    å¯é€‰åŠ è½½å†…å®¹ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    xe))) |'
- en: '| Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1112
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â optional-loa+content)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-1113
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    å¯é€‰åŠ è½½å†…å®¹) [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â optional-loa+content)
    |'
  id: totrans-1114
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â optional-loa+content)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â optional-loa+content)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))])))
    |'
  id: totrans-1115
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â optional-loa+content)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))))
    |'
- en: 'At this point, we can already see that recursion is not needed for the task
    at hand. So, we switch to the fifth step of the design recipe. Clearly, there
    are no attributes if the given X-expression comes with nothing but a name. In
    the second clause, the question is whether the first item on the list is a list
    of attributes or just an [Xexpr.v2](#%28tech._xexpr..v2%29). Because this sounds
    complicated, we make a wish:'
  id: totrans-1116
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é€’å½’å¯¹äºå½“å‰ä»»åŠ¡ä¸æ˜¯å¿…éœ€çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è½¬å‘è®¾è®¡æ–¹æ¡ˆçš„ç¬¬äº”æ­¥ã€‚æ˜¾ç„¶ï¼Œå¦‚æœç»™å®šçš„Xè¡¨è¾¾å¼é™¤äº†åç§°ä¹‹å¤–æ²¡æœ‰ä»»ä½•å…¶ä»–å†…å®¹ï¼Œåˆ™æ²¡æœ‰å±æ€§ã€‚åœ¨ç¬¬äºŒä¸ªå­å¥ä¸­ï¼Œé—®é¢˜æ˜¯åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªé¡¹ç›®æ˜¯å¦æ˜¯å±æ€§åˆ—è¡¨æˆ–åªæ˜¯ä¸€ä¸ª[Xexpr.v2](#%28tech._xexpr..v2%29)ã€‚å› ä¸ºè¿™ä¼¼ä¹å¾ˆå¤æ‚ï¼Œæˆ‘ä»¬å¸Œæœ›ï¼š
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]
    or [Xexpr.v2](#%28tech._xexpr..v2%29) -> ??? |'
  id: totrans-1117
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]æˆ–[Xexpr.v2](#%28tech._xexpr..v2%29)
    -> ??? |'
- en: '| ;Â determines whether x is an element of [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]
    |'
  id: totrans-1118
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åˆ¤æ–­xæ˜¯å¦æ˜¯[[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]çš„å…ƒç´ 
    |'
- en: '| ;Â #false otherwise |'
  id: totrans-1119
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦åˆ™ä¸º#false |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-of-attributes?Â x)
    |'
  id: totrans-1120
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-of-attributes?Â x)
    |'
- en: '| Â Â #false) |'
  id: totrans-1121
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[#false](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._#false%29%29)ï¼‰
    |'
- en: With this function, it is straightforward to finish xexpr-attr; see [figureÂ 126](#%28counter._%28figure._fig~3axexpr-attr%29%29).
    If the first item is a list of attributes, the function produces it; otherwise
    there are no attributes.
  id: totrans-1122
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æ­¤å‡½æ•°ï¼Œå®Œæˆxexpr-attrçš„ä»»åŠ¡éå¸¸ç›´æ¥ï¼›å‚è§[å›¾126](#%28counter._%28figure._fig~3axexpr-attr%29%29)ã€‚å¦‚æœç¬¬ä¸€ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªå±æ€§åˆ—è¡¨ï¼Œåˆ™å‡½æ•°ä¼šç”Ÿæˆå®ƒï¼›å¦åˆ™æ²¡æœ‰å±æ€§ã€‚
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xexpr-attrÂ xe)
    |'
  id: totrans-1123
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xexpr-attrÂ xe)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â optional-loa+contentÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â xe)))
    |'
  id: totrans-1124
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â optional-loa+contentÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â xe)))
    |'
- en: '| Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1125
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â optional-loa+content)Â ''()]
    |'
  id: totrans-1126
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    å¯é€‰-loa+å†…å®¹) ''()] |'
- en: '| Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-1127
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â loa-or-x
    |'
  id: totrans-1128
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    loa-or-x |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â optional-loa+content)))
    |'
  id: totrans-1129
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    å¯é€‰-loa+å†…å®¹))) |'
- en: '| Â Â Â Â Â Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â (list-of-attributes?Â loa-or-x)
    |'
  id: totrans-1130
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)
    (å±æ€§åˆ—è¡¨? loa-or-x) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â loa-or-x |'
  id: totrans-1131
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â loa-or-x |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â ''()))]))) |'
  id: totrans-1132
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â ''()))]))) |'
- en: ''
  id: totrans-1133
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 126: The complete definition of xexpr-attr'
  id: totrans-1134
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾126ï¼šxexpr-attrçš„å®Œæ•´å®šä¹‰
- en: 'For the design of list-of-attributes?, we proceed in the same manner and get
    this definition:'
  id: totrans-1135
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºlist-of-attributes?çš„è®¾è®¡ï¼Œæˆ‘ä»¬ä»¥åŒæ ·çš„æ–¹å¼è¿›è¡Œï¼Œå¹¶å¾—åˆ°ä»¥ä¸‹å®šä¹‰ï¼š
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]
    or [Xexpr.v2](#%28tech._xexpr..v2%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-1136
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[å±æ€§åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) æˆ– [Xexpr.v2](#%28tech._xexpr..v2%29)
    ] -> [å¸ƒå°”å€¼](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â is x a list of attributes |'
  id: totrans-1137
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â is x a list of attributes |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-of-attributes?Â x)
    |'
  id: totrans-1138
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (å±æ€§åˆ—è¡¨? x) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1139
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â x)Â #true]
    |'
  id: totrans-1140
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    x) #true] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-1141
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â possible-attributeÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â x)))
    |'
  id: totrans-1142
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    å¯èƒ½çš„å±æ€§ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    x))) |'
- en: '| Â Â Â Â Â Â Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â possible-attribute))]))
    |'
  id: totrans-1143
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)
    å¯èƒ½çš„å±æ€§))])) |'
- en: We skip the details of the design process because they are unremarkable. What
    is remarkable is the signature of this function. Instead of specifying a single
    data definition as possible inputs, the signature combines two data definitions
    separated by the English word â€œor.â€ In ISL+ such an informal signature with a
    definite meaning is acceptable on occasion.
  id: totrans-1144
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è·³è¿‡è®¾è®¡è¿‡ç¨‹çš„ç»†èŠ‚ï¼Œå› ä¸ºå®ƒä»¬å¹¶ä¸å¼•äººæ³¨ç›®ã€‚å¼•äººæ³¨ç›®çš„æ˜¯è¯¥å‡½æ•°çš„ç­¾åã€‚å®ƒä¸æ˜¯æŒ‡å®šä¸€ä¸ªå¯èƒ½çš„æ•°æ®å®šä¹‰ä½œä¸ºè¾“å…¥ï¼Œè€Œæ˜¯å°†ä¸¤ä¸ªç”±è‹±è¯­å•è¯â€œæˆ–â€åˆ†éš”çš„æ•°æ®å®šä¹‰ç»„åˆåœ¨ä¸€èµ·ã€‚åœ¨
    ISL+ ä¸­ï¼Œè¿™ç§å…·æœ‰æ˜ç¡®æ„ä¹‰çš„éæ­£å¼ç­¾åæœ‰æ—¶æ˜¯å¯ä»¥æ¥å—çš„ã€‚
- en: ExerciseÂ 366\. Design xexpr-name and xexpr-content.
  id: totrans-1145
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  366\. è®¾è®¡ xexpr-name å’Œ xexpr-contentã€‚
- en: ExerciseÂ 367\. The design recipe calls for a self-reference in the template
    for xexpr-attr. Add this self-reference to the template and then explain why the
    finished parsing function does not contain it.
  id: totrans-1146
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  367\. è®¾è®¡é…æ–¹è¦æ±‚åœ¨ xexpr-attr çš„æ¨¡æ¿ä¸­è¿›è¡Œè‡ªæˆ‘å¼•ç”¨ã€‚å°†æ­¤è‡ªæˆ‘å¼•ç”¨æ·»åŠ åˆ°æ¨¡æ¿ä¸­ï¼Œç„¶åè§£é‡Šä¸ºä»€ä¹ˆæœ€ç»ˆçš„è§£æå‡½æ•°ä¸åŒ…å«å®ƒã€‚
- en: ExerciseÂ 368\. Formulate a data definition that replaces the informal â€œorâ€ signature
    for the definition of the list-of-attributes? function.
  id: totrans-1147
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  368\. ä¸º list-of-attributes å‡½æ•°çš„å®šä¹‰æ›¿æ¢éæ­£å¼çš„â€œæˆ–â€ç­¾åã€‚
- en: 'ExerciseÂ 369\. Design find-attr. The function consumes a list of attributes
    and a symbol. If the attributes list associates the symbol with a string, the
    function retrieves this string; otherwise it returns #false. Look up [assq](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._assq%29%29)
    and use it to define the function.'
  id: totrans-1148
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹  369\. è®¾è®¡ find-attr å‡½æ•°ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªå±æ€§åˆ—è¡¨å’Œä¸€ä¸ªç¬¦å·ã€‚å¦‚æœå±æ€§åˆ—è¡¨å°†ç¬¦å·ä¸ä¸€ä¸ªå­—ç¬¦ä¸²å…³è”ï¼Œåˆ™å‡½æ•°æ£€ç´¢æ­¤å­—ç¬¦ä¸²ï¼›å¦åˆ™å®ƒè¿”å›
    #falseã€‚æŸ¥é˜… [assq](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._assq%29%29)
    å¹¶ä½¿ç”¨å®ƒæ¥å®šä¹‰è¯¥å‡½æ•°ã€‚'
- en: For the remainder of this chapter, Xexpr refers to [Xexpr.v2](#%28tech._xexpr..v2%29).
    Also, we assume xexpr-name, xexpr-attr, and xexpr-content are defined. Finally,
    we use find-attr from [exerciseÂ 369](#%28counter._%28exercise._ex~3alookup-attribute%29%29)
    to retrieve attribute values.
  id: totrans-1149
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ç« å‰©ä½™éƒ¨åˆ†ï¼ŒXexpr æŒ‡çš„æ˜¯ [Xexpr.v2](#%28tech._xexpr..v2%29)ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å‡è®¾ xexpr-nameã€xexpr-attr
    å’Œ xexpr-content å·²ç»å®šä¹‰ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨æ¥è‡ª [ç»ƒä¹  369](#%28counter._%28exercise._ex~3alookup-attribute%29%29)
    çš„ find-attr æ¥æ£€ç´¢å±æ€§å€¼ã€‚
- en: 22.2Rendering XML Enumerations[ğŸ”—](#(part._sec~3aenum) "Link to here")
  id: totrans-1150
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 22.2 æ¸²æŸ“ XML æšä¸¾[ğŸ”—](#(part._sec~3aenum) "é“¾æ¥åˆ°è¿™é‡Œ")
- en: XML is actually a family of languages. People define dialects for specific channels
    of communication. For example, XHTML is the language for sending web content in
    XML format. In this section, we illustrate how to design a rendering function
    for a small snippet of XHTML, specifically the enumerations from the beginning
    of this chapter.
  id: totrans-1151
  prefs: []
  type: TYPE_NORMAL
  zh: XML å®é™…ä¸Šæ˜¯ä¸€ç»„è¯­è¨€çš„é›†åˆã€‚äººä»¬ä¸ºç‰¹å®šçš„é€šä¿¡æ¸ é“å®šä¹‰æ–¹è¨€ã€‚ä¾‹å¦‚ï¼ŒXHTML æ˜¯ç”¨äºä»¥ XML æ ¼å¼å‘é€ç½‘é¡µå†…å®¹çš„è¯­è¨€ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•è®¾è®¡ä¸€ä¸ªç”¨äºå°æ®µ
    XHTML çš„æ¸²æŸ“å‡½æ•°ï¼Œç‰¹åˆ«æ˜¯æœ¬ç« å¼€å¤´çš„æšä¸¾ã€‚
- en: The ul tag surrounds a so-called unordered HTML list. Each item of this list
    is tagged with li, which tends to contain words but also other elements, even
    enumerations. What â€œunordered HTMLâ€ means is that each item is to be rendered
    with a leading bullet instead of a number.
  id: totrans-1152
  prefs: []
  type: TYPE_NORMAL
  zh: ul æ ‡ç­¾åŒ…å›´ä¸€ä¸ªæ‰€è°“çš„æ— åºåˆ—è¡¨ã€‚åˆ—è¡¨ä¸­çš„æ¯ä¸ªé¡¹ç›®éƒ½å¸¦æœ‰ li æ ‡ç­¾ï¼Œå®ƒé€šå¸¸åŒ…å«å•è¯ï¼Œä½†ä¹Ÿå¯èƒ½åŒ…å«å…¶ä»–å…ƒç´ ï¼Œç”šè‡³æšä¸¾ã€‚æ— åºåˆ—è¡¨çš„æ„æ€æ˜¯æ¯ä¸ªé¡¹ç›®éƒ½åº”è¯¥ç”¨å‰å¯¼é¡¹ç›®ç¬¦å·è€Œä¸æ˜¯æ•°å­—æ¥æ¸²æŸ“ã€‚
- en: 'Since [Xexpr](#%28tech._xexpr%29) does not come with plain strings, it is not
    immediately obvious how to represent XHTML enumerations in a subset. One option
    is to refine the data representation one more time, so that an [Xexpr](#%28tech._xexpr%29)
    could be a [String](part_one.html#%28tech._string%29). Another option is to introduce
    a representation for text:'
  id: totrans-1153
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº [Xexpr](#%28tech._xexpr%29) ä¸åŒ…å«æ™®é€šå­—ç¬¦ä¸²ï¼Œå› æ­¤å¦‚ä½•è¡¨ç¤º XHTML æšä¸¾åœ¨å­é›†ä¸­å¹¶ä¸æ˜æ˜¾ã€‚ä¸€ä¸ªé€‰é¡¹æ˜¯è¿›ä¸€æ­¥ç»†åŒ–æ•°æ®è¡¨ç¤ºï¼Œä½¿å¾—ä¸€ä¸ª
    [Xexpr](#%28tech._xexpr%29) å¯ä»¥æ˜¯ä¸€ä¸ª [String](part_one.html#%28tech._string%29)ã€‚å¦ä¸€ä¸ªé€‰é¡¹æ˜¯å¼•å…¥æ–‡æœ¬è¡¨ç¤ºï¼š
- en: ;Â An XWord is '(word  ((text  [String](part_one.html#%28tech._string%29)))).
  id: totrans-1154
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ; ä¸€ä¸ª XWord æ˜¯ '(word  ((text  [String](part_one.html#%28tech._string%29)))).
- en: Here, we use this second option; Racket, the language from which the teaching
    languages are derived, offers teachpacks that include [String](part_one.html#%28tech._string%29)
    in [Xexpr](#%28tech._xexpr%29).
  id: totrans-1155
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒç§é€‰é¡¹ï¼›Racketï¼Œæ•™å­¦è¯­è¨€ä»ä¸­è¡ç”Ÿå‡ºæ¥çš„è¯­è¨€ï¼Œæä¾›äº†åŒ…å« [String](part_one.html#%28tech._string%29)
    åœ¨ [Xexpr](#%28tech._xexpr%29) ä¸­çš„ teachpacksã€‚
- en: ExerciseÂ 370\. Make up three examples for [XWord](#%28tech._xword%29)s. Design
    word?, which checks whether some ISL+ value is in [XWord](#%28tech._xword%29),
    and word-text, which extracts the value of the only attribute of an instance of
    [XWord](#%28tech._xword%29).
  id: totrans-1156
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  370. ä¸º [XWord](#%28tech._xword%29) æ„é€ ä¸‰ä¸ªç¤ºä¾‹ã€‚è®¾è®¡ä¸€ä¸ªå•è¯æŸ¥è¯¢ï¼Œæ£€æŸ¥æŸä¸ª ISL+ å€¼æ˜¯å¦åœ¨ [XWord](#%28tech._xword%29)
    ä¸­ï¼Œä»¥åŠä¸€ä¸ªå•è¯æ–‡æœ¬ï¼Œç”¨äºæå– [XWord](#%28tech._xword%29) å®ä¾‹çš„å”¯ä¸€å±æ€§å€¼ã€‚
- en: ExerciseÂ 371\. Refine the definition of [Xexpr](#%28tech._xexpr%29) so that
    you can represent XML elements, including items in enumerations, that are plain
    strings.
  id: totrans-1157
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  371. ç²¾ç‚¼ [Xexpr](#%28tech._xexpr%29) çš„å®šä¹‰ï¼Œä»¥ä¾¿å¯ä»¥è¡¨ç¤ºåŒ…æ‹¬æšä¸¾ä¸­çš„é¡¹åœ¨å†…çš„çº¯å­—ç¬¦ä¸² XML å…ƒç´ ã€‚
- en: 'Given the representation of words, representing an XHTML-style enumeration
    of words is straightforward:'
  id: totrans-1158
  prefs: []
  type: TYPE_NORMAL
  zh: ç»™å®šå•è¯çš„è¡¨ç¤ºï¼Œè¡¨ç¤ºä¸€ä¸ªç±»ä¼¼ XHTML çš„å•è¯æšä¸¾æ˜¯ç›´æ¥çš„ï¼š
- en: '| ;Â An XEnum.v1 is one of: |'
  id: totrans-1159
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An XEnum.v1 is one of: |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''ul  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [XItem.v1](#%28tech._xitem..v1%29)])
    |'
  id: totrans-1160
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''ul  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [XItem.v1](#%28tech._xitem..v1%29)])
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''ul  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  Attributes  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [XItem.v1](#%28tech._xitem..v1%29)]))
    |'
  id: totrans-1161
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''ul  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  Attributes  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [XItem.v1](#%28tech._xitem..v1%29)]))
    |'
- en: '| ;Â An XItem.v1 is one of: |'
  id: totrans-1162
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An XItem.v1 is one of: |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [XWord](#%28tech._xword%29)  ''()))
    |'
  id: totrans-1163
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [XWord](#%28tech._xword%29)  ''()))
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  Attributes  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [XWord](#%28tech._xword%29)  ''())))
    |'
  id: totrans-1164
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  Attributes  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [XWord](#%28tech._xword%29)  ''())))
    |'
- en: For completeness, the data definition includes attribute lists, even though
    they do not affect rendering.
  id: totrans-1165
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å®Œæ•´æ€§ï¼Œæ•°æ®å®šä¹‰åŒ…æ‹¬å±æ€§åˆ—è¡¨ï¼Œå³ä½¿å®ƒä»¬ä¸å½±å“æ¸²æŸ“ã€‚
- en: Stop! Argue that every element of [XEnum.v1](#%28tech._xenum..v1%29) is also
    in [XExpr](#%28tech._xexpr%29).
  id: totrans-1166
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼è®ºè¯ [XEnum.v1](#%28tech._xenum..v1%29) çš„æ¯ä¸ªå…ƒç´ ä¹Ÿéƒ½åœ¨ [XExpr](#%28tech._xexpr%29)
    ä¸­ã€‚
- en: 'Here is a sample element of [XEnum.v1](#%28tech._xenum..v1%29):'
  id: totrans-1167
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯ [XEnum.v1](#%28tech._xenum..v1%29) çš„ä¸€ä¸ªç¤ºä¾‹å…ƒç´ ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e0
    |'
  id: totrans-1168
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e0
    |'
- en: '| Â Â ''(ul |'
  id: totrans-1169
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ''(ul |'
- en: '| Â Â Â Â (liÂ (wordÂ ((textÂ "one")))) |'
  id: totrans-1170
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (liÂ (wordÂ ((textÂ "one")))) |'
- en: '| Â Â Â Â (liÂ (wordÂ ((textÂ "two")))))) |'
  id: totrans-1171
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (liÂ (wordÂ ((textÂ "two")))))) |'
- en: 'It corresponds to the inner enumeration of the example from the beginning of
    the chapter. Rendering it with help from the 2htdp/image teachpack should yield
    an image like this:'
  id: totrans-1172
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒå¯¹åº”äºç« èŠ‚å¼€å¤´çš„ç¤ºä¾‹çš„å†…è”æšä¸¾ã€‚ä½¿ç”¨ 2htdp/image æ•™å­¦åŒ…æ¸²æŸ“å®ƒåº”è¯¥å¾—åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å›¾åƒï¼š
- en: '![image](../Images/3cb365e73fec6305d41977c2a280f916.png)'
  id: totrans-1173
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/3cb365e73fec6305d41977c2a280f916.png)'
- en: The radius of the bullet and the distance between the bullet and the text are
    matters of aesthetics; here the idea matters.To create this kind of image, you
    might use this ISL+ program:We developed these expressions in the interactions
    area. What would you do?
  id: totrans-1174
  prefs: []
  type: TYPE_NORMAL
  zh: é¡¹ç›®ç¬¦å·çš„åŠå¾„å’Œé¡¹ç›®ç¬¦å·ä¸æ–‡æœ¬ä¹‹é—´çš„è·ç¦»æ˜¯ç¾å­¦é—®é¢˜ï¼›è¿™é‡Œé‡è¦çš„æ˜¯æƒ³æ³•ã€‚è¦åˆ›å»ºè¿™ç§å›¾åƒï¼Œä½ å¯èƒ½ä½¿ç”¨è¿™ä¸ª ISL+ ç¨‹åºï¼šæˆ‘ä»¬åœ¨äº¤äº’åŒºåŸŸå¼€å‘äº†è¿™äº›è¡¨è¾¾å¼ã€‚ä½ ä¼šæ€ä¹ˆåšï¼Ÿ
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e0-rendered
    |'
  id: totrans-1175
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â e0-rendered
    |'
- en: '| Â Â ([above/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%2Falign%29%29)
    |'
  id: totrans-1176
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([above/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%2Falign%29%29)
    |'
- en: '| Â Â Â ''left |'
  id: totrans-1177
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å·¦å¯¹é½ |'
- en: '| Â Â Â ([beside/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%2Falign%29%29)Â ''centerÂ BTÂ ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "one"Â 12Â ''black))
    |'
  id: totrans-1178
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â ([beside/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%2Falign%29%29)Â ''centerÂ BTÂ ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "one"Â 12Â ''black))
    |'
- en: '| Â Â Â ([beside/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%2Falign%29%29)Â ''centerÂ BTÂ ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "two"Â 12Â ''black))))
    |'
  id: totrans-1179
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([beside/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%2Falign%29%29)Â ''centerÂ BTÂ ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "two"Â 12Â ''black))))
    |'
- en: assuming BT is a rendering of a bullet.
  id: totrans-1180
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ BT æ˜¯ä¸€ä¸ªé¡¹ç›®ç¬¦å·çš„æ¸²æŸ“ã€‚
- en: Now letâ€™s design the function carefully. Since the data representation requires
    two data definitions, the design recipe tells you that you must design two functions
    in parallel. A second look reveals, however, that in this particular case the
    second data definition is disconnected from the first one, meaning we can deal
    with it separately.
  id: totrans-1181
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬ä»”ç»†è®¾è®¡è¿™ä¸ªå‡½æ•°ã€‚ç”±äºæ•°æ®è¡¨ç¤ºéœ€è¦ä¸¤ä¸ªæ•°æ®å®šä¹‰ï¼Œè®¾è®¡é…æ–¹å‘Šè¯‰ä½ å¿…é¡»å¹¶è¡Œè®¾è®¡ä¸¤ä¸ªå‡½æ•°ã€‚ç„¶è€Œï¼Œå†æ¬¡å®¡è§†æ—¶ï¼Œæˆ‘ä»¬å‘ç°åœ¨è¿™ä¸ªç‰¹å®šæƒ…å†µä¸‹ï¼Œç¬¬äºŒä¸ªæ•°æ®å®šä¹‰ä¸ç¬¬ä¸€ä¸ªæ˜¯åˆ†ç¦»çš„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å•ç‹¬å¤„ç†å®ƒã€‚
- en: 'Furthermore, the definition for [XItem.v1](#%28tech._xitem..v1%29) consists
    of two clauses, meaning the function itself should consist of a [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    with two clauses. The point of viewing [XItem.v1](#%28tech._xitem..v1%29) as a
    sub-language of [Xexpr](#%28tech._xexpr%29), however, is to think of these two
    clauses in terms of [Xexpr](#%28tech._xexpr%29) selector functions, in particular,
    xexpr-content. With this function we can extract the textual part of an item,
    regardless of whether it comes with attributes or not:'
  id: totrans-1182
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œ[XItem.v1](#%28tech._xitem..v1%29) çš„å®šä¹‰ç”±ä¸¤ä¸ªå­å¥ç»„æˆï¼Œè¿™æ„å‘³ç€å‡½æ•°æœ¬èº«åº”è¯¥ç”±ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå­å¥çš„ [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    å‡½æ•°ç»„æˆã€‚ç„¶è€Œï¼Œå°† [XItem.v1](#%28tech._xitem..v1%29) è§†ä¸º [Xexpr](#%28tech._xexpr%29) çš„å­è¯­è¨€çš„ç›®çš„æ˜¯å°†è¿™äº›ä¸¤ä¸ªå­å¥è§†ä¸º
    [Xexpr](#%28tech._xexpr%29) é€‰æ‹©å‡½æ•°ï¼Œç‰¹åˆ«æ˜¯ xexpr-contentã€‚ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æå–é¡¹ç›®çš„æ–‡æœ¬éƒ¨åˆ†ï¼Œæ— è®ºå®ƒæ˜¯å¦å¸¦æœ‰å±æ€§ï¼š
- en: '| ;Â [XItem.v1](#%28tech._xitem..v1%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1183
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [XItem.v1](#%28tech._xitem..v1%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â renders an item as a "word" prefixed by a bullet |'
  id: totrans-1184
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ¸²æŸ“ä¸€ä¸ªä»¥é¡¹ç›®ç¬¦å·ä¸ºå‰ç¼€çš„â€œå•è¯â€ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-item1Â i)
    |'
  id: totrans-1185
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-item1Â i)
    |'
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (xexpr-contentÂ i)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
  id: totrans-1186
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (xexpr-contentÂ i)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
- en: 'In general, xexpr-content extracts a list of [Xexpr](#%28tech._xexpr%29); in
    this specific case, the list contains exactly one [XWord](#%28tech._xword%29),
    and this word contains one text:'
  id: totrans-1187
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼Œxexpr-content æå–ä¸€ä¸ª [Xexpr](#%28tech._xexpr%29) çš„åˆ—è¡¨ï¼›åœ¨è¿™ä¸ªç‰¹å®šæƒ…å†µä¸‹ï¼Œåˆ—è¡¨ä¸­æ°å¥½åŒ…å«ä¸€ä¸ª [XWord](#%28tech._xword%29)ï¼Œå¹¶ä¸”è¿™ä¸ªå•è¯åŒ…å«ä¸€ä¸ªæ–‡æœ¬ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-item1Â i)
    |'
  id: totrans-1188
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    render-item1 i) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (xexpr-contentÂ i))
    |'
  id: totrans-1189
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    content (xexpr-content i))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â elementÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â content))
    |'
  id: totrans-1190
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    å…ƒç´  ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    å†…å®¹)ï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â a-wordÂ (word-textÂ element)))
    |'
  id: totrans-1191
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    a-word (word-text element))) |'
- en: '| Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â a-wordÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
  id: totrans-1192
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[çœç•¥å·](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    a-word [çœç•¥å·](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)ï¼‰|'
- en: 'From here, it is straightforward:'
  id: totrans-1193
  prefs: []
  type: TYPE_NORMAL
  zh: ä»è¿™é‡Œå¼€å§‹ï¼Œæ“ä½œå¾ˆç®€å•ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-item1Â i)
    |'
  id: totrans-1194
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    render-item1 i) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (xexpr-contentÂ i))
    |'
  id: totrans-1195
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    content (xexpr-content i))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â elementÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â content))
    |'
  id: totrans-1196
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    element ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    content)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â a-wordÂ (word-textÂ element))
    |'
  id: totrans-1197
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    a-word (word-text element)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â itemÂ ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â a-wordÂ 12Â ''black)))
    |'
  id: totrans-1198
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    item ([æ–‡æœ¬](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)
    a-word 12 ''black))) |'
- en: '| Â Â Â Â ([beside/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%2Falign%29%29)Â ''centerÂ BTÂ item)))
    |'
  id: totrans-1199
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([beside/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%2Falign%29%29)Â ''centerÂ BTÂ item)))
    |'
- en: After extracting the text to be rendered in the item, it is simply a question
    of rendering it as text and equipping it with a leading bullet; see the examples
    above for how you might discover this last step.
  id: totrans-1200
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æå–å‡ºè¦æ¸²æŸ“åœ¨æ¡ç›®ä¸­çš„æ–‡æœ¬ä¹‹åï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå°†å…¶æ¸²æŸ“ä¸ºæ–‡æœ¬å¹¶åœ¨å…¶å‰é¢æ·»åŠ ä¸€ä¸ªé¡¹ç›®ç¬¦å·çš„é—®é¢˜ï¼›è¯·å‚è§ä¸Šé¢çš„ç¤ºä¾‹ï¼Œäº†è§£æ‚¨å¯èƒ½å¦‚ä½•å‘ç°è¿™ä¸€æœ€åæ­¥éª¤ã€‚
- en: ExerciseÂ 372\. Before you read on, equip the definition of render-item1 with
    tests. Make sure to formulate these tests in such a way that they donâ€™t depend
    on the BT constant. Then explain how the function works; keep in mind that the
    purpose statement explains what it does.
  id: totrans-1201
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  372ã€‚åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œä¸º render-item1 çš„å®šä¹‰æ·»åŠ æµ‹è¯•ã€‚ç¡®ä¿ä»¥è¿™ç§æ–¹å¼åˆ¶å®šè¿™äº›æµ‹è¯•ï¼Œä»¥ä¾¿å®ƒä»¬ä¸ä¾èµ–äº BT å¸¸æ•°ã€‚ç„¶åè§£é‡Šè¯¥å‡½æ•°çš„å·¥ä½œåŸç†ï¼›è¯·è®°ä½ï¼Œç›®çš„è¯´æ˜è§£é‡Šäº†å®ƒåšä»€ä¹ˆã€‚
- en: 'Now we can focus on the design of a function that renders an enumeration. Using
    the example from above, the first two design steps are easy:'
  id: totrans-1202
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å¯ä»¥ä¸“æ³¨äºè®¾è®¡ä¸€ä¸ªæ¸²æŸ“æšä¸¾çš„å‡½æ•°ã€‚ä½¿ç”¨ä¸Šé¢çš„ç¤ºä¾‹ï¼Œå‰ä¸¤ä¸ªè®¾è®¡æ­¥éª¤å¾ˆå®¹æ˜“ï¼š
- en: '| ;Â [XEnum.v1](#%28tech._xenum..v1%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1203
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [XEnum.v1](#%28tech._xenum..v1%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â renders a simple enumeration as an image |'
  id: totrans-1204
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â renders a simple enumeration as an image |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (render-enum1Â e0)Â e0-rendered)
    |'
  id: totrans-1205
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (render-enum1Â e0)Â e0-rendered)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-enum1Â xe)Â [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29))
    |'
  id: totrans-1206
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-enum1Â xe)Â [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29))
    |'
- en: 'The key step is the development of a template. According to the data definition,
    an element of [XEnum.v1](#%28tech._xenum..v1%29) contains one interesting piece
    of data, namely, the (representation of the) XML elements. The first item is always
    ''ul, so there is no need to extract it, and the second, optional item is a list
    of attributes, which we ignore. With this in mind, the first template draft looks
    just like the one for render-item1:'
  id: totrans-1207
  prefs: []
  type: TYPE_NORMAL
  zh: å…³é”®æ­¥éª¤æ˜¯æ¨¡æ¿çš„å¼€å‘ã€‚æ ¹æ®æ•°æ®å®šä¹‰ï¼Œ[XEnum.v1](#%28tech._xenum..v1%29) çš„ä¸€ä¸ªå…ƒç´ åŒ…å«ä¸€ä¸ªæœ‰è¶£çš„æ•°æ®ç‰‡æ®µï¼Œå³ XML
    å…ƒç´ çš„ï¼ˆè¡¨ç¤ºï¼‰ã€‚ç¬¬ä¸€ä¸ªé¡¹ç›®æ€»æ˜¯ 'ulï¼Œå› æ­¤ä¸éœ€è¦æå–å®ƒï¼Œç¬¬äºŒä¸ªå¯é€‰çš„é¡¹ç›®æ˜¯ä¸€ä¸ªå±æ€§åˆ—è¡¨ï¼Œæˆ‘ä»¬å¿½ç•¥å®ƒã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œç¬¬ä¸€ä¸ªæ¨¡æ¿è‰æ¡ˆçœ‹èµ·æ¥å°±åƒ render-item1
    çš„é‚£ä¸ªï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-enum1Â xe)
    |'
  id: totrans-1208
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-enum1Â xe)
    |'
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (xexpr-contentÂ xe)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))Â ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [XItem.v1](#%28tech._xitem..v1%29)]
    |'
  id: totrans-1209
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (xexpr-contentÂ xe)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))Â ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [XItem.v1](#%28tech._xitem..v1%29)]
    |'
- en: 'While the data-oriented design recipe tells you that you should design a separate
    function whenever you encounter a complex form of data, the abstraction-based
    design recipe from [Abstraction](part_three.html) tells you to reuse an existing
    abstraction, say, a list-processing function from [figuresÂ 95](part_three.html#%28counter._%28figure._fig~3aisl-ho-list%29%29)
    and [96](part_three.html#%28counter._%28figure._fig~3aisl-ho-list2%29%29), when
    possible. Given that render-enum1 is supposed to process a list and create a single
    image from it, the only two list-processing abstractions whose signatures fit
    the bill are [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    and [foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29).
    If you also study their purpose statements, you see a pattern that is like the
    e0-rendered example above, especially for [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29).
    Letâ€™s try to use it, following the reuse design recipe:'
  id: totrans-1210
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶é¢å‘æ•°æ®çš„è®¾è®¡æ–¹æ³•å‘Šè¯‰ä½ ï¼Œæ¯å½“é‡åˆ°å¤æ‚çš„æ•°æ®å½¢å¼æ—¶ï¼Œä½ åº”è¯¥è®¾è®¡ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ï¼Œä½†åŸºäºæŠ½è±¡çš„è®¾è®¡æ–¹æ³•æ¥è‡ª[æŠ½è±¡](part_three.html)ï¼Œå»ºè®®å°½å¯èƒ½é‡ç”¨ç°æœ‰çš„æŠ½è±¡ï¼Œä¾‹å¦‚ï¼Œä»[å›¾
    95](part_three.html#%28counter._%28figure._fig~3aisl-ho-list%29%29)å’Œ[96](part_three.html#%28counter._%28figure._fig~3aisl-ho-list2%29%29)ä¸­çš„åˆ—è¡¨å¤„ç†å‡½æ•°ï¼Œå½“å¯èƒ½æ—¶ã€‚é‰´äº
    render-enum1 åº”è¯¥å¤„ç†åˆ—è¡¨å¹¶ä»ä¸­åˆ›å»ºå•ä¸ªå›¾åƒï¼Œå”¯ä¸€ç¬¦åˆè¦æ±‚çš„ä¸¤ä¸ªåˆ—è¡¨å¤„ç†æŠ½è±¡æ˜¯ [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)å’Œ
    [foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)ã€‚å¦‚æœä½ è¿˜ç ”ç©¶äº†å®ƒä»¬çš„ç”¨é€”è¯´æ˜ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç±»ä¼¼äºä¸Šé¢
    e0-rendered ç¤ºä¾‹çš„æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯å¯¹äº [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)ã€‚è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨å®ƒï¼Œéµå¾ªé‡ç”¨è®¾è®¡æ–¹æ³•ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-enum1Â xe)
    |'
  id: totrans-1211
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    render-enum1 xe)|'
- en: '| Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (xexpr-contentÂ xe))
    |'
  id: totrans-1212
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    content (xexpr-content xe)))|'
- en: '| Â Â Â Â Â Â Â Â Â Â Â ;Â [XItem.v1](#%28tech._xitem..v1%29)  [Image](part_one.html#%28tech._image%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-1213
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼›[XItem.v1](#%28tech._xitem..v1%29)  [å›¾åƒ](part_one.html#%28tech._image%29)
    -> [å›¾åƒ](part_one.html#%28tech._image%29)|'
- en: '| Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (deal-with-oneÂ itemÂ so-far)
    |'
  id: totrans-1214
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    deal-with-one item-so-farï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
  id: totrans-1215
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))|'
- en: '| Â Â Â Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â deal-with-oneÂ [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)Â content)))
    |'
  id: totrans-1216
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â ([æŠ˜å å³](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    deal-with-one [ç©ºå›¾åƒ](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)
    å†…å®¹)))|'
- en: 'From the type matching, you also know that:'
  id: totrans-1217
  prefs: []
  type: TYPE_NORMAL
  zh: ä»ç±»å‹åŒ¹é…ä¸­ï¼Œä½ è¿˜å¯ä»¥äº†è§£åˆ°ï¼š
- en: the first argument to [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    must be a two-argument function;
  id: totrans-1218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼›'
- en: the second argument must be an image; and
  id: totrans-1219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯å›¾åƒï¼›å¹¶ä¸”
- en: the last argument is the list representing XML content.
  id: totrans-1220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æœ€åä¸€ä¸ªå‚æ•°æ˜¯è¡¨ç¤º XML å†…å®¹çš„åˆ—è¡¨ã€‚
- en: 'Naturally [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)
    is the correct starting point.This design-by-reuse focuses our attention on the
    function to be â€œfoldedâ€ over the list. It turns one item and the image that [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    has created so far into another image. The signature for deal-with-one articulates
    this insight. Since the first argument is an [XItem.v1](#%28tech._xitem..v1%29),
    render-item1 is the function that renders it. This yields two images that must
    be combined: the image of the first item and the image of the rest of the items.
    To stack them, we use [above](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29):'
  id: totrans-1221
  prefs: []
  type: TYPE_NORMAL
  zh: è‡ªç„¶åœ° [ç©ºå›¾åƒ](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)
    æ˜¯æ­£ç¡®çš„èµ·ç‚¹ã€‚è¿™ç§é€šè¿‡é‡ç”¨è¿›è¡Œè®¾è®¡çš„æ–¹æ³•å°†æˆ‘ä»¬çš„æ³¨æ„åŠ›é›†ä¸­åœ¨è¦â€œæŠ˜å â€çš„åˆ—è¡¨ä¸Šçš„å‡½æ•°ã€‚å®ƒå°†ä¸€ä¸ªé¡¹ç›®å’Œåˆ°ç›®å‰ä¸ºæ­¢ç”± [æŠ˜å å³](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    åˆ›å»ºçš„å›¾åƒè½¬æ¢æˆå¦ä¸€ä¸ªå›¾åƒã€‚deal-with-one çš„ç­¾åé˜è¿°äº†è¿™ä¸€æ´å¯Ÿã€‚ç”±äºç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ [XItem.v1](#%28tech._xitem..v1%29)ï¼Œrender-item1
    æ˜¯æ¸²æŸ“å®ƒçš„å‡½æ•°ã€‚è¿™äº§ç”Ÿäº†ä¸¤ä¸ªå¿…é¡»ç»„åˆçš„å›¾åƒï¼šç¬¬ä¸€ä¸ªé¡¹ç›®çš„å›¾åƒå’Œå…¶ä½™é¡¹ç›®çš„å›¾åƒã€‚ä¸ºäº†å †å å®ƒä»¬ï¼Œæˆ‘ä»¬ä½¿ç”¨ [åœ¨ä¸Šæ–¹](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29)ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-enum1Â xe)
    |'
  id: totrans-1222
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (render-enum1 xe) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (xexpr-contentÂ xe))
    |'
  id: totrans-1223
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    content (xexpr-content xe)ï¼‰ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [XItem.v1](#%28tech._xitem..v1%29)  [Image](part_one.html#%28tech._image%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-1224
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â [XItem.v1](#%28tech._xitem..v1%29)  [Image](part_one.html#%28tech._image%29)
    -> [Image](part_one.html#%28tech._image%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (deal-with-oneÂ itemÂ so-far)
    |'
  id: totrans-1225
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (deal-with-one item so-far) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([above/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%2Falign%29%29)Â ''left
    |'
  id: totrans-1226
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([åœ¨ä¸Šæ–¹å¯¹é½](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%2Falign%29%29)
    ''left |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (render-item1Â item) |'
  id: totrans-1227
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (render-item1 item) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â so-far))) |'
  id: totrans-1228
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â so-far))) |'
- en: '| Â Â Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â deal-with-oneÂ [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)Â content)))
    |'
  id: totrans-1229
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([æŠ˜å å³](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    deal-with-one [ç©ºå›¾åƒ](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)
    content))) |'
- en: '| ;Â An XItem.v2 is one of: |'
  id: totrans-1230
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An XItem.v2 is one of: |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [XWord](#%28tech._xword%29)  ''()))
    |'
  id: totrans-1231
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    [XWord](#%28tech._xword%29) ''())) |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]  ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [XWord](#%28tech._xword%29))))
    |'
  id: totrans-1232
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]  ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [XWord](#%28tech._xword%29))))
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [XEnum.v2](#%28tech._xenum..v2%29)  ''()))
    |'
  id: totrans-1233
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [XEnum.v2](#%28tech._xenum..v2%29)  ''()))
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]  ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [XEnum.v2](#%28tech._xenum..v2%29))))
    |'
  id: totrans-1234
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''li  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]  ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [XEnum.v2](#%28tech._xenum..v2%29))))
    |'
- en: '| ;Â  |'
  id: totrans-1235
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â  |'
- en: '| ;Â An XEnum.v2 is one of: |'
  id: totrans-1236
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An XEnum.v2 is one of: |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''ul  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [XItem.v2](#%28tech._xitem..v2%29)])
    |'
  id: totrans-1237
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''ul  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [XItem.v2](#%28tech._xitem..v2%29)])
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''ul  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [XItem.v2](#%28tech._xitem..v2%29)]))
    |'
  id: totrans-1238
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''ul  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute](#%28tech._attribute%29)]  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [XItem.v2](#%28tech._xitem..v2%29)]))
    |'
- en: ''
  id: totrans-1239
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 127: A realistic data representation of XML enumerations'
  id: totrans-1240
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾Â 127ï¼šXML æšä¸¾çš„ç°å®æ•°æ®è¡¨ç¤º
- en: Flat enumerations are common, but they are also a simple approximation of the
    full-fledged case. In the real world, web browsers must cope with arbitrarily
    nested enumerations that arrive over the web. In XML and its web browser dialect
    XHTML, nesting is straightforward. Any element may show up as the content of any
    other element. To represent thisAre you wondering whether arbitrary nesting is
    the correct way to think about this problem? If so, develop a data definition
    that allows only three levels of nesting and then use it. relationship in our
    limited XHTML representation, we say that an item is either a word or another
    enumeration. [FigureÂ 127](#%28counter._%28figure._fig~3axenum%29%29) displays
    the second revision of the data definition. It includes a revision of the data
    definition for enumerations so that the first definition refers to the correct
    form of item.
  id: totrans-1241
  prefs: []
  type: TYPE_NORMAL
  zh: å¹³é¢æšä¸¾å¾ˆå¸¸è§ï¼Œä½†å®ƒä»¬ä¹Ÿæ˜¯å®Œæ•´æšä¸¾æƒ…å†µçš„ä¸€ä¸ªç®€å•è¿‘ä¼¼ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œç½‘ç»œæµè§ˆå™¨å¿…é¡»å¤„ç†é€šè¿‡ç½‘ç»œåˆ°è¾¾çš„ä»»æ„åµŒå¥—çš„æšä¸¾ã€‚åœ¨XMLåŠå…¶ç½‘ç»œæµè§ˆå™¨æ–¹è¨€XHTMLä¸­ï¼ŒåµŒå¥—æ˜¯ç›´æ¥çš„ã€‚ä»»ä½•å…ƒç´ éƒ½å¯ä»¥ä½œä¸ºä»»ä½•å…¶ä»–å…ƒç´ çš„å†…å®¹å‡ºç°ã€‚ä¸ºäº†åœ¨æˆ‘ä»¬çš„æœ‰é™XHTMLè¡¨ç¤ºä¸­è¡¨ç¤ºè¿™ç§å…³ç³»ï¼Œæˆ‘ä»¬è¯´ä¸€ä¸ªé¡¹ç›®è¦ä¹ˆæ˜¯ä¸€ä¸ªå•è¯ï¼Œè¦ä¹ˆæ˜¯å¦ä¸€ä¸ªæšä¸¾ã€‚[å›¾Â 127](#%28counter._%28figure._fig~3axenum%29%29)
    æ˜¾ç¤ºäº†æ•°æ®å®šä¹‰çš„ç¬¬äºŒç‰ˆä¿®è®¢ã€‚å®ƒåŒ…æ‹¬æšä¸¾çš„æ•°æ®å®šä¹‰ä¿®è®¢ï¼Œä»¥ä¾¿ç¬¬ä¸€ä¸ªå®šä¹‰å¼•ç”¨äº†æ­£ç¡®çš„é¡¹ç›®å½¢å¼ã€‚
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â SIZEÂ 12)Â ;Â font
    size |'
  id: totrans-1242
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    SIZE 12)Â ;Â å­—ä½“å¤§å° |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â COLORÂ "black")Â ;Â font
    color |'
  id: totrans-1243
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    COLOR "black")Â ;Â å­—ä½“é¢œè‰² |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â BTÂ ;Â a
    graphical constant |'
  id: totrans-1244
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    BTÂ ;Â ä¸€ä¸ªå›¾å½¢å¸¸é‡ |'
- en: '| Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 1Â ''solidÂ BLACK)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "
    "Â SIZEÂ COLOR))) |'
  id: totrans-1245
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)
    ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)
    1 ''solid BLACK) ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)
    " " SIZE COLOR))) |'
- en: '| Â  |'
  id: totrans-1246
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â [Image](part_one.html#%28tech._image%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1247
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [Image](part_one.html#%28tech._image%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â marks item with bulletÂ Â  |'
  id: totrans-1248
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â ç”¨é¡¹ç›®ç¬¦å·æ ‡è®°é¡¹ç›®Â Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (bulletizeÂ item)
    |'
  id: totrans-1249
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (bulletize item) |'
- en: '| Â Â ([beside/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%2Falign%29%29)Â ''centerÂ BTÂ item))
    |'
  id: totrans-1250
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([beside/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%2Falign%29%29)
    ''center BT item)) |'
- en: '| Â  |'
  id: totrans-1251
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â [XEnum.v2](#%28tech._xenum..v2%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1252
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [XEnum.v2](#%28tech._xenum..v2%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â renders an [XEnum.v2](#%28tech._xenum..v2%29) as an image |'
  id: totrans-1253
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â å°†[XEnum.v2](#%28tech._xenum..v2%29)æ¸²æŸ“ä¸ºå›¾åƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-enumÂ xe)
    |'
  id: totrans-1254
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (render-enum xe) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (xexpr-contentÂ xe))
    |'
  id: totrans-1255
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)(([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    content (xexpr-content xe))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [XItem.v2](#%28tech._xitem..v2%29)  [Image](part_one.html#%28tech._image%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-1256
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â [XItem.v2](#%28tech._xitem..v2%29)  [Image](part_one.html#%28tech._image%29)
    -> [Image](part_one.html#%28tech._image%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (deal-with-oneÂ itemÂ so-far)
    |'
  id: totrans-1257
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (deal-with-oneÂ itemÂ so-far)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([above/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%2Falign%29%29)Â ''leftÂ (render-itemÂ item)Â so-far)))
    |'
  id: totrans-1258
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([above/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%2Falign%29%29)Â ''leftÂ (render-itemÂ item)Â so-far)))
    |'
- en: '| Â Â Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â deal-with-oneÂ [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)Â content)))
    |'
  id: totrans-1259
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â deal-with-oneÂ [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)Â content)])
    |'
- en: '| Â  |'
  id: totrans-1260
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [XItem.v2](#%28tech._xitem..v2%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1261
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [XItem.v2](#%28tech._xitem..v2%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â renders one [XItem.v2](#%28tech._xitem..v2%29) as an image |'
  id: totrans-1262
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ¸²æŸ“ä¸€ä¸ª [XItem.v2](#%28tech._xitem..v2%29) ä¸ºå›¾åƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-itemÂ an-item)
    |'
  id: totrans-1263
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-itemÂ an-item)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â (xexpr-contentÂ an-item))))
    |'
  id: totrans-1264
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â (xexpr-contentÂ an-item))))
    |'
- en: '| Â Â Â Â (bulletize |'
  id: totrans-1265
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (bulletize |'
- en: '| Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1266
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â [(word?Â content) |'
  id: totrans-1267
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â [(word?Â content) |'
- en: '| Â Â Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â (word-textÂ content)Â SIZEÂ BLACK)]
    |'
  id: totrans-1268
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â (word-textÂ content)Â SIZEÂ BLACK)]
    |'
- en: '| Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (render-enumÂ content)]))))
    |'
  id: totrans-1269
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (render-enumÂ content)]))))
    |'
- en: ''
  id: totrans-1270
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 128: Refining functions to match refinements of data definitions'
  id: totrans-1271
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 128ï¼šå°†å‡½æ•°ç»†åŒ–ä»¥åŒ¹é…æ•°æ®å®šä¹‰çš„ç»†åŒ–
- en: The next question is how this change to the data definition affects the rendering
    functions. Put differently, we need to revise render-enum1 and render-item1 so
    that they can cope with [XEnum.v2](#%28tech._xenum..v2%29) and [XItem.v2](#%28tech._xitem..v2%29),
    respectively. Software engineers face these kinds of questions all the time, and
    it is another situation where the design recipe shines.
  id: totrans-1272
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚ä½•è¿™ä¸ªæ•°æ®å®šä¹‰çš„æ”¹å˜å½±å“æ¸²æŸ“å‡½æ•°ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ render-enum1 å’Œ render-item1ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥å¤„ç† [XEnum.v2](#%28tech._xenum..v2%29)
    å’Œ [XItem.v2](#%28tech._xitem..v2%29)ï¼Œåˆ†åˆ«ã€‚è½¯ä»¶å·¥ç¨‹å¸ˆç»å¸¸é¢ä¸´è¿™ç±»é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯è®¾è®¡é£Ÿè°±å¤§æ”¾å¼‚å½©çš„å¦ä¸€ç§æƒ…å†µã€‚
- en: '[FigureÂ 128](#%28counter._%28figure._fig~3aenum%29%29) shows the complete answer.
    Since the change is confined to the data definitions for [XItem.v2](#%28tech._xitem..v2%29),
    it should not come as a surprise that the change to the rendering program shows
    up in the function for rendering items. While render-item1 does not need to distinguish
    between different forms of [XItem.v1](#%28tech._xitem..v1%29), render-item is
    forced to use a [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    because [XItem.v2](#%28tech._xitem..v2%29) lists two different kinds of items.
    Given that this data definition is close to one from the real world, the distinguishing
    characteristic is not something simpleâ€”<wbr>like ''() vs [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)â€”<wbr>but
    a specific piece of the given item. If the itemâ€™s content is a [XWord](#%28tech._xword%29),
    the rendering function proceeds as before. Otherwise, the item contains an enumeration,
    in which case render-item uses render-enum to deal with the data, because the
    data definition for [XItem.v2](#%28tech._xitem..v2%29) refers back to [XEnum.v2](#%28tech._xenum..v2%29)
    precisely at this point.'
  id: totrans-1273
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾ 128](#%28counter._%28figure._fig~3aenum%29%29) å±•ç¤ºäº†å®Œæ•´çš„ç­”æ¡ˆã€‚ç”±äºæ›´æ”¹ä»…é™äº [XItem.v2](#%28tech._xitem..v2%29)
    çš„æ•°æ®å®šä¹‰ï¼Œå› æ­¤æ›´æ”¹åœ¨æ¸²æŸ“ç¨‹åºä¸­çš„å‡½æ•°ä¸­æ˜¾ç¤ºå¹¶ä¸ä»¤äººæƒŠè®¶ã€‚è™½ç„¶ render-item1 ä¸éœ€è¦åŒºåˆ† [XItem.v1](#%28tech._xitem..v1%29)
    çš„ä¸åŒå½¢å¼ï¼Œä½† render-item è¢«è¿«ä½¿ç”¨ [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    å› ä¸º [XItem.v2](#%28tech._xitem..v2%29) åˆ—å‡ºäº†ä¸¤ç§ä¸åŒç±»å‹çš„é¡¹ã€‚é‰´äºè¿™ä¸ªæ•°æ®å®šä¹‰æ¥è¿‘ç°å®ä¸–ç•Œä¸­çš„ä¸€ä¸ªï¼Œå…¶åŒºåˆ†ç‰¹å¾ä¸æ˜¯ç®€å•çš„ä¸œè¥¿â€”â€”æ¯”å¦‚
    ''() ä¸ [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29%)â€”â€”è€Œæ˜¯ç»™å®šé¡¹çš„ç‰¹å®šéƒ¨åˆ†ã€‚å¦‚æœé¡¹çš„å†…å®¹æ˜¯
    [XWord](#%28tech._xword%29)ï¼Œåˆ™æ¸²æŸ“å‡½æ•°æŒ‰ä¹‹å‰çš„æ–¹å¼è¿›è¡Œã€‚å¦åˆ™ï¼Œé¡¹åŒ…å«ä¸€ä¸ªæšä¸¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œrender-item ä½¿ç”¨ render-enum
    å¤„ç†æ•°æ®ï¼Œå› ä¸º [XItem.v2](#%28tech._xitem..v2%29) çš„æ•°æ®å®šä¹‰åœ¨æ­¤å¤„ç²¾ç¡®åœ°å¼•ç”¨äº† [XEnum.v2](#%28tech._xenum..v2%29)ã€‚'
- en: ExerciseÂ 373\. [FigureÂ 128](#%28counter._%28figure._fig~3aenum%29%29) is missing
    test cases. Develop test cases for all the functions.
  id: totrans-1274
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  373. [å›¾ 128](#%28counter._%28figure._fig~3aenum%29%29) ç¼ºå°‘æµ‹è¯•ç”¨ä¾‹ã€‚ä¸ºæ‰€æœ‰å‡½æ•°å¼€å‘æµ‹è¯•ç”¨ä¾‹ã€‚
- en: ExerciseÂ 374\. The data definitions in [figureÂ 127](#%28counter._%28figure._fig~3axenum%29%29)
    use [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29).
    Rewrite them so they use [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29).
    Then use the recipe to design the rendering functions for [XEnum.v2](#%28tech._xenum..v2%29)
    and [XItem.v2](#%28tech._xitem..v2%29) from scratch. You should come up with the
    same definitions as in [figureÂ 128](#%28counter._%28figure._fig~3aenum%29%29).
  id: totrans-1275
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  374. [å›¾ 127](#%28counter._%28figure._fig~3axenum%29%29) ä¸­çš„æ•°æ®å®šä¹‰ä½¿ç”¨ [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)ã€‚å°†å®ƒä»¬é‡å†™ä¸ºä½¿ç”¨
    [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)ã€‚ç„¶åä»å¤´å¼€å§‹ä½¿ç”¨é…æ–¹è®¾è®¡
    [XEnum.v2](#%28tech._xenum..v2%29) å’Œ [XItem.v2](#%28tech._xitem..v2%29) çš„æ¸²æŸ“å‡½æ•°ã€‚ä½ åº”è¯¥å¾—å‡ºä¸
    [å›¾ 128](#%28counter._%28figure._fig~3aenum%29%29) ä¸­ç›¸åŒçš„å®šä¹‰ã€‚
- en: ExerciseÂ 375\. The wrapping of [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    with
  id: totrans-1276
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  375. å¯¹ [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    çš„åŒ…è£…
- en: ([beside/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%2Falign%29%29)Â 'centerÂ BTÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
  id: totrans-1277
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([beside/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%2Falign%29%29)Â 'centerÂ BTÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
- en: may surprise you. Edit the function definition so that the wrap-around appears
    once in each clause. Why are you confident that your change works? Which version
    do you prefer?
  id: totrans-1278
  prefs: []
  type: TYPE_NORMAL
  zh: å¯èƒ½ä¼šä»¤ä½ æƒŠè®¶ã€‚ç¼–è¾‘å‡½æ•°å®šä¹‰ï¼Œä»¥ä¾¿åœ¨æ¯ä¸ªå­å¥ä¸­åªå‡ºç°ä¸€æ¬¡åŒ…è£…ã€‚ä½ ä¸ºä»€ä¹ˆç›¸ä¿¡ä½ çš„æ›´æ”¹æ˜¯æœ‰æ•ˆçš„ï¼Ÿä½ æ›´å–œæ¬¢å“ªä¸ªç‰ˆæœ¬ï¼Ÿ
- en: ExerciseÂ 376\. Design a program that counts all "hello"s in an instance of [XEnum.v2](#%28tech._xenum..v2%29).
  id: totrans-1279
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  376. è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œç”¨äºè®¡ç®— [XEnum.v2](#%28tech._xenum..v2%29) å®ä¾‹ä¸­æ‰€æœ‰ "hello" çš„æ•°é‡ã€‚
- en: ExerciseÂ 377\. Design a program that replaces all "hello"s with "bye" in an
    enumeration.
  id: totrans-1280
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  377. è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œå°†æšä¸¾ä¸­çš„æ‰€æœ‰ "hello" æ›¿æ¢ä¸º "bye"ã€‚
- en: 22.3Domain-Specific Languages[ğŸ”—](#(part._sec~3aconfig) "Link to here")
  id: totrans-1281
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 22.3 é¢†åŸŸç‰¹å®šè¯­è¨€[ğŸ”—](#(part._sec~3aconfig) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Engineers routinely build large software systems that require a configuration
    for specific contexts before they can be run. This configuration task tends to
    fall to systems administrators who must deal with many different software systems.
    The word â€œconfigurationâ€ refers to the data that the main function needs when
    the program is launched at the command-line or via a gesture (mouse click, swipe).
    In a sense a configuration is just an additional argument, though it is usually
    so complex that program designers prefer to handing it over via a file.
  id: totrans-1282
  prefs: []
  type: TYPE_NORMAL
  zh: å·¥ç¨‹å¸ˆé€šå¸¸æ„å»ºéœ€è¦ç‰¹å®šä¸Šä¸‹æ–‡é…ç½®æ‰èƒ½è¿è¡Œçš„å¤§å‹è½¯ä»¶ç³»ç»Ÿã€‚è¿™é¡¹é…ç½®ä»»åŠ¡å¾€å¾€è½åœ¨ç³»ç»Ÿç®¡ç†å‘˜èº«ä¸Šï¼Œä»–ä»¬å¿…é¡»å¤„ç†è®¸å¤šä¸åŒçš„è½¯ä»¶ç³»ç»Ÿã€‚å•è¯â€œé…ç½®â€æŒ‡çš„æ˜¯ç¨‹åºåœ¨å‘½ä»¤è¡Œæˆ–é€šè¿‡æ‰‹åŠ¿ï¼ˆé¼ æ ‡ç‚¹å‡»ã€æ»‘åŠ¨ï¼‰å¯åŠ¨æ—¶ä¸»å‡½æ•°æ‰€éœ€çš„æ•°æ®ã€‚åœ¨æŸç§æ„ä¹‰ä¸Šï¼Œé…ç½®åªæ˜¯ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼Œå°½ç®¡å®ƒé€šå¸¸å¦‚æ­¤å¤æ‚ï¼Œä»¥è‡³äºç¨‹åºè®¾è®¡è€…æ›´æ„¿æ„é€šè¿‡æ–‡ä»¶æ¥ä¼ é€’å®ƒã€‚
- en: Since software engineers cannot assume that systems administrators know every
    programming language, they tend to devise simple, special-purpose configuration
    languages. These special languages are also known as domain-specific languages
    (DSL).Because configurations abstract a program over various pieces of data, Paul
    Hudak argued in the 1990s that DSLs are the ultimate abstractions, that is, that
    they generalize the ideas of [Abstraction](part_three.html) to perfection. Developing
    these DSLs around a common core, say the well-known XML syntax, simplifies life
    for systems administrators. They can write small XML â€œprogramsâ€ and thus configure
    the systems they must launch.
  id: totrans-1283
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºè½¯ä»¶å·¥ç¨‹å¸ˆä¸èƒ½å‡è®¾ç³»ç»Ÿç®¡ç†å‘˜äº†è§£æ¯ç§ç¼–ç¨‹è¯­è¨€ï¼Œä»–ä»¬å€¾å‘äºè®¾è®¡ç®€å•ã€ä¸“ç”¨çš„é…ç½®è¯­è¨€ã€‚è¿™äº›ä¸“ç”¨è¯­è¨€ä¹Ÿè¢«ç§°ä¸ºé¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰ã€‚å› ä¸ºé…ç½®æŠ½è±¡äº†ç¨‹åºåœ¨å¤šä¸ªæ•°æ®ç‰‡æ®µä¸Šçš„æ¦‚å¿µï¼ŒPaul
    Hudak åœ¨ 1990 å¹´ä»£æå‡ºï¼ŒDSL æ˜¯ç»ˆææŠ½è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬å®Œç¾åœ°æ¦‚æ‹¬äº† [æŠ½è±¡](part_three.html) çš„æ€æƒ³ã€‚å›´ç»•ä¸€ä¸ªå…±åŒçš„æ ¸å¿ƒï¼ˆæ¯”å¦‚ä¼—æ‰€å‘¨çŸ¥çš„
    XML è¯­æ³•ï¼‰å¼€å‘è¿™äº› DSL ç®€åŒ–äº†ç³»ç»Ÿç®¡ç†å‘˜çš„ç”Ÿæ´»ã€‚ä»–ä»¬å¯ä»¥ç¼–å†™å°çš„ XML â€œç¨‹åºâ€ï¼Œä»è€Œé…ç½®ä»–ä»¬å¿…é¡»å¯åŠ¨çš„ç³»ç»Ÿã€‚
- en: While the construction of a DSL is often considered a task for an advanced programmer,
    you are actually in a position already to understand, appreciate, and implement
    a reasonably complex DSL. This section explains how it all works. It first reacquaints
    you with finite state machines (FSMs). Then it shows how to design, implement,
    and program a DSL for configuring a system that simulates arbitrary FSMs.
  id: totrans-1284
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶æ„å»º DSL é€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸€é¡¹é«˜çº§ç¨‹åºå‘˜çš„ä»»åŠ¡ï¼Œä½†å®é™…ä¸Šä½ å·²ç»å¤„äºç†è§£ã€æ¬£èµå’Œå®ç°ä¸€ä¸ªç›¸å½“å¤æ‚çš„ DSL çš„ä½ç½®ã€‚æœ¬èŠ‚è§£é‡Šäº†è¿™ä¸€åˆ‡æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å®ƒé¦–å…ˆè®©ä½ é‡æ–°ç†Ÿæ‚‰æœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰ã€‚ç„¶åå®ƒå±•ç¤ºäº†å¦‚ä½•è®¾è®¡ã€å®ç°å’Œç¼–ç¨‹ä¸€ä¸ªç”¨äºé…ç½®æ¨¡æ‹Ÿä»»æ„
    FSM çš„ç³»ç»Ÿçš„ DSLã€‚
- en: Finite State Machines Remembered The theme of finite state machines is an important
    one in computing, and this book has presented it several times. Here we reuse
    the example from [Finite State Machines](part_two.html#%28part._sec~3asec-fsm-list%29)
    as the component for which we wish to design and implement a configuration DSL.
  id: totrans-1285
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰é™çŠ¶æ€æœº è®°å¿† æœ‰é™çŠ¶æ€æœºçš„ä¸»é¢˜åœ¨è®¡ç®—æœºç§‘å­¦ä¸­éå¸¸é‡è¦ï¼Œè¿™æœ¬ä¹¦å·²ç»å¤šæ¬¡ä»‹ç»äº†å®ƒã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é‡ç”¨ [æœ‰é™çŠ¶æ€æœº](part_two.html#%28part._sec~3asec-fsm-list%29)
    ä¸­çš„ä¾‹å­ï¼Œä½œä¸ºæˆ‘ä»¬å¸Œæœ›è®¾è®¡å’Œå®ç°é…ç½® DSL çš„ç»„ä»¶ã€‚
- en: '| ;Â An FSM is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1Transition](#%28tech._1transition%29)]
    |'
  id: totrans-1286
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰æ˜¯ä¸€ä¸ª [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29)  [1è½¬æ¢](#%28tech._1transition%29)]
    |'
- en: '| ;Â A 1Transition is a list of two items: |'
  id: totrans-1287
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ª 1è½¬æ¢æ˜¯ä¸¤ä¸ªé¡¹ç›®çš„åˆ—è¡¨ï¼š |'
- en: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [FSM-State](part_two.html#%28tech._fsm._state%29)  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [FSM-State](part_two.html#%28tech._fsm._state%29)  ''()))
    |'
  id: totrans-1288
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [FSM-State](part_two.html#%28tech._fsm._state%29)  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [FSM-State](part_two.html#%28tech._fsm._state%29)  ''()))
    |'
- en: '| ;Â An FSM-State is a [String](part_one.html#%28tech._string%29) that specifies
    a color |'
  id: totrans-1289
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ª FSM-çŠ¶æ€æ˜¯ä¸€ä¸ª [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) æŒ‡å®šä¸€ä¸ªé¢œè‰² |'
- en: '| Â  |'
  id: totrans-1290
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â data examples |'
  id: totrans-1291
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ•°æ®ç¤ºä¾‹ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â fsm-traffic
    |'
  id: totrans-1292
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    fsm-traffic |'
- en: '| Â Â ''(("red"Â "green")Â ("green"Â "yellow")Â ("yellow"Â "red"))) |'
  id: totrans-1293
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ''(("red"Â "green")Â ("green"Â "yellow")Â ("yellow"Â "red"))) |'
- en: '| Â  |'
  id: totrans-1294
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [FSM-State](part_two.html#%28tech._fsm._state%29)  [FSM](part_two.html#%28tech._fsm%29)
    -> [FSM-State](part_two.html#%28tech._fsm._state%29) |'
  id: totrans-1295
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [FSM-State](part_two.html#%28tech._fsm._state%29)  [FSM](part_two.html#%28tech._fsm%29)
    -> [FSM-State](part_two.html#%28tech._fsm._state%29) |'
- en: '| ;Â matches the keys pressed by a player with the given [FSM](part_two.html#%28tech._fsm%29)
    |'
  id: totrans-1296
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â matches the keys pressed by a player with the given [FSM](part_two.html#%28tech._fsm%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (simulateÂ state0Â transitions)
    |'
  id: totrans-1297
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (simulateÂ state0Â transitions)
    |'
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â state0Â ;Â [FSM-State](part_two.html#%28tech._fsm._state%29)
    |'
  id: totrans-1298
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â state0Â ;Â [FSM-State](part_two.html#%28tech._fsm._state%29)
    |'
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)
    |'
  id: totrans-1299
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)
    |'
- en: '| Â Â Â Â Â Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (current)
    |'
  id: totrans-1300
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (current)
    |'
- en: '| Â Â Â Â Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 100Â "solid"Â current))]
    |'
  id: totrans-1301
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 100Â "solid"Â current))]
    |'
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)
    |'
  id: totrans-1302
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)
    |'
- en: '| Â Â Â Â Â Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (currentÂ key-event)
    |'
  id: totrans-1303
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (currentÂ key-event)
    |'
- en: '| Â Â Â Â Â Â Â Â (findÂ transitionsÂ current))])) |'
  id: totrans-1304
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â (findÂ transitionsÂ current))])) |'
- en: '| Â  |'
  id: totrans-1305
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [X Y] [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List](part_three.html#%28tech._sim-dd._list%29)  X  Y]]
    X -> Y |'
  id: totrans-1306
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [X Y] [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List](part_three.html#%28tech._sim-dd._list%29)  X  Y]]
    X -> Y |'
- en: '| ;Â finds the matching Y for the given X in alist |'
  id: totrans-1307
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â finds the matching Y for the given X in alist |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (findÂ alistÂ x)
    |'
  id: totrans-1308
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (findÂ alistÂ x)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â fmÂ ([assoc](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._assoc%29%29)Â xÂ alist)))
    |'
  id: totrans-1309
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â fmÂ ([assoc](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._assoc%29%29)Â xÂ alist)))
    |'
- en: '| Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â fm)Â ([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â fm)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "not
    found")))) |'
  id: totrans-1310
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)
    ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)
    fm) ([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)
    fm) ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)
    "not found"))) |'
- en: ''
  id: totrans-1311
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 129: Finite state machines, revisited'
  id: totrans-1312
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾129ï¼šæœ‰é™çŠ¶æ€æœºï¼Œå›é¡¾
- en: 'For convenience, [figureÂ 129](#%28counter._%28figure._fig~3afsm-again%29%29)
    presents the entire code again, though reformulated using just lists and using
    the full power of ISL+. The program consists of two data definitions, one data
    example, and two function definitions: simulate and find. Unlike the related programs
    in preceding chapters, this one represents a transition as a list of two items:
    the current state and the next one.'
  id: totrans-1313
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æ–¹ä¾¿ï¼Œ[å›¾129](#%28counter._%28figure._fig~3afsm-again%29%29) å†æ¬¡å±•ç¤ºäº†æ•´ä¸ªä»£ç ï¼Œå°½ç®¡å®ƒä»…ä½¿ç”¨åˆ—è¡¨é‡æ–°ç¼–å†™ï¼Œå¹¶å……åˆ†åˆ©ç”¨äº†ISL+çš„å…¨éƒ¨åŠŸèƒ½ã€‚è¯¥ç¨‹åºåŒ…æ‹¬ä¸¤ä¸ªæ•°æ®å®šä¹‰ã€ä¸€ä¸ªæ•°æ®ç¤ºä¾‹å’Œä¸¤ä¸ªå‡½æ•°å®šä¹‰ï¼šsimulateå’Œfindã€‚ä¸å‰é¢ç« èŠ‚ä¸­çš„ç›¸å…³ç¨‹åºä¸åŒï¼Œè¿™ä¸ªç¨‹åºå°†è½¬æ¢è¡¨ç¤ºä¸ºä¸¤ä¸ªé¡¹ç›®çš„åˆ—è¡¨ï¼šå½“å‰çŠ¶æ€å’Œä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚
- en: The main function, simulate, consumes a transition table and an initial state;
    it then evaluates a [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression, which reacts to each key event with a state transition. The states
    are displayed as colored squares. The [to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)
    and [on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)
    clauses are specified with [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    expressions that consume the current state, plus the actual key event, and that
    produce an image or the next state, respectively.
  id: totrans-1314
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸»è¦å‡½æ•°simulateæ¥å—ä¸€ä¸ªè½¬æ¢è¡¨å’Œä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼›ç„¶åè¯„ä¼°ä¸€ä¸ª[å¤§çˆ†ç‚¸](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)è¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼å¯¹æ¯ä¸ªé”®äº‹ä»¶åšå‡ºçŠ¶æ€è½¬æ¢çš„ååº”ã€‚çŠ¶æ€ä»¥å½©è‰²æ–¹å—çš„å½¢å¼æ˜¾ç¤ºã€‚[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)å’Œ[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)å­å¥ä½¿ç”¨[lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)è¡¨è¾¾å¼æŒ‡å®šï¼Œè¿™äº›è¡¨è¾¾å¼æ¶ˆè€—å½“å‰çŠ¶æ€ä»¥åŠå®é™…é”®äº‹ä»¶ï¼Œå¹¶åˆ†åˆ«äº§ç”Ÿå›¾åƒæˆ–ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚
- en: As its signature shows, the auxiliary find function is completely independent
    of the FSM application. It consumes a list of two-item lists and an item, but
    the actual nature of the items is specified via parameters. In the context of
    this program, X and Y represent [FSM-State](part_two.html#%28tech._fsm._state%29)s,
    meaning find consumes a transition table together with a state and produces a
    state. The function body uses the built-in [assoc](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._assoc%29%29)
    function to perform most of the work. Look up the documentation for [assoc](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._assoc%29%29)
    so that you understand why the body of [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    uses an [if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)
    expression.
  id: totrans-1315
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å…¶ç­¾åæ‰€ç¤ºï¼Œè¾…åŠ© find å‡½æ•°å®Œå…¨ç‹¬ç«‹äº FSM åº”ç”¨ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªåŒ…å«ä¸¤é¡¹çš„åˆ—è¡¨å’Œä¸€ä¸ªé¡¹ç›®ï¼Œä½†å®é™…é¡¹ç›®çš„æ€§è´¨æ˜¯é€šè¿‡å‚æ•°æŒ‡å®šçš„ã€‚åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼ŒX å’Œ
    Y ä»£è¡¨ [FSM-State](part_two.html#%28tech._fsm._state%29)ï¼Œè¿™æ„å‘³ç€ find å‡½æ•°æ¶ˆè€—ä¸€ä¸ªè½¬æ¢è¡¨ä»¥åŠä¸€ä¸ªçŠ¶æ€ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªçŠ¶æ€ã€‚å‡½æ•°ä½“ä½¿ç”¨å†…ç½®çš„
    [assoc](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._assoc%29%29)
    å‡½æ•°æ¥å®Œæˆå¤§éƒ¨åˆ†å·¥ä½œã€‚æŸ¥é˜… [assoc](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._assoc%29%29)
    çš„æ–‡æ¡£ï¼Œä»¥ä¾¿äº†è§£ä¸ºä»€ä¹ˆ [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    çš„ä¸»ä½“ä½¿ç”¨äº†ä¸€ä¸ª [if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)
    è¡¨è¾¾å¼ã€‚
- en: ExerciseÂ 378\. Modify the rendering function so that it overlays the name of
    the state onto the colored square.
  id: totrans-1316
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  378ã€‚ä¿®æ”¹æ¸²æŸ“å‡½æ•°ï¼Œä»¥ä¾¿å°†çŠ¶æ€åç§°å åŠ åˆ°å½©è‰²æ–¹å—ä¸Šã€‚
- en: ExerciseÂ 379\. Formulate test cases for find.
  id: totrans-1317
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  379ã€‚ä¸º find å‡½æ•°åˆ¶å®šæµ‹è¯•ç”¨ä¾‹ã€‚
- en: ExerciseÂ 380\. Reformulate the data definition for [1Transition](#%28tech._1transition%29)
    so that it is possible to restrict transitions to certain keystrokes. Try to formulate
    the change so that find continues to work without change. What else do you need
    to change to get the complete program to work? Which part of the design recipe
    provides the answer(s)? See [exerciseÂ 229](part_two.html#%28counter._%28exercise._ex~3afsm-design3%29%29)
    for the original exercise statement.
  id: totrans-1318
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  380ã€‚é‡æ–°åˆ¶å®š [1Transition](#%28tech._1transition%29) çš„æ•°æ®å®šä¹‰ï¼Œä»¥ä¾¿å¯ä»¥å°†è½¬æ¢é™åˆ¶ä¸ºæŸäº›æŒ‰é”®ã€‚å°è¯•åˆ¶å®šè¿™ç§å˜åŒ–ï¼Œä»¥ä¾¿
    find å‡½æ•°åœ¨æ— éœ€æ›´æ”¹çš„æƒ…å†µä¸‹ç»§ç»­å·¥ä½œã€‚ä¸ºäº†ä½¿å®Œæ•´çš„ç¨‹åºæ­£å¸¸å·¥ä½œï¼Œè¿˜éœ€è¦æ›´æ”¹ä»€ä¹ˆï¼Ÿè®¾è®¡é…æ–¹ä¸­çš„å“ªä¸€éƒ¨åˆ†æä¾›äº†ç­”æ¡ˆï¼Ÿå‚è§ [ç»ƒä¹  229](part_two.html#%28counter._%28exercise._ex~3afsm-design3%29%29)
    äº†è§£åŸå§‹çš„ç»ƒä¹ è¯´æ˜ã€‚
- en: Configurations The FSM simulation function uses two arguments, which jointly
    describe a machine. Rather than teach a potential â€œcustomerâ€ how to open an ISL+
    program in DrRacket and launch a function of two arguments, the â€œsellerâ€ of simulate
    may wish to supplement this product with a configuration component.
  id: totrans-1319
  prefs: []
  type: TYPE_NORMAL
  zh: é…ç½® FSM æ¨¡æ‹Ÿå‡½æ•°ä½¿ç”¨ä¸¤ä¸ªå‚æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°å…±åŒæè¿°äº†ä¸€å°æœºå™¨ã€‚ä¸å…¶æ•™ä¸€ä¸ªæ½œåœ¨çš„â€œå®¢æˆ·â€å¦‚ä½•åœ¨ DrRacket ä¸­æ‰“å¼€ ISL+ ç¨‹åºå¹¶å¯åŠ¨ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œæ¨¡æ‹Ÿçš„â€œå–å®¶â€å¯èƒ½å¸Œæœ›ç”¨é…ç½®ç»„ä»¶æ¥è¡¥å……è¿™ä¸ªäº§å“ã€‚
- en: 'A configuration component consists of two parts. The first one is a widely
    used simple language that customers use to formulate the initial arguments for
    a componentâ€™s main function(s). The second one is a function that translates what
    customers say into a function call for the main function. For the FSM simulator,
    we must agree on how we represent finite state machines in XML. By judicious planning,
    [XML as S-expressions](#%28part._sec~3axml%29) presents a series of machine examples
    that look just right for the task. Recall the final machine example in this section:'
  id: totrans-1320
  prefs: []
  type: TYPE_NORMAL
  zh: é…ç½®ç»„ä»¶ç”±ä¸¤éƒ¨åˆ†ç»„æˆã€‚ç¬¬ä¸€éƒ¨åˆ†æ˜¯å®¢æˆ·ç”¨æ¥ä¸ºç»„ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼ˆsï¼‰åˆ¶å®šåˆå§‹å‚æ•°çš„å¹¿æ³›ä½¿ç”¨çš„ç®€å•è¯­è¨€ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯ä¸€ä¸ªå°†å®¢æˆ·æ‰€è¯´çš„è¯è½¬æ¢ä¸ºä¸»åŠŸèƒ½å‡½æ•°è°ƒç”¨çš„å‡½æ•°ã€‚å¯¹äº
    FSM æ¨¡æ‹Ÿå™¨ï¼Œæˆ‘ä»¬å¿…é¡»å°±å¦‚ä½•åœ¨ XML ä¸­è¡¨ç¤ºæœ‰é™çŠ¶æ€æœºè¾¾æˆä¸€è‡´ã€‚é€šè¿‡å‘¨å¯†è§„åˆ’ï¼Œ[XML ä½œä¸º S è¡¨è¾¾å¼](#%28part._sec~3axml%29)å‘ˆç°äº†ä¸€ç³»åˆ—çœ‹èµ·æ¥éå¸¸é€‚åˆè¿™é¡¹ä»»åŠ¡çš„æœºå™¨ç¤ºä¾‹ã€‚å›æƒ³ä¸€ä¸‹æœ¬èŠ‚æœ€åçš„æœºå™¨ç¤ºä¾‹ï¼š
- en: '| <machine initial="red"> |'
  id: totrans-1321
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| <machine initial="red"> |'
- en: '| Â Â <action state="red"Â Â Â Â next="green" /> |'
  id: totrans-1322
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <action state="red"Â Â Â Â next="green" /> |'
- en: '| Â Â <action state="green"Â Â next="yellow" /> |'
  id: totrans-1323
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <action state="green"Â Â next="yellow" /> |'
- en: '| Â Â <action state="yellow" next="red" /> |'
  id: totrans-1324
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <action state="yellow" next="red" /> |'
- en: '| </machine> |'
  id: totrans-1325
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| </machine> |'
- en: 'Compare it to the transition table fsm-traffic from [figureÂ 129](#%28counter._%28figure._fig~3afsm-again%29%29).
    Also recall the agreed-upon [Xexpr](#%28tech._xexpr%29) representation of this
    example:'
  id: totrans-1326
  prefs: []
  type: TYPE_NORMAL
  zh: å°†å…¶ä¸ [å›¾ 129](#%28counter._%28figure._fig~3afsm-again%29%29) ä¸­çš„ fsm-traffic è½¬æ¢è¡¨è¿›è¡Œæ¯”è¾ƒã€‚åŒæ—¶å›å¿†ä¸€ä¸‹è¿™ä¸ªç¤ºä¾‹çš„çº¦å®š
    [Xexpr](#%28tech._xexpr%29) è¡¨ç¤ºå½¢å¼ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â xm0
    |'
  id: totrans-1327
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â xm0
    |'
- en: '| Â Â ''(machineÂ ((initialÂ "red")) |'
  id: totrans-1328
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ''(machineÂ ((initialÂ "red")) |'
- en: '| Â Â Â Â Â (actionÂ ((stateÂ "red")Â (nextÂ "green"))) |'
  id: totrans-1329
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â (actionÂ ((stateÂ "red")Â (nextÂ "green"))) |'
- en: '| Â Â Â Â Â (actionÂ ((stateÂ "green")Â (nextÂ "yellow"))) |'
  id: totrans-1330
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â (actionÂ ((stateÂ "green")Â (nextÂ "yellow"))) |'
- en: '| Â Â Â Â Â (actionÂ ((stateÂ "yellow")Â (nextÂ "red"))))) |'
  id: totrans-1331
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â (actionÂ ((stateÂ "yellow")Â (nextÂ "red"))))) |'
- en: 'What we are still lacking is a general data definition that describes all possible
    [Xexpr](#%28tech._xexpr%29) representations of [FSM](part_two.html#%28tech._fsm%29)s:'
  id: totrans-1332
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä»ç„¶ç¼ºå°‘ä¸€ä¸ªé€šç”¨æ•°æ®å®šä¹‰ï¼Œç”¨äºæè¿°æ‰€æœ‰å¯èƒ½çš„ [FSM](part_two.html#%28tech._fsm%29) çš„ [Xexpr](#%28tech._xexpr%29)
    è¡¨ç¤ºå½¢å¼ï¼š
- en: '| ;Â An XMachine is a nested list of this shape: |'
  id: totrans-1333
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ª XMachine æ˜¯è¿™ç§å½¢çŠ¶çš„åµŒå¥—åˆ—è¡¨ï¼š|'
- en: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''machine  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  `((initial  ,[FSM-State](part_two.html#%28tech._fsm._state%29)))Â Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [X1T](#%28tech._x1t%29)]))
    |'
  id: totrans-1334
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ''machine  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  `((initial  ,[FSM-State](part_two.html#%28tech._fsm._state%29)))Â Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [X1T](#%28tech._x1t%29)]))
    |'
- en: '| ;Â An X1T is a nested list of this shape: |'
  id: totrans-1335
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ª X1T æ˜¯è¿™ç§å½¢çŠ¶çš„åµŒå¥—åˆ—è¡¨ï¼š|'
- en: '| ;Â Â Â `(action  ((state  ,[FSM-State](part_two.html#%28tech._fsm._state%29))  (next  ,[FSM-State](part_two.html#%28tech._fsm._state%29))))
    |'
  id: totrans-1336
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â `(action  ((state  ,[FSM-State](part_two.html#%28tech._fsm._state%29))  (next  ,[FSM-State](part_two.html#%28tech._fsm._state%29))))
    |'
- en: Like [XEnum.v2](#%28tech._xenum..v2%29), [XMachine](#%28tech._xmachine%29) describes
    a subset of all [Xexpr](#%28tech._xexpr%29). Thus, when we design functions that
    process this new form of data, we may continue to use the generic [Xexpr](#%28tech._xexpr%29)
    functions to access pieces.
  id: totrans-1337
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ [XEnum.v2](#%28tech._xenum..v2%29) ç±»ä¼¼ï¼Œ[XMachine](#%28tech._xmachine%29) æè¿°äº†æ‰€æœ‰
    [Xexpr](#%28tech._xexpr%29) çš„ä¸€ä¸ªå­é›†ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬è®¾è®¡å¤„ç†è¿™ç§æ–°å‹æ•°æ®å½¢å¼çš„å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä½¿ç”¨é€šç”¨çš„ [Xexpr](#%28tech._xexpr%29)
    å‡½æ•°æ¥è®¿é—®ç‰‡æ®µã€‚
- en: ExerciseÂ 381\. The definitions of [XMachine](#%28tech._xmachine%29) and [X1T](#%28tech._x1t%29)
    use quote, which is highly inappropriate for novice program designers. Rewrite
    them first to use [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    and then [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29).
  id: totrans-1338
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  381. [XMachine](#%28tech._xmachine%29) å’Œ [X1T](#%28tech._x1t%29) çš„å®šä¹‰ä½¿ç”¨äº†å¼•å·ï¼Œè¿™å¯¹æ–°æ‰‹ç¨‹åºå‘˜æ¥è¯´éå¸¸ä¸åˆé€‚ã€‚é¦–å…ˆå°†å®ƒä»¬é‡å†™ä¸ºä½¿ç”¨
    [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    å’Œ [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)ã€‚
- en: ExerciseÂ 382\. Formulate an XML configuration for the BW machine, which switches
    from white to black and back for every key event. Translate the XML configuration
    into an [XMachine](#%28tech._xmachine%29) representation. See [exerciseÂ 227](part_two.html#%28counter._%28exercise._ex~3afsm-design2%29%29)
    for an implementation of the machine as a program.
  id: totrans-1339
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  382. ä¸º BW æœºå™¨åˆ¶å®šä¸€ä¸ª XML é…ç½®ï¼Œè¯¥é…ç½®åœ¨æ¯ä¸ªæŒ‰é”®äº‹ä»¶æ—¶ä»ç™½è‰²åˆ‡æ¢åˆ°é»‘è‰²ï¼Œç„¶åå†åˆ‡æ¢å›æ¥ã€‚å°† XML é…ç½®è½¬æ¢ä¸º [XMachine](#%28tech._xmachine%29)
    è¡¨ç¤ºå½¢å¼ã€‚å‚è§ [ç»ƒä¹  227](part_two.html#%28counter._%28exercise._ex~3afsm-design2%29%29)
    ä»¥äº†è§£å°†æœºå™¨ä½œä¸ºç¨‹åºå®ç°çš„ç¤ºä¾‹ã€‚
- en: 'Before we dive into the translation part of the configuration problem, letâ€™s
    spell it out:'
  id: totrans-1340
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬æ·±å…¥é…ç½®é—®é¢˜çš„ç¿»è¯‘éƒ¨åˆ†ä¹‹å‰ï¼Œè®©æˆ‘ä»¬æ˜ç¡®ä¸€ä¸‹ï¼š
- en: Sample Problem Design a program that uses an [XMachine](#%28tech._xmachine%29)
    configuration to run simulate.
  id: totrans-1341
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜ï¼šè®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œä½¿ç”¨ [XMachine](#%28tech._xmachine%29) é…ç½®æ¥è¿è¡Œæ¨¡æ‹Ÿã€‚
- en: 'While this problem is specific to our case, it is easy to imagine a generalization
    for similar systems, and we encourage you to do so.The problem statement suggests
    a complete outline:'
  id: totrans-1342
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶è¿™ä¸ªé—®é¢˜é’ˆå¯¹æˆ‘ä»¬çš„æ¡ˆä¾‹æ˜¯ç‰¹å®šçš„ï¼Œä½†å¾ˆå®¹æ˜“æƒ³è±¡ä¸€ä¸ªé€‚ç”¨äºç±»ä¼¼ç³»ç»Ÿçš„æ³›åŒ–ï¼Œæˆ‘ä»¬é¼“åŠ±æ‚¨è¿™æ ·åšã€‚é—®é¢˜é™ˆè¿°å»ºè®®ä¸€ä¸ªå®Œæ•´çš„æ¦‚è¿°ï¼š
- en: '| ;Â [XMachine](#%28tech._xmachine%29) -> [FSM-State](part_two.html#%28tech._fsm._state%29)
    |'
  id: totrans-1343
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [XMachine](#%28tech._xmachine%29) -> [FSM-State](part_two.html#%28tech._fsm._state%29)
    |'
- en: '| ;Â simulates an FSM via the given configuration |'
  id: totrans-1344
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â é€šè¿‡ç»™å®šçš„é…ç½®æ¨¡æ‹Ÿæœ‰é™çŠ¶æ€æœº |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (simulate-xmachineÂ xm)
    |'
  id: totrans-1345
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (simulate-xmachineÂ xm)
    |'
- en: '| Â Â (simulateÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
  id: totrans-1346
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (simulateÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
- en: 'Following the problem statement, our function calls simulate with two to-be-determined
    arguments. What we need to complete the definition are two pieces: an initial
    state and a transition table. These two pieces are part of xm, and we are best
    off wishing for appropriate functions:'
  id: totrans-1347
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç…§é—®é¢˜é™ˆè¿°ï¼Œæˆ‘ä»¬çš„å‡½æ•°è°ƒç”¨ä½¿ç”¨ä¸¤ä¸ªå¾…ç¡®å®šçš„å‚æ•°è¿›è¡Œæ¨¡æ‹Ÿã€‚æˆ‘ä»¬éœ€è¦å®Œæˆå®šä¹‰çš„æ˜¯ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªåˆå§‹çŠ¶æ€å’Œä¸€ä¸ªè½¬æ¢è¡¨ã€‚è¿™ä¸¤ä¸ªéƒ¨åˆ†æ˜¯xmçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æœ€å¥½å¸Œæœ›æœ‰é€‚å½“çš„å‡½æ•°ï¼š
- en: 'xm-state0 extracts the initial state from the given [XMachine](#%28tech._xmachine%29):'
  id: totrans-1348
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: xm-state0ä»ç»™å®šçš„[XMachine](#%28tech._xmachine%29)ä¸­æå–åˆå§‹çŠ¶æ€ï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xm-state0Â xm0)Â "red")
  id: totrans-1349
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xm-state0Â xm0)Â "red")
- en: 'xm->transitions translates the embedded list of [X1T](#%28tech._x1t%29)s into
    a list of [1Transition](#%28tech._1transition%29)s:'
  id: totrans-1350
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: xm->transitionså°†åµŒå…¥çš„[X1T](#%28tech._x1t%29)åˆ—è¡¨è½¬æ¢ä¸º[1Transition](#%28tech._1transition%29)åˆ—è¡¨ï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xm->transitionsÂ xm0)Â fsm-traffic)
  id: totrans-1351
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xm->transitionsÂ xm0)Â fsm-traffic)
- en: '| ;Â [XMachine](#%28tech._xmachine%29) -> [FSM-State](part_two.html#%28tech._fsm._state%29)
    |'
  id: totrans-1352
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [XMachine](#%28tech._xmachine%29) -> [FSM-State](part_two.html#%28tech._fsm._state%29)
    |'
- en: '| ;Â interprets the given configuration as a state machine |'
  id: totrans-1353
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†ç»™å®šçš„é…ç½®è§£é‡Šä¸ºçŠ¶æ€æœº |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (simulate-xmachineÂ xm)
    |'
  id: totrans-1354
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (simulate-xmachineÂ xm)
    |'
- en: '| Â Â (simulateÂ (xm-state0Â xm)Â (xm->transitionsÂ xm))) |'
  id: totrans-1355
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (simulateÂ (xm-state0Â xm)Â (xm->transitionsÂ xm))) |'
- en: '| Â  |'
  id: totrans-1356
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [XMachine](#%28tech._xmachine%29) -> [FSM-State](part_two.html#%28tech._fsm._state%29)
    |'
  id: totrans-1357
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [XMachine](#%28tech._xmachine%29) -> [FSM-State](part_two.html#%28tech._fsm._state%29)
    |'
- en: '| ;Â extracts and translates the transition table from xm0 |'
  id: totrans-1358
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»xm0ä¸­æå–å¹¶è½¬æ¢è½¬æ¢è¡¨ |'
- en: '| Â  |'
  id: totrans-1359
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xm-state0Â xm0)Â "red")
    |'
  id: totrans-1360
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xm-state0Â xm0)Â "red")
    |'
- en: '| Â  |'
  id: totrans-1361
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xm-state0Â xm0)
    |'
  id: totrans-1362
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xm-state0Â xm0)
    |'
- en: '| Â Â (find-attrÂ (xexpr-attrÂ xm0)Â ''initial)) |'
  id: totrans-1363
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (find-attrÂ (xexpr-attrÂ xm0)Â ''initial)) |'
- en: '| Â  |'
  id: totrans-1364
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [XMachine](#%28tech._xmachine%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1Transition](#%28tech._1transition%29)]
    |'
  id: totrans-1365
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [XMachine](#%28tech._xmachine%29) -> [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29)  [1Transition](#%28tech._1transition%29)]
    |'
- en: '| ;Â extracts the transition table from xm |'
  id: totrans-1366
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»xmä¸­æå–è½¬æ¢è¡¨ |'
- en: '| Â  |'
  id: totrans-1367
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (xm->transitionsÂ xm0)Â fsm-traffic)
    |'
  id: totrans-1368
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    (xm->transitions xm0) fsm-traffic) |'
- en: '| Â  |'
  id: totrans-1369
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xm->transitionsÂ xm)
    |'
  id: totrans-1370
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (xm->transitions xm) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [X1T](#%28tech._x1t%29)
    -> [1Transition](#%28tech._1transition%29) |'
  id: totrans-1371
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (; [X1T](#%28tech._x1t%29) -> [1Transition](#%28tech._1transition%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xaction->actionÂ xa)
    |'
  id: totrans-1372
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (xaction->action xa) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â (find-attrÂ (xexpr-attrÂ xa)Â ''state)
    |'
  id: totrans-1373
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    (find-attr (xexpr-attr xa) ''state) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (find-attrÂ (xexpr-attrÂ xa)Â ''next)))) |'
  id: totrans-1374
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (find-attr (xexpr-attr xa) ''next)))) |'
- en: '| Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â xaction->actionÂ (xexpr-contentÂ xm))))
    |'
  id: totrans-1375
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    xaction->action (xexpr-content xm)))) |'
- en: ''
  id: totrans-1376
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 130: Interpreting a DSL program'
  id: totrans-1377
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾130ï¼šè§£é‡ŠDSLç¨‹åº
- en: Since [XMachine](#%28tech._xmachine%29) is a subset of Xexpr, defining xm-state0
    is straightforward. Given that the initial state is specified as an attribute,
    xm-state0 extracts the list of attributes using xexpr-attr and then retrieves
    the value of the 'initial attribute.
  id: totrans-1378
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº[XMachine](#%28tech._xmachine%29)æ˜¯Xexprçš„ä¸€ä¸ªå­é›†ï¼Œå› æ­¤å®šä¹‰xm-state0æ˜¯ç›´æ¥çš„ã€‚é‰´äºåˆå§‹çŠ¶æ€è¢«æŒ‡å®šä¸ºä¸€ä¸ªå±æ€§ï¼Œxm-state0ä½¿ç”¨xexpr-attræå–å±æ€§åˆ—è¡¨ï¼Œç„¶åæ£€ç´¢'initialå±æ€§å€¼ã€‚
- en: 'Letâ€™s then turn to xm->transitions, which translates the transitions inside
    of an XMachine configuration into a transition table:'
  id: totrans-1379
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬è½¬å‘xm->transitionsï¼Œå®ƒå°†XMachineé…ç½®å†…éƒ¨çš„è½¬æ¢è½¬æ¢ä¸ºè½¬æ¢è¡¨ï¼š
- en: '| ;Â [XMachine](#%28tech._xmachine%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1Transition](#%28tech._1transition%29)]
    |'
  id: totrans-1380
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [XMachine](#%28tech._xmachine%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    [1Transition](#%28tech._1transition%29)] |'
- en: '| ;Â extracts & translates the transition table from xm |'
  id: totrans-1381
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ä»xmä¸­æå–å¹¶è½¬æ¢è½¬æ¢è¡¨ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xm->transitionsÂ xm)
    |'
  id: totrans-1382
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (xm->transitions xm) |'
- en: '| Â ''()) |'
  id: totrans-1383
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆï¼‰ |'
- en: 'The name of the function prescribes the signature and suggests a purpose statement.
    Our purpose statement describes a two-step process: (1) extract the Xexpr representation
    of the transitions and (2) translate them into an instance of [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    [1Transition](#%28tech._1transition%29)].While the extraction part obviously uses
    xexpr-content to get the list, the translation part calls for some more analysis.
    If you look back to the data definition of [XMachine](#%28tech._xmachine%29),
    you see that the content of the [Xexpr](#%28tech._xexpr%29) is a list of [X1T](#%28tech._x1t%29)s.
    The signature tells us that the transition table is a list of [1Transition](#%28tech._1transition%29)s.
    Indeed, it is quite obvious that each item in the former list is translated into
    one item of the latter, which suggests a use of [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29):'
  id: totrans-1384
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°çš„åç§°è§„å®šäº†ç­¾åå¹¶æš—ç¤ºäº†ä¸€ä¸ªç›®çš„å£°æ˜ã€‚æˆ‘ä»¬çš„ç›®çš„å£°æ˜æè¿°äº†ä¸€ä¸ªä¸¤æ­¥è¿‡ç¨‹ï¼šï¼ˆ1ï¼‰æå–è½¬æ¢çš„Xexprè¡¨ç¤ºå½¢å¼ï¼Œï¼ˆ2ï¼‰å°†å®ƒä»¬è½¬æ¢æˆ[[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29)
    [1è½¬æ¢](#%28tech._1transition%29)]çš„ä¸€ä¸ªå®ä¾‹ã€‚è™½ç„¶æå–éƒ¨åˆ†æ˜¾ç„¶ä½¿ç”¨xexpr-contentæ¥è·å–åˆ—è¡¨ï¼Œä½†è½¬æ¢éƒ¨åˆ†éœ€è¦æ›´å¤šçš„åˆ†æã€‚å¦‚æœä½ å›é¡¾[XMachine](#%28tech._xmachine%29)çš„æ•°æ®å®šä¹‰ï¼Œä½ ä¼šçœ‹åˆ°[Xexpr](#%28tech._xexpr%29)çš„å†…å®¹æ˜¯ä¸€ä¸ª[X1T](#%28tech._x1t%29)çš„åˆ—è¡¨ã€‚ç­¾åå‘Šè¯‰æˆ‘ä»¬è½¬æ¢è¡¨æ˜¯ä¸€ä¸ª[1è½¬æ¢](#%28tech._1transition%29)çš„åˆ—è¡¨ã€‚ç¡®å®ï¼Œå¾ˆæ˜æ˜¾å‰ä¸€ä¸ªåˆ—è¡¨ä¸­çš„æ¯ä¸ªé¡¹ç›®éƒ½è½¬æ¢æˆäº†åä¸€ä¸ªåˆ—è¡¨ä¸­çš„ä¸€ä¸ªé¡¹ç›®ï¼Œè¿™æš—ç¤ºäº†ä½¿ç”¨[æ˜ å°„](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xm->transitionsÂ xm)
    |'
  id: totrans-1385
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ï¼ˆxm->transitions xmï¼‰ |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [X1T](#%28tech._x1t%29)
    -> [1Transition](#%28tech._1transition%29) |'
  id: totrans-1386
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ï¼ˆ; [X1T](#%28tech._x1t%29) -> [1è½¬æ¢](#%28tech._1transition%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (xaction->actionÂ xa)
    |'
  id: totrans-1387
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ï¼ˆxaction->action xaï¼‰ |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
  id: totrans-1388
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ...ï¼ˆ[æ›´å¤šå†…å®¹](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
- en: '| Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â xaction->actionÂ (xexpr-contentÂ xm))))
    |'
  id: totrans-1389
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[æ˜ å°„](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    xaction->action ï¼ˆxexpr-content xm)))) |'
- en: As you can see, we follow the design ideas of [Using Abstractions, by Example](part_three.html#%28part._sec~3ausage-examples%29)
    and formulate the function as a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    whose body uses [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29).
    Defining xaction->action is again just a matter of extracting the appropriate
    values from an [Xexpr](#%28tech._xexpr%29).
  id: totrans-1390
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬éµå¾ªäº†[é€šè¿‡ç¤ºä¾‹ä½¿ç”¨æŠ½è±¡](part_three.html#%28part._sec~3ausage-examples%29)çš„è®¾è®¡ç†å¿µï¼Œå¹¶å°†å‡½æ•°å®šä¹‰ä¸º[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)å½¢å¼ï¼Œå…¶ä¸»ä½“ä½¿ç”¨[æ˜ å°„](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)ã€‚å®šä¹‰xaction->actionå†æ¬¡åªæ˜¯ä»[Xexpr](#%28tech._xexpr%29)ä¸­æå–é€‚å½“çš„å€¼çš„é—®é¢˜ã€‚
- en: '[FigureÂ 130](#%28counter._%28figure._fig~3adsl%29%29) displays the complete
    solution. Here the translation from the DSL to a proper function call is as large
    as the original component. This is not the case for real-world systems; the DSL
    component tends to be a small fraction of the overall product, which is why the
    approach is so popular.'
  id: totrans-1391
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾130](#%28counter._%28figure._fig~3adsl%29%29)æ˜¾ç¤ºäº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨è¿™é‡Œï¼Œä»DSLåˆ°é€‚å½“å‡½æ•°è°ƒç”¨çš„è½¬æ¢ä¸åŸå§‹ç»„ä»¶çš„å¤§å°ç›¸å½“ã€‚åœ¨ç°å®ä¸–ç•Œçš„ç³»ç»Ÿä¸­å¹¶éå¦‚æ­¤ï¼›DSLç»„ä»¶å¾€å¾€æ˜¯æ•´ä½“äº§å“çš„ä¸€å°éƒ¨åˆ†ï¼Œè¿™ä¹Ÿæ˜¯è¿™ç§æ–¹æ³•å¦‚æ­¤å—æ¬¢è¿çš„åŸå› ã€‚'
- en: ExerciseÂ 383\. Run the code in [figureÂ 130](#%28counter._%28figure._fig~3adsl%29%29)
    with the BW Machine configuration from [exerciseÂ 382](#%28counter._%28exercise._ex~3axmachine-data1%29%29).
  id: totrans-1392
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  383ã€‚ä½¿ç”¨æ¥è‡ªç»ƒä¹  382 çš„ BW æœºå™¨é…ç½®ï¼ˆ#%28counter._%28exercise._ex~3axmachine-data1%29%29ï¼‰è¿è¡Œå›¾
    130 ä¸­çš„ä»£ç ï¼ˆ#%28counter._%28figure._fig~3adsl%29%29ï¼‰ã€‚
- en: machine-configuration.xml
  id: totrans-1393
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: machine-configuration.xml
- en: ''
  id: totrans-1394
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-1395
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: '| Â Â <machine initial="red"> |'
  id: totrans-1396
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <machine initial="red"> |'
- en: '| Â Â Â <action state="red"Â Â Â Â next="green" /> |'
  id: totrans-1397
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â <action state="red"Â Â Â Â next="green" /> |'
- en: '| Â Â Â <action state="green"Â Â next="yellow" /> |'
  id: totrans-1398
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â <action state="green"Â Â next="yellow" /> |'
- en: '| Â Â Â <action state="yellow" next="red" /> |'
  id: totrans-1399
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â <action state="yellow" next="red" /> |'
- en: '| Â Â </machine> |'
  id: totrans-1400
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â </machine> |'
- en: '|  |'
  id: totrans-1401
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-1402
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 131: A file with a machine configuration'
  id: totrans-1403
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 131ï¼šå…·æœ‰æœºå™¨é…ç½®çš„æ–‡ä»¶
- en: 22.4Reading XML[ğŸ”—](#(part._sub~3areading-xml) "Link to here")
  id: totrans-1404
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 22.4 è¯»å– XML[ğŸ”—](#(part._sub~3areading-xml) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Systems administrators expect that sophisticated applications read configuration
    programsThis section uses 2htdp/batch-io 2htdp/universe, and 2htdp/image teachpacks.
    from a file or possibly from some place on the web. In ISL+ your programs can
    retrieve (some) XML information. [FigureÂ 132](#%28counter._%28figure._fig~3axexpr-tp%29%29)
    shows the relevant excerpt from the teachpack. For consistency, the figure uses
    the suffix .v3 for its XML representation, including those data definitions for
    which there is no version 2:'
  id: totrans-1405
  prefs: []
  type: TYPE_NORMAL
  zh: ç³»ç»Ÿç®¡ç†å‘˜æœŸæœ›å¤æ‚çš„åº”ç”¨ç¨‹åºä»æ–‡ä»¶æˆ–å¯èƒ½ä»ç½‘ç»œä¸Šçš„æŸä¸ªåœ°æ–¹è¯»å–é…ç½®ç¨‹åºã€‚åœ¨ ISL+ ä¸­ï¼Œæ‚¨çš„ç¨‹åºå¯ä»¥æ£€ç´¢ï¼ˆä¸€äº›ï¼‰XML ä¿¡æ¯ã€‚[å›¾ 132](#%28counter._%28figure._fig~3axexpr-tp%29%29)
    æ˜¾ç¤ºäº†æ•™å­¦åŒ…ä¸­çš„ç›¸å…³æ‘˜å½•ã€‚ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œè¯¥å›¾ä½¿ç”¨ .v3 åç¼€è¡¨ç¤ºå…¶ XML è¡¨ç¤ºå½¢å¼ï¼ŒåŒ…æ‹¬é‚£äº›æ²¡æœ‰ç‰ˆæœ¬ 2 çš„æ•°æ®å®šä¹‰ï¼š
- en: '| ;Â An Xexpr.v3 is one of: |'
  id: totrans-1406
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Xexpr.v3 æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š|'
- en: '| ;Â   â€“  [Symbol](i2-3.html#%28tech._symbol%29) |'
  id: totrans-1407
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â   â€“  [Symbol](i2-3.html#%28tech._symbol%29) |'
- en: '| ;Â   â€“  [String](part_one.html#%28tech._string%29) |'
  id: totrans-1408
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â   â€“  [String](part_one.html#%28tech._string%29) |'
- en: '| ;Â   â€“  [Number](part_one.html#%28tech._number%29) |'
  id: totrans-1409
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â   â€“  [æ•°å­—](part_one.html#%28tech._number%29) |'
- en: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Attribute*.v3](#%28tech._attribute%2A..v3%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Xexpr.v3](#%28tech._xexpr..v3%29)]))
    |'
  id: totrans-1410
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Attribute*.v3](#%28tech._attribute%2A..v3%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Xexpr.v3](#%28tech._xexpr..v3%29)]))
    |'
- en: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Xexpr.v3](#%28tech._xexpr..v3%29)])
    |'
  id: totrans-1411
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Xexpr.v3](#%28tech._xexpr..v3%29)]))
    |'
- en: '| ;Â  |'
  id: totrans-1412
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â  |'
- en: '| ;Â An Attribute*.v3 is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute.v3](#%28tech._attribute..v3%29)].
    |'
  id: totrans-1413
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Attribute*.v3 æ˜¯ä¸€ä¸ª [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Attribute.v3](#%28tech._attribute..v3%29)]ã€‚|'
- en: '| ;Â Â Â  |'
  id: totrans-1414
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â  |'
- en: '| ;Â An Attribute.v3 is a list of two items: |'
  id: totrans-1415
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Attribute.v3 æ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªé¡¹ç›®çš„åˆ—è¡¨ï¼š|'
- en: '| ;Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [String](part_one.html#%28tech._string%29))
    |'
  id: totrans-1416
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [String](part_one.html#%28tech._string%29))
    |'
- en: '| ;Â [Any](part_one.html#%28tech._any%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-1417
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Any](part_one.html#%28tech._any%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| ;Â is x an [Xexpr.v3](#%28tech._xexpr..v3%29) |'
  id: totrans-1418
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â x æ˜¯å¦æ˜¯ä¸€ä¸ª [Xexpr.v3](#%28tech._xexpr..v3%29) |'
- en: '| ;Â effect displays bad piece if x is not an [Xexpr.v3](#%28tech._xexpr..v3%29)
    |'
  id: totrans-1419
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœ x ä¸æ˜¯ä¸€ä¸ª [Xexpr.v3](#%28tech._xexpr..v3%29)ï¼Œåˆ™æ•ˆæœæ˜¾ç¤ºä¸è‰¯çš„ç‰‡æ®µ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([xexpr?](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._xexpr~3f%29%29)Â x)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-1420
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([xexpr?](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._xexpr~3f%29%29)Â x)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-1421
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [Xexpr.v3](#%28tech._xexpr..v3%29)
    |'
  id: totrans-1422
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [String](part_one.html#%28tech._string%29) -> [Xexpr.v3](#%28tech._xexpr..v3%29)
    |'
- en: '| ;Â produces the first XML element in file f |'
  id: totrans-1423
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”Ÿæˆæ–‡ä»¶ f ä¸­çš„ç¬¬ä¸€ä¸ª XML å…ƒç´  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([read-xexpr](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-1424
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([read-xexpr](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-1425
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-1426
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [String](part_one.html#%28tech._string%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| ;Â #false, if this url returns a ''404''; #true otherwise |'
  id: totrans-1427
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœæ­¤ URL è¿”å› ''404''ï¼Œåˆ™è¿”å› #falseï¼›å¦åˆ™è¿”å› #true |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([url-exists?](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._url-exists~3f%29%29)Â u)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-1428
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([url-exists?](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._url-exists~3f%29%29)Â u)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-1429
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)  [Xexpr.v3](#%28tech._xexpr..v3%29)]
    |'
  id: totrans-1430
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [String](part_one.html#%28tech._string%29) -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)  [Xexpr.v3](#%28tech._xexpr..v3%29)]
    |'
- en: '| ;Â retrieves the first XML (HTML) element from URL u |'
  id: totrans-1431
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä» URL u ä¸­æ£€ç´¢ç¬¬ä¸€ä¸ª XML (HTML) å…ƒç´  |'
- en: '| ;Â #false if ([not](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._not%29%29)  ([url-exists?](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._url-exists~3f%29%29)  u))
    |'
  id: totrans-1432
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœ ([not](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._not%29%29)  ([url-exists?](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._url-exists~3f%29%29)  u))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([read-plain-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-plain-xexpr%2Fweb%29%29)Â u)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-1433
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([read-plain-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-plain-xexpr%2Fweb%29%29)Â u)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-1434
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)  [Xexpr.v3](#%28tech._xexpr..v3%29)]
    |'
  id: totrans-1435
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [String](part_one.html#%28tech._string%29) -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)  [Xexpr.v3](#%28tech._xexpr..v3%29)]
    |'
- en: '| ;Â retrieves the first XML (HTML) element from URL u |'
  id: totrans-1436
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä» URL u ä¸­æ£€ç´¢ç¬¬ä¸€ä¸ª XML (HTML) å…ƒç´  |'
- en: '| ;Â #false if ([not](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._not%29%29)  ([url-exists?](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._url-exists~3f%29%29)  u))
    |'
  id: totrans-1437
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â #false if ([not](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._not%29%29)  ([url-exists?](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._url-exists~3f%29%29)  u))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([read-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%2Fweb%29%29)Â u)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-1438
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([read-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%2Fweb%29%29)Â u)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: ''
  id: totrans-1439
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 132: Reading X-expressions'
  id: totrans-1440
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾132ï¼šè¯»å–Xè¡¨è¾¾å¼
- en: 'Assume we have the file in [figureÂ 131](#%28counter._%28figure._fig~3amachine-configuration..xml%29%29).
    If the 2htdp/batch-io teachpack is required, a program can read the element with
    [read-plain-xexpr](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-plain-xexpr%29%29).
    The function retrieves the XML element in a format that matches the [XMachine](#%28tech._xmachine%29)
    data definition. A function for retrieving XML elements from the web is also available
    in the teachpack. Try this in DrRacket:'
  id: totrans-1441
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡ä»¶åœ¨[å›¾131](#%28counter._%28figure._fig~3amachine-configuration..xml%29%29)ä¸­ã€‚å¦‚æœéœ€è¦2htdp/batch-ioæ•™å­¦åŒ…ï¼Œç¨‹åºå¯ä»¥è¯»å–[read-plain-xexpr](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-plain-xexpr%29%29)å…ƒç´ ã€‚è¯¥å‡½æ•°ä»¥ä¸[XMachine](#%28tech._xmachine%29)æ•°æ®å®šä¹‰ç›¸åŒ¹é…çš„æ ¼å¼æ£€ç´¢XMLå…ƒç´ ã€‚è¯¥æ•™å­¦åŒ…ä¸­è¿˜æœ‰ä¸€ä¸ªç”¨äºä»ç½‘ç»œæ£€ç´¢XMLå…ƒç´ çš„å‡½æ•°ã€‚åœ¨DrRacketä¸­å°è¯•ä»¥ä¸‹æ“ä½œï¼š
- en: '| >Â ([read-plain-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-plain-xexpr%2Fweb%29%29)
    |'
  id: totrans-1442
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| >Â ([read-plain-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-plain-xexpr%2Fweb%29%29)
    |'
- en: '| Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-append%29%29)
    |'
  id: totrans-1443
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-append%29%29)
    |'
- en: '| Â Â Â Â Â Â Â "Https://Felleisen.org/" |'
  id: totrans-1444
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â "Https://Felleisen.org/" |'
- en: '| Â Â Â Â Â Â Â "matthias/" |'
  id: totrans-1445
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â "matthias/" |'
- en: '| Â Â Â Â Â Â Â "HtDP2e/Files/machine-configuration.xml")) |'
  id: totrans-1446
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â "HtDP2e/Files/machine-configuration.xml")) |'
- en: If your computer is connected to the web, this expression retrieves our standard
    machine configuration.
  id: totrans-1447
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ çš„è®¡ç®—æœºè¿æ¥åˆ°ç½‘ç»œï¼Œè¿™ä¸ªè¡¨è¾¾å¼å°†æ£€ç´¢æˆ‘ä»¬çš„æ ‡å‡†æœºå™¨é…ç½®ã€‚
- en: 'Reading files or web pages introduces an entirely novel idea into our computational
    model. As [Intermezzo 1: Beginning Student Language](i1-2.html) explains, a BSL
    program is evaluated in the same manner in which you evaluate variable expressions
    in algebra. Function definitions are also treated just like in algebra. Indeed,
    most algebra courses introduce conditional function definitions, meaning [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    does not pose any challenges either. Finally, while ISL+ introduces functions
    as values, the evaluation model remains fundamentally the same.'
  id: totrans-1448
  prefs: []
  type: TYPE_NORMAL
  zh: è¯»å–æ–‡ä»¶æˆ–ç½‘é¡µå°†ä¸€ä¸ªå…¨æ–°çš„æƒ³æ³•å¼•å…¥åˆ°æˆ‘ä»¬çš„è®¡ç®—æ¨¡å‹ä¸­ã€‚æ­£å¦‚[ç¬¬1éƒ¨åˆ†ï¼šåˆå­¦è€…è¯­è¨€](i1-2.html)æ‰€è§£é‡Šçš„ï¼ŒBSLç¨‹åºæ˜¯ä»¥ä¸ä½ åœ¨ä»£æ•°ä¸­è¯„ä¼°å˜é‡è¡¨è¾¾å¼ç›¸åŒçš„æ–¹å¼è¿›è¡Œè¯„ä¼°çš„ã€‚å‡½æ•°å®šä¹‰ä¹Ÿåƒåœ¨ä»£æ•°ä¸­ä¸€æ ·è¢«å¤„ç†ã€‚å®é™…ä¸Šï¼Œå¤§å¤šæ•°ä»£æ•°è¯¾ç¨‹éƒ½ä»‹ç»äº†æ¡ä»¶å‡½æ•°å®šä¹‰ï¼Œè¿™æ„å‘³ç€[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)ä¹Ÿä¸ä¼šå¸¦æ¥ä»»ä½•æŒ‘æˆ˜ã€‚æœ€åï¼Œè™½ç„¶ISL+å°†å‡½æ•°ä½œä¸ºå€¼å¼•å…¥ï¼Œä½†è¯„ä¼°æ¨¡å‹ä»ç„¶ä¿æŒåŸºæœ¬ç›¸åŒã€‚
- en: One essential property of this computational model is that no matter how often
    you call a function f on some argument(s) a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
  id: totrans-1449
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè®¡ç®—æ¨¡å‹çš„ä¸€ä¸ªåŸºæœ¬ç‰¹æ€§æ˜¯ï¼Œæ— è®ºä½ å¤šå°‘æ¬¡åœ¨æŸä¸ªå‚æ•°ä¸Šè°ƒç”¨å‡½æ•°fï¼Œ[...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
- en: (fÂ aÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
  id: totrans-1450
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (fÂ aÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
- en: the answer remains the same. The introduction of [read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29),
    [read-xexpr](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%29%29),
    and their relatives destroys this property, however. The problem is that files
    and web sites may change over time so that every time a program reads files or
    web sites it may get a new result.
  id: totrans-1451
  prefs: []
  type: TYPE_NORMAL
  zh: ç­”æ¡ˆä¿æŒä¸å˜ã€‚ç„¶è€Œï¼Œ[read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)ï¼Œ[read-xexpr](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%29%29)ï¼ŒåŠå…¶ç›¸å…³åŠŸèƒ½çš„å¼•å…¥ç ´åäº†è¿™ä¸€å±æ€§ã€‚é—®é¢˜æ˜¯æ–‡ä»¶å’Œç½‘ç«™å¯èƒ½ä¼šéšæ—¶é—´å˜åŒ–ï¼Œå› æ­¤æ¯æ¬¡ç¨‹åºè¯»å–æ–‡ä»¶æˆ–ç½‘ç«™æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¾—åˆ°æ–°çš„ç»“æœã€‚
- en: Consider the idea of looking up the stock price of a company. Point your browser
    to google.com/finance or any other such financial web site and enter the name
    of your favorite company, say, Ford. In response, the site will display the current
    price of the companyâ€™s stock and other informationâ€”<wbr>for example, how much
    the price has changed since the last time it was posted, the current time, and
    many other facts and ads. The important point is that as you reload this page
    over the course of a day or a week, some of the information on this web page will
    change.
  id: totrans-1452
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘æŸ¥æ‰¾å…¬å¸è‚¡ä»·çš„æƒ³æ³•ã€‚å°†æ‚¨çš„æµè§ˆå™¨æŒ‡å‘google.com/financeæˆ–ä»»ä½•å…¶ä»–æ­¤ç±»é‡‘èç½‘ç«™ï¼Œå¹¶è¾“å…¥æ‚¨å–œæ¬¢çš„å…¬å¸åç§°ï¼Œä¾‹å¦‚ï¼Œç¦ç‰¹ã€‚ä½œä¸ºå›åº”ï¼Œè¯¥ç½‘ç«™å°†æ˜¾ç¤ºå…¬å¸è‚¡ç¥¨çš„å½“å‰ä»·æ ¼å’Œå…¶ä»–ä¿¡æ¯â€”â€”ä¾‹å¦‚ï¼Œè‡ªä¸Šæ¬¡å‘å¸ƒä»¥æ¥ä»·æ ¼çš„å˜åŒ–ï¼Œå½“å‰æ—¶é—´ï¼Œä»¥åŠè®¸å¤šå…¶ä»–äº‹å®å’Œå¹¿å‘Šã€‚é‡è¦çš„æ˜¯ï¼Œåœ¨ä¸€å¤©æˆ–ä¸€å‘¨å†…é‡æ–°åŠ è½½æ­¤é¡µé¢æ—¶ï¼Œæ­¤ç½‘é¡µä¸Šçš„ä¸€äº›ä¿¡æ¯å°†å‘ç”Ÿå˜åŒ–ã€‚
- en: 'An alternative to looking up such company information manually is to write
    a small program that retrieves such information on a regular basis, say, every
    15 seconds. With ISL you can write a world program that performs this task. You
    would launch it like this:'
  id: totrans-1453
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥æ‰¾æ­¤ç±»å…¬å¸ä¿¡æ¯çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ç¼–å†™ä¸€ä¸ªå°ç¨‹åºï¼Œå®šæœŸæ£€ç´¢æ­¤ç±»ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œæ¯15ç§’ä¸€æ¬¡ã€‚ä½¿ç”¨ISLï¼Œæ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªæ‰§è¡Œæ­¤ä»»åŠ¡çš„å…¨çƒç¨‹åºã€‚æ‚¨å°†åƒè¿™æ ·å¯åŠ¨å®ƒï¼š
- en: '| > (stock-alertÂ "Ford") |'
  id: totrans-1454
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (stock-alertÂ "Ford") |'
- en: 'to see a world window that displays an image like the following:'
  id: totrans-1455
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥æŸ¥çœ‹æ˜¾ç¤ºå¦‚ä¸‹å›¾åƒçš„å…¨å±€çª—å£ï¼š
- en: '![image](../Images/ac85f75a7fbd8559a96044f6bbea3f30.png)'
  id: totrans-1456
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/ac85f75a7fbd8559a96044f6bbea3f30.png)'
- en: 'To develop such a program requires skills beyond normal program design. First,
    you need to investigate how the web site formats its information. In the case
    of Googleâ€™s financial service page, an inspection of the web source code shows
    the following pattern near the top:'
  id: totrans-1457
  prefs: []
  type: TYPE_NORMAL
  zh: å¼€å‘æ­¤ç±»ç¨‹åºéœ€è¦è¶…å‡ºå¸¸è§„ç¨‹åºè®¾è®¡çš„æŠ€èƒ½ã€‚é¦–å…ˆï¼Œæ‚¨éœ€è¦è°ƒæŸ¥ç½‘ç«™å¦‚ä½•æ ¼å¼åŒ–å…¶ä¿¡æ¯ã€‚ä»¥è°·æ­Œé‡‘èæœåŠ¡é¡µé¢ä¸ºä¾‹ï¼Œæ£€æŸ¥ç½‘é¡µæºä»£ç æ˜¾ç¤ºä»¥ä¸‹æ¨¡å¼é è¿‘é¡¶éƒ¨ï¼š
- en: '| Â Â <meta content="17.09" itemprop="price" /> |'
  id: totrans-1458
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <meta content="17.09" itemprop="price" /> |'
- en: '| Â Â <meta content="+0.07" itemprop="priceChange" /> |'
  id: totrans-1459
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <meta content="+0.07" itemprop="priceChange" /> |'
- en: '| Â Â <meta content="0.41" itemprop="priceChangePercent" /> |'
  id: totrans-1460
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <meta content="0.41" itemprop="priceChangePercent" /> |'
- en: '| Â Â <meta content="2013-08-12T16:59:06Z" itemprop="quoteTime" /> |'
  id: totrans-1461
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <meta content="2013-08-12T16:59:06Z" itemprop="quoteTime" /> |'
- en: '| Â Â <meta content="NYSE real-time data" itemprop="dataSource" /> |'
  id: totrans-1462
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â <meta content="NYSE real-time data" itemprop="dataSource" /> |'
- en: If we had a function that could search an [Xexpr.v3](#%28tech._xexpr..v3%29)
    and extract (the representation of XML) meta elements with the attribute value
    "price" and "priceChange", the rest of stock-alert would be straightforward.
  id: totrans-1463
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ä»¥æœç´¢[Xexpr.v3](#%28tech._xexpr..v3%29)å¹¶æå–å…·æœ‰å±æ€§å€¼"price"å’Œ"priceChange"çš„XMLå…ƒå…ƒç´ çš„å‡½æ•°ï¼Œé‚£ä¹ˆstock-alertçš„å…¶ä½™éƒ¨åˆ†å°†éå¸¸ç›´æ¥ã€‚
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â PREFIXÂ "Https://www.google.com/finance?q=")
    |'
  id: totrans-1464
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â PREFIXÂ "Https://www.google.com/finance?q=")
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â SIZEÂ 22)Â ;Â font
    size |'
  id: totrans-1465
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â SIZEÂ 22)Â ;Â font
    size |'
- en: '| Â  |'
  id: totrans-1466
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â dataÂ [priceÂ delta])
    |'
  id: totrans-1467
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â dataÂ [priceÂ delta])
    |'
- en: '| ;Â A StockWorld is a structure: (make-data  [String](part_one.html#%28tech._string%29)  [String](part_one.html#%28tech._string%29))
    |'
  id: totrans-1468
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â StockWorldæ˜¯ä¸€ä¸ªç»“æ„ï¼š (åˆ›å»ºæ•°æ®  [String](part_one.html#%28tech._string%29)  [String](part_one.html#%28tech._string%29))
    |'
- en: '| Â  |'
  id: totrans-1469
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [StockWorld](#%28tech._stockworld%29)
    |'
  id: totrans-1470
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â [String](part_one.html#%28tech._string%29) -> [StockWorld](#%28tech._stockworld%29)
    |'
- en: '| ;Â retrieves the stock price of co and its change every 15s |'
  id: totrans-1471
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â æ¯15ç§’æ£€ç´¢è‚¡ç¥¨ä»·æ ¼åŠå…¶å˜åŠ¨ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (stock-alertÂ co)
    |'
  id: totrans-1472
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (stock-alertÂ co)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â urlÂ ([string-append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-append%29%29)Â PREFIXÂ co))
    |'
  id: totrans-1473
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([æœ¬åœ°](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    url ([å­—ç¬¦ä¸²è¿æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-append%29%29)
    PREFIX co))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [[StockWorld](#%28tech._stockworld%29) -> [StockWorld](#%28tech._stockworld%29)]
    |'
  id: totrans-1474
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â [[StockWorld](#%28tech._stockworld%29) -> [StockWorld](#%28tech._stockworld%29)]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (retrieve-stock-dataÂ __w)
    |'
  id: totrans-1475
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (retrieve-stock-dataÂ __w)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â xÂ ([read-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%2Fweb%29%29)Â url)))
    |'
  id: totrans-1476
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([æœ¬åœ°](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    x ([è¯»å–-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%2Fweb%29%29)
    url))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (make-dataÂ (getÂ xÂ "price") |'
  id: totrans-1477
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â (åˆ›å»ºæ•°æ®Â (getÂ xÂ "price") |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (getÂ xÂ "priceChange")))) |'
  id: totrans-1478
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (getÂ xÂ "priceChange")))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [StockWorld](#%28tech._stockworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1479
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â [StockWorld](#%28tech._stockworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-stock-dataÂ w)
    |'
  id: totrans-1480
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (æ¸²æŸ“è‚¡ç¥¨æ•°æ® w) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [[StockWorld](#%28tech._stockworld%29)  [String](part_one.html#%28tech._string%29)
    -> [String](part_one.html#%28tech._string%29)] -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1481
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([æœ¬åœ°](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (;Â [[StockWorld](#%28tech._stockworld%29) [String](part_one.html#%28tech._string%29)
    -> [String](part_one.html#%28tech._string%29)] -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (wordÂ selÂ col)
    |'
  id: totrans-1482
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (wordÂ selÂ col)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â (selÂ w)Â SIZEÂ col)))
    |'
  id: totrans-1483
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([æ–‡æœ¬](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â (selÂ w)Â SIZEÂ col)))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â (wordÂ data-priceÂ ''black)
    |'
  id: totrans-1484
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â ([overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â (wordÂ data-priceÂ ''black)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "Â Â "Â SIZEÂ ''white)
    |'
  id: totrans-1485
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "Â Â "Â SIZEÂ ''white)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (wordÂ data-deltaÂ ''red)) |'
  id: totrans-1486
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (wordÂ data-deltaÂ ''red)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â 300Â 35Â ''solidÂ ''white)))))
    |'
  id: totrans-1487
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â 300Â 35Â ''solidÂ ''white)))))
    |'
- en: '| Â Â Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â (retrieve-stock-dataÂ ''no-use)
    |'
  id: totrans-1488
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â (retrieve-stock-dataÂ ''no-use)
    |'
- en: '| Â Â Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â retrieve-stock-dataÂ 15]
    |'
  id: totrans-1489
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â retrieve-stock-dataÂ 15]
    |'
- en: '| Â Â Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render-stock-data])))
    |'
  id: totrans-1490
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render-stock-data]])
    |'
- en: ''
  id: totrans-1491
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 133: Web data as an event'
  id: totrans-1492
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾133ï¼šç½‘ç»œæ•°æ®ä½œä¸ºäº‹ä»¶
- en: It is no longer possible to complete this exercise because the web service no
    longer delivers stock quotes.
  id: totrans-1493
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºè¯¥ç½‘ç»œæœåŠ¡ä¸å†æä¾›è‚¡ç¥¨æŠ¥ä»·ï¼Œå› æ­¤æ— æ³•å®Œæˆæ­¤ç»ƒä¹ ã€‚
- en: '[FigureÂ 133](#%28counter._%28figure._fig~3areal-time%29%29) displays the core
    of the program. The design of get is left to the exercises because its workings
    are all about intertwined data.'
  id: totrans-1494
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾133](#%28counter._%28figure._fig~3areal-time%29%29)æ˜¾ç¤ºäº†ç¨‹åºçš„æ ¸å¿ƒã€‚getçš„è®¾è®¡ç•™ç»™ç»ƒä¹ ï¼Œå› ä¸ºå…¶å·¥ä½œå…¨éƒ¨å…³äºäº¤ç»‡çš„æ•°æ®ã€‚'
- en: 'As the figure shows, the main function defines two local ones: a clock-tick
    handler and a rendering function. The [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    specification requests that the clock tick every 15 seconds. When the clock ticks,
    ISL+ applies retrieve-stock-data to the current world, which it ignores. Instead,
    the function visits the web site via [read-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%2Fweb%29%29)
    and extracts the appropriate information with get. Thus, the new world is created
    from newly available information on the web, not some local data.'
  id: totrans-1495
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å›¾æ‰€ç¤ºï¼Œä¸»å‡½æ•°å®šä¹‰äº†ä¸¤ä¸ªå±€éƒ¨å‡½æ•°ï¼šä¸€ä¸ªæ—¶é’Ÿæ»´ç­”å¤„ç†ç¨‹åºå’Œä¸€ä¸ªæ¸²æŸ“å‡½æ•°ã€‚[big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)è§„èŒƒè¦æ±‚æ—¶é’Ÿæ¯15ç§’æ»´ç­”ä¸€æ¬¡ã€‚å½“æ—¶é’Ÿæ»´ç­”æ—¶ï¼ŒISL+å°†retrieve-stock-dataåº”ç”¨äºå½“å‰ä¸–ç•Œï¼Œä½†å®ƒå¿½ç•¥äº†ã€‚ç›¸åï¼Œè¯¥å‡½æ•°é€šè¿‡[read-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%2Fweb%29%29)è®¿é—®ç½‘ç«™ï¼Œå¹¶ä½¿ç”¨getæå–é€‚å½“çš„ä¿¡æ¯ã€‚å› æ­¤ï¼Œæ–°ä¸–ç•Œæ˜¯ç”±ç½‘ç»œä¸Šæ–°å¯ç”¨çš„ä¿¡æ¯åˆ›å»ºçš„ï¼Œè€Œä¸æ˜¯æŸäº›æœ¬åœ°æ•°æ®ã€‚
- en: ExerciseÂ 384\. [FigureÂ 133](#%28counter._%28figure._fig~3areal-time%29%29) mentions
    [read-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%2Fweb%29%29).
    See [figureÂ 132](#%28counter._%28figure._fig~3axexpr-tp%29%29) for its signature
    and purpose statement and then read its documentation to determine the difference
    to its â€œplainâ€ relative.
  id: totrans-1496
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 384ã€‚[å›¾133](#%28counter._%28figure._fig~3areal-time%29%29)æåˆ°äº†[read-xexpr/web](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%2Fweb%29%29)ã€‚å‚è§[å›¾132](#%28counter._%28figure._fig~3axexpr-tp%29%29)äº†è§£å…¶ç­¾åå’Œç›®çš„è¯´æ˜ï¼Œç„¶åé˜…è¯»å…¶æ–‡æ¡£ä»¥ç¡®å®šå…¶ä¸â€œæ™®é€šâ€ç›¸å¯¹çš„å·®å¼‚ã€‚
- en: '[FigureÂ 133](#%28counter._%28figure._fig~3areal-time%29%29) is also missing
    several important pieces, in particular the interpretation of data and purpose
    statements for all the locally defined functions. Formulate the missing pieces
    so that you get to understand the program.'
  id: totrans-1497
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾133](#%28counter._%28figure._fig~3areal-time%29%29)è¿˜ç¼ºå°‘å‡ ä¸ªé‡è¦éƒ¨åˆ†ï¼Œç‰¹åˆ«æ˜¯æ‰€æœ‰æœ¬åœ°å®šä¹‰å‡½æ•°çš„æ•°æ®è§£é‡Šå’Œç›®çš„è¯´æ˜ã€‚åˆ¶å®šç¼ºå¤±çš„éƒ¨åˆ†ï¼Œä»¥ä¾¿ç†è§£ç¨‹åºã€‚'
- en: ExerciseÂ 385\. Look up the current stock price for your favorite company at
    Googleâ€™s financial service page. If you donâ€™t favor a company, pick Ford. Then
    save the source code of the page as a file in your working directory. Use [read-xexpr](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%29%29)
    in DrRacket to view the source as an [Xexpr.v3](#%28tech._xexpr..v3%29).
  id: totrans-1498
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 385ã€‚åœ¨è°·æ­Œé‡‘èæœåŠ¡é¡µé¢ä¸ŠæŸ¥æ‰¾ä½ æœ€å–œæ¬¢çš„å…¬å¸çš„å½“å‰è‚¡ä»·ã€‚å¦‚æœä½ æ²¡æœ‰å–œæ¬¢çš„å…¬å¸ï¼Œé€‰æ‹©ç¦ç‰¹ã€‚ç„¶åå°†é¡µé¢çš„æºä»£ç ä¿å­˜ä¸ºå·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ã€‚ä½¿ç”¨DrRacketä¸­çš„[read-xexpr](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-xexpr%29%29)æŸ¥çœ‹æºä»£ç ä½œä¸º[Xexpr.v3](#%28tech._xexpr..v3%29)ã€‚
- en: 'ExerciseÂ 386\. Here is the get function:'
  id: totrans-1499
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 386ã€‚ä»¥ä¸‹æ˜¯getå‡½æ•°ï¼š
- en: '| ;Â [Xexpr.v3](#%28tech._xexpr..v3%29)  [String](part_one.html#%28tech._string%29)
    -> [String](part_one.html#%28tech._string%29) |'
  id: totrans-1500
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Xexpr.v3](#%28tech._xexpr..v3%29)  [String](part_one.html#%28tech._string%29)
    -> [String](part_one.html#%28tech._string%29) |'
- en: '| ;Â retrieves the value of the "content" attribute |'
  id: totrans-1501
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ£€ç´¢"content"å±æ€§çš„å€¼ |'
- en: '| ;Â from a ''meta element that has attribute "itemprop" |'
  id: totrans-1502
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ä»å…·æœ‰â€œitempropâ€å±æ€§çš„â€œmetaå…ƒç´ â€ä¸­è·å– |'
- en: '| ;Â with value s |'
  id: totrans-1503
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¸¦æœ‰å€¼s |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    |'
  id: totrans-1504
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (getÂ ''(metaÂ ((contentÂ "+1")Â (itempropÂ "F")))Â "F") |'
  id: totrans-1505
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (get ''(meta ((content "+1") (itemprop "F"))) "F") |'
- en: '| Â Â "+1") |'
  id: totrans-1506
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   "+1") |'
- en: '| Â  |'
  id: totrans-1507
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (getÂ xÂ s)
    |'
  id: totrans-1508
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (get-xexpr x s) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â resultÂ (get-xexprÂ xÂ s)))
    |'
  id: totrans-1509
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)(([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    result (get-xexpr x s))) |'
- en: '| Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â result)
    |'
  id: totrans-1510
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)
    ([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)
    result) |'
- en: '| Â Â Â Â Â Â Â Â result |'
  id: totrans-1511
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   result |'
- en: '| Â Â Â Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "not
    found")))) |'
  id: totrans-1512
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)
    "æœªæ‰¾åˆ°")))) |'
- en: It assumes the existence of get-xexpr, a function that searches an arbitrary
    [Xexpr.v3](#%28tech._xexpr..v3%29) for the desired attribute and produces [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)
    [String](part_one.html#%28tech._string%29)].
  id: totrans-1513
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒå‡è®¾å­˜åœ¨get-xexprå‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨ä»»æ„çš„[Xexpr.v3](#%28tech._xexpr..v3%29)ä¸­æœç´¢æ‰€éœ€çš„å±æ€§ï¼Œå¹¶ç”Ÿæˆ[[Maybe](part_three.html#%28tech._sim-dd._maybe%29)
    [String](part_one.html#%28tech._string%29)]ã€‚
- en: Formulate test cases that look for other values than "F" and that force get
    to signal an error.
  id: totrans-1514
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ¶å®šæµ‹è¯•ç”¨ä¾‹ï¼Œå¯»æ‰¾é™¤äº†"F"ä¹‹å¤–çš„å…¶ä»–å€¼ï¼Œå¹¶è¿«ä½¿getå‘å‡ºé”™è¯¯ä¿¡å·ã€‚
- en: Design get-xexpr. Derive functional examples for this function from those for
    get. Generalize these examples so that you are confident get-xexpr can traverse
    an arbitrary [Xexpr.v3](#%28tech._xexpr..v3%29). Finally, formulate a test that
    uses the web data saved in [exerciseÂ 385](#%28counter._%28exercise._ex~3aweb-data1%29%29).
  id: totrans-1515
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡get-xexprã€‚ä»getå‡½æ•°çš„ç¤ºä¾‹ä¸­æ¨å¯¼å‡ºè¯¥å‡½æ•°çš„åŠŸèƒ½ç¤ºä¾‹ã€‚å°†è¿™äº›ç¤ºä¾‹æ¨å¹¿ï¼Œä»¥ä¾¿ä½ ç¡®ä¿¡get-xexprå¯ä»¥éå†ä»»æ„çš„[Xexpr.v3](#%28tech._xexpr..v3%29)ã€‚æœ€åï¼Œåˆ¶å®šä¸€ä¸ªæµ‹è¯•ï¼Œä½¿ç”¨å­˜å‚¨åœ¨[ç»ƒä¹ 385](#%28counter._%28exercise._ex~3aweb-data1%29%29)ä¸­çš„ç½‘é¡µæ•°æ®ã€‚
- en: 23Simultaneous Processing[ğŸ”—](#(part._ch~3asimu) "Link to here")
  id: totrans-1516
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 23åŒæ—¶å¤„ç†[ğŸ”—](#(part._ch~3asimu) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Some functions have to consume two arguments that belong to classes with nontrivial
    data definitions. How to design such functions depends on the relationship between
    the arguments. First, one of the arguments may have to be treated as if it were
    atomic. Second, it is possible that the function must process the two arguments
    in lockstep. Finally, the function may process the given data in accordance to
    all possible cases. This chapter illustrates the three cases with examples and
    provides an augmented design recipe. The last section discusses the equality of
    compound data.
  id: totrans-1517
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€äº›å‡½æ•°å¿…é¡»æ¶ˆè´¹å±äºå…·æœ‰éå¹³å‡¡æ•°æ®å®šä¹‰çš„ç±»çš„ä¸¤ä¸ªå‚æ•°ã€‚å¦‚ä½•è®¾è®¡è¿™æ ·çš„å‡½æ•°å–å†³äºå‚æ•°ä¹‹é—´çš„å…³ç³»ã€‚é¦–å…ˆï¼Œå¯èƒ½éœ€è¦å°†å…¶ä¸­ä¸€ä¸ªå‚æ•°è§†ä¸ºåŸå­ã€‚å…¶æ¬¡ï¼Œå‡½æ•°å¯èƒ½å¿…é¡»åŒæ­¥å¤„ç†ä¸¤ä¸ªå‚æ•°ã€‚æœ€åï¼Œå‡½æ•°å¯èƒ½æ ¹æ®æ‰€æœ‰å¯èƒ½çš„æƒ…å†µå¤„ç†ç»™å®šæ•°æ®ã€‚æœ¬ç« é€šè¿‡ç¤ºä¾‹è¯´æ˜äº†ä¸‰ç§æƒ…å†µï¼Œå¹¶æä¾›äº†å¢å¼ºçš„è®¾è®¡é…æ–¹ã€‚æœ€åä¸€èŠ‚è®¨è®ºäº†å¤åˆæ•°æ®çš„ç­‰ä»·æ€§ã€‚
- en: '23.1Processing Two Lists Simultaneously: Case 1[ğŸ”—](#(part._sec~3atwo-inputs~3acase1)
    "Link to here")'
  id: totrans-1518
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 23.1 åŒæ—¶å¤„ç†ä¸¤ä¸ªåˆ—è¡¨ï¼šæ¡ˆä¾‹ 1[ğŸ”—](#(part._sec~3atwo-inputs~3acase1) "é“¾æ¥è‡³æ­¤")
- en: 'Consider the following signature, purpose statement, and header:'
  id: totrans-1519
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘ä»¥ä¸‹ç­¾åã€ç›®çš„å£°æ˜å’Œå¤´ï¼š
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  id: totrans-1520
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
- en: '| ;Â replaces the final ''() in front with end |'
  id: totrans-1521
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†å‰ç«¯æœ«å°¾çš„ ''()'' æ›¿æ¢ä¸º end |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (replace-eol-withÂ frontÂ end)
    |'
  id: totrans-1522
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (replace-eol-withÂ frontÂ end)
    |'
- en: '| Â Â front) |'
  id: totrans-1523
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å‰ç«¯ |'
- en: 'The signature says that the function consumes two lists. Letâ€™s see how the
    design recipe works in this case.We start by working through examples. If the
    first argument is ''(), replace-eol-with must produce the second one, no matter
    what it is:'
  id: totrans-1524
  prefs: []
  type: TYPE_NORMAL
  zh: ç­¾åè¡¨æ˜è¯¥å‡½æ•°æ¶ˆè´¹ä¸¤ä¸ªåˆ—è¡¨ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è®¾è®¡é…æ–¹åœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æˆ‘ä»¬é¦–å…ˆé€šè¿‡ç¤ºä¾‹æ¥å·¥ä½œã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ '()ï¼Œreplace-eol-with
    å¿…é¡»äº§ç”Ÿç¬¬äºŒä¸ªå‚æ•°ï¼Œæ— è®ºå®ƒæ˜¯ä»€ä¹ˆï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (replace-eol-withÂ '()Â '(aÂ b))Â '(aÂ b))
  id: totrans-1525
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (replace-eol-withÂ ''()Â ''(aÂ b))Â ''(aÂ b))'
- en: 'In contrast, if the first argument is not ''(), the purpose statement requires
    that we replace ''() at the end of front with end:'
  id: totrans-1526
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸åï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯ '()ï¼Œç›®çš„å£°æ˜è¦æ±‚æˆ‘ä»¬å°†å‰ç«¯æœ«å°¾çš„ '() æ›¿æ¢ä¸º endï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (replace-eol-withÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â ''())Â ''(a))
    |'
  id: totrans-1527
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (replace-eol-withÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â ''())Â ''(a))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â ''(a)))
    |'
  id: totrans-1528
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â ''(a)))
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (replace-eol-with
    |'
  id: totrans-1529
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (replace-eol-with
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â ''()))Â ''(a))
    |'
  id: totrans-1530
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â ''()))Â ''(a))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â ''(a))))
    |'
  id: totrans-1531
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    2  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    1  ''(a)))) |'
- en: 'The purpose statement and the examples suggest that as long as the second argument
    is a list, the function does not need to know anything about it. By implication,
    its template should be that of a list-processing function with respect to the
    first argument:'
  id: totrans-1532
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®çš„å£°æ˜å’Œç¤ºä¾‹è¡¨æ˜ï¼Œåªè¦ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå‡½æ•°å°±ä¸éœ€è¦äº†è§£ä»»ä½•å…³äºå®ƒçš„ä¿¡æ¯ã€‚ç”±æ­¤æ¨æ–­ï¼Œå…¶æ¨¡æ¿åº”è¯¥æ˜¯å…³äºç¬¬ä¸€ä¸ªå‚æ•°çš„åˆ—è¡¨å¤„ç†å‡½æ•°ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (replace-eol-withÂ frontÂ end)
    |'
  id: totrans-1533
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)  (replace-eol-with  front  end))
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1534
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|    ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â front)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-1535
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|    [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  front)  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-1536
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â front)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-1537
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|    ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  front)  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (replace-eol-withÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â front)Â end)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  id: totrans-1538
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|    [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  (replace-eol-with  ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  front)  end)  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
- en: 'Letâ€™s fill the gaps in the template following the fifth step of the design
    recipe. If front is ''(), replace-eol-with produces end. If front is not ''(),
    we must recall what the template expressions compute:'
  id: totrans-1539
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç…§è®¾è®¡é£Ÿè°±çš„ç¬¬äº”æ­¥ï¼Œè®©æˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­å¡«è¡¥ç©ºç™½ã€‚å¦‚æœå‰ç¼€æ˜¯ '(), åˆ™ replace-eol-with äº§ç”Ÿ endã€‚å¦‚æœå‰ç¼€ä¸æ˜¯ '(), æˆ‘ä»¬å¿…é¡»å›å¿†æ¨¡æ¿è¡¨è¾¾å¼è®¡ç®—çš„å†…å®¹ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  front)
    evaluates to the first item on the list, and
  id: totrans-1540
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  front)
    è¯„ä¼°ä¸ºåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”
- en: (replace-eol-with  ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  front)  end)
    replaces the final '() in ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  front)
    with end.
  id: totrans-1541
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (replace-eol-with  ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  front)  end)
    å°† ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  front)
    ä¸­çš„æœ€ç»ˆ '()' æ›¿æ¢ä¸º endã€‚
- en: 'Stop! Use the table method to understand what these bullets mean for the running
    example.From here it is a small step to the complete definition:'
  id: totrans-1542
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä½¿ç”¨è¡¨æ ¼æ–¹æ³•æ¥ç†è§£è¿™äº›é¡¹ç›®å¯¹äºè¿è¡Œç¤ºä¾‹çš„æ„ä¹‰ã€‚ä»è¿™é‡Œåˆ°å®Œæ•´å®šä¹‰åªæœ‰ä¸€å°æ­¥ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (replace-eol-withÂ frontÂ end)
    |'
  id: totrans-1543
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (replace-eol-withÂ frontÂ end)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1544
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â front)Â end]
    |'
  id: totrans-1545
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â front)Â end]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-1546
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â front)
    |'
  id: totrans-1547
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â front)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â (replace-eol-withÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â front)Â end))]))
    |'
  id: totrans-1548
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â (replace-eol-withÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â front)Â end))]))
    |'
- en: ExerciseÂ 387\. Design cross. The function consumes a list of symbols and a list
    of numbers and produces all possible ordered pairs of symbols and numbers. That
    is, when given '(a  b  c) and '(1  2), the expected result is '((a  1)  (a  2)  (b  1)  (b  2)  (c  1)  (c  2)).
  id: totrans-1549
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 387ã€‚è®¾è®¡äº¤å‰ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªç¬¦å·åˆ—è¡¨å’Œä¸€ä¸ªæ•°å­—åˆ—è¡¨ï¼Œå¹¶ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„ç¬¦å·å’Œæ•°å­—çš„æœ‰åºå¯¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç»™å®š '(a  b  c) å’Œ '(1  2)
    æ—¶ï¼Œé¢„æœŸçš„ç»“æœæ˜¯ '((a  1)  (a  2)  (b  1)  (b  2)  (c  1)  (c  2))ã€‚
- en: '23.2Processing Two Lists Simultaneously: Case 2[ğŸ”—](#(part._sec~3atwo-inputs~3acase2)
    "Link to here")'
  id: totrans-1550
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 23.2åŒæ—¶å¤„ç†ä¸¤ä¸ªåˆ—è¡¨ï¼šæƒ…å†µ2[ğŸ”—](#(part._sec~3atwo-inputs~3acase2) "é“¾æ¥è‡³æ­¤")
- en: '[Functions that Produce Lists](part_two.html#%28part._sec~3alist-produce%29)
    presents the function wages*, which computes the weekly wages of some workers
    given their work hours. It consumes a list of numbers, which represents the hours
    worked per week, and produces a list of numbers, which are the corresponding weekly
    wages. While the problem assumes that all employees received the same pay rate,
    even a small company pays its workers differentiated wages.'
  id: totrans-1551
  prefs: []
  type: TYPE_NORMAL
  zh: '[ç”Ÿæˆåˆ—è¡¨çš„å‡½æ•°](part_two.html#%28part._sec~3alist-produce%29)ä»‹ç»äº†å‡½æ•° wages*ï¼Œå®ƒæ ¹æ®å·¥äººçš„å·¥ä½œæ—¶é—´è®¡ç®—æŸäº›å·¥äººçš„å‘¨å·¥èµ„ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªæ•°å­—åˆ—è¡¨ï¼Œä»£è¡¨æ¯å‘¨çš„å·¥ä½œå°æ—¶æ•°ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ•°å­—åˆ—è¡¨ï¼Œè¿™äº›æ•°å­—æ˜¯ç›¸åº”çš„å‘¨å·¥èµ„ã€‚è™½ç„¶é—®é¢˜å‡è®¾æ‰€æœ‰å‘˜å·¥éƒ½è·å¾—äº†ç›¸åŒçš„å·¥èµ„ç‡ï¼Œå³ä½¿æ˜¯å°å‹å…¬å¸ä¹Ÿä¼šæ”¯ä»˜ç»™å·¥äººä¸åŒçš„å·¥èµ„ã€‚'
- en: 'Here we look at a slightly more realistic version. The function now consumes
    two lists: the list of hours worked and the list of corresponding hourly wages.
    We translate this revised problem into a revised header:'
  id: totrans-1552
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¨å¾®æ›´ç°å®ä¸€ç‚¹çš„ç‰ˆæœ¬ã€‚è¯¥å‡½æ•°ç°åœ¨æ¶ˆè€—ä¸¤ä¸ªåˆ—è¡¨ï¼šå·¥ä½œæ—¶é—´åˆ—è¡¨å’Œç›¸åº”çš„æ¯å°æ—¶å·¥èµ„åˆ—è¡¨ã€‚æˆ‘ä»¬å°†è¿™ä¸ªä¿®è®¢çš„é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªä¿®è®¢çš„æ ‡é¢˜ï¼š
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  id: totrans-1553
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
- en: '| ;Â multiplies the corresponding items on |'
  id: totrans-1554
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¯¹åº”é¡¹ç›¸ä¹˜ |'
- en: '| ;Â hours and wages/h |'
  id: totrans-1555
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â hours å’Œ wages/h |'
- en: '| ;Â assume the two lists are of equal length |'
  id: totrans-1556
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å‡è®¾ä¸¤ä¸ªåˆ—è¡¨é•¿åº¦ç›¸ç­‰ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (wages*.v2Â hoursÂ wages/h)
    |'
  id: totrans-1557
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (wages*.v2Â hoursÂ wages/h)
    |'
- en: '| Â Â ''()) |'
  id: totrans-1558
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ''()) |'
- en: 'Making up examples is straightforward:'
  id: totrans-1559
  prefs: []
  type: TYPE_NORMAL
  zh: æ„é€ ç¤ºä¾‹å¾ˆç®€å•ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (wages*.v2Â ''()Â ''())Â ''())
    |'
  id: totrans-1560
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (wages*.v2Â ''()Â ''())Â ''())
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (wages*.v2Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 5.65)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 40))
    |'
  id: totrans-1561
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (wages*.v2Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 5.65)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 40))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 226.0))
    |'
  id: totrans-1562
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 226.0))
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (wages*.v2Â ''(5.65Â 8.75)Â ''(40.0Â 30.0))
    |'
  id: totrans-1563
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (wages*.v2Â ''(5.65Â 8.75)Â ''(40.0Â 30.0))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''(226.0Â 262.5)) |'
  id: totrans-1564
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''(226.0Â 262.5)) |'
- en: 'As required, all three examples use lists of equal length.The assumption concerning
    the inputs can also be exploited for the development of the template. More concretely,
    the condition says that ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  hours)
    is true when ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  wages/h)
    is true, and furthermore, ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  hours)
    is true when ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  wages/h)
    is true. It is thus acceptable to use a template for one of the two lists:'
  id: totrans-1565
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚è¦æ±‚ï¼Œæ‰€æœ‰ä¸‰ä¸ªç¤ºä¾‹éƒ½ä½¿ç”¨é•¿åº¦ç›¸ç­‰çš„åˆ—è¡¨ã€‚å…³äºè¾“å…¥çš„å‡è®¾ä¹Ÿå¯ä»¥ç”¨äºæ¨¡æ¿çš„å¼€å‘ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œæ¡ä»¶è¡¨æ˜å½“([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  hours)ä¸ºçœŸæ—¶ï¼Œ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  wages/h)ä¹Ÿä¸ºçœŸï¼Œå¹¶ä¸”å½“([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  hours)ä¸ºçœŸæ—¶ï¼Œ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  wages/h)ä¹Ÿä¸ºçœŸã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿ä¸­çš„ä¸€ä¸ªåˆ—è¡¨ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (wages*.v2Â hoursÂ wages/h)
    |'
  id: totrans-1566
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (wages*.v2 hours wages/h)) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1567
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â hours)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-1568
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [[empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    hours) [...] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-1569
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â hours)
    |'
  id: totrans-1570
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    hours) |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â wages/h)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-1571
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    wages/h) [...] |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (wages*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â hours)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â wages/h)))]))
    |'
  id: totrans-1572
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([wages*.v2](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    hours) ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    wages/h)))])) |'
- en: In the first [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause, both hours and wages/h are '(). Hence no selector expressions are needed.
    In the second clause, both hours and wages/h are constructed lists, which means
    we need four selector expressions. Finally, because the last two are lists of
    equal length, they make up a natural candidate for the natural recursion of wages*.v2.
  id: totrans-1573
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç¬¬ä¸€ä¸ª[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥ä¸­ï¼Œhours
    å’Œ wages/h éƒ½æ˜¯ '(). å› æ­¤ä¸éœ€è¦é€‰æ‹©è¡¨è¾¾å¼ã€‚åœ¨ç¬¬äºŒä¸ªå­å¥ä¸­ï¼Œhours å’Œ wages/h éƒ½æ˜¯æ„é€ åˆ—è¡¨ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å››ä¸ªé€‰æ‹©è¡¨è¾¾å¼ã€‚æœ€åï¼Œå› ä¸ºæœ€åä¸¤ä¸ªåˆ—è¡¨é•¿åº¦ç›¸ç­‰ï¼Œå®ƒä»¬è‡ªç„¶æˆä¸º
    wages*.v2 çš„è‡ªç„¶é€’å½’çš„å€™é€‰ã€‚
- en: The only unusual aspect of this template is that the recursive application consists
    of two expressions, both selector expressions for the two arguments. But, this
    idea directly follows from the assumption.
  id: totrans-1574
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæ¨¡æ¿çš„å”¯ä¸€ä¸å¯»å¸¸ä¹‹å¤„åœ¨äºï¼Œé€’å½’åº”ç”¨ç”±ä¸¤ä¸ªè¡¨è¾¾å¼ç»„æˆï¼Œè¿™ä¸¤ä¸ªè¡¨è¾¾å¼éƒ½æ˜¯ä¸¤ä¸ªå‚æ•°çš„é€‰æ‹©è¡¨è¾¾å¼ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæƒ³æ³•ç›´æ¥æºäºè¿™ä¸ªå‡è®¾ã€‚
- en: 'From here, it is a short step to a complete function definition:'
  id: totrans-1575
  prefs: []
  type: TYPE_NORMAL
  zh: ä»è¿™é‡Œï¼Œåˆ°å®Œæ•´çš„å‡½æ•°å®šä¹‰åªæœ‰ä¸€å°æ­¥ä¹‹é¥ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (wages*.v2Â hoursÂ wages/h)
    |'
  id: totrans-1576
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (wages*.v2Â hoursÂ wages/h)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1577
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â hours)Â ''()]
    |'
  id: totrans-1578
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â hours)Â ''()]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-1579
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    |'
  id: totrans-1580
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    |'
- en: '| Â Â Â Â Â Â Â (weekly-wageÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â hours)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â wages/h))
    |'
  id: totrans-1581
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â (weekly-wageÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â hours)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â wages/h))
    |'
- en: '| Â Â Â Â Â Â Â (wages*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â hours)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â wages/h)))]))
    |'
  id: totrans-1582
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â (wages*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â hours)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â wages/h)))]))
    |'
- en: 'The first example implies that the answer for the first [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause is ''(). In the second one, we have three values available:'
  id: totrans-1583
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªç¤ºä¾‹è¡¨æ˜ï¼Œç¬¬ä¸€ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    æ¡ä»¶çš„ç­”æ¡ˆæ˜¯ '(). åœ¨ç¬¬äºŒä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸‰ä¸ªå¯ç”¨çš„å€¼ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  hours),
    which represents the first number of weekly hours;
  id: totrans-1584
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  hours),
    è¡¨ç¤ºæ¯å‘¨å°æ—¶æ•°çš„ç¬¬ä¸€ä½ï¼›
- en: ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  wages/h),
    which is the first pay rate; and
  id: totrans-1585
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  wages/h),
    è¿™æ˜¯ç¬¬ä¸€ä¸ªå·¥èµ„ç‡ï¼›å¹¶ä¸”
- en: (wages*.v2  ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  hours)  ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  wages/h)),
    which, according to the purpose statement, computes the list of weekly wages for
    the remainders of the two lists.
  id: totrans-1586
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (wages*.v2  ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  hours)  ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  wages/h)),
    æ ¹æ®ç›®çš„å£°æ˜ï¼Œè®¡ç®—ä¸¤ä¸ªåˆ—è¡¨å‰©ä½™éƒ¨åˆ†çš„æ¯å‘¨å·¥èµ„åˆ—è¡¨ã€‚
- en: 'Now we just need to combine these values to get the final answer. As suggested
    by the examples, we must compute the weekly wage for the first employee and construct
    a list from that wage and the rest of the wages:'
  id: totrans-1587
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬åªéœ€è¦å°†è¿™äº›å€¼ç»„åˆèµ·æ¥ï¼Œå¾—åˆ°æœ€ç»ˆç­”æ¡ˆã€‚æ­£å¦‚ç¤ºä¾‹æ‰€å»ºè®®çš„ï¼Œæˆ‘ä»¬å¿…é¡»è®¡ç®—ç¬¬ä¸€ä¸ªå‘˜å·¥çš„æ¯å‘¨å·¥èµ„ï¼Œå¹¶ä»è¯¥å·¥èµ„å’Œå‰©ä½™å·¥èµ„ä¸­æ„é€ ä¸€ä¸ªåˆ—è¡¨ï¼š
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â (weekly-wageÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â hours)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â wages/h))
    |'
  id: totrans-1588
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    (weekly-wage ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    å°æ—¶) ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    å·¥èµ„/å°æ—¶))) |'
- en: '| Â Â Â Â Â Â (wages*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â hours)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â wages/h)))
    |'
  id: totrans-1589
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆwages*.v2 ï¼ˆ[rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    å°æ—¶ï¼‰([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    å·¥èµ„/å°æ—¶))) |'
- en: 'The auxiliary function weekly-wage uses the number of hours worked and the
    pay rate to compute the weekly wage for one worker:'
  id: totrans-1590
  prefs: []
  type: TYPE_NORMAL
  zh: è¾…åŠ©å‡½æ•°weekly-wageä½¿ç”¨å·¥ä½œå°æ—¶æ•°å’Œå·¥èµ„ç‡æ¥è®¡ç®—ä¸€ä¸ªå·¥äººçš„å‘¨å·¥èµ„ï¼š
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [Number](part_one.html#%28tech._number%29)
    -> [Number](part_one.html#%28tech._number%29) |'
  id: totrans-1591
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [Number](part_one.html#%28tech._number%29) [Number](part_one.html#%28tech._number%29)
    -> [Number](part_one.html#%28tech._number%29) |'
- en: '| ;Â computes the weekly wage from pay-rate and hours |'
  id: totrans-1592
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| è®¡ç®—ä»å·¥èµ„ç‡å’Œå°æ—¶æ•°ä¸­å¾—å‡ºçš„å‘¨å·¥èµ„ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (weekly-wageÂ pay-rateÂ hours)
    |'
  id: totrans-1593
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (weekly-wage pay-rate hours) |'
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â pay-rateÂ hours))
    |'
  id: totrans-1594
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    å·¥èµ„ç‡ å°æ—¶)) |'
- en: Stop! Which function do you need to use if you wish to compute the wages for
    one worker? Which function do you need to change if you wish to deal with income
    taxes?
  id: totrans-1595
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼å¦‚æœä½ æƒ³è¦è®¡ç®—ä¸€ä¸ªå·¥äººçš„å·¥èµ„ï¼Œä½ éœ€è¦ä½¿ç”¨å“ªä¸ªå‡½æ•°ï¼Ÿå¦‚æœä½ æƒ³è¦å¤„ç†æ‰€å¾—ç¨ï¼Œä½ éœ€è¦ä¿®æ”¹å“ªä¸ªå‡½æ•°ï¼Ÿ
- en: ExerciseÂ 388\. In the real world, wages*.v2 consumes lists of employee structures
    and lists of work records. An employee structure contains an employeeâ€™s name,
    social security number, and pay rate. A work record also contains an employeeâ€™s
    name and the number of hours worked in a week. The result is a list of structures
    that contain the name of the employee and the weekly wage.
  id: totrans-1596
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 388ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œwages*.v2æ¶ˆè€—å‘˜å·¥ç»“æ„å’Œå·¥ä½œè®°å½•åˆ—è¡¨ã€‚å‘˜å·¥ç»“æ„åŒ…å«å‘˜å·¥çš„å§“åã€ç¤¾ä¼šä¿é™©å·å’Œå·¥èµ„ç‡ã€‚å·¥ä½œè®°å½•ä¹ŸåŒ…å«å‘˜å·¥çš„å§“åå’Œä¸€å‘¨å†…å·¥ä½œçš„å°æ—¶æ•°ã€‚ç»“æœæ˜¯åŒ…å«å‘˜å·¥å§“åå’Œå‘¨å·¥èµ„çš„ç»“æ„åˆ—è¡¨ã€‚
- en: Modify the program in this section so that it works on these realistic versions
    of data. Provide the necessary structure type definitions and data definitions.
    Use the design recipe to guide the modification process.
  id: totrans-1597
  prefs: []
  type: TYPE_NORMAL
  zh: ä¿®æ”¹æœ¬èŠ‚ä¸­çš„ç¨‹åºï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†è¿™äº›ç°å®ç‰ˆæœ¬çš„æ•°æ®ã€‚æä¾›å¿…è¦çš„ç»“æ„ç±»å‹å®šä¹‰å’Œæ•°æ®å®šä¹‰ã€‚ä½¿ç”¨è®¾è®¡é£Ÿè°±æ¥æŒ‡å¯¼ä¿®æ”¹è¿‡ç¨‹ã€‚
- en: 'ExerciseÂ 389\. Design the zip function, which consumes a list of names, represented
    as strings, and a list of phone numbers, also strings. It combines those equally
    long lists into a list of phone records:'
  id: totrans-1598
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 389ã€‚è®¾è®¡zipå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²çš„å§“ååˆ—è¡¨å’Œä¸€ä¸ªè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²çš„ç”µè¯å·ç åˆ—è¡¨ã€‚å®ƒå°†è¿™äº›ç­‰é•¿çš„åˆ—è¡¨åˆå¹¶æˆä¸€ä¸ªç”µè¯è®°å½•åˆ—è¡¨ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â phone-recordÂ [nameÂ number])
    |'
  id: totrans-1599
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)
    phone-record [name number]) |'
- en: '| ;Â A PhoneRecord is a structure: |'
  id: totrans-1600
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ä¸€ä¸ªPhoneRecordæ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-phone-record  [String](part_one.html#%28tech._string%29)  [String](part_one.html#%28tech._string%29))
    |'
  id: totrans-1601
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆmake-phone-record [String](part_one.html#%28tech._string%29) [String](part_one.html#%28tech._string%29))
    |'
- en: Assume that the corresponding list items belong to the same person.
  id: totrans-1602
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ç›¸åº”çš„åˆ—è¡¨é¡¹å±äºåŒä¸€ä¸ªäººã€‚
- en: '23.3Processing Two Lists Simultaneously: Case 3[ğŸ”—](#(part._sec~3atwo-inputs~3acase3)
    "Link to here")'
  id: totrans-1603
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 23.3åŒæ—¶å¤„ç†ä¸¤ä¸ªåˆ—è¡¨ï¼šæƒ…å†µ 3[ğŸ”—](#(part._sec~3atwo-inputs~3acase3) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Here is a third type of problem:'
  id: totrans-1604
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯ç¬¬ä¸‰ç§ç±»å‹çš„é—®é¢˜ï¼š
- en: Sample Problem Given a list of symbols los and a natural number n, the function
    list-pick extracts the nth symbol from los; if there is no such symbol, it signals
    an error.
  id: totrans-1605
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹é—®é¢˜ç»™å®šä¸€ä¸ªç¬¦å·åˆ—è¡¨ los å’Œä¸€ä¸ªè‡ªç„¶æ•° nï¼Œå‡½æ•° list-pick ä» los ä¸­æå–ç¬¬ n ä¸ªç¬¦å·ï¼›å¦‚æœæ²¡æœ‰è¿™æ ·çš„ç¬¦å·ï¼Œåˆ™å¼•å‘é”™è¯¯ã€‚
- en: 'The question is how well the recipe works for the design of list-pick.While
    the data definition for a list of symbols is fairly familiar by now, recall the
    class of natural numbers from [Natural Numbers](part_two.html#%28part._sec~3anats%29):'
  id: totrans-1606
  prefs: []
  type: TYPE_NORMAL
  zh: é—®é¢˜æ˜¯è®¾è®¡æ–¹æ¡ˆå¯¹äº list-pick çš„è®¾è®¡æ•ˆæœå¦‚ä½•ã€‚è™½ç„¶ç°åœ¨å¯¹ç¬¦å·åˆ—è¡¨çš„æ•°æ®å®šä¹‰å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†è¯·å›å¿†ä¸€ä¸‹æ¥è‡ª [è‡ªç„¶æ•°](part_two.html#%28part._sec~3anats%29)
    çš„è‡ªç„¶æ•°ç±»ã€‚
- en: '| ;Â N is one of: |'
  id: totrans-1607
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â N æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š|'
- en: '| ;Â â€“  0 |'
  id: totrans-1608
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  0 |'
- en: '| ;Â â€“  ([add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)  [N](part_two.html#%28tech._n%29))
    |'
  id: totrans-1609
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)  [N](part_two.html#%28tech._n%29))
    |'
- en: 'Now we can proceed to the second step:'
  id: totrans-1610
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿›è¡Œç¬¬äºŒæ­¥ï¼š
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Symbol](i2-3.html#%28tech._symbol%29)]
    [N](part_two.html#%28tech._n%29) -> [Symbol](i2-3.html#%28tech._symbol%29) |'
  id: totrans-1611
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Symbol](i2-3.html#%28tech._symbol%29)]
    [N](part_two.html#%28tech._n%29) -> [Symbol](i2-3.html#%28tech._symbol%29) |'
- en: '| ;Â extracts the nth symbol from l; |'
  id: totrans-1612
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä» l ä¸­æå–ç¬¬ n ä¸ªç¬¦å·ï¼›|'
- en: '| ;Â signals an error if there is no such symbol |'
  id: totrans-1613
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœæ²¡æœ‰è¿™æ ·çš„ç¬¦å·ï¼Œåˆ™å¼•å‘é”™è¯¯ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ lÂ n)
    |'
  id: totrans-1614
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ lÂ n)
    |'
- en: '| Â Â ''a) |'
  id: totrans-1615
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ''a) |'
- en: 'Both lists of symbols and natural numbers are classes with complex data definitions.
    This combination makes the problem nonstandard, meaning we must pay attention
    to every detail for every step of the design recipe.At this point, we usually
    pick some input examples and figure out what the desired output is. We start with
    inputs for which the function has to work flawlessly: ''(a  b  c) and 2. For a
    list of three symbols and the index 2, list-pick must return a symbol. The question
    is whether it is ''b or ''c. In grade school, you would have counted 1, 2, and
    picked ''b without a first thought. But this is computer science, not grade school.
    Here people start counting from 0, meaning that ''c is an equally appropriate
    choice. And indeed, this is the choice we use:'
  id: totrans-1616
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¦å·åˆ—è¡¨å’Œè‡ªç„¶æ•°åˆ—è¡¨éƒ½æ˜¯å…·æœ‰å¤æ‚æ•°æ®å®šä¹‰çš„ç±»ã€‚è¿™ç§ç»„åˆä½¿å¾—é—®é¢˜å˜å¾—éæ ‡å‡†ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»åœ¨è®¾è®¡æ–¹æ¡ˆçš„æ¯ä¸€æ­¥éƒ½æ³¨æ„æ¯ä¸€ä¸ªç»†èŠ‚ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæŒ‘é€‰ä¸€äº›è¾“å…¥ç¤ºä¾‹ï¼Œå¹¶ç¡®å®šæœŸæœ›çš„è¾“å‡ºæ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬ä»å‡½æ•°å¿…é¡»å®Œç¾å·¥ä½œçš„è¾“å…¥å¼€å§‹ï¼š'(a
    b c) å’Œ 2ã€‚å¯¹äºä¸‰ä¸ªç¬¦å·çš„åˆ—è¡¨å’Œç´¢å¼• 2ï¼Œlist-pick å¿…é¡»è¿”å›ä¸€ä¸ªç¬¦å·ã€‚é—®é¢˜æ˜¯å®ƒæ˜¯ 'b è¿˜æ˜¯ 'cã€‚åœ¨å°å­¦ï¼Œä½ ä¼šæ•° 1ã€2ï¼Œç„¶åæ¯«ä¸çŠ¹è±«åœ°é€‰æ‹©
    'bã€‚ä½†è¿™æ˜¯è®¡ç®—æœºç§‘å­¦ï¼Œè€Œä¸æ˜¯å°å­¦ã€‚åœ¨è¿™é‡Œï¼Œäººä»¬ä» 0 å¼€å§‹è®¡æ•°ï¼Œè¿™æ„å‘³ç€ 'c æ˜¯ä¸€ä¸ªåŒæ ·åˆé€‚çš„é€‰æ‹©ã€‚äº‹å®ä¸Šï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„é€‰æ‹©ï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (list-pickÂ '(aÂ bÂ c)Â 2)Â 'c)
  id: totrans-1617
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (list-pickÂ '(aÂ bÂ c)Â 2)Â 'c)
- en: Now that we have eliminated this fine point of list-pick, letâ€™s look at the
    actual problem, the choice of inputs. The goal of the example step is to cover
    the input space as much as possible. We do so by picking one input per clause
    in the description of complex forms of data. Here this procedure suggests we pick
    at least two elements from each class because each data definition has two clauses.
    We choose '() and ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  'a  '())
    for the first argument, and 0 and 3 for the latter. Two choices per argument means
    four examples total; after all, there is no immediately obvious connection between
    the two arguments and no restriction in the signature.
  id: totrans-1618
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»æ¶ˆé™¤äº† list-pick çš„è¿™ä¸ªç»†å¾®ä¹‹å¤„ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å®é™…çš„é—®é¢˜ï¼Œå³è¾“å…¥çš„é€‰æ‹©ã€‚ç¤ºä¾‹æ­¥éª¤çš„ç›®æ ‡æ˜¯å°½å¯èƒ½è¦†ç›–è¾“å…¥ç©ºé—´ã€‚æˆ‘ä»¬é€šè¿‡åœ¨å¤æ‚æ•°æ®å½¢å¼çš„æè¿°ä¸­ä¸ºæ¯ä¸ªå­å¥é€‰æ‹©ä¸€ä¸ªè¾“å…¥æ¥å®ç°è¿™ä¸€ç‚¹ã€‚åœ¨è¿™é‡Œï¼Œè¿™ä¸ªç¨‹åºå»ºè®®æˆ‘ä»¬è‡³å°‘ä»æ¯ä¸ªç±»åˆ«ä¸­é€‰æ‹©ä¸¤ä¸ªå…ƒç´ ï¼Œå› ä¸ºæ¯ä¸ªæ•°æ®å®šä¹‰éƒ½æœ‰ä¸¤ä¸ªå­å¥ã€‚æˆ‘ä»¬ä¸ºç¬¬ä¸€ä¸ªå‚æ•°é€‰æ‹©
    '() å’Œ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  'a  '()))ï¼Œå¹¶ä¸ºåè€…é€‰æ‹©
    0 å’Œ 3ã€‚æ¯ä¸ªå‚æ•°ä¸¤ä¸ªé€‰æ‹©æ„å‘³ç€æ€»å…±æœ‰å››ä¸ªç¤ºä¾‹ï¼›æ¯•ç«Ÿï¼Œä¸¤ä¸ªå‚æ•°ä¹‹é—´æ²¡æœ‰ç«‹å³æ˜æ˜¾çš„å…³ç³»ï¼Œä¹Ÿæ²¡æœ‰åœ¨ç­¾åä¸­çš„é™åˆ¶ã€‚
- en: 'As it turns out, only one of these pairings produces a proper result; the remaining
    ones choose a position that does not exist because the list doesnâ€™t contain enough
    symbols:'
  id: totrans-1619
  prefs: []
  type: TYPE_NORMAL
  zh: ç»“æœè¡¨æ˜ï¼Œåªæœ‰è¿™äº›é…å¯¹ä¸­çš„ä¸€ç§äº§ç”Ÿäº†æ­£ç¡®çš„ç»“æœï¼›å…¶ä½™çš„ç”±äºåˆ—è¡¨ä¸­ç¬¦å·ä¸è¶³ï¼Œé€‰æ‹©äº†ä¸€ä¸ªä¸å­˜åœ¨çš„ä½ç½®ï¼š
- en: '| ([check-error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-error%29%29)Â (list-pickÂ ''()Â 0)Â "list
    too short") |'
  id: totrans-1620
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-error%29%29)Â (list-pickÂ ''()Â 0)Â "list
    too short") |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (list-pickÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''aÂ ''())Â 0)Â ''a)
    |'
  id: totrans-1621
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (list-pickÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''aÂ ''())Â 0)Â ''a)
    |'
- en: '| ([check-error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-error%29%29)Â (list-pickÂ ''()Â 3)Â "list
    too short") |'
  id: totrans-1622
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-error%29%29)Â (list-pickÂ ''()Â 3)Â "list
    too short") |'
- en: The function is expected to signal an error, and we pick our favorite message
    here.
  id: totrans-1623
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°é¢„æœŸä¼šå‘å‡ºé”™è¯¯ä¿¡å·ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé€‰æ‹©æˆ‘ä»¬å–œæ¬¢çš„æ¶ˆæ¯ã€‚
- en: Stop! Put these fragments into DrRacketâ€™s definitions area and run the partial
    program.
  id: totrans-1624
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼å°†è¿™äº›ç‰‡æ®µæ”¾å…¥ DrRacket çš„å®šä¹‰åŒºåŸŸå¹¶è¿è¡Œéƒ¨åˆ†ç¨‹åºã€‚
- en: 'The discussion on examples indicates that there are indeed four independent
    cases that we must inspect for the design of the function. One way to discover
    these cases is to arrange the conditions for each of the clauses into a two-dimensional
    table:'
  id: totrans-1625
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹ç¤ºä¾‹çš„è®¨è®ºè¡¨æ˜ï¼Œæˆ‘ä»¬ç¡®å®éœ€è¦æ£€æŸ¥å››ä¸ªç‹¬ç«‹çš„æƒ…å†µæ¥è®¾è®¡è¿™ä¸ªå‡½æ•°ã€‚å‘ç°è¿™äº›æƒ…å†µçš„ä¸€ç§æ–¹æ³•æ˜¯å°†æ¯ä¸ªå­å¥çš„æ¡ä»¶æ’åˆ—æˆä¸€ä¸ªäºŒç»´è¡¨ï¼š
- en: '|  |  | ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l)
    |  | ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  l)
    |'
  id: totrans-1626
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  | ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l)
    |  | ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  l)
    |'
- en: '| ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)
    |  |  |  |  |'
  id: totrans-1627
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)
    |  |  |  |  |'
- en: '| ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)  n  0)
    |  |  |  |  |'
  id: totrans-1628
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)  n  0)
    |  |  |  |  |'
- en: 'The horizontal dimension of the table lists those questions that list-pick
    must ask about lists; the vertical dimension lists the questions about natural
    numbers. By this arrangement, we naturally get four squares, where each represents
    the case when both the conditions on the horizontal and the vertical axis are
    true.Our table suggests that the [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    for the function template has four clauses. We can figure out the appropriate
    condition for each of these clauses by [and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)-ing
    the horizontal and vertical condition for each box in the table:'
  id: totrans-1629
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨æ ¼çš„æ°´å¹³ç»´åº¦åˆ—å‡ºäº†list-pickå¿…é¡»è¯¢é—®åˆ—è¡¨çš„é—®é¢˜ï¼›å‚ç›´ç»´åº¦åˆ—å‡ºäº†å…³äºè‡ªç„¶æ•°çš„é—®é¢˜ã€‚é€šè¿‡è¿™ç§å®‰æ’ï¼Œæˆ‘ä»¬è‡ªç„¶åœ°å¾—åˆ°å››ä¸ªæ–¹æ ¼ï¼Œæ¯ä¸ªæ–¹æ ¼ä»£è¡¨æ°´å¹³å’Œå‚ç›´è½´ä¸Šçš„æ¡ä»¶éƒ½ä¸ºçœŸçš„æƒ…å†µã€‚æˆ‘ä»¬çš„è¡¨æ ¼è¡¨æ˜ï¼Œå‡½æ•°æ¨¡æ¿çš„[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)æœ‰å››ä¸ªå­å¥ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†è¡¨æ ¼ä¸­æ¯ä¸ªæ–¹æ ¼çš„æ°´å¹³æ¡ä»¶å’Œå‚ç›´æ¡ä»¶è¿›è¡Œ[and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)æ“ä½œæ¥æ‰¾å‡ºæ¯ä¸ªå­å¥çš„é€‚å½“æ¡ä»¶ï¼š
- en: '|  |  | ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l)
    |  | ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  l)
    |'
  id: totrans-1630
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  | ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l)
    |  | ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  l)
    |'
- en: '| ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)
    |  |'
  id: totrans-1631
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)
    |  |'
- en: ''
  id: totrans-1632
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)
    &#124;'
  id: totrans-1633
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)
    |  |'
- en: '&#124; Â Â Â Â Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0))
    &#124;'
  id: totrans-1634
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0))
    |  |'
- en: ''
  id: totrans-1635
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-1636
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-1637
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l)
    &#124;'
  id: totrans-1638
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l)
    |  |'
- en: '&#124; Â Â Â Â Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0))
    &#124;'
  id: totrans-1639
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0))
    |  |'
- en: ''
  id: totrans-1640
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1641
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)  n  0)
    |  |'
  id: totrans-1642
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)  n  0)
    |  |'
- en: ''
  id: totrans-1643
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)
    &#124;'
  id: totrans-1644
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)
    |  |'
- en: '&#124; Â Â Â Â Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0))
    &#124;'
  id: totrans-1645
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)
    n 0)) [>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)
    n 0)) '
- en: ''
  id: totrans-1646
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-1647
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| '
- en: ''
  id: totrans-1648
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l)
    &#124;'
  id: totrans-1649
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)
    l) [and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)
    l) '
- en: '&#124; Â Â Â Â Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0))
    &#124;'
  id: totrans-1650
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)
    n 0)) [>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)
    n 0)) '
- en: ''
  id: totrans-1651
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1652
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: 'The [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    outline of the template is merely a translation of this table into a conditional:'
  id: totrans-1653
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡æ¿ä¸­çš„[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)ç»“æ„ä»…æ˜¯å°†æ­¤è¡¨è½¬æ¢ä¸ºæ¡ä»¶è¯­å¥ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ lÂ n)
    |'
  id: totrans-1654
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '[([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (list-pick l n) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1655
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-1656
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '[([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)
    n 0) ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    l)) [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)] '
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-1657
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '[([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)
    n 0) ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    l)) [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)] '
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-1658
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([å¹¶ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([ç­‰äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([åˆ—è¡¨ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29))]
    [...] |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    |'
  id: totrans-1659
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([å¹¶ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([å¤§äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([åˆ—è¡¨ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29))]
    [...] |'
- en: 'As always, the [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    expression allows us to distinguish the four possibilities and to focus on each
    individually as we add selector expressions to each [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause:'
  id: totrans-1660
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚åŒå¾€å¸¸ï¼Œ[æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    è¡¨è¾¾å¼å…è®¸æˆ‘ä»¬åŒºåˆ†å››ç§å¯èƒ½æ€§ï¼Œå¹¶åœ¨æ·»åŠ é€‰æ‹©è¡¨è¾¾å¼åˆ°æ¯ä¸ª [æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    å­å¥æ—¶åˆ†åˆ«å…³æ³¨æ¯ä¸€ä¸ªï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ lÂ n)
    |'
  id: totrans-1661
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ lÂ n))
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1662
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29))
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l))
    |'
  id: totrans-1663
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([å¹¶ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([ç­‰äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29))]
    |'
- en: '| Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-1664
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...] |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l))
    |'
  id: totrans-1665
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([([å’Œ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([å¤§äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0))Â ([åˆ—è¡¨ä¸ºç©º?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29))]
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  id: totrans-1666
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([å‡1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l))
    |'
  id: totrans-1667
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([([å’Œ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([ç­‰äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0))Â ([åˆ—è¡¨?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29))]
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)[...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  id: totrans-1668
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)[...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l))
    |'
  id: totrans-1669
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([([å’Œ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([å¤§äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0))Â ([åˆ—è¡¨?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29))]
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  id: totrans-1670
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
- en: 'The first argument, l, is a list, and a templateâ€™s [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause for non-empty lists contains two selector expressions. The second argument,
    n, belongs to [N](part_two.html#%28tech._n%29), and the templateâ€™s [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause for non-0 numbers needs only one selector expression. In those cases where
    either ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l)
    or ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)
    holds, the respective argument is atomic and there is no need for a corresponding
    selector expression.The final step of the template construction demands that we
    annotate the template with recursions where the results of selector expressions
    belong to the same class as the inputs. For this first example, we focus on the
    last [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause, which contains selector expressions for both arguments. It is, however,
    unclear how to form the natural recursions. If we disregard the purpose of the
    function, there are three possible recursions:'
  id: totrans-1671
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œlï¼Œæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶ä¸”æ¨¡æ¿çš„[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥å¯¹äºéç©ºåˆ—è¡¨åŒ…å«ä¸¤ä¸ªé€‰æ‹©è¡¨è¾¾å¼ã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼Œnï¼Œå±äº[N](part_two.html#%28tech._n%29)ï¼Œå¹¶ä¸”æ¨¡æ¿çš„[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥å¯¹äºé0æ•°å­—åªéœ€è¦ä¸€ä¸ªé€‰æ‹©è¡¨è¾¾å¼ã€‚åœ¨é‚£äº›è¦ä¹ˆ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l)è¦ä¹ˆ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)æˆç«‹çš„æƒ…å½¢ä¸­ï¼Œç›¸åº”çš„å‚æ•°æ˜¯åŸå­çš„ï¼Œå¹¶ä¸”ä¸éœ€è¦ç›¸åº”çš„é€‰æ‹©è¡¨è¾¾å¼ã€‚æ¨¡æ¿æ„å»ºçš„æœ€åä¸€æ­¥è¦æ±‚æˆ‘ä»¬åœ¨æ¨¡æ¿ä¸Šæ ‡æ³¨é€’å½’ï¼Œå…¶ä¸­é€‰æ‹©è¡¨è¾¾å¼çš„ç»“æœå±äºä¸è¾“å…¥ç›¸åŒçš„ç±»åˆ«ã€‚å¯¹äºè¿™ä¸ªç¬¬ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å…³æ³¨æœ€åçš„[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªå‚æ•°çš„é€‰æ‹©è¡¨è¾¾å¼ã€‚ç„¶è€Œï¼Œå¦‚ä½•å½¢æˆè‡ªç„¶çš„é€’å½’è¿˜ä¸æ¸…æ¥šã€‚å¦‚æœæˆ‘ä»¬ä¸è€ƒè™‘å‡½æ•°çš„ç›®çš„ï¼Œæœ‰ä¸‰ç§å¯èƒ½çš„é€’å½’æ–¹å¼ï¼š
- en: (list-pick  ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  l)  ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)  n))
  id: totrans-1672
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (list-pick  ([å‰©ä½™éƒ¨åˆ†](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  l)  ([å‡1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)  n))
- en: (list-pick  l  ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)  n))
  id: totrans-1673
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (list-pick  l  ([å‡1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)  n))
- en: (list-pick  ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  l)  n)
  id: totrans-1674
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (list-pick  ([å‰©ä½™éƒ¨åˆ†](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  l)  n)
- en: Each one represents a feasible combination of the available expressions. Since
    we cannot know which one matters or whether all three matter, we move on to the
    next development stage.
  id: totrans-1675
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸€ä¸ªéƒ½ä»£è¡¨å¯ç”¨è¡¨è¾¾å¼çš„å¯è¡Œç»„åˆã€‚ç”±äºæˆ‘ä»¬æ— æ³•çŸ¥é“å“ªä¸€ä¸ªé‡è¦ï¼Œæˆ–è€…æ˜¯å¦ä¸‰ä¸ªéƒ½é‡è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»§ç»­åˆ°ä¸‹ä¸€ä¸ªå¼€å‘é˜¶æ®µã€‚
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Symbol](i2-3.html#%28tech._symbol%29)]
    [N](part_two.html#%28tech._n%29) -> [Symbol](i2-3.html#%28tech._symbol%29) |'
  id: totrans-1676
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[ç¬¦å·åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29)  [ç¬¦å·](i2-3.html#%28tech._symbol%29)]
    [N](part_two.html#%28tech._n%29) -> [ç¬¦å·](i2-3.html#%28tech._symbol%29) |'
- en: '| ;Â extracts the nth symbol from l; |'
  id: totrans-1677
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»åˆ—è¡¨ä¸­æå–ç¬¬nä¸ªç¬¦å·ï¼› |'
- en: '| ;Â signals an error if there is no such symbol |'
  id: totrans-1678
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœæ²¡æœ‰è¿™æ ·çš„ç¬¦å·ï¼Œåˆ™å‘å‡ºé”™è¯¯ä¿¡å· |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ lÂ n)
    |'
  id: totrans-1679
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ lÂ n)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1680
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l))
    |'
  id: totrans-1681
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([å’Œ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([ç­‰äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([ç©ºåˆ—è¡¨ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l))
    |'
- en: '| Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â ''list-pickÂ "list
    too short")] |'
  id: totrans-1682
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([é”™è¯¯](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â ''list-pickÂ "åˆ—è¡¨å¤ªçŸ­")]
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l))
    |'
  id: totrans-1683
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([å’Œ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([å¤§äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([ç©ºåˆ—è¡¨ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l))
    |'
- en: '| Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â ''list-pickÂ "list
    too short")] |'
  id: totrans-1684
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([é”™è¯¯](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â ''list-pickÂ "åˆ—è¡¨å¤ªçŸ­")]
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l))Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)]
    |'
  id: totrans-1685
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([å¹¶ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([ç­‰äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([åˆ—è¡¨è¿æ¥ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l))Â ([åˆ—è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)]
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l))Â (list-pickÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))]))
    |'
  id: totrans-1686
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([å¹¶ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([å¤§äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([åˆ—è¡¨è¿æ¥ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â l))Â ([åˆ—è¡¨é€‰æ‹©](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list-pick%29%29)Â ([åˆ—è¡¨å‰©ä½™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â ([å‡1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))]))
    |'
- en: ''
  id: totrans-1687
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 134: Indexing into a list'
  id: totrans-1688
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾Â 134ï¼šåˆ—è¡¨ç´¢å¼•
- en: 'Following the design recipe for the fifth step, letâ€™s analyze each [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause in the template and decide what a proper answer is:'
  id: totrans-1689
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç…§ç¬¬äº”æ­¥çš„è®¾è®¡é£Ÿè°±ï¼Œè®©æˆ‘ä»¬åˆ†ææ¨¡æ¿ä¸­çš„æ¯ä¸ª[æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥ï¼Œå¹¶å†³å®šåˆé€‚çš„ç­”æ¡ˆï¼š
- en: If ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)  ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)  ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l))
    holds, list-pick must pick the first symbol from an empty list, which is impossible.
    The answer must be an error signal.
  id: totrans-1690
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœ([å¹¶ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)  ([ç­‰äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)  ([åˆ—è¡¨ä¸ºç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l))æˆç«‹ï¼Œåˆ—è¡¨é€‰æ‹©å¿…é¡»ä»ç©ºåˆ—è¡¨ä¸­é€‰æ‹©ç¬¬ä¸€ä¸ªç¬¦å·ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚ç­”æ¡ˆå¿…é¡»æ˜¯é”™è¯¯ä¿¡å·ã€‚
- en: If ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)  ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)  n  0)  ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l))
    holds, list-pick is again asked to pick a symbol from an empty list.
  id: totrans-1691
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœ([å¹¶ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)  ([å¤§äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)  n  0)  ([åˆ—è¡¨ä¸ºç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l))æˆç«‹ï¼Œåˆ—è¡¨é€‰æ‹©å†æ¬¡è¢«è¦æ±‚ä»ä¸€ä¸ªç©ºåˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªç¬¦å·ã€‚
- en: If ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)  ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)  ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  l))
    holds, list-pick is supposed to produce the first symbol from l. The selector
    expression ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  l)
    is the answer.
  id: totrans-1692
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœ ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)
    n  0) ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)
    l)) æˆç«‹ï¼Œlist-pick åº”è¯¥ä» l ä¸­äº§ç”Ÿç¬¬ä¸€ä¸ªç¬¦å·ã€‚é€‰æ‹©è¡¨è¾¾å¼ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    l) æ˜¯ç­”æ¡ˆã€‚
- en: 'If ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)  ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)  n  0)  ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  l))
    holds, we must analyze what the available expressions compute. As we have seen,
    it is a good idea to work through an existing example for this step. We pick a
    shortened variant of the first example:'
  id: totrans-1693
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœ ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)
    n  0) ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)
    l)) æˆç«‹ï¼Œæˆ‘ä»¬å¿…é¡»åˆ†æå¯ç”¨çš„è¡¨è¾¾å¼è®¡ç®—çš„å†…å®¹ã€‚æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œå¯¹äºè¿™ä¸€æ­¥ï¼Œé€šè¿‡ä¸€ä¸ªç°æœ‰çš„ä¾‹å­è¿›è¡Œæ“ä½œæ˜¯ä¸ªå¥½ä¸»æ„ã€‚æˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ä¸ªä¾‹å­çš„ç®€çŸ­å˜ä½“ï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (list-pickÂ '(aÂ b)Â 1)Â 'b)
  id: totrans-1694
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    (list-pick '(a b) 1) 'b)
- en: 'Here is what the three natural recursions compute with these values:'
  id: totrans-1695
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯è¿™ä¸‰ä¸ªè‡ªç„¶é€’å½’ä½¿ç”¨è¿™äº›å€¼è®¡ç®—çš„ç»“æœï¼š
- en: (list-pick  '(b)  0) produces 'b;
  id: totrans-1696
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: (list-pick '(b) 0) äº§ç”Ÿ 'bï¼›
- en: (list-pick  '(a  b)  0) evaluates to 'a, the wrong answer;
  id: totrans-1697
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: (list-pick '(a b) 0) è®¡ç®—ç»“æœä¸º 'aï¼Œé”™è¯¯çš„ç­”æ¡ˆï¼›
- en: and (list-pick  '(b)  1) signals an error.
  id: totrans-1698
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä»¥åŠ (list-pick '(b) 1) è§¦å‘é”™è¯¯ã€‚
- en: From this, we conclude that (list-pick  ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  l)  ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)  n))
    computes the desired answer in the last [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause.
  id: totrans-1699
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ä»è¿™é‡Œï¼Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œ(list-pick ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    l) ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)
    n)) åœ¨æœ€åä¸€ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    å­å¥ä¸­è®¡ç®—å‡ºæ‰€éœ€çš„ç­”æ¡ˆã€‚
- en: 'ExerciseÂ 390\. Design the function tree-pick. The function consumes a tree
    of symbols and a list of directions:'
  id: totrans-1700
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 390ã€‚è®¾è®¡å‡½æ•°tree-pickã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªç¬¦å·æ ‘å’Œæ–¹å‘åˆ—è¡¨ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â branchÂ [[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)Â [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
  id: totrans-1701
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)
    branch [[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
- en: '| Â  |'
  id: totrans-1702
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A TOS is one of: |'
  id: totrans-1703
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªTOSå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š|'
- en: '| ;Â â€“  [Symbol](i2-3.html#%28tech._symbol%29) |'
  id: totrans-1704
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [Symbol](i2-3.html#%28tech._symbol%29) |'
- en: '| ;Â â€“  (make-branch  [TOS](#%28tech._to%29)  [TOS](#%28tech._to%29)) |'
  id: totrans-1705
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  (make-branch  [TOS](#%28tech._to%29)  [TOS](#%28tech._to%29)) |'
- en: '| Â  |'
  id: totrans-1706
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A Direction is one of: |'
  id: totrans-1707
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Direction is one of: |'
- en: '| ;Â â€“  [''](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    |'
  id: totrans-1708
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [''](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    |'
- en: '| ;Â â€“  [''](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)[right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)
    |'
  id: totrans-1709
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [''](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)[right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)
    |'
- en: '| Â  |'
  id: totrans-1710
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A list of [Direction](#%28tech._direction%29)s is also called a path. |'
  id: totrans-1711
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A list of [Direction](#%28tech._direction%29)s is also called a path. |'
- en: Clearly a [Direction](#%28tech._direction%29) tells the function whether to
    choose the left or the right branch in a nonsymbolic tree. What is the result
    of the tree-pick function? Donâ€™t forget to formulate a full signature. The function
    signals an error when given a symbol and a non-empty path.
  id: totrans-1712
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç„¶ï¼Œä¸€ä¸ª[Direction](#%28tech._direction%29)å‘Šè¯‰å‡½æ•°åœ¨éç¬¦å·æ ‘ä¸­é€‰æ‹©å·¦åˆ†æ”¯è¿˜æ˜¯å³åˆ†æ”¯ã€‚æ ‘é€‰æ‹©å‡½æ•°çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿåˆ«å¿˜äº†åˆ¶å®šä¸€ä¸ªå®Œæ•´çš„ç­¾åã€‚å½“ç»™å‡½æ•°ä¸€ä¸ªç¬¦å·å’Œä¸€ä¸ªéç©ºè·¯å¾„æ—¶ï¼Œå®ƒä¼šå¼•å‘é”™è¯¯ã€‚
- en: 23.4Function Simplification[ğŸ”—](#(part._sec~3atwo-inputs~3asimplify) "Link to
    here")
  id: totrans-1713
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 23.4å‡½æ•°ç®€åŒ–[ğŸ”—](#(part._sec~3atwo-inputs~3asimplify) "é“¾æ¥åˆ°æ­¤å¤„")
- en: The list-pick function in [figureÂ 134](#%28counter._%28figure._fig~3alist-pick%29%29)
    is far more complicated than necessary. The first two [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clauses signal an error. That is, if either
  id: totrans-1714
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾134ä¸­çš„åˆ—è¡¨é€‰æ‹©å‡½æ•°æ¯”å¿…è¦çš„è¦å¤æ‚å¾—å¤šã€‚å‰ä¸¤ä¸ª[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥ä¼šå¼•å‘é”™è¯¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä»¥ä¸‹ä»»ä¸€æ¡ä»¶æˆç«‹ï¼Œ
- en: ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos))
  id: totrans-1715
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos))
- en: or
  id: totrans-1716
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ–è€…
- en: ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos))
  id: totrans-1717
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos))
- en: 'holds, the answer is an error. We can translate this observation into code:'
  id: totrans-1718
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆç«‹ï¼Œç­”æ¡ˆæ˜¯é”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªè§‚å¯Ÿç»“æœè½¬æ¢ä¸ºä»£ç ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ alosÂ n)
    |'
  id: totrans-1719
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ alosÂ n)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1720
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos))
    |'
  id: totrans-1721
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [([æˆ–](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)
    [([ä¸](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    [([ç­‰äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)
    n 0) [([ç©ºåˆ—è¡¨ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    alos))]] |'
- en: '| Â Â Â Â Â Â Â Â Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos)))
    |'
  id: totrans-1722
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [([ä¸](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    [([å¤§äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)
    n 0) [([ç©ºåˆ—è¡¨ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    alos)]]) |'
- en: '| Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â ''list-pickÂ "list
    too short")] |'
  id: totrans-1723
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [é”™è¯¯](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)
    ''list-pick "list too short"] |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â alos))Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alos)]
    |'
  id: totrans-1724
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [([ä¸](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    [([ç­‰äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)
    n 0) [([åˆ—è¡¨ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)
    alos)) [([ç¬¬ä¸€ä¸ªå…ƒç´ ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    alos)]]) |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â alos))
    |'
  id: totrans-1725
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [([ä¸](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    [([å¤§äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)
    n 0) [([åˆ—è¡¨ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)
    alos))]] |'
- en: '| Â Â Â Â Â (list-pickÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alos)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))]))
    |'
  id: totrans-1726
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [([list-pick](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list-pick%29%29)
    [([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    alos) [([å‡1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)
    n))])) |'
- en: To simplify this function even more, we need to get acquainted with algebraic
    laws concerning Booleans:These equations are known as de Morganâ€™s laws.
  id: totrans-1727
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è¿›ä¸€æ­¥ç®€åŒ–è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ç†Ÿæ‚‰æœ‰å…³å¸ƒå°”ä»£æ•°çš„å®šå¾‹ï¼šè¿™äº›ç­‰å¼è¢«ç§°ä¸ºå¾·æ‘©æ ¹å®šå¾‹ã€‚
- en: '|'
  id: totrans-1728
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1729
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â bexp1Â a-bexp)
    &#124;'
  id: totrans-1730
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([æˆ–](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)
    ([ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    bexp1 a-bexp) &#124;'
- en: '&#124; Â Â Â Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â bexp2Â a-bexp))
    &#124;'
  id: totrans-1731
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â ([ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    bexp2 a-bexp)) &#124;'
- en: ''
  id: totrans-1732
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | == |  |'
  id: totrans-1733
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | == |  |'
- en: ''
  id: totrans-1734
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â bexp1Â bexp2)
    &#124;'
  id: totrans-1735
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([æˆ–](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)
    bexp1 bexp2) &#124;'
- en: '&#124; Â Â Â Â Â a-bexp) &#124;'
  id: totrans-1736
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â a-bexp) &#124;'
- en: ''
  id: totrans-1737
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1738
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: 'A similar law applies when the sub-expressions of the [and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)s
    are swapped. Applying these laws to list-pick yields this:'
  id: totrans-1739
  prefs: []
  type: TYPE_NORMAL
  zh: å½“[ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)å­è¡¨è¾¾å¼çš„é¡ºåºäº¤æ¢æ—¶ï¼Œä¹Ÿé€‚ç”¨ç±»ä¼¼çš„å®šå¾‹ã€‚å°†è¿™äº›å®šå¾‹åº”ç”¨äºlist-pickï¼Œå¾—åˆ°ä»¥ä¸‹ç»“æœï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ nÂ alos)
    |'
  id: totrans-1740
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (list-pick n alos) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1741
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0))Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos))
    |'
  id: totrans-1742
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â [([ä¸”](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([æˆ–](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)
    ([ç­‰äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)
    n 0) ([å¤§äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)
    n 0)) ([ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    alos)) |'
- en: '| Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â ''list-pickÂ "list
    too short")] |'
  id: totrans-1743
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â ([é”™è¯¯](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)
    ''list-pickÂ "åˆ—è¡¨å¤ªçŸ­")] |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â alos))Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alos)]
    |'
  id: totrans-1744
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â alos))Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alos)])
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â alos))
    |'
  id: totrans-1745
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â alos)))
    |'
- en: '| Â Â Â Â Â (list-pickÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alos)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))]))
    |'
  id: totrans-1746
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (list-pickÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alos)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)))
    |'
- en: 'Now consider ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)  ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)  ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)  n  0)).
    It is always #true because n belongs to [N](part_two.html#%28tech._n%29). Since
    ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)  #true  ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  alos))
    is equivalent to ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  alos),
    we can rewrite the function again:'
  id: totrans-1747
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç°åœ¨è€ƒè™‘ ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)  ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  n  0)  ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)  n  0)).
    å®ƒæ€»æ˜¯ #trueï¼Œå› ä¸º n å±äº [N](part_two.html#%28tech._n%29)ã€‚ç”±äº ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)  #true  ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  alos))
    ç­‰ä»·äº ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  alos)ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡é‡å†™è¯¥å‡½æ•°ï¼š'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ alosÂ n)
    |'
  id: totrans-1748
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ alosÂ n))
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1749
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29))
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â ''list-pickÂ "list
    too short")] |'
  id: totrans-1750
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â ''list-pickÂ "list
    too short")] |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â alos))Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alos)]
    |'
  id: totrans-1751
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â alos))Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alos)]
    |'
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â alos))
    |'
  id: totrans-1752
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â alos))
    |'
- en: '| Â Â Â Â Â (list-pickÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alos)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))]))
    |'
  id: totrans-1753
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â (list-pickÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alos)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))]))
    |'
- en: 'This last definition is already significantly simpler than the definition in
    [figureÂ 134](#%28counter._%28figure._fig~3alist-pick%29%29), but we can do even
    better than this. Compare the first condition in the latest version of list-pick
    with the second and third. Since the first [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause filters out all those cases when alos is empty, ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  alos)
    in the last two clauses is always going to evaluate to #true. If we replace the
    condition with #true and simplify the [and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    expressions again, we get a three-line version of list-pick'
  id: totrans-1754
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæœ€åçš„å®šä¹‰å·²ç»æ¯”[å›¾134](#%28counter._%28figure._fig~3alist-pick%29%29)ä¸­çš„å®šä¹‰ç®€å•å¾—å¤šï¼Œä½†æˆ‘ä»¬è¿˜å¯ä»¥åšå¾—æ›´å¥½ã€‚æ¯”è¾ƒlist-pickæœ€æ–°ç‰ˆæœ¬ä¸­çš„ç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªæ¡ä»¶ã€‚ç”±äºç¬¬ä¸€ä¸ª[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥è¿‡æ»¤æ‰äº†æ‰€æœ‰å½“alosä¸ºç©ºçš„æƒ…å†µï¼Œ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)
    alos)åœ¨æœ€åä¸¤ä¸ªå­å¥ä¸­æ€»æ˜¯è¯„ä¼°ä¸º#trueã€‚å¦‚æœæˆ‘ä»¬ç”¨#trueæ›¿æ¢æ¡ä»¶å¹¶å†æ¬¡ç®€åŒ–[and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¾—åˆ°list-pickçš„ä¸‰è¡Œç‰ˆæœ¬
- en: '| ;Â list-pick: [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Symbol](i2-3.html#%28tech._symbol%29)]
    [N](part_two.html#%28tech._n%29)[>= 0] -> [Symbol](i2-3.html#%28tech._symbol%29)
    |'
  id: totrans-1755
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â list-pick: [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Symbol](i2-3.html#%28tech._symbol%29)]
    [N](part_two.html#%28tech._n%29)[>= 0] -> [Symbol](i2-3.html#%28tech._symbol%29)
    |'
- en: '| ;Â determines the nth symbol from alos, counting from 0; |'
  id: totrans-1756
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â determines the nth symbol from alos, counting from 0; |'
- en: '| ;Â signals an error if there is no nth symbol |'
  id: totrans-1757
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â signals an error if there is no nth symbol |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ alosÂ n)
    |'
  id: totrans-1758
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (list-pickÂ alosÂ n)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1759
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â ''list-pickÂ "list
    too short")] |'
  id: totrans-1760
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alos)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â ''list-pickÂ "list
    too short")] |'
- en: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alos)]
    |'
  id: totrans-1761
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 0)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alos)]
    |'
- en: '| Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â (list-pickÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alos)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))]))
    |'
  id: totrans-1762
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 0)Â ([list-pick](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list-pick%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alos)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))]))
    |'
- en: ''
  id: totrans-1763
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 135: Indexing into a list, simplified'
  id: totrans-1764
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'å›¾Â 135: åˆ—è¡¨ç´¢å¼•ï¼Œç®€åŒ–ç‰ˆ'
- en: '[FigureÂ 135](#%28counter._%28figure._fig~3alist-pick2%29%29) displays this
    simplified version of list-pick. While it is far simpler than the original, it
    is important to understand that we designed the original in a systematic manner
    and that we were able to transform the first into the second with well-established
    algebraic laws. We can therefore trust this simple version. If we try to find
    the simple versions of functions directly, we sooner or later fail to take care
    of a case in our analysis, and we are guaranteed to produce flawed programs.'
  id: totrans-1765
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾Â 135](#%28counter._%28figure._fig~3alist-pick2%29%29) å±•ç¤ºäº†åˆ—è¡¨é€‰æ‹©ï¼ˆlist-pickï¼‰çš„ç®€åŒ–ç‰ˆæœ¬ã€‚è™½ç„¶å®ƒæ¯”åŸå§‹ç‰ˆæœ¬ç®€å•å¾—å¤šï¼Œä½†é‡è¦çš„æ˜¯è¦ç†è§£æˆ‘ä»¬æ˜¯ä»¥ç³»ç»ŸåŒ–çš„æ–¹å¼è®¾è®¡åŸå§‹ç‰ˆæœ¬çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡å·²å»ºç«‹çš„ä»£æ•°æ³•åˆ™å°†ç¬¬ä¸€ä¸ªç‰ˆæœ¬è½¬æ¢ä¸ºç¬¬äºŒä¸ªç‰ˆæœ¬ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä¿¡ä»»è¿™ä¸ªç®€å•ç‰ˆæœ¬ã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾ç›´æ¥å¯»æ‰¾å‡½æ•°çš„ç®€å•ç‰ˆæœ¬ï¼Œæˆ‘ä»¬è¿Ÿæ—©ä¼šå¿½ç•¥åˆ†æä¸­çš„ä¸€ä¸ªæ¡ˆä¾‹ï¼Œå¹¶ä¸”æˆ‘ä»¬è‚¯å®šä¼šäº§ç”Ÿæœ‰ç¼ºé™·çš„ç¨‹åºã€‚'
- en: 'ExerciseÂ 391\. Design replace-eol-with using the strategy of [Processing Two
    Lists Simultaneously: Case 3](#%28part._sec~3atwo-inputs~3acase3%29). Start from
    the tests. Simplify the result systematically.'
  id: totrans-1766
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ Â 391. ä½¿ç”¨â€œåŒæ—¶å¤„ç†ä¸¤ä¸ªåˆ—è¡¨ï¼šæ¡ˆä¾‹ 3â€çš„ç­–ç•¥è®¾è®¡ replace-eol-withã€‚ä»æµ‹è¯•å¼€å§‹ã€‚ç³»ç»Ÿåœ°ç®€åŒ–ç»“æœã€‚
- en: ExerciseÂ 392\. Simplify the function tree-pick from [exerciseÂ 390](#%28counter._%28exercise._ex~3atree-pick%29%29).
  id: totrans-1767
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ Â 392. ç®€åŒ–å‡½æ•° tree-pickï¼Œæ¥è‡ª [ç»ƒä¹ Â 390](#%28counter._%28exercise._ex~3atree-pick%29%29)ã€‚
- en: 23.5Designing Functions that Consume Two Complex Inputs[ğŸ”—](#(part._sec~3atwo-inputs~3adesign)
    "Link to here")
  id: totrans-1768
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 23.5 è®¾è®¡æ¶ˆè´¹ä¸¤ä¸ªå¤æ‚è¾“å…¥çš„å‡½æ•°[ğŸ”—](#(part._sec~3atwo-inputs~3adesign) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'The proper approach to designing functions of two (or more) complex arguments
    is to follow the general recipe. You must conduct a data analysis and define the
    relevant classes of data. If the use of parametric definitions such as [List-of](part_three.html#%28tech._sim-dd._list._of%29)
    and short-hand examples such as ''(1  b  &) confuses you, expand them so that
    the constructors become explicit. Next you need a function signature and purpose.
    At this point, you can think ahead and decide which of the following three situations
    you are facing:'
  id: totrans-1769
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸¤ä¸ªï¼ˆæˆ–æ›´å¤šï¼‰å¤æ‚å‚æ•°çš„å‡½æ•°çš„æ­£ç¡®æ–¹æ³•æ˜¯è¦éµå¾ªé€šç”¨é…æ–¹ã€‚ä½ å¿…é¡»è¿›è¡Œæ•°æ®åˆ†æå¹¶å®šä¹‰ç›¸å…³çš„æ•°æ®ç±»åˆ«ã€‚å¦‚æœ [List-of](part_three.html#%28tech._sim-dd._list._of%29)
    å’ŒçŸ­è¯­çš„ä¾‹å­å¦‚ '(1  b  &) ä½¿ä½ å›°æƒ‘ï¼Œé‚£ä¹ˆæ‰©å±•å®ƒä»¬ï¼Œä½¿æ„é€ å™¨å˜å¾—æ˜ç¡®ã€‚æ¥ä¸‹æ¥ä½ éœ€è¦ä¸€ä¸ªå‡½æ•°ç­¾åå’Œç›®çš„ã€‚æ­¤æ—¶ï¼Œä½ å¯ä»¥æå‰è€ƒè™‘å¹¶å†³å®šä½ é¢ä¸´ä»¥ä¸‹ä¸‰ç§æƒ…å†µä¸­çš„å“ªä¸€ç§ï¼š
- en: If one of the parameters plays a dominant role, think of the other as an atomic
    piece of data as far as the function is concerned.
  id: totrans-1770
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœå…¶ä¸­ä¸€ä¸ªå‚æ•°èµ·ä¸»å¯¼ä½œç”¨ï¼Œé‚£ä¹ˆåœ¨å‡½æ•°æ–¹é¢ï¼Œå°†å¦ä¸€ä¸ªè§†ä¸ºåŸå­æ•°æ®å—ã€‚
- en: In some cases the parameters range over the same class of values and must have
    the same size. For example, two lists must have the same length, or two web pages
    must have the same length and where one of them contains an embedded page, the
    other one does, too. If the two parameters have this equal status and the purpose
    suggests that they are processed in a synchronized manner, you choose one parameter,
    organize the function around it, and traverse the other in a parallel manner.
  id: totrans-1771
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå‚æ•°çš„èŒƒå›´è·¨è¶Šç›¸åŒçš„å€¼ç±»ï¼Œå¹¶ä¸”å¿…é¡»å…·æœ‰ç›¸åŒçš„å¤§å°ã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªåˆ—è¡¨å¿…é¡»å…·æœ‰ç›¸åŒçš„é•¿åº¦ï¼Œæˆ–è€…ä¸¤ä¸ªç½‘é¡µå¿…é¡»å…·æœ‰ç›¸åŒçš„é•¿åº¦ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯åµŒå…¥é¡µé¢çš„ï¼Œå¦ä¸€ä¸ªä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¦‚æœä¸¤ä¸ªå‚æ•°å…·æœ‰è¿™ç§å¹³ç­‰åœ°ä½ï¼Œå¹¶ä¸”ç›®çš„è¡¨æ˜å®ƒä»¬éœ€è¦åŒæ­¥å¤„ç†ï¼Œä½ é€‰æ‹©ä¸€ä¸ªå‚æ•°ï¼Œå›´ç»•å®ƒç»„ç»‡å‡½æ•°ï¼Œå¹¶ä»¥å¹¶è¡Œæ–¹å¼éå†å¦ä¸€ä¸ªã€‚
- en: If there is no obvious connection between the two parameters, you must analyze
    all possible cases with examples. Then use this analysis to develop the template,
    especially the recursive parts.
  id: totrans-1772
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœä¸¤ä¸ªå‚æ•°ä¹‹é—´æ²¡æœ‰æ˜æ˜¾çš„è”ç³»ï¼Œä½ å¿…é¡»åˆ†ææ‰€æœ‰å¯èƒ½çš„æƒ…å†µå¹¶ä¸¾ä¾‹è¯´æ˜ã€‚ç„¶åä½¿ç”¨è¿™ç§åˆ†ææ¥å¼€å‘æ¨¡æ¿ï¼Œç‰¹åˆ«æ˜¯é€’å½’éƒ¨åˆ†ã€‚
- en: 'Once you decide that a function falls into the third category, develop a two-dimensional
    table to make sure that no case falls through the cracks. Letâ€™s use a nontrivial
    pair of data definitions to explain this idea again:'
  id: totrans-1773
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ä½ ç¡®å®šä¸€ä¸ªå‡½æ•°å±äºç¬¬ä¸‰ç±»ï¼Œå°±å¼€å‘ä¸€ä¸ªäºŒç»´è¡¨æ ¼ä»¥ç¡®ä¿æ²¡æœ‰æ¡ˆä¾‹é—æ¼ã€‚è®©æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªéå¹³å‡¡çš„æ•°æ®å®šä¹‰å¯¹è¿™ä¸€æƒ³æ³•å†æ¬¡è¿›è¡Œè§£é‡Šï¼š
- en: '|'
  id: totrans-1774
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1775
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â An LOD is one of: &#124;'
  id: totrans-1776
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â An LOD is one of: &#124;'
- en: '&#124; ;Â â€“  ''() &#124;'
  id: totrans-1777
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  ''() &#124;'
- en: '&#124; ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Direction](#%28tech._direction%29)  [LOD](#%28tech._lod%29))
    &#124;'
  id: totrans-1778
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [Direction](#%28tech._direction%29)  [LOD](#%28tech._lod%29))
    &#124;'
- en: ''
  id: totrans-1779
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-1780
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-1781
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â A TID is one of: &#124;'
  id: totrans-1782
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â A TID is one of: &#124;'
- en: '&#124; ;Â â€“  [Symbol](i2-3.html#%28tech._symbol%29) &#124;'
  id: totrans-1783
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  [Symbol](i2-3.html#%28tech._symbol%29) &#124;'
- en: '&#124; ;Â â€“  (make-binary  [TID](#%28tech._tid%29)  [TID](#%28tech._tid%29))
    &#124;'
  id: totrans-1784
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  (make-binary  [TID](#%28tech._tid%29)  [TID](#%28tech._tid%29))
    &#124;'
- en: '&#124; ;Â â€“  (make-with  [TID](#%28tech._tid%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [TID](#%28tech._tid%29))
    &#124;'
  id: totrans-1785
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  (make-with  [TID](#%28tech._tid%29)  [Symbol](i2-3.html#%28tech._symbol%29)  [TID](#%28tech._tid%29))
    &#124;'
- en: ''
  id: totrans-1786
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1787
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: 'The left data definition is the usual list definition; the right one is a three-clause
    variant of [TOS](#%28tech._to%29). It uses two structure type definitions:'
  id: totrans-1788
  prefs: []
  type: TYPE_NORMAL
  zh: å·¦ä¾§çš„æ•°æ®å®šä¹‰æ˜¯å¸¸è§„çš„åˆ—è¡¨å®šä¹‰ï¼›å³ä¾§çš„æ˜¯ [TOS](#%28tech._to%29) çš„ä¸‰ä¸ªå­å¥å˜ä½“ã€‚å®ƒä½¿ç”¨äº†ä¸¤ç§ç»“æ„ç±»å‹å®šä¹‰ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â withÂ [lftÂ infoÂ rght])
    |'
  id: totrans-1789
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â withÂ [lftÂ infoÂ rght])
    |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â binaryÂ [lftÂ rght])
    |'
  id: totrans-1790
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â binaryÂ [lftÂ rght])
    |'
- en: 'Assuming the function consumes an [LOD](#%28tech._lod%29) and a [TID](#%28tech._tid%29),
    the table that you should come up with has this shape:'
  id: totrans-1791
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ª [LOD](#%28tech._lod%29) å’Œä¸€ä¸ª [TID](#%28tech._tid%29)ï¼Œä½ åº”è¯¥æ„å»ºçš„è¡¨æ ¼å…·æœ‰å¦‚ä¸‹å½¢çŠ¶ï¼š
- en: '|  |  | ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l)
    |  | ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  l)
    |'
  id: totrans-1792
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  | ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  l)
    |  | ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  l)
    |'
- en: '| ([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)  t)
    |  |  |  |  |'
  id: totrans-1793
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29)  t)
    |  |  |  |  |'
- en: '| (binary?  t) |  |  |  |  |'
  id: totrans-1794
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (binary?  t) |  |  |  |  |'
- en: '| (with?  t) |  |  |  |  |'
  id: totrans-1795
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (with?  t) |  |  |  |  |'
- en: Along the horizontal direction we enumerate the conditions that recognize the
    sub-classes for the first parameter, here [LOD](#%28tech._lod%29), and along the
    vertical direction we enumerate the conditions for the second parameter, [TID](#%28tech._tid%29).
  id: totrans-1796
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ°´å¹³æ–¹å‘ä¸Šï¼Œæˆ‘ä»¬åˆ—ä¸¾äº†è¯†åˆ«ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆæ­¤å¤„ä¸º[LOD](#%28tech._lod%29)ï¼‰çš„å­ç±»çš„æ¡ä»¶ï¼Œè€Œåœ¨å‚ç›´æ–¹å‘ä¸Šï¼Œæˆ‘ä»¬åˆ—ä¸¾äº†ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ[TID](#%28tech._tid%29)ï¼‰çš„æ¡ä»¶ã€‚
- en: The table guides the development of both the function examples and the function
    template. As explained, the examples must cover all possible cases; that is, there
    must be at least one example for each cell in the table. Similarly, the template
    must have one [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause per cell; its condition combines the horizontal and the vertical conditions
    in an [and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    expression. Each [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause, in turn, must contain all feasible selector expressions for both parameters.
    If one of the parameters is atomic, there is no need for a selector expression.
    Finally, you need to be aware of the feasible natural recursions. In general,
    all possible combinations of selector expressions (and optionally, atomic arguments)
    are candidates for a natural recursion. Because we canâ€™t know which ones are necessary
    and which ones arenâ€™t, we keep them in mind for the coding step.
  id: totrans-1797
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥è¡¨æŒ‡å¯¼äº†å‡½æ•°ç¤ºä¾‹å’Œå‡½æ•°æ¨¡æ¿çš„å¼€å‘ã€‚æ­£å¦‚è§£é‡Šçš„é‚£æ ·ï¼Œç¤ºä¾‹å¿…é¡»æ¶µç›–æ‰€æœ‰å¯èƒ½çš„æ¡ˆä¾‹ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œè¡¨ä¸­æ¯ä¸ªå•å…ƒæ ¼è‡³å°‘å¿…é¡»æœ‰ä¸€ä¸ªç¤ºä¾‹ã€‚åŒæ ·ï¼Œæ¨¡æ¿å¿…é¡»ä¸ºæ¯ä¸ªå•å…ƒæ ¼æœ‰ä¸€ä¸ª
    [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    å­å¥ï¼›å…¶æ¡ä»¶é€šè¿‡ä¸€ä¸ª [and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    è¡¨è¾¾å¼ç»“åˆæ°´å¹³å’Œå‚ç›´æ¡ä»¶ã€‚æ¯ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    å­å¥ï¼Œåè¿‡æ¥ï¼Œå¿…é¡»åŒ…å«ä¸¤ä¸ªå‚æ•°çš„æ‰€æœ‰å¯è¡Œçš„é€‰æ‹©è¡¨è¾¾å¼ã€‚å¦‚æœä¸€ä¸ªå‚æ•°æ˜¯åŸå­çš„ï¼Œåˆ™ä¸éœ€è¦é€‰æ‹©è¡¨è¾¾å¼ã€‚æœ€åï¼Œä½ éœ€è¦æ³¨æ„å¯è¡Œçš„è‡ªç„¶é€’å½’ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ‰€æœ‰å¯èƒ½çš„é€‰æ‹©è¡¨è¾¾å¼ï¼ˆä»¥åŠå¯é€‰çš„åŸå­å‚æ•°ï¼‰çš„ç»„åˆéƒ½æ˜¯è‡ªç„¶é€’å½’çš„å€™é€‰ã€‚å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“å“ªäº›æ˜¯å¿…è¦çš„ï¼Œå“ªäº›ä¸æ˜¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è®°ä½å®ƒä»¬ä»¥å¤‡ç¼–ç æ­¥éª¤ä¹‹ç”¨ã€‚
- en: In summary, the design of multiparameter functions is just a variation on the
    old design-recipe theme. The key idea is to translate the data definitions into
    a table that shows all feasible and interesting combinations. The development
    of function examples and the template exploit the table as much as possible.
  id: totrans-1798
  prefs: []
  type: TYPE_NORMAL
  zh: æ€»ç»“æ¥è¯´ï¼Œå¤šå‚æ•°å‡½æ•°çš„è®¾è®¡åªæ˜¯æ—§çš„è®¾è®¡é£Ÿè°±ä¸»é¢˜çš„ä¸€ç§å˜ä½“ã€‚å…³é”®æ€æƒ³æ˜¯å°†æ•°æ®å®šä¹‰è½¬æ¢æˆä¸€ä¸ªæ˜¾ç¤ºæ‰€æœ‰å¯è¡Œå’Œæœ‰è¶£ç»„åˆçš„è¡¨ã€‚å‡½æ•°ç¤ºä¾‹å’Œæ¨¡æ¿çš„å¼€å‘å°½å¯èƒ½åˆ©ç”¨è¿™ä¸ªè¡¨ã€‚
- en: '23.6Finger Exercises: Two Inputs[ğŸ”—](#(part._sec~3atwo-inputs~3aex) "Link to
    here")'
  id: totrans-1799
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 23.6æ‰‹æŒ‡ç»ƒä¹ ï¼šä¸¤ä¸ªè¾“å…¥[ğŸ”—](#(part._sec~3atwo-inputs~3aex) "é“¾æ¥åˆ°æ­¤å¤„")
- en: ExerciseÂ 393\. [FigureÂ 62](part_two.html#%28counter._%28figure._fig~3asets-vs-lists%29%29)
    presents two data definitions for finite sets. Design the union function for the
    representation of finite sets of your choice. It consumes two sets and produces
    one that contains the elements of both.
  id: totrans-1800
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 393. [å›¾62](part_two.html#%28counter._%28figure._fig~3asets-vs-lists%29%29)
    å±•ç¤ºäº†æœ‰é™é›†åˆçš„ä¸¤ç§æ•°æ®å®šä¹‰ã€‚è®¾è®¡ä¸€ä¸ªè¡¨ç¤ºä½ é€‰æ‹©çš„æœ‰é™é›†åˆçš„å¹¶é›†å‡½æ•°ã€‚å®ƒæ¥å—ä¸¤ä¸ªé›†åˆï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªåŒ…å«ä¸¤ä¸ªé›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„é›†åˆã€‚
- en: Design intersect for the same set representation. It consumes two sets and produces
    the set of exactly those elements that occur in both.
  id: totrans-1801
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºç›¸åŒçš„é›†åˆè¡¨ç¤ºè®¾è®¡äº¤é›†å‡½æ•°ã€‚å®ƒæ¥å—ä¸¤ä¸ªé›†åˆï¼Œå¹¶äº§ç”Ÿæ°å¥½å‡ºç°åœ¨ä¸¤ä¸ªé›†åˆä¸­çš„é‚£äº›å…ƒç´ çš„é›†åˆã€‚
- en: ExerciseÂ 394\. Design merge. The function consumes two lists of numbers, sorted
    in ascending order. It produces a single sorted list of numbers that contains
    all the numbers on both inputs lists. A number occurs in the output as many times
    as it occurs on the two input lists together.
  id: totrans-1802
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 394ã€‚è®¾è®¡åˆå¹¶ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸¤ä¸ªæŒ‰å‡åºæ’åºçš„æ•°å­—åˆ—è¡¨ã€‚å®ƒäº§ç”Ÿä¸€ä¸ªåŒ…å«ä¸¤ä¸ªè¾“å…¥åˆ—è¡¨ä¸Šæ‰€æœ‰æ•°å­—çš„å•ä¸ªæ’åºåçš„æ•°å­—åˆ—è¡¨ã€‚ä¸€ä¸ªæ•°å­—åœ¨è¾“å‡ºä¸­å‡ºç°çš„æ¬¡æ•°ä¸å®ƒåœ¨ä¸¤ä¸ªè¾“å…¥åˆ—è¡¨ä¸­ä¸€èµ·å‡ºç°çš„æ¬¡æ•°ç›¸åŒã€‚
- en: ExerciseÂ 395\. Design take. It consumes a list l and a natural number n. It
    produces the first n items from l or all of l if it is too short.
  id: totrans-1803
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 395ã€‚è®¾è®¡å–ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªåˆ—è¡¨lå’Œä¸€ä¸ªè‡ªç„¶æ•°nã€‚å®ƒäº§ç”Ÿlçš„å‰nä¸ªå…ƒç´ ï¼Œå¦‚æœlå¤ªçŸ­ï¼Œåˆ™äº§ç”Ÿlçš„æ‰€æœ‰å…ƒç´ ã€‚
- en: Design drop. It consumes a list l and a natural number n. Its result is l with
    the first n items removed or just â€™() if l is too short.
  id: totrans-1804
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡åˆ é™¤ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªåˆ—è¡¨lå’Œä¸€ä¸ªè‡ªç„¶æ•°nã€‚å®ƒçš„ç»“æœæ˜¯ç§»é™¤äº†å‰nä¸ªå…ƒç´ çš„lï¼Œå¦‚æœlå¤ªçŸ­ï¼Œåˆ™è¿”å›ç©ºåˆ—è¡¨()ã€‚
- en: '| ;Â An HM-Word is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Letter](part_two.html#%28tech._letter%29)
    or "_"] |'
  id: totrans-1805
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â An HM-Word is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Letter](part_two.html#%28tech._letter%29)
    or "_"] |'
- en: '| ;Â interpretation  "_" represents a letter to be guessed |'
  id: totrans-1806
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â interpretation  "_" represents a letter to be guessed |'
- en: '| Â  |'
  id: totrans-1807
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â [HM-Word](#%28tech._hm._word%29)  [N](part_two.html#%28tech._n%29) -> [String](part_one.html#%28tech._string%29)
    |'
  id: totrans-1808
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [HM-Word](#%28tech._hm._word%29)  [N](part_two.html#%28tech._n%29) ->
    [String](part_one.html#%28tech._string%29) |'
- en: '| ;Â runs a simplistic hangman game, produces the current state |'
  id: totrans-1809
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â runs a simplistic hangman game, produces the current state |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (playÂ the-pickÂ time-limit)
    |'
  id: totrans-1810
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (playÂ the-pickÂ time-limit)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â the-wordÂ Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â the-pick))
    |'
  id: totrans-1811
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â the-wordÂ Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â the-pick))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â the-guessÂ ([make-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-list%29%29)Â (lengthÂ the-word)Â "_"))
    |'
  id: totrans-1812
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â the-guessÂ ([make-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-list%29%29)Â (lengthÂ the-word)Â "_"))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [HM-Word](#%28tech._hm._word%29) -> [HM-Word](#%28tech._hm._word%29)
    |'
  id: totrans-1813
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [HM-Word](#%28tech._hm._word%29) -> [HM-Word](#%28tech._hm._word%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (do-nothingÂ s)Â s)
    |'
  id: totrans-1814
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (do-nothingÂ s)Â s)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [HM-Word](#%28tech._hm._word%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [HM-Word](#%28tech._hm._word%29) |'
  id: totrans-1815
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [HM-Word](#%28tech._hm._word%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [HM-Word](#%28tech._hm._word%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (checked-compareÂ current-statusÂ ke)
    |'
  id: totrans-1816
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (checked-compareÂ current-statusÂ ke)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â keÂ LETTERS)
    |'
  id: totrans-1817
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â  ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â keÂ LETTERS)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (compare-wordÂ the-wordÂ current-statusÂ ke) |'
  id: totrans-1818
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â  compare-word the-word current-status ke |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â current-status))) |'
  id: totrans-1819
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â current-status))) |'
- en: '| Â Â Â Â ([implode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29)
    |'
  id: totrans-1820
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([å‹ç¼©](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29)
    |'
- en: '| Â Â Â Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â the-guessÂ ;Â [HM-Word](#%28tech._hm._word%29)
    |'
  id: totrans-1821
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([å¤§çˆ†ç‚¸](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)the-guessÂ ;Â [HM-Word](#%28tech._hm._word%29)
    |'
- en: '| Â Â Â Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render-word]
    |'
  id: totrans-1822
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â [[ç»˜åˆ¶](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render-word]
    |'
- en: '| Â Â Â Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â do-nothingÂ 1Â time-limit]
    |'
  id: totrans-1823
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â [[åœ¨è®¡æ—¶å™¨ä¸Š](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â do-nothingÂ 1Â time-limit]
    |'
- en: '| Â Â Â Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â Â checked-compare]))))
    |'
  id: totrans-1824
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â [[åœ¨é”®ä¸Š](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â Â checked-compare]))))
    |'
- en: '| Â  |'
  id: totrans-1825
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [HM-Word](#%28tech._hm._word%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1826
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [HM-Word](#%28tech._hm._word%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-wordÂ w)
    |'
  id: totrans-1827
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (render-wordÂ w)
    |'
- en: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29)Â w)Â 22Â "black"))
    |'
  id: totrans-1828
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ–‡æœ¬](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ([å‹ç¼©](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29)Â w)Â 22Â "é»‘è‰²"))
    |'
- en: ''
  id: totrans-1829
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 136: A simple hangman game'
  id: totrans-1830
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 136ï¼šä¸€ä¸ªç®€å•çš„çŒœå­—æ¸¸æˆ
- en: ExerciseÂ 396\. Hangman is a well-known guessing game. One player picks a word,
    the other player gets told how many letters the word contains. The latter picks
    a letter and asks the first player whether and where this letter occurs in the
    chosen word. The game is over after an agreed-upon time or number of rounds.
  id: totrans-1831
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  396ï¼šçŒœå­—æ¸¸æˆæ˜¯ä¸€ç§è‘—åçš„çŒœè°œæ¸¸æˆã€‚ä¸€åç©å®¶é€‰æ‹©ä¸€ä¸ªå•è¯ï¼Œå¦ä¸€åç©å®¶è¢«å‘ŠçŸ¥è¯¥å•è¯åŒ…å«å¤šå°‘ä¸ªå­—æ¯ã€‚åè€…é€‰æ‹©ä¸€ä¸ªå­—æ¯ï¼Œå¹¶è¯¢é—®ç¬¬ä¸€ä¸ªç©å®¶è¿™ä¸ªå­—æ¯æ˜¯å¦ä»¥åŠåœ¨å“ªé‡Œå‡ºç°åœ¨æ‰€é€‰å•è¯ä¸­ã€‚æ¸¸æˆåœ¨çº¦å®šçš„æ—¶é—´æˆ–å›åˆæ•°åç»“æŸã€‚
- en: '[FigureÂ 136](#%28counter._%28figure._fig~3ahangman-game%29%29) presents the
    essence of a time-limited version of the game. See [Local Definitions Add Expressive
    Power](part_three.html#%28part._sec~3alocal-is-power%29) for why checked-compare
    is defined locally.'
  id: totrans-1832
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾ 136](#%28counter._%28figure._fig~3ahangman-game%29%29) å±•ç¤ºäº†æ¸¸æˆé™æ—¶ç‰ˆæœ¬çš„æ ¸å¿ƒã€‚å‚è§ [å±€éƒ¨å®šä¹‰å¢åŠ è¡¨è¾¾åŠ›](part_three.html#%28part._sec~3alocal-is-power%29)
    äº†è§£ä¸ºä»€ä¹ˆ checked-compare æ˜¯å±€éƒ¨å®šä¹‰çš„ã€‚'
- en: The goal of this exercise is to design compare-word, the central function. It
    consumes the word to be guessed, a word s that represents how much/little the
    guessing player has discovered, and the current guess. The function produces s
    with all "_" where the guess revealed a letter.
  id: totrans-1833
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ç»ƒä¹ çš„ç›®çš„æ˜¯è®¾è®¡ compare-wordï¼Œè¿™æ˜¯æ ¸å¿ƒå‡½æ•°ã€‚å®ƒæ¥å—è¦çŒœæµ‹çš„å•è¯ã€è¡¨ç¤ºçŒœæµ‹ç©å®¶å·²å‘ç°å¤šå°‘/å¤šå°‘çš„å•è¯ s ä»¥åŠå½“å‰çš„çŒœæµ‹ã€‚è¯¥å‡½æ•°ç”Ÿæˆ sï¼Œå…¶ä¸­æ‰€æœ‰
    "_" éƒ½è¡¨ç¤ºçŒœæµ‹æ­ç¤ºäº†å­—æ¯ã€‚
- en: 'Once you have designed the function, run the program like this:'
  id: totrans-1834
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡å¥½å‡½æ•°åï¼ŒæŒ‰å¦‚ä¸‹æ–¹å¼è¿è¡Œç¨‹åºï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â LOCATIONÂ "/usr/share/dict/words")Â ;Â on
    OS X |'
  id: totrans-1835
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â LOCATIONÂ "/usr/share/dict/words")Â ;Â åœ¨
    OS X ä¸Š |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â AS-LISTÂ ([read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)Â LOCATION))
    |'
  id: totrans-1836
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â AS-LISTÂ ([è¯»å–è¡Œ](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)Â LOCATION))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â SIZEÂ (lengthÂ AS-LIST))
    |'
  id: totrans-1837
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â SIZEÂ (lengthÂ AS-LIST))
    |'
- en: '| (playÂ ([list-ref](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list-ref%29%29)Â AS-LISTÂ ([random](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._random%29%29)Â SIZE))Â 10)
    |'
  id: totrans-1838
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (playÂ ([list-ref](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list-ref%29%29)Â AS-LISTÂ ([random](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._random%29%29)Â SIZE))Â 10)
    |'
- en: See [figureÂ 74](part_two.html#%28counter._%28figure._fig~3areading-a-dictionary%29%29)
    for an explanation. Enjoy and refine as desired!
  id: totrans-1839
  prefs: []
  type: TYPE_NORMAL
  zh: è§ [å›¾ 74](part_two.html#%28counter._%28figure._fig~3areading-a-dictionary%29%29)
    ä»¥äº†è§£è§£é‡Šã€‚å°½æƒ…äº«å—å¹¶æŒ‰éœ€æ”¹è¿›ï¼
- en: ExerciseÂ 397\. In a factory, employees punch time cards as they arrive in the
    morning and leave in the evening. Electronic time cards contain an employee number
    and record the number of hours worked per week. Employee records always contain
    the name of the employee, an employee number, and a pay rate.
  id: totrans-1840
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  397ã€‚åœ¨å·¥å‚ä¸­ï¼Œå‘˜å·¥åœ¨æ—©ä¸Šåˆ°è¾¾æ—¶æ‰“å¡ï¼Œåœ¨æ™šä¸Šç¦»å¼€æ—¶æ‰“å¡ã€‚ç”µå­æ‰“å¡è®°å½•åŒ…å«å‘˜å·¥ç¼–å·å’Œæ¯å‘¨å·¥ä½œçš„å°æ—¶æ•°ã€‚å‘˜å·¥è®°å½•æ€»æ˜¯åŒ…å«å‘˜å·¥å§“åã€å‘˜å·¥ç¼–å·å’Œå·¥èµ„ç‡ã€‚
- en: Design wages*.v3. The function consumes a list of employee records and a list
    of time-card records. It produces a list of wage records, which contain the name
    and weekly wage of an employee. The function signals an error if it cannot find
    an employee record for a time card or vice versa.
  id: totrans-1841
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡å·¥èµ„*.v3ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªå‘˜å·¥è®°å½•åˆ—è¡¨å’Œä¸€ä¸ªæ‰“å¡è®°å½•åˆ—è¡¨ã€‚å®ƒäº§ç”Ÿä¸€ä¸ªå·¥èµ„è®°å½•åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«å‘˜å·¥çš„å§“åå’Œæ¯å‘¨å·¥èµ„ã€‚å¦‚æœæ‰¾ä¸åˆ°æ‰“å¡è®°å½•å¯¹åº”çš„å‘˜å·¥è®°å½•æˆ–åä¹‹ï¼Œåˆ™å‡½æ•°ä¼šå‘å‡ºé”™è¯¯ä¿¡å·ã€‚
- en: Assumption There is at most one time card per employee number.
  id: totrans-1842
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ã€‚æ¯ä¸ªå‘˜å·¥ç¼–å·æœ€å¤šåªæœ‰ä¸€ä¸ªæ‰“å¡è®°å½•ã€‚
- en: 'ExerciseÂ 398\. A linear combination is the sum of many linear terms, that is,
    products of variables and numbers. The latter are called coefficients in this
    context. Here are some examples:'
  id: totrans-1843
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  398ã€‚çº¿æ€§ç»„åˆæ˜¯è®¸å¤šçº¿æ€§é¡¹çš„å’Œï¼Œå³å˜é‡å’Œæ•°å­—çš„ä¹˜ç§¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåè€…è¢«ç§°ä¸ºç³»æ•°ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼š
- en: '| ![image](../Images/8011f33851416d69861562711b793baa.png) |  | ![image](../Images/82fcae48076fbe7779c73ed1127d1325.png)
    |  | ![image](../Images/fbfa013108ecd462f2c27da453838ca1.png) |'
  id: totrans-1844
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/8011f33851416d69861562711b793baa.png) |  | ![image](../Images/82fcae48076fbe7779c73ed1127d1325.png)
    |  | ![image](../Images/fbfa013108ecd462f2c27da453838ca1.png) |'
- en: In all examples, the coefficient of x is 5, that of y is 17, and the one for
    z is 3.
  id: totrans-1845
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ‰€æœ‰ç¤ºä¾‹ä¸­ï¼Œx çš„ç³»æ•°æ˜¯ 5ï¼Œy çš„ç³»æ•°æ˜¯ 17ï¼Œz çš„ç³»æ•°æ˜¯ 3ã€‚
- en: If we are given values for variables, we can determine the value of a polynomial.
    For example, if x = 10, the value of ![image](../Images/eb9294e336c71ad7f96346414bc13f46.png)
    is 50; if x = 10 and y = 1, the value of ![image](../Images/51344006b1331e0c3327482737c9a6ab.png)
    is 67; and if x = 10, y = 1, and z = 2, the value of ![image](../Images/e89265ae8dbca10242330152e6a111ce.png)
    is 73.
  id: totrans-1846
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬ç»™å®šäº†å˜é‡çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šå¤šé¡¹å¼çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ x = 10ï¼Œ![image](../Images/eb9294e336c71ad7f96346414bc13f46.png)
    çš„å€¼æ˜¯ 50ï¼›å¦‚æœ x = 10 ä¸” y = 1ï¼Œ![image](../Images/51344006b1331e0c3327482737c9a6ab.png)
    çš„å€¼æ˜¯ 67ï¼›å¦‚æœ x = 10ï¼Œy = 1ï¼Œz = 2ï¼Œ![image](../Images/e89265ae8dbca10242330152e6a111ce.png)
    çš„å€¼æ˜¯ 73ã€‚
- en: 'There are many different representations of linear combinations. We could,
    for example, represent them with functions. An alternative representation is a
    list of its coefficients. The above combinations would be represented as:'
  id: totrans-1847
  prefs: []
  type: TYPE_NORMAL
  zh: çº¿æ€§ç»„åˆæœ‰è®¸å¤šä¸åŒçš„è¡¨ç¤ºæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•°æ¥è¡¨ç¤ºå®ƒä»¬ã€‚å¦ä¸€ç§è¡¨ç¤ºæ–¹æ³•æ˜¯ç³»æ•°åˆ—è¡¨ã€‚ä¸Šè¿°ç»„åˆå°†è¡¨ç¤ºä¸ºï¼š
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 5)
    |'
  id: totrans-1848
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 5)
    |'
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 5Â 17)
    |'
  id: totrans-1849
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 5Â 17)
    |'
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 5Â 17Â 3)
    |'
  id: totrans-1850
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 5Â 17Â 3)
    |'
- en: This choice of representation assumes a fixed order of variables.
  id: totrans-1851
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§è¡¨ç¤ºæ³•çš„é€‰æ‹©å‡è®¾äº†å˜é‡æœ‰ä¸€ä¸ªå›ºå®šçš„é¡ºåºã€‚
- en: 'Design value. The function consumes two equally long lists: a linear combination
    and a list of variable values. It produces the value of the combination for these
    values.'
  id: totrans-1852
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡å€¼ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸¤ä¸ªç­‰é•¿çš„åˆ—è¡¨ï¼šä¸€ä¸ªçº¿æ€§ç»„åˆå’Œä¸€ä¸ªå˜é‡å€¼åˆ—è¡¨ã€‚å®ƒä¸ºè¿™äº›å€¼ç”Ÿæˆç»„åˆçš„å€¼ã€‚
- en: ExerciseÂ 399\. Louise, Jane, Laura, Dana, and Mary decide to run a lottery that
    assigns one gift recipient to each of them. Since Jane is a developer, they ask
    her to write a program that performs this task in an impartial manner. Of course,
    the program must not assign any of the sisters to herself.
  id: totrans-1853
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 399ã€‚è·¯æ˜“ä¸ã€ç®€ã€åŠ³æ‹‰ã€è¾¾å¨œå’Œç›ä¸½å†³å®šä¸¾åŠä¸€ä¸ªæŠ½å¥–æ´»åŠ¨ï¼Œæ¯äººåˆ†é…ä¸€ä¸ªç¤¼ç‰©æ¥æ”¶è€…ã€‚ç”±äºç®€æ˜¯å¼€å‘è€…ï¼Œä»–ä»¬è¯·å¥¹ç¼–å†™ä¸€ä¸ªç¨‹åºä»¥å…¬æ­£çš„æ–¹å¼æ‰§è¡Œè¿™é¡¹ä»»åŠ¡ã€‚å½“ç„¶ï¼Œç¨‹åºä¸èƒ½å°†ä»»ä½•å§å¦¹åˆ†é…ç»™è‡ªå·±ã€‚
- en: 'Here is the core of Janeâ€™s program:'
  id: totrans-1854
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯ç®€çš„ç¨‹åºæ ¸å¿ƒï¼š
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)]
    |'
  id: totrans-1855
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [String](part_one.html#%28tech._string%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [String](part_one.html#%28tech._string%29)]
    |'
- en: '| ;Â picks a random non-identity arrangement of names |'
  id: totrans-1856
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â é€‰æ‹©ä¸€ä¸ªéšæœºçš„éæ’ç­‰æ’åˆ—çš„åå­— |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gift-pickÂ names)
    |'
  id: totrans-1857
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gift-pickÂ names)
    |'
- en: '| Â Â (random-pick |'
  id: totrans-1858
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (random-pick |'
- en: '| Â Â Â Â (non-sameÂ namesÂ (arrangementsÂ names)))) |'
  id: totrans-1859
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (non-sameÂ namesÂ (arrangementsÂ names)))) |'
- en: '| Â  |'
  id: totrans-1860
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)]]
    |'
  id: totrans-1861
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [String](part_one.html#%28tech._string%29)]
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    [String](part_one.html#%28tech._string%29)]] |'
- en: '| ;Â returns all possible permutations of names |'
  id: totrans-1862
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è¿”å›æ‰€æœ‰å¯èƒ½çš„åå­—æ’åˆ— |'
- en: '| ;Â see [exerciseÂ 213](part_two.html#%28counter._%28exercise._ex~3apermutations%29%29)
    |'
  id: totrans-1863
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å‚è§[ç»ƒä¹ 213](part_two.html#%28counter._%28exercise._ex~3apermutations%29%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (arrangementsÂ names)
    |'
  id: totrans-1864
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (arrangementsÂ names)
    |'
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-1865
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: 'It consumes a list of names and randomly picks one of those permutations that
    do not agree with the original list at any place.Your task is to design two auxiliary
    functions:'
  id: totrans-1866
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒæ¶ˆè€—ä¸€ä¸ªåå­—åˆ—è¡¨ï¼Œå¹¶éšæœºé€‰æ‹©ä¸€ä¸ªä¸åŸå§‹åˆ—è¡¨åœ¨ä»»ä½•åœ°æ–¹éƒ½ä¸ç›¸åŒçš„æ’åˆ—ã€‚ä½ çš„ä»»åŠ¡æ˜¯è®¾è®¡ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ï¼š
- en: '| ;Â [[NEList-of](part_three.html#%28tech._sim-dd._nelist._of%29) X] -> X |'
  id: totrans-1867
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[NEList-of](part_three.html#%28tech._sim-dd._nelist._of%29) X] -> X |'
- en: '| ;Â returns a random item from the list |'
  id: totrans-1868
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»åˆ—è¡¨ä¸­è¿”å›ä¸€ä¸ªéšæœºé¡¹ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (random-pickÂ l)
    |'
  id: totrans-1869
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (random-pickÂ l)
    |'
- en: '| Â Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l))
    |'
  id: totrans-1870
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l))
    |'
- en: '| Â  |'
  id: totrans-1871
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)]
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)]]
    |'
  id: totrans-1872
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [String](part_one.html#%28tech._string%29)]
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    [String](part_one.html#%28tech._string%29)]] |'
- en: '| ;Â -> |'
  id: totrans-1873
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â -> |'
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)]]
    |'
  id: totrans-1874
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    [String](part_one.html#%28tech._string%29)]] |'
- en: '| ;Â produces the list of those lists in ll that do |'
  id: totrans-1875
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”Ÿæˆé‚£äº›åœ¨llä¸­çš„åˆ—è¡¨çš„åˆ—è¡¨ï¼Œå®ƒä»¬ |'
- en: '| ;Â not agree with names at any place |'
  id: totrans-1876
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨ä»»ä½•åœ°æ–¹éƒ½ä¸åŒæ„åå­— |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (non-sameÂ namesÂ ll)
    |'
  id: totrans-1877
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (non-sameÂ namesÂ ll)
    |'
- en: '| Â Â ll) |'
  id: totrans-1878
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ll) |'
- en: Recall that [random](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._random%29%29)
    picks a random number; see [exerciseÂ 99](part_one.html#%28counter._mix._%28exercise._mix-ufo-move%29%29).
  id: totrans-1879
  prefs: []
  type: TYPE_NORMAL
  zh: å›æƒ³ä¸€ä¸‹ï¼Œ[éšæœº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._random%29%29)
    å‡½æ•°é€‰æ‹©ä¸€ä¸ªéšæœºæ•°ï¼›å‚è§[ç»ƒä¹  99](part_one.html#%28counter._mix._%28exercise._mix-ufo-move%29%29)ã€‚
- en: 'ExerciseÂ 400\. Design the function DNAprefix. The function takes two arguments,
    both lists of ''a, ''c, ''g, and ''t, symbols that occur in DNA descriptions.
    The first list is called a pattern, the second one a search string. The function
    returns #true if the pattern is identical to the initial part of the search string;
    otherwise it returns #false.'
  id: totrans-1880
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹  400ã€‚è®¾è®¡ DNAprefix å‡½æ•°ã€‚è¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯ ''a, ''c, ''g, å’Œ ''t è¿™äº›åœ¨ DNA æè¿°ä¸­å‡ºç°çš„ç¬¦å·çš„åˆ—è¡¨ã€‚ç¬¬ä¸€ä¸ªåˆ—è¡¨ç§°ä¸ºæ¨¡å¼ï¼Œç¬¬äºŒä¸ªåˆ—è¡¨ç§°ä¸ºæœç´¢å­—ç¬¦ä¸²ã€‚å¦‚æœæ¨¡å¼ä¸æœç´¢å­—ç¬¦ä¸²çš„åˆå§‹éƒ¨åˆ†ç›¸åŒï¼Œåˆ™å‡½æ•°è¿”å›
    #trueï¼›å¦åˆ™è¿”å› #falseã€‚'
- en: 'Also design DNAdelta. This function is like DNAprefix but returns the first
    item in the search string beyond the pattern. If the lists are identical and there
    is no DNA letter beyond the pattern, the function signals an error. If the pattern
    does not match the beginning of the search string, it returns #false. The function
    must not traverse either of the lists more than once.'
  id: totrans-1881
  prefs: []
  type: TYPE_NORMAL
  zh: 'è¿˜è¦è®¾è®¡ DNAdeltaã€‚è¿™ä¸ªå‡½æ•°ç±»ä¼¼äº DNAprefixï¼Œä½†è¿”å›æœç´¢å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªè¶…å‡ºæ¨¡å¼çš„é¡¹ã€‚å¦‚æœåˆ—è¡¨ç›¸åŒä¸”æ¨¡å¼ä¹‹åæ²¡æœ‰ DNA å­—æ¯ï¼Œåˆ™å‡½æ•°ä¼šå‘å‡ºé”™è¯¯ä¿¡å·ã€‚å¦‚æœæ¨¡å¼ä¸åŒ¹é…æœç´¢å­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œåˆ™è¿”å›
    #falseã€‚å‡½æ•°ä¸å¾—éå†ä»»ä¸€åˆ—è¡¨è¶…è¿‡ä¸€æ¬¡ã€‚'
- en: Can DNAprefix or DNAdelta be simplified?
  id: totrans-1882
  prefs: []
  type: TYPE_NORMAL
  zh: DNAprefix æˆ– DNAdelta å¯ä»¥ç®€åŒ–å—ï¼Ÿ
- en: 'ExerciseÂ 401\. Design sexp=?, a function that determines whether two S-expressions
    are equal. For convenience, here is the data definition in condensed form:'
  id: totrans-1883
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  401ã€‚è®¾è®¡ sexp=? å‡½æ•°ï¼Œè¯¥å‡½æ•°ç¡®å®šä¸¤ä¸ª S-è¡¨è¾¾å¼æ˜¯å¦ç›¸ç­‰ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œä»¥ä¸‹æ˜¯ç¼©ç•¥å½¢å¼çš„æ•°æ®å®šä¹‰ï¼š
- en: '| ;Â An S-expr (S-expression) is one of: |'
  id: totrans-1884
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â S-è¡¨è¾¾å¼ï¼ˆS-expressionï¼‰æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š|'
- en: '| ;Â â€“  [Atom](#%28tech._atom%29) |'
  id: totrans-1885
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [åŸå­](#%28tech._atom%29) |'
- en: '| ;Â â€“ [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [S-expr](#%28tech._s._expr%29)]
    |'
  id: totrans-1886
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“ [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) [S-è¡¨è¾¾å¼](#%28tech._s._expr%29)]
    |'
- en: '| ;Â  |'
  id: totrans-1887
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â  |'
- en: '| ;Â An Atom is one of: |'
  id: totrans-1888
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åŸå­æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š|'
- en: '| ;Â â€“  [Number](part_one.html#%28tech._number%29) |'
  id: totrans-1889
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [æ•°å­—](part_one.html#%28tech._number%29) |'
- en: '| ;Â â€“  [String](part_one.html#%28tech._string%29) |'
  id: totrans-1890
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) |'
- en: '| ;Â â€“  [Symbol](i2-3.html#%28tech._symbol%29) |'
  id: totrans-1891
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [ç¬¦å·](i2-3.html#%28tech._symbol%29) |'
- en: Whenever you use [check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29),
    it uses a function like sexp=? to check whether the two arbitrary values are equal.
    If not, the check fails and [check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    reports it as such.
  id: totrans-1892
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯æ¬¡ä½ ä½¿ç”¨ [check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)ï¼Œå®ƒéƒ½ä¼šä½¿ç”¨åƒ
    sexp=? è¿™æ ·çš„å‡½æ•°æ¥æ£€æŸ¥ä¸¤ä¸ªä»»æ„å€¼æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœä¸ç›¸ç­‰ï¼Œæ£€æŸ¥å¤±è´¥ï¼Œ[check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    ä¼šæŠ¥å‘Šè¿™ç§æƒ…å†µã€‚
- en: ExerciseÂ 402\. Reread [exerciseÂ 354](#%28counter._%28exercise._ex~3absl-var-eval%29%29).
    Explain the reasoning behind our hint to think of the given expression as an atomic
    value at first.
  id: totrans-1893
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  402ã€‚é‡æ–°é˜…è¯»[ç»ƒä¹  354](#%28counter._%28exercise._ex~3absl-var-eval%29%29)ã€‚è§£é‡Šæˆ‘ä»¬æç¤ºå°†ç»™å®šè¡¨è¾¾å¼é¦–å…ˆè§†ä¸ºåŸå­å€¼çš„æ¨ç†ã€‚
- en: '23.7Project: Database[ğŸ”—](#(part._db._sec~3aproj-db) "Link to here")'
  id: totrans-1894
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 23.7 é¡¹ç›®ï¼šæ•°æ®åº“[ğŸ”—](#(part._db._sec~3aproj-db) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Many software applications use a database to keep track of data. Roughly speaking,
    a database is a table that comes with an explicitly stated organization rule.
    The former is the content; the latter isThis section pulls together knowledge
    from all four parts of the book. called a schema. [FigureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29)
    shows two examples. Each table consists of two parts: the schema above the line
    and the content below.'
  id: totrans-1895
  prefs: []
  type: TYPE_NORMAL
  zh: è®¸å¤šè½¯ä»¶åº”ç”¨ç¨‹åºä½¿ç”¨æ•°æ®åº“æ¥è·Ÿè¸ªæ•°æ®ã€‚ç²—ç•¥åœ°è¯´ï¼Œæ•°æ®åº“æ˜¯ä¸€ä¸ªå…·æœ‰æ˜ç¡®ç»„ç»‡è§„åˆ™çš„è¡¨ã€‚å‰è€…æ˜¯å†…å®¹ï¼›åè€…ç§°ä¸ºæ¨¡å¼ã€‚[å›¾ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29)
    å±•ç¤ºäº†ä¸¤ä¸ªç¤ºä¾‹ã€‚æ¯ä¸ªè¡¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸Šé¢çš„æ¨¡å¼çº¿å’Œä¸‹é¢çš„å†…å®¹ã€‚
- en: 'Letâ€™s focus on the table on the left. It has three columns and four rows. Each
    column comes with a two-part rule:'
  id: totrans-1896
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å…³æ³¨å·¦è¾¹çš„è¡¨æ ¼ã€‚å®ƒæœ‰ä¸‰åˆ—å’Œå››è¡Œã€‚æ¯ä¸€åˆ—éƒ½éµå¾ªä¸€ä¸ªä¸¤éƒ¨åˆ†çš„è§„åˆ™ï¼š
- en: the rule in the left-most column says that the label of the column is â€œNameâ€
    and that every piece of data in this column is a [String](part_one.html#%28tech._string%29);
  id: totrans-1897
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å·¦ä¾§æœ€ä¸€åˆ—çš„è§„åˆ™è¯´æ˜è¯¥åˆ—çš„æ ‡ç­¾æ˜¯â€œNameâ€ï¼Œå¹¶ä¸”è¯¥åˆ—ä¸­çš„æ¯ä¸€ä»½æ•°æ®éƒ½æ˜¯ä¸€ä¸ª[String](part_one.html#%28tech._string%29)ï¼›
- en: the middle column is labeled â€œAgeâ€ and contains [Integer](part_one.html#%28tech._integer%29)s;
    and
  id: totrans-1898
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸­é—´åˆ—çš„æ ‡ç­¾æ˜¯â€œAgeâ€ï¼ŒåŒ…å«[æ•´æ•°](part_one.html#%28tech._integer%29)ï¼›å¹¶ä¸”
- en: the label of the right-most one is â€œPresentâ€; its values are [Boolean](part_one.html#%28tech._boolean%29).
  id: totrans-1899
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æœ€å³ä¾§ä¸€åˆ—çš„æ ‡ç­¾æ˜¯â€œPresentâ€ï¼›å…¶å€¼æ˜¯[å¸ƒå°”å€¼](part_one.html#%28tech._boolean%29)ã€‚
- en: Stop! Explain the table on the right in the same way.
  id: totrans-1900
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä»¥åŒæ ·çš„æ–¹å¼è§£é‡Šå³è¾¹çš„è¡¨æ ¼ã€‚
- en: '|'
  id: totrans-1901
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1902
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Name &#124;  &#124; Age &#124;  &#124; Present &#124;'
  id: totrans-1903
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Name &#124;  &#124; Age &#124;  &#124; Present &#124;'
- en: '&#124; [String](part_one.html#%28tech._string%29) &#124;  &#124; [Integer](part_one.html#%28tech._integer%29)
    &#124;  &#124; [Boolean](part_one.html#%28tech._boolean%29) &#124;'
  id: totrans-1904
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; [String](part_one.html#%28tech._string%29) &#124;  &#124; [Integer](part_one.html#%28tech._integer%29)
    &#124;  &#124; [Boolean](part_one.html#%28tech._boolean%29) &#124;'
- en: '&#124; "Alice" &#124;  &#124; 35 &#124;  &#124; #true &#124;'
  id: totrans-1905
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Alice" &#124;  &#124; 35 &#124;  &#124; #true &#124;'
- en: '&#124; "Bob" &#124;  &#124; 25 &#124;  &#124; #false &#124;'
  id: totrans-1906
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Bob" &#124;  &#124; 25 &#124;  &#124; #false &#124;'
- en: '&#124; "Carol" &#124;  &#124; 30 &#124;  &#124; #true &#124;'
  id: totrans-1907
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Carol" &#124;  &#124; 30 &#124;  &#124; #true &#124;'
- en: '&#124; "Dave" &#124;  &#124; 32 &#124;  &#124; #false &#124;'
  id: totrans-1908
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Dave" &#124;  &#124; 32 &#124;  &#124; #false &#124;'
- en: ''
  id: totrans-1909
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |  |  |'
  id: totrans-1910
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  |  |'
- en: ''
  id: totrans-1911
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Present &#124;  &#124; Description &#124;'
  id: totrans-1912
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Present &#124;  &#124; Description &#124;'
- en: '&#124; [Boolean](part_one.html#%28tech._boolean%29) &#124;  &#124; [String](part_one.html#%28tech._string%29)
    &#124;'
  id: totrans-1913
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; [Boolean](part_one.html#%28tech._boolean%29) &#124;  &#124; [String](part_one.html#%28tech._string%29)
    &#124;'
- en: '&#124; #true &#124;  &#124; "presence" &#124;'
  id: totrans-1914
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; #true &#124;  &#124; "presence" &#124;'
- en: '&#124; #false &#124;  &#124; "absence" &#124;'
  id: totrans-1915
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; #false &#124;  &#124; "absence" &#124;'
- en: ''
  id: totrans-1916
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1917
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1918
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 137: Databases as tables'
  id: totrans-1919
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾Â 137ï¼šæ•°æ®åº“ä½œä¸ºè¡¨æ ¼
- en: 'Computer scientists think of these tables as relations. The schema introduces
    terminology to refer to columns of a relation and to individual cells in a row.
    Each row relates a fixed number of values; the collection of all rows makes up
    the entire relation. In this terminology, the first row of the left table in [figureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29)
    relates "Alice" to 35 and #true. Furthermore, the first cell of a row is called
    the â€œNameâ€ cell, the second the â€œAgeâ€ cell, and the third one the â€œPresentâ€ cell.'
  id: totrans-1920
  prefs: []
  type: TYPE_NORMAL
  zh: è®¡ç®—æœºç§‘å­¦å®¶å°†è¿™äº›è¡¨æ ¼è§†ä¸ºå…³ç³»ã€‚æ¨¡å¼å¼•å…¥æœ¯è¯­æ¥æŒ‡ä»£å…³ç³»çš„åˆ—å’Œè¡Œä¸­çš„å•ä¸ªå•å…ƒæ ¼ã€‚æ¯ä¸€è¡Œå…³è”å›ºå®šæ•°é‡çš„å€¼ï¼›æ‰€æœ‰è¡Œçš„é›†åˆæ„æˆäº†æ•´ä¸ªå…³ç³»ã€‚åœ¨è¿™ä¸ªæœ¯è¯­ä¸­ï¼Œå›¾Â 137ï¼ˆ#%28counter._db._%28figure._fig~3adb-tables%29%29ï¼‰ä¸­å·¦ä¾§è¡¨æ ¼çš„ç¬¬ä¸€è¡Œå°†â€œAliceâ€ä¸35å’Œ#trueå…³è”ã€‚æ­¤å¤–ï¼Œè¡Œä¸­çš„ç¬¬ä¸€ä¸ªå•å…ƒæ ¼ç§°ä¸ºâ€œNameâ€å•å…ƒæ ¼ï¼Œç¬¬äºŒä¸ªå•å…ƒæ ¼ç§°ä¸ºâ€œAgeâ€å•å…ƒæ ¼ï¼Œç¬¬ä¸‰ä¸ªå•å…ƒæ ¼ç§°ä¸ºâ€œPresentâ€å•å…ƒæ ¼ã€‚
- en: 'In this section, we represent databases via structures and lists:'
  id: totrans-1921
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç»“æ„å’Œåˆ—è¡¨æ¥è¡¨ç¤ºæ•°æ®åº“ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â dbÂ [schemaÂ content])
    |'
  id: totrans-1922
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â dbÂ [schemaÂ content])
    |'
- en: '| ;Â A DB is a structure: (make-db  [Schema](#%28tech._db._schema%29)  [Content](#%28tech._db._content%29))
    |'
  id: totrans-1923
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A DB is a structure: (make-db  [Schema](#%28tech._db._schema%29)  [Content](#%28tech._db._content%29))
    |'
- en: '| Â  |'
  id: totrans-1924
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A Schema is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Spec](#%28tech._db._spec%29)]
    |'
  id: totrans-1925
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Schema is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Spec](#%28tech._db._spec%29)]
    |'
- en: '| ;Â A Spec is a [[List](part_three.html#%28tech._sim-dd._list%29)  [Label](#%28tech._db._label%29)  [Predicate](#%28tech._db._predicate%29)]
    |'
  id: totrans-1926
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Spec is a [[List](part_three.html#%28tech._sim-dd._list%29)  [Label](#%28tech._db._label%29)  [Predicate](#%28tech._db._predicate%29)]
    |'
- en: '| ;Â A Label is a [String](part_one.html#%28tech._string%29) |'
  id: totrans-1927
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Label is a [String](part_one.html#%28tech._string%29) |'
- en: '| ;Â A Predicate is a [[Any](part_one.html#%28tech._any%29) -> [Boolean](part_one.html#%28tech._boolean%29)]
    |'
  id: totrans-1928
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Predicate is a [[Any](part_one.html#%28tech._any%29) -> [Boolean](part_one.html#%28tech._boolean%29)]
    |'
- en: '| Â  |'
  id: totrans-1929
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A (piece of) Content is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Row](#%28tech._db._row%29)]
    |'
  id: totrans-1930
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A (piece of) Content is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Row](#%28tech._db._row%29)]
    |'
- en: '| ;Â A Row is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Cell](#%28tech._db._cell%29)]
    |'
  id: totrans-1931
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Row is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Cell](#%28tech._db._cell%29)]
    |'
- en: '| ;Â A Cell is [Any](part_one.html#%28tech._any%29) |'
  id: totrans-1932
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Cell is [Any](part_one.html#%28tech._any%29) |'
- en: '| ;Â constraint cells do not contain functions |'
  id: totrans-1933
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â constraint cells do not contain functions |'
- en: '| Â  |'
  id: totrans-1934
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â integrity constraint In (make-db  sch  con), |'
  id: totrans-1935
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â integrity constraint In (make-db sch con), |'
- en: '| ;Â for every row in con, |'
  id: totrans-1936
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â for every row in con, |'
- en: '| ;Â (I1) its length is the same as sch''s, and |'
  id: totrans-1937
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â (I1) its length is the same as sch''s, and |'
- en: '| ;Â (I2) its ith [Cell](#%28tech._db._cell%29) satisfies the ith [Predicate](#%28tech._db._predicate%29)
    in sch |'
  id: totrans-1938
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â (I2) its ith [Cell](#%28tech._db._cell%29) satisfies the ith [Predicate](#%28tech._db._predicate%29)
    in sch |'
- en: Stop! Translate the databases from [figureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29)
    into the chosen data representation. Note that the content of the tables already
    uses ISL+ data.
  id: totrans-1939
  prefs: []
  type: TYPE_NORMAL
  zh: Stop! Translate the databases from [figureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29)
    into the chosen data representation. Note that the content of the tables already
    uses ISL+ data.
- en: '|'
  id: totrans-1940
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1941
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â school-schema
    &#124;'
  id: totrans-1942
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    school-schema &#124;'
- en: '&#124; Â Â `(("Name"Â Â Â Â ,[string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29))
    &#124;'
  id: totrans-1943
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â `(("Name"Â Â Â Â ,[string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29))
    &#124;'
- en: '&#124; Â Â Â Â ("Age"Â Â Â Â Â ,[integer?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._integer~3f%29%29))
    &#124;'
  id: totrans-1944
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â ("Age"Â Â Â Â Â ,[integer?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._integer~3f%29%29))
    &#124;'
- en: '&#124; Â Â Â Â ("Present"Â ,[boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29))))
    &#124;'
  id: totrans-1945
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â ("Present"Â ,[boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29))))
    &#124;'
- en: ''
  id: totrans-1946
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |  |  |'
  id: totrans-1947
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  |  |'
- en: ''
  id: totrans-1948
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â presence-schema
    &#124;'
  id: totrans-1949
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    presence-schema &#124;'
- en: '&#124; Â Â `(("Present"Â Â Â Â Â ,[boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29))
    &#124;'
  id: totrans-1950
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â `(("Present"Â Â Â Â Â ,[boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29))
    &#124;'
- en: '&#124; Â Â Â Â ("Description"Â ,[string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29))))
    &#124;'
  id: totrans-1951
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â ("Description"Â ,[string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29))))
    &#124;'
- en: ''
  id: totrans-1952
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1953
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '|  |  |  |  |  |'
  id: totrans-1954
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  |  |  |  |'
- en: '|'
  id: totrans-1955
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1956
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â school-content
    &#124;'
  id: totrans-1957
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    school-content &#124;'
- en: '&#124; Â Â `(("Alice"Â 35Â #true) &#124;'
  id: totrans-1958
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â `(("Alice"Â 35 #true) &#124;'
- en: '&#124; Â Â Â Â ("Bob"Â Â Â 25Â #false) &#124;'
  id: totrans-1959
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â ("Bob"Â Â Â 25 #false) &#124;'
- en: '&#124; Â Â Â Â ("Carol"Â 30Â #true) &#124;'
  id: totrans-1960
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â ("Carol"Â 30 #true) &#124;'
- en: '&#124; Â Â Â Â ("Dave"Â Â 32Â #false))) &#124;'
  id: totrans-1961
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â ("Dave"Â Â 32 #false))) &#124;'
- en: ''
  id: totrans-1962
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |  |  |'
  id: totrans-1963
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  |  |'
- en: ''
  id: totrans-1964
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â presence-content
    &#124;'
  id: totrans-1965
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    presence-content &#124;'
- en: '&#124; Â Â `((#trueÂ Â "presence") &#124;'
  id: totrans-1966
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â `((#true "presence") &#124;'
- en: '&#124; Â Â Â Â (#falseÂ "absence"))) &#124;'
  id: totrans-1967
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â (#false "absence"))) &#124;'
- en: ''
  id: totrans-1968
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1969
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '|  |  |  |  |  |'
  id: totrans-1970
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  |  |  |  |'
- en: '|'
  id: totrans-1971
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1972
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â school-db
    &#124;'
  id: totrans-1973
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    school-db &#124;'
- en: '&#124; Â Â (make-dbÂ school-schema &#124;'
  id: totrans-1974
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â (make-db school-schema &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â Â Â school-content)) &#124;'
  id: totrans-1975
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â school-content)) &#124;'
- en: ''
  id: totrans-1976
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |  |  |'
  id: totrans-1977
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  |  |'
- en: ''
  id: totrans-1978
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â presence-db
    &#124;'
  id: totrans-1979
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    presence-db &#124;'
- en: '&#124; Â Â (make-dbÂ presence-schema &#124;'
  id: totrans-1980
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (make-db presence-schema &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â Â Â presence-content)) &#124;'
  id: totrans-1981
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â presence-content)) &#124;'
- en: ''
  id: totrans-1982
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1983
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1984
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 138: Databases as ISL+ data'
  id: totrans-1985
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾138ï¼šæ•°æ®åº“ä½œä¸ºISL+æ•°æ®
- en: '[FigureÂ 138](#%28counter._db._%28figure._fig~3adb-isl%29%29) shows how to represent
    the two tables in [figureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29)
    as [DB](#%28tech._db._db%29)s. Its left-hand side represents the schema, the content,
    and the database from the left-hand side table in [figureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29);
    its right part corresponds to the right-hand side table. For succinctness, the
    examples use the [quasiquote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quasiquote%29%29)
    and [unquote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._unquote%29%29)
    notation. Recall that it allows the inclusion of a value such as [boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)
    in an otherwise quoted list. If you feel uncomfortable with this notation, reformulate
    these examples with [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29).'
  id: totrans-1986
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾138](#%28counter._db._%28figure._fig~3adb-isl%29%29)å±•ç¤ºäº†å¦‚ä½•å°†[å›¾137](#%28counter._db._%28figure._fig~3adb-tables%29%29)ä¸­çš„ä¸¤ä¸ªè¡¨æ ¼è¡¨ç¤ºä¸º[æ•°æ®åº“](#%28tech._db._db%29)ã€‚å…¶å·¦ä¾§è¡¨ç¤ºæ¨¡å¼ã€å†…å®¹å’Œ[å›¾137](#%28counter._db._%28figure._fig~3adb-tables%29%29)å·¦ä¾§è¡¨æ ¼ä¸­çš„æ•°æ®åº“ï¼›å…¶å³ä¾§éƒ¨åˆ†å¯¹åº”å³ä¾§è¡¨æ ¼ã€‚ä¸ºäº†ç®€æ´ï¼Œç¤ºä¾‹ä½¿ç”¨äº†[å‡†å¼•ç”¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quasiquote%29%29)å’Œ[éå¼•ç”¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._unquote%29%29)çš„è¡¨ç¤ºæ³•ã€‚å›æƒ³ä¸€ä¸‹ï¼Œè¿™å…è®¸åœ¨é€šå¸¸å¼•ç”¨çš„åˆ—è¡¨ä¸­åŒ…å«ä¸€ä¸ªå€¼ï¼Œä¾‹å¦‚[boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªè¡¨ç¤ºæ³•æ„Ÿåˆ°ä¸èˆ’æœï¼Œå¯ä»¥ç”¨[list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)é‡æ–°è¡¨è¿°è¿™äº›ç¤ºä¾‹ã€‚'
- en: ExerciseÂ 403\. A [Spec](#%28tech._db._spec%29) combines a [Label](#%28tech._db._label%29)
    and a [Predicate](#%28tech._db._predicate%29) into a list. While acceptable, this
    choice violates our guideline of using a structure type for a fixed number of
    pieces of information.
  id: totrans-1987
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 403ã€‚ä¸€ä¸ª[è§„èŒƒ](#%28tech._db._spec%29)å°†ä¸€ä¸ª[æ ‡ç­¾](#%28tech._db._label%29)å’Œä¸€ä¸ª[è°“è¯](#%28tech._db._predicate%29)ç»„åˆæˆä¸€ä¸ªåˆ—è¡¨ã€‚è™½ç„¶å¯ä»¥æ¥å—ï¼Œä½†è¿™ç§é€‰æ‹©è¿åäº†æˆ‘ä»¬çš„æŒ‡å¯¼åŸåˆ™ï¼Œå³ä½¿ç”¨ç»“æ„ç±»å‹æ¥è¡¨ç¤ºå›ºå®šæ•°é‡çš„ä¿¡æ¯ã€‚
- en: 'Here is an alternative data representation:'
  id: totrans-1988
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯å¦ä¸€ç§æ•°æ®è¡¨ç¤ºæ–¹æ³•ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â specÂ [labelÂ predicate])
    |'
  id: totrans-1989
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â specÂ [labelÂ predicate])
    |'
- en: '| ;Â Spec is a structure: (make-spec  [Label](#%28tech._db._label%29)  [Predicate](#%28tech._db._predicate%29))
    |'
  id: totrans-1990
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è§„èŒƒæ˜¯ä¸€ä¸ªç»“æ„ï¼š`(make-spec [æ ‡ç­¾](#%28tech._db._label%29) [è°“è¯](#%28tech._db._predicate%29))`
    |'
- en: 'Use this alternative definition to represent the databases from [figureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29).Integrity
    Checking The use of databases critically relies on their integrity. Here â€œintegrityâ€
    refers to the constraints (I1) and (I2) from the data definition. Checking database
    integrity is clearly a task for a function:'
  id: totrans-1991
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªæ›¿ä»£å®šä¹‰æ¥è¡¨ç¤º[å›¾137](#%28counter._db._%28figure._fig~3adb-tables%29%29)ä¸­çš„æ•°æ®åº“ã€‚æ•°æ®åº“çš„å®Œæ•´æ€§æ£€æŸ¥è‡³å…³é‡è¦ã€‚åœ¨è¿™é‡Œï¼Œâ€œå®Œæ•´æ€§â€æŒ‡çš„æ˜¯æ•°æ®å®šä¹‰ä¸­çš„çº¦æŸï¼ˆI1ï¼‰å’Œï¼ˆI2ï¼‰ã€‚æ£€æŸ¥æ•°æ®åº“çš„å®Œæ•´æ€§æ˜¾ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°çš„ä»»åŠ¡ï¼š
- en: '| ;Â [DB](#%28tech._db._db%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-1992
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [æ•°æ®åº“](#%28tech._db._db%29) -> [å¸ƒå°”](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â do all rows in db satisfy (I1) and (I2) |'
  id: totrans-1993
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡Œæ˜¯å¦æ»¡è¶³ï¼ˆI1ï¼‰å’Œï¼ˆI2ï¼‰ |'
- en: '| Â  |'
  id: totrans-1994
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (integrity-checkÂ school-db)Â #true)
    |'
  id: totrans-1995
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (integrity-checkÂ school-db)Â #true)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (integrity-checkÂ presence-db)Â #true)
    |'
  id: totrans-1996
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (integrity-checkÂ presence-db)Â #true)
    |'
- en: '| Â  |'
  id: totrans-1997
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (integrity-checkÂ db)
    |'
  id: totrans-1998
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (integrity-checkÂ db)
    |'
- en: '| Â Â #false) |'
  id: totrans-1999
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â #false) |'
- en: 'The wording of the two constraints suggests that some function has to produce
    #true for every row in the content of the given database. Expressing this idea
    in code calls for a use of [andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    on the content of db:'
  id: totrans-2000
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¤ä¸ªçº¦æŸçš„æªè¾æš—ç¤ºï¼Œå¿…é¡»æœ‰ä¸€ä¸ªå‡½æ•°ä¸ºç»™å®šæ•°æ®åº“å†…å®¹ä¸­çš„æ¯ä¸€è¡Œç”Ÿæˆ#trueã€‚ç”¨ä»£ç è¡¨è¾¾è¿™ä¸ªæƒ³æ³•éœ€è¦ä½¿ç”¨[andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)åœ¨dbçš„å†…å®¹ä¸Šï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (integrity-checkÂ db)
    |'
  id: totrans-2001
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (db)çš„å®Œæ•´æ€§æ£€æŸ¥)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Row](#%28tech._db._row%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-2002
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Row](#%28tech._db._row%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-integrity-checkÂ row)
    |'
  id: totrans-2003
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-integrity-check
    row) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
  id: totrans-2004
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
- en: '| Â Â Â Â ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â row-integrity-checkÂ (db-contentÂ db))))
    |'
  id: totrans-2005
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â row-integrity-checkÂ (db-contentÂ db))))
    |'
- en: 'Following the design recipe for the use of existing abstractions, the template
    introduces the auxiliary function via a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    definition.The design of row-integrity-check starts from this:'
  id: totrans-2006
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç…§ç°æœ‰æŠ½è±¡çš„ä½¿ç”¨è®¾è®¡é£Ÿè°±ï¼Œæ¨¡æ¿é€šè¿‡ä¸€ä¸ª[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)å®šä¹‰å¼•å…¥è¾…åŠ©å‡½æ•°ã€‚è¡Œå®Œæ•´æ€§æ£€æŸ¥çš„è®¾è®¡ä»è¿™é‡Œå¼€å§‹ï¼š
- en: '| ;Â [Row](#%28tech._db._row%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-2007
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Row](#%28tech._db._row%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| ;Â does row satisfy (I1) and (I2) |'
  id: totrans-2008
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è¡Œæ˜¯å¦æ»¡è¶³(I1)å’Œ(I2) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-integrity-checkÂ row)
    |'
  id: totrans-2009
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row)çš„è¡Œå®Œæ•´æ€§æ£€æŸ¥)
    |'
- en: '| Â Â #false) |'
  id: totrans-2010
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â #false) |'
- en: 'As always, the goal of formulating a purpose statement is to understand the
    problem. Here it says that the function checks two conditions. When two tasks
    are involved, our design guidelines call for functions and the combination of
    their results:'
  id: totrans-2011
  prefs: []
  type: TYPE_NORMAL
  zh: æ€»çš„æ¥è¯´ï¼Œåˆ¶å®šç›®çš„å£°æ˜çš„ç›®æ ‡æ˜¯ç†è§£é—®é¢˜ã€‚è¿™é‡ŒæŒ‡å‡ºè¯¥å‡½æ•°æ£€æŸ¥ä¸¤ä¸ªæ¡ä»¶ã€‚å½“æ¶‰åŠä¸¤ä¸ªä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬çš„è®¾è®¡æŒ‡å—è¦æ±‚ä½¿ç”¨å‡½æ•°åŠå…¶ç»“æœçš„ç»„åˆï¼š
- en: '| ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â (length-of-row-checkÂ row)
    |'
  id: totrans-2012
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å’Œ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â (row-length-checkÂ row)
    |'
- en: '| Â Â Â Â Â (check-every-cellÂ row)) |'
  id: totrans-2013
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â (check-every-cellÂ row)) |'
- en: Add these functions to your wish list; their names convey their purpose.Before
    we design these functions, we must contemplate whether we can compose existing
    primitive operations to compute the desired value. For example, we know that (length  row)
    counts how many cells are in row. Pushing a bit more in this direction, we clearly
    want
  id: totrans-2014
  prefs: []
  type: TYPE_NORMAL
  zh: å°†è¿™äº›å‡½æ•°æ·»åŠ åˆ°æ‚¨çš„æ„¿æœ›æ¸…å•ä¸­ï¼›å®ƒä»¬çš„åå­—ä¼ è¾¾äº†å®ƒä»¬çš„ç›®çš„ã€‚åœ¨æˆ‘ä»¬è®¾è®¡è¿™äº›å‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»æ€è€ƒæ˜¯å¦å¯ä»¥ç»„åˆç°æœ‰çš„åŸå§‹æ“ä½œæ¥è®¡ç®—æ‰€éœ€å€¼ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çŸ¥é“(length
    row)è®¡ç®—è¡Œä¸­æœ‰å¤šå°‘ä¸ªå•å…ƒæ ¼ã€‚åœ¨è¿™ä¸ªæ–¹å‘ä¸Šæ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬æ˜¾ç„¶æƒ³è¦
- en: ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â (lengthÂ row)Â (lengthÂ (db-schemaÂ db)))
  id: totrans-2015
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â (length
    row)Â (length (db-schema db)))
- en: 'This condition checks that the length of row is equal to that of dbâ€™s schema.Similarly,
    check-every-cell calls for checking that some function produces #true for every
    cell in the row. Once again, it looks like [andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    might be called for:'
  id: totrans-2016
  prefs: []
  type: TYPE_NORMAL
  zh: 'è¿™ä¸ªæ¡ä»¶æ£€æŸ¥è¡Œçš„é•¿åº¦æ˜¯å¦ç­‰äºæ•°æ®åº“æ¨¡å¼çš„é•¿åº¦ã€‚åŒæ ·ï¼Œcheck-every-cell è°ƒç”¨éœ€è¦æ£€æŸ¥æŸä¸ªå‡½æ•°å¯¹è¡Œä¸­çš„æ¯ä¸ªå•å…ƒæ ¼éƒ½äº§ç”Ÿ #trueã€‚å†æ¬¡çœ‹æ¥ï¼Œ[andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    å¯èƒ½ä¼šè¢«è°ƒç”¨ï¼š'
- en: ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â cell-integrity-checkÂ row)
  id: totrans-2017
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â cell-integrity-checkÂ row)
- en: The purpose of cell-integrity-check is obviously to check constraint (I2), that
    is,
  id: totrans-2018
  prefs: []
  type: TYPE_NORMAL
  zh: cell-integrity-check çš„ç›®çš„æ˜¯æ˜¾ç„¶çš„ï¼Œå³æ£€æŸ¥çº¦æŸ (I2)ï¼Œä¹Ÿå°±æ˜¯ï¼Œ
- en: whether â€œthe ith [Cell](#%28tech._db._cell%29) satisfies the ith [Predicate](#%28tech._db._predicate%29)
    in dbâ€™s schema.â€
  id: totrans-2019
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: â€œç¬¬ i ä¸ª [å•å…ƒæ ¼](#%28tech._db._cell%29) æ»¡è¶³æ•°æ®åº“æ¨¡å¼ä¸­çš„ç¬¬ i ä¸ª [è°“è¯](#%28tech._db._predicate%29)ã€‚â€
- en: And now we are stuck because this purpose statement refers to the relative position
    of the given cell in row. The point of [andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    is, however, to apply cell-integrity-check to every cell uniformly.When you are
    stuck, you must work through examples. For auxiliary or [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    functions, itâ€™s best to derive these examples from the ones for the main function.
    The first example for integrity-check asserts that school-content satisfies the
    integrity constraints. Clearly all rows in school-content have the same length
    as school-schema. The question is why a row such as
  id: totrans-2020
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬é™·å…¥äº†å›°å¢ƒï¼Œå› ä¸ºè¿™ä¸ªç›®çš„é™ˆè¿°å¼•ç”¨äº†ç»™å®šå•å…ƒæ ¼åœ¨è¡Œä¸­çš„ç›¸å¯¹ä½ç½®ã€‚ç„¶è€Œï¼Œ[andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    çš„ç›®çš„æ˜¯ï¼Œå°† cell-integrity-check ç»Ÿä¸€åº”ç”¨äºæ¯ä¸ªå•å…ƒæ ¼ã€‚å½“ä½ é™·å…¥å›°å¢ƒæ—¶ï¼Œä½ å¿…é¡»é€šè¿‡ä¾‹å­æ¥è§£å†³é—®é¢˜ã€‚å¯¹äºè¾…åŠ©æˆ– [å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    å‡½æ•°ï¼Œæœ€å¥½ä»ä¸»å‡½æ•°çš„ä¾‹å­ä¸­æ¨å¯¼å‡ºè¿™äº›ä¾‹å­ã€‚integrity-check çš„ç¬¬ä¸€ä¸ªä¾‹å­æ–­è¨€ school-content æ»¡è¶³å®Œæ•´æ€§çº¦æŸã€‚æ˜¾ç„¶ï¼Œschool-content
    ä¸­çš„æ‰€æœ‰è¡Œé•¿åº¦éƒ½ä¸ school-schema ç›¸åŒã€‚é—®é¢˜æ˜¯ä¸ºä»€ä¹ˆè¿™æ ·çš„è¡Œ
- en: ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Alice"Â 35Â #true)
  id: totrans-2021
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Alice"Â 35Â #true)
- en: 'satisfies the predicates in the corresponding schema:'
  id: totrans-2022
  prefs: []
  type: TYPE_NORMAL
  zh: æ»¡è¶³ç›¸åº”æ¨¡å¼ä¸­çš„è°“è¯ï¼š
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Name"Â Â Â Â [string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29))
    |'
  id: totrans-2023
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Name"Â Â Â Â [string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)))
    |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Age"Â Â Â Â Â [integer?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._integer~3f%29%29))
    |'
  id: totrans-2024
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Age"Â Â Â Â Â [integer?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._integer~3f%29%29)))
    |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Present"Â [boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)))
    |'
  id: totrans-2025
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Present"Â [boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)))
    |'
- en: 'The answer is that all three applications of the three predicates to the respective
    cells yields true:'
  id: totrans-2026
  prefs: []
  type: TYPE_NORMAL
  zh: ç­”æ¡ˆæ˜¯ï¼Œå°†ä¸‰ä¸ªè°“è¯åˆ†åˆ«åº”ç”¨äºå„è‡ªçš„å•å…ƒæ ¼ï¼Œéƒ½ä¼šè¿”å›trueï¼š
- en: '| > ([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â "Alice")
    |'
  id: totrans-2027
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29)Â "Alice")
    |'
- en: '| #true |'
  id: totrans-2028
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #true |'
- en: '| > ([integer?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._integer~3f%29%29)Â 35)
    |'
  id: totrans-2029
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([integer?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._integer~3f%29%29)Â 35)
    |'
- en: '| #true |'
  id: totrans-2030
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #true |'
- en: '| > ([boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)Â #true)
    |'
  id: totrans-2031
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)Â #true)
    |'
- en: '| #true |'
  id: totrans-2032
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #true |'
- en: From here, it is just a short step to see that the function must process these
    two listsâ€”<wbr>dbâ€™s schema and the given rowâ€”<wbr>in parallel.
  id: totrans-2033
  prefs: []
  type: TYPE_NORMAL
  zh: ä»è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹å‡ºï¼Œè¯¥å‡½æ•°å¿…é¡»å¹¶è¡Œå¤„ç†è¿™ä¸¤ä¸ªåˆ—è¡¨â€”â€”<wbr>æ•°æ®åº“çš„æ¨¡å¼å’Œç»™å®šçš„è¡Œâ€”â€”<wbr>ã€‚
- en: 'ExerciseÂ 404\. Design the function andmap2. It consumes a function f from two
    values to [Boolean](part_one.html#%28tech._boolean%29) and two equally long lists.
    Its result is also a [Boolean](part_one.html#%28tech._boolean%29). Specifically,
    it applies f to pairs of corresponding values from the two lists, and if f always
    produces #true, andmap2 produces #true, too. Otherwise, andmap2 produces #false.
    In short, andmap2 is like [andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    but for two lists.'
  id: totrans-2034
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 404ã€‚è®¾è®¡å‡½æ•°andmap2ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªä»ä¸¤ä¸ªå€¼åˆ°[Boolean](part_one.html#%28tech._boolean%29)çš„å‡½æ•°å’Œä¸¤ä¸ªç­‰é•¿çš„åˆ—è¡¨ã€‚å®ƒçš„ç»“æœä¹Ÿæ˜¯ä¸€ä¸ª[Boolean](part_one.html#%28tech._boolean%29)ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå°†fåº”ç”¨äºä¸¤ä¸ªåˆ—è¡¨ä¸­å¯¹åº”å€¼çš„é…å¯¹ï¼Œå¦‚æœfæ€»æ˜¯äº§ç”Ÿ#trueï¼Œandmap2ä¹Ÿäº§ç”Ÿ#trueã€‚å¦åˆ™ï¼Œandmap2äº§ç”Ÿ#falseã€‚ç®€è€Œè¨€ä¹‹ï¼Œandmap2å°±åƒ[andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)ä¸€æ ·ï¼Œä½†é€‚ç”¨äºä¸¤ä¸ªåˆ—è¡¨ã€‚
- en: Stop! Solve [exerciseÂ 404](#%28counter._db._%28exercise._ex~3aandmap2%29%29)
    before reading on.
  id: totrans-2035
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰è§£å†³[ç»ƒä¹ 404](#%28counter._db._%28exercise._ex~3aandmap2%29%29)ã€‚
- en: 'If we had andmap2 in ISL+, checking the second condition on row would be straightforward:'
  id: totrans-2036
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬åœ¨ISL+ä¸­æœ‰andmap2ï¼Œæ£€æŸ¥è¡Œä¸Šçš„ç¬¬äºŒä¸ªæ¡ä»¶å°†éå¸¸ç®€å•ï¼š
- en: '| (andmap2Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (sÂ c)Â [([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â s)Â c])
    |'
  id: totrans-2037
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (andmap2Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (sÂ c)Â [([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â s)Â c])
    |'
- en: '| Â Â Â Â Â Â Â Â Â (db-schemaÂ db) |'
  id: totrans-2038
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â (db-schemaÂ db) |'
- en: '| Â Â Â Â Â Â Â Â Â row) |'
  id: totrans-2039
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â row) |'
- en: The given function consumes a [Spec](#%28tech._db._spec%29) s from dbâ€™s schema,
    extracts the predicate in the second position, and applies it to the given [Cell](#%28tech._db._cell%29)
    c. Whatever the predicate returns is the result of the [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    function.
  id: totrans-2040
  prefs: []
  type: TYPE_NORMAL
  zh: ç»™å®šçš„å‡½æ•°ä»æ•°æ®åº“æ¨¡å¼ä¸­æ¶ˆè€—ä¸€ä¸ª[Spec](#%28tech._db._spec%29) sï¼Œæå–ç¬¬äºŒä¸ªä½ç½®çš„è°“è¯ï¼Œå¹¶å°†å…¶åº”ç”¨äºç»™å®šçš„[Cell](#%28tech._db._cell%29)
    cã€‚æ— è®ºè°“è¯è¿”å›ä»€ä¹ˆï¼Œéƒ½æ˜¯[lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)å‡½æ•°çš„ç»“æœã€‚
- en: Stop again! Explain [([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)  s)  c].
  id: totrans-2041
  prefs: []
  type: TYPE_NORMAL
  zh: å†æ¬¡åœæ­¢ï¼è§£é‡Š([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)
    s) c]ã€‚
- en: 'As it turns out, [andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    in ISL+ is already like andmap2:'
  id: totrans-2042
  prefs: []
  type: TYPE_NORMAL
  zh: ç»“æœè¡¨æ˜ï¼ŒISL+ä¸­çš„[andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)å·²ç»ç±»ä¼¼äºandmap2ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (integrity-checkÂ db)
    |'
  id: totrans-2043
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (integrity-check db) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Row](#%28tech._db._row%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-2044
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (; [Row](#%28tech._db._row%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â does row satisfy (I1) and (I2) |'
  id: totrans-2045
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ;Â è¡Œæ˜¯å¦æ»¡è¶³(I1)å’Œ(I2) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-integrity-checkÂ row)
    |'
  id: totrans-2046
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (row-integrity-check row) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â (lengthÂ row)
    |'
  id: totrans-2047
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)
    (length row) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (lengthÂ (db-schemaÂ db))) |'
  id: totrans-2048
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  (length (db-schema db))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (sÂ c)Â [([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â s)Â c])
    |'
  id: totrans-2049
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    (s c) [([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)
    s) c]) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (db-schemaÂ db) |'
  id: totrans-2050
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    (db-schema db) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â row)))) |'
  id: totrans-2051
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  row)))) |'
- en: '| Â Â Â Â ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â row-integrity-checkÂ (db-contentÂ db))))
    |'
  id: totrans-2052
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    row-integrity-check (db-content db)))) |'
- en: Stop a last time! Develop a test for which integrity-check must fail.
  id: totrans-2053
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ä¸€ä¸‹ï¼ä¸ºå®Œæ•´æ€§æ£€æŸ¥å¿…é¡»å¤±è´¥çš„æƒ…å†µå¼€å‘ä¸€ä¸ªæµ‹è¯•ã€‚
- en: 'Note on Expression Hoisting Our definition of integrity-check suffers from
    several problems, some visible, some invisible. Clearly, the function extracts
    dbâ€™s schema twice. With the existing [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    definition it is possible to introduce a definition and avoid this duplication:'
  id: totrans-2054
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨è¾¾å¼æå‡æ³¨æ„äº‹é¡¹æˆ‘ä»¬çš„å®Œæ•´æ€§æ£€æŸ¥å®šä¹‰å­˜åœ¨å‡ ä¸ªé—®é¢˜ï¼Œæœ‰äº›æ˜¯æ˜æ˜¾çš„ï¼Œæœ‰äº›åˆ™ä¸æ˜æ˜¾ã€‚æ˜¾ç„¶ï¼Œè¯¥å‡½æ•°ä¸¤æ¬¡æå–äº†æ•°æ®åº“çš„æ¶æ„ã€‚ä½¿ç”¨ç°æœ‰çš„[æœ¬åœ°](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)å®šä¹‰ï¼Œå¯ä»¥å¼•å…¥ä¸€ä¸ªå®šä¹‰å¹¶é¿å…è¿™ç§é‡å¤ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (integrity-check.v2Â db)
    |'
  id: totrans-2055
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (integrity-check.v2 db) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â schemaÂ (db-schemaÂ db))
    |'
  id: totrans-2056
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    schema (db-schema db))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Row](#%28tech._db._row%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-2057
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; [è¡Œ](#%28tech._db._row%29) -> [å¸ƒå°”](part_one.html#%28tech._boolean%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â does row satisfy (I1) and (I2) |'
  id: totrans-2058
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; åˆ¤æ–­è¡Œæ˜¯å¦æ»¡è¶³ (I1) å’Œ (I2) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-integrity-checkÂ row)
    |'
  id: totrans-2059
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (row-integrity-check row) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â (lengthÂ row)Â (lengthÂ schema))
    |'
  id: totrans-2060
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)
    (length row) (length schema))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (sÂ c)Â [([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â s)Â c])
    |'
  id: totrans-2061
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    (s c) ([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)
    s) c]) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â schema |'
  id: totrans-2062
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   schema |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â row)))) |'
  id: totrans-2063
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   row)))) |'
- en: '| Â Â Â Â ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â row-integrity-checkÂ (db-contentÂ db))))
    |'
  id: totrans-2064
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    row-integrity-check (db-content db)))) |'
- en: We know from [Local Definitions](part_three.html#%28part._sec~3alocal-definitions%29)
    that lifting such an expression may shorten the time needed to run the integrity
    check. Like the definition of inf in [figureÂ 100](part_three.html#%28counter._%28figure._fig~3alocal-performance%29%29),
    the original version of integrity-check extracts the schema from db for every
    single row, even though it obviously stays the same.
  id: totrans-2065
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä» [å±€éƒ¨å®šä¹‰](part_three.html#%28part._sec~3alocal-definitions%29) ä¸­çŸ¥é“ï¼Œæå‡è¿™æ ·çš„è¡¨è¾¾å¼å¯ä»¥ç¼©çŸ­è¿è¡Œå®Œæ•´æ€§æ£€æŸ¥æ‰€éœ€çš„æ—¶é—´ã€‚å°±åƒ
    [å›¾ 100](part_three.html#%28counter._%28figure._fig~3alocal-performance%29%29)
    ä¸­ inf çš„å®šä¹‰ä¸€æ ·ï¼Œå®Œæ•´æ€§æ£€æŸ¥çš„åŸç‰ˆä» db ä¸­ä¸ºæ¯ä¸€è¡Œæå–æ¨¡å¼ï¼Œå³ä½¿å®ƒæ˜¾ç„¶ä¿æŒä¸å˜ã€‚
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (integrity-check.v3Â db)
    |'
  id: totrans-2066
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (integrity-check.v3 db) |
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â schemaÂ Â (db-schemaÂ db))
    |'
  id: totrans-2067
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å±€éƒ¨å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    schema (db-schema db)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (db-contentÂ db))
    |'
  id: totrans-2068
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    content (db-content db)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â widthÂ Â Â (lengthÂ schema))
    |'
  id: totrans-2069
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â widthÂ Â Â (lengthÂ schema))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Row](#%28tech._db._row%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-2070
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â [è¡Œ](#%28tech._db._row%29) -> [å¸ƒå°”å€¼](part_one.html#%28tech._boolean%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â does row satisfy (I1) and (I2) |'
  id: totrans-2071
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â æ£€æŸ¥è¡Œæ˜¯å¦æ»¡è¶³(I1)å’Œ(I2) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-integrity-checkÂ row)
    |'
  id: totrans-2072
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-integrity-checkÂ row))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â (lengthÂ row)Â width)
    |'
  id: totrans-2073
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â (lengthÂ row)Â width))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (sÂ c)Â [([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â s)Â c])
    |'
  id: totrans-2074
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (sÂ c)Â [([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â s)Â c])
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â schema |'
  id: totrans-2075
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â æ¨¡å¼ |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â row)))) |'
  id: totrans-2076
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â è¡Œ)))) |'
- en: '| Â Â Â Â ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â row-integrity-checkÂ content)))
    |'
  id: totrans-2077
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)Â row-integrity-checkÂ content)))
    |'
- en: ''
  id: totrans-2078
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 139: The result of systematic expression hoisting'
  id: totrans-2079
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾139ï¼šç³»ç»ŸåŒ–è¡¨è¾¾å¼æå‡çš„ç»“æœ
- en: Terminology Computer scientists speak of â€œhoisting an expression.â€ In a similar
    vein, the row-integrity-check function determines the length of dbâ€™s schema every
    single time it is called. The result is always the same. Hence, if we are interested
    in improving the performance of this function, we can use a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    definition to name the width of the database content once and for all. [FigureÂ 139](#%28counter._db._%28figure._fig~3ahoisted%29%29)
    displays the result of hoisting (length  schema) out of the row-integrity-check.
    For readability, this final definition also names the content field of db. End
  id: totrans-2080
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¯è¯­è®¡ç®—æœºç§‘å­¦å®¶è°ˆè®ºâ€œæå‡è¡¨è¾¾å¼â€ã€‚åœ¨ç±»ä¼¼çš„æ–¹å¼ä¸­ï¼Œè¡Œå®Œæ•´æ€§æ£€æŸ¥å‡½æ•°æ¯æ¬¡è¢«è°ƒç”¨æ—¶éƒ½ä¼šç¡®å®šæ•°æ®åº“æ¨¡å¼çš„é•¿åº¦ã€‚ç»“æœå§‹ç»ˆç›¸åŒã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬å¯¹æé«˜è¯¥å‡½æ•°çš„æ€§èƒ½æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)å®šä¹‰æ¥ä¸€æ¬¡æ€§å‘½åæ•°æ®åº“å†…å®¹çš„å®½åº¦ã€‚[å›¾139](#%28counter._db._%28figure._fig~3ahoisted%29%29)æ˜¾ç¤ºäº†å°†(length
    schema)ä»è¡Œå®Œæ•´æ€§æ£€æŸ¥ä¸­æå‡å‡ºæ¥çš„ç»“æœã€‚ä¸ºäº†å¯è¯»æ€§ï¼Œè¿™ä¸ªæœ€ç»ˆçš„å®šä¹‰è¿˜å‘½åäº†dbçš„å†…å®¹å­—æ®µã€‚ç»“æŸ
- en: 'Projections and Selections Programs need to extract data from databases. One
    kind of extraction is to select content, which is explained in [Real-World Data:
    iTunes](part_two.html#%28part._itunes-data._sec~3aitunes%29). The other kind of
    extraction produces a reduced database; it is dubbed projection. More specifically,
    a projection constructs a database by retaining only certain columns from a given
    database.'
  id: totrans-2081
  prefs: []
  type: TYPE_NORMAL
  zh: æŠ•å½±å’Œé€‰æ‹©ç¨‹åºéœ€è¦ä»æ•°æ®åº“ä¸­æå–æ•°æ®ã€‚ä¸€ç§æå–æ–¹å¼æ˜¯é€‰æ‹©å†…å®¹ï¼Œè¿™åœ¨[ç°å®ä¸–ç•Œæ•°æ®ï¼šiTunes](part_two.html#%28part._itunes-data._sec~3aitunes%29)ä¸­æœ‰æ‰€è§£é‡Šã€‚å¦ä¸€ç§æå–æ–¹å¼äº§ç”Ÿä¸€ä¸ªç¼©å‡çš„æ•°æ®åº“ï¼›å®ƒè¢«ç§°ä¸ºæŠ•å½±ã€‚æ›´å…·ä½“åœ°è¯´ï¼ŒæŠ•å½±é€šè¿‡ä»…ä¿ç•™ç»™å®šæ•°æ®åº“ä¸­çš„æŸäº›åˆ—æ¥æ„å»ºæ•°æ®åº“ã€‚
- en: 'The description of a projection suggests the following:'
  id: totrans-2082
  prefs: []
  type: TYPE_NORMAL
  zh: æŠ•å½±çš„æè¿°æš—ç¤ºäº†ä»¥ä¸‹å†…å®¹ï¼š
- en: '| ;Â [DB](#%28tech._db._db%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Label](#%28tech._db._label%29)]
    -> [DB](#%28tech._db._db%29) |'
  id: totrans-2083
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [DB](#%28tech._db._db%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Label](#%28tech._db._label%29)]
    -> [DB](#%28tech._db._db%29) |'
- en: '| ;Â retains a column from db if its label is in labels |'
  id: totrans-2084
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¿ç•™æ•°æ®åº“ä¸­æ ‡ç­¾åœ¨labelsä¸­çš„åˆ— |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (projectÂ dbÂ labels)Â (make-dbÂ ''()Â ''()))
    |'
  id: totrans-2085
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (projectÂ dbÂ labels)Â (make-dbÂ ''()Â ''()))
    |'
- en: 'Given the complexity of a projection, it is best to work through an example
    first. Say we wish to eliminate the age column from the database on the left in
    [figureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29). Here is what
    this transformation looks like in terms of tables:'
  id: totrans-2086
  prefs: []
  type: TYPE_NORMAL
  zh: 'Given the complexity of a projection, it is best to work through an example
    first. Say we wish to eliminate the age column from the database on the left in
    [figureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29). Here is what
    this transformation looks like in terms of tables:'
- en: '| the original database |  | ... eliminating the â€œAgeâ€ column |'
  id: totrans-2087
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| the original database |  | ... eliminating the â€œAgeâ€ column |'
- en: '|'
  id: totrans-2088
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-2089
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Name &#124;  &#124; Age &#124;  &#124; Present &#124;'
  id: totrans-2090
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Name &#124;  &#124; Age &#124;  &#124; Present &#124;'
- en: '&#124; [String](part_one.html#%28tech._string%29) &#124;  &#124; [Integer](part_one.html#%28tech._integer%29)
    &#124;  &#124; [Boolean](part_one.html#%28tech._boolean%29) &#124;'
  id: totrans-2091
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; [String](part_one.html#%28tech._string%29) &#124;  &#124; [Integer](part_one.html#%28tech._integer%29)
    &#124;  &#124; [Boolean](part_one.html#%28tech._boolean%29) &#124;'
- en: '&#124; "Alice" &#124;  &#124; 35 &#124;  &#124; #true &#124;'
  id: totrans-2092
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Alice" &#124;  &#124; 35 &#124;  &#124; #true &#124;'
- en: '&#124; "Bob" &#124;  &#124; 25 &#124;  &#124; #false &#124;'
  id: totrans-2093
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Bob" &#124;  &#124; 25 &#124;  &#124; #false &#124;'
- en: '&#124; "Carol" &#124;  &#124; 30 &#124;  &#124; #true &#124;'
  id: totrans-2094
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Carol" &#124;  &#124; 30 &#124;  &#124; #true &#124;'
- en: '&#124; "Dave" &#124;  &#124; 32 &#124;  &#124; #false &#124;'
  id: totrans-2095
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Dave" &#124;  &#124; 32 &#124;  &#124; #false &#124;'
- en: ''
  id: totrans-2096
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-2097
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-2098
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Name &#124;  &#124; Present &#124;'
  id: totrans-2099
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Name &#124;  &#124; Present &#124;'
- en: '&#124; [String](part_one.html#%28tech._string%29) &#124;  &#124; [Boolean](part_one.html#%28tech._boolean%29)
    &#124;'
  id: totrans-2100
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; [String](part_one.html#%28tech._string%29) &#124;  &#124; [Boolean](part_one.html#%28tech._boolean%29)
    &#124;'
- en: '&#124; "Alice" &#124;  &#124; #true &#124;'
  id: totrans-2101
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Alice" &#124;  &#124; #true &#124;'
- en: '&#124; "Bob" &#124;  &#124; #false &#124;'
  id: totrans-2102
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Bob" &#124;  &#124; #false &#124;'
- en: '&#124; "Carol" &#124;  &#124; #true &#124;'
  id: totrans-2103
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Carol" &#124;  &#124; #true &#124;'
- en: '&#124; "Dave" &#124;  &#124; #false &#124;'
  id: totrans-2104
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Dave" &#124;  &#124; #false &#124;'
- en: ''
  id: totrans-2105
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-2106
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: 'A natural way to articulate the example as a test reuses [figureÂ 138](#%28counter._db._%28figure._fig~3adb-isl%29%29):'
  id: totrans-2107
  prefs: []
  type: TYPE_NORMAL
  zh: 'A natural way to articulate the example as a test reuses [figureÂ 138](#%28counter._db._%28figure._fig~3adb-isl%29%29):'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â projected-content
    |'
  id: totrans-2108
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â projected-content
    |'
- en: '| Â Â `(("Alice"Â #true) |'
  id: totrans-2109
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â `(("Alice"Â #true) |'
- en: '| Â Â Â Â ("Bob"Â Â Â #false) |'
  id: totrans-2110
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ("Bob"Â Â Â #false) |'
- en: '| Â Â Â Â ("Carol"Â #true) |'
  id: totrans-2111
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ("Carol"Â #true) |'
- en: '| Â Â Â Â ("Dave"Â Â #false))) |'
  id: totrans-2112
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ("Dave"Â Â #false))) |'
- en: '| Â  |'
  id: totrans-2113
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â projected-schema
    |'
  id: totrans-2114
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â projected-schema
    |'
- en: '| Â Â `(("Name"Â ,[string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29))Â ("Present"Â ,[boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29))))
    |'
  id: totrans-2115
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â `(("Name"Â ,[string?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3f%29%29))Â ("Present"Â ,[boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29))))
    |'
- en: '| Â  |'
  id: totrans-2116
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â projected-db
    |'
  id: totrans-2117
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â projected-db
    |'
- en: '| Â Â (make-dbÂ projected-schemaÂ projected-content)) |'
  id: totrans-2118
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-dbÂ projected-schemaÂ projected-content)) |'
- en: '| ;Â  Stop! Read this test carefully. What''s wrong? |'
  id: totrans-2119
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Stop! ä»”ç»†é˜…è¯»æ­¤æµ‹è¯•ã€‚æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (projectÂ school-dbÂ ''("Name"Â "Present"))
    |'
  id: totrans-2120
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (projectÂ school-dbÂ ''("Name"Â "Present"))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â projected-db) |'
  id: totrans-2121
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆæŠ•å½±æ•°æ®åº“ï¼‰|'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (projectÂ dbÂ labels)
    |'
  id: totrans-2122
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ï¼ˆæŠ•å½± æ•°æ®åº“ æ ‡ç­¾ï¼‰|'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â schemaÂ Â (db-schemaÂ db))
    |'
  id: totrans-2123
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    schema (æ•°æ®åº“æ¨¡å¼ æ•°æ®åº“)ï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (db-contentÂ db))
    |'
  id: totrans-2124
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    content (æ•°æ®åº“å†…å®¹ æ•°æ®åº“)ï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Spec](#%28tech._db._spec%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-2125
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ; [è§„èŒƒ](#%28tech._db._spec%29) -> [å¸ƒå°”](part_one.html#%28tech._boolean%29)ï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â does this spec belong to the new schema |'
  id: totrans-2126
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ; è¿™ä¸ªè§„èŒƒæ˜¯å¦å±äºæ–°çš„æ¨¡å¼ï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (keep?Â c)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-2127
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ï¼ˆä¿ç•™ï¼Ÿ c) [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)ï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Row](#%28tech._db._row%29) -> [Row](#%28tech._db._row%29) |'
  id: totrans-2128
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ; [è¡Œ](#%28tech._db._row%29) -> [è¡Œ](#%28tech._db._row%29)ï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â retains those columns whose name is in labels |'
  id: totrans-2129
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ; ä¿ç•™é‚£äº›åç§°åœ¨æ ‡ç­¾ä¸­çš„åˆ—ï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-projectÂ row)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
  id: totrans-2130
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ï¼ˆè¡ŒæŠ•å½± è¡Œï¼‰[...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)ï¼‰ï¼‰|'
- en: '| Â Â Â Â (make-dbÂ ([filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)Â keep?Â schema)
    |'
  id: totrans-2131
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ; ä½¿ç”¨ make-db è¿‡æ»¤ schemaï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â row-projectÂ content))))
    |'
  id: totrans-2132
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[æ˜ å°„](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    è¡ŒæŠ•å½± å†…å®¹ï¼‰ï¼‰|'
- en: ''
  id: totrans-2133
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 140: A template for project'
  id: totrans-2134
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾140ï¼šæŠ•å½±æ¨¡æ¿
- en: If you fill in the above template and run the code in DrRacket, you get the
    error message
  id: totrans-2135
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ å¡«å†™ä¸Šè¿°æ¨¡æ¿å¹¶åœ¨ DrRacket ä¸­è¿è¡Œä»£ç ï¼Œä½ ä¼šå¾—åˆ°é”™è¯¯ä¿¡æ¯
- en: first argument of equality cannot be a function
  id: totrans-2136
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç­‰å¼ç¬¬ä¸€ä¸ªå‚æ•°ä¸èƒ½æ˜¯ä¸€ä¸ªå‡½æ•°
- en: 'before DrRacket can even figure out whether the test succeeds. Recall from
    [Functions Are Values](part_three.html#%28part._sec~3afunctions-as-values%29)
    that functions are infinitely large objects and it is impossible to ensure that
    two functions always produce the same result when applied to the same arguments.
    We therefore weaken the test case:'
  id: totrans-2137
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ DrRacket ç”šè‡³èƒ½å¤Ÿåˆ¤æ–­æµ‹è¯•æ˜¯å¦æˆåŠŸä¹‹å‰ã€‚å›é¡¾[å‡½æ•°æ˜¯å€¼](part_three.html#%28part._sec~3afunctions-as-values%29)éƒ¨åˆ†ï¼Œå‡½æ•°æ˜¯æ— é™å¤§çš„å¯¹è±¡ï¼Œå½“åº”ç”¨äºç›¸åŒçš„å‚æ•°æ—¶ï¼Œæ— æ³•ä¿è¯ä¸¤ä¸ªå‡½æ•°æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„ç»“æœã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ”¾å®½äº†æµ‹è¯•ç”¨ä¾‹ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    |'
  id: totrans-2138
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)ï¼‰|'
- en: '| Â Â (db-contentÂ (projectÂ school-dbÂ ''("Name"Â "Present"))) |'
  id: totrans-2139
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆæ•°æ®åº“å†…å®¹ (æŠ•å½± å­¦æ ¡æ•°æ®åº“ ("Name" "Present")))|'
- en: '| Â Â projected-content) |'
  id: totrans-2140
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆæŠ•å½±å†…å®¹ï¼‰|'
- en: 'For the template, we again reuse existing abstractions; see [figureÂ 140](#%28counter._db._%28figure._fig~3aproject-template%29%29).
    The [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    expression defines two functions: one for use with [filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)
    for narrowing down the schema of the given database and the other for use with
    [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    for thinning out the content. In addition, the function again extracts and names
    the schema and the content from the given database.'
  id: totrans-2141
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºæ¨¡æ¿ï¼Œæˆ‘ä»¬å†æ¬¡é‡ç”¨ç°æœ‰çš„æŠ½è±¡ï¼›å‚è§[å›¾140](#%28counter._db._%28figure._fig~3aproject-template%29%29)ã€‚[æœ¬åœ°](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)è¡¨è¾¾å¼å®šä¹‰äº†ä¸¤ä¸ªå‡½æ•°ï¼šä¸€ä¸ªç”¨äºä¸[filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ç¼©å°ç»™å®šæ•°æ®åº“çš„æ¨¡å¼ï¼Œå¦ä¸€ä¸ªç”¨äºä¸[map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ç²¾ç®€å†…å®¹ã€‚æ­¤å¤–ï¼Œè¯¥å‡½æ•°å†æ¬¡ä»ç»™å®šæ•°æ®åº“ä¸­æå–å¹¶å‘½åæ¨¡å¼å’Œå†…å®¹ã€‚
- en: Before we turn to the wish list, letâ€™s step back and study the decision to go
    with two reuses of existing abstraction. The signature tells us that the function
    consumes a structure and produces an element of [DB](#%28tech._db._db%29), so
  id: totrans-2142
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬è½¬å‘æ„¿æœ›æ¸…å•ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹å†³å®šä½¿ç”¨ä¸¤æ¬¡ç°æœ‰æŠ½è±¡çš„å†³å®šã€‚ç­¾åå‘Šè¯‰æˆ‘ä»¬è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªç»“æ„å¹¶äº§ç”Ÿ[DB](#%28tech._db._db%29)çš„ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥
- en: '| ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â schemaÂ (db-schemaÂ db))
    |'
  id: totrans-2143
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æœ¬åœ°](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    schema (db-schema db))) |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (db-contentÂ db)))
    |'
  id: totrans-2144
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    content (db-content db)) |'
- en: '| Â Â (make-dbÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â schemaÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-2145
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [åˆ›å»ºæ•°æ®åº“](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [schema](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [content](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â contentÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
  id: totrans-2146
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...] ([å†…å®¹](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
- en: 'is clearly called for. It is also straightforward to see that the new schema
    is created from the old schema and the new content from the old content. Furthermore,
    the purpose statement of project calls for the retention of only those labels
    that are mentioned in the second argument. Hence, the [filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)
    function correctly narrows down the given schema. In contrast, the rows per se
    stay except that each of them loses some cells. Thus, [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    is the proper way of processing content.Now we can turn to the design of the two
    auxiliary functions. The design of keep? is straightforward. Here is the complete
    definition:'
  id: totrans-2147
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç„¶æ˜¯å¿…è¦çš„ã€‚ä¹Ÿå¯ä»¥ç›´æ¥çœ‹å‡ºï¼Œæ–°æ¶æ„æ˜¯ç”±æ—§æ¶æ„å’Œæ—§å†…å®¹ä¸­çš„æ–°å†…å®¹åˆ›å»ºçš„ã€‚æ­¤å¤–ï¼Œé¡¹ç›®è¯´æ˜çš„ç›®çš„æ˜¯ä¿ç•™ä»…åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­æåˆ°çš„æ ‡ç­¾ã€‚å› æ­¤ï¼Œ[è¿‡æ»¤å™¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)å‡½æ•°æ­£ç¡®åœ°ç¼©å°äº†ç»™å®šçš„æ¶æ„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¡Œæœ¬èº«ä¿æŒä¸å˜ï¼Œä½†æ¯ä¸ªè¡Œéƒ½ä¸¢å¤±äº†ä¸€äº›å•å…ƒæ ¼ã€‚å› æ­¤ï¼Œ[æ˜ å°„](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)æ˜¯å¤„ç†å†…å®¹çš„æ­£ç¡®æ–¹å¼ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥è½¬å‘ä¸¤ä¸ªè¾…åŠ©å‡½æ•°çš„è®¾è®¡ã€‚keep?çš„è®¾è®¡å¾ˆç®€å•ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„å®šä¹‰ï¼š
- en: '| ;Â [Spec](#%28tech._db._spec%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-2148
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [è§„èŒƒ](#%28tech._db._spec%29) -> [å¸ƒå°”å€¼](part_one.html#%28tech._boolean%29)
    |'
- en: '| ;Â does this spec belong to the new schema |'
  id: totrans-2149
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è¿™ä¸ªè§„èŒƒæ˜¯å¦å±äºæ–°æ¶æ„ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (keep?Â c)
    |'
  id: totrans-2150
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (keep?Â c)
    |'
- en: '| Â Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â c)Â labels))
    |'
  id: totrans-2151
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â c)Â labels))
    |'
- en: 'The function is applied to a [Spec](#%28tech._db._spec%29), which combines
    a [Label](#%28tech._db._label%29) and a [Predicate](#%28tech._db._predicate%29)
    in a list. If the former belongs to labels, the given [Spec](#%28tech._db._spec%29)
    is kept.For the design of row-project, the goal is to keep those [Cell](#%28tech._db._cell%29)s
    in each [Row](#%28tech._db._row%29) of content whose name is a member of the given
    labels. Letâ€™s work through the above example. The four rows are:'
  id: totrans-2152
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°åº”ç”¨äºä¸€ä¸ª[è§„èŒƒ](#%28tech._db._spec%29)ï¼Œå®ƒå°†ä¸€ä¸ª[æ ‡ç­¾](#%28tech._db._label%29)å’Œä¸€ä¸ª[è°“è¯](#%28tech._db._predicate%29)ç»„åˆæˆä¸€ä¸ªåˆ—è¡¨ã€‚å¦‚æœå‰è€…å±äºæ ‡ç­¾ï¼Œåˆ™ä¿ç•™ç»™å®šçš„[è§„èŒƒ](#%28tech._db._spec%29)ã€‚å¯¹äºè¡ŒæŠ•å½±çš„è®¾è®¡ï¼Œç›®æ ‡æ˜¯ä¿ç•™é‚£äº›åç§°æ˜¯ç»™å®šæ ‡ç­¾æˆå‘˜çš„æ¯ä¸ª[å•å…ƒæ ¼](#%28tech._db._cell%29)ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„ä¾‹å­æ¥åˆ†æã€‚è¿™å››è¡Œæ˜¯ï¼š
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Alice"Â 35Â #true)
    |'
  id: totrans-2153
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Alice"Â 35Â #true)
    |'
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Bob"Â Â Â 25Â #false)
    |'
  id: totrans-2154
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Bob"Â Â Â 25Â #false)
    |'
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Carol"Â 30Â #true)
    |'
  id: totrans-2155
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Carol"Â 30Â #true)
    |'
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Dave"Â Â 32Â #false)
    |'
  id: totrans-2156
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Dave"Â Â 32Â #false)
    |'
- en: 'Each of these rows is as long as school-schema:'
  id: totrans-2157
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯è¡Œä¸school-schemaä¸€æ ·é•¿ï¼š
- en: ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "Name"Â "Age"Â "Present")
  id: totrans-2158
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "åç§°"Â "å¹´é¾„"Â "å½“å‰")
- en: 'The names in the schema determine the names of the cells in the given rows.
    Hence, row-project must keep the first and third cell of each row because it is
    their names that are in the given labels.Since [Row](#%28tech._db._row%29) is
    defined recursively, this matching process between the content of the [Cell](#%28tech._db._cell%29)s
    and their names calls for a recursive helper function that row-project can apply
    to the content and the labels of the cells. Letâ€™s specify it as a wish:'
  id: totrans-2159
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡å¼ä¸­çš„åç§°å†³å®šäº†ç»™å®šè¡Œä¸­å•å…ƒæ ¼çš„åç§°ã€‚å› æ­¤ï¼Œrow-projectå¿…é¡»ä¿ç•™æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªå•å…ƒæ ¼ï¼Œå› ä¸ºå®ƒä»¬çš„åç§°åœ¨ç»™å®šçš„æ ‡ç­¾ä¸­ã€‚ç”±äº[Row](#%28tech._db._row%29)æ˜¯é€’å½’å®šä¹‰çš„ï¼Œè¿™ä¸ª[Cell](#%28tech._db._cell%29)å†…å®¹ä¸å®ƒä»¬çš„åç§°ä¹‹é—´çš„åŒ¹é…è¿‡ç¨‹éœ€è¦ä¸€ä¸ªé€’å½’è¾…åŠ©å‡½æ•°ï¼Œrow-projectå¯ä»¥å°†å…¶åº”ç”¨äºå•å…ƒæ ¼çš„å†…å®¹å’Œæ ‡ç­¾ã€‚è®©æˆ‘ä»¬å°†å…¶æŒ‡å®šä¸ºä¸€ä¸ªæ„¿æœ›ï¼š
- en: '| ;Â [Row](#%28tech._db._row%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Label](#%28tech._db._label%29)]
    -> [Row](#%28tech._db._row%29) |'
  id: totrans-2160
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Row](#%28tech._db._row%29) [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29)  [æ ‡ç­¾](#%28tech._db._label%29)]
    -> [Row](#%28tech._db._row%29) |'
- en: '| ;Â retains those cells whose corresponding element |'
  id: totrans-2161
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¿ç•™å¯¹åº”å…ƒç´  |'
- en: '| ;Â in names is also in labels |'
  id: totrans-2162
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨åç§°ä¸­ä¹Ÿåœ¨æ ‡ç­¾ä¸­ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-filterÂ rowÂ names)Â ''())
    |'
  id: totrans-2163
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-filterÂ rowÂ names)Â ''())
    |'
- en: 'Using this wish, row-project is a one-liner:'
  id: totrans-2164
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªæ„¿æœ›ï¼Œrow-projectæ˜¯ä¸€è¡Œä»£ç ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-projectÂ row)
    |'
  id: totrans-2165
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-projectÂ row)
    |'
- en: '| Â Â (row-filterÂ rowÂ ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â [first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â schema)))
    |'
  id: totrans-2166
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (row-filterÂ rowÂ ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â [first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â schema)))
    |'
- en: The [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    expression extracts the names of the cells, and those names are handed to row-filter
    to extract the matching cells.
  id: totrans-2167
  prefs: []
  type: TYPE_NORMAL
  zh: The [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    è¡¨è¾¾å¼æå–å•å…ƒæ ¼çš„åç§°ï¼Œå¹¶å°†è¿™äº›åç§°ä¼ é€’ç»™row-filterä»¥æå–åŒ¹é…çš„å•å…ƒæ ¼ã€‚
- en: ExerciseÂ 405\. Design the function row-filter. Construct examples for row-filter
    from the examples for project.
  id: totrans-2168
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 405ã€‚è®¾è®¡row-filterå‡½æ•°ã€‚ä»projectçš„ç¤ºä¾‹ä¸­æ„å»ºrow-filterçš„ç¤ºä¾‹ã€‚
- en: Assumption The given database passes an integrity check, meaning each row is
    as long as the schema and thus its list of names.
  id: totrans-2169
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ç»™å®šçš„æ•°æ®åº“é€šè¿‡äº†ä¸€ä¸ªå®Œæ•´æ€§æ£€æŸ¥ï¼Œè¿™æ„å‘³ç€æ¯ä¸€è¡Œä¸æ¨¡å¼ä¸€æ ·é•¿ï¼Œå› æ­¤å®ƒçš„åç§°åˆ—è¡¨ã€‚
- en: '[FigureÂ 141](#%28counter._db._%28figure._fig~3adb-project%29%29) puts all the
    pieces together. The function project has the suffix .v1 because it calls for
    some improvement. The following exercises ask you to implement some of those.'
  id: totrans-2170
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾141](#%28counter._db._%28figure._fig~3adb-project%29%29)å°†æ‰€æœ‰è¿™äº›éƒ¨åˆ†ç»„åˆåœ¨ä¸€èµ·ã€‚å‡½æ•°projectæœ‰.v1åç¼€ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸€äº›æ”¹è¿›ã€‚ä»¥ä¸‹ç»ƒä¹ è¦æ±‚ä½ å®ç°å…¶ä¸­çš„ä¸€äº›ã€‚'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (project.v1Â dbÂ labels)
    |'
  id: totrans-2171
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (project.v1Â dbÂ labels)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â schemaÂ Â (db-schemaÂ db))
    |'
  id: totrans-2172
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â schemaÂ Â (db-schemaÂ db))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (db-contentÂ db))
    |'
  id: totrans-2173
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (db-contentÂ db))
    |'
- en: '| Â  |'
  id: totrans-2174
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â  |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Spec](#%28tech._db._spec%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-2175
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â [è§„èŒƒ](#%28tech._db._spec%29) -> [å¸ƒå°”](part_one.html#%28tech._boolean%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â does this column belong to the new schema |'
  id: totrans-2176
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â è¿™ä¸€åˆ—æ˜¯å¦å±äºæ–°æ¶æ„ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (keep?Â c)
    |'
  id: totrans-2177
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (keep?Â c)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â c)Â labels))
    |'
  id: totrans-2178
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([æˆå‘˜?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â c)Â labels))
    |'
- en: '| Â  |'
  id: totrans-2179
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â  |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Row](#%28tech._db._row%29) -> [Row](#%28tech._db._row%29) |'
  id: totrans-2180
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ;Â [è¡Œ](#%28tech._db._row%29) -> [è¡Œ](#%28tech._db._row%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â retains those columns whose name is in labels |'
  id: totrans-2181
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ;Â ä¿ç•™é‚£äº›åç§°åœ¨æ ‡ç­¾ä¸­çš„åˆ— |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-projectÂ row)
    |'
  id: totrans-2182
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-projectÂ row)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (row-filterÂ rowÂ ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â [first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â schema)))
    |'
  id: totrans-2183
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â (row-filterÂ rowÂ ([æ˜ å°„](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â [first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â schema)))
    |'
- en: '| Â  |'
  id: totrans-2184
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â  |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Row](#%28tech._db._row%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Label](#%28tech._db._label%29)]
    -> [Row](#%28tech._db._row%29) |'
  id: totrans-2185
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ;Â [è¡Œ](#%28tech._db._row%29) [[åˆ—è¡¨-of](part_three.html#%28tech._sim-dd._list._of%29)  [æ ‡ç­¾](#%28tech._db._label%29)]
    -> [è¡Œ](#%28tech._db._row%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â retains those cells whose name is in labels |'
  id: totrans-2186
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ;Â ä¿ç•™é‚£äº›åç§°åœ¨æ ‡ç­¾ä¸­çš„å•å…ƒæ ¼ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-filterÂ rowÂ names)
    |'
  id: totrans-2187
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-filterÂ rowÂ names)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-2188
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â names)Â ''()]
    |'
  id: totrans-2189
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([ç©º?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â names)Â ''()]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-2190
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â names)Â labels)
    |'
  id: totrans-2191
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â names)Â labels)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â row)
    |'
  id: totrans-2192
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â row)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (row-filterÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â row)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â names)))
    |'
  id: totrans-2193
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (row-filterÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â row)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â names)))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (row-filterÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â row)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â names)))])))
    |'
  id: totrans-2194
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (row-filterÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â row)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â names)))])))
    |'
- en: '| Â Â Â Â (make-dbÂ ([filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)Â keep?Â schema)
    |'
  id: totrans-2195
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (make-dbÂ ([filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)Â keep?Â schema)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â row-projectÂ content))))
    |'
  id: totrans-2196
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â row-projectÂ content))))
    |'
- en: ''
  id: totrans-2197
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 141: Database projection'
  id: totrans-2198
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾141ï¼šæ•°æ®åº“æŠ•å½±
- en: ExerciseÂ 406\. The row-project function recomputes the labels for every row
    of the databaseâ€™s content. Does the result differ from function call to function
    call? If not, hoist the expression.
  id: totrans-2199
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 406ã€‚row-project å‡½æ•°ä¸ºæ•°æ®åº“å†…å®¹çš„æ¯ä¸€è¡Œé‡æ–°è®¡ç®—æ ‡ç­¾ã€‚ç»“æœæ˜¯å¦åœ¨å‡½æ•°è°ƒç”¨ä¹‹é—´æœ‰æ‰€ä¸åŒï¼Ÿå¦‚æœæ²¡æœ‰ï¼Œåˆ™æå‡è¡¨è¾¾å¼ã€‚
- en: ExerciseÂ 407\. Redesign row-filter using [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29).
    Once you have done so, you may merge row-project and row-filter into a single
    function. Hint The [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    function in ISL+ may consume two lists and process them in parallel.
  id: totrans-2200
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 407ã€‚ä½¿ç”¨ [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    é‡æ–°è®¾è®¡ row-filterã€‚ä¸€æ—¦å®Œæˆï¼Œä½ å¯ä»¥å°† row-project å’Œ row-filter åˆå¹¶æˆä¸€ä¸ªå‡½æ•°ã€‚æç¤ºï¼šISL+ ä¸­çš„ [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    å‡½æ•°å¯èƒ½æ¶ˆè€—ä¸¤ä¸ªåˆ—è¡¨å¹¶å¹¶è¡Œå¤„ç†å®ƒä»¬ã€‚
- en: The final observation is that row-project checks the membership of a label in
    labels for every single cell. For the cells of the same column in different rows,
    the result is going to be the same. Hence it also makes sense to hoist this computation
    out of the function.
  id: totrans-2201
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åçš„è§‚å¯Ÿæ˜¯ï¼Œè¡ŒæŠ•å½±å¯¹æ¯ä¸ªå•å…ƒæ ¼ä¸­çš„æ ‡ç­¾åœ¨æ ‡ç­¾ä¸­çš„æˆå‘˜èµ„æ ¼è¿›è¡Œæ£€æŸ¥ã€‚å¯¹äºä¸åŒè¡Œä¸­åŒä¸€åˆ—çš„å•å…ƒæ ¼ï¼Œç»“æœå°†æ˜¯ç›¸åŒçš„ã€‚å› æ­¤ï¼Œå°†è¿™ç§è®¡ç®—æå‡å‡ºå‡½æ•°ä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„ã€‚
- en: This form of hoisting is somewhat more difficult than plain expression hoisting.
    We basically wish to pre-compute the result of
  id: totrans-2202
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§æå‡å½¢å¼æ¯”æ™®é€šè¡¨è¾¾å¼æå‡è¦å›°éš¾ä¸€äº›ã€‚æˆ‘ä»¬åŸºæœ¬ä¸Šå¸Œæœ›é¢„å…ˆè®¡ç®—ä»¥ä¸‹ç»“æœï¼š
- en: ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â labelÂ labels)
  id: totrans-2203
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â labelÂ labels)
- en: 'for all rows and pass the results into the function instead of the list of
    labels. That is, we replace the list of labels with a list of [Boolean](part_one.html#%28tech._boolean%29)s
    that indicate whether the cell in the corresponding position is to be kept. Fortunately,
    computing those [Boolean](part_one.html#%28tech._boolean%29)s is just another
    application of keep? on the schema:'
  id: totrans-2204
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºæ‰€æœ‰è¡Œï¼Œæˆ‘ä»¬å°†ç»“æœä¼ é€’ç»™å‡½æ•°è€Œä¸æ˜¯æ ‡ç­¾åˆ—è¡¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç”¨è¡¨ç¤ºç›¸åº”ä½ç½®å•å…ƒæ ¼æ˜¯å¦è¦ä¿ç•™çš„å¸ƒå°”å€¼åˆ—è¡¨æ›¿æ¢äº†æ ‡ç­¾åˆ—è¡¨ã€‚[å¸ƒå°”](part_one.html#%28tech._boolean%29)å€¼ã€‚å¹¸è¿çš„æ˜¯ï¼Œè®¡ç®—è¿™äº›[å¸ƒå°”](part_one.html#%28tech._boolean%29)å€¼åªæ˜¯å¯¹æ¨¡å¼åº”ç”¨`keep?`çš„å¦ä¸€ç§åº”ç”¨ï¼š
- en: ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â keep?Â schema)
  id: totrans-2205
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â keep?Â schema)
- en: Instead of keeping some [Spec](#%28tech._db._spec%29)s from the given schema
    and throwing away the others, this expression just collects the decisions.
  id: totrans-2206
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ä»ç»™å®šçš„æ¨¡å¼ä¸­ä¿ç•™ä¸€äº›[Spec](#%28tech._db._spec%29)å¹¶ä¸¢å¼ƒå…¶ä»–[Spec](#%28tech._db._spec%29)ä¸åŒï¼Œè¿™ä¸ªè¡¨è¾¾å¼åªæ˜¯æ”¶é›†å†³ç­–ã€‚
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (projectÂ dbÂ labels)
    |'
  id: totrans-2207
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (projectÂ dbÂ labels)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â schemaÂ Â (db-schemaÂ db))
    |'
  id: totrans-2208
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â schemaÂ Â (db-schemaÂ db))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (db-contentÂ db))
    |'
  id: totrans-2209
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â contentÂ (db-contentÂ db))
    |'
- en: '| Â  |'
  id: totrans-2210
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Spec](#%28tech._db._spec%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-2211
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â [Spec](#%28tech._db._spec%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â does this column belong to the new schema |'
  id: totrans-2212
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â è¿™ä¸€åˆ—å±äºæ–°æ¨¡å¼å— |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (keep?Â c)
    |'
  id: totrans-2213
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (keep?Â c)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â c)Â labels))
    |'
  id: totrans-2214
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â c)Â labels))
    |'
- en: '| Â  |'
  id: totrans-2215
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â [Row](#%28tech._db._row%29) -> [Row](#%28tech._db._row%29) |'
  id: totrans-2216
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â [Row](#%28tech._db._row%29) -> [Row](#%28tech._db._row%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â retains those columns whose name is in labels |'
  id: totrans-2217
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â ä¿ç•™åç§°åœ¨æ ‡ç­¾ä¸­çš„åˆ— |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-projectÂ row)
    |'
  id: totrans-2218
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (row-projectÂ row)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (cellÂ mÂ c)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â mÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â cellÂ c)Â c))
    |'
  id: totrans-2219
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    (cell m c) ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)
    m ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    cell c) c))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''() |'
  id: totrans-2220
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ''() |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â row |'
  id: totrans-2221
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   row |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â mask)) |'
  id: totrans-2222
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   mask)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â maskÂ ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â keep?Â schema)))
    |'
  id: totrans-2223
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    mask ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    keep? schema))) |'
- en: '| Â Â Â Â (make-dbÂ ([filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)Â keep?Â schema)
    |'
  id: totrans-2224
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (make-db ([filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)
    keep? schema))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â row-projectÂ content))))
    |'
  id: totrans-2225
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    row-project content))) |'
- en: ''
  id: totrans-2226
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 142: Database projection'
  id: totrans-2227
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾142ï¼šæ•°æ®åº“æŠ•å½±
- en: '[FigureÂ 142](#%28counter._db._%28figure._fig~3adb-project2%29%29) shows the
    final version of project and integrates the solutions for the preceding exercises.
    It also uses [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    to extract and name schema and content, plus keep? for checking whether the label
    in some [Spec](#%28tech._db._spec%29) is worth keeping. The remaining two definitions
    introduce mask, which stands for the list of [Boolean](part_one.html#%28tech._boolean%29)s
    discussed above, and the revised version of row-project. The latter uses [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    to process the given row and mask in parallel.'
  id: totrans-2228
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾142](#%28counter._db._%28figure._fig~3adb-project2%29%29)å±•ç¤ºäº†é¡¹ç›®çš„æœ€ç»ˆç‰ˆæœ¬ï¼Œå¹¶æ•´åˆäº†å‰é¢ç»ƒä¹ çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒè¿˜ä½¿ç”¨äº†[å±€éƒ¨å˜é‡](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)æ¥æå–å’Œå‘½åæ¨¡å¼ä»¥åŠå†…å®¹ï¼Œä»¥åŠkeep?æ¥æ£€æŸ¥æŸäº›[è§„èŒƒ](#%28tech._db._spec%29)ä¸­çš„æ ‡ç­¾æ˜¯å¦å€¼å¾—ä¿ç•™ã€‚å‰©ä¸‹çš„ä¸¤ä¸ªå®šä¹‰å¼•å…¥äº†maskï¼Œå®ƒä»£è¡¨ä¸Šé¢è®¨è®ºçš„[å¸ƒå°”](part_one.html#%28tech._boolean%29)åˆ—è¡¨ï¼Œä»¥åŠrow-projectçš„ä¿®è®¢ç‰ˆã€‚åè€…ä½¿ç”¨[foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)å¹¶è¡Œå¤„ç†ç»™å®šçš„è¡Œå’Œmaskã€‚'
- en: Compare this revised definition of project with project.v1 in [figureÂ 141](#%28counter._db._%28figure._fig~3adb-project%29%29).
    The final definition is both simpler and faster than the original version. Systematic
    design combined with careful revisions pays off; test suites ensure that revisions
    donâ€™t mess up the functionality of the program.
  id: totrans-2229
  prefs: []
  type: TYPE_NORMAL
  zh: å°†è¿™ä¸ªä¿®è®¢åçš„projectå®šä¹‰ä¸å›¾141ä¸­çš„project.v1è¿›è¡Œæ¯”è¾ƒã€‚[å›¾141](#%28counter._db._%28figure._fig~3adb-project%29%29)ä¸­çš„æœ€ç»ˆå®šä¹‰æ¯”åŸå§‹ç‰ˆæœ¬æ›´ç®€å•ã€æ›´å¿«ã€‚ç³»ç»Ÿçš„è®¾è®¡åŠ ä¸Šç»†è‡´çš„ä¿®è®¢æ˜¯å€¼å¾—çš„ï¼›æµ‹è¯•å¥—ä»¶ç¡®ä¿ä¿®è®¢ä¸ä¼šç ´åç¨‹åºçš„åŠŸèƒ½ã€‚
- en: ExerciseÂ 408\. Design the function select. It consumes a database, a list of
    labels, and a predicate on rows. The result is a list of rows that satisfy the
    given predicate, projected down to the given set of labels.
  id: totrans-2230
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 408ã€‚è®¾è®¡selectå‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªæ•°æ®åº“ã€ä¸€ä¸ªæ ‡ç­¾åˆ—è¡¨å’Œä¸€ä¸ªè¡Œè°“è¯ã€‚ç»“æœæ˜¯æ»¡è¶³ç»™å®šè°“è¯çš„è¡Œçš„åˆ—è¡¨ï¼ŒæŠ•å½±åˆ°ç»™å®šçš„æ ‡ç­¾é›†åˆã€‚
- en: ExerciseÂ 409\. Design reorder. The function consumes a database db and list
    lol of [Label](#%28tech._db._label%29)s. It produces a database like db but with
    its columns reordered according to lol. Hint Read up on [list-ref](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list-ref%29%29).
  id: totrans-2231
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 409ã€‚è®¾è®¡é‡æ’å‡½æ•°ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªæ•°æ®åº“dbå’Œæ ‡ç­¾åˆ—è¡¨lolã€‚å®ƒäº§ç”Ÿä¸€ä¸ªç±»ä¼¼äºdbçš„æ•°æ®åº“ï¼Œä½†å…¶åˆ—çš„é¡ºåºæ ¹æ®lolè¿›è¡Œæ’åºã€‚æç¤ºï¼šæŸ¥é˜…[list-ref](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list-ref%29%29)ã€‚
- en: At first assume that lol consists exactly of the labels of dbâ€™s columns. Once
    you have completed the design, study what has to be changed if lol contains fewer
    labels than there are columns and strings that are not labels of a column in db.
  id: totrans-2232
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åˆå‡è®¾lolæ°å¥½åŒ…å«dbåˆ—çš„æ ‡ç­¾ã€‚ä¸€æ—¦ä½ å®Œæˆäº†è®¾è®¡ï¼Œç ”ç©¶å¦‚æœlolåŒ…å«çš„æ ‡ç­¾å°‘äºåˆ—æ•°ï¼Œä»¥åŠdbä¸­ä¸æ˜¯åˆ—æ ‡ç­¾çš„å­—ç¬¦ä¸²éœ€è¦åšå‡ºå“ªäº›æ”¹å˜ã€‚
- en: ExerciseÂ 410\. Design the function db-union, which consumes two databases with
    the exact same schema and produces a new database with this schema and the joint
    content of both. The function must eliminate rows with the exact same content.
  id: totrans-2233
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 410ã€‚è®¾è®¡db-unionå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¶ˆè€—å…·æœ‰ç›¸åŒæ¨¡å¼çš„ä¸¤ä¸ªæ•°æ®åº“ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªå…·æœ‰æ­¤æ¨¡å¼ä¸”åŒ…å«ä¸¤ä¸ªæ•°æ®åº“è”åˆå†…å®¹çš„æ–°çš„æ•°æ®åº“ã€‚è¯¥å‡½æ•°å¿…é¡»æ¶ˆé™¤å…·æœ‰å®Œå…¨ç›¸åŒå†…å®¹çš„è¡Œã€‚
- en: Assume that the schemas agree on the predicates for each column.
  id: totrans-2234
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æ¨¡å¼åœ¨æ¯åˆ—çš„è°“è¯ä¸Šæ˜¯ä¸€è‡´çš„ã€‚
- en: 'ExerciseÂ 411\. Design join, a function that consumes two databases: db-1 and
    db-2. The schema of db-2 starts with the exact same [Spec](#%28tech._db._spec%29)
    that the schema of db-1 ends in. The function creates a database from db-1 by
    replacing the last cell in each row with the translation of the cell in db-2.'
  id: totrans-2235
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 411ã€‚è®¾è®¡joinå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¶ˆè€—ä¸¤ä¸ªæ•°æ®åº“ï¼šdb-1å’Œdb-2ã€‚db-2çš„æ¨¡å¼ä»ä¸db-1çš„æ¨¡å¼ç»“æŸçš„ç›¸åŒçš„[Spec](#%28tech._db._spec%29)å¼€å§‹ã€‚è¯¥å‡½æ•°é€šè¿‡ç”¨db-2ä¸­çš„å•å…ƒæ ¼çš„ç¿»è¯‘æ›¿æ¢db-1ä¸­æ¯è¡Œçš„æœ€åä¸€ä¸ªå•å…ƒæ ¼æ¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ã€‚
- en: 'Here is an example. Take the databases in [figureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29).
    The two satisfy the assumption of these exercises, that is, the last [Spec](#%28tech._db._spec%29)
    in the schema of the first is equal to the first [Spec](#%28tech._db._spec%29)
    of the second. Hence it is possible to join them:'
  id: totrans-2236
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚å–è‡ª[å›¾137](#%28counter._db._%28figure._fig~3adb-tables%29%29)ä¸­çš„æ•°æ®åº“ã€‚è¿™ä¸¤ä¸ªæ•°æ®åº“æ»¡è¶³è¿™äº›ç»ƒä¹ çš„å‡è®¾ï¼Œå³ç¬¬ä¸€ä¸ªæ¨¡å¼ä¸­çš„æœ€åä¸€ä¸ª[Spec](#%28tech._db._spec%29)ç­‰äºç¬¬äºŒä¸ªæ¨¡å¼ä¸­çš„ç¬¬ä¸€ä¸ª[Spec](#%28tech._db._spec%29)ã€‚å› æ­¤ï¼Œå¯ä»¥å°†å®ƒä»¬è¿æ¥èµ·æ¥ï¼š
- en: '| Name |  | Age |  | Description |'
  id: totrans-2237
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Name |  | Age |  | Description |'
- en: '| [String](part_one.html#%28tech._string%29) |  | [Integer](part_one.html#%28tech._integer%29)
    |  | [String](part_one.html#%28tech._string%29) |'
  id: totrans-2238
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [String](part_one.html#%28tech._string%29) |  | [Integer](part_one.html#%28tech._integer%29)
    |  | [String](part_one.html#%28tech._string%29) |'
- en: '| "Alice" |  | 35 |  | "presence" |'
  id: totrans-2239
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Alice" |  | 35 |  | "presence" |'
- en: '| "Bob" |  | 25 |  | "absence" |'
  id: totrans-2240
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Bob" |  | 25 |  | "absence" |'
- en: '| "Carol" |  | 30 |  | "presence" |'
  id: totrans-2241
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Carol" |  | 30 |  | "presence" |'
- en: '| "Dave" |  | 32 |  | "absence" |'
  id: totrans-2242
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Dave" |  | 32 |  | "absence" |'
- en: 'Its translation maps #true to "presence" and #false to "absence".'
  id: totrans-2243
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ç¿»è¯‘å°†#trueæ˜ å°„åˆ°â€œå­˜åœ¨â€ï¼Œå°†#falseæ˜ å°„åˆ°â€œä¸å­˜åœ¨â€ã€‚
- en: Hints (1) In general, the second database may â€œtranslateâ€ a cell to a row of
    values, not just one value. Modify the example by adding additional terms to the
    row for "presence" and "absence".
  id: totrans-2244
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼ˆ1ï¼‰é€šå¸¸æƒ…å†µä¸‹ï¼Œç¬¬äºŒä¸ªæ•°æ®åº“å¯èƒ½å°†ä¸€ä¸ªå•å…ƒæ ¼â€œç¿»è¯‘â€ä¸ºå¤šä¸ªå€¼çš„è¡Œï¼Œè€Œä¸ä»…ä»…æ˜¯å•ä¸ªå€¼ã€‚é€šè¿‡åœ¨è¡Œä¸­æ·»åŠ â€œå­˜åœ¨â€å’Œâ€œä¸å­˜åœ¨â€ç­‰é¢å¤–æœ¯è¯­æ¥ä¿®æ”¹ç¤ºä¾‹ã€‚
- en: '(2) It may also â€œtranslateâ€ a cell to several rows, in which case the process
    adds several rows to the new database. Here is a second example, a slightly different
    pair of databases from those in [figureÂ 137](#%28counter._db._%28figure._fig~3adb-tables%29%29):'
  id: totrans-2245
  prefs: []
  type: TYPE_NORMAL
  zh: ï¼ˆ2ï¼‰å®ƒä¹Ÿå¯èƒ½å°†ä¸€ä¸ªå•å…ƒæ ¼â€œç¿»è¯‘â€ä¸ºå¤šè¡Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥è¿‡ç¨‹å°†å‘æ–°æ•°æ®åº“æ·»åŠ å¤šè¡Œã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¬¬äºŒä¸ªç¤ºä¾‹ï¼Œæ¥è‡ª[å›¾137](#%28counter._db._%28figure._fig~3adb-tables%29%29)ä¸­çš„ä¸åŒçš„ä¸€å¯¹æ•°æ®åº“ï¼š
- en: '|'
  id: totrans-2246
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-2247
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Name &#124;  &#124; Age &#124;  &#124; Present &#124;'
  id: totrans-2248
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Name &#124;  &#124; Age &#124;  &#124; Present &#124;'
- en: '&#124; [String](part_one.html#%28tech._string%29) &#124;  &#124; [Integer](part_one.html#%28tech._integer%29)
    &#124;  &#124; [Boolean](part_one.html#%28tech._boolean%29) &#124;'
  id: totrans-2249
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; [String](part_one.html#%28tech._string%29) &#124;  &#124; [Integer](part_one.html#%28tech._integer%29)
    &#124;  &#124; [Boolean](part_one.html#%28tech._boolean%29) &#124;'
- en: '&#124; "Alice" &#124;  &#124; 35 &#124;  &#124; #true &#124;'
  id: totrans-2250
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Alice" &#124;  &#124; 35 &#124;  &#124; #true &#124;'
- en: '&#124; "Bob" &#124;  &#124; 25 &#124;  &#124; #false &#124;'
  id: totrans-2251
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Bob" &#124;  &#124; 25 &#124;  &#124; #false &#124;'
- en: '&#124; "Carol" &#124;  &#124; 30 &#124;  &#124; #true &#124;'
  id: totrans-2252
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Carol" &#124;  &#124; 30 &#124;  &#124; #true &#124;'
- en: '&#124; "Dave" &#124;  &#124; 32 &#124;  &#124; #false &#124;'
  id: totrans-2253
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; "Dave" &#124;  &#124; 32 &#124;  &#124; #false &#124;'
- en: ''
  id: totrans-2254
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |  |  |'
  id: totrans-2255
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  |  |'
- en: ''
  id: totrans-2256
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Present &#124;  &#124; Description &#124;'
  id: totrans-2257
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Present &#124;  &#124; Description &#124;'
- en: '&#124; [Boolean](part_one.html#%28tech._boolean%29) &#124;  &#124; [String](part_one.html#%28tech._string%29)
    &#124;'
  id: totrans-2258
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| [å¸ƒå°”](part_one.html#%28tech._boolean%29) |  | [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)
    |  |'
- en: '&#124; #true &#124;  &#124; "presence" &#124;'
  id: totrans-2259
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| #true |  | "å­˜åœ¨" |  |'
- en: '&#124; #true &#124;  &#124; "here" &#124;'
  id: totrans-2260
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| #true |  | "è¿™é‡Œ" |  |'
- en: '&#124; #false &#124;  &#124; "absence" &#124;'
  id: totrans-2261
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| #false |  | "ä¸å­˜åœ¨" |  |'
- en: '&#124; #false &#124;  &#124; "there" &#124;'
  id: totrans-2262
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| #false |  | "é‚£é‡Œ" |  |'
- en: ''
  id: totrans-2263
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-2264
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: 'Joining the left database with the one on the right yields a database with
    eight rows:'
  id: totrans-2265
  prefs: []
  type: TYPE_NORMAL
  zh: å°†å·¦ä¾§æ•°æ®åº“ä¸å³ä¾§æ•°æ®åº“åˆå¹¶ï¼Œå¾—åˆ°ä¸€ä¸ªåŒ…å«å…«è¡Œçš„æ•°æ®åº“ï¼š
- en: '| Name |  | Age |  | Description |'
  id: totrans-2266
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| åç§° |  | å¹´é¾„ |  | æè¿° |'
- en: '| [String](part_one.html#%28tech._string%29) |  | [Integer](part_one.html#%28tech._integer%29)
    |  | [String](part_one.html#%28tech._string%29) |'
  id: totrans-2267
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) |  | [æ•´æ•°](part_one.html#%28tech._integer%29)
    |  | [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) |'
- en: '| "Alice" |  | 35 |  | "presence" |'
  id: totrans-2268
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Alice" |  | 35 |  | "å­˜åœ¨" |'
- en: '| "Alice" |  | 35 |  | "here" |'
  id: totrans-2269
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Alice" |  | 35 |  | "è¿™é‡Œ" |'
- en: '| "Bob" |  | 25 |  | "absence" |'
  id: totrans-2270
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Bob" |  | 25 |  | "ä¸å­˜åœ¨" |'
- en: '| "Bob" |  | 25 |  | "there" |'
  id: totrans-2271
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Bob" |  | 25 |  | "é‚£é‡Œ" |'
- en: '| "Carol" |  | 30 |  | "presence" |'
  id: totrans-2272
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Carol" |  | 30 |  | "å­˜åœ¨" |'
- en: '| "Carol" |  | 30 |  | "here" |'
  id: totrans-2273
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Carol" |  | 30 |  | "è¿™é‡Œ" |'
- en: '| "Dave" |  | 32 |  | "absence" |'
  id: totrans-2274
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Dave" |  | 32 |  | "ä¸å­˜åœ¨" |'
- en: '| "Dave" |  | 32 |  | "there" |'
  id: totrans-2275
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "Dave" |  | 32 |  | "é‚£é‡Œ" |'
- en: (3) Use iterative refinement to solve the problem. For the first iteration,
    assume that a â€œtranslationâ€ finds only one row per cell. For the second one, drop
    the assumption.
  id: totrans-2276
  prefs: []
  type: TYPE_NORMAL
  zh: (3) ä½¿ç”¨è¿­ä»£ç»†åŒ–æ¥è§£å†³è¯¥é—®é¢˜ã€‚å¯¹äºç¬¬ä¸€æ¬¡è¿­ä»£ï¼Œå‡è®¾â€œç¿»è¯‘â€åœ¨æ¯ä¸ªå•å…ƒæ ¼ä¸­åªæ‰¾åˆ°ä¸€è¡Œã€‚å¯¹äºç¬¬äºŒæ¬¡è¿­ä»£ï¼Œæ”¾å¼ƒè¿™ä¸ªå‡è®¾ã€‚
- en: Note on Assumptions This exercise and the entire section mostly rely on informally
    stated assumptions about the given databases. Here, the design of join assumes
    that â€œthe schema of db-2 starts with the exact same [Spec](#%28tech._db._spec%29)
    that the schema of db-1 ends in.â€ In reality, database functions must be checked
    functions in the spirit of [Input Errors](part_one.html#%28part._sec~3ainput-errors%29).
    Designing checked-join would be impossible for you, however. A comparison of the
    last [Spec](#%28tech._db._spec%29) in the schema of db-1 with the first one in
    db-2 calls for a comparison of functions. For practical solutions, see a text
    on databases.
  id: totrans-2277
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºå‡è®¾çš„è¯´æ˜ï¼šæœ¬ç»ƒä¹ å’Œæ•´ä¸ªéƒ¨åˆ†ä¸»è¦ä¾èµ–äºå¯¹ç»™å®šæ•°æ®åº“çš„éæ­£å¼é™ˆè¿°å‡è®¾ã€‚åœ¨è¿™é‡Œï¼Œè¿æ¥çš„è®¾è®¡å‡è®¾â€œdb-2çš„æ¨¡å¼ä»ä¸db-1çš„æ¨¡å¼ç»“æŸçš„ç²¾ç¡®ç›¸åŒçš„[è§„èŒƒ](#%28tech._db._spec%29)å¼€å§‹ã€‚â€åœ¨ç°å®ä¸­ï¼Œæ•°æ®åº“å‡½æ•°å¿…é¡»æ˜¯æ£€æŸ¥å‡½æ•°ï¼Œç²¾ç¥ä¸Šç±»ä¼¼äº[è¾“å…¥é”™è¯¯](part_one.html#%28part._sec~3ainput-errors%29)ã€‚ç„¶è€Œï¼Œè®¾è®¡æ£€æŸ¥è¿æ¥å¯¹æ‚¨æ¥è¯´æ˜¯ä¸å¯èƒ½çš„ã€‚db-1æ¨¡å¼ä¸­çš„æœ€åä¸€ä¸ª[è§„èŒƒ](#%28tech._db._spec%29)ä¸db-2ä¸­çš„ç¬¬ä¸€ä¸ªè§„èŒƒçš„æ¯”è¾ƒéœ€è¦æ¯”è¾ƒå‡½æ•°ã€‚å¯¹äºå®é™…è§£å†³æ–¹æ¡ˆï¼Œè¯·å‚é˜…æ•°æ®åº“æ–¹é¢çš„ä¹¦ç±ã€‚
- en: 24Summary[ğŸ”—](#(part._ch~3asummary4) "Link to here")
  id: totrans-2278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 24æ€»ç»“[ğŸ”—](#(part._ch~3asummary4) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'This fourth part of the book is about the design of functions that process
    data whose description requires many intertwined definitions. These forms of data
    show up everywhere in the real world, from your computerâ€™s local file system to
    the world wide web and geometric shapes used in animated movies. After working
    through this part of the book carefully, you know that the design recipe scales
    to these forms of data, too:'
  id: totrans-2279
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ä¹¦ç¬¬å››éƒ¨åˆ†æ˜¯å…³äºè®¾è®¡å¤„ç†æ•°æ®çš„åŠŸèƒ½ï¼Œè¿™äº›æ•°æ®çš„æè¿°éœ€è¦è®¸å¤šç›¸äº’äº¤ç»‡çš„å®šä¹‰ã€‚è¿™äº›å½¢å¼çš„æ•°æ®åœ¨ç°å®ä¸–ç•Œä¸­æ— å¤„ä¸åœ¨ï¼Œä»æ‚¨è®¡ç®—æœºçš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿåˆ°ä¸‡ç»´ç½‘ï¼Œä»¥åŠåŠ¨ç”»ç”µå½±ä¸­ä½¿ç”¨çš„å‡ ä½•å½¢çŠ¶ã€‚ä»”ç»†ç ”è¯»æœ¬ä¹¦çš„è¿™ä¸€éƒ¨åˆ†åï¼Œæ‚¨ä¼šçŸ¥é“è®¾è®¡é…æ–¹ä¹Ÿé€‚ç”¨äºè¿™äº›å½¢å¼çš„æ•°æ®ï¼š
- en: When the description of program data calls for several mutually referential
    data definitions, the design recipe calls for the simultaneous development of
    templates, one per data definition. If a data definition A refers to a data definition
    B, then the template function-for-A refers to function-for-B in the exact same
    place and manner. Otherwise the design recipes work as before, function for function.
  id: totrans-2280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å½“ç¨‹åºæ•°æ®çš„æè¿°éœ€è¦å‡ ä¸ªç›¸äº’å¼•ç”¨çš„æ•°æ®å®šä¹‰æ—¶ï¼Œè®¾è®¡é…æ–¹è¦æ±‚åŒæ—¶å¼€å‘æ¨¡æ¿ï¼Œæ¯ä¸ªæ•°æ®å®šä¹‰ä¸€ä¸ªæ¨¡æ¿ã€‚å¦‚æœæ•°æ®å®šä¹‰Aå¼•ç”¨æ•°æ®å®šä¹‰Bï¼Œé‚£ä¹ˆæ¨¡æ¿å‡½æ•°-for-Aåœ¨å®Œå…¨ç›¸åŒçš„ä½ç½®å’Œæ–¹å¼ä¸Šå¼•ç”¨å‡½æ•°-for-Bã€‚å¦åˆ™ï¼Œè®¾è®¡é…æ–¹åƒä»¥å‰ä¸€æ ·ï¼Œå‡½æ•°å¯¹å‡½æ•°ã€‚
- en: When a function has to process two types of complex data, you need to distinguish
    three cases. First, the function may deal with one of the arguments as if it were
    atomic. Second, the two arguments are expected to have the exact same structure,
    and the function traverses them in a completely parallel manner. Third, the function
    may have to deal with all possible combinations separately. In this case, you
    make a two-dimensional table that along one dimension enumerates all kinds of
    data from one data definition and along the other one deals with the second kind
    of data. Finally you use the tableâ€™s cells to formulate conditions and answers
    for the various cases.
  id: totrans-2281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å½“ä¸€ä¸ªå‡½æ•°å¿…é¡»å¤„ç†ä¸¤ç§ç±»å‹çš„å¤æ•°æ•°æ®æ—¶ï¼Œä½ éœ€è¦åŒºåˆ†ä¸‰ç§æƒ…å†µã€‚é¦–å…ˆï¼Œå‡½æ•°å¯èƒ½å°†å…¶ä¸­ä¸€ä¸ªå‚æ•°è§†ä¸ºåŸå­ã€‚å…¶æ¬¡ï¼Œä¸¤ä¸ªå‚æ•°é¢„æœŸå…·æœ‰å®Œå…¨ç›¸åŒçš„ç»“æ„ï¼Œå‡½æ•°ä»¥å®Œå…¨å¹¶è¡Œçš„æ–¹å¼éå†å®ƒä»¬ã€‚ç¬¬ä¸‰ï¼Œå‡½æ•°å¯èƒ½å¿…é¡»åˆ†åˆ«å¤„ç†æ‰€æœ‰å¯èƒ½çš„ç»„åˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åˆ¶ä½œä¸€ä¸ªäºŒç»´è¡¨æ ¼ï¼Œå…¶ä¸­ä¸€ä¸ªç»´åº¦åˆ—ä¸¾äº†æ¥è‡ªä¸€ä¸ªæ•°æ®å®šä¹‰çš„æ‰€æœ‰ç§ç±»çš„æ•°æ®ï¼Œå¦ä¸€ä¸ªç»´åº¦å¤„ç†ç¬¬äºŒç§æ•°æ®ã€‚æœ€åï¼Œä½ ä½¿ç”¨è¡¨æ ¼çš„å•å…ƒæ ¼æ¥ä¸ºå„ç§æƒ…å†µåˆ¶å®šæ¡ä»¶å’Œç­”æ¡ˆã€‚
- en: This part of the book deals with functions on two complex arguments. If you
    ever encounter one of those rare cases where a function receives three complex
    pieces of data, you know you need (to imagine) a three-dimensional table.
  id: totrans-2282
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™æœ¬ä¹¦çš„è¿™ä¸€éƒ¨åˆ†è®¨è®ºäº†ä¸¤ä¸ªå¤æ•°å‚æ•°ä¸Šçš„å‡½æ•°ã€‚å¦‚æœä½ æ›¾ç»é‡åˆ°è¿‡é‚£ç§ç½•è§çš„æƒ…å†µï¼Œå³ä¸€ä¸ªå‡½æ•°æ¥æ”¶ä¸‰ä¸ªå¤æ•°æ•°æ®ï¼Œä½ å°±çŸ¥é“ä½ éœ€è¦ï¼ˆæƒ³è±¡ï¼‰ä¸€ä¸ªä¸‰ç»´è¡¨æ ¼ã€‚
- en: You have now seen all forms of structural data that you are likely to encounter
    over the course of your career, though the details will differ. If you are ever
    stuck, remember the design recipe; it will get you started.
  id: totrans-2283
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ ç°åœ¨å·²ç»çœ‹åˆ°äº†ä½ å¯èƒ½åœ¨èŒä¸šç”Ÿæ¶¯ä¸­é‡åˆ°çš„æ‰€æœ‰ç»“æ„åŒ–æ•°æ®å½¢å¼ï¼Œå°½ç®¡ç»†èŠ‚ä¼šæœ‰æ‰€ä¸åŒã€‚å¦‚æœä½ é‡åˆ°å›°éš¾ï¼Œè¯·è®°ä½è®¾è®¡é…æ–¹ï¼›å®ƒå°†å¸®åŠ©ä½ å¼€å§‹ã€‚
