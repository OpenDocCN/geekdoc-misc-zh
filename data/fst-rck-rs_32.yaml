- en: Regular Expressions
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 正则表达式
- en: 原文：[https://freddiehaddad.github.io/fast-track-to-rust/regular_expression.html](https://freddiehaddad.github.io/fast-track-to-rust/regular_expression.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://freddiehaddad.github.io/fast-track-to-rust/regular_expression.html](https://freddiehaddad.github.io/fast-track-to-rust/regular_expression.html)
- en: With the `Regex` crate added to our project, we'll replace the `pattern` string
    slice we've been using with a regular expression.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的项目中添加了`Regex`包后，我们将用正则表达式替换我们一直在使用的`pattern`字符串切片。
- en: '[Using Regex](#using-regex)'
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[使用正则表达式](#using-regex)'
- en: The `Regex` modules defines a `new` method that takes a regular expression,
    attempts to compile it, and returns a `Regex` object.^([1](#footnote-1))
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '`Regex`模块定义了一个`new`方法，该方法接受一个正则表达式，尝试编译它，并返回一个`Regex`对象.^([1](#footnote-1))'
- en: '[PRE0]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Since compiling a regular expression can fail (e.g., due to an invalid pattern),
    `new` returns a `Result`. Here is the function signature for `new`^([2](#footnote-2)):'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 由于编译正则表达式可能会失败（例如，由于无效的模式），`new`返回一个`Result`。以下是`new`函数的签名^([2](#footnote-2))：
- en: '[PRE1]'
  id: totrans-7
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The function signature indicates that the `Ok` variant returns a `Regex`, while
    the `Err` variant returns an `Error`. Since our rustle program can't continue
    with an invalid regular expression, we need to catch that case, display a helpful
    error message, and exit the program.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 函数签名表明，`Ok`变体返回一个`Regex`，而`Err`变体返回一个`Error`。由于我们的rustle程序不能继续使用无效的正则表达式，我们需要捕获这种情况，显示一个有用的错误消息，并退出程序。
- en: 'Let''s put all this together:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们把所有这些放在一起：
- en: '[PRE2]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Run the code to see the error. Then, correct the it by adding the missing parenthesis
    `)` and re-run the code.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 运行代码以查看错误。然后，通过添加缺失的括号`()`来纠正它，并重新运行代码。
- en: '[Updating Rustle](#updating-rustle)'
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[更新Rustle](#updating-rustle)'
- en: 'We now have enough context to modify our rustle program to include regular
    expression support. Below are the changes, with the unrelated parts of the program
    hidden:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有足够的上下文来修改我们的rustle程序以包含正则表达式支持。以下是更改内容，其中与程序无关的部分被隐藏：
- en: '[PRE3]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Don't forget, you can reveal the hidden parts by clicking *Show hidden lines*.
  id: totrans-15
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 不要忘记，你可以通过点击*显示隐藏行*来揭示隐藏的部分。
- en: 'The `let regex = match Regex::new(pattern)` variable binding expression might
    seem a bit unusual. The pattern is discussed in the Rust documentation section
    on [Recoverable Errors with Result](https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html#recoverable-errors-with-result).
    To briefly explain: When the result is `Ok`, this code extracts the inner `re`
    value from the `Ok` variant and moves it to the variable `regex`.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '`let regex = match Regex::new(pattern)`变量绑定表达式可能看起来有点不寻常。模式在Rust文档的[使用Result恢复错误](https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html#recoverable-errors-with-result)部分进行了讨论。简要解释一下：当结果是`Ok`时，此代码从`Ok`变体中提取内层的`re`值并将其移动到变量`regex`。'
- en: '[Next](#next)'
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '[下一步](#next)'
- en: Onward to creating our own module!
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们创建自己的模块！
- en: '* * *'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: The `Regex` crate includes excellent [documentation](https://docs.rs/regex/latest/regex/)
    and detailed [examples](https://docs.rs/regex/latest/regex/#examples) to learn
    from. [↩](#fr-1-1)
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Regex`包包括优秀的[文档](https://docs.rs/regex/latest/regex/)和详细的[示例](https://docs.rs/regex/latest/regex/#examples)供学习。
    [↩](#fr-1-1)'
- en: The source code for `new` can be found [here](https://docs.rs/regex/latest/src/regex/regex/string.rs.html#180-182).
    [↩](#fr-2-1)
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`new`的源代码可以在[这里](https://docs.rs/regex/latest/src/regex/regex/string.rs.html#180-182)找到。
    [↩](#fr-2-1)'
