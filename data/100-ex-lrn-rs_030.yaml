- en: Operator overloading
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运算符重载
- en: 原文：[https://rust-exercises.com/100-exercises/04_traits/03_operator_overloading.html](https://rust-exercises.com/100-exercises/04_traits/03_operator_overloading.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://rust-exercises.com/100-exercises/04_traits/03_operator_overloading.html](https://rust-exercises.com/100-exercises/04_traits/03_operator_overloading.html)
- en: Now that we have a basic understanding of what traits are, let's circle back
    to **operator overloading**. Operator overloading is the ability to define custom
    behavior for operators like `+`, `-`, `*`, `/`, `==`, `!=`, etc.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们对特质有了基本了解，让我们回到**运算符重载**。运算符重载是定义像`+`、`-`、`*`、`/`、`==`、`!=`等运算符自定义行为的特性。
- en: '[Operators are traits](#operators-are-traits)'
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[运算符是特质](#operators-are-traits)'
- en: In Rust, operators are traits.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在Rust中，运算符是特质。
- en: For each operator, there is a corresponding trait that defines the behavior
    of that operator. By implementing that trait for your type, you **unlock** the
    usage of the corresponding operators.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个运算符，都有一个对应的特质定义了该运算符的行为。通过为你的类型实现该特质，你可以**解锁**使用相应的运算符。
- en: 'For example, the [`PartialEq` trait](https://doc.rust-lang.org/std/cmp/trait.PartialEq.html)
    defines the behavior of the `==` and `!=` operators:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，`[`PartialEq` trait](https://doc.rust-lang.org/std/cmp/trait.PartialEq.html)`定义了`==`和`!=`运算符的行为：
- en: '[PRE0]'
  id: totrans-7
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: When you write `x == y` the compiler will look for an implementation of the
    `PartialEq` trait for the types of `x` and `y` and replace `x == y` with `x.eq(y)`.
    It's syntactic sugar!
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 当你写`x == y`时，编译器会寻找`x`和`y`类型的`PartialEq`特质的实现，并将`x == y`替换为`x.eq(y)`。这是一种语法糖！
- en: 'This is the correspondence for the main operators:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 这是主要运算符的对应关系：
- en: '| Operator | Trait |'
  id: totrans-10
  prefs: []
  type: TYPE_TB
  zh: '| 运算符 | 特质 |'
- en: '| --- | --- |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `+` | [`Add`](https://doc.rust-lang.org/std/ops/trait.Add.html) |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| `+` | [`Add`](https://doc.rust-lang.org/std/ops/trait.Add.html) |'
- en: '| `-` | [`Sub`](https://doc.rust-lang.org/std/ops/trait.Sub.html) |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| `-` | [`Sub`](https://doc.rust-lang.org/std/ops/trait.Sub.html) |'
- en: '| `*` | [`Mul`](https://doc.rust-lang.org/std/ops/trait.Mul.html) |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| `*` | [`Mul`](https://doc.rust-lang.org/std/ops/trait.Mul.html) |'
- en: '| `/` | [`Div`](https://doc.rust-lang.org/std/ops/trait.Div.html) |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| `/` | [`Div`](https://doc.rust-lang.org/std/ops/trait.Div.html) |'
- en: '| `%` | [`Rem`](https://doc.rust-lang.org/std/ops/trait.Rem.html) |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| `%` | [`Rem`](https://doc.rust-lang.org/std/ops/trait.Rem.html) |'
- en: '| `==` and `!=` | [`PartialEq`](https://doc.rust-lang.org/std/cmp/trait.PartialEq.html)
    |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| `==`和`!=` | [`PartialEq`](https://doc.rust-lang.org/std/cmp/trait.PartialEq.html)
    |'
- en: '| `<`, `>`, `<=`, and `>=` | [`PartialOrd`](https://doc.rust-lang.org/std/cmp/trait.PartialOrd.html)
    |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| `<`, `>`, `<=`, 和 `>=` | [`PartialOrd`](https://doc.rust-lang.org/std/cmp/trait.PartialOrd.html)
    |'
- en: Arithmetic operators live in the [`std::ops`](https://doc.rust-lang.org/std/ops/index.html)
    module, while comparison ones live in the [`std::cmp`](https://doc.rust-lang.org/std/cmp/index.html)
    module.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 算术运算符位于`[`std::ops`](https://doc.rust-lang.org/std/ops/index.html)模块中，而比较运算符位于`[`std::cmp`](https://doc.rust-lang.org/std/cmp/index.html)模块中。
- en: '[Default implementations](#default-implementations)'
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[默认实现](#default-implementations)'
- en: The comment on `PartialEq::ne` states that "`ne` is a provided method".
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '`PartialEq::ne`的注释说明"`ne`是一个提供的方法"。'
- en: It means that `PartialEq` provides a **default implementation** for `ne` in
    the trait definition—the `{ ... }` elided block in the definition snippet.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着`PartialEq`在特质定义中为`ne`提供了**默认实现**——定义片段中的省略的`{ ... }`块。
- en: 'If we expand the elided block, it looks like this:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你展开省略的块，它看起来像这样：
- en: '[PRE1]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'It''s what you expect: `ne` is the negation of `eq`.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这正是你所期望的：`ne`是`eq`的否定。
- en: 'Since a default implementation is provided, you can skip implementing `ne`
    when you implement `PartialEq` for your type. It''s enough to implement `eq`:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 由于提供了默认实现，当你为你的类型实现`PartialEq`时，可以跳过实现`ne`。只需要实现`eq`即可。
- en: '[PRE2]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'You are not forced to use the default implementation though. You can choose
    to override it when you implement the trait:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你不必使用默认实现，但你可以选择在实现特质时覆盖它：
- en: '[PRE3]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[Exercise](#exercise)'
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[练习](#exercise)'
- en: The exercise for this section is located in [`04_traits/03_operator_overloading`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/04_traits/03_operator_overloading)
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 本节练习位于`[`04_traits/03_operator_overloading`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/04_traits/03_operator_overloading)
