- en: 'Intermezzo 3: Scope and AbstractionğŸ”—'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: é—´å¥æ›² 3ï¼šä½œç”¨åŸŸå’ŒæŠ½è±¡ğŸ”—
- en: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/i3-4.html](https://htdp.org/2024-11-6/Book/i3-4.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/i3-4.html](https://htdp.org/2024-11-6/Book/i3-4.html)
- en: '| Â Â Â Â [Scope](#%28part._.Scope%29) |'
  id: totrans-2
  prefs: []
  type: TYPE_TB
  zh: '|   [ä½œç”¨åŸŸ](#%28part._.Scope%29) |'
- en: '| Â Â Â Â [ISL for Loops](#%28part._.I.S.L_for_.Loops%29) |'
  id: totrans-3
  prefs: []
  type: TYPE_TB
  zh: '|   [ISL for å¾ªç¯](#%28part._.I.S.L_for_.Loops%29) |'
- en: '| Â Â Â Â [Pattern Matching](#%28part._.Pattern_.Matching%29) |'
  id: totrans-4
  prefs: []
  type: TYPE_TB
  zh: '|   [æ¨¡å¼åŒ¹é…](#%28part._.Pattern_.Matching%29) |'
- en: While the preceding part gets away with explaining [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    and [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    in an informal manner, the introduction of such abstraction mechanisms really
    requires additional terminology to facilitate such discussions. In particular,
    these discussions need words to delineate regions within programs and to refer
    to specific uses of variables.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶å‰ä¸€éƒ¨åˆ†ä»¥éæ­£å¼çš„æ–¹å¼è§£é‡Šäº†[å±€éƒ¨å˜é‡](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)å’Œ[lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)ï¼Œä½†å¼•å…¥è¿™æ ·çš„æŠ½è±¡æœºåˆ¶ç¡®å®éœ€è¦é¢å¤–çš„æœ¯è¯­æ¥ä¿ƒè¿›è¿™æ ·çš„è®¨è®ºã€‚ç‰¹åˆ«æ˜¯ï¼Œè¿™äº›è®¨è®ºéœ€è¦è¯æ±‡æ¥ç•Œå®šç¨‹åºä¸­çš„åŒºåŸŸï¼Œå¹¶æŒ‡ä»£å˜é‡çš„ç‰¹å®šä½¿ç”¨ã€‚
- en: 'This intermezzo starts with a section that defines the new terminology: scope,
    binding variables, and bound variables. It immediately uses this new capability
    to introduce two abstraction mechanisms often found in programming languages:
    for loops and pattern matching. The former is an alternative to functions such
    as [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29),
    [build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29),
    [andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29),
    and the like; the latter abstracts over the conditional in the functions of the
    first three parts of the book. Both require not only the definition of functions
    but also the creation of entirely new language constructs, meaning they are not
    something programmers can usually design and add to their vocabulary.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™éƒ¨åˆ†é—´å¥æ›²é¦–å…ˆå®šä¹‰äº†æ–°çš„æœ¯è¯­ï¼šä½œç”¨åŸŸã€ç»‘å®šå˜é‡å’Œå·²ç»‘å®šå˜é‡ã€‚å®ƒç«‹å³ä½¿ç”¨è¿™ç§æ–°èƒ½åŠ›æ¥ä»‹ç»åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ç»å¸¸æ‰¾åˆ°çš„ä¸¤ä¸ªæŠ½è±¡æœºåˆ¶ï¼šfor å¾ªç¯å’Œæ¨¡å¼åŒ¹é…ã€‚å‰è€…æ˜¯[map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)ã€[build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)ã€[andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)ç­‰å‡½æ•°çš„æ›¿ä»£å“ï¼›åè€…æŠ½è±¡äº†ä¹¦ä¸­å‰ä¸‰ä¸ªéƒ¨åˆ†å‡½æ•°ä¸­çš„æ¡ä»¶è¯­å¥ã€‚ä¸¤è€…ä¸ä»…éœ€è¦å®šä¹‰å‡½æ•°ï¼Œè¿˜éœ€è¦åˆ›å»ºå…¨æ–°çš„è¯­è¨€ç»“æ„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¸æ˜¯ç¨‹åºå‘˜é€šå¸¸å¯ä»¥è®¾è®¡å’Œæ·»åŠ åˆ°ä»–ä»¬è¯æ±‡ä¸­çš„ä¸œè¥¿ã€‚
- en: Scope[ğŸ”—](#(part._.Scope) "Link to here")
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ä½œç”¨åŸŸ[ğŸ”—](#(part._.Scope) "é“¾æ¥è‡³æ­¤")
- en: 'Consider the following two definitions:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘ä»¥ä¸‹ä¸¤ä¸ªå®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fÂ x)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ x)Â 25))
    |'
  id: totrans-9
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (f x) ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    x x) 25)) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gÂ x)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (fÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 1))Â (fÂ ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â xÂ 1))))
    |'
  id: totrans-10
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gÂ x)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (fÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 1))Â (fÂ ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â xÂ 1))))
    |'
- en: Clearly, the occurrences of x in f are completely unrelated to the occurrences
    of x in the definition of g. We could systematically replace the shaded occurrences
    with y and the function would still compute the exact same result. In short, the
    shaded occurrences of x have meaning only inside the definition of f and nowhere
    else.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç„¶ï¼Œf ä¸­ x çš„å‡ºç°ä¸ g å®šä¹‰ä¸­ x çš„å‡ºç°å®Œå…¨æ— å…³ã€‚æˆ‘ä»¬å¯ä»¥ç³»ç»Ÿåœ°ç”¨ y æ›¿æ¢é˜´å½±éƒ¨åˆ†çš„å‡ºç°ï¼Œå‡½æ•°ä»ç„¶ä¼šè®¡ç®—å‡ºå®Œå…¨ç›¸åŒçš„ç»“æœã€‚ç®€è€Œè¨€ä¹‹ï¼Œé˜´å½±éƒ¨åˆ†
    x çš„æ„ä¹‰ä»…é™äº f çš„å®šä¹‰å†…éƒ¨ï¼Œè€Œä¸åœ¨å…¶ä»–ä»»ä½•åœ°æ–¹ã€‚
- en: At the same time, the first occurrence of x in f is different from the others.
    When we evaluate (f  n), the occurrence of f completely disappears while those
    of x are replaced with n. To distinguish these two kinds of variable occurrences,
    we call the x in the function header a binding occurrence and those in the functionâ€™s
    body the bound occurrences. We also say that the binding occurrence of x binds
    all occurrences of x in the body of f. Indeed, people who study programming languages
    even have a name for the region where a binding occurrence works, namely, its
    lexical scope.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ—¶ï¼Œf ä¸­ x çš„ç¬¬ä¸€æ¬¡å‡ºç°ä¸å…¶ä»–çš„ä¸åŒã€‚å½“æˆ‘ä»¬è¯„ä¼° (f  n) æ—¶ï¼Œf çš„å‡ºç°å®Œå…¨æ¶ˆå¤±ï¼Œè€Œ x çš„å‡ºç°è¢« n æ›¿æ¢ã€‚ä¸ºäº†åŒºåˆ†è¿™ä¸¤ç§å˜é‡å‡ºç°ï¼Œæˆ‘ä»¬ç§°å‡½æ•°å¤´éƒ¨çš„
    x ä¸ºç»‘å®šå‡ºç°ï¼Œè€Œå‡½æ•°ä½“å†…çš„é‚£äº›ä¸ºå·²ç»‘å®šå‡ºç°ã€‚æˆ‘ä»¬è¿˜è¯´ï¼Œx çš„ç»‘å®šå‡ºç°å°† f çš„ä½“å†…çš„æ‰€æœ‰ x çš„å‡ºç°ç»‘å®šèµ·æ¥ã€‚å®é™…ä¸Šï¼Œç ”ç©¶ç¼–ç¨‹è¯­è¨€çš„äººç”šè‡³ç»™ç»‘å®šå‡ºç°èµ·äº†ä¸€ä¸ªåå­—ï¼Œé‚£å°±æ˜¯å®ƒçš„è¯æ±‡ä½œç”¨åŸŸã€‚
- en: 'The definitions of f and g bind two more names: f and g. Their scope is called
    top-level scope because we think of scopes as nested (see below).'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: f å’Œ g çš„å®šä¹‰ç»‘å®šäº†ä¸¤ä¸ªæ›´å¤šçš„åç§°ï¼šf å’Œ gã€‚å®ƒä»¬çš„èŒƒå›´è¢«ç§°ä¸ºé¡¶çº§ä½œç”¨åŸŸï¼Œå› ä¸ºæˆ‘ä»¬æŠŠä½œç”¨åŸŸæƒ³è±¡æˆåµŒå¥—çš„ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚
- en: 'The term free occurrence applies to a variable without any binding occurrence.
    It is a name without definition, that is, neither the language nor its teachpacks
    nor the program associates it with some value. For example, if you were to put
    the above program into a definitions area by itself and run it, entering f, g,
    and x at the prompt of the interactions would show that the first two are defined
    and the last one is not:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: è‡ªç”±å‡ºç°è¿™ä¸ªæœ¯è¯­é€‚ç”¨äºæ²¡æœ‰ä»»ä½•ç»‘å®šå‡ºç°çš„å˜é‡ã€‚å®ƒæ˜¯ä¸€ä¸ªæ²¡æœ‰å®šä¹‰çš„åå­—ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ—¢ä¸æ˜¯è¯­è¨€ä¹Ÿä¸æ˜¯å…¶æ•™å­¦åŒ…ï¼Œä¹Ÿä¸æ˜¯ç¨‹åºå°†å…¶ä¸æŸä¸ªå€¼å…³è”èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æŠŠä¸Šé¢çš„ç¨‹åºå•ç‹¬æ”¾å…¥å®šä¹‰åŒºåŸŸå¹¶è¿è¡Œå®ƒï¼Œåœ¨äº¤äº’å¼æç¤ºç¬¦ä¸­è¾“å…¥
    fã€g å’Œ xï¼Œä¼šæ˜¾ç¤ºå‰ä¸¤ä¸ªæ˜¯å·²å®šä¹‰çš„ï¼Œè€Œæœ€åä¸€ä¸ªæ˜¯æ²¡æœ‰å®šä¹‰çš„ï¼š
- en: '| > f |'
  id: totrans-15
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > f |'
- en: '| f |'
  id: totrans-16
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| f |'
- en: '| > g |'
  id: totrans-17
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > g |'
- en: '| g |'
  id: totrans-18
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| g |'
- en: '| > x |'
  id: totrans-19
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > x |'
- en: '| x:this variable is not defined |'
  id: totrans-20
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| x:è¿™ä¸ªå˜é‡æœªå®šä¹‰ |'
- en: The description of lexical scope suggests a pictorial representation of fâ€™s
    definition:DrRacketâ€™s â€œCheck Syntaxâ€ functionality draws diagrams like these.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: è¯æ±‡ä½œç”¨åŸŸçš„æè¿°æš—ç¤ºäº† f çš„å®šä¹‰çš„å›¾ç¤ºè¡¨ç¤ºï¼šDrRacket çš„â€œæ£€æŸ¥è¯­æ³•â€åŠŸèƒ½ç»˜åˆ¶äº†è¿™æ ·çš„å›¾è¡¨ã€‚
- en: '![image](../Images/9ab65ed3adc2dc4bb497279cf3b65a8b.png)'
  id: totrans-22
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/9ab65ed3adc2dc4bb497279cf3b65a8b.png)'
- en: 'Here is an arrow diagram for top-level scope:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯é¡¶çº§ä½œç”¨åŸŸçš„ç®­å¤´å›¾ï¼š
- en: '![image](../Images/3d3e91c2cea8210f5721e9da11e8fb61.png)'
  id: totrans-24
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/3d3e91c2cea8210f5721e9da11e8fb61.png)'
- en: Note that the scope of f includes all definitions above and below its definition.
    The bullet over the first occurrence indicates that it is a binding occurrence.
    The arrows from the binding occurrence to the bound occurrences suggest the flow
    of values. When the value of a binding occurrence becomes known, the bound occurrences
    receive their values from there.Along similar lines, these diagrams also explain
    how renaming works. If you wish to rename a function parameter, you search for
    all bound occurrences in scope and replace them. For example, renaming fâ€™s x to
    y in the program above means that
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œf çš„ä½œç”¨åŸŸåŒ…æ‹¬å…¶å®šä¹‰ä¸Šæ–¹å’Œä¸‹æ–¹çš„æ‰€æœ‰å®šä¹‰ã€‚ç¬¬ä¸€ä¸ªå‡ºç°ä¸Šçš„ç‚¹è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç»‘å®šå‡ºç°ã€‚ä»ç»‘å®šå‡ºç°åˆ°ç»‘å®šå‡ºç°çš„ç®­å¤´è¡¨ç¤ºå€¼çš„æµåŠ¨ã€‚å½“ä¸€ä¸ªç»‘å®šå‡ºç°çš„å€¼å˜å¾—å·²çŸ¥æ—¶ï¼Œç»‘å®šå‡ºç°å°†ä»ä¸­æ¥æ”¶å®ƒä»¬çš„å€¼ã€‚ç±»ä¼¼åœ°ï¼Œè¿™äº›å›¾ä¹Ÿè§£é‡Šäº†é‡å‘½åçš„å·¥ä½œæ–¹å¼ã€‚å¦‚æœä½ æƒ³è¦é‡å‘½åä¸€ä¸ªå‡½æ•°å‚æ•°ï¼Œä½ å°†åœ¨ä½œç”¨åŸŸå†…æœç´¢æ‰€æœ‰ç»‘å®šå‡ºç°ï¼Œå¹¶å°†å®ƒä»¬æ›¿æ¢ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„ç¨‹åºä¸­å°†
    f çš„ x é‡å‘½åä¸º y æ„å‘³ç€
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fÂ x)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ x)Â 25))
    |'
  id: totrans-26
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fÂ x)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ x)Â 25))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gÂ x)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (fÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 1))Â (fÂ ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â xÂ 1))))
    |'
  id: totrans-27
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gÂ x)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (fÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 1))Â (fÂ ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â xÂ 1))))
    |'
- en: 'changes only two occurrences of x:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: ä»…æ›´æ”¹ x çš„ä¸¤ä¸ªå‡ºç°ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fÂ y)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â yÂ y)Â 25))
    |'
  id: totrans-29
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fÂ y)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â yÂ y)Â 25))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gÂ x)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (fÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 1))Â (fÂ ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â xÂ 1))))
    |'
  id: totrans-30
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gÂ x)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (fÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 1))Â (fÂ ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â xÂ 1))))
    |'
- en: 'ExerciseÂ 300\. Here is a simple ISL+ program:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  300ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ ISL+ ç¨‹åºï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (p1Â xÂ y)
    |'
  id: totrans-32
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (p1Â xÂ y)
    |'
- en: '| Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ y)
    |'
  id: totrans-33
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([åŠ ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([ä¹˜](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ y)
    |'
- en: '| Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 2Â x)
    |'
  id: totrans-34
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([åŠ ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([ä¹˜](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 2Â x)
    |'
- en: '| Â Â Â Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 2Â y)Â 22))))
    |'
  id: totrans-35
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â ([åŠ ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([ä¹˜](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 2Â y)Â 22))))
    |'
- en: '| Â  |'
  id: totrans-36
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (p2Â x)
    |'
  id: totrans-37
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (p2Â x)
    |'
- en: '| Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 55Â x)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 11)))
    |'
  id: totrans-38
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([åŠ ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([ä¹˜](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 55Â x)Â ([åŠ ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 11)))
    |'
- en: '| Â  |'
  id: totrans-39
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (p3Â x)
    |'
  id: totrans-40
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (p3Â x)
    |'
- en: '| Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (p1Â xÂ 0)
    |'
  id: totrans-41
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([åŠ ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (p1Â xÂ 0)
    |'
- en: '| Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (p1Â xÂ 1)Â (p2Â x))))
    |'
  id: totrans-42
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([åŠ ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (p1Â xÂ 1)Â (p2Â x))))
    |'
- en: 'Draw arrows from p1â€™s x parameter to all its bound occurrences. Draw arrows
    from p1 to all bound occurrences of p1. Check the results with DrRacketâ€™s CHECK
    SYNTAX functionality.In contrast to top-level function definitions, the scope
    of the definitions in a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    is limited. Specifically, the scope of local definitions is the [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    expression. Consider the definition of an auxiliary function f in a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    expression. It binds all occurrences within the [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    expression but none that occurs outside:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: ä» p1 çš„ x å‚æ•°ç”»ç®­å¤´åˆ°æ‰€æœ‰å…¶ç»‘å®šçš„å‡ºç°ã€‚ä» p1 ç”»ç®­å¤´åˆ° p1 æ‰€æœ‰ç»‘å®šçš„å‡ºç°ã€‚ä½¿ç”¨ DrRacket çš„ CHECK SYNTAX åŠŸèƒ½æ£€æŸ¥ç»“æœã€‚ä¸é¡¶å±‚å‡½æ•°å®šä¹‰ç›¸æ¯”ï¼Œ[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ä¸­å®šä¹‰çš„ä½œç”¨åŸŸæ˜¯æœ‰é™çš„ã€‚å…·ä½“æ¥è¯´ï¼Œå±€éƒ¨å®šä¹‰çš„ä½œç”¨åŸŸæ˜¯ [å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    è¡¨è¾¾å¼ã€‚è€ƒè™‘åœ¨ [å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    è¡¨è¾¾å¼ä¸­å®šä¹‰çš„è¾…åŠ©å‡½æ•° fã€‚å®ƒç»‘å®š [å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    è¡¨è¾¾å¼å†…çš„æ‰€æœ‰å‡ºç°ï¼Œä½†ä¸åœ¨å…¶å¤–éƒ¨å‡ºç°ï¼š
- en: '![image](../Images/10d7e686a8582483b1f16458a7f8119b.png)'
  id: totrans-44
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/10d7e686a8582483b1f16458a7f8119b.png)'
- en: 'The two occurrences outside of [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    are not bound by the local definition of f. As always, the parameters of a function
    definition, local or not, are only bound in the functionâ€™s body.Since the scope
    of a function name or a function parameter is a textual region, people also draw
    box diagrams to indicate scope. More precisely, for parameters a box is drawn
    around the body of a function:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ä¹‹å¤–çš„ä¸¤ä¸ªå‡ºç°ä¸å— f çš„å±€éƒ¨å®šä¹‰çš„çº¦æŸã€‚å§‹ç»ˆå¦‚ä¸€ï¼Œå‡½æ•°å®šä¹‰çš„å‚æ•°ï¼ˆæ— è®ºæ˜¯å¦å±€éƒ¨ï¼‰ä»…åœ¨å‡½æ•°ä½“ä¸­ç»‘å®šã€‚ç”±äºå‡½æ•°åæˆ–å‡½æ•°å‚æ•°çš„ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªæ–‡æœ¬åŒºåŸŸï¼Œäººä»¬ä¹Ÿç”»æ–¹æ¡†å›¾æ¥è¡¨ç¤ºä½œç”¨åŸŸã€‚æ›´ç²¾ç¡®åœ°è¯´ï¼Œå¯¹äºå‚æ•°ï¼Œæ–¹æ¡†ç”»åœ¨å‡½æ•°ä½“çš„å‘¨å›´ï¼š'
- en: '![image](../Images/85824ef33e52e8e6b0d76bca22b40504.png)'
  id: totrans-46
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/85824ef33e52e8e6b0d76bca22b40504.png)'
- en: 'In the case of [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29),
    the box is drawn around the entire expression:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ [å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    çš„æƒ…å†µä¸‹ï¼Œæ–¹æ¡†ç”»åœ¨æ•´ä¸ªè¡¨è¾¾å¼çš„å‘¨å›´ï¼š
- en: '![image](../Images/6742f654357c748c271420c2c51d4383.png)'
  id: totrans-48
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/6742f654357c748c271420c2c51d4383.png)'
- en: 'In this example, the box describes the scope of the definitions of f and g.Drawing
    a box around a scope, we can also easily understand what it means to reuse the
    name of a function inside a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    expression:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ–¹æ¡†æè¿°äº† f å’Œ g å®šä¹‰çš„èŒƒå›´ã€‚å›´ç»•ä½œç”¨åŸŸç”»ä¸€ä¸ªæ–¹æ¡†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è½»æ¾ç†è§£åœ¨ [å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    è¡¨è¾¾å¼ä¸­é‡ç”¨å‡½æ•°åæ„å‘³ç€ä»€ä¹ˆï¼š
- en: '![image](../Images/bab1e834994c2c4ac7e651fb165f0862.png)'
  id: totrans-50
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/bab1e834994c2c4ac7e651fb165f0862.png)'
- en: 'The gray box describes the scope of the inner definition of f; the white box
    is the scope of the outer definition of f. Accordingly, all occurrences of f in
    the gray box refer to the inner [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29);
    all those in the white box, minus the gray one, refer to the definition in the
    outer [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29).
    In other words, the gray box is a hole in the scope of the outer definition of
    f.Holes can also occur in the scope of a parameter definition:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: ç°è‰²æ¡†æè¿°äº†få†…éƒ¨å®šä¹‰çš„ä½œç”¨åŸŸï¼›ç™½è‰²æ¡†æ˜¯få¤–éƒ¨å®šä¹‰çš„ä½œç”¨åŸŸã€‚å› æ­¤ï¼Œç°è‰²æ¡†ä¸­æ‰€æœ‰å¯¹fçš„å¼•ç”¨éƒ½æŒ‡å‘å†…éƒ¨çš„[local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)ï¼›ç™½è‰²æ¡†ä¸­é™¤äº†ç°è‰²æ¡†ä¹‹å¤–çš„æ‰€æœ‰å¼•ç”¨éƒ½æŒ‡å‘å¤–éƒ¨[local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)ä¸­çš„å®šä¹‰ã€‚æ¢å¥è¯è¯´ï¼Œç°è‰²æ¡†æ˜¯få¤–éƒ¨å®šä¹‰ä½œç”¨åŸŸä¸­çš„ä¸€ä¸ªç©ºéš™ã€‚å‚æ•°å®šä¹‰çš„ä½œç”¨åŸŸä¸­ä¹Ÿå¯èƒ½å‡ºç°ç©ºéš™ï¼š
- en: '![image](../Images/beff762eaaec40e4f9868528bb0d46c9.png)'
  id: totrans-52
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/beff762eaaec40e4f9868528bb0d46c9.png)'
- en: 'In this function, the parameter x is used twice: for f and g; the scope of
    the latter is thus a hole in the scope of the former.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œå‚æ•°xè¢«ä½¿ç”¨äº†ä¸¤æ¬¡ï¼šä¸€æ¬¡ç”¨äºfï¼Œä¸€æ¬¡ç”¨äºgï¼›å› æ­¤ï¼Œåè€…çš„ä½œç”¨åŸŸåœ¨å‰è€…çš„ä½œç”¨åŸŸä¸­å½¢æˆäº†ä¸€ä¸ªç©ºéš™ã€‚
- en: In general, if the same name occurs more than once in a function, the boxes
    that describe the corresponding scopes never overlap. In some cases the boxes
    are nested within each other, which gives rise to holes. Still, the picture is
    always that of a hierarchy of smaller and smaller nested boxes.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ä¸­åŒä¸€ä¸ªåå­—å‡ºç°å¤šæ¬¡ï¼Œæè¿°ç›¸åº”ä½œç”¨åŸŸçš„æ¡†æ°¸è¿œä¸ä¼šé‡å ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™äº›æ¡†ä¼šåµŒå¥—åœ¨ä¸€èµ·ï¼Œä»è€Œäº§ç”Ÿç©ºéš™ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå›¾ç¤ºå§‹ç»ˆæ˜¯è¶Šæ¥è¶Šå°çš„åµŒå¥—æ¡†çš„å±‚æ¬¡ç»“æ„ã€‚
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (insertion-sortÂ alon)
    |'
  id: totrans-55
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (insertion-sortÂ alon)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)Â alon)
    |'
  id: totrans-56
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)Â alon)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-57
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â ''()]
    |'
  id: totrans-58
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â ''()]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-59
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (addÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)Â ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)))]))
    |'
  id: totrans-60
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â (addÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)Â ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)))]))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (addÂ anÂ alon)
    |'
  id: totrans-61
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    æ·»åŠ ä¸€ä¸ªå•ç‹¬çš„ï¼‰ |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-62
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)ï¼‰
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â an)]
    |'
  id: totrans-63
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    alon) ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    an)] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-64
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)ï¼‰
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-65
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)ï¼‰
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â anÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon))Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â anÂ alon)]
    |'
  id: totrans-66
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å¤§äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)
    an ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    alon)) ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    an alon)] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)
    |'
  id: totrans-67
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    alon) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (addÂ anÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)))])])))
    |'
  id: totrans-68
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆæ·»åŠ ä¸€ä¸ª ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    alon)))ï¼‰]ï¼‰]ï¼‰ |'
- en: '| Â Â Â Â ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)Â alon)))
    |'
  id: totrans-69
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[æ’åº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)
    alon))) |'
- en: ''
  id: totrans-70
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 105: Drawing lexical scope contours for [exerciseÂ 301](#%28counter._%28exercise._ex~3ascope2%29%29)'
  id: totrans-71
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾105ï¼šç»˜åˆ¶[ç»ƒä¹ 301](#%28counter._%28exercise._ex~3ascope2%29%29)çš„è¯æ³•ä½œç”¨åŸŸè½®å»“
- en: ExerciseÂ 301\. Draw a box around the scope of each binding occurrence of [sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)
    and alon in [figureÂ 105](#%28counter._%28figure._fig~3aex~3ascope2%29%29). Then
    draw arrows from each occurrence of [sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)
    to the appropriate binding occurrence. Now repeat the exercise for the variant
    in [figureÂ 106](#%28counter._%28figure._fig~3aex~3ascope2-2%29%29). Do the two
    functions differ other than in name?
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 301ã€‚åœ¨[å›¾105](#%28counter._%28figure._fig~3aex~3ascope2%29%29)ä¸­ï¼Œå›´ç»•[sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)å’Œalonçš„æ¯ä¸ªç»‘å®šå‡ºç°èŒƒå›´ç”»ä¸€ä¸ªæ¡†ã€‚ç„¶åä»[sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)çš„æ¯ä¸ªå‡ºç°ç”»ç®­å¤´åˆ°ç›¸åº”çš„ç»‘å®šå‡ºç°ã€‚ç°åœ¨å¯¹[å›¾106](#%28counter._%28figure._fig~3aex~3ascope2-2%29%29)ä¸­çš„å˜ä½“é‡å¤æ­¤ç»ƒä¹ ã€‚è¿™ä¸¤ä¸ªå‡½æ•°é™¤äº†åç§°ä¸åŒä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–åŒºåˆ«å—ï¼Ÿ
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)Â alon)
    |'
  id: totrans-73
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)
    åœ¨çº¿æ·»åŠ ) åœ¨çº¿æ·»åŠ ) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)Â alon)
    |'
  id: totrans-74
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    å®šä¹‰ ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)
    åœ¨çº¿æ·»åŠ ) åœ¨çº¿æ·»åŠ ) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-75
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â ''()]
    |'
  id: totrans-76
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    åœ¨çº¿æ·»åŠ ) ''()] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-77
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (addÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)Â ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)))]))
    |'
  id: totrans-78
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    åœ¨çº¿æ·»åŠ ï¼‰ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    åœ¨çº¿æ·»åŠ ) ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)
    åœ¨çº¿æ·»åŠ ) ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    åœ¨çº¿æ·»åŠ ) åœ¨çº¿æ·»åŠ )]])) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (addÂ anÂ alon)
    |'
  id: totrans-79
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    åœ¨çº¿æ·»åŠ ï¼‰ |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-80
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â an)]
    |'
  id: totrans-81
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â an)]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-82
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-83
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â anÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon))Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â anÂ alon)]
    |'
  id: totrans-84
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â anÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon))Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â anÂ alon)]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)
    |'
  id: totrans-85
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (addÂ anÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)))])])))
    |'
  id: totrans-86
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (addÂ anÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)))])])))
    |'
- en: '| Â Â Â Â ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)Â alon)))
    |'
  id: totrans-87
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([sort](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sort%29%29)Â alon)))
    |'
- en: ''
  id: totrans-88
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 106: Drawing lexical scope contours for [exerciseÂ 301](#%28counter._%28exercise._ex~3ascope2%29%29)
    (version 2)'
  id: totrans-89
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 106ï¼šä¸º[ç»ƒä¹  301](#%28counter._%28exercise._ex~3ascope2%29%29)ï¼ˆç‰ˆæœ¬ 2ï¼‰ç»˜åˆ¶è¯æ³•ä½œç”¨åŸŸè½®å»“
- en: 'ExerciseÂ 302\. Recall that each occurrence of a variable receives its value
    from its binding occurrence. Consider the following definition:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  302ã€‚å›å¿†ä¸€ä¸‹ï¼Œæ¯ä¸ªå˜é‡çš„æ¯ä¸ªå‡ºç°éƒ½ä»å…¶ç»‘å®šå‡ºç°æ¥æ”¶å…¶å€¼ã€‚è€ƒè™‘ä»¥ä¸‹å®šä¹‰ï¼š
- en: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â xÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â x))
  id: totrans-91
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â xÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â x))
- en: Where is the shaded occurrence of x bound? Since the definition is a constant
    definition and not a function definition, we need to evaluate the right-hand side
    immediately. What should be the value of the right-hand side according to our
    rules?As discussed in [Functions from lambda](part_three.html#%28part._sec~3aint-lambda%29),
    a [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    expression is just a short-hand for a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    expression. That is, if a-new-name does not occur in [exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29),
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: xçš„é˜´å½±å‡ºç°ç»‘å®šåœ¨å“ªé‡Œï¼Ÿç”±äºå®šä¹‰æ˜¯å¸¸é‡å®šä¹‰è€Œä¸æ˜¯å‡½æ•°å®šä¹‰ï¼Œæˆ‘ä»¬éœ€è¦ç«‹å³è¯„ä¼°å³ä¾§ã€‚æ ¹æ®æˆ‘ä»¬çš„è§„åˆ™ï¼Œå³ä¾§åº”è¯¥æ˜¯ä»€ä¹ˆå€¼ï¼Ÿå¦‚[ä»lambdaå‡½æ•°](part_three.html#%28part._sec~3aint-lambda%29)ä¸­è®¨è®ºçš„é‚£æ ·ï¼Œä¸€ä¸ª[lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)è¡¨è¾¾å¼åªæ˜¯[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)è¡¨è¾¾å¼çš„ç¼©å†™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ–°åç§°åœ¨[exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29)ä¸­æœªå‡ºç°ï¼Œ
- en: ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (x-1Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â Â x-n)Â [exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29))
  id: totrans-93
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (x-1Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â Â x-n)Â [exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29))
- en: is short for
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¯ä»¥ä¸‹å†…å®¹çš„ç¼©å†™
- en: '| ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (a-new-nameÂ x-1Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â x-n)Â [exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29)))
    |'
  id: totrans-95
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (æ–°åç§°
    x-1Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â x-n)Â [exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29)))
    |'
- en: '| Â Â a-new-name) |'
  id: totrans-96
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â æ–°åç§°) |'
- en: The short-hand explanation suggests that
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: ç®€çŸ­çš„è¯´æ˜æš—ç¤ºäº†
- en: ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (x-1Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â Â x-n)Â [exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29))
  id: totrans-98
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (x-1Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â Â x-n)Â [exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29))
- en: 'introduces x-1, ..., x-n as binding occurrences and that the scope of parameters
    is [exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29),
    for example:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: ä»‹ç»äº†x-1, ..., x-nä½œä¸ºç»‘å®šå‡ºç°ï¼Œå¹¶ä¸”å‚æ•°çš„ä½œç”¨åŸŸæ˜¯[exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29)ï¼Œä¾‹å¦‚ï¼š
- en: '![image](../Images/a51f7735d8dc25681c51224bc0081cb3.png)'
  id: totrans-100
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![å›¾åƒ](../Images/a51f7735d8dc25681c51224bc0081cb3.png)'
- en: 'Of course, if [exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29)
    contains further binding constructs (say, a nested [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    expression), then the scope of the variables may have a hole.ExerciseÂ 303\. Draw
    arrows from the shaded occurrences of x to their binding occurrences in each of
    the following three [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    expressions:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œå¦‚æœ[exp](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._exp%29%29)
    åŒ…å«è¿›ä¸€æ­¥çš„ç»‘å®šç»“æ„ï¼ˆæ¯”å¦‚è¯´ï¼Œä¸€ä¸ªåµŒå¥—çš„ [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    è¡¨è¾¾å¼ï¼‰ï¼Œé‚£ä¹ˆå˜é‡çš„ä½œç”¨åŸŸå¯èƒ½å­˜åœ¨ç©ºéš™ã€‚ç»ƒä¹  303ï¼šåœ¨ä»¥ä¸‹ä¸‰ä¸ª [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    è¡¨è¾¾å¼ä¸­ï¼Œä» x çš„é˜´å½±å‡ºç°ä½ç½®ç”»ç®­å¤´åˆ°å®ƒä»¬çš„ç»‘å®šå‡ºç°ä½ç½®ï¼š
- en: '| ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (xÂ y)
    |'
  id: totrans-102
  prefs:
  - PREF_OL
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (xÂ y)
    |'
- en: '| Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ y)))
    |'
  id: totrans-103
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â xÂ y)))
    |'
- en: '| ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (xÂ y)
    |'
  id: totrans-104
  prefs:
  - PREF_OL
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (xÂ y)
    |'
- en: '| Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â x
    |'
  id: totrans-105
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â x)
    |'
- en: '| Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â xÂ ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â yÂ y)))
    |'
  id: totrans-106
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â xÂ ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â yÂ y)))
    |'
- en: '| Â Â Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â x)
    |'
  id: totrans-107
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â x)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([/](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29)Â 1Â x)))))
    |'
  id: totrans-108
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([/](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29)Â 1Â x)))
    |'
- en: '| ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (xÂ y)
    |'
  id: totrans-109
  prefs:
  - PREF_OL
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (xÂ y)
    |'
- en: '| Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â x
    |'
  id: totrans-110
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â x)
    |'
- en: '| Â Â Â Â Â (([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (x)
    |'
  id: totrans-111
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (x)
    |'
- en: '| Â Â Â Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â x)
    |'
  id: totrans-112
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â x)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â ([/](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29)Â 1Â x)))
    |'
  id: totrans-113
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([/](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29)Â 1Â x)))
    |'
- en: '| Â Â Â Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â yÂ y))))
    |'
  id: totrans-114
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â  ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â yÂ y))))
    |'
- en: Also draw a box for the scope of each shaded x and holes in the scope as necessary.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®éœ€è¦ï¼Œä¸ºæ¯ä¸ªé˜´å½±xçš„ä½œç”¨åŸŸç»˜åˆ¶ä¸€ä¸ªæ¡†ï¼Œå¹¶åœ¨ä½œç”¨åŸŸä¸­ç»˜åˆ¶å¿…è¦çš„å­”æ´ã€‚
- en: ISL for Loops[ğŸ”—](#(part._.I.S.L_for_.Loops) "Link to here")
  id: totrans-116
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ISL for Loops[ğŸ”—](#(part._.I.S.L_for_.Loops) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Even though it never mentions the word, [Abstraction](part_three.html) introduces
    loops. Abstractly, a loop traverses compound data, processing
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: å³ä½¿æ²¡æœ‰æåˆ°è¿™ä¸ªè¯ï¼Œ[æŠ½è±¡](part_three.html)ä¹Ÿå¼•å…¥äº†å¾ªç¯ã€‚æŠ½è±¡åœ°è®²ï¼Œå¾ªç¯éå†å¤åˆæ•°æ®ï¼Œä¸€æ¬¡å¤„ç†ä¸€ä¸ªéƒ¨åˆ†ã€‚
- en: Add ([require](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._require%29%29)  2htdp/abstraction)
    to the definitions area, or select Add Teachpack from the Language menu and choose
    abstraction from the Preinstalled HtDP/2e Teachpack menu.
  id: totrans-118
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å°†([require](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._require%29%29)  2htdp/abstraction)æ·»åŠ åˆ°å®šä¹‰åŒºåŸŸï¼Œæˆ–è€…ä»è¯­è¨€èœå•ä¸­é€‰æ‹©æ·»åŠ æ•™å­¦åŒ…ï¼Œå¹¶åœ¨é¢„å®‰è£…çš„HtDP/2eæ•™å­¦åŒ…èœå•ä¸­é€‰æ‹©æŠ½è±¡ã€‚
- en: one piece at a time. In the process, loops also synthesize data. For example,
    [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    traverses a list, applies a function to each item, and collects the results in
    a list. Similarly, [build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)
    enumerates the sequence of predecessors of a natural number (from 0 to ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  1)),
    maps each of these to some value, and also gathers the results in a list.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿‡ç¨‹ä¸­ï¼Œå¾ªç¯ä¹Ÿç»¼åˆæ•°æ®ã€‚ä¾‹å¦‚ï¼Œ[map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)éå†åˆ—è¡¨ï¼Œå¯¹æ¯ä¸ªå…ƒç´ åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶å°†ç»“æœæ”¶é›†åœ¨åˆ—è¡¨ä¸­ã€‚åŒæ ·ï¼Œ[build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)æšä¸¾è‡ªç„¶æ•°ï¼ˆä»0åˆ°ï¼ˆ[-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â 
    nÂ  1)ï¼‰çš„å‰é©±åºåˆ—ï¼Œå°†è¿™äº›æ˜ å°„åˆ°æŸä¸ªå€¼ï¼Œå¹¶å°†ç»“æœä¹Ÿæ”¶é›†åœ¨åˆ—è¡¨ä¸­ã€‚
- en: The loops of ISL+ differ from those in conventional languages in two ways. First,
    a conventional loop does not directly create new data; in contrast, abstractions
    such as [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    and [build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)
    are all about computing new data from traversals. Second, conventional languages
    often provide only a fixed number of loops; an ISL+ programmer defines new loops
    as needed. Put differently, conventional languages view loops as syntactic constructs
    akin to [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    or [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29),
    and their introduction requires a detailed explanation of their vocabulary, grammar,
    scope, and meaning.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: ISL+ çš„å¾ªç¯ä¸å¸¸è§„è¯­è¨€ä¸­çš„å¾ªç¯åœ¨ä¸¤ä¸ªæ–¹é¢æœ‰æ‰€ä¸åŒã€‚é¦–å…ˆï¼Œå¸¸è§„å¾ªç¯ä¸ä¼šç›´æ¥åˆ›å»ºæ–°æ•°æ®ï¼›ç›¸åï¼Œå¦‚ [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    å’Œ [build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)
    è¿™æ ·çš„æŠ½è±¡éƒ½æ˜¯å…³äºä»éå†ä¸­è®¡ç®—æ–°æ•°æ®çš„ã€‚å…¶æ¬¡ï¼Œå¸¸è§„è¯­è¨€é€šå¸¸åªæä¾›å›ºå®šæ•°é‡çš„å¾ªç¯ï¼›ISL+ ç¨‹åºå‘˜æ ¹æ®éœ€è¦å®šä¹‰æ–°çš„å¾ªç¯ã€‚æ¢å¥è¯è¯´ï¼Œå¸¸è§„è¯­è¨€å°†å¾ªç¯è§†ä¸ºç±»ä¼¼äº [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    æˆ– [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    çš„è¯­æ³•ç»“æ„ï¼Œå®ƒä»¬çš„å¼•å…¥éœ€è¦å¯¹å…¶è¯æ±‡ã€è¯­æ³•ã€ä½œç”¨åŸŸå’Œæ„ä¹‰çš„è¯¦ç»†è§£é‡Šã€‚
- en: Loops as syntactic constructs have two advantages over the functional loops
    of the preceding part. On the one hand, their shape tends to signal intentions
    more directly than a composition of functions. On the other hand, language implementations
    typically translate syntactic loops into faster commands for computers than functional
    loops. It is therefore common that even functional programming languagesâ€”<wbr>with
    all their emphasis on functions and function compositionsâ€”<wbr>provide syntactic
    loops.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºè¯­æ³•ç»“æ„çš„å¾ªç¯ä¸å‰é¢éƒ¨åˆ†çš„åŠŸèƒ½å¾ªç¯ç›¸æ¯”æœ‰ä¸¤ä¸ªä¼˜ç‚¹ã€‚ä¸€æ–¹é¢ï¼Œå®ƒä»¬çš„å½¢çŠ¶å¾€å¾€æ¯”å‡½æ•°çš„ç»„åˆæ›´èƒ½ç›´æ¥è¡¨è¾¾æ„å›¾ã€‚å¦ä¸€æ–¹é¢ï¼Œè¯­è¨€å®ç°é€šå¸¸å°†è¯­æ³•å¾ªç¯è½¬æ¢ä¸ºæ¯”åŠŸèƒ½å¾ªç¯æ›´å¿«çš„è®¡ç®—æœºå‘½ä»¤ã€‚å› æ­¤ï¼Œå³ä½¿æ˜¯å¼ºè°ƒå‡½æ•°å’Œå‡½æ•°ç»„åˆçš„åŠŸèƒ½æ€§ç¼–ç¨‹è¯­è¨€â€”â€”<wbr>å°½ç®¡å®ƒä»¬å¦‚æ­¤é‡è§†å‡½æ•°å’Œå‡½æ•°ç»„åˆâ€”â€”<wbr>ä¹Ÿé€šå¸¸ä¼šæä¾›è¯­æ³•å¾ªç¯ã€‚
- en: 'In this section, we introduce ISL+â€™s so-called for loops. The goal is to illustrate
    how to think about conventional loops as linguistic constructs and to indicate
    how programs built with abstractions may use loops instead. [FigureÂ 107](#%28counter._%28figure._fig~3asyn-for-loops%29%29)
    spells out the grammar of our selected for loops as an extension of BSLâ€™s grammar
    from [Intermezzo 1: Beginning Student Language](i1-2.html). Every loop is an expression
    and, like all compound constructs, is marked with a keyword. The latter is followed
    by a parenthesized sequence of so-called comprehension clauses and a single expression.
    The clauses introduce so-called loop variables, and the expression at the end
    is the loop body.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† ISL+ æ‰€ç§°çš„ for å¾ªç¯ã€‚ç›®æ ‡æ˜¯è¯´æ˜å¦‚ä½•å°†å¸¸è§„å¾ªç¯è§†ä¸ºè¯­è¨€ç»“æ„ï¼Œå¹¶æŒ‡å‡ºä½¿ç”¨æŠ½è±¡æ„å»ºçš„ç¨‹åºå¦‚ä½•ä½¿ç”¨å¾ªç¯ã€‚![å›¾ 107](#%28counter._%28figure._fig~3asyn-for-loops%29%29)
    è§£é‡Šäº†æˆ‘ä»¬é€‰æ‹©çš„ for å¾ªç¯çš„è¯­æ³•ï¼Œå®ƒæ˜¯ BSL çš„è¯­æ³•ä» [Intermezzo 1ï¼šå…¥é—¨å­¦ç”Ÿè¯­è¨€](i1-2.html) çš„æ‰©å±•ã€‚æ¯ä¸ªå¾ªç¯éƒ½æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶ä¸”åƒæ‰€æœ‰å¤åˆç»“æ„ä¸€æ ·ï¼Œéƒ½å¸¦æœ‰å…³é”®å­—ã€‚å…³é”®å­—åé¢è·Ÿç€ä¸€ä¸ªæ‹¬å·åºåˆ—ï¼Œç§°ä¸ºç†è§£å­å¥ï¼Œä»¥åŠä¸€ä¸ªå•ç‹¬çš„è¡¨è¾¾å¼ã€‚å­å¥å¼•å…¥äº†æ‰€è°“çš„å¾ªç¯å˜é‡ï¼Œè€Œæœ€åçš„è¡¨è¾¾å¼æ˜¯å¾ªç¯ä½“ã€‚
- en: '| Â Â expr | Â  | = | Â  | ... |'
  id: totrans-123
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   expr |   | = |   | ... |'
- en: '| Â  | Â  | &#124; | Â  | ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-124
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   | |   | ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    (å­å¥ å­å¥ ...) expr) |'
- en: '| Â  | Â  | &#124; | Â  | ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-125
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   | |   | ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    (å­å¥ å­å¥ ...) expr) |'
- en: '| Â  | Â  | &#124; | Â  | ([for/and](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fand%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-126
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([for/and](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fand%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
- en: '| Â  | Â  | &#124; | Â  | ([for*/and](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Fand%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-127
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([for*/and](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Fand%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
- en: '| Â  | Â  | &#124; | Â  | ([for/or](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2For%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-128
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([for/or](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2For%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
- en: '| Â  | Â  | &#124; | Â  | ([for*/or](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2For%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-129
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([for*/or](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2For%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
- en: '| Â  | Â  | &#124; | Â  | ([for/sum](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fsum%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-130
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([for/sum](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fsum%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
- en: '| Â  | Â  | &#124; | Â  | ([for*/sum](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Fsum%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-131
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([for*/sum](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Fsum%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
- en: '| Â  | Â  | &#124; | Â  | ([for/product](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fproduct%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-132
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([for/product](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fproduct%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
- en: '| Â  | Â  | &#124; | Â  | ([for*/product](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Fproduct%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-133
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([for*/product](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Fproduct%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
- en: '| Â  | Â  | &#124; | Â  | ([for/string](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fstring%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-134
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([for/string](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fstring%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
- en: '| Â  | Â  | &#124; | Â  | ([for*/string](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Fstring%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
  id: totrans-135
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([for*/string](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Fstring%29%29)Â (clauseÂ clauseÂ ...)Â expr)
    |'
- en: '| Â  | Â  | Â  | Â  | Â  |'
  id: totrans-136
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | Â  | Â  | Â  |'
- en: '| Â Â clause | Â  | = | Â  | [variableÂ expr] |'
  id: totrans-137
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â å­å¥ | Â  | = | Â  | [å˜é‡ è¡¨è¾¾å¼] |'
- en: ''
  id: totrans-138
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 107: ISL+ extended with for loops'
  id: totrans-139
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾107ï¼šISL+æ‰©å±•äº†forå¾ªç¯
- en: 'Even a cursory look at the grammar shows that the dozen looping constructs
    come in six pairs: a for and for* variant for each of list, and, or, sum, product,
    and string.Racketâ€™s version of these loops comes with more functionality than
    those presented here, and the language has many more loops than this. All for
    loops bind the variables of their clauses in the body; the for* variants also
    bind variables in the subsequent clauses. The following two near-identical code
    snippets illustrate the difference between these two scoping rules:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: å³ä½¿æ˜¯ç²—ç•¥åœ°çœ‹ä¸€ä¸‹è¯­æ³•ï¼Œä¹Ÿä¼šå‘ç°è¿™åäºŒä¸ªå¾ªç¯ç»“æ„åˆ†ä¸ºå…­å¯¹ï¼šæ¯ä¸ªåˆ—è¡¨ã€å’Œã€æˆ–ã€å’Œã€ç§¯ã€å­—ç¬¦ä¸²éƒ½æœ‰ä¸€ä¸ªforå’Œfor*å˜ä½“ã€‚Racketçš„è¿™äº›å¾ªç¯ç‰ˆæœ¬æ¯”è¿™é‡Œå±•ç¤ºçš„å…·æœ‰æ›´å¤šåŠŸèƒ½ï¼Œè€Œä¸”è¯¥è¯­è¨€æœ‰æ¯”è¿™æ›´å¤šçš„å¾ªç¯ã€‚æ‰€æœ‰forå¾ªç¯éƒ½ä¼šåœ¨ä¸»ä½“ä¸­ç»‘å®šå…¶å­å¥çš„å˜é‡ï¼›for*å˜ä½“è¿˜ä¼šåœ¨åç»­å­å¥ä¸­ç»‘å®šå˜é‡ã€‚ä»¥ä¸‹ä¸¤ä¸ªå‡ ä¹ç›¸åŒçš„ä»£ç ç‰‡æ®µè¯´æ˜äº†è¿™ä¸¤ç§ä½œç”¨åŸŸè§„åˆ™ä¹‹é—´çš„åŒºåˆ«ï¼š
- en: '|  | ![image](../Images/8dedbde051f75bae989e2a245d8694cd.png) |  | ![image](../Images/848e526afea1c9d06d4704f1747cd5b5.png)
    |'
  id: totrans-141
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | ![å›¾ç‰‡](../Images/8dedbde051f75bae989e2a245d8694cd.png) |  | ![å›¾ç‰‡](../Images/848e526afea1c9d06d4704f1747cd5b5.png)
    |'
- en: The syntactic difference is that the left one uses [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    and the right one [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29).
    In terms of scope, the two strongly differ as the arrows indicate. While both
    pieces introduce the loop variables width and height, the left one uses an externally
    defined variable for heightâ€™s initial value and the right one uses the first loop
    variable.Semantically, a [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    expression evaluates the expressions in its clauses to generate sequences of values.
    If a clause expression evaluates to
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: è¯­æ³•ä¸Šçš„åŒºåˆ«åœ¨äºï¼Œå·¦è¾¹çš„ä¸€ä¸ªä½¿ç”¨[for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)ï¼Œè€Œå³è¾¹çš„ä¸€ä¸ªä½¿ç”¨[for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)ã€‚åœ¨ä½œç”¨åŸŸæ–¹é¢ï¼Œä¸¤è€…æœ‰å¾ˆå¼ºçš„åŒºåˆ«ï¼Œå¦‚ç®­å¤´æ‰€ç¤ºã€‚è™½ç„¶è¿™ä¸¤éƒ¨åˆ†éƒ½å¼•å…¥äº†å¾ªç¯å˜é‡widthå’Œheightï¼Œä½†å·¦è¾¹çš„ä¸€ä¸ªä½¿ç”¨å¤–éƒ¨å®šä¹‰çš„å˜é‡ä½œä¸ºheightçš„åˆå§‹å€¼ï¼Œè€Œå³è¾¹çš„ä¸€ä¸ªä½¿ç”¨ç¬¬ä¸€ä¸ªå¾ªç¯å˜é‡ã€‚è¯­ä¹‰ä¸Šï¼Œ[for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)è¡¨è¾¾å¼è¯„ä¼°å…¶å­å¥ä¸­çš„è¡¨è¾¾å¼ä»¥ç”Ÿæˆå€¼åºåˆ—ã€‚å¦‚æœä¸€ä¸ªå­å¥è¡¨è¾¾å¼è¯„ä¼°ä¸º
- en: a list, its items make up the sequence values;
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶é¡¹ç»„æˆåºåˆ—å€¼ï¼›
- en: a natural number n, the sequence consists of 0, 1, ..., ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  1);
    and
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªè‡ªç„¶æ•°nï¼Œåºåˆ—ç”±0, 1, ..., ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)
    n 1)ç»„æˆï¼›å¹¶ä¸”
- en: a string, its one-character strings are the sequence items.
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶å•å­—ç¬¦å­—ç¬¦ä¸²æ˜¯åºåˆ—é¡¹ã€‚
- en: Next, [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    evaluates the loop body with the loop variables successively bound to the values
    of the generated sequence(s). Finally, it collects the values of its body into
    a list. The evaluation of a [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    expression stops when the shortest sequence is exhausted.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œ[for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)ä½¿ç”¨å¾ªç¯å˜é‡ä¾æ¬¡ç»‘å®šåˆ°ç”Ÿæˆçš„åºåˆ—ï¼ˆçš„ï¼‰å€¼æ¥è¯„ä¼°å¾ªç¯ä½“ã€‚æœ€åï¼Œå®ƒå°†å…¶ä½“çš„å€¼æ”¶é›†åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚[for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)è¡¨è¾¾å¼çš„è¯„ä¼°åœ¨æœ€çŸ­çš„åºåˆ—è€—å°½æ—¶åœæ­¢ã€‚
- en: Terminology Each evaluation of a loop body is called an iteration. Similarly,
    a loop is said to iterate over the values of its loop variables.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¯è¯­ï¼šæ¯æ¬¡å¾ªç¯ä½“çš„è¯„ä¼°ç§°ä¸ºä¸€æ¬¡è¿­ä»£ã€‚åŒæ ·ï¼Œä¸€ä¸ªå¾ªç¯è¢«è¯´æˆæ˜¯éå†å…¶å¾ªç¯å˜é‡çš„å€¼ã€‚
- en: 'Based on this explanation, we can easily generate the list from 0 to 9:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®è¿™ä¸ªè§£é‡Šï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°ç”Ÿæˆä»0åˆ°9çš„åˆ—è¡¨ï¼š
- en: '|'
  id: totrans-149
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-150
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([iÂ 10])
    &#124;'
  id: totrans-151
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    ([i 10]) &#124;'
- en: '&#124; Â Â Â Â i) &#124;'
  id: totrans-152
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;    i) &#124;'
- en: ''
  id: totrans-153
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-154
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| (list 0 1 2 3 4 5 6 7 8 9) |'
  id: totrans-155
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list 0 1 2 3 4 5 6 7 8 9) |'
- en: 'This is the equivalent of a [build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)
    loop:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç­‰ä»·äºä¸€ä¸ª[build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)å¾ªç¯ï¼š
- en: '| > ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â 10Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (i)Â i))
    |'
  id: totrans-157
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)
    10 ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    (i) i)) |'
- en: '| (list 0 1 2 3 4 5 6 7 8 9) |'
  id: totrans-158
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list 0 1 2 3 4 5 6 7 8 9) |'
- en: 'The second example â€œzipsâ€ together two sequences:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒä¸ªç¤ºä¾‹å°†ä¸¤ä¸ªåºåˆ—â€œåˆå¹¶â€åœ¨ä¸€èµ·ï¼š
- en: '|'
  id: totrans-160
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-161
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([iÂ 2]Â [jÂ ''(aÂ b)])
    &#124;'
  id: totrans-162
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([iÂ 2]Â [jÂ ''(aÂ b)])
    &#124;'
- en: '&#124; Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â iÂ j))
    &#124;'
  id: totrans-163
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â iÂ j))
    &#124;'
- en: ''
  id: totrans-164
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-165
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| (list (list 0 ''a) (list 1 ''b)) |'
  id: totrans-166
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list (list 0 ''a) (list 1 ''b)) |'
- en: 'For comparison again, here is the same expression using plain ISL+:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: å†æ¬¡è¿›è¡Œæ¯”è¾ƒï¼Œè¿™é‡Œæ˜¯ç”¨çº¯ISL+è¡¨è¾¾ç›¸åŒçš„è¡¨è¾¾å¼ï¼š
- en: '|'
  id: totrans-168
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-169
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â i-sÂ ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â 2Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (i)Â i)))
    &#124;'
  id: totrans-170
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â i-sÂ ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â 2Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (i)Â i)))
    &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â j-sÂ ''(aÂ b)))
    &#124;'
  id: totrans-171
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â j-sÂ ''(aÂ b)))
    &#124;'
- en: '&#124; Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â i-sÂ j-s))
    &#124;'
  id: totrans-172
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â i-sÂ j-s))
    &#124;'
- en: ''
  id: totrans-173
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-174
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| (list (list 0 ''a) (list 1 ''b)) |'
  id: totrans-175
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list (list 0 ''a) (list 1 ''b)) |'
- en: 'The final example emphasizes designing with [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29):'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åçš„ä¾‹å­å¼ºè°ƒäº†ä½¿ç”¨[for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)è¿›è¡Œè®¾è®¡ï¼š
- en: Sample Problem Design enumerate. The function consumes a list and produces a
    list of the same items paired with their relative index.
  id: totrans-177
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜è®¾è®¡åˆ—ä¸¾ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªåˆ—è¡¨å¹¶ç”Ÿæˆä¸€ä¸ªä¸ç›¸åŒé¡¹é…å¯¹çš„åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«å®ƒä»¬çš„ç›¸å¯¹ç´¢å¼•ã€‚
- en: 'Stop! Design this function systematically, using ISL+â€™s abstractions.With [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29),
    this problem has a straightforward solution:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ç³»ç»Ÿåœ°è®¾è®¡è¿™ä¸ªå‡½æ•°ï¼Œä½¿ç”¨ISL+çš„æŠ½è±¡ã€‚ä½¿ç”¨[for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)ï¼Œè¿™ä¸ªé—®é¢˜æœ‰ä¸€ä¸ªç›´æ¥çš„è§£å†³æ–¹æ¡ˆï¼š
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    [[List](part_three.html#%28tech._sim-dd._list%29) N X]] |'
  id: totrans-179
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[List](part_three.html#%28tech._sim-dd._list%29)
    [[List](part_three.html#%28tech._sim-dd._list%29) N X]] |'
- en: '| ;Â pairs each item in lx with its index |'
  id: totrans-180
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; å°†lxä¸­çš„æ¯ä¸ªé¡¹ä¸å…¶ç´¢å¼•é…å¯¹ |'
- en: '| Â  |'
  id: totrans-181
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    |'
  id: totrans-182
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (enumerateÂ ''(aÂ bÂ c))Â ''((1Â a)Â (2Â b)Â (3Â c))) |'
  id: totrans-183
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (enumerateÂ ''(aÂ bÂ c))Â ''((1Â a)Â (2Â b)Â (3Â c))) |'
- en: '| Â  |'
  id: totrans-184
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (enumerateÂ lx)
    |'
  id: totrans-185
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (enumerateÂ lx)
    |'
- en: '| Â Â ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([xÂ lx]Â [ithÂ (lengthÂ lx)])
    |'
  id: totrans-186
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([xÂ lx]Â [ithÂ (lengthÂ lx)])
    |'
- en: '| Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ithÂ 1)Â x)))
    |'
  id: totrans-187
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ithÂ 1)Â x)))
    |'
- en: 'The functionâ€™s body uses [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    to iterate over the given list and a list of numbers from 0 to (length  lx) (minus
    1); the loop body combines the index (plus 1) with the list item.In semantic terms,
    [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    iterates over the sequences in a nested fashion while [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    traverses them in parallel. That is, a [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    expression basically unfolds into a nest of loops:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°ä½“ä½¿ç”¨ [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    æ¥éå†ç»™å®šçš„åˆ—è¡¨ä»¥åŠä» 0 åˆ° (length lx) (å‡ 1) çš„æ•°å­—åˆ—è¡¨ï¼›å¾ªç¯ä½“å°†ç´¢å¼•ï¼ˆåŠ  1ï¼‰ä¸åˆ—è¡¨é¡¹ç»“åˆã€‚åœ¨è¯­ä¹‰ä¸Šï¼Œ[for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    ä»¥åµŒå¥—çš„æ–¹å¼éå†åºåˆ—ï¼Œè€Œ [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    å¹¶è¡Œéå†å®ƒä»¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ª [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    è¡¨è¾¾å¼åŸºæœ¬ä¸Šå±•å¼€æˆä¸€ä¸ªåµŒå¥—çš„å¾ªç¯ï¼š
- en: '| ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)Â ([iÂ 2]Â [jÂ ''(aÂ b)])
    |'
  id: totrans-189
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)Â ([iÂ 2]Â [jÂ ''(aÂ b)])
    |'
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-190
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: is short for
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: ç®€ç§°
- en: '| ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([iÂ 2])
    |'
  id: totrans-192
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([iÂ 2])
    |'
- en: '| Â Â ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([jÂ ''(aÂ b)])
    |'
  id: totrans-193
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([jÂ ''(aÂ b)])
    |'
- en: '| Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
  id: totrans-194
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
- en: In addition, [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    collects the nested lists into a single list by concatenating them with [foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)
    and [append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29).ExerciseÂ 304\.
    Evaluate
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œ[for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    é€šè¿‡ä½¿ç”¨ [foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)
    å’Œ [append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)
    å°†åµŒå¥—åˆ—è¡¨åˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„åˆ—è¡¨ã€‚ç»ƒä¹  304. è¯„ä¼°
- en: ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([iÂ 2]Â [jÂ '(aÂ b)])Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â iÂ j))
  id: totrans-196
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    ([i 2] [j '(a b)]) ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    i j))
- en: and
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: å’Œ
- en: ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)Â ([iÂ 2]Â [jÂ '(aÂ b)])Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â iÂ j))
  id: totrans-198
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    ([i 2] [j '(a b)]) ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    i j))
- en: 'in the interactions area of DrRacket.Letâ€™s continue the exploration by turning
    the difference in scoping between [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    and [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    into a semantic difference:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨DrRacketçš„äº¤äº’åŒºåŸŸä¸­ï¼Œè®©æˆ‘ä»¬ç»§ç»­æ¢ç´¢ï¼Œå°†[for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)å’Œ[for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)ä¹‹é—´çš„ä½œç”¨åŸŸå·®å¼‚è½¬åŒ–ä¸ºè¯­ä¹‰å·®å¼‚ï¼š
- en: '| > ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â widthÂ 2)
    |'
  id: totrans-200
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    width 2) |'
- en: '|'
  id: totrans-201
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-202
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([widthÂ 3][heightÂ width])
    &#124;'
  id: totrans-203
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    ([width 3][height width]) &#124;'
- en: '&#124; Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â widthÂ height))
    &#124;'
  id: totrans-204
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    å®½åº¦ é«˜åº¦)&#124;'
- en: ''
  id: totrans-205
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-206
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| (list (list 0 0) (list 1 1)) |'
  id: totrans-207
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (åˆ—è¡¨ (åˆ—è¡¨ 0 0) (åˆ—è¡¨ 1 1)) |'
- en: '|'
  id: totrans-208
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-209
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)Â ([widthÂ 3][heightÂ width])
    &#124;'
  id: totrans-210
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    ([width 3][height width]) &#124;'
- en: '&#124; Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â widthÂ height))
    &#124;'
  id: totrans-211
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ï¼ˆ[åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    å®½åº¦ é«˜åº¦ï¼‰&#124;'
- en: ''
  id: totrans-212
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-213
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| (list (list 1 0) (list 2 0) (list 2 1)) |'
  id: totrans-214
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (åˆ—è¡¨ (åˆ—è¡¨ 1 0) (åˆ—è¡¨ 2 0) (åˆ—è¡¨ 2 1)) |'
- en: To understand the first interaction, remember that [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    traverses the two sequences in parallel and stops when the shorter one is exhausted.
    Here, the two sequences are
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: è¦ç†è§£ç¬¬ä¸€ä¸ªäº¤äº’ï¼Œè¯·è®°ä½[for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)å¹¶è¡Œéå†ä¸¤ä¸ªåºåˆ—ï¼Œå¹¶åœ¨è¾ƒçŸ­çš„åºåˆ—è€—å°½æ—¶åœæ­¢ã€‚è¿™é‡Œï¼Œä¸¤ä¸ªåºåˆ—æ˜¯
- en: '| width |  | = |  | 0, 1, 2 |'
  id: totrans-216
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å®½åº¦ |  | = |  | 0, 1, 2 |'
- en: '| height |  | = |  | 0, 1 |'
  id: totrans-217
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| é«˜åº¦ |  | = |  | 0, 1 |'
- en: '| body |  | = |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  0  0)
    ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  1  1)
    |'
  id: totrans-218
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ä¸»ä½“ |  | = |  | ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  0  0)
    ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  1  1)
    |'
- en: 'The first two rows show the values of the two loop variables, which change
    in tandem. The last row shows the result of each iteration, which explains the
    first result and the absence of a pair containing 2.Now contrast this situation
    with [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29):'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: å‰ä¸¤è¡Œæ˜¾ç¤ºäº†ä¸¤ä¸ªå¾ªç¯å˜é‡çš„å€¼ï¼Œå®ƒä»¬æ˜¯åŒæ­¥å˜åŒ–çš„ã€‚æœ€åä¸€è¡Œæ˜¾ç¤ºäº†æ¯æ¬¡è¿­ä»£çš„ç»“æœï¼Œè¿™è§£é‡Šäº†ç¬¬ä¸€ä¸ªç»“æœä»¥åŠæ²¡æœ‰åŒ…å«2çš„é…å¯¹ã€‚ç°åœ¨å°†è¿™ç§æƒ…å†µä¸[for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)è¿›è¡Œå¯¹æ¯”ï¼š
- en: '| width |  | = |  | 0 |  | 1 |  | 2 |'
  id: totrans-220
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| width |  | = |  | 0 |  | 1 |  | 2 |'
- en: '| height |  | = |  |  |  | 0 |  | 0, 1 |'
  id: totrans-221
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| height |  | = |  |  |  | 0 |  | 0, 1 |'
- en: '| body |  | = |  |  |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  1  0)
    |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  2  0)
    ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  2  1)
    |'
  id: totrans-222
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| body |  | = |  |  |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  1  0)
    |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  2  0)
    ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  2  1)
    |'
- en: 'While the first row is like the one for [for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29),
    the second one now displays sequences of numbers in its cells. The implicit nesting
    of [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    means that each iteration recomputes height for a specific value of width and
    thus creates a distinct sequence of height values. This explains why the first
    cell of height values is empty; after all, there are no natural numbers between
    0 (inclusive) and 0 (exclusive). Finally, each nested for loop yields a sequences
    of pairs, which are collected into a single list of pairs.Here is a problem that
    illustrates this use of [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    in context:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶ç¬¬ä¸€è¡Œç±»ä¼¼äº[for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)çš„è¡Œï¼Œä½†ç¬¬äºŒè¡Œç°åœ¨åœ¨å…¶å•å…ƒæ ¼ä¸­æ˜¾ç¤ºæ•°å­—åºåˆ—ã€‚[for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)çš„éšå¼åµŒå¥—æ„å‘³ç€æ¯æ¬¡è¿­ä»£éƒ½ä¼šä¸ºç‰¹å®šå®½åº¦çš„å€¼é‡æ–°è®¡ç®—é«˜åº¦ï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªç‹¬ç‰¹çš„é«˜åº¦å€¼åºåˆ—ã€‚è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆé«˜åº¦å€¼çš„ç¬¬ä¸€å•å…ƒæ ¼ä¸ºç©ºï¼›æ¯•ç«Ÿï¼Œåœ¨0ï¼ˆåŒ…å«ï¼‰å’Œ0ï¼ˆä¸åŒ…å«ï¼‰ä¹‹é—´æ²¡æœ‰è‡ªç„¶æ•°ã€‚æœ€åï¼Œæ¯ä¸ªåµŒå¥—çš„forå¾ªç¯äº§ç”Ÿä¸€ä¸ªå¯¹åºåˆ—ï¼Œè¿™äº›å¯¹è¢«æ”¶é›†æˆä¸€ä¸ªå•ç‹¬çš„å¯¹åˆ—è¡¨ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯´æ˜åœ¨ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨[for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)çš„é—®é¢˜ï¼š
- en: Sample Problem Design cross. The function consumes two lists, l1 and l2, and
    produces pairs of all items from these lists.
  id: totrans-224
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜è®¾è®¡crossã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸¤ä¸ªåˆ—è¡¨l1å’Œl2ï¼Œå¹¶ç”Ÿæˆè¿™äº›åˆ—è¡¨ä¸­æ‰€æœ‰é¡¹ç›®çš„å¯¹ã€‚
- en: 'Stop! Take a moment to design the function, using existing abstractions.As
    you design cross, you work through a table such as:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼èŠ±ç‚¹æ—¶é—´è®¾è®¡å‡½æ•°ï¼Œä½¿ç”¨ç°æœ‰çš„æŠ½è±¡ã€‚å½“ä½ è®¾è®¡crossæ—¶ï¼Œä½ ä¼šé€šè¿‡ä¸€ä¸ªå¦‚è¡¨æ‰€ç¤ºçš„è¡¨æ ¼è¿›è¡Œå·¥ä½œï¼š
- en: '| cross |  | ''a |  | ''b |  | ''c |'
  id: totrans-226
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| cross |  | ''a |  | ''b |  | ''c |'
- en: '| 1 |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''a  1)
    |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''b  1)
    |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''c  1)
    |'
  id: totrans-227
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 1 |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''a  1)
    |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''b  1)
    |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''c  1)
    |'
- en: '| 2 |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''a  2)
    |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''b  2)
    |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''c  2)
    |'
  id: totrans-228
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 2 |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    ''a 2) |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    ''b 2) |  | ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    ''c 2) |'
- en: 'The first row displays l1 as given, while the left-most column shows l2. Each
    cell in the table corresponds to one of the pairs to be generated.Since the purpose
    of [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    is an enumeration of all such pairs, defining cross via [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    is straightforward:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€è¡Œæ˜¾ç¤º l1 çš„ç»™å®šå€¼ï¼Œè€Œæœ€å·¦ä¾§çš„åˆ—æ˜¾ç¤º l2ã€‚è¡¨ä¸­çš„æ¯ä¸ªå•å…ƒæ ¼å¯¹åº”äºè¦ç”Ÿæˆçš„å¯¹ä¸­çš„ä¸€ä¸ªã€‚ç”±äº [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    çš„ç›®çš„æ˜¯å¯¹æ‰€æœ‰è¿™æ ·çš„å¯¹è¿›è¡Œæšä¸¾ï¼Œå› æ­¤é€šè¿‡ [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    å®šä¹‰ cross æ˜¯ç›´æ¥çš„ï¼š
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    Y] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List](part_three.html#%28tech._sim-dd._list%29)
    X Y]] |'
  id: totrans-230
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    Y] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List](part_three.html#%28tech._sim-dd._list%29)
    X Y]] |'
- en: '| ;Â generates all pairs of items from l1 and l2 |'
  id: totrans-231
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ç”Ÿæˆæ¥è‡ª l1 å’Œ l2 çš„æ‰€æœ‰é¡¹ç›®å¯¹ |'
- en: '| Â  |'
  id: totrans-232
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29)Â (crossÂ ''(aÂ bÂ c)Â ''(1Â 2))
    |'
  id: totrans-233
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29)
    (cross ''(a b c) ''(1 2)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (c)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â (lengthÂ c)Â 6)))
    |'
  id: totrans-234
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    (c) ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)
    (length c) 6))) |'
- en: '| Â  |'
  id: totrans-235
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (crossÂ l1Â l2)
    |'
  id: totrans-236
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (cross l1 l2) |'
- en: '| Â Â Â ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)Â ([x1Â l1][x2Â l2])
    |'
  id: totrans-237
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    ([x1 l1][x2 l2])) |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â x1Â x2)))
    |'
  id: totrans-238
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    x1 x2))) |'
- en: We use [check-satisfied](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29)
    instead of [check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    because we do not wish to predict the exact order in which [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    generates the pairs.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½¿ç”¨ [check-satisfied](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29)
    è€Œä¸æ˜¯ [check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    å› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ›é¢„æµ‹ [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    ç”Ÿæˆå¯¹çš„å…·ä½“é¡ºåºã€‚
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X]] |'
  id: totrans-240
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29)
    [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) X]] |'
- en: '| ;Â creates a list of all rearrangements of the items in w |'
  id: totrans-241
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; åˆ›å»º w ä¸­æ‰€æœ‰é¡¹ç›®çš„é‡æ–°æ’åˆ—åˆ—è¡¨ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (arrangementsÂ w)
    |'
  id: totrans-242
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (arrangements w) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-243
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â w)Â ''(())]
    |'
  id: totrans-244
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    w)Â ''(())] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)Â ([itemÂ w]
    |'
  id: totrans-245
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    ([for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    ([item w] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [arrangement-without-item |'
  id: totrans-246
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [arrangement-without-item |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (arrangementsÂ ([remove](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remove%29%29)Â itemÂ w))])
    |'
  id: totrans-247
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (arrangements ([remove](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remove%29%29)
    item w))]) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â itemÂ arrangement-without-item))]))
    |'
  id: totrans-248
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    item arrangement-without-item))])) |'
- en: '| Â  |'
  id: totrans-249
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-250
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) X] -> [å¸ƒå°”](part_one.html#%28tech._boolean%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (all-words-from-rat?Â w)
    |'
  id: totrans-251
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (all-words-from-rat? w)) |'
- en: '| Â Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "rat")Â w)
    |'
  id: totrans-252
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)
    ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)
    ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)
    "rat") w) |'
- en: '| Â Â Â Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "art")Â w)
    |'
  id: totrans-253
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "art")Â w)
    |'
- en: '| Â Â Â Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "tar")Â w)))
    |'
  id: totrans-254
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "tar")Â w)))
    |'
- en: '| Â  |'
  id: totrans-255
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â |'
- en: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29)Â (arrangementsÂ ''("r"Â "a"Â "t"))
    |'
  id: totrans-256
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æ»¡æ„](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29)Â (arrangementsÂ ''("r"Â "a"Â "t")))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â all-words-from-rat?) |'
  id: totrans-257
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â all-words-from-rat?) |'
- en: ''
  id: totrans-258
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 108: A compact definition of arrangements with [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)'
  id: totrans-259
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾108ï¼šä½¿ç”¨[for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)å¯¹æ’åˆ—çš„ç´§å‡‘å®šä¹‰
- en: Note [FigureÂ 108](#%28counter._%28figure._fig~3apermutation-for%29%29) shows
    another in-context use of [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29).
    It displays a compact solution of the extended design problem of creating all
    possible rearrangements of the letters in a given list.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„[å›¾108](#%28counter._%28figure._fig~3apermutation-for%29%29)å±•ç¤ºäº†[for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å¦ä¸€ç§ä½¿ç”¨ã€‚å®ƒæ˜¾ç¤ºäº†åˆ›å»ºç»™å®šåˆ—è¡¨ä¸­æ‰€æœ‰å¯èƒ½æ’åˆ—çš„æ‰©å±•è®¾è®¡é—®é¢˜çš„ç´§å‡‘è§£å†³æ–¹æ¡ˆã€‚
- en: While [Word Games, the Heart of the Problem](part_two.html#%28part._sec~3apermute%29)
    sketches the proper design of this complex program, [figureÂ 108](#%28counter._%28figure._fig~3apermutation-for%29%29)
    uses the combined power of [for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)
    and an unusual form of recursion to define the same We thank Mark Engelberg for
    suggesting this exhibition of expressive power. program as a single, five-line
    function definition. The figure merely exhibits the power of these abstractions;
    for the underlying design, see especially [exerciseÂ 477](part_five.html#%28counter._fsm._%28exercise._ex~3apermutation-gen%29%29).
    End
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶[å•è¯æ¸¸æˆï¼Œé—®é¢˜çš„æ ¸å¿ƒ](part_two.html#%28part._sec~3apermute%29)æ¦‚è¿°äº†æ­¤å¤æ‚ç¨‹åºçš„æ­£ç¡®è®¾è®¡ï¼Œ[å›¾108](#%28counter._%28figure._fig~3apermutation-for%29%29)åˆ™åˆ©ç”¨[for*/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2A%2Flist%29%29)å’Œä¸€ç§ä¸å¯»å¸¸çš„é€’å½’å½¢å¼ç»“åˆçš„åŠ›é‡ï¼Œå°†ç›¸åŒçš„ç¨‹åºå®šä¹‰ä¸ºä¸€ä¸ªå•ä¸€çš„ã€äº”è¡Œçš„å‡½æ•°å®šä¹‰ã€‚è¯¥å›¾ä»…å±•ç¤ºäº†è¿™äº›æŠ½è±¡çš„å¼ºå¤§åŠŸèƒ½ï¼›å¯¹äºåº•å±‚è®¾è®¡ï¼Œè¯·ç‰¹åˆ«å‚é˜…[ç»ƒä¹ 477](part_five.html#%28counter._fsm._%28exercise._ex~3apermutation-gen%29%29)ã€‚ç»“æŸ
- en: 'The .../list suffix clearly signals that the loop expression creates a list.
    In addition, the teachpack comes with for and for* loops that have equally suggestive
    suffixes:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: '.../liståç¼€æ¸…æ¥šåœ°è¡¨æ˜å¾ªç¯è¡¨è¾¾å¼åˆ›å»ºäº†ä¸€ä¸ªåˆ—è¡¨ã€‚æ­¤å¤–ï¼Œè¯¥æ•™å­¦åŒ…è¿˜åŒ…å«å…·æœ‰åŒæ ·æš—ç¤ºæ€§åç¼€çš„forå’Œfor*å¾ªç¯ï¼š'
- en: '.../and collects the values of all iterations with [and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29):'
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '.../å¹¶ä½¿ç”¨[and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)æ”¶é›†æ‰€æœ‰è¿­ä»£çš„å€¼ï¼š'
- en: '| > ([for/and](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fand%29%29)Â ([iÂ 10])Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â 9Â i)Â 0))
    |'
  id: totrans-264
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([for/and](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fand%29%29)Â ([iÂ 10])Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â 9Â i)Â 0))
    |'
- en: '| #false |'
  id: totrans-265
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| #false |'
- en: '| > ([for/and](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fand%29%29)Â ([iÂ 10])Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([>=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e~3d%29%29)Â iÂ 0)Â iÂ #false))
    |'
  id: totrans-266
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([for/and](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fand%29%29)Â ([iÂ 10])Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([>=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e~3d%29%29)Â iÂ 0)Â iÂ #false))
    |'
- en: '| 9 |'
  id: totrans-267
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| 9 |'
- en: 'For pragmatics, the loop returns the last generated value or #false.'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¯¹äºå®é™…åº”ç”¨ï¼Œå¾ªç¯è¿”å›æœ€åä¸€ä¸ªç”Ÿæˆçš„å€¼æˆ–#falseã€‚
- en: '.../or is like .../and but uses [or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)
    instead of [and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29):'
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '.../orç±»ä¼¼äº.../andï¼Œä½†ä½¿ç”¨[or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)ä»£æ›¿[and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29):'
- en: '| > ([for/or](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2For%29%29)Â ([iÂ 10])Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â 9Â i)Â 0)Â iÂ #false))
    |'
  id: totrans-270
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([for/or](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2For%29%29)Â ([iÂ 10])Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â 9Â i)Â 0)Â iÂ #false))
    |'
- en: '| 9 |'
  id: totrans-271
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| 9 |'
- en: '| > ([for/or](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2For%29%29)Â ([iÂ 10])Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c%29%29)Â iÂ 0)Â iÂ #false))
    |'
  id: totrans-272
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([for/or](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2For%29%29)Â ([iÂ 10])Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c%29%29)Â iÂ 0)Â iÂ #false))
    |'
- en: '| #false |'
  id: totrans-273
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| #false |'
- en: 'These loops return the first value that is not #false.'
  id: totrans-274
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™äº›å¾ªç¯è¿”å›ç¬¬ä¸€ä¸ªé#falseçš„å€¼ã€‚
- en: '.../sum adds up the numbers that the iterations generate:'
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '.../sumå°†è¿­ä»£ç”Ÿæˆçš„æ•°å­—ç›¸åŠ ï¼š'
- en: '| > ([for/sum](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fsum%29%29)Â ([cÂ "abc"])Â ([string->int](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-~3eint%29%29)Â c))
    |'
  id: totrans-276
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([for/sum](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fsum%29%29)Â ([cÂ "abc"])Â ([å­—ç¬¦ä¸²è½¬æ•´æ•°](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-~3eint%29%29)Â c))
    |'
- en: '| 294 |'
  id: totrans-277
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| 294 |'
- en: '.../product multiplies the numbers that the iterations generate'
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '.../ä¹˜ç§¯å°†è¿­ä»£äº§ç”Ÿçš„æ•°å­—ç›¸ä¹˜'
- en: '| > ([for/product](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fproduct%29%29)Â ([cÂ "abc"])Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-~3eint%29%29)Â c)Â 1))
    |'
  id: totrans-279
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([for/ä¹˜ç§¯](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fproduct%29%29)Â ([cÂ "abc"])Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([å­—ç¬¦ä¸²è½¬æ•´æ•°](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-~3eint%29%29)Â c)Â 1))
    |'
- en: '| 970200 |'
  id: totrans-280
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| 970200 |'
- en: '.../string creates [String](part_one.html#%28tech._string%29)s from the [1String](part_one.html#%28tech._1string%29)
    sequence:'
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '.../å­—ç¬¦ä¸²ä»[1å­—ç¬¦ä¸²](part_one.html#%28tech._1string%29)åºåˆ—åˆ›å»º[å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)ï¼š'
- en: '| > ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â aÂ ([string->int](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-~3eint%29%29)Â "a"))
    |'
  id: totrans-282
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â aÂ ([å­—ç¬¦ä¸²è½¬æ•´æ•°](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-~3eint%29%29)Â "a"))
    |'
- en: '| > ([for/string](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fstring%29%29)Â ([jÂ 10])Â ([int->string](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._int-~3estring%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â aÂ j)))
    |'
  id: totrans-283
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([for/å­—ç¬¦ä¸²](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fstring%29%29)Â ([jÂ 10])Â ([æ•´æ•°è½¬å­—ç¬¦ä¸²](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._int-~3estring%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â aÂ j)))
    |'
- en: '| "abcdefghij" |'
  id: totrans-284
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| "abcdefghij" |'
- en: Stop! Imagine how a for/fold loop would work.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼æƒ³è±¡ä¸€ä¸‹for/foldå¾ªç¯ä¼šå¦‚ä½•å·¥ä½œã€‚
- en: Stop again! It is an instructive exercise to reformulate all of the above examples
    using the existing abstractions in ISL+. Doing so also indicates how to design
    functions with for loops instead of abstract functions. Hint Design and-map and
    or-map, which work like [andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)
    and [ormap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._ormap%29%29),
    respectively, but which return the appropriate non-#false values.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä½¿ç”¨ISL+ä¸­ç°æœ‰çš„æŠ½è±¡é‡æ–°è¡¨è¿°æ‰€æœ‰ä¸Šè¿°ç¤ºä¾‹æ˜¯ä¸€ä¸ªæœ‰æ•™è‚²æ„ä¹‰çš„ç»ƒä¹ ã€‚è¿™æ ·åšä¹Ÿè¡¨æ˜äº†å¦‚ä½•ä½¿ç”¨forå¾ªç¯è€Œä¸æ˜¯æŠ½è±¡å‡½æ•°æ¥è®¾è®¡å‡½æ•°ã€‚æç¤ºï¼šè®¾è®¡å’Œ-mapå’Œor-mapï¼Œå®ƒä»¬åˆ†åˆ«åƒ[andmap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._andmap%29%29)å’Œ[ormap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._ormap%29%29)ï¼Œä½†è¿”å›é€‚å½“çš„é-#falseå€¼ã€‚
- en: '| ;Â [N](part_two.html#%28tech._n%29) -> sequence? |'
  id: totrans-287
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [N](part_two.html#%28tech._n%29) -> sequence? |'
- en: '| ;Â constructs the infinite sequence of natural numbers, |'
  id: totrans-288
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ„å»ºè‡ªç„¶æ•°çš„æ— é™åºåˆ—ï¼Œ |'
- en: '| ;Â starting from n |'
  id: totrans-289
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»nå¼€å§‹ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([in-naturals](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-naturals%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-290
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([in-naturals](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-naturals%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-291
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [N](part_two.html#%28tech._n%29)  [N](part_two.html#%28tech._n%29)  [N](part_two.html#%28tech._n%29)
    -> sequence? |'
  id: totrans-292
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [N](part_two.html#%28tech._n%29)  [N](part_two.html#%28tech._n%29)  [N](part_two.html#%28tech._n%29)
    -> sequence? |'
- en: '| ;Â constructs the following finite sequence of natural numbers: |'
  id: totrans-293
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ„å»ºä»¥ä¸‹æœ‰é™çš„è‡ªç„¶æ•°åºåˆ—ï¼š |'
- en: '| ;Â Â Â start |'
  id: totrans-294
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â start |'
- en: '| ;Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  start  step)
    |'
  id: totrans-295
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  start  step)
    |'
- en: '| ;Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  start  step  step)
    |'
  id: totrans-296
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  start  step  step)
    |'
- en: '| ;Â Â Â ... |'
  id: totrans-297
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ... |'
- en: '| ;Â  until the number exceeds end |'
  id: totrans-298
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â  until the number exceeds end |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([in-range](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-range%29%29)Â startÂ endÂ step)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-299
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([in-range](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-range%29%29)Â startÂ endÂ step)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: ''
  id: totrans-300
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 109: Constructing sequences of natural numbers'
  id: totrans-301
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾109ï¼šæ„é€ è‡ªç„¶æ•°åºåˆ—
- en: Looping over numbers isnâ€™t always a matter of enumerating 0 through ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  1).
    Often programs need to step through nonsequential sequences of numbers; other
    times, an unlimited supply of numbers is needed. To accommodate this form of programming,
    Racket comes with functions that generate sequences, and [figureÂ 109](#%28counter._%28figure._fig~3asequence-makers%29%29)
    lists two that are provided in the abstraction teachpack for ISL+.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: éå†æ•°å­—ä¸æ€»æ˜¯ä»0åˆ°ï¼ˆ[-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  1ï¼‰è¿›è¡Œæšä¸¾ã€‚é€šå¸¸ç¨‹åºéœ€è¦éå†éé¡ºåºæ•°å­—åºåˆ—ï¼›æœ‰æ—¶ï¼Œéœ€è¦æ— é™ä¾›åº”çš„æ•°å­—ã€‚ä¸ºäº†é€‚åº”è¿™ç§ç¼–ç¨‹å½¢å¼ï¼ŒRacketæä¾›äº†ç”Ÿæˆåºåˆ—çš„å‡½æ•°ï¼Œ[å›¾109](#%28counter._%28figure._fig~3asequence-makers%29%29)åˆ—å‡ºäº†æŠ½è±¡æ•™å­¦åŒ…ä¸­æä¾›çš„ä¸¤ä¸ªå‡½æ•°ã€‚
- en: 'With the first one, we can simplify the enumerate function a bit:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªå‡½æ•°å¯ä»¥ç®€åŒ–æšä¸¾å‡½æ•°ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (enumerate.v2Â lx)
    |'
  id: totrans-304
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (enumerate.v2Â lx)
    |'
- en: '| Â Â ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([itemÂ lx]Â [ithÂ ([in-naturals](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-naturals%29%29)Â 1)])
    |'
  id: totrans-305
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ([itemÂ lx]Â [ithÂ ([in-naturals](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-naturals%29%29)Â 1)])
    |'
- en: '| Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ithÂ item)))
    |'
  id: totrans-306
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ithÂ item)))
    |'
- en: 'Here [in-naturals](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-naturals%29%29)
    is used to generate the infinite sequence of natural numbers starting at 1; the
    for loop stops when lx is exhausted.With the second one, it is, for example, possible
    to step through the even numbers among the first n:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œä½¿ç”¨ [in-naturals](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-naturals%29%29)
    ç”Ÿæˆä» 1 å¼€å§‹çš„è‡ªç„¶æ•°çš„æ— é™åºåˆ—ï¼›for å¾ªç¯åœ¨ lx è€—å°½æ—¶åœæ­¢ã€‚ä½¿ç”¨ç¬¬äºŒä¸ªå¾ªç¯ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥éå†å‰ n ä¸ªæ•°ä¸­çš„å¶æ•°ï¼š
- en: '| ;Â [N](part_two.html#%28tech._n%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-308
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [N](part_two.html#%28tech._n%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â adds the even numbers between 0 and n (exclusive) |'
  id: totrans-309
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨ 0 å’Œ n ä¹‹é—´ï¼ˆä¸åŒ…æ‹¬ nï¼‰æ·»åŠ å¶æ•° |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (sum-evensÂ 2)Â 0)
    |'
  id: totrans-310
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (sum-evensÂ 2)Â 0)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (sum-evensÂ 4)Â 2)
    |'
  id: totrans-311
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (sum-evensÂ 4)Â 2)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (sum-evensÂ n)
    |'
  id: totrans-312
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (sum-evensÂ n)
    |'
- en: '| Â Â ([for/sum](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fsum%29%29)Â ([iÂ ([in-range](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-range%29%29)Â 0Â nÂ 2)])Â i))
    |'
  id: totrans-313
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([for/sum](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Fsum%29%29)Â ([iÂ ([in-range](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-range%29%29)Â 0Â nÂ 2)])Â i))
    |'
- en: Although this use may appear trivial, many problems originating in mathematics
    call for just such loops, which is precisely why concepts such as [in-range](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-range%29%29)
    are found in many programming languages.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶è¿™ç§ç”¨æ³•å¯èƒ½çœ‹èµ·æ¥å¾ˆ trivialï¼Œä½†è®¸å¤šèµ·æºäºæ•°å­¦çš„é—®é¢˜éƒ½éœ€è¦è¿™æ ·çš„å¾ªç¯ï¼Œè¿™æ­£æ˜¯ä¸ºä»€ä¹ˆåƒ [in-range](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28def._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._in-range%29%29)
    è¿™æ ·çš„æ¦‚å¿µä¼šåœ¨è®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­æ‰¾åˆ°ã€‚
- en: ExerciseÂ 305\. Use loops to define convert-euro. See [exerciseÂ 267](part_three.html#%28counter._%28exercise._ex~3ause-map%29%29).
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  305\. ä½¿ç”¨å¾ªç¯å®šä¹‰ convert-euroã€‚å‚è§ [ç»ƒä¹  267](part_three.html#%28counter._%28exercise._ex~3ause-map%29%29)ã€‚
- en: ExerciseÂ 306\. Use loops to define a function that
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  306\. ä½¿ç”¨å¾ªç¯å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œ
- en: creates the list ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â nÂ 1))
    for any natural number n;
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â nÂ 1))
    å¯¹äºä»»ä½•è‡ªç„¶æ•° nï¼›
- en: creates the list ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 1Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â n)
    for any natural number n;
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 1Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â n)
    å¯¹äºä»»ä½•è‡ªç„¶æ•° nï¼›
- en: creates the list ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  1  1/2  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  1/n)
    for any natural number n;
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ªåˆ—è¡¨([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  1  1/2  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  1/n)å¯¹äºä»»ä½•è‡ªç„¶æ•°nï¼›
- en: creates the list of the first n even numbers; and
  id: totrans-320
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åˆ›å»ºå‰nä¸ªå¶æ•°çš„åˆ—è¡¨ï¼›å¹¶ä¸”
- en: creates a diagonal square of 0s and 1s; see [exerciseÂ 262](part_three.html#%28counter._%28exercise._ex~3alocal-for-diagonal%29%29).
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ªç”±0så’Œ1sç»„æˆçš„å¯¹è§’çº¿æ­£æ–¹å½¢ï¼›å‚è§[ç»ƒä¹ 262](part_three.html#%28counter._%28exercise._ex~3alocal-for-diagonal%29%29)ã€‚
- en: Finally, use loops to define tabulate from [exerciseÂ 250](part_three.html#%28counter._%28exercise._ex~3aabs-tabulate%29%29).
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œä½¿ç”¨å¾ªç¯å®šä¹‰tabulateï¼Œå‚è§[ç»ƒä¹ 250](part_three.html#%28counter._%28exercise._ex~3aabs-tabulate%29%29)ã€‚
- en: ExerciseÂ 307\. Define find-name. The function consumes a name and a list of
    names. It retrieves the first name on the latter that is equal to, or an extension
    of, the former.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 307ã€‚å®šä¹‰find-nameã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªåç§°å’Œä¸€ä¸ªåç§°åˆ—è¡¨ã€‚å®ƒæ£€ç´¢åè€…ä¸­ä¸å‰è€…ç›¸ç­‰æˆ–ä¸ºå‰è€…çš„æ‰©å±•çš„ç¬¬ä¸€ä¸ªåç§°ã€‚
- en: Define a function that ensures that no name on some list of names exceeds some
    given width. Compare with [exerciseÂ 271](part_three.html#%28counter._%28exercise._ex~3aand-or-map%29%29).
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç¡®ä¿æŸä¸ªåç§°åˆ—è¡¨ä¸­çš„åç§°ä¸è¶…è¿‡æŸä¸ªç»™å®šçš„å®½åº¦ã€‚ä¸[ç»ƒä¹ 271](part_three.html#%28counter._%28exercise._ex~3aand-or-map%29%29)æ¯”è¾ƒã€‚
- en: Pattern Matching[ğŸ”—](#(part._.Pattern_.Matching) "Link to here")
  id: totrans-325
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: æ¨¡å¼åŒ¹é…[ğŸ”—](#(part._.Pattern_.Matching) "é“¾æ¥è‡³æ­¤")
- en: When we design a function for a data definition with six clauses, we use a six-pronged
    [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    expression. When we formulate one of the [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clauses, we use a predicate toThe interested instructor may wish to study the
    facilities of the 2htdp/abstraction teachpack to define algebraic data types.
    determine whether this clause should process the given value and, if so, selectors
    to deconstruct any compound values. The first three parts of this book explain
    this idea over and over again.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æˆ‘ä»¬ä¸ºå…·æœ‰å…­ä¸ªå­å¥çš„æ•°æ®å®šä¹‰è®¾è®¡ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨å…­åˆ†æ”¯çš„[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)è¡¨è¾¾å¼ã€‚å½“æˆ‘ä»¬åˆ¶å®šä¸€ä¸ª[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨è°“è¯æ¥ç¡®å®šè¿™ä¸ªå­å¥æ˜¯å¦åº”è¯¥å¤„ç†ç»™å®šçš„å€¼ï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œåˆ™ä½¿ç”¨é€‰æ‹©å™¨æ¥åˆ†è§£ä»»ä½•å¤åˆå€¼ã€‚æœ¬ä¹¦çš„å‰ä¸‰éƒ¨åˆ†åå¤è§£é‡Šäº†è¿™ä¸ªæƒ³æ³•ã€‚
- en: Repetition calls for abstraction. While [Abstraction](part_three.html) explains
    how programmers can create some of these abstractions, the predicate-selector
    pattern can be addressed only by a language designer. In particular, the designers
    of functional programming languages have recognized the need for abstracting these
    repetitive uses of predicates and selectors. These languages therefore provide
    pattern matching as a linguistic construct that combines and simplifies these
    [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clauses.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: é‡å¤è°ƒç”¨éœ€è¦æŠ½è±¡ã€‚è™½ç„¶[æŠ½è±¡](part_three.html)è§£é‡Šäº†ç¨‹åºå‘˜å¦‚ä½•åˆ›å»ºè¿™äº›æŠ½è±¡ï¼Œä½†è°“è¯é€‰æ‹©å™¨æ¨¡å¼åªèƒ½ç”±è¯­è¨€è®¾è®¡è€…å¤„ç†ã€‚ç‰¹åˆ«æ˜¯ï¼Œå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€çš„è®¾è®¡è€…å·²ç»è®¤è¯†åˆ°æŠ½è±¡è¿™äº›é‡å¤ä½¿ç”¨è°“è¯å’Œé€‰æ‹©å™¨çš„éœ€æ±‚ã€‚å› æ­¤ï¼Œè¿™äº›è¯­è¨€æä¾›äº†æ¨¡å¼åŒ¹é…ä½œä¸ºä¸€ç§è¯­è¨€ç»“æ„ï¼Œå®ƒç»“åˆå¹¶ç®€åŒ–äº†è¿™äº›[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥ã€‚
- en: This section presents a simplification of Racketâ€™s pattern matcher. [FigureÂ 110](#%28counter._%28figure._fig~3asyn-match%29%29)
    displays its grammar; match is clearly a syntactically complex construct. While
    its outline resembles that of [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29),
    it features patterns instead of conditions, and they come with their own rules.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬èŠ‚ä»‹ç»äº†Racketçš„æ¨¡å¼åŒ¹é…å™¨çš„ç®€åŒ–ç‰ˆã€‚[å›¾110](#%28counter._%28figure._fig~3asyn-match%29%29)æ˜¾ç¤ºäº†å…¶è¯­æ³•ï¼›åŒ¹é…æ˜¾ç„¶æ˜¯ä¸€ä¸ªè¯­æ³•å¤æ‚çš„ç»“æ„ã€‚è™½ç„¶å…¶è½®å»“ç±»ä¼¼äº[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)ï¼Œä½†å®ƒä½¿ç”¨æ¨¡å¼è€Œä¸æ˜¯æ¡ä»¶ï¼Œå¹¶ä¸”å®ƒä»¬æœ‰è‡ªå·±çš„è§„åˆ™ã€‚
- en: '| Â Â expr | Â  | = | Â  | ... |'
  id: totrans-329
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   expr |   | = |   | ... |'
- en: '| Â  | Â  | &#124; | Â  | ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â exprÂ [patternÂ expr]Â ...)
    |'
  id: totrans-330
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â exprÂ [patternÂ expr]Â ...)
    |'
- en: '| Â  | Â  | Â  | Â  | Â  |'
  id: totrans-331
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | Â  | Â  | Â  |'
- en: '| Â Â pattern | Â  | = | Â  | variable |'
  id: totrans-332
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â pattern | Â  | = | Â  | variable |'
- en: '| Â  | Â  | &#124; | Â  | literal-constant |'
  id: totrans-333
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | æ–‡å­—å¸¸é‡ |'
- en: '| Â  | Â  | &#124; | Â  | (consÂ patternÂ pattern) |'
  id: totrans-334
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | (consÂ patternÂ pattern) |'
- en: '| Â  | Â  | &#124; | Â  | (structure-nameÂ patternÂ ...) |'
  id: totrans-335
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | (ç»“æ„åÂ patternÂ ...) |'
- en: '| Â  | Â  | &#124; | Â  | (?Â predicate-name) |'
  id: totrans-336
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  | Â  | &#124; | Â  | (?Â è°“è¯å) |'
- en: ''
  id: totrans-337
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 110: ISL+ match expressions'
  id: totrans-338
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 110ï¼šISL+ åŒ¹é…è¡¨è¾¾å¼
- en: Roughly speaking,
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: å¤§è‡´æ¥è¯´ï¼Œ
- en: '| ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â expr
    |'
  id: totrans-340
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â expr
    |'
- en: '| Â Â [pattern1Â expr1] |'
  id: totrans-341
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [pattern1Â expr1] |'
- en: '| Â Â [pattern2Â expr2] |'
  id: totrans-342
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [pattern2Â expr2] |'
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-343
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: 'proceeds like a [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    expression in that it evaluates expr and sequentially tries to match its result
    with pattern1, pattern2, ... until it succeeds with patterni. At that point, it
    determines the value of expri, which is also the result of the entire [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    expression.The key difference is that [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29),
    unlike [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29),
    introduces a new scope, which is best illustrated with a screen shot from DrRacket:'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒçš„æ‰§è¡Œè¿‡ç¨‹ç±»ä¼¼äºä¸€ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    è¡¨è¾¾å¼ï¼Œå®ƒä¼šè¯„ä¼° expr å¹¶ä¾æ¬¡å°è¯•å°†å…¶ç»“æœä¸ pattern1ã€pattern2ã€... åŒ¹é…ï¼Œç›´åˆ°æˆåŠŸåŒ¹é… patterniã€‚åœ¨æ­¤ç‚¹ï¼Œå®ƒç¡®å®š expri
    çš„å€¼ï¼Œè¿™ä¹Ÿæ˜¯æ•´ä¸ª [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    è¡¨è¾¾å¼çš„ç»“æœã€‚å…³é”®åŒºåˆ«åœ¨äº [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    ä¸ [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    ä¸åŒï¼Œå®ƒå¼•å…¥äº†ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œè¿™æœ€å¥½é€šè¿‡ DrRacket çš„å±å¹•æˆªå›¾æ¥è¯´æ˜ï¼š
- en: '![image](../Images/dbb346afcc57ed5065d94bda2906ceae.png)'
  id: totrans-345
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/dbb346afcc57ed5065d94bda2906ceae.png)'
- en: As the image shows, each pattern clause of this function binds variables. Furthermore,
    the scope of a variable is the body of the clause, so even if two patterns introduce
    the same variable bindingâ€”<wbr>as is the case in the above code snippetâ€”<wbr>their
    bindings cannot interfere with each other.Syntactically, a pattern resembles nested,
    structural data whose leafs are literal constants, variables, or predicate patterns
    of the shape
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¯¥å‡½æ•°çš„æ¯ä¸ªæ¨¡å¼å­å¥éƒ½ä¼šç»‘å®šå˜é‡ã€‚æ­¤å¤–ï¼Œå˜é‡çš„ä½œç”¨åŸŸæ˜¯å­å¥çš„ä¸»ä½“ï¼Œå› æ­¤å³ä½¿ä¸¤ä¸ªæ¨¡å¼å¼•å…¥äº†ç›¸åŒçš„å˜é‡ç»‘å®šâ€”â€”å¦‚ä¸Šè¿°ä»£ç ç‰‡æ®µæ‰€ç¤ºâ€”â€”å®ƒä»¬çš„ç»‘å®šä¹Ÿä¸ä¼šç›¸äº’å¹²æ‰°ã€‚åœ¨è¯­æ³•ä¸Šï¼Œæ¨¡å¼ç±»ä¼¼äºåµŒå¥—çš„ç»“æ„åŒ–æ•°æ®ï¼Œå…¶å¶å­æ˜¯æ–‡å­—å¸¸é‡ã€å˜é‡æˆ–å½¢çŠ¶ä¸ºè°“è¯æ¨¡å¼çš„æ¨¡å¼
- en: (?Â predicate-name)
  id: totrans-347
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (?Â è°“è¯å)
- en: In the latter, predicate-name must refer to a predicate function in scope, that
    is, a function that consumes one value and produces a [Boolean](part_one.html#%28tech._boolean%29).
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨åè€…ä¸­ï¼Œè°“è¯åå¿…é¡»å¼•ç”¨ä½œç”¨åŸŸå†…çš„è°“è¯å‡½æ•°ï¼Œå³æ¶ˆè€—ä¸€ä¸ªå€¼å¹¶äº§ç”Ÿ [å¸ƒå°”å€¼](part_one.html#%28tech._boolean%29) çš„å‡½æ•°ã€‚
- en: Semantically, a pattern is [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)ed
    to a value v. If the pattern is
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¯­ä¹‰ä¸Šï¼Œæ¨¡å¼è¢« [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    åˆ°å€¼ vã€‚å¦‚æœæ¨¡å¼æ˜¯
- en: a literal-constant, it matches only that literal constant
  id: totrans-350
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ–‡å­—å¸¸é‡ï¼Œå®ƒåªåŒ¹é…é‚£ä¸ªæ–‡å­—å¸¸é‡
- en: '|'
  id: totrans-351
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-352
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â 4
    &#124;'
  id: totrans-353
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â 4
    &#124;'
- en: '&#124; Â Â Â Â [''fourÂ Â 1] &#124;'
  id: totrans-354
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â [''fourÂ Â 1] &#124;'
- en: '&#124; Â Â Â Â ["four"Â 2] &#124;'
  id: totrans-355
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ["four"Â 2] &#124;'
- en: '&#124; Â Â Â Â [#trueÂ Â 3] &#124;'
  id: totrans-356
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â [#trueÂ Â 3] &#124;'
- en: '&#124; Â Â Â Â [4Â Â Â Â Â Â "hello world"]) &#124;'
  id: totrans-357
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â [4Â Â Â Â Â Â "hello world"]) &#124;'
- en: ''
  id: totrans-358
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-359
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| "hello world" |'
  id: totrans-360
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| "hello world" |'
- en: a variable, it matches any value, and it is associated with this value during
    the evaluation of the body of the corresponding [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    clause
  id: totrans-361
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå˜é‡ï¼Œå®ƒå¯ä»¥åŒ¹é…ä»»ä½•å€¼ï¼Œå¹¶ä¸”åœ¨è¯„ä¼°ç›¸åº”çš„ [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    å­å¥çš„ä¸»ä½“æ—¶ä¸è¿™ä¸ªå€¼ç›¸å…³è”
- en: '|'
  id: totrans-362
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-363
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â 2
    &#124;'
  id: totrans-364
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â 2
    &#124;'
- en: '&#124; Â Â Â Â [3Â "one"] &#124;'
  id: totrans-365
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â [3Â "one"] &#124;'
- en: '&#124; Â Â Â Â [xÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 3)])
    &#124;'
  id: totrans-366
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â [xÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ 3)])
    &#124;'
- en: ''
  id: totrans-367
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-368
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| 5 |'
  id: totrans-369
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| 5 |'
- en: Since 2 does not equal the first pattern, which is the literal constant 3, [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    matches 2 with the second pattern, which is a plain variable and thus matches
    any value. Hence, [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    picks the second clause and evaluates its body, with x standing for 2.
  id: totrans-370
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç”±äº 2 ä¸ç­‰äºç¬¬ä¸€ä¸ªæ¨¡å¼ï¼Œå³å­—é¢å¸¸é‡ 3ï¼Œ[match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    å°† 2 ä¸ç¬¬äºŒä¸ªæ¨¡å¼åŒ¹é…ï¼Œè¯¥æ¨¡å¼æ˜¯ä¸€ä¸ªæ™®é€šå˜é‡ï¼Œå› æ­¤å¯ä»¥åŒ¹é…ä»»ä½•å€¼ã€‚å› æ­¤ï¼Œ[match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    é€‰æ‹©ç¬¬äºŒä¸ªå­å¥å¹¶è¯„ä¼°å…¶ä¸»ä½“ï¼Œå…¶ä¸­ x ä»£è¡¨ 2ã€‚
- en: ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  pattern1
    pattern2), it matches only an instance of [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29),
    assuming its first field matches pattern1 and its rest matches pattern2
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  pattern1
    pattern2), å®ƒåªåŒ¹é… [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    çš„ä¸€ä¸ªå®ä¾‹ï¼Œå‡è®¾å…¶ç¬¬ä¸€ä¸ªå­—æ®µä¸ pattern1 åŒ¹é…ï¼Œå…¶ä½™ä¸ pattern2 åŒ¹é…
- en: '|'
  id: totrans-372
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-373
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â ''())
    &#124;'
  id: totrans-374
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â ''())
    &#124;'
- en: '&#124; Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â tail)Â tail]
    &#124;'
  id: totrans-375
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â tail)Â tail]
    &#124;'
- en: '&#124; Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â headÂ tail)Â head])
    &#124;'
  id: totrans-376
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â headÂ tail)Â head])
    &#124;'
- en: ''
  id: totrans-377
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-378
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| ''() |'
  id: totrans-379
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''() |'
- en: '|'
  id: totrans-380
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-381
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 2Â ''())
    &#124;'
  id: totrans-382
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    2Â ''()) &#124;'
- en: '&#124; Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â tail)Â tail]
    &#124;'
  id: totrans-383
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â tail)Â tail]
    &#124;'
- en: '&#124; Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â headÂ tail)Â head])
    &#124;'
  id: totrans-384
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â headÂ tail)Â head])
    &#124;'
- en: ''
  id: totrans-385
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-386
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| 2 |'
  id: totrans-387
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| 2 |'
- en: These interactions show how [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    first deconstructs [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    and then uses literal constants and variables for the leafs of the given list.
  id: totrans-388
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™äº›äº¤äº’å±•ç¤ºäº†å¦‚ä½•é¦–å…ˆä½¿ç”¨ [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    å¯¹ [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    è¿›è¡Œè§£æ„ï¼Œç„¶åä½¿ç”¨å­—é¢å¸¸é‡å’Œå˜é‡ä½œä¸ºç»™å®šåˆ—è¡¨çš„å¶å­èŠ‚ç‚¹ã€‚
- en: (structure-name  pattern1 [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  patternn),
    it matches only a structure-name structure, assuming its field values match pattern1,
    ..., patternn
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (structure-name  pattern1 [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  patternn),
    å®ƒåªåŒ¹é…å…·æœ‰ç»“æ„åç»“æ„çš„ç»“æ„ï¼Œå‡è®¾å…¶å­—æ®µå€¼ä¸ pattern1, ..., patternn åŒ¹é…
- en: '| > ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â pÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 3Â 4))
    |'
  id: totrans-390
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â pÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 3Â 4))
    |'
- en: '|'
  id: totrans-391
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-392
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â p
    &#124;'
  id: totrans-393
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â p
    &#124;'
- en: '&#124; Â Â Â Â [(posnÂ xÂ y)Â ([sqrt](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sqrt%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([sqr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sqr%29%29)Â x)Â ([sqr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sqr%29%29)Â y)))])
    &#124;'
  id: totrans-394
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â [(posnÂ xÂ y)Â ([sqrt](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sqrt%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([sqr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sqr%29%29)Â x)Â ([sqr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sqr%29%29)Â y)))])
    &#124;'
- en: ''
  id: totrans-395
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-396
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| 5 |'
  id: totrans-397
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| 5 |'
- en: 'Obviously, matching an instance of posn with a pattern is just like matching
    a [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    pattern. Note, though, how the pattern uses posn for the pattern, not the name
    of the constructor.Matching also works for our own structure type definitions:'
  id: totrans-398
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: æ˜¾ç„¶ï¼Œä½¿ç”¨æ¨¡å¼åŒ¹é… posn å®ä¾‹å°±åƒåŒ¹é… [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    æ¨¡å¼ä¸€æ ·ã€‚æ³¨æ„ï¼Œå°½ç®¡æ¨¡å¼ä½¿ç”¨ posn è€Œä¸æ˜¯æ„é€ å‡½æ•°çš„åç§°æ¥ä½œä¸ºæ¨¡å¼ï¼ŒåŒ¹é…ä¹Ÿé€‚ç”¨äºæˆ‘ä»¬è‡ªå·±çš„ç»“æ„ç±»å‹å®šä¹‰ï¼š
- en: '| > ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â phoneÂ [areaÂ switchÂ four])
    |'
  id: totrans-399
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â phoneÂ [areaÂ switchÂ four])
    |'
- en: '|'
  id: totrans-400
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-401
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â (make-phoneÂ 713Â 664Â 9993)
    &#124;'
  id: totrans-402
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    (make-phone 713 664 9993)) &#124;'
- en: '&#124; Â Â Â Â [(phoneÂ xÂ yÂ z)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ yÂ z)])
    &#124;'
  id: totrans-403
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;   [(phone x y z) ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    x y z)] &#124;'
- en: ''
  id: totrans-404
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-405
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| 11370 |'
  id: totrans-406
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| 11370 |'
- en: 'Again, the pattern uses the name of the structure, phone.Finally, matching
    also works across several layers of constructions:'
  id: totrans-407
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å†æ¬¡ï¼Œæ¨¡å¼ä½¿ç”¨äº†ç»“æ„ä½“çš„åç§°ï¼Œphoneã€‚æœ€åï¼ŒåŒ¹é…ä¹Ÿå¯ä»¥è·¨è¶Šå¤šå±‚æ„é€ ï¼š
- en: '|'
  id: totrans-408
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-409
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â (make-phoneÂ 713Â 664Â 9993)Â ''())
    &#124;'
  id: totrans-410
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    (make-phone 713 664 9993) ''())) &#124;'
- en: '&#124; Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â (phoneÂ area-codeÂ 664Â 9993)Â tail)
    &#124;'
  id: totrans-411
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;   [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    (phone area-code 664 9993) tail) &#124;'
- en: '&#124; Â Â Â Â Â area-code]) &#124;'
  id: totrans-412
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;   area-code] &#124;'
- en: ''
  id: totrans-413
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-414
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| 713 |'
  id: totrans-415
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| 713 |'
- en: This [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    expression extracts the area code from a phone number in a list if the switch
    code is 664 and the last four digits are 9993.
  id: totrans-416
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™ä¸ª [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    è¡¨è¾¾å¼åœ¨åˆ—è¡¨ä¸­çš„ç”µè¯å·ç ä¸­æå–åŒºå·ï¼Œå¦‚æœå¼€å…³ä»£ç æ˜¯ 664 ä¸”æœ€åå››ä½æ˜¯ 9993ã€‚
- en: '(?  predicate-name), it matches when (predicate-name  v) produces #true'
  id: totrans-417
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '(? predicate-name)ï¼Œå½“ (predicate-name v) äº§ç”Ÿ #true æ—¶ï¼Œå®ƒåŒ¹é…'
- en: '|'
  id: totrans-418
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-419
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 1Â ''())
    &#124;'
  id: totrans-420
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    1 ''())) &#124;'
- en: '&#124; Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â (?Â [symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29))Â tail)Â tail]
    &#124;'
  id: totrans-421
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;   [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    (? [symbol?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3f%29%29))
    tail) tail] &#124;'
- en: '&#124; Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â headÂ tail)Â head])
    &#124;'
  id: totrans-422
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;   [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    head tail) head] &#124;'
- en: ''
  id: totrans-423
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-424
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| 1 |'
  id: totrans-425
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| 1 |'
- en: This expression produces 1, the result of the second clause, because 1 is not
    a symbol.
  id: totrans-426
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè¡¨è¾¾å¼äº§ç”Ÿ 1ï¼Œå³ç¬¬äºŒä¸ªå­å¥çš„ç»“æœï¼Œå› ä¸º 1 ä¸æ˜¯ä¸€ä¸ªç¬¦å·ã€‚
- en: 'Stop! Experiment with [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    before you read on.At this point, it is time to demonstrate the usefulness of
    [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29):'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œå…ˆå®éªŒä¸€ä¸‹ [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    çš„ç”¨æ³•ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ˜¯æ—¶å€™å±•ç¤º [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    çš„æœ‰ç”¨æ€§äº†ï¼š
- en: 'Sample Problem Design the function last-item, which retrieves the last item
    on a non-empty list. Recall that non-empty lists are defined as follows:'
  id: totrans-428
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜ è®¾è®¡å‡½æ•°last-itemï¼Œç”¨äºæ£€ç´¢éç©ºåˆ—è¡¨ä¸Šçš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚å›æƒ³ä¸€ä¸‹ï¼Œéç©ºåˆ—è¡¨å¦‚ä¸‹å®šä¹‰ï¼š
- en: ''
  id: totrans-429
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ;Â A [Non-empty-list X] is one of: |'
  id: totrans-430
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A [Non-empty-list X] is one of: |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  X  ''())
    |'
  id: totrans-431
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  X  ''())
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  X  [[Non-empty-list](#%28tech._non._empty._list%29)  X])
    |'
  id: totrans-432
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  X  [[Non-empty-list](#%28tech._non._empty._list%29)  X])
    |'
- en: 'Stop! [Arbitrarily Large Data](part_two.html) deals with this problem. Look
    up the solution.With [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29),
    a designer can eliminate three selectors and two predicates from the solution
    using [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29):'
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼[ä»»æ„å¤§é‡æ•°æ®](part_two.html)å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆã€‚ä½¿ç”¨[match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)ï¼Œè®¾è®¡å¸ˆå¯ä»¥ä»è§£å†³æ–¹æ¡ˆä¸­æ¶ˆé™¤ä¸‰ä¸ªé€‰æ‹©å™¨å’Œä¸¤ä¸ªè°“è¯ï¼Œä½¿ç”¨[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)ï¼š
- en: '| ;Â [[Non-empty-list](#%28tech._non._empty._list%29) X] -> X |'
  id: totrans-434
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[Non-empty-list](#%28tech._non._empty._list%29) X] -> X |'
- en: '| ;Â retrieves the last item of ne-l |'
  id: totrans-435
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ£€ç´¢ne-lçš„æœ€åä¸€ä¸ªå…ƒç´  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (last-itemÂ ''(aÂ bÂ c))Â ''c)
    |'
  id: totrans-436
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (last-itemÂ ''(aÂ bÂ c))Â ''c)
    |'
- en: '| ([check-error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-error%29%29)Â (last-itemÂ ''()))
    |'
  id: totrans-437
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-error%29%29)Â (last-itemÂ ''()))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (last-itemÂ ne-l)
    |'
  id: totrans-438
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (last-itemÂ ne-l)
    |'
- en: '| Â Â ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â ne-l
    |'
  id: totrans-439
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â ne-l
    |'
- en: '| Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â lstÂ ''())Â lst]
    |'
  id: totrans-440
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â lstÂ ''())Â lst]
    |'
- en: '| Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â fstÂ rst)Â (last-itemÂ rst)]))
    |'
  id: totrans-441
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â fstÂ rst)Â (last-itemÂ rst)]))
    |'
- en: Instead of predicates and selectors, this solution uses patterns that are just
    like those found in the data definition. For each self-reference and occurrence
    of the set parameter in the data definition, the patterns use program-level variables.
    The bodies of the [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    clauses no longer extract the relevant parts from the list with selectors but
    simply refer to these names. As before, the function recurs on the [rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    field of the given [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    because the data definition refers to itself in this position. In the base case,
    the answer is lst, the variable that stands for the last item on the list.
  id: totrans-442
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸è°“è¯å’Œé€‰æ‹©å™¨ä¸åŒï¼Œæ­¤è§£å†³æ–¹æ¡ˆä½¿ç”¨ä¸æ•°æ®å®šä¹‰ä¸­æ‰¾åˆ°çš„ç±»ä¼¼æ¨¡å¼ã€‚å¯¹äºæ•°æ®å®šä¹‰ä¸­æ¯ä¸ªè‡ªå¼•ç”¨å’Œé›†åˆå‚æ•°çš„å‡ºç°ï¼Œæ¨¡å¼ä½¿ç”¨ç¨‹åºçº§å˜é‡ã€‚[match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)å­å¥çš„ä¸»ä½“ä¸å†ä½¿ç”¨é€‰æ‹©å™¨ä»åˆ—è¡¨ä¸­æå–ç›¸å…³éƒ¨åˆ†ï¼Œè€Œæ˜¯ç›´æ¥å¼•ç”¨è¿™äº›åç§°ã€‚ä¸ä¹‹å‰ä¸€æ ·ï¼Œå‡½æ•°åœ¨ç»™å®š[cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)çš„[rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)å­—æ®µä¸Šé€’å½’ï¼Œå› ä¸ºæ•°æ®å®šä¹‰åœ¨æ­¤ä½ç½®å¼•ç”¨è‡ªèº«ã€‚åœ¨åŸºæœ¬æƒ…å†µä¸­ï¼Œç­”æ¡ˆæ˜¯lstï¼Œå®ƒæ˜¯ä»£è¡¨åˆ—è¡¨æœ€åä¸€ä¸ªé¡¹ç›®çš„å˜é‡ã€‚
- en: 'Letâ€™s take a look at a second problem from [Arbitrarily Large Data](part_two.html):'
  id: totrans-443
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬çœ‹çœ‹æ¥è‡ª[ä»»æ„å¤§é‡æ•°æ®](part_two.html)çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼š
- en: 'Sample Problem Design the function depth, which measures the number of layers
    surrounding a Russian doll. Here is the data definition again:'
  id: totrans-444
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªåä¸ºdepthçš„å‡½æ•°ï¼Œå®ƒæµ‹é‡å›´ç»•ä¿„ç½—æ–¯å¨ƒå¨ƒçš„å±‚æ•°ã€‚å†æ¬¡æä¾›æ•°æ®å®šä¹‰ï¼š
- en: ''
  id: totrans-445
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â layerÂ [[color](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._color%29%29)Â doll])
    |'
  id: totrans-446
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â layerÂ [[color](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._color%29%29)Â doll])
    |'
- en: '| ;Â An RD.v2 (short for Russian doll) is one of: |'
  id: totrans-447
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An RD.v2 (short for Russian doll) is one of: |'
- en: '| ;Â â€“  "doll" |'
  id: totrans-448
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  "doll" |'
- en: '| ;Â â€“  (make-layer  [String](part_one.html#%28tech._string%29)  [RD.v2](#%28tech._rd..v2%29))
    |'
  id: totrans-449
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  (make-layer  [String](part_one.html#%28tech._string%29)  [RD.v2](#%28tech._rd..v2%29))
    |'
- en: 'Here is a definition of depth using [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29):'
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯ä½¿ç”¨[match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)å®šä¹‰æ·±åº¦çš„ç¤ºä¾‹ï¼š
- en: '| ;Â [RD.v2](#%28tech._rd..v2%29) -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-451
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [RD.v2](#%28tech._rd..v2%29) -> [N](part_two.html#%28tech._n%29) |'
- en: '| ;Â how many dolls are a part of an-rd |'
  id: totrans-452
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â how many dolls are a part of an-rd |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (depthÂ (make-layerÂ "red"Â "doll"))Â 1)
    |'
  id: totrans-453
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (depthÂ (make-layerÂ "red"Â "doll"))Â 1)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (depthÂ a-doll)
    |'
  id: totrans-454
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (depthÂ a-doll)
    |'
- en: '| Â Â ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â a-doll
    |'
  id: totrans-455
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â a-doll
    |'
- en: '| Â Â Â Â ["doll"Â 0] |'
  id: totrans-456
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ["doll"Â 0] |'
- en: '| Â Â Â Â [(layerÂ cÂ inside)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (depthÂ inside)Â 1)]))
    |'
  id: totrans-457
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(layerÂ cÂ inside)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (depthÂ inside)Â 1)]))
    |'
- en: 'While the pattern in the first [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    clause looks for "doll", the second one matches any layer structure, associating
    c with the value in the [color](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._color%29%29)
    field and inside with the value in the doll field. In short, [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    again makes the function definition concise.The final problem is an excerpt from
    the generalized UFO game:'
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç¬¬ä¸€ä¸ª [match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    å­å¥çš„å›¾æ¡ˆå¯»æ‰¾ "doll" æ—¶ï¼Œç¬¬äºŒä¸ªåŒ¹é…ä»»ä½•å±‚ç»“æ„ï¼Œå°† c ä¸ [color](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._color%29%29)
    å­—æ®µä¸­çš„å€¼å…³è”ï¼Œå¹¶å°† inside ä¸ doll å­—æ®µä¸­çš„å€¼å…³è”ã€‚ç®€è€Œè¨€ä¹‹ï¼Œ[match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)
    å†æ¬¡ä½¿å‡½æ•°å®šä¹‰ç®€æ´ã€‚æœ€ç»ˆé—®é¢˜æ‘˜è‡ªé€šç”¨å¤–æ˜Ÿäººæ¸¸æˆï¼š
- en: Sample Problem Design the move-right function. It consumes a list of [Posn](part_one.html#%28tech._posn%29)s,
    which represent the positions of objects on a canvas, plus a number. The function
    adds the latter to each x-coordinate, which represents a rightward movement of
    these objects.
  id: totrans-459
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·ä¾‹é—®é¢˜ï¼šè®¾è®¡ move-right å‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29) çš„åˆ—è¡¨ï¼Œè¿™äº›åˆ—è¡¨ä»£è¡¨ç”»å¸ƒä¸Šå¯¹è±¡çš„ä½ç½®ï¼Œä»¥åŠä¸€ä¸ªæ•°å­—ã€‚è¯¥å‡½æ•°å°†åè€…æ·»åŠ åˆ°æ¯ä¸ª
    x åæ ‡ä¸Šï¼Œè¿™ä»£è¡¨è¿™äº›å¯¹è±¡çš„å‘å³ç§»åŠ¨ã€‚
- en: 'Here is our solution, using the full power of ISL+:'
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆï¼Œåˆ©ç”¨äº† ISL+ çš„å…¨éƒ¨åŠŸèƒ½ï¼š
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Posn](part_one.html#%28tech._posn%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Posn](part_one.html#%28tech._posn%29)]
    |'
  id: totrans-461
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [Posn](part_one.html#%28tech._posn%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [Posn](part_one.html#%28tech._posn%29)]
    |'
- en: '| ;Â moves each object right by delta-x pixels |'
  id: totrans-462
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å°†æ¯ä¸ªå¯¹è±¡å‘å³ç§»åŠ¨ delta-x åƒç´  |'
- en: '| Â  |'
  id: totrans-463
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â inputÂ Â `(,([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 1Â 1)Â ,([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 10Â 14)))
    |'
  id: totrans-464
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    input `(,([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)
    1 1) ,([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)
    10 14))) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â expectÂ `(,([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 4Â 1)Â ,([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 13Â 14)))
    |'
  id: totrans-465
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    expect `(,([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)
    4 1) ,([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)
    13 14))) |'
- en: '| Â  |'
  id: totrans-466
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (move-rightÂ inputÂ 3)Â expect)
    |'
  id: totrans-467
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    (move-right input 3) expect) |'
- en: '| Â  |'
  id: totrans-468
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (move-rightÂ lopÂ delta-x)
    |'
  id: totrans-469
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (move-right lop delta-x) |'
- en: '| Â Â ([for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)Â ((pÂ lop))
    |'
  id: totrans-470
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[for/list](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._for%2Flist%29%29)
    ((p lop)) |'
- en: '| Â Â Â Â ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â p
    |'
  id: totrans-471
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([match](http://docs.racket-lang.org/teachpack/2htdpabstraction.html#%28form._x._%28%28lib._teachpack%2F2htdp%2Fabstraction..rkt%29._match%29%29)Â p
    |'
- en: '| Â Â Â Â Â [(posnÂ xÂ y)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ delta-x)Â y)])))
    |'
  id: totrans-472
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â [(posnÂ xÂ y)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â xÂ delta-x)Â y)])))
    |'
- en: Stop! Did you notice that we use [define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    to formulate the tests? If you give data examples good names with [define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    and write down next to them what a function produces as the expected result, you
    can read the code later much more easily than if you had just written down the
    constants.
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä½ æ³¨æ„åˆ°æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ [define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    æ¥åˆ¶å®šæµ‹è¯•å—ï¼Ÿå¦‚æœä½ ç”¨ [define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ä¸ºæ•°æ®ç¤ºä¾‹å‘½åï¼Œå¹¶åœ¨æ—è¾¹å†™ä¸‹å‡½æ•°äº§ç”Ÿçš„é¢„æœŸç»“æœï¼Œé‚£ä¹ˆä½ ä»¥åé˜…è¯»ä»£ç ä¼šå®¹æ˜“å¾—å¤šï¼Œè€Œä¸æ˜¯ä»…ä»…å†™ä¸‹å¸¸æ•°ã€‚
- en: Stop! How does a solution with [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    and selectors compare? Write it out and compare the two. Which one do you like
    better?
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä½¿ç”¨ [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    å’Œé€‰æ‹©å™¨å¾—åˆ°çš„è§£å†³æ–¹æ¡ˆå¦‚ä½•æ¯”è¾ƒï¼ŸæŠŠå®ƒä»¬å†™å‡ºæ¥å¹¶æ¯”è¾ƒä¸€ä¸‹ã€‚ä½ æ›´å–œæ¬¢å“ªä¸€ä¸ªï¼Ÿ
- en: ExerciseÂ 308\. Design the function replace, which substitutes the area code
    713 with 281 in a list of phone records.
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  308\. è®¾è®¡ä¸€ä¸ªåä¸º replace çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ç”µè¯è®°å½•åˆ—è¡¨ä¸­çš„åŒºå· 713 æ›¿æ¢ä¸º 281ã€‚
- en: ExerciseÂ 309\. Design the function words-on-line, which determines the number
    of [String](part_one.html#%28tech._string%29)s per item in a list of list of strings.
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  309\. è®¾è®¡ä¸€ä¸ªåä¸º words-on-line çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°ç¡®å®šå­—ç¬¦ä¸²åˆ—è¡¨åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ ä¸­çš„ [String](part_one.html#%28tech._string%29)
    æ•°é‡ã€‚
