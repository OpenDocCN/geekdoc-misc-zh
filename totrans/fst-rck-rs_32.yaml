- en: Regular Expressions
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://freddiehaddad.github.io/fast-track-to-rust/regular_expression.html](https://freddiehaddad.github.io/fast-track-to-rust/regular_expression.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: With the `Regex` crate added to our project, we'll replace the `pattern` string
    slice we've been using with a regular expression.
  prefs: []
  type: TYPE_NORMAL
- en: '[Using Regex](#using-regex)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The `Regex` modules defines a `new` method that takes a regular expression,
    attempts to compile it, and returns a `Regex` object.^([1](#footnote-1))
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Since compiling a regular expression can fail (e.g., due to an invalid pattern),
    `new` returns a `Result`. Here is the function signature for `new`^([2](#footnote-2)):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: The function signature indicates that the `Ok` variant returns a `Regex`, while
    the `Err` variant returns an `Error`. Since our rustle program can't continue
    with an invalid regular expression, we need to catch that case, display a helpful
    error message, and exit the program.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s put all this together:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Run the code to see the error. Then, correct the it by adding the missing parenthesis
    `)` and re-run the code.
  prefs: []
  type: TYPE_NORMAL
- en: '[Updating Rustle](#updating-rustle)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We now have enough context to modify our rustle program to include regular
    expression support. Below are the changes, with the unrelated parts of the program
    hidden:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Don't forget, you can reveal the hidden parts by clicking *Show hidden lines*.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The `let regex = match Regex::new(pattern)` variable binding expression might
    seem a bit unusual. The pattern is discussed in the Rust documentation section
    on [Recoverable Errors with Result](https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html#recoverable-errors-with-result).
    To briefly explain: When the result is `Ok`, this code extracts the inner `re`
    value from the `Ok` variant and moves it to the variable `regex`.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Next](#next)'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Onward to creating our own module!
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: The `Regex` crate includes excellent [documentation](https://docs.rs/regex/latest/regex/)
    and detailed [examples](https://docs.rs/regex/latest/regex/#examples) to learn
    from. [↩](#fr-1-1)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The source code for `new` can be found [here](https://docs.rs/regex/latest/src/regex/regex/string.rs.html#180-182).
    [↩](#fr-2-1)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
