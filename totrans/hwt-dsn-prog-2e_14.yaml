- en: VIÂ AccumulatorsğŸ”—
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: VI ç´¯åŠ å™¨ğŸ”—
- en: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/part_six.html](https://htdp.org/2024-11-6/Book/part_six.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/part_six.html](https://htdp.org/2024-11-6/Book/part_six.html)
- en: '| Â Â Â Â [31Â The Loss of Knowledge](#%28part._ch~3aaccumulator-samples%29) |'
  id: totrans-2
  prefs: []
  type: TYPE_TB
  zh: '|   [31 çŸ¥è¯†çš„ä¸§å¤±](#(éƒ¨åˆ†_ç« ~3aaccumulator-samples))'
- en: '| Â Â Â Â Â Â [31.1Â A Problem with Structural Processing](#%28part._sec~3aloss~3astructural%29)
    |'
  id: totrans-3
  prefs: []
  type: TYPE_TB
  zh: '|   [31.1 ç»“æ„å¤„ç†çš„é—®é¢˜](#(éƒ¨åˆ†_èŠ‚~3aloss~3astructural))'
- en: '| Â Â Â Â Â Â [31.2Â A Problem with Generative Recursion](#%28part._sec~3aloss~3agenerative%29)
    |'
  id: totrans-4
  prefs: []
  type: TYPE_TB
  zh: '|   [31.2 ç”Ÿæˆé€’å½’çš„é—®é¢˜](#(éƒ¨åˆ†_èŠ‚~3aloss~3agenerative))'
- en: '| Â Â Â Â [32Â Designing Accumulator-Style Functions](#%28part._sec~3adesign-accu%29)
    |'
  id: totrans-5
  prefs: []
  type: TYPE_TB
  zh: '|   [32 è®¾è®¡ç´¯åŠ å™¨é£æ ¼å‡½æ•°](#(éƒ¨åˆ†_èŠ‚~3adesign-accu))'
- en: '| Â Â Â Â Â Â [32.1Â Recognizing the Need for an Accumulator](#%28part._sec~3aneed-accu%29)
    |'
  id: totrans-6
  prefs: []
  type: TYPE_TB
  zh: '|   [32.1 è¯†åˆ«éœ€è¦ç´¯åŠ å™¨çš„æƒ…å†µ](#(éƒ¨åˆ†_èŠ‚~3aneed-accu))'
- en: '| Â Â Â Â Â Â [32.2Â Adding Accumulators](#%28part._sec~3aaccu-style%29) |'
  id: totrans-7
  prefs: []
  type: TYPE_TB
  zh: '|   [32.2 æ·»åŠ ç´¯åŠ å™¨](#(éƒ¨åˆ†_èŠ‚~3aaccu-style))'
- en: '| Â Â Â Â Â Â [32.3Â Transforming Functions into Accumulator Style](#%28part._sec~3atrans-accu%29)
    |'
  id: totrans-8
  prefs: []
  type: TYPE_TB
  zh: '|   [32.3 å°†å‡½æ•°è½¬æ¢ä¸ºç´¯åŠ å™¨é£æ ¼](#(éƒ¨åˆ†_èŠ‚~3atrans-accu))'
- en: '| Â Â Â Â Â Â [32.4Â A Graphical Editor, with Mouse](#%28part._accu-edit._sec~3aedit3%29)
    |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '|   [32.4 å¸¦é¼ æ ‡çš„å›¾å½¢ç¼–è¾‘å™¨](#(ç´¯åŠ å™¨ç¼–è¾‘_èŠ‚~3aedit3))'
- en: '| Â Â Â Â [33Â More Uses of Accumulation](#%28part._ch~3amore-accu%29) |'
  id: totrans-10
  prefs: []
  type: TYPE_TB
  zh: '|   [33 ç´¯åŠ å™¨çš„æ›´å¤šç”¨é€”](#(éƒ¨åˆ†_ç« ~3amore-accu))'
- en: '| Â Â Â Â Â Â [33.1Â Accumulators and Trees](#%28part._sec~3amore-accu-trees%29) |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '|   [33.1 ç´¯åŠ å™¨å’Œæ ‘](#(éƒ¨åˆ†_èŠ‚~3amore-accu-trees))'
- en: '| Â Â Â Â Â Â [33.2Â Data Representations with Accumulators](#%28part._sec~3amore-accu-mc%29)
    |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '|   [33.2 ä½¿ç”¨ç´¯åŠ å™¨çš„æ•°æ®è¡¨ç¤º](#(éƒ¨åˆ†_èŠ‚~3amore-accu-mc))'
- en: '| Â Â Â Â Â Â [33.3Â Accumulators as Results](#%28part._sec~3afractal-acc%29) |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '|   [33.3 ç´¯åŠ å™¨ä½œä¸ºç»“æœ](#(éƒ¨åˆ†_èŠ‚~3afractal-acc))'
- en: '| Â Â Â Â [34Â Summary](#%28part._ch~3asummary6%29) |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '|   [34 æ€»ç»“](#(éƒ¨åˆ†_ç« ~3asummary6))'
- en: When you ask ISL+ to apply some function f to an argument a, you usually get
    some value v. If you evaluate (f  a) again, you get v again. As a matter of fact,
    you get v no matter how often you request the evaluation of (f  a).The function
    application may also loop forever or signal an error, but we ignore these possibilities.
    We also ignore random, which is the true exception to this rule. Whether the function
    is applied for the first time or the hundredth time, whether the application is
    located in DrRacketâ€™s interactions area or inside the function itself, doesnâ€™t
    matter. The function works according to its purpose statement, and thatâ€™s all
    you need to know.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä½ è¦æ±‚ ISL+ å°†å‡½æ•° f åº”ç”¨åˆ°å‚æ•° a ä¸Šæ—¶ï¼Œä½ é€šå¸¸ä¼šå¾—åˆ°æŸä¸ªå€¼ vã€‚å¦‚æœä½ å†æ¬¡è¯„ä¼° (f a)ï¼Œä½ å°†å†æ¬¡å¾—åˆ° vã€‚äº‹å®ä¸Šï¼Œæ— è®ºä½ è¦æ±‚è¯„ä¼° (f
    a) å¤šå°‘æ¬¡ï¼Œä½ éƒ½ä¼šå¾—åˆ° vã€‚å‡½æ•°åº”ç”¨ä¹Ÿå¯èƒ½æ— é™å¾ªç¯æˆ–å‘å‡ºé”™è¯¯ä¿¡å·ï¼Œä½†æˆ‘ä»¬å¿½ç•¥è¿™äº›å¯èƒ½æ€§ã€‚æˆ‘ä»¬ä¹Ÿå¿½ç•¥éšæœºæ€§ï¼Œè¿™æ˜¯è¿™ä¸ªè§„åˆ™çš„çœŸæ­£ä¾‹å¤–ã€‚æ— è®ºå‡½æ•°æ˜¯ç¬¬ä¸€æ¬¡åº”ç”¨è¿˜æ˜¯ç¬¬ä¸€ç™¾æ¬¡åº”ç”¨ï¼Œæ— è®ºåº”ç”¨æ˜¯åœ¨
    DrRacket çš„äº¤äº’åŒºåŸŸè¿˜æ˜¯å‡½æ•°å†…éƒ¨ï¼Œè¿™éƒ½ä¸é‡è¦ã€‚å‡½æ•°æŒ‰ç…§å…¶ç›®çš„å£°æ˜å·¥ä½œï¼Œè¿™å°±æ˜¯ä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ã€‚
- en: This principle of context-independence plays a critical role in the design of
    recursive functions. When it comes to design, you are free to assume that the
    function computes what the purpose statement promisesâ€”<wbr>even if the function
    isnâ€™t defined yet. In particular, you are free to use the results of recursive
    calls to create the code of some function, usually in one of its cond clauses.
    The template and coding steps of the design recipes for both structurally and
    generative-recursive functions rely on this idea.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªä¸ä¸Šä¸‹æ–‡æ— å…³çš„åŸåˆ™åœ¨é€’å½’å‡½æ•°çš„è®¾è®¡ä¸­èµ·ç€å…³é”®ä½œç”¨ã€‚åœ¨è®¾è®¡æ—¶ï¼Œä½ å¯ä»¥è‡ªç”±åœ°å‡è®¾å‡½æ•°è®¡ç®—çš„æ˜¯ç›®çš„å£°æ˜ä¸­æ‰€æ‰¿è¯ºçš„å†…å®¹â€”â€”å³ä½¿å‡½æ•°å°šæœªå®šä¹‰ã€‚ç‰¹åˆ«æ˜¯ï¼Œä½ å¯ä»¥è‡ªç”±åœ°ä½¿ç”¨é€’å½’è°ƒç”¨çš„ç»“æœæ¥åˆ›å»ºæŸä¸ªå‡½æ•°çš„ä»£ç ï¼Œé€šå¸¸æ˜¯åœ¨å…¶æ¡ä»¶å­å¥ä¹‹ä¸€ä¸­ã€‚ç»“æ„æ€§å’Œç”Ÿæˆé€’å½’å‡½æ•°çš„è®¾è®¡é£Ÿè°±çš„æ¨¡æ¿å’Œç¼–ç æ­¥éª¤éƒ½ä¾èµ–äºè¿™ä¸ªæƒ³æ³•ã€‚
- en: While context-independence facilitates the design of functions, it causes two
    problems. In general, context-independence induces a loss of knowledge during
    a recursive evaluation; a function does not â€œknowâ€ whether it is called on a complete
    list or on a piece of that list. For structurally recursive programs, this loss
    of knowledge means that they may have to traverse data more than once, inducing
    a performance cost. For functions that employ generative recursion, the loss means
    that the function may not be able to compute the result at all. The preceding
    part illustrates this second problem with a graph traversal function that cannot
    find a path between two nodes for a circular graph.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶ä¸Šä¸‹æ–‡æ— å…³æ€§æœ‰åŠ©äºå‡½æ•°çš„è®¾è®¡ï¼Œä½†å®ƒä¼šå¯¼è‡´ä¸¤ä¸ªé—®é¢˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸Šä¸‹æ–‡æ— å…³æ€§åœ¨é€’å½’è¯„ä¼°è¿‡ç¨‹ä¸­ä¼šå¯¼è‡´çŸ¥è¯†æŸå¤±ï¼›ä¸€ä¸ªå‡½æ•°â€œä¸çŸ¥é“â€å®ƒæ˜¯åœ¨ä¸€ä¸ªå®Œæ•´çš„åˆ—è¡¨ä¸Šè¿˜æ˜¯åœ¨åˆ—è¡¨çš„ä¸€éƒ¨åˆ†ä¸Šè¢«è°ƒç”¨ã€‚å¯¹äºç»“æ„åŒ–é€’å½’ç¨‹åºï¼Œè¿™ç§çŸ¥è¯†æŸå¤±æ„å‘³ç€å®ƒä»¬å¯èƒ½éœ€è¦å¤šæ¬¡éå†æ•°æ®ï¼Œä»è€Œäº§ç”Ÿæ€§èƒ½æˆæœ¬ã€‚å¯¹äºä½¿ç”¨ç”Ÿæˆé€’å½’çš„å‡½æ•°ï¼Œè¿™ç§æŸå¤±æ„å‘³ç€å‡½æ•°å¯èƒ½æ ¹æœ¬æ— æ³•è®¡ç®—å‡ºç»“æœã€‚å‰ä¸€éƒ¨åˆ†é€šè¿‡ä¸€ä¸ªæ— æ³•åœ¨ç¯å½¢å›¾ä¸Šæ‰¾åˆ°ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´è·¯å¾„çš„å›¾éå†å‡½æ•°ï¼Œè¯´æ˜äº†ç¬¬äºŒä¸ªé—®é¢˜ã€‚
- en: This part introduces a variant of the design recipes to address this â€œloss of
    contextâ€ problem. Since we wish to retain the principle that (f  a) returns the
    same result no matter how often or where it is evaluated, the only solution is
    to add an argument that represents the context of the function call. We call this
    additional argument an accumulator. During the traversal of data, the recursive
    calls continue to receive regular arguments while accumulators change in relation
    to those and the context.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸€éƒ¨åˆ†ä»‹ç»äº†ä¸€ç§è®¾è®¡é£Ÿè°±çš„å˜ä½“ï¼Œä»¥è§£å†³è¿™ä¸ªâ€œä¸Šä¸‹æ–‡ä¸¢å¤±â€é—®é¢˜ã€‚ç”±äºæˆ‘ä»¬å¸Œæœ›ä¿ç•™çš„åŸåˆ™æ˜¯ï¼ˆf aï¼‰æ— è®ºä½•æ—¶ä½•åœ°è¯„ä¼°éƒ½è¿”å›ç›¸åŒçš„ç»“æœï¼Œå”¯ä¸€çš„è§£å†³æ–¹æ¡ˆæ˜¯æ·»åŠ ä¸€ä¸ªè¡¨ç¤ºå‡½æ•°è°ƒç”¨ä¸Šä¸‹æ–‡çš„å‚æ•°ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªé¢å¤–çš„å‚æ•°ä¸ºç´¯åŠ å™¨ã€‚åœ¨æ•°æ®éå†è¿‡ç¨‹ä¸­ï¼Œé€’å½’è°ƒç”¨ç»§ç»­æ¥æ”¶å¸¸è§„å‚æ•°ï¼Œè€Œç´¯åŠ å™¨åˆ™æ ¹æ®è¿™äº›å‚æ•°å’Œä¸Šä¸‹æ–‡è€Œå˜åŒ–ã€‚
- en: Designing functions with accumulators correctly is clearly more complex than
    any of the design approaches from the preceding chapters. The key is to understand
    the relationship between the proper arguments and the accumulators. The following
    chapters explain how to design functions with accumulators and how they work.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£ç¡®åœ°ä½¿ç”¨ç´¯åŠ å™¨è®¾è®¡å‡½æ•°æ˜¾ç„¶æ¯”å‰å‡ ç« ä¸­çš„ä»»ä½•è®¾è®¡æ–¹æ³•éƒ½è¦å¤æ‚ã€‚å…³é”®æ˜¯ç†è§£é€‚å½“å‚æ•°å’Œç´¯åŠ å™¨ä¹‹é—´çš„å…³ç³»ã€‚ä»¥ä¸‹ç« èŠ‚å°†è§£é‡Šå¦‚ä½•è®¾è®¡å¸¦æœ‰ç´¯åŠ å™¨çš„å‡½æ•°ä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚
- en: 31The Loss of Knowledge[ğŸ”—](#(part._ch~3aaccumulator-samples) "Link to here")
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 31çŸ¥è¯†çš„ä¸¢å¤±[ğŸ”—](#(part._ch~3aaccumulator-samples) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Both functions designed according to structural recipes and the generative one
    suffer from the loss of knowledge, though in different ways. This chapter explains
    with two examplesâ€”<wbr>one from each categoryâ€”<wbr>how the lack of contextual
    knowledge affects the performance of functions. While the first section is about
    structural recursion, the second one addresses concerns in the generative realm.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®ç»“æ„åŒ–é£Ÿè°±è®¾è®¡çš„ä¸¤ä¸ªå‡½æ•°ä»¥åŠç”Ÿæˆå‡½æ•°éƒ½å—åˆ°äº†çŸ¥è¯†æŸå¤±çš„å½±å“ï¼Œå°½ç®¡æ–¹å¼ä¸åŒã€‚æœ¬ç« é€šè¿‡ä¸¤ä¸ªä¾‹å­â€”â€”æ¯ä¸ªç±»åˆ«ä¸€ä¸ªâ€”â€”è§£é‡Šäº†ç¼ºä¹ä¸Šä¸‹æ–‡çŸ¥è¯†å¦‚ä½•å½±å“å‡½æ•°çš„æ€§èƒ½ã€‚è™½ç„¶ç¬¬ä¸€éƒ¨åˆ†æ˜¯å…³äºç»“æ„åŒ–é€’å½’ï¼Œä½†ç¬¬äºŒéƒ¨åˆ†åˆ™å…³æ³¨ç”Ÿæˆé¢†åŸŸçš„é—®é¢˜ã€‚
- en: 31.1A Problem with Structural Processing[ğŸ”—](#(part._sec~3aloss~3astructural)
    "Link to here")
  id: totrans-22
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 31.1ç»“æ„å¤„ç†ä¸­çš„é—®é¢˜[ğŸ”—](#(part._sec~3aloss~3astructural) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Letâ€™s start with a seemingly straightforward example:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»çœ‹ä¼¼ç®€å•çš„ä¸€ä¸ªä¾‹å­å¼€å§‹ï¼š
- en: Sample Problem You are working for a geometer team that will measure the length
    of road segments. The team asked you to design a program that translates these
    relative distances between a series of road points into absolute distances from
    some starting point.
  id: totrans-24
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜ä½ æ­£åœ¨ä¸ºä¸€ä¸ªå‡ ä½•å›¢é˜Ÿå·¥ä½œï¼Œè¯¥å›¢é˜Ÿå°†æµ‹é‡é“è·¯æ®µé•¿åº¦ã€‚å›¢é˜Ÿè¦æ±‚ä½ è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œå°†è¿™äº›ä¸€ç³»åˆ—é“è·¯ç‚¹ä¹‹é—´çš„ç›¸å¯¹è·ç¦»è½¬æ¢ä¸ºä»æŸä¸ªèµ·ç‚¹å¼€å§‹çš„ç»å¯¹è·ç¦»ã€‚
- en: 'For example, we might be given a line such as this:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹è¿™æ ·çš„çº¿ï¼š
- en: '![image](../Images/5a9d2f0469cb71f538386aaa55496b62.png)'
  id: totrans-26
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/5a9d2f0469cb71f538386aaa55496b62.png)'
- en: 'Each number specifies the distance between two dots. What we need is the following
    picture, where each dot is annotated with the distance to the left-most end:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªæ•°å­—æŒ‡å®šäº†ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯ä»¥ä¸‹è¿™æ ·çš„å›¾ç‰‡ï¼Œå…¶ä¸­æ¯ä¸ªç‚¹éƒ½æ ‡æ³¨äº†åˆ°æœ€å·¦ç«¯ç‚¹çš„è·ç¦»ï¼š
- en: '![image](../Images/afa989beb9cef02557601cb8f1a81d95.png)'
  id: totrans-28
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/afa989beb9cef02557601cb8f1a81d95.png)'
- en: Designing a program that performs this calculation is a mere exercise in structural
    function design. [FigureÂ 177](#%28counter._%28figure._fig~3arel-abs-dist%29%29)
    contains the complete program. When the given list is not '(), the natural recursion
    computes the absolute distance of the remainder of the dots to the first one on
    ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  l).
    Because the first is not the actual origin and has a distance of ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  l)
    to the origin, we must add ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  l)
    to each number on the result of the natural recursion. This second stepâ€”<wbr>adding
    a number to each item on a list of numbersâ€”<wbr>requires an auxiliary function.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªæ‰§è¡Œæ­¤è®¡ç®—çš„ç¨‹åºä»…ä»…æ˜¯ç»“æ„åŒ–å‡½æ•°è®¾è®¡çš„ç»ƒä¹ ã€‚[å›¾Â 177](#%28counter._%28figure._fig~3arel-abs-dist%29%29)
    åŒ…å«äº†å®Œæ•´çš„ç¨‹åºã€‚å½“ç»™å®šçš„åˆ—è¡¨ä¸æ˜¯ '() æ—¶ï¼Œè‡ªç„¶é€’å½’è®¡ç®—ç‚¹å‰©ä½™éƒ¨åˆ†åˆ°ç¬¬ä¸€ä¸ªç‚¹çš„ç»å¯¹è·ç¦» ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  l)ã€‚å› ä¸ºç¬¬ä¸€ä¸ªç‚¹ä¸æ˜¯å®é™…çš„åŸç‚¹ï¼Œå¹¶ä¸”ä¸åŸç‚¹çš„è·ç¦»ä¸º
    ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  l)ï¼Œæˆ‘ä»¬å¿…é¡»å°†
    ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  l)
    æ·»åŠ åˆ°è‡ªç„¶é€’å½’ç»“æœä¸­çš„æ¯ä¸ªæ•°å­—ä¸Šã€‚è¿™ä¸€æ­¥â€”â€”<wbr>å°†ä¸€ä¸ªæ•°å­—æ·»åŠ åˆ°æ•°å­—åˆ—è¡¨ä¸­çš„æ¯ä¸ªé¡¹ç›®â€”â€”<wbr>éœ€è¦ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  id: totrans-30
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29)  [ç¼–å·](part_one.html#%28tech._number%29)]
    -> [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29)  [ç¼–å·](part_one.html#%28tech._number%29)]
    |'
- en: '| ;Â converts a list of relative to absolute distances |'
  id: totrans-31
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†ç›¸å¯¹è·ç¦»è½¬æ¢ä¸ºç»å¯¹è·ç¦» |'
- en: '| ;Â the first number represents the distance to the origin |'
  id: totrans-32
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç¬¬ä¸€ä¸ªæ•°å­—è¡¨ç¤ºåˆ°åŸç‚¹çš„è·ç¦» |'
- en: '| Â  |'
  id: totrans-33
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (relative->absoluteÂ ''(50Â 40Â 70Â 30Â 30))
    |'
  id: totrans-34
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (relative->absoluteÂ ''(50Â 40Â 70Â 30Â 30))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''(50Â 90Â 160Â 190Â 220)) |'
  id: totrans-35
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''(50Â 90Â 160Â 190Â 220)) |'
- en: '| Â  |'
  id: totrans-36
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absoluteÂ l)
    |'
  id: totrans-37
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absoluteÂ l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-38
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  id: totrans-39
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â rest-of-l
    |'
  id: totrans-40
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â rest-of-l
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (relative->absoluteÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))
    |'
  id: totrans-41
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (relative->absoluteÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â adjusted
    |'
  id: totrans-42
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    adjusted |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (add-to-eachÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â rest-of-l)))
    |'
  id: totrans-43
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (add-to-each ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    l) rest-of-l))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â adjusted))]))
    |'
  id: totrans-44
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    l) adjusted))])) |'
- en: '| Â  |'
  id: totrans-45
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â [Number](part_one.html#%28tech._number%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  id: totrans-46
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [Number](part_one.html#%28tech._number%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
- en: '| ;Â adds n to each number on l |'
  id: totrans-47
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ä¸ºlä¸­çš„æ¯ä¸ªæ•°å­—æ·»åŠ n |'
- en: '| Â  |'
  id: totrans-48
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 50Â (add-to-eachÂ 50Â ''(40Â 110Â 140Â 170)))
    |'
  id: totrans-49
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    50 (add-to-each 50 ''(40 110 140 170)))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''(50Â 90Â 160Â 190Â 220)) |'
  id: totrans-50
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| (50 90 160 190 220)) |'
- en: '| Â  |'
  id: totrans-51
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-to-eachÂ nÂ l)
    |'
  id: totrans-52
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (add-to-each n l) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-53
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  id: totrans-54
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    l) ''()] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â n)Â (add-to-eachÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))]))
    |'
  id: totrans-55
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    l) n) (add-to-each n ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    l)))])) |'
- en: ''
  id: totrans-56
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 177: Converting relative distances to absolute distances'
  id: totrans-57
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾177ï¼šå°†ç›¸å¯¹è·ç¦»è½¬æ¢ä¸ºç»å¯¹è·ç¦»
- en: 'While designing the program is relatively straightforward, using it on larger
    and larger lists reveals a problem. Consider the evaluation of the following expression:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶è®¾è®¡ç¨‹åºç›¸å¯¹ç®€å•ï¼Œä½†åœ¨æ›´å¤§çš„åˆ—è¡¨ä¸Šä½¿ç”¨å®ƒæ­ç¤ºäº†é—®é¢˜ã€‚è€ƒè™‘ä»¥ä¸‹è¡¨è¾¾å¼çš„è¯„ä¼°ï¼š
- en: (relative->absoluteÂ ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â sizeÂ [add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)))
  id: totrans-59
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (relative->absoluteÂ ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â sizeÂ [add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)))
- en: 'As we increase size, the time needed grows even faster:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: éšç€å¤§å°çš„å¢åŠ ï¼Œæ‰€éœ€çš„æ—¶é—´å¢é•¿å¾—æ›´å¿«ï¼š
- en: '| size |  | 1000 |  | 2000 |  | 3000 |  | 4000 |  | 5000 |  | 6000 |  | 7000
    |'
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| size |  | 1000 |  | 2000 |  | 3000 |  | 4000 |  | 5000 |  | 6000 |  | 7000
    |'
- en: '| time |  | 25 |  | 109 |  | 234 |  | 429 |  | 689 |  | 978 |  | 1365 |'
  id: totrans-62
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| time |  | 25 |  | 109 |  | 234 |  | 429 |  | 689 |  | 978 |  | 1365 |'
- en: 'Instead of doubling as we go from 1000 to 2000 items, the time quadruples.
    This is also the approximate relationship for going from 2000 to 4000, and so
    on.The times will differ from computer to computer and year to year. These measurements
    were conducted in 2017 on a MacMini running OS X 10.11; the previous measurement
    took place in 1998, and the times were 100x larger. Using the terminology of [Intermezzo
    5: The Cost of Computation](i5-6.html), we say that the functionâ€™s performance
    is O(n2) where n is the length of the given list.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 'å½“æˆ‘ä»¬ä»1000ä¸ªå…ƒç´ å¢åŠ åˆ°2000ä¸ªå…ƒç´ æ—¶ï¼Œæ—¶é—´ç¿»å€ã€‚è¿™ä¸ä»2000ä¸ªå…ƒç´ å¢åŠ åˆ°4000ä¸ªå…ƒç´ çš„å…³ç³»å¤§è‡´ç›¸åŒã€‚è¿™äº›æ—¶é—´ä¼šå› è®¡ç®—æœºå’Œå¹´ä»½çš„ä¸åŒè€Œæœ‰æ‰€ä¸åŒã€‚è¿™äº›æµ‹é‡æ˜¯åœ¨2017å¹´åœ¨ä¸€å°è¿è¡ŒOS
    X 10.11çš„MacMiniä¸Šè¿›è¡Œçš„ï¼›ä¹‹å‰çš„æµ‹é‡æ˜¯åœ¨1998å¹´ï¼Œæ—¶é—´æ˜¯100å€ã€‚ä½¿ç”¨[Intermezzo 5: è®¡ç®—æˆæœ¬](i5-6.html)ä¸­çš„æœ¯è¯­ï¼Œæˆ‘ä»¬è¯´è¯¥å‡½æ•°çš„æ€§èƒ½æ˜¯
    O(n^2)ï¼Œå…¶ä¸­ n æ˜¯ç»™å®šåˆ—è¡¨çš„é•¿åº¦ã€‚'
- en: ExerciseÂ 489\. Reformulate add-to-each using [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    and [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 489. ä½¿ç”¨ [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    å’Œ [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    é‡æ–°è¡¨è¿° add-to-eachã€‚
- en: ExerciseÂ 490\. Develop a formula that describes the abstract running time of
    relative->absolute. Hint Evaluate the expression
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 490. å¼€å‘ä¸€ä¸ªæè¿° relative->absolute æŠ½è±¡è¿è¡Œæ—¶é—´çš„å…¬å¼ã€‚æç¤ºï¼šè¯„ä¼°ä»¥ä¸‹è¡¨è¾¾å¼
- en: (relative->absoluteÂ ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â sizeÂ [add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)))
  id: totrans-66
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (relative->absoluteÂ ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â sizeÂ [add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)))
- en: by hand. Start by replacing size with 1, 2, and 3\. How many recursions of relative->absolute
    and add-to-each are required each time?
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰‹åŠ¨ã€‚é¦–å…ˆå°†å¤§å°æ›¿æ¢ä¸º1ã€2å’Œ3ã€‚æ¯æ¬¡éœ€è¦å¤šå°‘æ¬¡ relative->absolute å’Œ add-to-each çš„é€’å½’ï¼Ÿ
- en: Considering the simplicity of the problem, the amount of work that the program
    performs is surprising. If we were to convert the same list by hand, we would
    tally up the total distance and just add it to the relative distances as we take
    steps along the line. Why canâ€™t a program do so?
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘åˆ°é—®é¢˜çš„ç®€å•æ€§ï¼Œç¨‹åºæ‰§è¡Œçš„å·¥ä½œé‡ä»¤äººæƒŠè®¶ã€‚å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨è½¬æ¢ç›¸åŒçš„åˆ—è¡¨ï¼Œæˆ‘ä»¬ä¼šè®¡ç®—æ€»è·ç¦»ï¼Œå¹¶åœ¨æ²¿ç€çº¿ç§»åŠ¨æ—¶å°†ç›¸å¯¹è·ç¦»ç´¯åŠ èµ·æ¥ã€‚ä¸ºä»€ä¹ˆç¨‹åºä¸èƒ½è¿™æ ·åšï¼Ÿ
- en: 'Letâ€™s attempt to design a version of the function that is close to our manual
    method. We still start from the list-processing template:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å°è¯•è®¾è®¡ä¸€ä¸ªæ¥è¿‘æˆ‘ä»¬æ‰‹åŠ¨æ–¹æ³•çš„å‡½æ•°ç‰ˆæœ¬ã€‚æˆ‘ä»¬ä»ç„¶ä»åˆ—è¡¨å¤„ç†æ¨¡æ¿å¼€å§‹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absolute/aÂ l)
    |'
  id: totrans-70
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absolute/aÂ l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-71
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-72
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-73
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-74
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (relative->absolute/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  id: totrans-75
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (relative->absolute/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
- en: 'Now letâ€™s simulate a hand-evaluation:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸‹æ‰‹ç®—è¿‡ç¨‹ï¼š
- en: '| (relative->absolute/aÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 3Â 2Â 7))
    |'
  id: totrans-77
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (relative->absolute/aÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 3Â 2Â 7))
    |'
- en: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 3Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (relative->absolute/aÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â 7)))
    |'
  id: totrans-78
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 3Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (relative->absolute/aÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â 7)))
    |'
- en: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 3Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-79
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 3Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 2Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-80
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 2Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â (relative->absolute/aÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 7))))
    |'
  id: totrans-81
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â (relative->absolute/aÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 7))))
    |'
- en: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 3Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-82
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 3Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 2Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-83
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 2Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 7Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-84
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â 7Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â (relative->absolute/aÂ ''())))) |'
  id: totrans-85
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â (relative->absolute/aÂ ''())))) |'
- en: The first item of the result list should obviously be 3, and it is easy to construct
    this list. But, the second one should be ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  3  2),
    yet the second instance of relative->absolute/a has no way of â€œknowingâ€ that the
    first item of the original list is 3. The â€œknowledgeâ€ is lost.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: ç»“æœåˆ—è¡¨çš„ç¬¬ä¸€é¡¹æ˜¾ç„¶åº”è¯¥æ˜¯3ï¼Œæ„å»ºè¿™ä¸ªåˆ—è¡¨å¾ˆå®¹æ˜“ã€‚ä½†æ˜¯ï¼Œç¬¬äºŒé¡¹åº”è¯¥æ˜¯([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    3 2)ï¼Œç„¶è€Œç›¸å¯¹->ç»å¯¹/açš„ç¬¬äºŒä¸ªå®ä¾‹å¹¶æ²¡æœ‰â€œçŸ¥é“â€åŸå§‹åˆ—è¡¨çš„ç¬¬ä¸€é¡¹æ˜¯3ã€‚è¿™ç§â€œçŸ¥è¯†â€å·²ç»ä¸¢å¤±äº†ã€‚
- en: Again, the problem is that recursive functions are independent of their context.
    A function processes L in ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  N  L)
    the same way as in ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  K  L).
    Indeed, if given L by itself, it would also process the list in that way.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: å†æ¬¡ï¼Œé—®é¢˜åœ¨äºé€’å½’å‡½æ•°ä¸å…¶ä¸Šä¸‹æ–‡æ— å…³ã€‚ä¸€ä¸ªå‡½æ•°åœ¨([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    N L) å’Œ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    K L) ä¸­ä»¥ç›¸åŒçš„æ–¹å¼å¤„ç† Lã€‚å®é™…ä¸Šï¼Œå¦‚æœåªç»™å‡º L æœ¬èº«ï¼Œå®ƒä¹Ÿä¼šä»¥é‚£ç§æ–¹å¼å¤„ç†åˆ—è¡¨ã€‚
- en: 'To make up for the loss of â€œknowledge,â€ we equip the function with an additional
    parameter: accu-dist. The latter represents the accumulated distance, which is
    the tally that we keep when we convert a list of relative distances to a list
    of absolute distances. Its initial value must be 0. As the function traverses
    the list, it must add its numbers to the tally.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å¼¥è¡¥â€œçŸ¥è¯†â€çš„æŸå¤±ï¼Œæˆ‘ä»¬ç»™å‡½æ•°æ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼šaccu-distã€‚åè€…ä»£è¡¨ç´¯ç§¯è·ç¦»ï¼Œè¿™æ˜¯æˆ‘ä»¬å°†åœ¨å°†ç›¸å¯¹è·ç¦»åˆ—è¡¨è½¬æ¢ä¸ºç»å¯¹è·ç¦»åˆ—è¡¨æ—¶ä¿æŒçš„è®¡æ•°ã€‚å®ƒçš„åˆå§‹å€¼å¿…é¡»æ˜¯
    0ã€‚å½“å‡½æ•°éå†åˆ—è¡¨æ—¶ï¼Œå®ƒå¿…é¡»å°†å…¶æ•°å­—æ·»åŠ åˆ°è®¡æ•°ä¸­ã€‚
- en: 'Here is the revised definition:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯ä¿®æ”¹åçš„å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absolute/aÂ lÂ accu-dist)
    |'
  id: totrans-90
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (relative->absolute/a l accu-dist) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-91
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  id: totrans-92
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â ([([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    l) ''()] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-93
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â tallyÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â accu-dist)))
    |'
  id: totrans-94
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)(([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    tally ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    l) accu-dist))) |'
- en: '| Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â tally
    |'
  id: totrans-95
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    tally |'
- en: '| Â Â Â Â Â Â Â Â Â (relative->absolute/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â tally)))]))
    |'
  id: totrans-96
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â (relative->absolute/a ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    l) tally)))])) |'
- en: 'The recursive application consumes the rest of the list and the new absolute
    distance of the current point to the origin. Although both arguments are changing
    for every call, the change in the second one strictly depends on the first argument.
    The function is still a plain list-processing procedure.Now letâ€™s evaluate our
    running example again:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: é€’å½’åº”ç”¨æ¶ˆè€—äº†åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ä»¥åŠå½“å‰ç‚¹åˆ°åŸç‚¹çš„æ–°çš„ç»å¯¹è·ç¦»ã€‚å°½ç®¡æ¯æ¬¡è°ƒç”¨æ—¶ä¸¤ä¸ªå‚æ•°éƒ½åœ¨å˜åŒ–ï¼Œä½†ç¬¬äºŒä¸ªå‚æ•°çš„å˜åŒ–ä¸¥æ ¼ä¾èµ–äºç¬¬ä¸€ä¸ªå‚æ•°ã€‚è¯¥å‡½æ•°ä»ç„¶æ˜¯ä¸€ä¸ªæ™®é€šçš„åˆ—è¡¨å¤„ç†è¿‡ç¨‹ã€‚ç°åœ¨è®©æˆ‘ä»¬å†æ¬¡è¯„ä¼°æˆ‘ä»¬çš„è¿è¡Œç¤ºä¾‹ï¼š
- en: '| (relative->absolute/aÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 3Â 2Â 7))
    |'
  id: totrans-98
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (ç›¸å¯¹->ç»å¯¹/a ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29%29)
    3 2 7)) |'
- en: '| ==Â (relative->absolute/aÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 3Â 2Â 7)Â 0)
    |'
  id: totrans-99
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == (ç›¸å¯¹->ç»å¯¹/a ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29%29)
    3 2 7) 0) |'
- en: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 3Â (relative->absolute/aÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â 7)Â 3))
    |'
  id: totrans-100
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    3 (ç›¸å¯¹->ç»å¯¹/a ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29%29)
    2 7) 3)) |'
- en: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 3Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 5Â (relative->absolute/aÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 7)Â 5)))
    |'
  id: totrans-101
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    3 ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    5 (ç›¸å¯¹->ç»å¯¹/a ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29%29)
    7) 5))) |'
- en: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 3Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 5Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 12Â ???)))
    |'
  id: totrans-102
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    3 ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    5 ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    12 ???))) |'
- en: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 3Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 5Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â 12Â ''())))
    |'
  id: totrans-103
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| == ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    3 ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    5 ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    12 ''()))) |'
- en: Stop! Fill in the question marks in line 4.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼åœ¨ç¬¬4è¡Œå¡«å†™é—®å·ã€‚
- en: The hand-evaluation shows just how much the use of an accumulator simplifies
    the conversion process. Each item in the list is processed once. When relative->absolute/a
    reaches the end of the argument list, the result is completely determined and
    no further work is needed. In general, the function performs on the order of N
    natural recursion steps for a list with N items.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰‹åŠ¨è¯„ä¼°æ˜¾ç¤ºäº†ä½¿ç”¨ç´¯åŠ å™¨å¦‚ä½•ç®€åŒ–è½¬æ¢è¿‡ç¨‹ã€‚åˆ—è¡¨ä¸­çš„æ¯ä¸ªé¡¹ç›®åªå¤„ç†ä¸€æ¬¡ã€‚å½“ relative->absolute/a è¾¾åˆ°å‚æ•°åˆ—è¡¨çš„æœ«å°¾æ—¶ï¼Œç»“æœå°±å®Œå…¨ç¡®å®šï¼Œä¸å†éœ€è¦è¿›ä¸€æ­¥çš„å·¥ä½œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¯¥å‡½æ•°å¯¹å…·æœ‰
    N ä¸ªé¡¹ç›®çš„åˆ—è¡¨æ‰§è¡Œå¤§çº¦ N æ¬¡è‡ªç„¶é€’å½’æ­¥éª¤ã€‚
- en: One problem is that, unlike relative->absolute, the new function consumes two
    arguments, not just one. Worse, someone might accidentally misuse relative->absolute/a
    by applying it to a list of numbers and a number that isnâ€™t 0. We can solve both
    problems with a function definition that uses a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    definition to encapsulate relative->absolute/a; [figureÂ 178](#%28counter._%28figure._fig~3arel-abs-human%29%29)
    shows the result. Now, relative->absolute is indistinguishable from relative->absolute.v2
    with respect to input-output.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œä¸ relative->absolute ä¸åŒï¼Œæ–°å‡½æ•°æ¶ˆè€—ä¸¤ä¸ªå‚æ•°ï¼Œè€Œä¸ä»…ä»…æ˜¯å…¶ä¸­ä¸€ä¸ªã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œæœ‰äººå¯èƒ½ä¼šä¸å°å¿ƒå°† relative->absolute/a
    åº”ç”¨äºæ•°å­—åˆ—è¡¨å’Œä¸€ä¸ªé 0 çš„æ•°å­—ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ªåŒ…å«å±€éƒ¨å®šä¹‰æ¥å°è£… relative->absolute/a çš„å‡½æ•°å®šä¹‰æ¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼›[å›¾ 178](#%28counter._%28figure._fig~3arel-abs-human%29%29)
    æ˜¾ç¤ºäº†ç»“æœã€‚ç°åœ¨ï¼Œç›¸å¯¹äºè¾“å…¥è¾“å‡ºï¼Œrelative->absolute ä¸ relative->absolute.v2 ä¸å¯åŒºåˆ†ã€‚
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  id: totrans-107
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) [æ•°å­—](part_one.html#%28tech._number%29)]
    -> [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) [æ•°å­—](part_one.html#%28tech._number%29)]
    |'
- en: '| ;Â converts a list of relative to absolute distances |'
  id: totrans-108
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| å°†ç›¸å¯¹è·ç¦»åˆ—è¡¨è½¬æ¢ä¸ºç»å¯¹è·ç¦» |'
- en: '| ;Â the first number represents the distance to the origin |'
  id: totrans-109
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ç¬¬ä¸€ä¸ªæ•°å­—è¡¨ç¤ºåˆ°åŸç‚¹çš„è·ç¦» |'
- en: '| Â  |'
  id: totrans-110
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (relative->absolute.v2Â ''(50Â 40Â 70Â 30Â 30))
    |'
  id: totrans-111
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (relative->absolute.v2Â ''(50
    40 70 30 30)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''(50Â 90Â 160Â 190Â 220)) |'
  id: totrans-112
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''(50 90 160 190 220)) |'
- en: '| Â  |'
  id: totrans-113
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absolute.v2Â l0)
    |'
  id: totrans-114
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absolute.v2Â l0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (
    |'
  id: totrans-115
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (
    |'
- en: '| Â Â Â Â ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  id: totrans-116
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ; [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) [æ•°å­—](part_one.html#%28tech._number%29)]
    [æ•°å­—](part_one.html#%28tech._number%29) -> [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29)
    [æ•°å­—](part_one.html#%28tech._number%29)] |'
- en: '| Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absolute/aÂ lÂ accu-dist)
    |'
  id: totrans-117
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absolute/aÂ lÂ accu-dist)
    |'
- en: '| Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-118
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  id: totrans-119
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â [([ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
- en: '| Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-120
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â accuÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â accu-dist)))
    |'
  id: totrans-121
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â accuÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â accu-dist)))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â accu
    |'
  id: totrans-122
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â accu
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (relative->absolute/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â accu)))])))
    |'
  id: totrans-123
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (relative->absolute/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â accu)))])))
    |'
- en: '| Â Â Â Â (relative->absolute/aÂ l0Â 0))) |'
  id: totrans-124
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (relative->absolute/aÂ l0Â 0))) |'
- en: ''
  id: totrans-125
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 178: Converting relative distances with an accumulator'
  id: totrans-126
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾Â 178ï¼šä½¿ç”¨ç´¯åŠ å™¨è½¬æ¢ç›¸å¯¹è·ç¦»
- en: Now letâ€™s look at how this version of the program performs. To this end, we
    evaluate
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªç¨‹åºç‰ˆæœ¬çš„è¡¨ç°ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬è¯„ä¼°
- en: (relative->absolute.v2Â ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â sizeÂ [add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)))
  id: totrans-128
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (relative->absolute.v2Â ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â sizeÂ [add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)))
- en: 'and tabulate the results for several values of size:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¶ä¸ºå‡ ä¸ªå¤§å°çš„å€¼åˆ—å‡ºç»“æœï¼š
- en: '| size |  | 1000 |  | 2000 |  | 3000 |  | 4000 |  | 5000 |  | 6000 |  | 7000
    |'
  id: totrans-130
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å¤§å° |  | 1000 |  | 2000 |  | 3000 |  | 4000 |  | 5000 |  | 6000 |  | 7000
    |'
- en: '| time |  | 0 |  | 0 |  | 0 |  | 0 |  | 0 |  | 1 |  | 1 |'
  id: totrans-131
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ—¶é—´ |  | 0 |  | 0 |  | 0 |  | 0 |  | 0 |  | 1 |  | 1 |'
- en: Amazingly, relative->absolute.v2 never takes more than one second to process
    such lists, even for a list of 7000 numbers. Comparing this performance to the
    one of relative->absolute, you may think that accumulators are a miracle cure
    for all slow-running programs. Unfortunately, this isnâ€™t the case, but when a
    structurally recursive function has to re-process the result of the natural recursion
    you should definitely consider the use of accumulators. In this particular case,
    the performance improved from O(n2) to O(n)â€”<wbr>with an additional large reduction
    in the constant.ExerciseÂ 491\. With a bit of design and a bit of tinkering, a
    friend of yours came up with the following solution for the sample problem:Adrian
    German and Mardin Yadegar suggested this exercise.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œrelative->absolute.v2 å¤„ç†æ­¤ç±»åˆ—è¡¨çš„æ—¶é—´æ°¸è¿œä¸ä¼šè¶…è¿‡ä¸€ç§’ï¼Œå³ä½¿å¯¹äºåŒ…å« 7000 ä¸ªæ•°å­—çš„åˆ—è¡¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å°†è¿™ç§æ€§èƒ½ä¸
    relative->absolute çš„æ€§èƒ½è¿›è¡Œæ¯”è¾ƒï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºç´¯åŠ å™¨æ˜¯æ‰€æœ‰è¿è¡Œç¼“æ…¢ç¨‹åºçš„ç¥å¥‡ç–—æ³•ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¹¶éå¦‚æ­¤ï¼Œä½†å½“ç»“æ„åŒ–é€’å½’å‡½æ•°éœ€è¦é‡æ–°å¤„ç†è‡ªç„¶é€’å½’çš„ç»“æœæ—¶ï¼Œä½ åº”è¯¥ç¡®å®è€ƒè™‘ä½¿ç”¨ç´¯åŠ å™¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ€§èƒ½ä»
    O(n^2) æé«˜åˆ° O(n)â€”â€”å¹¶ä¸”å¸¸æ•°å› å­æœ‰å¤§å¹…å‡å°‘ã€‚<wbr>ç»ƒä¹ Â 491ã€‚é€šè¿‡ä¸€ç‚¹è®¾è®¡å’Œä¸€äº›è°ƒæ•´ï¼Œä½ çš„ä¸€ä¸ªæœ‹å‹ä¸ºè¿™ä¸ªæ ·æœ¬é—®é¢˜æå‡ºäº†ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼šAdrian
    German å’Œ Mardin Yadegar æå‡ºäº†è¿™ä¸ªç»ƒä¹ ã€‚
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absoluteÂ l)
    |'
  id: totrans-133
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (relative->absoluteÂ l)
    |'
- en: '| Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)
    |'
  id: totrans-134
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)
    |'
- en: '| Â Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (elementÂ accu)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â elementÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â accu))Â accu))
    |'
  id: totrans-135
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    (element accu) ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    element ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    accu)) accu))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l))
    |'
  id: totrans-136
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    l)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))))
    |'
  id: totrans-137
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)
    ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    l))) |'
- en: 'This simple solution merely uses well-known ISL+ functions: [reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)
    and [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29).
    Using [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29),
    as you know, is just a convenience. You may also recall from [Abstraction](part_three.html)
    that [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    is designable with the design recipes presented in the first two parts of the
    book.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªç®€å•çš„æ–¹æ¡ˆä»…ä»…ä½¿ç”¨äº†å·²çŸ¥çš„ISL+å‡½æ•°ï¼š[åè½¬](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)å’Œ[foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)ã€‚æ­£å¦‚ä½ æ‰€çŸ¥ï¼Œä½¿ç”¨[lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)åªæ˜¯ä¸€ä¸ªä¾¿åˆ©ã€‚ä½ ä¹Ÿè®¸è¿˜è®°å¾—ä»[æŠ½è±¡](part_three.html)ä¸­ï¼Œ[foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)å¯ä»¥ç”¨ä¹¦ä¸­å‰ä¸¤éƒ¨åˆ†çš„æ–¹æ¡ˆè¿›è¡Œè®¾è®¡ã€‚
- en: Does your friendâ€™s solution mean there is no need for our complicated design
    in this motivational section? For an answer, see [Recognizing the Need for an
    Accumulator](#%28part._sec~3aneed-accu%29), but reflect on the question first.
    Hint Try to design [reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)
    on your own.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ çš„æœ‹å‹æå‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯å¦æ„å‘³ç€åœ¨è¿™ä¸ªæ¿€åŠ±éƒ¨åˆ†æˆ‘ä»¬ä¸éœ€è¦å¤æ‚çš„æ–¹æ¡ˆï¼Ÿä¸ºäº†æ‰¾åˆ°ç­”æ¡ˆï¼Œè¯·å‚é˜…[è¯†åˆ«ç´¯åŠ å™¨çš„éœ€æ±‚](#%28part._sec~3aneed-accu%29)ï¼Œä½†é¦–å…ˆè¯·æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚æç¤ºï¼šå°è¯•è‡ªå·±è®¾è®¡[åè½¬](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)ã€‚
- en: 31.2A Problem with Generative Recursion[ğŸ”—](#(part._sec~3aloss~3agenerative)
    "Link to here")
  id: totrans-140
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 31.2A é—®é¢˜ä¸ç”Ÿæˆé€’å½’[ğŸ”—](#(part._sec~3aloss~3agenerative) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Letâ€™s revisit the problem of â€œtravelingâ€ along a path in a graph:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬é‡æ–°å®¡è§†åœ¨å›¾ä¸­æ²¿ç€è·¯å¾„â€œæ—…è¡Œâ€çš„é—®é¢˜ï¼š
- en: Sample Problem Design an algorithm that checks whether two nodes are connected
    in a simple graph. In such a graph, each node has exactly one, directional connection
    to another, and possibly itself.
  id: totrans-142
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜ è®¾è®¡ä¸€ä¸ªç®—æ³•ï¼Œæ£€æŸ¥åœ¨ç®€å•å›¾ä¸­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸è¿ã€‚åœ¨è¿™ç§å›¾ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ°å¥½æœ‰ä¸€ä¸ªåˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹æˆ–è‡ªèº«çš„å•å‘è¿æ¥ã€‚
- en: '[Algorithms that Backtrack](part_five.html#%28part._ch~3abacktrack%29) covers
    the variant where the algorithm has to discover the path. This sample problem
    is simpler than that because this section focuses on the design of an accumulator
    version of the algorithm.'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›æº¯ç®—æ³•](part_five.html#%28part._ch~3abacktrack%29) è®¨è®ºäº†ç®—æ³•å¿…é¡»å‘ç°è·¯å¾„çš„å˜ä½“ã€‚è¿™ä¸ªæ ·æœ¬é—®é¢˜æ¯”é‚£ä¸ªç®€å•ï¼Œå› ä¸ºæœ¬èŠ‚é‡ç‚¹åœ¨äºç®—æ³•çš„ç´¯åŠ å™¨ç‰ˆæœ¬è®¾è®¡ã€‚'
- en: Consider the sample graph in [figureÂ 179](#%28counter._%28figure._fig~3asim-graph%29%29).
    There are six nodes, A through F, and six connections. A path from A to E must
    contain B and C. There is no path, though, from A to F or from any other node
    besides itself.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘å›¾ [figureÂ 179](#%28counter._%28figure._fig~3asim-graph%29%29) ä¸­çš„ç¤ºä¾‹å›¾ã€‚å›¾ä¸­åŒ…å«å…­ä¸ªèŠ‚ç‚¹ï¼Œä»
    A åˆ° Fï¼Œä»¥åŠå…­ä¸ªè¿æ¥ã€‚ä» A åˆ° E çš„è·¯å¾„å¿…é¡»åŒ…å« B å’Œ Cã€‚ç„¶è€Œï¼Œä» A åˆ° F æˆ–ä»ä»»ä½•å…¶ä»–èŠ‚ç‚¹åˆ°å…¶è‡ªèº«çš„è·¯å¾„æ˜¯ä¸å­˜åœ¨çš„ã€‚
- en: '| ![image](../Images/ffae0bf654547134d6aa452e51e99619.png) |  |'
  id: totrans-145
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/ffae0bf654547134d6aa452e51e99619.png) |  |'
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â a-sg
    &#124;'
  id: totrans-146
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â a-sg
    &#124;'
- en: '&#124; Â Â ''((AÂ B) &#124;'
  id: totrans-147
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ''((AÂ B) &#124;'
- en: '&#124; Â Â Â Â (BÂ C) &#124;'
  id: totrans-148
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â (BÂ C) &#124;'
- en: '&#124; Â Â Â Â (CÂ E) &#124;'
  id: totrans-149
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â (CÂ E) &#124;'
- en: '&#124; Â Â Â Â (DÂ E) &#124;'
  id: totrans-150
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â (DÂ E) &#124;'
- en: '&#124; Â Â Â Â (EÂ B) &#124;'
  id: totrans-151
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â (EÂ B) &#124;'
- en: '&#124; Â Â Â Â (FÂ F))) &#124;'
  id: totrans-152
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â (FÂ F))) &#124;'
- en: ''
  id: totrans-153
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-154
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-155
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 179: A simple graph'
  id: totrans-156
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'å›¾Â 179: ç®€å•å›¾'
- en: 'The right part of [figureÂ 179](#%28counter._%28figure._fig~3asim-graph%29%29)
    shows how to represent this graph with nested lists. Each node is represented
    by a list of two symbols. The first symbol is the label of the node; the second
    one is the single node that is reachable from the first one. Here are the relevant
    data definitions:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ [figureÂ 179](#%28counter._%28figure._fig~3asim-graph%29%29) çš„å³ä¾§å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨åµŒå¥—åˆ—è¡¨è¡¨ç¤ºæ­¤å›¾ã€‚æ¯ä¸ªèŠ‚ç‚¹ç”±ä¸¤ä¸ªç¬¦å·çš„åˆ—è¡¨è¡¨ç¤ºã€‚ç¬¬ä¸€ä¸ªç¬¦å·æ˜¯èŠ‚ç‚¹çš„æ ‡ç­¾ï¼›ç¬¬äºŒä¸ªç¬¦å·æ˜¯ä»ç¬¬ä¸€ä¸ªç¬¦å·å¯è¾¾çš„å•ä¸ªèŠ‚ç‚¹ã€‚ä»¥ä¸‹æ˜¯ç›¸å…³çš„æ•°æ®å®šä¹‰ï¼š
- en: '| ;Â A SimpleGraph is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Connection](#%28tech._connection%29)]
    |'
  id: totrans-158
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A SimpleGraph is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Connection](#%28tech._connection%29)]
    |'
- en: '| ;Â A Connection is a list of two items: |'
  id: totrans-159
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Connection is a list of two items: |'
- en: '| ;Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [Node](#%28tech._node%29)  [Node](#%28tech._node%29))
    |'
  id: totrans-160
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [Node](#%28tech._node%29)  [Node](#%28tech._node%29))
    |'
- en: '| ;Â A Node is a [Symbol](i2-3.html#%28tech._symbol%29). |'
  id: totrans-161
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Node is a [Symbol](i2-3.html#%28tech._symbol%29). |'
- en: 'They are straightforward translations of our informal descriptions.We already
    know that the problem calls for generative recursion, and it is easy to create
    the header material:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›æ˜¯ç›´æ¥ç¿»è¯‘æˆ‘ä»¬çš„éæ­£å¼æè¿°ã€‚æˆ‘ä»¬å·²ç»çŸ¥é“è¿™ä¸ªé—®é¢˜éœ€è¦ç”Ÿæˆé€’å½’ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“åˆ›å»ºå¤´ææ–™ï¼š
- en: '| ;Â [Node](#%28tech._node%29)  [Node](#%28tech._node%29)  [SimpleGraph](#%28tech._simplegraph%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-163
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Node](#%28tech._node%29)  [Node](#%28tech._node%29)  [SimpleGraph](#%28tech._simplegraph%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â is there a path from origin to destination |'
  id: totrans-164
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â is there a path from origin to destination |'
- en: '| ;Â in the simple graph sg |'
  id: totrans-165
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â in the simple graph sg |'
- en: '| Â  |'
  id: totrans-166
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists?Â ''AÂ ''EÂ a-sg)Â #true)
    |'
  id: totrans-167
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists?Â ''AÂ ''EÂ a-sg)Â #true)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists?Â ''AÂ ''FÂ a-sg)Â #false)
    |'
  id: totrans-168
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists?Â ''AÂ ''FÂ a-sg)Â #false)
    |'
- en: '| Â  |'
  id: totrans-169
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (path-exists?Â originÂ destinationÂ sg)
    |'
  id: totrans-170
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (path-exists?Â originÂ destinationÂ sg)
    |'
- en: '| Â Â #false) |'
  id: totrans-171
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â #false) |'
- en: 'What we need are answers to the four basic questions of the recipe for generative
    recursion:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éœ€è¦çš„æ˜¯ç”Ÿæˆé€’å½’é£Ÿè°±çš„å››ä¸ªåŸºæœ¬é—®é¢˜çš„ç­”æ¡ˆï¼š
- en: The problem is trivial if origin is the same as destination.
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœèµ·ç‚¹ä¸ç»ˆç‚¹ç›¸åŒï¼Œé—®é¢˜å°±å¾ˆç®€å•ã€‚
- en: 'The trivial solution is #true.'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯#trueã€‚
- en: 'If origin is not the same as destination, there is only one thing we can do:
    step to the immediate neighbor and search for destination from there.'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœèµ·ç‚¹ä¸ç»ˆç‚¹ä¸åŒï¼Œæˆ‘ä»¬åªèƒ½åšä¸€ä»¶äº‹ï¼šå‘æœ€è¿‘çš„é‚»å±…è¿ˆè¿›ï¼Œå¹¶ä»é‚£é‡Œå¯»æ‰¾ç»ˆç‚¹ã€‚
- en: There is no need to do anything if we find the solution to the new problem.
    If originâ€™s neighbor is connected to destination, then so is origin. Otherwise
    there is no connection.
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬æ‰¾åˆ°äº†æ–°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ— éœ€åšä»»ä½•äº‹æƒ…ã€‚å¦‚æœèµ·ç‚¹é‚»å±…ä¸ç»ˆç‚¹ç›¸è¿ï¼Œé‚£ä¹ˆèµ·ç‚¹ä¹Ÿä¸ä¹‹ç›¸è¿ã€‚å¦åˆ™ï¼Œæ²¡æœ‰è¿æ¥ã€‚
- en: From here we just need to express these answers in ISL+ to obtain a full-fledged
    program.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: ä»è¿™é‡Œæˆ‘ä»¬åªéœ€è¦ç”¨ISL+è¡¨è¾¾è¿™äº›ç­”æ¡ˆï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºã€‚
- en: '| ;Â [Node](#%28tech._node%29)  [Node](#%28tech._node%29)  [SimpleGraph](#%28tech._simplegraph%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-178
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [èŠ‚ç‚¹](#%28tech._node%29)  [èŠ‚ç‚¹](#%28tech._node%29)  [ç®€å•å›¾](#%28tech._simplegraph%29)
    -> [å¸ƒå°”](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â is there a path from origin to destination in sg |'
  id: totrans-179
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨sgä¸­ä»èµ·ç‚¹åˆ°ç»ˆç‚¹æ˜¯å¦å­˜åœ¨è·¯å¾„ |'
- en: '| Â  |'
  id: totrans-180
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists?Â ''AÂ ''EÂ a-sg)Â #true)
    |'
  id: totrans-181
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists?Â ''AÂ ''EÂ a-sg)Â #true)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists?Â ''AÂ ''FÂ a-sg)Â #false)
    |'
  id: totrans-182
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists?Â ''AÂ ''FÂ a-sg)Â #false)
    |'
- en: '| Â  |'
  id: totrans-183
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (path-exists?Â originÂ destinationÂ sg)
    |'
  id: totrans-184
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (path-exists?Â originÂ destinationÂ sg)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-185
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â originÂ destination)Â #t]
    |'
  id: totrans-186
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â originÂ destination)Â #t]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (path-exists?Â (neighborÂ originÂ sg)
    |'
  id: totrans-187
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (path-exists?Â (neighborÂ originÂ sg)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â destination |'
  id: totrans-188
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â destination |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sg)])) |'
  id: totrans-189
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sg)])) |'
- en: '| Â  |'
  id: totrans-190
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Node](#%28tech._node%29)  [SimpleGraph](#%28tech._simplegraph%29) -> [Node](#%28tech._node%29)
    |'
  id: totrans-191
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [èŠ‚ç‚¹](#%28tech._node%29)  [ç®€å•å›¾](#%28tech._simplegraph%29) -> [èŠ‚ç‚¹](#%28tech._node%29)
    |'
- en: '| ;Â determine the node that is connected to a-node in sg |'
  id: totrans-192
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç¡®å®šåœ¨sgä¸­ä¸a-nodeç›¸è¿çš„èŠ‚ç‚¹ |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (neighborÂ ''AÂ a-sg)Â ''B)
    |'
  id: totrans-193
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (neighborÂ ''AÂ a-sg)Â ''B)
    |'
- en: '| ([check-error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-error%29%29)Â (neighborÂ ''GÂ a-sg)Â "neighbor:
    not a node") |'
  id: totrans-194
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-error%29%29)Â (neighborÂ ''GÂ a-sg)Â "neighbor:
    not a node") |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (neighborÂ a-nodeÂ sg)
    |'
  id: totrans-195
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (neighborÂ a-nodeÂ sg)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-196
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â sg)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "neighbor:
    not a node")] |'
  id: totrans-197
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â sg)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "neighbor:
    not a node")] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sg))Â a-node)
    |'
  id: totrans-198
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sg))Â a-node)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sg))
    |'
  id: totrans-199
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._second%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â sg))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (neighborÂ a-nodeÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â sg)))]))
    |'
  id: totrans-200
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (neighborÂ a-nodeÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â sg)))]))
    |'
- en: ''
  id: totrans-201
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 180: Finding a path in a simple graph'
  id: totrans-202
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾180ï¼šåœ¨ç®€å•å›¾ä¸­æŸ¥æ‰¾è·¯å¾„
- en: '[FigureÂ 180](#%28counter._%28figure._fig~3apath-exists1%29%29) contains the
    complete program, including the function for finding the neighbor of a node in
    a simple graphâ€”<wbr>a straightforward exercise in structural recursionâ€”<wbr>and
    test cases for both possible outcomes. Donâ€™t run the program, however. If you
    do, be ready with your mouse to stop the run-away program. Indeed, even a casual
    look at the function suggests that we have a problem. Although the function is
    supposed to produce #false if there is no path from origin to destination, the
    program doesnâ€™t contain #false anywhere. Conversely, we need to ask what the function
    actually does when there is no path between two nodes.'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾180](#%28counter._%28figure._fig~3apath-exists1%29%29) åŒ…å«äº†å®Œæ•´çš„ç¨‹åºï¼ŒåŒ…æ‹¬åœ¨ç®€å•å›¾ä¸­æŸ¥æ‰¾èŠ‚ç‚¹é‚»å±…çš„å‡½æ•°â€”â€”è¿™æ˜¯ä¸€ä¸ªç»“æ„é€’å½’çš„ç›´æ¥ç»ƒä¹ â€”â€”ä»¥åŠé’ˆå¯¹ä¸¤ç§å¯èƒ½ç»“æœçš„æµ‹è¯•ç”¨ä¾‹ã€‚ä½†æ˜¯ä¸è¦è¿è¡Œç¨‹åºã€‚å¦‚æœä½ è¿è¡Œäº†ï¼Œå‡†å¤‡å¥½ç”¨é¼ æ ‡åœæ­¢å¤±æ§çš„ç¨‹åºã€‚ç¡®å®ï¼Œå³ä½¿ç²—ç•¥åœ°çœ‹ä¸€ä¸‹å‡½æ•°ï¼Œä¹Ÿæš—ç¤ºæˆ‘ä»¬æœ‰ä¸€ä¸ªé—®é¢˜ã€‚å°½ç®¡è¯¥å‡½æ•°æœ¬åº”åœ¨æ²¡æœ‰ä»èµ·ç‚¹åˆ°ç»ˆç‚¹è·¯å¾„çš„æƒ…å†µä¸‹äº§ç”Ÿ
    #falseï¼Œä½†ç¨‹åºä¸­ä»»ä½•åœ°æ–¹éƒ½æ²¡æœ‰åŒ…å« #falseã€‚ç›¸åï¼Œæˆ‘ä»¬éœ€è¦è¯¢é—®å½“ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰è·¯å¾„æ—¶ï¼Œå‡½æ•°å®é™…ä¸Šåšäº†ä»€ä¹ˆã€‚'
- en: 'Take another look at [figureÂ 179](#%28counter._%28figure._fig~3asim-graph%29%29).
    In this simple graph there is no path from C to D. The connection that leaves
    C passes right by D and instead goes to E. So letâ€™s look at a hand-evaluation:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: å†çœ‹çœ‹[å›¾179](#%28counter._%28figure._fig~3asim-graph%29%29)ã€‚åœ¨è¿™ä¸ªç®€å•å›¾ä¸­ï¼Œä»Cåˆ°Dæ²¡æœ‰è·¯å¾„ã€‚ç¦»å¼€Cçš„è¿æ¥ç›´æ¥ç»è¿‡Dï¼Œè€Œä¸æ˜¯å»Eã€‚æ‰€ä»¥è®©æˆ‘ä»¬çœ‹çœ‹æ‰‹åŠ¨è¯„ä¼°ï¼š
- en: '| (path-exists?Â ''CÂ ''DÂ ''((AÂ B)Â ![image](../Images/f3b90b6103b5a2c514feeda21cedbd2e.png)Â (FÂ F)))
    |'
  id: totrans-205
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (path-exists?Â ''CÂ ''DÂ ''((AÂ B)Â ![image](../Images/f3b90b6103b5a2c514feeda21cedbd2e.png)Â (FÂ F)))
    |'
- en: '| ==Â (path-exists?Â ''EÂ ''DÂ ''((AÂ B)Â Â ![image](../Images/214edf4315b3bce96edc25fa984eb817.png)Â (FÂ F)))
    |'
  id: totrans-206
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (path-exists? ''E ''D ''((A B) ![å›¾ç‰‡](../Images/214edf4315b3bce96edc25fa984eb817.png)
    (F F))) |'
- en: '| ==Â (path-exists?Â ''BÂ ''DÂ ''((AÂ B)Â Â ![image](../Images/762d4f59557b80d1b76fe806118563ab.png)Â (FÂ F)))
    |'
  id: totrans-207
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (path-exists? ''B ''D ''((A B) ![å›¾ç‰‡](../Images/762d4f59557b80d1b76fe806118563ab.png)
    (F F))) |'
- en: '| ==Â (path-exists?Â ''CÂ ''DÂ ''((AÂ B)Â Â ![image](../Images/c909d5a4ab1a156df8fdb211f315406f.png)Â (FÂ F)))
    |'
  id: totrans-208
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (path-exists? ''C ''D ''((A B) ![å›¾ç‰‡](../Images/c909d5a4ab1a156df8fdb211f315406f.png)
    (F F))) |'
- en: It confirms that as the function recurs, it calls itself with the exact same
    arguments again and again. In other words, the evaluation never stops.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç¡®è®¤äº†å½“å‡½æ•°é€’å½’æ—¶ï¼Œå®ƒä¼šä¸€æ¬¡åˆä¸€æ¬¡åœ°ç”¨å®Œå…¨ç›¸åŒçš„å‚æ•°è°ƒç”¨è‡ªå·±ã€‚æ¢å¥è¯è¯´ï¼Œè¯„ä¼°æ°¸è¿œä¸ä¼šåœæ­¢ã€‚
- en: Our problem with path-exists? is again a loss of â€œknowledge,â€ similar to that
    of relative->absolute above. Like relative->absolute, the design of path-exists?
    uses a recipe and assumes that recursive calls are independent of their context.
    In the case of path-exists? this means, in particular, that the function doesnâ€™t
    â€œknowâ€ whether a previous application in the current chain of recursions received
    the exact same arguments.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯¹`path-exists?`çš„é—®é¢˜å†æ¬¡æ˜¯ä¸€ä¸ªâ€œçŸ¥è¯†â€çš„ä¸§å¤±ï¼Œç±»ä¼¼äºä¸Šé¢æåˆ°çš„`relative->absolute`ã€‚å°±åƒ`relative->absolute`ä¸€æ ·ï¼Œ`path-exists?`çš„è®¾è®¡ä½¿ç”¨äº†ä¸€ä¸ªé…æ–¹ï¼Œå¹¶å‡è®¾é€’å½’è°ƒç”¨ä¸å…¶ä¸Šä¸‹æ–‡æ— å…³ã€‚åœ¨`path-exists?`çš„æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€ï¼Œç‰¹åˆ«æ˜¯ï¼Œå‡½æ•°â€œä¸çŸ¥é“â€å½“å‰é€’å½’é“¾ä¸­çš„å‰ä¸€æ¬¡åº”ç”¨æ˜¯å¦æ¥æ”¶äº†å®Œå…¨ç›¸åŒçš„å‚æ•°ã€‚
- en: The solution to this design problem follows the pattern of the preceding section.
    We add a parameter, which we call seen and which represents the accumulated list
    of starter nodes that the function has encountered, starting with the original
    application. Its initial value must be '(). As the function checks on a specific
    origin and moves to its neighbors, origin is added to seen.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: è§£å†³è¿™ä¸ªè®¾è®¡é—®é¢˜çš„æ–¹æ³•éµå¾ªäº†ä¸Šä¸€èŠ‚çš„æ¨¡å¼ã€‚æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º`seen`ï¼Œå®ƒä»£è¡¨äº†å‡½æ•°ä»åŸå§‹åº”ç”¨å¼€å§‹é‡åˆ°çš„ç´¯ç§¯èµ·å§‹èŠ‚ç‚¹åˆ—è¡¨ã€‚å®ƒçš„åˆå§‹å€¼å¿…é¡»æ˜¯`()`ã€‚å½“å‡½æ•°æ£€æŸ¥ç‰¹å®šçš„åŸç‚¹å¹¶ç§»åŠ¨åˆ°å…¶é‚»å±…æ—¶ï¼ŒåŸç‚¹è¢«æ·»åŠ åˆ°`seen`ä¸­ã€‚
- en: 'Here is a first revision of path-exists?, dubbed path-exists?/a:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯`path-exists?`çš„ç¬¬ä¸€ä¸ªä¿®è®¢ç‰ˆï¼Œè¢«ç§°ä¸º`path-exists?/a`ï¼š
- en: '| ;Â [Node](#%28tech._node%29)  [Node](#%28tech._node%29)  [SimpleGraph](#%28tech._simplegraph%29)
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Node](#%28tech._node%29)]
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-213
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [èŠ‚ç‚¹](#%28tech._node%29) [èŠ‚ç‚¹](#%28tech._node%29) [ç®€å•å›¾](#%28tech._simplegraph%29)
    [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) [èŠ‚ç‚¹](#%28tech._node%29)] ->
    [å¸ƒå°”å€¼](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â is there a path from origin to destination |'
  id: totrans-214
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»åŸç‚¹åˆ°ç›®æ ‡æ˜¯å¦æœ‰è·¯å¾„ |'
- en: '| ;Â assume there are no paths for the nodes in seen |'
  id: totrans-215
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å‡è®¾åœ¨å·²çœ‹åˆ°çš„èŠ‚ç‚¹ä¸­æ²¡æœ‰è·¯å¾„ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (path-exists?/aÂ originÂ destinationÂ sgÂ seen)
    |'
  id: totrans-216
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (path-exists?/a åŸç‚¹ ç›®æ ‡ sg seen))'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-217
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â originÂ destination)Â #true]
    |'
  id: totrans-218
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([ç¬¦å·=ï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)
    åŸç‚¹ ç›®æ ‡) #true] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (path-exists?/aÂ (neighborÂ originÂ sg)
    |'
  id: totrans-219
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    (path-exists?/a (neighbor åŸç‚¹ sg) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â destination |'
  id: totrans-220
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ç›®æ ‡ |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sg |'
  id: totrans-221
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sg |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â originÂ seen))]))
    |'
  id: totrans-222
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    åŸç‚¹ å·²çœ‹åˆ°))])) |'
- en: The addition of the new parameter alone does not solve our problem, but, as
    the hand-evaluation of
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: å•ç‹¬æ·»åŠ æ–°å‚æ•°å¹¶ä¸èƒ½è§£å†³æˆ‘ä»¬çš„é—®é¢˜ï¼Œä½†æ­£å¦‚æ‰‹åŠ¨è¯„ä¼°
- en: (path-exists?/aÂ 'CÂ 'DÂ '((AÂ B)Â ![image](../Images/3a950954c22e19d9d89ddb3d8ab43f03.png)Â (FÂ F))Â '())
  id: totrans-224
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (path-exists?/a 'C 'D '((A B) ![å›¾ç‰‡](../Images/3a950954c22e19d9d89ddb3d8ab43f03.png)
    (F F)) '())
- en: 'shows, it provides the foundation for one:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ç¤ºï¼Œå®ƒä¸ºè§£å†³æä¾›äº†ä¸€ä¸ªåŸºç¡€ï¼š
- en: '| ==Â (path-exists?/aÂ ''EÂ ''DÂ ''((AÂ B)Â ![image](../Images/e58bb455008467615958a41a77a5084f.png)Â (FÂ F))Â ''(C))
    |'
  id: totrans-226
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (path-exists?/aÂ ''EÂ ''DÂ ''((AÂ B)Â ![image](../Images/e58bb455008467615958a41a77a5084f.png)Â (FÂ F))Â ''(C))
    |'
- en: '| ==Â (path-exists?/aÂ ''BÂ ''DÂ ''((AÂ B)Â ![image](../Images/20282f15827ece33fef21e4aa8ab7a7d.png)Â (FÂ F))Â ''(EÂ C))
    |'
  id: totrans-227
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (path-exists?/aÂ ''BÂ ''DÂ ''((AÂ B)Â ![image](../Images/20282f15827ece33fef21e4aa8ab7a7d.png)Â (FÂ F))Â ''(EÂ C))
    |'
- en: '| ==Â (path-exists?/aÂ ''CÂ ''DÂ ''((AÂ B)Â ![image](../Images/f0c780d328fcc52fa9608528d8c8f2bc.png)Â (FÂ F))Â ''(BÂ EÂ C))
    |'
  id: totrans-228
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (path-exists?/aÂ ''CÂ ''DÂ ''((AÂ B)Â ![image](../Images/f0c780d328fcc52fa9608528d8c8f2bc.png)Â (FÂ F))Â ''(BÂ EÂ C))
    |'
- en: In contrast to the original function, the revised function no longer calls itself
    with the exact same arguments. While the three arguments proper are again the
    same for the third recursive application, the accumulator argument is different
    from that of the first application. Instead of '(), it is now '(B  E  C). The
    new value tells us that during the search of a path from 'C to 'D, the function
    has inspected 'B, 'E, and 'C as starting points.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸åŸå§‹å‡½æ•°ç›¸æ¯”ï¼Œä¿®æ”¹åçš„å‡½æ•°ä¸å†ä½¿ç”¨å®Œå…¨ç›¸åŒçš„å‚æ•°è°ƒç”¨è‡ªèº«ã€‚è™½ç„¶å¯¹äºç¬¬ä¸‰æ¬¡é€’å½’åº”ç”¨ï¼Œä¸‰ä¸ªæ­£ç¡®å‚æ•°å†æ¬¡ç›¸åŒï¼Œä½†ç´¯åŠ å™¨å‚æ•°ä¸ç¬¬ä¸€æ¬¡åº”ç”¨çš„ä¸åŒã€‚ä¸å†æ˜¯ '()ï¼Œç°åœ¨æ˜¯
    '(B  E  C)ã€‚æ–°çš„å€¼å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨ä» 'C åˆ° 'D çš„è·¯å¾„æœç´¢è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°å·²å°† 'Bã€'E å’Œ 'C ä½œä¸ºèµ·ç‚¹è¿›è¡Œäº†æ£€æŸ¥ã€‚
- en: 'All we need to do now is to make the algorithm exploit the accumulated knowledge.
    Specifically, the algorithm can determine whether the given origin is already
    an item in seen. If so, the problem is also trivially solvable, yielding #false
    as the solution. [FigureÂ 181](#%28counter._%28figure._fig~3apath-exists2%29%29)
    contains the definition of path-exists.v2?, which is the revision of path-exists?.
    The definition refers to [member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29),
    an ISL+ function.'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç°åœ¨æˆ‘ä»¬éœ€è¦è®©ç®—æ³•åˆ©ç”¨ç§¯ç´¯çš„çŸ¥è¯†ã€‚å…·ä½“æ¥è¯´ï¼Œç®—æ³•å¯ä»¥ç¡®å®šç»™å®šçš„åŸç‚¹æ˜¯å¦å·²ç»æ˜¯ seen ä¸­çš„é¡¹ç›®ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œé—®é¢˜ä¹Ÿå¯ä»¥è½»æ˜“è§£å†³ï¼Œå¾—åˆ° #false
    ä½œä¸ºè§£å†³æ–¹æ¡ˆã€‚[å›¾ 181](#%28counter._%28figure._fig~3apath-exists2%29%29) åŒ…å«äº† path-exists.v2?
    çš„å®šä¹‰ï¼Œè¿™æ˜¯ path-exists? çš„ä¿®è®¢ç‰ˆã€‚è¯¥å®šä¹‰å¼•ç”¨äº† [member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)ï¼Œä¸€ä¸ª
    ISL+ å‡½æ•°ã€‚'
- en: '| ;Â [Node](#%28tech._node%29)  [Node](#%28tech._node%29)  [SimpleGraph](#%28tech._simplegraph%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-231
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [èŠ‚ç‚¹](#%28tech._node%29)  [èŠ‚ç‚¹](#%28tech._node%29)  [ç®€å•å›¾](#%28tech._simplegraph%29)
    -> [å¸ƒå°”å€¼](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â is there a path from origin to destination in sg |'
  id: totrans-232
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ˜¯å¦å­˜åœ¨ä»åŸç‚¹åˆ°ç›®æ ‡ç‚¹çš„è·¯å¾„åœ¨ sg ä¸­ |'
- en: '| Â  |'
  id: totrans-233
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists.v2?Â ''AÂ ''EÂ a-sg)Â #true)
    |'
  id: totrans-234
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists.v2?Â ''AÂ ''EÂ a-sg)Â #true)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists.v2?Â ''AÂ ''FÂ a-sg)Â #false)
    |'
  id: totrans-235
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (path-exists.v2?Â ''AÂ ''FÂ a-sg)Â #false)
    |'
- en: '| Â  |'
  id: totrans-236
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (path-exists.v2?Â originÂ destinationÂ sg)
    |'
  id: totrans-237
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (path-exists.v2?Â originÂ destinationÂ sg)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Node](#%28tech._node%29)  [Node](#%28tech._node%29)  [SimpleGraph](#%28tech._simplegraph%29)
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Node](#%28tech._node%29)]
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-238
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [èŠ‚ç‚¹](#%28tech._node%29)  [èŠ‚ç‚¹](#%28tech._node%29)  [ç®€å•å›¾](#%28tech._simplegraph%29)
    [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29)  [èŠ‚ç‚¹](#%28tech._node%29)]
    -> [å¸ƒå°”å€¼](part_one.html#%28tech._boolean%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (path-exists?/aÂ originÂ seen)
    |'
  id: totrans-239
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (path-exists?/aÂ originÂ seen)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-240
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â originÂ destination)Â #t]
    |'
  id: totrans-241
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â originÂ destination)Â #t]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â originÂ seen)Â #f]
    |'
  id: totrans-242
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â originÂ seen)Â #f]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (path-exists?/aÂ (neighborÂ originÂ sg)
    |'
  id: totrans-243
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (path-exists?/aÂ (neighborÂ originÂ sg)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â originÂ seen))])))
    |'
  id: totrans-244
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â originÂ seen)))))
    |'
- en: '| Â Â Â Â (path-exists?/aÂ originÂ ''()))) |'
  id: totrans-245
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (path-exists?/aÂ originÂ ''()))) |'
- en: ''
  id: totrans-246
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 181: Finding a path in a simple graph with an accumulator'
  id: totrans-247
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾181ï¼šä½¿ç”¨ç´¯åŠ å™¨åœ¨ç®€å•å›¾ä¸­å¯»æ‰¾è·¯å¾„
- en: The definition of path-exists.v2? also eliminates the two minor problems with
    the first revision. By localizing the definition of the accumulating function,
    we can ensure that the first call always uses '() as the initial value for seen.
    And, path-exists.v2? satisfies the exact same signature and purpose statement
    as the path-exists? function.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: path-exists.v2? çš„å®šä¹‰ä¹Ÿæ¶ˆé™¤äº†ç¬¬ä¸€ç‰ˆä¸­çš„ä¸¤ä¸ªå°é—®é¢˜ã€‚é€šè¿‡å±€éƒ¨åŒ–ç´¯åŠ å‡½æ•°çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿ç¬¬ä¸€æ¬¡è°ƒç”¨æ€»æ˜¯ä½¿ç”¨ '() ä½œä¸º seen çš„åˆå§‹å€¼ã€‚æ­¤å¤–ï¼Œpath-exists.v2?
    ä¸ path-exists? å‡½æ•°å…·æœ‰å®Œå…¨ç›¸åŒçš„ç­¾åå’Œç›®çš„è¯´æ˜ã€‚
- en: Still, there is a significant difference between path-exists.v2? and relative-to-absolute2.
    Whereas the latter was equivalent to the original function, path-exists.v2? improves
    on path-exists?. While the latter fails to find an answer for some inputs, path-exists.v2?
    finds a solution for any simple graph.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡å¦‚æ­¤ï¼Œpath-exists.v2? ä¸ relative-to-absolute2 ä¹‹é—´ä»ç„¶å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚åè€…ä¸åŸå§‹å‡½æ•°ç­‰ä»·ï¼Œè€Œ path-exists.v2?
    åœ¨ path-exists? çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ã€‚åè€…åœ¨æŸäº›è¾“å…¥ä¸Šæ— æ³•æ‰¾åˆ°ç­”æ¡ˆï¼Œè€Œ path-exists.v2? å¯¹äºä»»ä½•ç®€å•å›¾éƒ½èƒ½æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚
- en: 'ExerciseÂ 492\. Modify the definitions in [figureÂ 169](part_five.html#%28counter._fsm._%28figure._fig~3afind-path-code%29%29)
    so that the program produces #false, even if it encounters the same origin twice.'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹ 492ã€‚ä¿®æ”¹ [å›¾169](part_five.html#%28counter._fsm._%28figure._fig~3afind-path-code%29%29)
    ä¸­çš„å®šä¹‰ï¼Œä½¿å¾—ç¨‹åºå³ä½¿åœ¨é‡åˆ°ç›¸åŒçš„èµ·ç‚¹ä¸¤æ¬¡æ—¶ä¹Ÿèƒ½äº§ç”Ÿ #falseã€‚'
- en: 32Designing Accumulator-Style Functions[ğŸ”—](#(part._sec~3adesign-accu) "Link
    to here")
  id: totrans-251
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 32è®¾è®¡ç´¯åŠ é£æ ¼å‡½æ•°[ğŸ”—](#(part._sec~3adesign-accu) "é“¾æ¥åˆ°æ­¤å¤„")
- en: The preceding chapter illustrates the need for accumulating extra knowledge
    with two examples. In one case, accumulation makes it easy to understand the function
    and yields one that is far faster than the original version. In the other case,
    accumulation is necessary for the function to work properly. In both cases, though,
    the need for accumulation becomes apparent only once a properly designed function
    exists.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: å‰ä¸€ç« é€šè¿‡ä¸¤ä¸ªä¾‹å­è¯´æ˜äº†ç§¯ç´¯é¢å¤–çŸ¥è¯†çš„éœ€æ±‚ã€‚åœ¨ä¸€ç§æƒ…å†µä¸‹ï¼Œç§¯ç´¯ä½¿ç†è§£å‡½æ•°å˜å¾—å®¹æ˜“ï¼Œå¹¶äº§ç”Ÿäº†ä¸€ä¸ªæ¯”åŸå§‹ç‰ˆæœ¬å¿«å¾—å¤šçš„ç‰ˆæœ¬ã€‚åœ¨å¦ä¸€ç§æƒ…å†µä¸‹ï¼Œç§¯ç´¯å¯¹äºå‡½æ•°æ­£å¸¸å·¥ä½œæ˜¯å¿…è¦çš„ã€‚ç„¶è€Œï¼Œåœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œç§¯ç´¯çš„éœ€æ±‚åªæœ‰åœ¨å­˜åœ¨ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„å‡½æ•°ä¹‹åæ‰ä¼šå˜å¾—æ˜æ˜¾ã€‚
- en: 'Generalizing from the preceding chapter suggests that the design of accumulator
    functions has two major aspects:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: ä»å‰ä¸€ç« çš„æ¨å¹¿æ¥çœ‹ï¼Œç´¯åŠ å‡½æ•°çš„è®¾è®¡æœ‰ä¸¤ä¸ªä¸»è¦æ–¹é¢ï¼š
- en: the recognition that a function benefits from an accumulator; and
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è®¤è¯†åˆ°å‡½æ•°ä»ç´¯åŠ å™¨ä¸­å—ç›Šï¼›å¹¶ä¸”
- en: an understanding of what the accumulator represents.
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç†è§£ç´¯åŠ å™¨ä»£è¡¨çš„å†…å®¹ã€‚
- en: The first two sections address these two questions. Because the second one is
    a difficult topic, the third section illustrates it with a series of examples
    that convert regular functions into accumulating ones.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: å‰ä¸¤èŠ‚è®¨è®ºäº†è¿™ä¸¤ä¸ªé—®é¢˜ã€‚ç”±äºç¬¬äºŒä¸ªé—®é¢˜æ˜¯ä¸€ä¸ªéš¾é¢˜ï¼Œç¬¬ä¸‰èŠ‚é€šè¿‡ä¸€ç³»åˆ—ç¤ºä¾‹æ¥è¯´æ˜å®ƒï¼Œè¿™äº›ç¤ºä¾‹å°†å¸¸è§„å‡½æ•°è½¬æ¢ä¸ºç´¯åŠ å‡½æ•°ã€‚
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] |'
  id: totrans-257
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] |'
- en: '| ;Â constructs the reverse of alox |'
  id: totrans-258
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â constructs the reverse of alox |'
- en: '| Â  |'
  id: totrans-259
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (invertÂ ''(aÂ bÂ c))Â ''(cÂ bÂ a))
    |'
  id: totrans-260
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (invertÂ ''(aÂ bÂ c))Â ''(cÂ bÂ a))
    |'
- en: '| Â  |'
  id: totrans-261
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     |   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (invertÂ alox)
    |'
  id: totrans-262
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (invertÂ alox)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-263
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     |   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alox)Â ''()]
    |'
  id: totrans-264
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     |     [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alox)Â ''()]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-265
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     |   [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â (add-as-lastÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alox)Â (invertÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alox)))]))
    |'
  id: totrans-266
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     |     |   (add-as-lastÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alox)Â (invertÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alox)))
    |'
- en: '| Â  |'
  id: totrans-267
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     |   |'
- en: '| ;Â X [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] |'
  id: totrans-268
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     ;Â X [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] |'
- en: '| ;Â adds an-x to the end of alox |'
  id: totrans-269
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     ;Â æ·»åŠ an-xåˆ°aloxçš„æœ«å°¾ |'
- en: '| Â  |'
  id: totrans-270
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (add-as-lastÂ ''aÂ ''(cÂ b))Â ''(cÂ bÂ a))
    |'
  id: totrans-271
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (add-as-lastÂ ''aÂ ''(cÂ b))Â ''(cÂ bÂ a))
    |'
- en: '| Â  |'
  id: totrans-272
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     |   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-as-lastÂ an-xÂ alox)
    |'
  id: totrans-273
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-as-lastÂ an-xÂ alox)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-274
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     |   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alox)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â an-x)]
    |'
  id: totrans-275
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     |     [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alox)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â an-x)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-276
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alox)Â (add-as-lastÂ an-xÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alox)))]))
    |'
  id: totrans-277
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|     |     |   ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alox)Â (add-as-lastÂ an-xÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alox)))
    |'
- en: ''
  id: totrans-278
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 182: Design with accumulators, a structural example'
  id: totrans-279
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 182ï¼šä½¿ç”¨ç´¯åŠ å™¨çš„ç»“æ„ç¤ºä¾‹
- en: 32.1Recognizing the Need for an Accumulator[ğŸ”—](#(part._sec~3aneed-accu) "Link
    to here")
  id: totrans-280
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 32.1è¯†åˆ«éœ€è¦ç´¯åŠ å™¨[ğŸ”—](#(part._sec~3aneed-accu) "é“¾æ¥è‡³æ­¤")
- en: 'Recognizing the need for accumulators is not an easy task. We have seen two
    reasons, and they are the most prevalent ones. In either case, it is critical
    that we first built a complete function based on a conventional design recipe.
    Then we study the function and proceed as follows:'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: è¯†åˆ«éœ€è¦ç´¯åŠ å™¨å¹¶éæ˜“äº‹ã€‚æˆ‘ä»¬çœ‹åˆ°äº†ä¸¤ä¸ªåŸå› ï¼Œå®ƒä»¬æ˜¯æœ€æ™®éçš„ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆåŸºäºä¼ ç»Ÿè®¾è®¡é…æ–¹æ„å»ºä¸€ä¸ªå®Œæ•´çš„å‡½æ•°éƒ½æ˜¯è‡³å…³é‡è¦çš„ã€‚ç„¶åæˆ‘ä»¬ç ”ç©¶è¯¥å‡½æ•°å¹¶æŒ‰ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š
- en: If a structurally recursive function traverses the result of its natural recursion
    with an auxiliary, recursive function, consider the use of an accumulator parameter.
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœä¸€ä¸ªç»“æ„é€’å½’å‡½æ•°ä½¿ç”¨è¾…åŠ©é€’å½’å‡½æ•°éå†å…¶è‡ªç„¶é€’å½’çš„ç»“æœï¼Œè¯·è€ƒè™‘ä½¿ç”¨ç´¯åŠ å™¨å‚æ•°ã€‚
- en: Take a look at the definition of invert in [figureÂ 182](#%28counter._%28figure._fig~3adesign-accu-ex%29%29).
    The result of the recursive application produces the reverse of the rest of the
    list. It uses add-as-last to add the first item to this reversed list and thus
    creates the reverse of the entire list. This second, auxiliary function is also
    recursive. We have thus identified an accumulator candidate.
  id: totrans-283
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹å›¾ 182 ä¸­ invert çš„å®šä¹‰[å›¾](#%28counter._%28figure._fig~3adesign-accu-ex%29%29)ã€‚é€’å½’åº”ç”¨çš„ç»“æœæ˜¯åˆ—è¡¨å…¶ä½™éƒ¨åˆ†çš„é€†åºã€‚å®ƒä½¿ç”¨
    add-as-last å°†ç¬¬ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°è¿™ä¸ªé€†åºåˆ—è¡¨ä¸­ï¼Œä»è€Œåˆ›å»ºæ•´ä¸ªåˆ—è¡¨çš„é€†åºã€‚è¿™ä¸ªç¬¬äºŒä¸ªè¾…åŠ©å‡½æ•°ä¹Ÿæ˜¯é€’å½’çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å·²ç»ç¡®å®šäº†ä¸€ä¸ªç´¯åŠ å™¨å€™é€‰è€…ã€‚
- en: 'It is now time to study some hand-evaluations, as in [A Problem with Structural
    Processing](#%28part._sec~3aloss~3astructural%29), to see whether an accumulator
    helps. Consider the following:'
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç°åœ¨æ˜¯æ—¶å€™ç ”ç©¶ä¸€äº›æ‰‹ç®—ç¤ºä¾‹ï¼Œå¦‚[A Problem with Structural Processing](#%28part._sec~3aloss~3astructural%29)ï¼Œä»¥æŸ¥çœ‹ç´¯åŠ å™¨æ˜¯å¦æœ‰å¸®åŠ©ã€‚è€ƒè™‘ä»¥ä¸‹å†…å®¹ï¼š
- en: '| (invertÂ ''(aÂ bÂ c)) |'
  id: totrans-285
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| (invertÂ ''(aÂ bÂ c)) |'
- en: '| ==Â (add-as-lastÂ ''aÂ (invertÂ ''(bÂ c))) |'
  id: totrans-286
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (add-as-lastÂ ''aÂ (invertÂ ''(bÂ c))) |'
- en: '| ==Â (add-as-lastÂ ''aÂ (add-as-lastÂ ''bÂ (invertÂ ''(c)))) |'
  id: totrans-287
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (add-as-lastÂ ''aÂ (add-as-lastÂ ''bÂ (invertÂ ''(c)))) |'
- en: '| ==Â ... |'
  id: totrans-288
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â ... |'
- en: '| ==Â (add-as-lastÂ ''aÂ (add-as-lastÂ ''bÂ ''(c))) |'
  id: totrans-289
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (add-as-lastÂ ''aÂ (add-as-lastÂ ''bÂ ''(c))) |'
- en: '| ==Â (add-as-lastÂ ''aÂ ''(cÂ b)) |'
  id: totrans-290
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (add-as-lastÂ ''aÂ ''(cÂ b)) |'
- en: '| ==Â ''(cÂ bÂ a) |'
  id: totrans-291
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â ''(cÂ bÂ a) |'
- en: Stop! Replace the dots with the two missing steps. Then you can see that invert
    eventually reaches the end of the given listâ€”<wbr>just like add-as-lastâ€”<wbr>and
    if it knew which items to put there, there would be no need for the auxiliary
    function.
  id: totrans-292
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼å°†ç‚¹æ›¿æ¢ä¸ºä¸¤ä¸ªç¼ºå¤±çš„æ­¥éª¤ã€‚ç„¶åä½ å¯ä»¥çœ‹åˆ° invert æœ€ç»ˆä¼šåˆ°è¾¾ç»™å®šåˆ—è¡¨çš„æœ«å°¾â€”â€”å°±åƒ add-as-last ä¸€æ ·â€”â€”å¦‚æœå®ƒçŸ¥é“åº”è¯¥æ”¾ç½®å“ªäº›é¡¹ç›®ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦è¾…åŠ©å‡½æ•°äº†ã€‚
- en: If we are dealing with a function based on generative recursion, we are faced
    with a much more difficult task. Our goal must be to understand whether the algorithm
    can fail to produce a result for inputs for which we expect a result. If so, adding
    a parameter that accumulates knowledge may help. Because these situations are
    complex, we defer the discussion of an example to [More Uses of Accumulation](#%28part._ch~3amore-accu%29).
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬å¤„ç†çš„æ˜¯åŸºäºç”Ÿæˆé€’å½’çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°†é¢ä¸´ä¸€ä¸ªæ›´åŠ å›°éš¾çš„ä»»åŠ¡ã€‚æˆ‘ä»¬çš„ç›®æ ‡å¿…é¡»ç†è§£ç®—æ³•æ˜¯å¦å¯èƒ½å¯¹äºæˆ‘ä»¬æœŸæœ›æœ‰ç»“æœçš„è¾“å…¥æ— æ³•äº§ç”Ÿç»“æœã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œæ·»åŠ ä¸€ä¸ªç´¯ç§¯çŸ¥è¯†çš„å‚æ•°å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚å› ä¸ºè¿™äº›æƒ…å†µå¾ˆå¤æ‚ï¼Œæˆ‘ä»¬å°†è®¨è®ºçš„ä¾‹å­æ¨è¿Ÿåˆ°[More
    Uses of Accumulation](#%28part._ch~3amore-accu%29)ã€‚
- en: 'ExerciseÂ 493\. Argue that, in the terminology of [Intermezzo 5: The Cost of
    Computation](i5-6.html), invert consumes O(n2) time when the given list consists
    of n items.'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹  493ã€‚è®ºè¯ï¼Œåœ¨[Intermezzo 5: The Cost of Computation](i5-6.html)çš„æœ¯è¯­ä¸­ï¼Œinvert å½“ç»™å®šçš„åˆ—è¡¨åŒ…å«
    n ä¸ªå…ƒç´ æ—¶æ¶ˆè€— O(n^2) çš„æ—¶é—´ã€‚'
- en: ExerciseÂ 494\. Does the insertion sort> function from [Auxiliary Functions that
    Recur](part_two.html#%28part._sec~3asort.I%29) need an accumulator? If so, why?
    If not, why not?
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  494ã€‚ä»[Auxiliary Functions that Recur](part_two.html#%28part._sec~3asort.I%29)ä¸­çš„æ’å…¥æ’åºå‡½æ•°æ˜¯å¦éœ€è¦ç´¯åŠ å™¨ï¼Ÿå¦‚æœæ˜¯ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœä¸æ˜¯ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯ï¼Ÿ
- en: 32.2Adding Accumulators[ğŸ”—](#(part._sec~3aaccu-style) "Link to here")
  id: totrans-296
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 32.2æ·»åŠ ç´¯åŠ å™¨[ğŸ”—](#(part._sec~3aaccu-style) "é“¾æ¥è‡³æ­¤")
- en: 'Once you have decided that an existing function should be equipped with an
    accumulator, take these two steps:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦å†³å®šç°æœ‰å‡½æ•°åº”è¯¥é…å¤‡ç´¯åŠ å™¨ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š
- en: Determine the knowledge that the accumulator represents, what kind of data to
    use, and how the knowledge is acquired as data.
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¡®å®šç´¯åŠ å™¨æ‰€ä»£è¡¨çš„çŸ¥è¯†ï¼Œä½¿ç”¨å“ªç§æ•°æ®ï¼Œä»¥åŠçŸ¥è¯†å¦‚ä½•ä½œä¸ºæ•°æ®è·å¾—ã€‚
- en: For example, for the conversion of relative distances to absolute distances,
    it suffices to accumulate the total distance encountered so far. As the function
    processes the list of relative distances, it adds each new relative distance found
    to the accumulatorâ€™s current value. For the routing problem, the accumulator remembers
    every node encountered. As the path-checking function traverses the graph, it
    [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)es
    each new node on to the accumulator.
  id: totrans-299
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œå¯¹äºç›¸å¯¹è·ç¦»åˆ°ç»å¯¹è·ç¦»çš„è½¬æ¢ï¼Œåªéœ€ç´¯ç§¯è¿„ä»Šä¸ºæ­¢é‡åˆ°çš„æ€»è·ç¦»å°±è¶³å¤Ÿäº†ã€‚å½“å‡½æ•°å¤„ç†ç›¸å¯¹è·ç¦»åˆ—è¡¨æ—¶ï¼Œå®ƒä¼šå°†æ‰¾åˆ°çš„æ¯ä¸ªæ–°ç›¸å¯¹è·ç¦»æ·»åŠ åˆ°ç´¯åŠ å™¨çš„å½“å‰å€¼ã€‚å¯¹äºè·¯ç”±é—®é¢˜ï¼Œç´¯åŠ å™¨è®°ä½æ¯ä¸ªé‡åˆ°çš„èŠ‚ç‚¹ã€‚å½“è·¯å¾„æ£€æŸ¥å‡½æ•°éå†å›¾æ—¶ï¼Œå®ƒå°†æ¯ä¸ªæ–°èŠ‚ç‚¹[cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)åˆ°ç´¯åŠ å™¨ä¸Šã€‚
- en: In general, you will want to proceed as follows.
  id: totrans-300
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼Œä½ å°†æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œã€‚
- en: 'Create an accumulator template:'
  id: totrans-301
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ªç´¯åŠ å™¨æ¨¡æ¿ï¼š
- en: '| ;Â Domain -> Range |'
  id: totrans-302
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åŸŸ -> èŒƒå›´ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (functionÂ d0)
    |'
  id: totrans-303
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (functionÂ d0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â Domain
    AccuDomain -> Range |'
  id: totrans-304
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â åŸŸ
    ç´¯åŠ åŸŸ -> èŒƒå›´ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator ... |'
  id: totrans-305
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â ç´¯åŠ å™¨ ... |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (function/aÂ dÂ a)
    |'
  id: totrans-306
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (function/aÂ dÂ a)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
  id: totrans-307
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))
    |'
- en: '| Â Â Â Â (function/aÂ d0Â a0))) |'
  id: totrans-308
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (function/aÂ d0Â a0))) |'
- en: Sketch a manual evaluation of an application of function to understand the nature
    of the accumulator.
  id: totrans-309
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç»˜åˆ¶ä¸€ä¸ªæ‰‹åŠ¨è¯„ä¼°å‡½æ•°åº”ç”¨çš„è‰å›¾ï¼Œä»¥äº†è§£ç´¯åŠ å™¨çš„æœ¬è´¨ã€‚
- en: Determine the kind of data that the accumulator tracks.
  id: totrans-310
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç¡®å®šç´¯åŠ å™¨è·Ÿè¸ªçš„æ•°æ®ç±»å‹ã€‚
- en: Write down a statement that explains the accumulator as a relationship between
    the argument d of the auxiliary function/a and the original argument d0.
  id: totrans-311
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: å†™ä¸‹ä¸€ä¸ªè¯´æ˜ï¼Œè§£é‡Šç´¯åŠ å™¨ä½œä¸ºè¾…åŠ©å‡½æ•°/açš„å‚æ•°dä¸åŸå§‹å‚æ•°d0ä¹‹é—´çš„å…³ç³»çš„è¯­å¥ã€‚
- en: Note The relationship remains constant, also called invariant, over the course
    of the evaluation. Because of this property, an accumulator statement is often
    called an invariant.
  id: totrans-312
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼šåœ¨è¯„ä¼°è¿‡ç¨‹ä¸­ï¼Œå…³ç³»ä¿æŒä¸å˜ï¼Œä¹Ÿç§°ä¸ºä¸å˜æ€§ã€‚æ­£å› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œç´¯åŠ å™¨è¯­å¥é€šå¸¸è¢«ç§°ä¸ºä¸å˜å¼ã€‚
- en: Use the invariant to determine the initial value a0 for a.
  id: totrans-313
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ä¸å˜æ€§æ¥ç¡®å®šå‡½æ•°/açš„åˆå§‹å€¼a0ã€‚
- en: Also exploit the invariant to determine how to compute the accumulator for the
    recursive function calls within the definition of function/a.
  id: totrans-314
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¹Ÿè¦åˆ©ç”¨ä¸å˜æ€§æ¥ç¡®å®šå¦‚ä½•åœ¨å‡½æ•°/açš„å®šä¹‰ä¸­è®¡ç®—é€’å½’å‡½æ•°è°ƒç”¨ä¸­çš„ç´¯åŠ å™¨ã€‚
- en: Exploit the accumulatorâ€™s knowledge for the design of function/a.
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åˆ©ç”¨ç´¯åŠ å™¨çš„çŸ¥è¯†æ¥è®¾è®¡å‡½æ•°/aã€‚
- en: For a structurally recursive function, the accumulatorâ€™s value is typically
    used in the base case, that is, the [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause that does not recur. For functions that use generative-recursive functions,
    the accumulated knowledge might be used in an existing base case, in a new base
    case, or in the [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clauses that deal with generative recursion.
  id: totrans-316
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¯¹äºç»“æ„é€’å½’å‡½æ•°ï¼Œç´¯åŠ å™¨çš„å€¼é€šå¸¸åœ¨åŸºæœ¬æƒ…å†µä¸­ä½¿ç”¨ï¼Œå³ä¸é€’å½’çš„[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥ã€‚å¯¹äºä½¿ç”¨ç”Ÿæˆé€’å½’å‡½æ•°çš„å‡½æ•°ï¼Œç´¯ç§¯çš„çŸ¥è¯†å¯èƒ½ç”¨äºç°æœ‰çš„åŸºæœ¬æƒ…å†µã€æ–°çš„åŸºæœ¬æƒ…å†µï¼Œæˆ–è€…å¤„ç†ç”Ÿæˆé€’å½’çš„[cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)å­å¥ã€‚
- en: 'As you can see, the key is the precise description of the role of the accumulator.
    It is therefore important to practice this skill.Letâ€™s take a look at the invert
    example:'
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£å¦‚ä½ æ‰€è§ï¼Œå…³é”®æ˜¯ç²¾ç¡®æè¿°ç´¯åŠ å™¨çš„è§’è‰²ã€‚å› æ­¤ï¼Œç»ƒä¹ è¿™é¡¹æŠ€èƒ½éå¸¸é‡è¦ã€‚è®©æˆ‘ä»¬çœ‹çœ‹åè½¬ç¤ºä¾‹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (invert.v2Â alox0)
    |'
  id: totrans-318
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (invert.v2Â alox0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] ??? -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] |'
  id: totrans-319
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] ??? -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â constructs the reverse of alox |'
  id: totrans-320
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â ;Â æ„å»ºaloxçš„é€†åº |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator ... |'
  id: totrans-321
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â ;Â ç´¯åŠ å™¨ ... |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (invert/aÂ aloxÂ a)
    |'
  id: totrans-322
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (invert/aÂ aloxÂ a)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-323
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alox)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-324
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alox)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-325
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (invert/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alox)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))])))
    |'
  id: totrans-326
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (invert/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alox)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))))
    |'
- en: '| Â Â Â Â (invert/aÂ alox0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
  id: totrans-327
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (invert/aÂ alox0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
- en: As illustrated in the preceding section, this template suffices to sketch a
    manual evaluation of an example such as
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å‰æ‰€è¿°ç« èŠ‚æ‰€ç¤ºï¼Œæ­¤æ¨¡æ¿è¶³ä»¥ç»˜åˆ¶ä¾‹å¦‚ä»¥ä¸‹ç¤ºä¾‹çš„æ‰‹åŠ¨è¯„ä¼°
- en: (invertÂ '(aÂ bÂ c))
  id: totrans-329
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (invertÂ '(aÂ bÂ c))
- en: 'Here is the idea:'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 'Here is the idea:'
- en: '| ==Â (invert/aÂ ''(aÂ bÂ c)Â a0) |'
  id: totrans-331
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (invert/aÂ ''(aÂ bÂ c)Â a0) |'
- en: '| ==Â (invert/aÂ ''(bÂ c)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a0)
    |'
  id: totrans-332
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (invert/aÂ ''(bÂ c)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a0)
    |'
- en: '| ==Â (invert/aÂ ''(c)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''b  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a0)
    |'
  id: totrans-333
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (invert/aÂ ''(c)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''b  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a0)
    |'
- en: '| ==Â (invert/aÂ ''()Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''c  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''b  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a0)
    |'
  id: totrans-334
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â (invert/aÂ ''()Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''c  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''b  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  ''a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a0)
    |'
- en: 'This sketch suggests that invert/a can keep track of all the items it has seen
    in a list that tracks the difference between alox0 and a in reverse order. The
    initial value is clearly ''(); updating the accumulator inside of invert/a with
    [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    produces exactly the desired value when invert/a reaches ''().Here is a refined
    template that includes these insights:'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä»½è‰å›¾è¡¨æ˜ï¼Œinvert/a èƒ½å¤Ÿè¿½è¸ªå®ƒåœ¨åˆ—è¡¨ä¸­çœ‹åˆ°çš„æ‰€æœ‰é¡¹ç›®ï¼Œè¯¥åˆ—è¡¨è®°å½•äº† alox0 å’Œ a çš„åå‘å·®å¼‚ã€‚åˆå§‹å€¼æ˜¾ç„¶æ˜¯ '(); åœ¨ invert/a
    ä¸­æ›´æ–°ç´¯åŠ å™¨ï¼Œä½¿ç”¨ [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    æ—¶ï¼Œå½“ invert/a è¾¾åˆ° '() æ—¶ï¼Œä¼šäº§ç”Ÿæ‰€éœ€çš„ç¡®åˆ‡å€¼ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŒ…å«è¿™äº›è§è§£çš„æ”¹è¿›æ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (invert.v2Â alox0)
    |'
  id: totrans-336
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (invert.v2Â alox0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] |'
  id: totrans-337
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â constructs the reverse of alox |'
  id: totrans-338
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â constructs the reverse of alox |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  a is the list of all those |'
  id: totrans-339
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  a is the list of all those |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â items on alox0 that precede alox |'
  id: totrans-340
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â items on alox0 that precede alox |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â in reverse order |'
  id: totrans-341
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â in reverse order |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (invert/aÂ aloxÂ a)
    |'
  id: totrans-342
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (invert/aÂ aloxÂ a)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-343
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alox)Â a]
    |'
  id: totrans-344
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alox)Â a]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-345
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (invert/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alox)
    |'
  id: totrans-346
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (invert/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alox)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  alox)  a))])))
    |'
  id: totrans-347
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  alox)  a)))))
    |'
- en: '| Â Â Â Â (invert/aÂ alox0Â ''()))) |'
  id: totrans-348
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (invert/aÂ alox0Â ''()))) |'
- en: While the body of the [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    definition initializes the accumulator with '(), the recursive call uses [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    to add the current head of alox to the accumulator. In the base case, invert/a
    uses the knowledge in the accumulator, the reversed list.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: å½“[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)å®šä¹‰çš„ä¸»ä½“åˆå§‹åŒ–ç´¯åŠ å™¨ä¸º'()æ—¶ï¼Œé€’å½’è°ƒç”¨ä½¿ç”¨[cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)å°†aloxçš„å½“å‰å¤´éƒ¨æ·»åŠ åˆ°ç´¯åŠ å™¨ä¸­ã€‚åœ¨åŸºæœ¬æƒ…å†µä¸­ï¼Œinvert/aä½¿ç”¨ç´¯åŠ å™¨ä¸­çš„çŸ¥è¯†ï¼Œå³åè½¬åçš„åˆ—è¡¨ã€‚
- en: Note how, once again, invert.v2 merely traverses the list. In contrast, invert
    reprocesses every result of its natural recursion with add-as-last. Stop! Measure
    how much faster invert.v2 runs than invert.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œå†æ¬¡å¼ºè°ƒï¼Œinvert.v2ä»…ä»…éå†åˆ—è¡¨ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œinvertä½¿ç”¨add-as-lasté‡æ–°å¤„ç†å…¶è‡ªç„¶é€’å½’çš„æ¯ä¸€ä¸ªç»“æœã€‚åœï¼æµ‹é‡invert.v2æ¯”invertè¿è¡Œå¾—å¿«å¤šå°‘ã€‚
- en: Terminology Programmers use the phrase accumulator-style function to discuss
    functions that use an accumulator parameter. Examples of functions in accumulator
    style are relative->absolute/a, invert/a, and path-exists?/a.
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¯è¯­ç¨‹åºå‘˜ä½¿ç”¨ç´¯åŠ å™¨é£æ ¼å‡½æ•°è¿™ä¸ªçŸ­è¯­æ¥è®¨è®ºä½¿ç”¨ç´¯åŠ å™¨å‚æ•°çš„å‡½æ•°ã€‚ç´¯åŠ å™¨é£æ ¼å‡½æ•°çš„ä¾‹å­åŒ…æ‹¬relative->absolute/aã€invert/aå’Œpath-exists?/aã€‚
- en: 32.3Transforming Functions into Accumulator Style[ğŸ”—](#(part._sec~3atrans-accu)
    "Link to here")
  id: totrans-352
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 32.3å°†å‡½æ•°è½¬æ¢ä¸ºç´¯åŠ å™¨é£æ ¼[ğŸ”—](#(part._sec~3atrans-accu) "é“¾æ¥è‡³æ­¤")
- en: Articulating the accumulator statement is difficult, but, without formulating
    a good invariant, it is impossible to understand an accumulator-style function.
    Since the goal of a programmer is to make sure that others who follow understand
    the code easily, practicing this skill is critical. And formulating invariants
    deserves a lot of practice.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨è¾¾ç´¯åŠ å™¨è¯­å¥æ˜¯å›°éš¾çš„ï¼Œä½†æ²¡æœ‰è‰¯å¥½çš„ä¸å˜é‡ï¼Œç†è§£ç´¯åŠ å™¨é£æ ¼çš„å‡½æ•°æ˜¯ä¸å¯èƒ½çš„ã€‚ç”±äºç¨‹åºå‘˜çš„ç›®çš„æ˜¯ç¡®ä¿åç»­çš„ç¨‹åºå‘˜èƒ½å¤Ÿè½»æ¾ç†è§£ä»£ç ï¼Œå› æ­¤ç»ƒä¹ è¿™é¡¹æŠ€èƒ½è‡³å…³é‡è¦ã€‚è€Œä¸”ï¼Œåˆ¶å®šä¸å˜é‡éœ€è¦å¤§é‡çš„ç»ƒä¹ ã€‚
- en: 'The goal of this section is to study the formulation of accumulator statements
    with three case studies: a summation function, the factorial function, and a tree-traversal
    function. Each such case is about the conversion of a structurally recursive function
    into accumulator style. None actually calls for the use of an accumulator parameter.
    But they are easily understood and, with the elimination of all other distractions,
    using such examples allows us to focus on the articulation of the accumulator
    invariant.'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬èŠ‚çš„ç›®æ ‡æ˜¯ç ”ç©¶é€šè¿‡ä¸‰ä¸ªæ¡ˆä¾‹ç ”ç©¶ï¼ˆæ±‚å’Œå‡½æ•°ã€é˜¶ä¹˜å‡½æ•°å’Œæ ‘éå†å‡½æ•°ï¼‰æ¥åˆ¶å®šç´¯åŠ å™¨è¯­å¥ã€‚æ¯ä¸ªè¿™æ ·çš„æ¡ˆä¾‹éƒ½æ˜¯å…³äºå°†ç»“æ„é€’å½’å‡½æ•°è½¬æ¢ä¸ºç´¯åŠ å™¨é£æ ¼ã€‚å®é™…ä¸Šå¹¶æ²¡æœ‰è¦æ±‚ä½¿ç”¨ç´¯åŠ å™¨å‚æ•°ã€‚ä½†å®ƒä»¬å¾ˆå®¹æ˜“ç†è§£ï¼Œå¹¶ä¸”é€šè¿‡æ¶ˆé™¤æ‰€æœ‰å…¶ä»–å¹²æ‰°ï¼Œä½¿ç”¨è¿™æ ·çš„ä¾‹å­ä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸“æ³¨äºç´¯åŠ å™¨ä¸å˜é‡çš„è¡¨è¿°ã€‚
- en: 'For the first example, consider these definitions of the sum function:'
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºç¬¬ä¸€ä¸ªä¾‹å­ï¼Œè€ƒè™‘ä»¥ä¸‹æ±‚å’Œå‡½æ•°çš„å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (sum.v1Â alon)
    |'
  id: totrans-356
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (sum.v1Â alon)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-357
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â 0]
    |'
  id: totrans-358
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â 0]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)Â (sum.v1Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)))]))
    |'
  id: totrans-359
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼›[[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    alon) (sum.v1 ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    alon)))])) |'
- en: 'Here is the first step toward an accumulator version:'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 'Here is the first step toward an accumulator version:'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (sum.v2Â alon0)
    |'
  id: totrans-361
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼›[[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (sum.v2 alon0) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    ??? -> [Number](part_one.html#%28tech._number%29) |'
  id: totrans-362
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (; [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) [æ•°å­—](part_one.html#%28tech._number%29)]
    ??? -> [æ•°å­—](part_one.html#%28tech._number%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â computes the sum of the numbers on alon |'
  id: totrans-363
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼›è®¡ç®—alonä¸Šæ•°å­—çš„æ€»å’Œ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  ... |'
  id: totrans-364
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼›ç´¯åŠ å™¨ ... |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (sum/aÂ alonÂ a)
    |'
  id: totrans-365
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼›[[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (sum/a alon a) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-366
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼›[[æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-367
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼›[[ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    alon) [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (sum/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)
    |'
  id: totrans-368
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼›[[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    (sum/a ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    alon) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))])))
    |'
  id: totrans-369
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))))
    |'
- en: '| Â Â Â Â (sum/aÂ alon0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
  id: totrans-370
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (sum/aÂ alon0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
- en: Stop! Supply a signature and a test case that works for both.
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼æä¾›ä¸€ä¸ªç­¾åå’Œä¸€ä¸ªé€‚ç”¨äºä¸¤è€…çš„æµ‹è¯•ç”¨ä¾‹ã€‚
- en: As suggested by our first step, we have put the template for sum/a into a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    definition, added an accumulator parameter, and renamed the parameter of sum .
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥æ‰€å»ºè®®ï¼Œæˆ‘ä»¬å°† sum/a çš„æ¨¡æ¿æ”¾å…¥äº†ä¸€ä¸ª [å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    å®šä¹‰ä¸­ï¼Œå¢åŠ äº†ä¸€ä¸ªç´¯åŠ å™¨å‚æ•°ï¼Œå¹¶å°† sum çš„å‚æ•°é‡å‘½åã€‚
- en: '|'
  id: totrans-373
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-374
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (sum.v1Â ''(10Â 4)) &#124;'
  id: totrans-375
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (sum.v1Â ''(10Â 4)) &#124;'
- en: '&#124; ==Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 10Â (sum.v1Â ''(4)))
    &#124;'
  id: totrans-376
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ==Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 10Â (sum.v1Â ''(4)))
    &#124;'
- en: '&#124; ==Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 10Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 4Â (sum.v1Â ''())))
    &#124;'
  id: totrans-377
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ==Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 10Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 4Â (sum.v1Â ''())))
    &#124;'
- en: '&#124; ==Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 10Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 4Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 0)))
    &#124;'
  id: totrans-378
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ==Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 10Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 4Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 0)))
    &#124;'
- en: '&#124; ... &#124;'
  id: totrans-379
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ... &#124;'
- en: '&#124; ==Â 14 &#124;'
  id: totrans-380
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ==Â 14 &#124;'
- en: ''
  id: totrans-381
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-382
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-383
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (sum.v2Â ''(10Â 4)) &#124;'
  id: totrans-384
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (sum.v2Â ''(10Â 4)) &#124;'
- en: '&#124; ==Â (sum/aÂ ''(10Â 4)Â a0) &#124;'
  id: totrans-385
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ==Â (sum/aÂ ''(10Â 4)Â a0) &#124;'
- en: '&#124; ==Â (sum/aÂ ''(4)Â ...Â 10Â ...Â a0) &#124;'
  id: totrans-386
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ==Â (sum/aÂ ''(4)Â ...Â 10Â ...Â a0) &#124;'
- en: '&#124; ==Â (sum/aÂ ''()Â ...Â 4Â ...Â 10Â ...Â a0) &#124;'
  id: totrans-387
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ==Â (sum/aÂ ''()Â ...Â 4Â ...Â 10Â ...Â a0) &#124;'
- en: '&#124; ... &#124;'
  id: totrans-388
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ... &#124;'
- en: '&#124; ==Â 14 &#124;'
  id: totrans-389
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ==Â 14 &#124;'
- en: ''
  id: totrans-390
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-391
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-392
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 183: Calculating with accumulator-style templates'
  id: totrans-393
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 183ï¼šä½¿ç”¨ç´¯åŠ å™¨æ¨¡æ¿è¿›è¡Œè®¡ç®—
- en: '[FigureÂ 183](#%28counter._%28figure._fig~3asum-accu%29%29) shows two side-by-side
    sketches of hand-evaluations. A comparison immediately suggests the central idea,
    namely, that sum/a can use the accumulator to add up the numbers it encounters.
    Concerning the accumulator invariant, the calculations suggest a represents the
    sum of the numbers encountered so far:'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾ 183](#%28counter._%28figure._fig~3asum-accu%29%29) å±•ç¤ºäº†ä¸¤ä¸ªå¹¶æ’çš„æ‰‹åŠ¨è¯„ä¼°è‰å›¾ã€‚æ¯”è¾ƒä¸€ä¸‹ï¼Œå¯ä»¥ç«‹å³çœ‹å‡ºæ ¸å¿ƒæ€æƒ³ï¼Œå³
    sum/a å¯ä»¥ä½¿ç”¨ç´¯åŠ å™¨æ¥ç´¯åŠ å®ƒé‡åˆ°çš„æ•°å­—ã€‚å…³äºç´¯åŠ å™¨ä¸å˜é‡ï¼Œè®¡ç®—è¡¨æ˜ a ä»£è¡¨åˆ°ç›®å‰ä¸ºæ­¢é‡åˆ°çš„æ•°å­—ä¹‹å’Œï¼š'
- en: a is the sum of the numbers that alon lacks from alon0
  id: totrans-395
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: a æ˜¯ alon ä» alon0 ç¼ºå°‘çš„æ•°å­—ä¹‹å’Œ
- en: 'For example, the invariant forces the following relationships to hold:'
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œè¿™ä¸ªä¸å˜é‡å¼ºåˆ¶ä»¥ä¸‹å…³ç³»æˆç«‹ï¼š
- en: '| if |  | alon0 |  | is |  | ''(10  4  6) |  | ''(10  4  6) |  | ''(10  4  6)
    |'
  id: totrans-397
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å¦‚æœ |  | alon0 |  | æ˜¯ |  | ''(10  4  6) |  | ''(10  4  6) |  | ''(10  4  6)
    |'
- en: '| and |  | alon |  | is |  | ''(4  6) |  | ''(6) |  | ''() |'
  id: totrans-398
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å’Œ |  | alon |  | æ˜¯ |  | ''(4  6) |  | ''(6) |  | ''() |'
- en: '| then |  | a |  | should be |  | 10 |  | 14 |  | 20 |'
  id: totrans-399
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| é‚£ä¹ˆ |  | a |  | åº”è¯¥æ˜¯ |  | 10 |  | 14 |  | 20 |'
- en: 'Given this precise invariant, the rest of the design is straightforward:'
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: ç»™å®šè¿™ä¸ªç²¾ç¡®çš„ä¸å˜é‡ï¼Œå…¶ä½™çš„è®¾è®¡å°±å¾ˆç®€å•äº†ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (sum.v2Â alon0)
    |'
  id: totrans-401
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    sum.v2 alon0) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-402
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    ï¼ˆ; [[åˆ—è¡¨](part_three.html#%28tech._sim-dd._list._of%29) [æ•°å­—](part_one.html#%28tech._number%29)
    [æ•°å­—](part_one.html#%28tech._number%29) -> [æ•°å­—](part_one.html#%28tech._number%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â computes the sum of the numbers on alon |'
  id: totrans-403
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; è®¡ç®— alon ä¸Šæ•°å­—çš„æ€»å’Œ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  a is the sum of the numbers |'
  id: totrans-404
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; ç´¯åŠ å™¨ a æ˜¯æ•°å­—çš„æ€»å’Œ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â that alon lacks from alon0 |'
  id: totrans-405
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; alon ç¼ºå°‘çš„ alon0 |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (sum/aÂ alonÂ a)
    |'
  id: totrans-406
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    sum/a alon a) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-407
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â a]
    |'
  id: totrans-408
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    alon) a] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (sum/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)
    |'
  id: totrans-409
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    (sum/a ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    alon) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)Â a))])))
    |'
  id: totrans-410
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    alon) a))))) |'
- en: '| Â Â Â Â (sum/aÂ alon0Â 0))) |'
  id: totrans-411
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆsum/a alon0 0))) |'
- en: If alon is '(), sum/a returns a because it represents the sum of all numbers
    on alon. The invariant also implies that 0 is the initial value for a0 and [+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    updates the accumulator by adding the number that is about to be â€œforgottenâ€â€”<wbr>([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  alon)â€”<wbr>to
    the accumulator a.
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœ alon æ˜¯ '()ï¼Œsum/a è¿”å› aï¼Œå› ä¸ºå®ƒä»£è¡¨ alon ä¸Šæ‰€æœ‰æ•°å­—çš„æ€»å’Œã€‚è¿™ä¸ªä¸å˜é‡è¿˜æ„å‘³ç€ 0 æ˜¯ a0 çš„åˆå§‹å€¼ï¼Œè€Œ [+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    é€šè¿‡æ·»åŠ å³å°†â€œå¿˜è®°â€çš„æ•°å­—ï¼ˆ[first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    alonï¼‰åˆ°ç´¯åŠ å™¨ a æ¥æ›´æ–°ç´¯åŠ å™¨ã€‚
- en: ExerciseÂ 495\. Complete the manual evaluation of (sum/a  '(10  4)  0) in [figureÂ 183](#%28counter._%28figure._fig~3asum-accu%29%29).
    Doing so shows that the sum and sum.v2 add up the given numbers in reverse order.
    While sum adds up the numbers from right to left, the accumulator-style version
    adds them up from left to right.
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  495. å®Œæˆ (sum/a '(10 4) 0) åœ¨ [å›¾ 183](#%28counter._%28figure._fig~3asum-accu%29%29)
    ä¸­çš„æ‰‹åŠ¨è¯„ä¼°ã€‚è¿™æ ·åšå¯ä»¥æ˜¾ç¤º sum å’Œ sum.v2 æ˜¯æŒ‰ç›¸åé¡ºåºç´¯åŠ ç»™å®šæ•°å­—çš„ã€‚è™½ç„¶ sum æ˜¯ä»å³åˆ°å·¦ç´¯åŠ æ•°å­—ï¼Œä½†ç´¯åŠ å™¨é£æ ¼çš„ç‰ˆæœ¬æ˜¯ä»å·¦åˆ°å³ç´¯åŠ ã€‚
- en: 'Note on Numbers Remember that for exact numbers, this difference has no effect
    on the final result. For inexact numbers, the difference can be significant. See
    the exercises at the end of [Intermezzo 5: The Cost of Computation](i5-6.html).'
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºæ•°å­—çš„æ³¨æ„äº‹é¡¹ï¼šè®°ä½ï¼Œå¯¹äºç²¾ç¡®æ•°å­—ï¼Œè¿™ç§å·®å¼‚å¯¹æœ€ç»ˆç»“æœæ²¡æœ‰å½±å“ã€‚å¯¹äºä¸ç²¾ç¡®æ•°å­—ï¼Œè¿™ç§å·®å¼‚å¯èƒ½æ˜¯æ˜¾è‘—çš„ã€‚å‚è§ [Intermezzo 5ï¼šè®¡ç®—æˆæœ¬](i5-6.html)
    ç»“å°¾çš„ç»ƒä¹ ã€‚
- en: 'For the second example, we turn to the well-known factorial function: The factorial
    function is useful for the analysis of algorithms.'
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºç¬¬äºŒä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è½¬å‘ä¼—æ‰€å‘¨çŸ¥çš„é˜¶ä¹˜å‡½æ•°ï¼šé˜¶ä¹˜å‡½æ•°å¯¹äºç®—æ³•åˆ†æå¾ˆæœ‰ç”¨ã€‚
- en: '| ;Â [N](part_two.html#%28tech._n%29) -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-416
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [N](part_two.html#%28tech._n%29) -> [N](part_two.html#%28tech._n%29) |'
- en: '| ;Â computes ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  n  ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  1)  ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  2)  ...  1)
    |'
  id: totrans-417
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è®¡ç®— ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  n  ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  1)  ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  2)  ...  1)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (!.v1Â 3)Â 6)
    |'
  id: totrans-418
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (!.v1Â 3)Â 6)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (!.v1Â n)
    |'
  id: totrans-419
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (!.v1Â n)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-420
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n)Â 1]
    |'
  id: totrans-421
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n)Â 1]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â nÂ (!.v1Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)))]))
    |'
  id: totrans-422
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â nÂ (!.v1Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)))]))
    |'
- en: 'While relative-2-absolute and invert processed lists, the factorial function
    works on natural numbers, which its template reflects.We proceed as before with
    a template for an accumulator-style version:'
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç›¸å¯¹-ç»å¯¹å’Œåè½¬å¤„ç†åˆ—è¡¨æ—¶ï¼Œé˜¶ä¹˜å‡½æ•°ä½œç”¨äºè‡ªç„¶æ•°ï¼Œå…¶æ¨¡æ¿åæ˜ äº†è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬ç»§ç»­ä½¿ç”¨ç´¯åŠ å™¨é£æ ¼çš„æ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (!.v2Â n0)
    |'
  id: totrans-424
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (!.v2Â n0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [N](part_two.html#%28tech._n%29)
    ??? -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-425
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [N](part_two.html#%28tech._n%29)
    ??? -> [N](part_two.html#%28tech._n%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â computes ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  n  ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  1)  ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  2)  ...  1)
    |'
  id: totrans-426
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â è®¡ç®— ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  n  ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  1)  ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  2)  ...  1)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  ... |'
  id: totrans-427
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â ç´¯åŠ å™¨ ... |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (!/aÂ nÂ a)
    |'
  id: totrans-428
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (!/aÂ nÂ a)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-429
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-430
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (!/aÂ ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)
    |'
  id: totrans-431
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (!/aÂ ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))])))
    |'
  id: totrans-432
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))))
    |'
- en: '| Â Â Â Â (!/aÂ n0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
  id: totrans-433
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â (!/aÂ n0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
- en: 'followed by a sketch of a hand-evaluation:'
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: 'followed by a sketch of a hand-evaluation:'
- en: '|'
  id: totrans-435
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-436
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (!.v1Â 3) &#124;'
  id: totrans-437
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (!.v1Â 3) &#124;'
- en: '&#124; ==Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â (!.v1Â 2))
    &#124;'
  id: totrans-438
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ==Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â (!.v1Â 2))
    &#124;'
- en: '&#124; ==Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 2Â (!.v1Â 1)))
    &#124;'
  id: totrans-439
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| == ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    3 ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    2 (!.v1 1))) | '
- en: '&#124; ... &#124;'
  id: totrans-440
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ... | '
- en: '&#124; ==Â 6 &#124;'
  id: totrans-441
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| == 6 | '
- en: ''
  id: totrans-442
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-443
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | '
- en: ''
  id: totrans-444
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (!.v2Â 3) &#124;'
  id: totrans-445
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| == (!.v2 3) |'
- en: '&#124; ==Â (!/aÂ 3Â a0) &#124;'
  id: totrans-446
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| == (!/a 3 a0) | '
- en: '&#124; ==Â (!/aÂ 2Â ...Â 3Â ...Â a0) &#124;'
  id: totrans-447
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| == (!/a 2 ... 3 ... a0) | '
- en: '&#124; ... &#124;'
  id: totrans-448
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ... | '
- en: '&#124; ==Â 6 &#124;'
  id: totrans-449
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| == 6 | '
- en: ''
  id: totrans-450
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-451
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| | '
- en: 'The left column indicates how the original version works; the right one sketches
    how the accumulator-style function proceeds. Both structurally traverse a natural
    number until they reach 0. While the original version schedules only multiplications,
    the accumulator keeps track of each number as the structural traversal descends
    through the given natural number.Given the goal of multiplying these numbers,
    !/a can use the accumulator to multiply the numbers immediately:'
  id: totrans-452
  prefs: []
  type: TYPE_NORMAL
  zh: 'å·¦åˆ—è¡¨ç¤ºåŸå§‹ç‰ˆæœ¬çš„å·¥ä½œæ–¹å¼ï¼›å³åˆ—æ¦‚è¿°äº†ç´¯åŠ å™¨é£æ ¼å‡½æ•°çš„è¿›è¡Œæ–¹å¼ã€‚ä¸¤è€…ç»“æ„ä¸Šéå†è‡ªç„¶æ•°ï¼Œç›´åˆ°å®ƒä»¬è¾¾åˆ° 0ã€‚è™½ç„¶åŸå§‹ç‰ˆæœ¬åªå®‰æ’ä¹˜æ³•ï¼Œä½†ç´¯åŠ å™¨åœ¨ç»“æ„éå†ä¸‹é™åˆ°ç»™å®šçš„è‡ªç„¶æ•°æ—¶è·Ÿè¸ªæ¯ä¸ªæ•°å­—ã€‚é‰´äºä¹˜è¿™äº›æ•°å­—çš„ç›®æ ‡ï¼Œ!/a
    å¯ä»¥ä½¿ç”¨ç´¯åŠ å™¨ç«‹å³ä¹˜ä»¥è¿™äº›æ•°å­—ï¼š| '
- en: a is the product of the natural numbers in the interval [n0,n).
  id: totrans-453
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'a æ˜¯åŒºé—´ [n0, n) ä¸­è‡ªç„¶æ•°çš„ä¹˜ç§¯ã€‚| '
- en: In particular, when n0 is 3 and n is 1, a is 6.
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç‰¹åˆ«åœ°ï¼Œå½“ n0 ä¸º 3 ä¸” n ä¸º 1 æ—¶ï¼Œa ä¸º 6ã€‚| '
- en: ExerciseÂ 496\. What should the value of a be when n0 is 10 and n is 8?
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹  496ã€‚å½“ n0 ä¸º 10 ä¸” n ä¸º 8 æ—¶ï¼Œa çš„å€¼åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿ| '
- en: 'Using this invariant we can easily pick the initial value for aâ€”<wbr>it is
    1â€”<wbr>and we know that multiplying the current accumulator with n is the proper
    update operation:'
  id: totrans-456
  prefs: []
  type: TYPE_NORMAL
  zh: 'ä½¿ç”¨è¿™ä¸ªä¸å˜æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°é€‰æ‹© a çš„åˆå§‹å€¼â€”â€”å®ƒæ˜¯ 1â€”â€”å¹¶ä¸”æˆ‘ä»¬çŸ¥é“å°†å½“å‰ç´¯åŠ å™¨ä¸ n ç›¸ä¹˜æ˜¯æ­£ç¡®çš„æ›´æ–°æ“ä½œï¼š| '
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (!.v2Â n0)
    |'
  id: totrans-457
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (!.v2 n0)ï¼‰| '
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [N](part_two.html#%28tech._n%29)  [N](part_two.html#%28tech._n%29)
    -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-458
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (; [N](part_two.html#%28tech._n%29) [N](part_two.html#%28tech._n%29) -> [N](part_two.html#%28tech._n%29)ï¼‰| '
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â computes ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)  n  ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  1)  ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  2)  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  1)
    |'
  id: totrans-459
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ; è®¡ç®— ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)
    n ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)
    n 1) ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)
    n 2) [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    1)ï¼‰| '
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  a is the product of the |'
  id: totrans-460
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ; ç´¯åŠ å™¨ a æ˜¯ä¹˜ç§¯çš„ç´¯åŠ å™¨ï¼‰| '
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â natural numbers in the interval [n0,n) |'
  id: totrans-461
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ; åŒºé—´ [n0, n) ä¸­çš„è‡ªç„¶æ•°ï¼‰| '
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (!/aÂ nÂ a)
    |'
  id: totrans-462
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (!/a n a)ï¼‰| '
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-463
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)ï¼‰| '
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n)Â a]
    |'
  id: totrans-464
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n)Â a]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (!/aÂ ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â nÂ a))])))
    |'
  id: totrans-465
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (!/aÂ ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â nÂ a))]])
    |'
- en: '| Â Â Â Â (!/aÂ n0Â 1))) |'
  id: totrans-466
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (!/aÂ n0Â 1))) |'
- en: It also follows from the accumulator statement that when n is 0, the accumulator
    is the product of n through 1, meaning it is the desired result. So, like sum,
    !/a returns a in this case and uses the result of the recursion in the second
    case.
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: ä»ç´¯åŠ å™¨è¯­å¥ä¸­è¿˜å¯ä»¥çœ‹å‡ºï¼Œå½“ n ä¸º 0 æ—¶ï¼Œç´¯åŠ å™¨æ˜¯ n é€šè¿‡ 1 çš„ä¹˜ç§¯ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯æ‰€éœ€çš„ç»“æœã€‚å› æ­¤ï¼Œåƒæ±‚å’Œä¸€æ ·ï¼Œ!v1åœ¨è¿™ç§æƒ…å†µä¸‹è¿”å› aï¼Œå¹¶åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ä½¿ç”¨é€’å½’çš„ç»“æœã€‚
- en: ExerciseÂ 497\. Like sum, !.v1 performs the primitive computations, multiplication
    in this case, in reverse order. Surprisingly, this affects the performance of
    the function in a negative manner.
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 497ã€‚åƒæ±‚å’Œä¸€æ ·ï¼Œ!v1åœ¨è¿™é‡Œæ‰§è¡ŒåŸå§‹è®¡ç®—ï¼Œå³ä¹˜æ³•ï¼Œæ˜¯é€†åºè¿›è¡Œçš„ã€‚ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œè¿™ä»¥è´Ÿé¢æ–¹å¼å½±å“äº†å‡½æ•°çš„æ€§èƒ½ã€‚
- en: Measure how long it takes to evaluate (!.v1  20) 1,000 times. Recall that ([time](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._time%29%29)  an-expression)
    function determines how long it takes to run an-expression.
  id: totrans-469
  prefs: []
  type: TYPE_NORMAL
  zh: æµ‹é‡è¯„ä¼° (!.v1  20) 1,000æ¬¡æ‰€éœ€çš„æ—¶é—´ã€‚å›æƒ³ä¸€ä¸‹ï¼Œ([time](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._time%29%29)  an-expression)
    å‡½æ•°ç¡®å®šè¿è¡Œ an-expression æ‰€éœ€çš„æ—¶é—´ã€‚
- en: For the third and last example, we use a function that measures the height of
    simplified binary trees. The example illustrates that accumulator-style programming
    applies to all kinds of data, not just those defined with single self-references.
    Indeed, it is as commonly used for complicated data definitions as it is for lists
    and natural numbers.
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºç¬¬ä¸‰ä¸ªä¹Ÿæ˜¯æœ€åä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥æµ‹é‡ç®€åŒ–äºŒå‰æ ‘çš„é«˜åº¦ã€‚è¿™ä¸ªä¾‹å­è¯´æ˜ï¼Œç´¯åŠ å™¨é£æ ¼çš„ç¼–ç¨‹é€‚ç”¨äºæ‰€æœ‰ç±»å‹çš„æ•°æ®ï¼Œè€Œä¸ä»…ä»…æ˜¯é‚£äº›ä½¿ç”¨å•ä¸€è‡ªå¼•ç”¨å®šä¹‰çš„æ•°æ®ã€‚å®é™…ä¸Šï¼Œå®ƒå¯¹äºå¤æ‚çš„æ•°æ®å®šä¹‰å’Œåˆ—è¡¨ä»¥åŠè‡ªç„¶æ•°çš„ä½¿ç”¨ä¸€æ ·æ™®éã€‚
- en: 'Here are the relevant definitions:'
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯ç›¸å…³çš„å®šä¹‰ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â nodeÂ [leftÂ right])
    |'
  id: totrans-472
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â nodeÂ [leftÂ right])
    |'
- en: '| ;Â A Tree is one of: |'
  id: totrans-473
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Tree is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-474
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  (make-node  [Tree](#%28tech._tree%29)  [Tree](#%28tech._tree%29)) |'
  id: totrans-475
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  (make-node  [Tree](#%28tech._tree%29)  [Tree](#%28tech._tree%29)) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â example
    |'
  id: totrans-476
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â example
    |'
- en: '| Â Â (make-nodeÂ (make-nodeÂ ''()Â (make-nodeÂ ''()Â ''()))Â ''())) |'
  id: totrans-477
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-nodeÂ (make-nodeÂ ''()Â (make-nodeÂ ''()Â ''()))Â ''())) |'
- en: 'These trees carry no information; their leaves are ''(). Still, there are many
    different trees, as [figureÂ 184](#%28counter._%28figure._fig~3asim-bt-ex%29%29)
    shows; it also uses suggestive graphics to bring across what these pieces of data
    look like as trees.One property that one may wish to compute is the height of
    such a tree:'
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›æ ‘ä¸æºå¸¦ä»»ä½•ä¿¡æ¯ï¼›å®ƒä»¬çš„å¶å­æ˜¯ '()ã€‚å°½ç®¡å¦‚æ­¤ï¼Œç”±äº[å›¾184](#%28counter._%28figure._fig~3asim-bt-ex%29%29)æ‰€ç¤ºï¼Œä»ç„¶å­˜åœ¨è®¸å¤šä¸åŒçš„æ ‘ï¼›å®ƒè¿˜ä½¿ç”¨äº†å¯å‘æ€§çš„å›¾å½¢æ¥å±•ç¤ºè¿™äº›æ•°æ®é¡¹ä½œä¸ºæ ‘çš„æ ·å­ã€‚å¯èƒ½å¸Œæœ›è®¡ç®—çš„ä¸€ä¸ªå±æ€§æ˜¯è¿™æ ·çš„æ ‘çš„é«˜åº¦ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (heightÂ abt)
    |'
  id: totrans-479
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (heightÂ abt)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-480
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â abt)Â 0]
    |'
  id: totrans-481
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â abt)Â 0]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([max](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._max%29%29)Â (heightÂ (node-leftÂ abt))
    |'
  id: totrans-482
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â ([max](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._max%29%29)Â (heightÂ (node-leftÂ abt))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (heightÂ (node-rightÂ abt)))Â 1)])) |'
  id: totrans-483
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (heightÂ (node-rightÂ abt)))Â 1)])) |'
- en: 'Stop! Supply a signature and a test. The table in [figureÂ 184](#%28counter._%28figure._fig~3asim-bt-ex%29%29)
    indicates how to measure the height of a tree, though it leaves the notion somewhat
    ambiguous: it is either the number of nodes from the root of the tree to the highest
    leaf or the number of connections on such a path. The height function follows
    the second option.'
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼æä¾›ä¸€ä¸ªç­¾åå’Œä¸€ä¸ªæµ‹è¯•ã€‚å›¾Â 184ä¸­çš„è¡¨æ ¼è¯´æ˜äº†å¦‚ä½•æµ‹é‡æ ‘çš„é«˜åº¦ï¼Œå°½ç®¡å®ƒå¯¹è¿™ä¸€æ¦‚å¿µæœ‰äº›æ¨¡ç³Šï¼šå®ƒè¦ä¹ˆæ˜¯ä»æ ‘æ ¹åˆ°æœ€é«˜å¶å­çš„èŠ‚ç‚¹æ•°ï¼Œè¦ä¹ˆæ˜¯è¿™æ ·ä¸€ä¸ªè·¯å¾„ä¸Šçš„è¿æ¥æ•°ã€‚é«˜åº¦å‡½æ•°éµå¾ªç¬¬äºŒç§é€‰æ‹©ã€‚
- en: '| ![image](../Images/ec16cb0d2d45394c52262a9a1b32745e.png) |  | ''() |'
  id: totrans-485
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/ec16cb0d2d45394c52262a9a1b32745e.png) |  | ''() |'
- en: '| ![image](../Images/5a56eab97d4227baec984499f0a3bf33.png) |  | (make-nodeÂ ''()Â ''())
    |'
  id: totrans-486
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/5a56eab97d4227baec984499f0a3bf33.png) |  | (make-nodeÂ ''()Â ''())
    |'
- en: '|  |  |  |'
  id: totrans-487
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  |  |'
- en: '| ![image](../Images/55a7125f85f6973f27f23e5346acea7b.png) |  |'
  id: totrans-488
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/55a7125f85f6973f27f23e5346acea7b.png) |  |'
- en: ''
  id: totrans-489
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (make-node &#124;'
  id: totrans-490
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (make-node &#124;'
- en: '&#124; Â Â (make-nodeÂ ''() &#124;'
  id: totrans-491
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â (make-nodeÂ ''() &#124;'
- en: '&#124; Â Â Â Â Â Â Â Â Â Â Â Â Â (make-nodeÂ ''()Â ''())) &#124;'
  id: totrans-492
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â Â Â Â Â Â Â Â Â Â (make-nodeÂ ''()Â ''())) &#124;'
- en: '&#124; Â Â ''()) &#124;'
  id: totrans-493
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ''()) &#124;'
- en: ''
  id: totrans-494
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-495
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-496
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 184: Some stripped-down binary trees'
  id: totrans-497
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾Â 184ï¼šä¸€äº›ç®€åŒ–åçš„äºŒå‰æ ‘
- en: 'To transform this function into an accumulator-style function, we follow the
    standard path. We begin with an appropriate template:'
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: è¦å°†æ­¤å‡½æ•°è½¬æ¢ä¸ºç´¯åŠ å™¨é£æ ¼çš„å‡½æ•°ï¼Œæˆ‘ä»¬éµå¾ªæ ‡å‡†è·¯å¾„ã€‚æˆ‘ä»¬ä»ä¸€ä¸ªé€‚å½“çš„æ¨¡æ¿å¼€å§‹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height.v2Â abt0)
    |'
  id: totrans-499
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height.v2Â abt0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Tree](#%28tech._tree%29)
    ??? -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-500
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Tree](#%28tech._tree%29)
    ??? -> [N](part_two.html#%28tech._n%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â measures the height of abt |'
  id: totrans-501
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â æµ‹é‡abtçš„é«˜åº¦ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  ... |'
  id: totrans-502
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ;Â ç´¯åŠ å™¨ ... |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height/aÂ abtÂ a)
    |'
  id: totrans-503
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height/aÂ abtÂ a)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-504
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â abt)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-505
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â abt)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-506
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (height/aÂ (node-leftÂ abt)
    |'
  id: totrans-507
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (height/aÂ (node-leftÂ abt)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-508
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (height/aÂ (node-rightÂ abt)
    |'
  id: totrans-509
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (height/aÂ (node-rightÂ abt)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))])))
    |'
  id: totrans-510
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  a  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))))
    |'
- en: '| Â Â Â Â (height/aÂ abt0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
  id: totrans-511
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (height/aÂ abt0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
- en: 'As always, the problem is to determine what knowledge the accumulator represents.
    One obvious choice is the number of traversed branches:'
  id: totrans-512
  prefs: []
  type: TYPE_NORMAL
  zh: æ€»æ˜¯ï¼Œé—®é¢˜æ˜¯è¦ç¡®å®šç´¯åŠ å™¨ä»£è¡¨äº†ä»€ä¹ˆçŸ¥è¯†ã€‚ä¸€ä¸ªæ˜æ˜¾çš„é€‰æ‹©æ˜¯éå†çš„åˆ†æ”¯æ•°ï¼š
- en: a is the number of steps it takes to reach abt from abt0.
  id: totrans-513
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: aæ˜¯ä»abt0åˆ°è¾¾abtæ‰€éœ€çš„æ­¥æ•°ã€‚
- en: 'Illustrating this accumulator invariant is best done with a graphical example.
    Take a second look at [figureÂ 184](#%28counter._%28figure._fig~3asim-bt-ex%29%29).
    The bottom-most tree comes with two annotations, each pointing out one subtree:'
  id: totrans-514
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨å›¾å½¢ç¤ºä¾‹æ¥è¯´æ˜è¿™ä¸ªç´¯åŠ å™¨çš„ä¸å˜é‡æ˜¯æœ€å¥½çš„ã€‚å†æ¬¡çœ‹çœ‹[å›¾184](#%28counter._%28figure._fig~3asim-bt-ex%29%29)ã€‚æœ€åº•éƒ¨çš„æ ‘æœ‰ä¸¤ä¸ªæ³¨é‡Šï¼Œæ¯ä¸ªæ³¨é‡Šéƒ½æŒ‡å‡ºäº†ä¸€ä¸ªå­æ ‘ï¼š
- en: If abt0 is the complete tree and abt is the subtree pointed to by the circled
    1, the accumulatorâ€™s value must be 1 because it takes exactly one step to get
    from the root of abt to the root of abt0.
  id: totrans-515
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœabt0æ˜¯å®Œæ•´çš„æ ‘ï¼Œè€Œabtæ˜¯ç”±åœ†åœˆ1æŒ‡å‘çš„å­æ ‘ï¼Œé‚£ä¹ˆç´¯åŠ å™¨çš„å€¼å¿…é¡»æ˜¯1ï¼Œå› ä¸ºå®ƒæ­£å¥½éœ€è¦ä¸€æ­¥ä»abtçš„æ ¹åˆ°abt0çš„æ ¹ã€‚
- en: In the same spirit, for the subtree labeled 2 the accumulator is 2 because it
    takes two steps to get to this place.
  id: totrans-516
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åŒæ ·åœ°ï¼Œå¯¹äºæ ‡è®°ä¸º2çš„å­æ ‘ï¼Œç´¯åŠ å™¨æ˜¯2ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸¤æ­¥æ‰èƒ½åˆ°è¾¾è¿™ä¸ªåœ°æ–¹ã€‚
- en: 'As for the preceding two examples, the invariant basically dictates how to
    follow the rest of the design recipe for accumulators: the initial value for a
    is 0; the update operation is [add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29);
    and the base case uses the accumulated knowledge by returning it. Translating
    this into code yields the following skeleton definition:'
  id: totrans-517
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºå‰ä¸¤ä¸ªä¾‹å­ï¼Œä¸å˜é‡åŸºæœ¬ä¸Šè§„å®šäº†å¦‚ä½•éµå¾ªç´¯åŠ å™¨çš„è®¾è®¡é£Ÿè°±çš„å…¶ä½™éƒ¨åˆ†ï¼šaçš„åˆå§‹å€¼ä¸º0ï¼›æ›´æ–°æ“ä½œæ˜¯[add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)ï¼›å¹¶ä¸”åŸºæœ¬æ¡ˆä¾‹é€šè¿‡è¿”å›å®ƒæ¥ä½¿ç”¨ç´¯ç§¯çš„çŸ¥è¯†ã€‚å°†æ­¤è½¬æ¢ä¸ºä»£ç å¾—åˆ°ä»¥ä¸‹éª¨æ¶å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height.v2Â abt0)
    |'
  id: totrans-518
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height.v2Â abt0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Tree](#%28tech._tree%29)  [N](part_two.html#%28tech._n%29)
    -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-519
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29))
    (; [æ ‘](#%28tech._tree%29)  [N](part_two.html#%28tech._n%29) -> [N](part_two.html#%28tech._n%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â measures the height of abt |'
  id: totrans-520
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...] ; æµ‹é‡ abt çš„é«˜åº¦ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  a is the number of steps |'
  id: totrans-521
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...] ; ç´¯åŠ å™¨ a æ˜¯æ­¥éª¤æ•° |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â it takes to reach abt from abt0 |'
  id: totrans-522
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...] ; ä» abt0 åˆ° abt éœ€è¦çš„æ­¥éª¤æ•° |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height/aÂ abtÂ a)
    |'
  id: totrans-523
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([å®šä¹‰é“¾æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29))Â (height/aÂ abtÂ a)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-524
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â abt)Â a]
    |'
  id: totrans-525
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â abt)Â a]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-526
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (height/aÂ (node-leftÂ abt)
    |'
  id: totrans-527
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([æ–‡æ¡£é“¾æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â (height/aÂ (node-leftÂ abt)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â aÂ 1))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-528
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â aÂ 1))
    [...] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (height/aÂ (node-rightÂ abt)
    |'
  id: totrans-529
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([æ–‡æ¡£é“¾æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â (height/aÂ (node-rightÂ abt)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â aÂ 1))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))])))
    |'
  id: totrans-530
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â aÂ 1))
    [...] |'
- en: '| Â Â Â Â (height/aÂ abt0Â 0))) |'
  id: totrans-531
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([height/aÂ abt0Â 0))) |'
- en: But, in contrast to the first two examples, a is not the final result. In the
    second [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause, the two recursive calls yield two values. The design recipe for structural
    functions dictates that we combine those in order to formulate an answer for this
    case; the dots above indicate that we still need to pick an operation that combines
    these values.
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†ä¸å‰ä¸¤ä¸ªä¾‹å­ç›¸åï¼Œa ä¸æ˜¯æœ€ç»ˆç»“æœã€‚åœ¨ç¬¬äºŒä¸ª [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    æ¡ä»¶è¯­å¥ä¸­ï¼Œä¸¤æ¬¡é€’å½’è°ƒç”¨äº§ç”Ÿäº†ä¸¤ä¸ªå€¼ã€‚ç»“æ„å‡½æ•°çš„è®¾è®¡é…æ–¹è§„å®šæˆ‘ä»¬å¿…é¡»å°†è¿™äº›å€¼ç»“åˆèµ·æ¥ï¼Œä»¥å½¢æˆé’ˆå¯¹æ­¤æƒ…å†µçš„ä¸€ä¸ªç­”æ¡ˆï¼›ä¸Šæ–¹çš„ç‚¹è¡¨ç¤ºæˆ‘ä»¬ä»ç„¶éœ€è¦é€‰æ‹©ä¸€ä¸ªå°†è¿™äº›å€¼ç»„åˆèµ·æ¥çš„æ“ä½œã€‚
- en: '| ;Â [Tree](#%28tech._tree%29) -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-533
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [æ ‘](#%28tech._tree%29) -> [N](part_two.html#%28tech._n%29) |'
- en: '| ;Â measures the height of abt0 |'
  id: totrans-534
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...] ; æµ‹é‡ abt0 çš„é«˜åº¦ |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (height.v2Â example)Â 3)
    |'
  id: totrans-535
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29))Â (height.v2Â example)Â 3)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height.v2Â abt0)
    |'
  id: totrans-536
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height.v2Â abt0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Tree](#%28tech._tree%29)  [N](part_two.html#%28tech._n%29)
    -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-537
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Tree](#%28tech._tree%29)  [N](part_two.html#%28tech._n%29)
    -> [N](part_two.html#%28tech._n%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â measures the height of abt |'
  id: totrans-538
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ;Â æµ‹é‡ abt çš„é«˜åº¦ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  a is the number of steps |'
  id: totrans-539
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ;Â ç´¯åŠ å™¨ a æ˜¯æ­¥æ•° |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â it takes to reach abt from abt0 |'
  id: totrans-540
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ;Â å®ƒéœ€è¦å¤šå°‘æ­¥æ‰èƒ½ä» abt0 åˆ°è¾¾ abt |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height/aÂ abtÂ a)
    |'
  id: totrans-541
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (height/aÂ abtÂ a)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-542
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â abt)Â a]
    |'
  id: totrans-543
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â abt)Â a]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-544
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([max](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._max%29%29)
    |'
  id: totrans-545
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([max](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._max%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (height/aÂ (node-leftÂ abt)Â Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â aÂ 1))
    |'
  id: totrans-546
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (height/aÂ (node-leftÂ abt)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â aÂ 1))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (height/aÂ (node-rightÂ abt)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â aÂ 1)))])))
    |'
  id: totrans-547
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (height/aÂ (node-rightÂ abt)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â aÂ 1)))])))
    |'
- en: '| Â Â Â Â (height/aÂ abt0Â 0))) |'
  id: totrans-548
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (height/aÂ abt0Â 0))) |'
- en: ''
  id: totrans-549
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 185: The accumulator-style version of height'
  id: totrans-550
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 185ï¼šheight çš„ç´¯åŠ å™¨ç‰ˆæœ¬
- en: Following the design recipe also tells us that we need to interpret the two
    values to find the appropriate function. According to the purpose statement for
    height/a, the first value is the height of the left subtree, and the second one
    is the height of the right one. Given that we are interested in the height of
    abt itself and that the height is the largest number of steps it takes to reach
    a leaf, we use the [max](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._max%29%29)
    function to pick the proper one; see [figureÂ 185](#%28counter._%28figure._fig~3aheight-accu%29%29)
    for the complete definition.
  id: totrans-551
  prefs: []
  type: TYPE_NORMAL
  zh: éµå¾ªè®¾è®¡é£Ÿè°±ä¹Ÿå‘Šè¯‰æˆ‘ä»¬ï¼Œæˆ‘ä»¬éœ€è¦è§£é‡Šè¿™ä¸¤ä¸ªå€¼ä»¥æ‰¾åˆ°é€‚å½“çš„å‡½æ•°ã€‚æ ¹æ® height/a çš„ç›®çš„å£°æ˜ï¼Œç¬¬ä¸€ä¸ªå€¼æ˜¯å·¦å­æ ‘çš„é«˜åº¦ï¼Œç¬¬äºŒä¸ªå€¼æ˜¯å³å­æ ‘çš„é«˜åº¦ã€‚é‰´äºæˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯
    abt æœ¬èº«çš„é«˜åº¦ï¼Œå¹¶ä¸”é«˜åº¦æ˜¯åˆ°è¾¾å¶èŠ‚ç‚¹æ‰€éœ€çš„æœ€å¤§æ­¥æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨ [max](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._max%29%29)
    å‡½æ•°æ¥é€‰æ‹©åˆé€‚çš„å€¼ï¼›å‚è§ [å›¾ 185](#%28counter._%28figure._fig~3aheight-accu%29%29) ä»¥è·å–å®Œæ•´çš„å®šä¹‰ã€‚
- en: 'Note on an Alternative Design In addition to counting the number of steps it
    takes to reach a node, an accumulator function could hold on to the largest height
    encountered so far. Here is the accumulator statement for the design idea:'
  id: totrans-552
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºæ›¿ä»£è®¾è®¡çš„è¯´æ˜ é™¤äº†è®¡ç®—åˆ°è¾¾ä¸€ä¸ªèŠ‚ç‚¹æ‰€éœ€çš„æ­¥æ•°ä¹‹å¤–ï¼Œç´¯åŠ å™¨å‡½æ•°è¿˜å¯ä»¥ä¿ç•™è¿„ä»Šä¸ºæ­¢é‡åˆ°çš„æœ€å¤§é«˜åº¦ã€‚ä»¥ä¸‹æ˜¯è¯¥è®¾è®¡æ€æƒ³çš„ç´¯åŠ å™¨è¯­å¥ï¼š
- en: The first accumulator represents the number of steps it takes to reach abt from
    (the root of) abt0. The second one stands for the height of the part in abt0 that
    is strictly to the left of abt.
  id: totrans-553
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªç´¯åŠ å™¨è¡¨ç¤ºä» (abt0 çš„æ ¹èŠ‚ç‚¹) åˆ° abt éœ€è¦çš„æ­¥æ•°ã€‚ç¬¬äºŒä¸ªç´¯åŠ å™¨ä»£è¡¨ abt0 ä¸­ä¸¥æ ¼ä½äº abt å·¦ä¾§çš„éƒ¨åˆ†çš„é«˜åº¦ã€‚
- en: 'Clearly, this statement assumes a template with two accumulator parameters,
    something we have not encountered before:'
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç„¶ï¼Œè¿™ä¸ªè¯­å¥å‡è®¾äº†ä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªç´¯åŠ å™¨å‚æ•°çš„æ¨¡æ¿ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¹‹å‰æœªæ›¾é‡åˆ°çš„ï¼š
- en: '| [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ;Â [Tree](#%28tech._tree%29)  [N](part_two.html#%28tech._n%29)  [N](part_two.html#%28tech._n%29)
    -> [N](part_two.html#%28tech._n%29) |'
  id: totrans-555
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â ;Â [æ ‘](#%28tech._tree%29)  [N](part_two.html#%28tech._n%29)  [N](part_two.html#%28tech._n%29)
    -> [N](part_two.html#%28tech._n%29) |'
- en: '| Â Â Â Â ;Â measures the height of abt |'
  id: totrans-556
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ;Â æµ‹é‡ abt çš„é«˜åº¦ |'
- en: '| Â Â Â Â ;Â accumulator  s is the number of steps |'
  id: totrans-557
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ;Â ç´¯åŠ å™¨ s æ˜¯æ­¥æ•° |'
- en: '| Â Â Â Â ;Â it takes to reach abt from abt0 |'
  id: totrans-558
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ;Â ä» abt0 åˆ° abt éœ€è¦çš„æ­¥æ•° |'
- en: '| Â Â Â Â ;Â accumulator  m is the maximal height of |'
  id: totrans-559
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ;Â ç´¯åŠ å™¨ m æ˜¯æœ€å¤§é«˜åº¦ |'
- en: '| Â Â Â Â ;Â the part of abt0 that is to the left of abt |'
  id: totrans-560
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ;Â abt0 ä¸­ä½äº abt å·¦ä¾§çš„éƒ¨åˆ† |'
- en: '| Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (h/aÂ abtÂ sÂ m)
    |'
  id: totrans-561
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (h/aÂ abtÂ sÂ m)
    |'
- en: '| Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-562
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â abt)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-563
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â abt)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-564
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (h/aÂ (node-leftÂ abt)
    |'
  id: totrans-565
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (h/aÂ (node-leftÂ abt)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  s  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  m  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-566
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  s  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  m  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (h/aÂ (node-rightÂ abt)
    |'
  id: totrans-567
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (h/aÂ (node-rightÂ abt)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  s  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  m  [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  id: totrans-568
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...] [é“¾æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    s [...] [é“¾æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    [...] [é“¾æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    m [...] [é“¾æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    [...] [é“¾æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: ExerciseÂ 498\. Complete height.v3. Hint The bottom-most tree of [figureÂ 184](#%28counter._%28figure._fig~3asim-bt-ex%29%29)
    contains no subtree to the left of the subtree marked with 1. It contains one
    complete path from root to tree in the part of the tree that is to the left of
    the subtree marked with 2; this path consists of two steps.
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 498ã€‚å®Œæˆheight.v3ã€‚æç¤ºï¼š[å›¾184](#%28counter._%28figure._fig~3asim-bt-ex%29%29)ä¸­æœ€ä½çš„æ ‘åœ¨æ ‡è®°ä¸º1çš„å­æ ‘å·¦ä¾§æ²¡æœ‰å­æ ‘ã€‚å®ƒåŒ…å«ä¸€æ¡ä»æ ¹åˆ°æ ‘çš„å®Œæ•´è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä½äºæ ‡è®°ä¸º2çš„å­æ ‘å·¦ä¾§çš„æ ‘éƒ¨åˆ†ï¼›è¿™æ¡è·¯å¾„ç”±ä¸¤æ­¥ç»„æˆã€‚
- en: This second design has a more complex accumulator invariant than the first one.
    By implication, its implementation requires more care than the first one. At the
    same time, it comes without any obvious advantages.
  id: totrans-570
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒç§è®¾è®¡æ¯”ç¬¬ä¸€ç§è®¾è®¡å…·æœ‰æ›´å¤æ‚çš„ç´¯åŠ å™¨ä¸å˜é‡ã€‚ç”±æ­¤æ¨æ–­ï¼Œå…¶å®ç°éœ€è¦æ¯”ç¬¬ä¸€ç§è®¾è®¡æ›´å¤šçš„æ³¨æ„ã€‚åŒæ—¶ï¼Œå®ƒæ²¡æœ‰ä»»ä½•æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚
- en: Our point is that different accumulator invariants yield different variants.
    You can design both variants systematically, following the same design recipe.
    When you have complete function definitions, you can compare and contrast the
    results, and you can then decide which one to keep, based on evidence. End
  id: totrans-571
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„è§‚ç‚¹æ˜¯ï¼Œä¸åŒçš„ç´¯åŠ å™¨ä¸å˜é‡ä¼šäº§ç”Ÿä¸åŒçš„å˜ä½“ã€‚ä½ å¯ä»¥ç³»ç»Ÿåœ°è®¾è®¡è¿™ä¸¤ç§å˜ä½“ï¼Œéµå¾ªç›¸åŒçš„è®¾è®¡é…æ–¹ã€‚å½“ä½ æœ‰äº†å®Œæ•´çš„å‡½æ•°å®šä¹‰åï¼Œä½ å¯ä»¥æ¯”è¾ƒå’Œå¯¹æ¯”ç»“æœï¼Œç„¶åæ ¹æ®è¯æ®å†³å®šä¿ç•™å“ªä¸€ä¸ªã€‚ç»“æŸ
- en: ExerciseÂ 499\. Design an accumulator-style version of product, the function
    that computes the product of a list of numbers. Stop when you have formulated
    the accumulator invariant and have someone check it.
  id: totrans-572
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 499ã€‚è®¾è®¡ä¸€ä¸ªç´¯åŠ å™¨é£æ ¼çš„productç‰ˆæœ¬ï¼Œè¯¥å‡½æ•°ç”¨äºè®¡ç®—æ•°å­—åˆ—è¡¨çš„ä¹˜ç§¯ã€‚å½“ä½ å·²ç»å½¢æˆäº†ç´¯åŠ å™¨ä¸å˜é‡å¹¶æœ‰äººæ£€æŸ¥å®ƒæ—¶åœæ­¢ã€‚
- en: The performance of product is O(n) where n is the length of the list. Does the
    accumulator version improve on this?
  id: totrans-573
  prefs: []
  type: TYPE_NORMAL
  zh: äº§å“æ€§èƒ½ä¸ºO(n)ï¼Œå…¶ä¸­næ˜¯åˆ—è¡¨çš„é•¿åº¦ã€‚ç´¯åŠ å™¨ç‰ˆæœ¬æ˜¯å¦åœ¨è¿™æ–¹é¢æœ‰æ‰€æ”¹è¿›ï¼Ÿ
- en: ExerciseÂ 500\. Design an accumulator-style version of how-many, which is the
    function that determines the number of items on a list. Stop when you have formulated
    the invariant and have someone check it.
  id: totrans-574
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 500ã€‚è®¾è®¡ä¸€ä¸ªç´¯åŠ å™¨é£æ ¼çš„how-manyç‰ˆæœ¬ï¼Œè¯¥å‡½æ•°ç”¨äºç¡®å®šåˆ—è¡¨ä¸­çš„é¡¹ç›®æ•°é‡ã€‚å½“ä½ å·²ç»å½¢æˆäº†ä¸å˜é‡å¹¶æœ‰äººæ£€æŸ¥å®ƒæ—¶åœæ­¢ã€‚
- en: The performance of how-many is O(n) where n is the length of the list. Does
    the accumulator version improve on this?
  id: totrans-575
  prefs: []
  type: TYPE_NORMAL
  zh: how-manyçš„æ€§èƒ½ä¸ºO(n)ï¼Œå…¶ä¸­næ˜¯åˆ—è¡¨çš„é•¿åº¦ã€‚ç´¯åŠ å™¨ç‰ˆæœ¬æ˜¯å¦åœ¨è¿™æ–¹é¢æœ‰æ‰€æ”¹è¿›ï¼Ÿ
- en: When you evaluate (how-many  some-non-empty-list) by hand, n applications of
    [add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)
    are pending by the time the function reaches '()â€”<wbr>where n is the number of
    items on the list. Computer scientists sometime say that how-many needs O(n) space
    to Computer scientists refer to this space as stack space, but you can safely
    ignore this terminology for now. represent these pending function applications.
    Does the accumulator reduce the amount of space needed to compute the result?
  id: totrans-576
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä½ æ‰‹åŠ¨è¯„ä¼°ï¼ˆhow-many some-non-empty-listï¼‰æ—¶ï¼Œå½“å‡½æ•°åˆ°è¾¾'()æ—¶ï¼Œå°†æœ‰næ¬¡åº”ç”¨[add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)æŒ‚èµ·â€”â€”å…¶ä¸­næ˜¯åˆ—è¡¨ä¸­çš„é¡¹ç›®æ•°é‡ã€‚è®¡ç®—æœºç§‘å­¦å®¶æœ‰æ—¶ä¼šè¯´how-manyéœ€è¦O(n)çš„ç©ºé—´æ¥è¡¨ç¤ºè¿™äº›æŒ‚èµ·çš„å‡½æ•°åº”ç”¨ã€‚è®¡ç®—æœºç§‘å­¦å®¶å°†è¿™ç§ç©ºé—´ç§°ä¸ºæ ˆç©ºé—´ï¼Œä½†ä½ ç°åœ¨å¯ä»¥å®‰å…¨åœ°å¿½ç•¥è¿™ä¸ªæœ¯è¯­ã€‚ç´¯åŠ å™¨æ˜¯å¦ä¼šå‡å°‘è®¡ç®—ç»“æœæ‰€éœ€çš„ç©ºé—´é‡ï¼Ÿ
- en: 'ExerciseÂ 501\. Design an accumulator-style version of add-to-pi. The function
    adds a natural number to [pi](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._pi%29%29)
    without using [+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29):'
  id: totrans-577
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 501ã€‚è®¾è®¡ä¸€ä¸ªç´¯åŠ å™¨é£æ ¼çš„add-to-piç‰ˆæœ¬ã€‚è¯¥å‡½æ•°å°†è‡ªç„¶æ•°æ·»åŠ åˆ°[pi](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._pi%29%29)ï¼Œè€Œä¸ä½¿ç”¨[+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)ï¼š
- en: '| ;Â [N](part_two.html#%28tech._n%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-578
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [N](part_two.html#%28tech._n%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â adds n to [pi](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._pi%29%29)
    without using [+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    |'
  id: totrans-579
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; å‘[pi](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._pi%29%29)ä¸­æ·»åŠ nï¼Œè€Œä¸ä½¿ç”¨[+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    |'
- en: '| ([check-within](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29)Â (add-to-piÂ 2)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 2Â [pi](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._pi%29%29))Â 0.001)
    |'
  id: totrans-580
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-within](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29)
    (add-to-pi 2) ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    2 [pi](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._pi%29%29))
    0.001) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-to-piÂ n)
    |'
  id: totrans-581
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (add-to-pi n) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-582
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n)Â [pi](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._pi%29%29)]
    |'
  id: totrans-583
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)
    n) [pi](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._pi%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)Â (add-to-piÂ ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)))]))
    |'
  id: totrans-584
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    ([add1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._add1%29%29)
    (add-to-pi ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)
    n)))])) |'
- en: Stop when you have formulated the accumulator invariant and have someone check
    it.
  id: totrans-585
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢å½“ä½ å·²ç»å½¢æˆäº†ç´¯åŠ å™¨ä¸å˜å¼ï¼Œå¹¶æœ‰äººæ£€æŸ¥å®ƒã€‚
- en: ExerciseÂ 502\. Design the function palindrome, which accepts a non-empty list
    and constructs a palindrome by mirroring the list around the last item. When given
    ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)  "abc"),
    it yields ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)  "abcba").
  id: totrans-586
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 502ã€‚è®¾è®¡ä¸€ä¸ªåä¸ºpalindromeçš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªéç©ºåˆ—è¡¨ï¼Œå¹¶é€šè¿‡å›´ç»•æœ€åä¸€ä¸ªå…ƒç´ é•œåƒåˆ—è¡¨æ¥æ„é€ ä¸€ä¸ªå›æ–‡ã€‚å½“ç»™å®š([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)
    "abc")æ—¶ï¼Œå®ƒäº§ç”Ÿ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)
    "abcba")ã€‚
- en: 'Hint Here is a solution designed by function composition:'
  id: totrans-587
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼šè¿™é‡Œæ˜¯ä¸€ä¸ªé€šè¿‡å‡½æ•°ç»„åˆè®¾è®¡çš„è§£å†³æ–¹æ¡ˆï¼š
- en: '| ;Â [[NEList-of](part_three.html#%28tech._sim-dd._nelist._of%29)  [1String](part_one.html#%28tech._1string%29)]
    -> [[NEList-of](part_three.html#%28tech._sim-dd._nelist._of%29)  [1String](part_one.html#%28tech._1string%29)]
    |'
  id: totrans-588
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;   [[NEList-of](part_three.html#%28tech._sim-dd._nelist._of%29)  [1String](part_one.html#%28tech._1string%29)]
    -> [[NEList-of](part_three.html#%28tech._sim-dd._nelist._of%29)  [1String](part_one.html#%28tech._1string%29)]
    |'
- en: '| ;Â creates a palindrome from s0 |'
  id: totrans-589
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;   ä»s0åˆ›å»ºå›æ–‡ |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    |'
  id: totrans-590
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (mirrorÂ ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "abc"))Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "abcba"))
    |'
  id: totrans-591
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (mirror ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)
    "abc")) ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)
    "abcba")) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (mirrorÂ s0)
    |'
  id: totrans-592
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (mirror s0) |'
- en: '| Â Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â (all-but-lastÂ s0)
    |'
  id: totrans-593
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)
    (all-but-last s0) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â (lastÂ s0))
    |'
  id: totrans-594
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    (last s0)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â (all-but-lastÂ s0))))
    |'
  id: totrans-595
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)
    (all-but-last s0)))) |'
- en: 'See [Auxiliary Functions that Generalize](part_two.html#%28part._sec~3agen-funcs%29)
    for last; design all-but-last in an analogous manner.This solution traverses s0
    four times:'
  id: totrans-596
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹[é€šç”¨è¾…åŠ©å‡½æ•°](part_two.html#%28part._sec~3agen-funcs%29)ä»¥äº†è§£lastï¼›ä»¥ç±»ä¼¼çš„æ–¹å¼è®¾è®¡all-but-lastã€‚æ­¤è§£å†³æ–¹æ¡ˆéå†s0å››æ¬¡ï¼š
- en: via all-but-last,
  id: totrans-597
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: é€šè¿‡all-but-lastï¼Œ
- en: via last,
  id: totrans-598
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: é€šè¿‡lastï¼Œ
- en: via all-but-last again, and
  id: totrans-599
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: é€šè¿‡å†æ¬¡ä½¿ç”¨all-but-lastï¼Œ
- en: via [reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29),
    which is ISL+â€™s version of invert.
  id: totrans-600
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: é€šè¿‡[åè½¬](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)ï¼Œè¿™æ˜¯ISL+çš„é€†ç‰ˆæœ¬ã€‚
- en: 'Even with [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    definition for the result of all-but-last, the function needs three traversals.
    While these traversals arenâ€™t â€œstackedâ€ and therefore donâ€™t have a disastrous
    impact on the functionâ€™s performance, an accumulator version can compute the same
    result with a single traversal.ExerciseÂ 503\. [ExerciseÂ 467](part_five.html#%28counter._%28exercise._ex~3atriangulate2%29%29)
    implicitly asks for the design of a function that rotates a [Matrix](part_two.html#%28tech._matrix%29)
    until the first coefficient of the first row differs from 0. In the context of
    [ExerciseÂ 467](part_five.html#%28counter._%28exercise._ex~3atriangulate2%29%29),
    the solution calls for a generative-recursive function that creates a new matrix
    by shifting the first row to the end when it encounters a 0 in the first position.
    Here is the solution:'
  id: totrans-601
  prefs: []
  type: TYPE_NORMAL
  zh: å³ä½¿ä¸ºæ‰€æœ‰ä½†æœ€åä¸€ä¸ªçš„ç»“æœä½¿ç”¨[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)å®šä¹‰ï¼Œè¯¥å‡½æ•°ä»éœ€è¦ä¸‰æ¬¡éå†ã€‚è™½ç„¶è¿™äº›éå†ä¸æ˜¯â€œå †å â€çš„ï¼Œå› æ­¤ä¸ä¼šå¯¹å‡½æ•°çš„æ€§èƒ½äº§ç”Ÿç¾éš¾æ€§çš„å½±å“ï¼Œä½†ç´¯åŠ å™¨ç‰ˆæœ¬å¯ä»¥é€šè¿‡å•æ¬¡éå†è®¡ç®—å‡ºç›¸åŒçš„ç»“æœã€‚ç»ƒä¹ 503ã€‚[ç»ƒä¹ 467](part_five.html#%28counter._%28exercise._ex~3atriangulate2%29%29)éšå«åœ°è¦æ±‚è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†[çŸ©é˜µ](part_two.html#%28tech._matrix%29)æ—‹è½¬ï¼Œç›´åˆ°ç¬¬ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªç³»æ•°ä¸0ä¸åŒã€‚åœ¨[ç»ƒä¹ 467](part_five.html#%28counter._%28exercise._ex~3atriangulate2%29%29)çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè§£å†³æ–¹æ¡ˆè°ƒç”¨äº†ä¸€ä¸ªç”Ÿæˆé€’å½’å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨é‡åˆ°ç¬¬ä¸€ä½ç½®ä¸º0æ—¶é€šè¿‡å°†ç¬¬ä¸€è¡Œç§»è‡³æœ«å°¾æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çŸ©é˜µã€‚ä»¥ä¸‹æ˜¯è§£å†³æ–¹æ¡ˆï¼š
- en: '| ;Â [Matrix](part_two.html#%28tech._matrix%29) -> [Matrix](part_two.html#%28tech._matrix%29)
    |'
  id: totrans-602
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [çŸ©é˜µ](part_two.html#%28tech._matrix%29) -> [çŸ©é˜µ](part_two.html#%28tech._matrix%29)
    |'
- en: '| ;Â finds a row that doesn''t start with 0 and |'
  id: totrans-603
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ‰¾åˆ°ä¸€ä¸ªä¸ä»¥0å¼€å§‹çš„è¡Œå¹¶ |'
- en: '| ;Â uses it as the first one |'
  id: totrans-604
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä½¿ç”¨å®ƒä½œä¸ºç¬¬ä¸€ä¸ª |'
- en: '| ;Â generative moves the first row to last place |'
  id: totrans-605
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”Ÿæˆç§»åŠ¨ç¬¬ä¸€è¡Œåˆ°æœ«å°¾çš„ä½ç½® |'
- en: '| ;Â no termination if all rows start with 0 |'
  id: totrans-606
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœæ‰€æœ‰è¡Œéƒ½ä»¥0å¼€å§‹åˆ™æ— ç»ˆæ­¢ |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â ([rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)Â ''((0Â 4Â 5)Â (1Â 2Â 3)))
    |'
  id: totrans-607
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    ([æ—‹è½¬](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)
    ''((0Â 4Â 5)Â (1Â 2Â 3)))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''((1Â 2Â 3)Â (0Â 4Â 5))) |'
  id: totrans-608
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''((1Â 2Â 3)Â (0Â 4Â 5))) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)Â M)
    |'
  id: totrans-609
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ([æ—‹è½¬](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)
    M) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-610
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29))
    |'
- en: '| Â Â Â Â [([not](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._not%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â M))Â 0))Â M]
    |'
  id: totrans-611
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([é](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._not%29%29)
    ([ç­‰äº](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)
    ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    M)) 0)) M] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-612
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â M)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â M))))]))
    |'
  id: totrans-613
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â Â ([rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â M)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â M))))]))
    |'
- en: 'Stop! Modify this function so that it signals an error when all rows start
    with 0.If you measure this function on large instances of [Matrix](part_two.html#%28tech._matrix%29),
    you get a surprising result:'
  id: totrans-614
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä¿®æ”¹è¿™ä¸ªå‡½æ•°ï¼Œä½¿å…¶åœ¨æ‰€æœ‰è¡Œéƒ½ä»¥0å¼€å¤´æ—¶å‘å‡ºé”™è¯¯ä¿¡å·ã€‚å¦‚æœä½ åœ¨[Matrix](part_two.html#%28tech._matrix%29)çš„å¤§å®ä¾‹ä¸Šæµ‹é‡è¿™ä¸ªå‡½æ•°ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªä»¤äººæƒŠè®¶çš„ç»“æœï¼š
- en: '| rows in M |  | 1000 |  | 2000 |  | 3000 |  | 4000 |  | 5000 |'
  id: totrans-615
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Mä¸­çš„è¡Œæ•° |  | 1000 |  | 2000 |  | 3000 |  | 4000 |  | 5000 |'
- en: '| [rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)
    |  | 17 |  | 66 |  | 151 |  | 272 |  | 436 |'
  id: totrans-616
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)
    |  | 17 |  | 66 |  | 151 |  | 272 |  | 436 |'
- en: As the number of rows increases from 1,000 to 5,000, the time spent by [rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)
    does not increase by a factor of five but by twenty.The problem is that [rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)
    uses [append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29),
    which makes a brand-new list like ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  M)
    only to add ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  M)
    at the end. If M consists of 1,000 rows and the last row is the only one with
    a non-0 coefficient, thatâ€™s roughly
  id: totrans-617
  prefs: []
  type: TYPE_NORMAL
  zh: éšç€è¡Œæ•°ä»1,000å¢åŠ åˆ°5,000ï¼Œ[rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)æ‰€éœ€çš„æ—¶é—´å¹¶ä¸æ˜¯å¢åŠ äº”å€ï¼Œè€Œæ˜¯å¢åŠ äº†äºŒåå€ã€‚é—®é¢˜åœ¨äº[rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)ä½¿ç”¨äº†[append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)ï¼Œå®ƒåªä¸ºæ·»åŠ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)  M)åœ¨æœ«å°¾è€Œåˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„åˆ—è¡¨([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)  M))ã€‚
- en: '![image](../Images/2fb2af078d174deda318c344d4f46220.png)'
  id: totrans-618
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/2fb2af078d174deda318c344d4f46220.png)'
- en: 'lists. How many lists do we get if M consists of 5,000 lines?Now suppose we
    conjecture that the accumulator-style version is faster than the generative one.
    Here is the accumulator template for a structurally recursive version of [rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29):'
  id: totrans-619
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ—è¡¨ã€‚å¦‚æœMç”±5,000è¡Œç»„æˆï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°å¤šå°‘åˆ—è¡¨ï¼Ÿç°åœ¨å‡è®¾æˆ‘ä»¬æ¨æµ‹ç´¯åŠ å™¨é£æ ¼çš„ç‰ˆæœ¬æ¯”ç”Ÿæˆå™¨ç‰ˆæœ¬æ›´å¿«ã€‚ä»¥ä¸‹æ˜¯[rotate](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rotate%29%29)çš„ç»“æ„é€’å½’ç‰ˆæœ¬çš„ç´¯åŠ å™¨æ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (rotate.v2Â M0)
    |'
  id: totrans-620
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (rotate.v2Â M0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Matrix](part_two.html#%28tech._matrix%29)  ...
    -> [Matrix](part_two.html#%28tech._matrix%29) |'
  id: totrans-621
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Matrix](part_two.html#%28tech._matrix%29)  ...
    -> [Matrix](part_two.html#%28tech._matrix%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  ... |'
  id: totrans-622
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ;Â accumulator  ... |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (rotate/aÂ MÂ seen)
    |'
  id: totrans-623
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (rotate/aÂ MÂ seen)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-624
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â M))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]Â ;Â Can
    this be simplified to ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  M)
    |'
  id: totrans-625
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â M))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]Â ;Â Can
    this be simplified to ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)  M)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (rotate/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â M)
    |'
  id: totrans-626
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (rotate/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â M)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â seenÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-627
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â seenÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))])))
    |'
  id: totrans-628
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))))
    |'
- en: '| Â Â Â Â (rotate/aÂ M0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
  id: totrans-629
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â  (rotate/aÂ M0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
- en: The goal is to remember the first row when its leading coefficient is 0 without
    using [append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)
    for every recursion.
  id: totrans-630
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®æ ‡æ˜¯åœ¨ä¸ä½¿ç”¨ [append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)
    è¿›è¡Œæ¯æ¬¡é€’å½’çš„æƒ…å†µä¸‹ï¼Œè®°ä½å½“é¦–é¡¹ç³»æ•°ä¸º0æ—¶çš„ç¬¬ä¸€è¡Œã€‚
- en: Formulate an accumulator statement. Then follow the accumulator design recipe
    to complete the above function. Measure how fast it runs on a Matrix that consists
    of rows with leading 0s except for the last one. If you completed the design correctly,
    the function is quite fast.
  id: totrans-631
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ¶å®šä¸€ä¸ªç´¯åŠ å™¨è¯­å¥ã€‚ç„¶åæŒ‰ç…§ç´¯åŠ å™¨è®¾è®¡é£Ÿè°±æ¥å®Œæˆä¸Šè¿°å‡½æ•°ã€‚æµ‹é‡å®ƒåœ¨ç”±å¸¦æœ‰å‰å¯¼ 0 çš„è¡Œï¼ˆé™¤äº†æœ€åä¸€è¡Œï¼‰ç»„æˆçš„çŸ©é˜µä¸Šè¿è¡Œçš„é€Ÿåº¦ã€‚å¦‚æœä½ æ­£ç¡®å®Œæˆäº†è®¾è®¡ï¼Œè¯¥å‡½æ•°è¿è¡Œé€Ÿåº¦ç›¸å½“å¿«ã€‚
- en: ExerciseÂ 504\. Design to10. It consumes a list of digits and produces the corresponding
    number. The first item on the list is the most significant digit. Hence, when
    applied to '(1  0  2), it produces 102.
  id: totrans-632
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  504\. è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•°å­—åˆ—è¡¨å¹¶ç”Ÿæˆç›¸åº”çš„æ•°å­—ã€‚åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯æœ€é‡è¦çš„æ•°å­—ã€‚å› æ­¤ï¼Œå½“åº”ç”¨äº '(1 0 2)' æ—¶ï¼Œå®ƒäº§ç”Ÿ 102ã€‚
- en: Domain Knowledge You may recall from grade school that the result is determined
    by ![image](../Images/941ee522b6aef18a6ea41e553835207a.png)
  id: totrans-633
  prefs: []
  type: TYPE_NORMAL
  zh: é¢†åŸŸçŸ¥è¯† ä½ å¯èƒ½è¿˜è®°å¾—ä»å°å­¦æ—¶ï¼Œç»“æœæ˜¯ç”± ![image](../Images/941ee522b6aef18a6ea41e553835207a.png)
    å†³å®šçš„ã€‚
- en: 'ExerciseÂ 505\. Design the function is-prime, which consumes a natural number
    and returns #true if it is prime and #false otherwise.'
  id: totrans-634
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹  505\. è®¾è®¡å‡½æ•° is-primeï¼Œå®ƒæ¥å—ä¸€ä¸ªè‡ªç„¶æ•°å¹¶è¿”å› #true å¦‚æœå®ƒæ˜¯ç´ æ•°ï¼Œå¦åˆ™è¿”å› #falseã€‚'
- en: Domain Knowledge A number n is prime if it is not divisible by any number between
    n - 1 and 2.
  id: totrans-635
  prefs: []
  type: TYPE_NORMAL
  zh: é¢†åŸŸçŸ¥è¯† ä¸€ä¸ªæ•° n å¦‚æœå®ƒä¸èƒ½è¢« n - 1 å’Œ 2 ä¹‹é—´çš„ä»»ä½•æ•°æ•´é™¤ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ç´ æ•°ã€‚
- en: 'Hint The design recipe for [N](part_two.html#%28tech._n%29) [>=1] suggests
    the following template:'
  id: totrans-636
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤º [N](part_two.html#%28tech._n%29) [>=1] çš„è®¾è®¡é£Ÿè°±å»ºè®®ä»¥ä¸‹æ¨¡æ¿ï¼š
- en: '| ;Â [N](part_two.html#%28tech._n%29) [>=1] -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-637
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [N](part_two.html#%28tech._n%29) [>=1] -> [å¸ƒå°”](part_one.html#%28tech._boolean%29)
    |'
- en: '| ;Â determines whether n is a prime number |'
  id: totrans-638
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åˆ¤æ–­ n æ˜¯å¦ä¸ºç´ æ•° |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (is-prime?Â n)
    |'
  id: totrans-639
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (is-prime?Â n)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-640
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 1)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-641
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 1)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (is-prime?Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  id: totrans-642
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (is-prime?Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
- en: This template immediately tells you that the function forgets n, its initial
    argument as it recurs. Since n is definitely needed to determine whether n is
    divisible by ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  1),
    ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  n  2),
    and so on, you know that you need an accumulator-style function.Note on Speed
    Programmers who encounter accumulator-style functions for the first time often
    get the impression that they are always faster than their plain counterparts.
    So letâ€™s take a look at the solution of [exerciseÂ 497](#%28counter._%28exercise._ex~3atime-factorial%29%29):An
    explanation of these times is beyond the scope of this book.
  id: totrans-643
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæ¨¡æ¿ç«‹å³å‘Šè¯‰ä½ ï¼Œå‡½æ•°åœ¨é€’å½’æ—¶å¿˜è®°äº†å®ƒçš„åˆå§‹å‚æ•° nã€‚ç”±äº n ä¸€å®šæ˜¯ç¡®å®š n æ˜¯å¦èƒ½è¢« ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)
    n 1), ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)
    n 2), ç­‰ç­‰ï¼Œåˆ†å‰²çš„å¿…è¦ï¼Œä½ çŸ¥é“ä½ éœ€è¦ä¸€ä¸ªç´¯åŠ å™¨é£æ ¼çš„å‡½æ•°ã€‚å…³äºé€Ÿåº¦ï¼šç¨‹åºå‘˜ç¬¬ä¸€æ¬¡é‡åˆ°ç´¯åŠ å™¨é£æ ¼çš„å‡½æ•°æ—¶ï¼Œé€šå¸¸ä¼šå¾—åˆ°è¿™æ ·çš„å°è±¡ï¼Œå³å®ƒä»¬æ€»æ˜¯æ¯”å®ƒä»¬çš„æ™®é€šç‰ˆæœ¬æ›´å¿«ã€‚é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹
    [ç»ƒä¹  497](#%28counter._%28exercise._ex~3atime-factorial%29%29) çš„è§£å†³æ–¹æ¡ˆï¼šå¯¹è¿™äº›æ—¶é—´çš„è§£é‡Šè¶…å‡ºäº†æœ¬ä¹¦çš„èŒƒå›´ã€‚
- en: '| !.v1 |  | 5.760 |  | 5.780 |  | 5.800 |  | 5.820 |  | 5.870 |  | 5.806 |'
  id: totrans-644
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| !.v1 |  | 5.760 |  | 5.780 |  | 5.800 |  | 5.820 |  | 5.870 |  | 5.806 |'
- en: '| !.v2 |  | 5.970 |  | 5.940 |  | 5.980 |  | 5.970 |  | 6.690 |  | 6.111 |'
  id: totrans-645
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| !.v2 |  | 5.970 |  | 5.940 |  | 5.980 |  | 5.970 |  | 6.690 |  | 6.111 |'
- en: The tableâ€™s top row shows the number of seconds for five runs of (!.v1  20),
    while the bottom one lists those of running (!.v2  20). The last column shows
    the averages. In short, the table shows that people jump to premature conclusions;
    the performance of at least one accumulator-style function is worse than that
    of the original. Do not trust prejudices. Instead, measure performance characteristics
    of your programs for yourself. End
  id: totrans-646
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨æ ¼çš„ç¬¬ä¸€è¡Œæ˜¾ç¤ºäº† (!.v1 20) äº”æ¬¡è¿è¡Œçš„ç§’æ•°ï¼Œè€Œæœ€åä¸€è¡Œåˆ—å‡ºäº† (!.v2 20) çš„è¿è¡Œç§’æ•°ã€‚æœ€åä¸€åˆ—æ˜¾ç¤ºäº†å¹³å‡å€¼ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¡¨æ ¼æ˜¾ç¤ºäººä»¬ä¼šè¿‡æ—©åœ°ä¸‹ç»“è®ºï¼›è‡³å°‘æœ‰ä¸€ä¸ªç´¯åŠ å™¨é£æ ¼å‡½æ•°çš„æ€§èƒ½æ¯”åŸå§‹ç‰ˆæœ¬å·®ã€‚ä¸è¦ç›¸ä¿¡åè§ã€‚ç›¸åï¼Œè‡ªå·±æµ‹é‡ä½ ç¨‹åºçš„æ€§èƒ½ç‰¹å¾ã€‚ç»“æŸ
- en: ExerciseÂ 506\. Design an accumulator-style version of [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29).
  id: totrans-647
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  506ã€‚è®¾è®¡ä¸€ä¸ªç´¯åŠ å™¨é£æ ¼çš„ [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)
    ç‰ˆæœ¬ã€‚
- en: 'ExerciseÂ 507\. [ExerciseÂ 257](part_three.html#%28counter._%28exercise._ex~3adesigning-build-list%29%29)
    explains how to design [foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)
    with the design recipes and guidelines of the first two parts of the book:'
  id: totrans-648
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  507ã€‚ç»ƒä¹  [257](part_three.html#%28counter._%28exercise._ex~3adesigning-build-list%29%29)
    è§£é‡Šäº†å¦‚ä½•ä½¿ç”¨æœ¬ä¹¦å‰ä¸¤éƒ¨åˆ†çš„é£Ÿè°±å’ŒæŒ‡å—æ¥è®¾è®¡ [foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)ã€‚
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (f*ldlÂ [+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 0Â ''(1Â 2Â 3))
    |'
  id: totrans-649
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    (f*ldl [+] (http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    0 ''(1 2 3))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)Â [+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â 0Â ''(1Â 2Â 3)))
    |'
  id: totrans-650
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)
    [+] (http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)
    0 ''(1 2 3))) |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (f*ldlÂ [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''()Â ''(aÂ bÂ c))
    |'
  id: totrans-651
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (f*ldlÂ [è¿æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''()Â ''(aÂ bÂ c))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)Â [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''()Â ''(aÂ bÂ c)))
    |'
  id: totrans-652
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([æŠ˜å ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)Â [è¿æ¥](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ''()Â ''(aÂ bÂ c)))
    |'
- en: '| Â  |'
  id: totrans-653
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â version 1 |'
  id: totrans-654
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç‰ˆæœ¬ 1 |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (f*ldlÂ fÂ iÂ l)
    |'
  id: totrans-655
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (f*ldlÂ fÂ iÂ l)
    |'
- en: '| Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â fÂ iÂ ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â l)))
    |'
  id: totrans-656
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æŠ˜å å³](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â fÂ iÂ ([åè½¬](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â l)))
    |'
- en: 'That is, [foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)
    is the result of reversing the given list and then using [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    to fold the given function over this intermediate list.The f*ldl function obviously
    traverses the list twice, but once we design all the functions, it becomes clear
    how much harder it has to work:'
  id: totrans-657
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£å°±æ˜¯ï¼Œ[æŠ˜å ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)
    æ˜¯é€šè¿‡åè½¬ç»™å®šçš„åˆ—è¡¨ï¼Œç„¶åä½¿ç”¨ [æŠ˜å å³](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    åœ¨è¿™ä¸ªä¸­é—´åˆ—è¡¨ä¸ŠæŠ˜å ç»™å®šå‡½æ•°çš„ç»“æœã€‚f*ldl å‡½æ•°æ˜¾ç„¶éœ€è¦éå†åˆ—è¡¨ä¸¤æ¬¡ï¼Œä½†ä¸€æ—¦æˆ‘ä»¬è®¾è®¡å¥½æ‰€æœ‰å‡½æ•°ï¼Œå°±å˜å¾—æ˜æ˜¾å®ƒéœ€è¦åšå¤šå°‘é¢å¤–çš„å·¥ä½œï¼š
- en: '| ;Â version 2 |'
  id: totrans-658
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç‰ˆæœ¬ 2 |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (f*ldlÂ fÂ iÂ l)
    |'
  id: totrans-659
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (f*ldlÂ fÂ iÂ l)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â l)
    |'
  id: totrans-660
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([åè½¬](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â l)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-661
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  id: totrans-662
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (add-to-endÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)
    |'
  id: totrans-663
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (add-to-endÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))]))
    |'
  id: totrans-664
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))]))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-to-endÂ xÂ l)
    |'
  id: totrans-665
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-to-endÂ xÂ l)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-666
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â x)]
    |'
  id: totrans-667
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â x)]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)
    |'
  id: totrans-668
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (add-to-endÂ xÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))]))
    |'
  id: totrans-669
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (add-to-endÂ xÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))]))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â l)
    |'
  id: totrans-670
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â l)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-671
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â i]
    |'
  id: totrans-672
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â i]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (fÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))])))
    |'
  id: totrans-673
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (fÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))])))
    |'
- en: '| Â Â Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â l))))
    |'
  id: totrans-674
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â l))))
    |'
- en: 'We know that [reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)
    has to traverse a list once for every item on the list, meaning f*ldl really performs
    ![image](../Images/422fb072e460e041f53e410bfa5af570.png) traversals for a list
    of length n. Fortunately, we know how to eliminate this bottleneck with an accumulator:'
  id: totrans-675
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çŸ¥é“ [reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)
    å¿…é¡»éå†åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸€æ¬¡ï¼Œè¿™æ„å‘³ç€ f*ldl ç¡®å®ä¸ºé•¿åº¦ä¸º n çš„åˆ—è¡¨æ‰§è¡Œ ![image](../Images/422fb072e460e041f53e410bfa5af570.png)
    éå†ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚ä½•é€šè¿‡ç´¯åŠ å™¨æ¶ˆé™¤è¿™ä¸ªç“¶é¢ˆï¼š
- en: '| ;Â version 3 |'
  id: totrans-676
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç‰ˆæœ¬ 3 |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (f*ldlÂ fÂ iÂ l)
    |'
  id: totrans-677
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (f*ldlÂ fÂ iÂ l)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (reverse/aÂ lÂ a)
    |'
  id: totrans-678
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (reverse/aÂ lÂ a)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-679
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â a]
    |'
  id: totrans-680
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â a]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (reverse/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)
    |'
  id: totrans-681
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (reverse/aÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â a))]))
    |'
  id: totrans-682
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|              ([åˆå¹¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    ([é¦–é¡¹](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    l) a))])) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â l)
    |'
  id: totrans-683
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|              ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    ([æŠ˜å å³](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    l)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-684
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|         ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â i]
    |'
  id: totrans-685
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|              ([ç©ºåˆ—è¡¨?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    l) i] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-686
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|              [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (fÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))])))
    |'
  id: totrans-687
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|              (f ([é¦–é¡¹](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    l) ([æŠ˜å å³](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    ([å‰©ä½™](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    l)))])) |'
- en: '| Â Â Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â (reverse/aÂ lÂ ''()))))
    |'
  id: totrans-688
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|              ([æŠ˜å å³](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    (reverse/a l ''()))) |'
- en: 'Once [reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)
    uses an accumulator, we actually get the apparent performance of two traversals
    of the list. The question is whether we can improve on this by adding an accumulator
    to the locally defined [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29):'
  id: totrans-689
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ [åè½¬](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)
    ä½¿ç”¨äº†ç´¯åŠ å™¨ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¾—åˆ°äº†åˆ—è¡¨ä¸¤æ¬¡éå†çš„è¡¨é¢æ€§èƒ½ã€‚é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥é€šè¿‡å‘å±€éƒ¨å®šä¹‰çš„ [æŠ˜å å³](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    æ·»åŠ ç´¯åŠ å™¨æ¥æ”¹è¿›è¿™ä¸€ç‚¹ï¼š
- en: '| ;Â version 4 |'
  id: totrans-690
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ç‰ˆæœ¬ 4 |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (f*ldlÂ fÂ iÂ l0)
    |'
  id: totrans-691
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (f*ldl f i l0)) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (foldr/aÂ aÂ l)
    |'
  id: totrans-692
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|          ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (foldr/a a l)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-693
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â a]
    |'
  id: totrans-694
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â a]
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-695
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (foldr/aÂ (fÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â a)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l))])))
    |'
  id: totrans-696
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (foldr/aÂ (fÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â a)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)))))
    |'
- en: '| Â Â Â Â (foldr/aÂ iÂ l0))) |'
  id: totrans-697
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (foldr/aÂ iÂ l0))) |'
- en: 'Since equipping the function with an accumulator reverses the order in which
    the list is traversed, the initial reversal of the list is superfluous.Task 1
    Recall the signature for [foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29):'
  id: totrans-698
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºç»™å‡½æ•°æ·»åŠ ç´¯åŠ å™¨ä¼šåè½¬éå†åˆ—è¡¨çš„é¡ºåºï¼Œå› æ­¤åˆå§‹åè½¬åˆ—è¡¨æ˜¯å¤šä½™çš„ã€‚ä»»åŠ¡1ï¼šå›å¿†[foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)çš„ç­¾åï¼š
- en: ;Â [X Y] [X Y -> Y] Y [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] -> Y
  id: totrans-699
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ;Â [X Y] [X Y -> Y] Y [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    X] -> Y
- en: 'It is also the signature of f*ldl. Formulate the signature for foldr/a and
    its accumulator invariant. Hint Assume that the difference between l0 and l is
    ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  x1  x2  x3).
    What is a, then?You may also be wondering why foldr/a consumes its arguments in
    this unusual order, first the accumulator and then the list. To understand the
    reason for this ordering, imagine instead that foldr/a also consumes fâ€”<wbr>as
    the first argument. At this point it becomes abundantly clear that foldr/a is
    [foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29):'
  id: totrans-700
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¹Ÿæ˜¯f*ldlçš„ç­¾åã€‚ä¸ºfoldr/aåŠå…¶ç´¯åŠ å™¨ä¸å˜é‡åˆ¶å®šç­¾åã€‚æç¤ºï¼šå‡è®¾l0å’Œlä¹‹é—´çš„å·®å¼‚æ˜¯([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    x1 x2 x3)ã€‚é‚£ä¹ˆaæ˜¯ä»€ä¹ˆï¼Ÿä½ å¯èƒ½è¿˜åœ¨æƒ³ä¸ºä»€ä¹ˆfoldr/aä»¥è¿™ç§ä¸å¯»å¸¸çš„é¡ºåºæ¶ˆè€—å…¶å‚æ•°ï¼Œé¦–å…ˆæ˜¯ç´¯åŠ å™¨ç„¶åæ˜¯åˆ—è¡¨ã€‚ä¸ºäº†ç†è§£è¿™ç§æ’åºçš„åŸå› ï¼Œæƒ³è±¡ä¸€ä¸‹å¦‚æœfoldr/aä¹Ÿä»¥fä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚è¿™æ—¶ï¼Œå¾ˆæ˜æ˜¾foldr/aæ˜¯[foldl](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldl%29%29)ï¼š
- en: '| ;Â version 5 |'
  id: totrans-701
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: ;Â version 5 |
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (f*ldlÂ fÂ iÂ l)
    |'
  id: totrans-702
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (f*ldlÂ fÂ iÂ l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-703
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â i]
    |'
  id: totrans-704
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â i]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (f*ldlÂ fÂ (fÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â i)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l))]))
    |'
  id: totrans-705
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (f*ldlÂ fÂ (fÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â i)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l))]))
    |'
- en: 'Task 2 Design build-l*st using an accumulator-style approach. The function
    must satisfy the following tests:'
  id: totrans-706
  prefs: []
  type: TYPE_NORMAL
  zh: ä»»åŠ¡2 ä½¿ç”¨ç´¯åŠ å™¨é£æ ¼çš„å®ç°è®¾è®¡build-l*stã€‚è¯¥å‡½æ•°å¿…é¡»æ»¡è¶³ä»¥ä¸‹æµ‹è¯•ï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (build-l*stÂ nÂ f)Â ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â nÂ f))
  id: totrans-707
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (build-l*stÂ nÂ f)Â ([build-list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._build-list%29%29)Â nÂ f))
- en: for any natural number n and function f.
  id: totrans-708
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºä»»ä½•è‡ªç„¶æ•°nå’Œå‡½æ•°fã€‚
- en: 32.4A Graphical Editor, with Mouse[ğŸ”—](#(part._accu-edit._sec~3aedit3) "Link
    to here")
  id: totrans-709
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 32.4å›¾å½¢ç¼–è¾‘å™¨ï¼Œå¸¦é¼ æ ‡[ğŸ”—](#(part._accu-edit._sec~3aedit3) "é“¾æ¥åˆ°æ­¤å¤„")
- en: '[A Graphical Editor](part_one.html#%28part._sec~3aedit1%29) introduces the
    notion of a one-line editor and presents a number of exercises on creating a graphical
    editor. Recall that a graphical editor is an interactive program that interprets
    key events as editing actions on a string. In particular, when a user presses
    the left or right arrow keys, the cursor moves left or right; similarly, pressing
    the delete key removes a [1String](part_one.html#%28tech._1string%29) from the
    edited text. The editor program uses a data representation that combines two strings
    in a structure. [A Graphical Editor, Revisited](part_two.html#%28part._list-edit2._sec~3aedit2%29)
    resumes these exercises and shows how the same program can greatly benefit from
    a different data structure, one that combines two strings.'
  id: totrans-710
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾å½¢ç¼–è¾‘å™¨](part_one.html#%28part._sec~3aedit1%29)ä»‹ç»äº†å•è¡Œç¼–è¾‘å™¨çš„æ¦‚å¿µï¼Œå¹¶å±•ç¤ºäº†ä¸€ç³»åˆ—åˆ›å»ºå›¾å½¢ç¼–è¾‘å™¨çš„ç»ƒä¹ ã€‚å›æƒ³ä¸€ä¸‹ï¼Œå›¾å½¢ç¼–è¾‘å™¨æ˜¯ä¸€ä¸ªäº¤äº’ç¨‹åºï¼Œå®ƒå°†æŒ‰é”®äº‹ä»¶è§£é‡Šä¸ºå¯¹å­—ç¬¦ä¸²çš„ç¼–è¾‘æ“ä½œã€‚ç‰¹åˆ«æ˜¯ï¼Œå½“ç”¨æˆ·æŒ‰ä¸‹å·¦å³ç®­å¤´é”®æ—¶ï¼Œå…‰æ ‡ä¼šå‘å·¦æˆ–å‘å³ç§»åŠ¨ï¼›åŒæ ·ï¼ŒæŒ‰ä¸‹åˆ é™¤é”®ä¼šä»ç¼–è¾‘çš„æ–‡æœ¬ä¸­åˆ é™¤ä¸€ä¸ª[1String](part_one.html#%28tech._1string%29)ã€‚ç¼–è¾‘ç¨‹åºä½¿ç”¨ä¸€ç§æ•°æ®è¡¨ç¤ºï¼Œå°†ä¸¤ä¸ªå­—ç¬¦ä¸²ç»„åˆåœ¨ä¸€ä¸ªç»“æ„ä¸­ã€‚[å›¾å½¢ç¼–è¾‘å™¨ï¼Œå†è®¿](part_two.html#%28part._list-edit2._sec~3aedit2%29)ç»§ç»­è¿™äº›ç»ƒä¹ ï¼Œå¹¶å±•ç¤ºäº†åŒä¸€ä¸ªç¨‹åºå¦‚ä½•ä»ä¸åŒçš„æ•°æ®ç»“æ„ä¸­å—ç›Šï¼Œè¿™ç§ç»“æ„å°†ä¸¤ä¸ªå­—ç¬¦ä¸²ç»“åˆèµ·æ¥ã€‚'
- en: Neither of these sections deals with mouse actions for navigation, even though
    all modern applications support this functionality. The basic difficulty with
    mouse events is to place the cursor at the appropriate spot. Since the program
    deals with a single line of text, a mouse click at (x,y) clearly aims to place
    the cursor between the letters that are visible at or around the x position. This
    section fills the gap.
  id: totrans-711
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸¤ä¸ªéƒ¨åˆ†éƒ½æ²¡æœ‰å¤„ç†é¼ æ ‡å¯¼èˆªåŠ¨ä½œï¼Œå°½ç®¡æ‰€æœ‰ç°ä»£åº”ç”¨ç¨‹åºéƒ½æ”¯æŒè¿™ç§åŠŸèƒ½ã€‚é¼ æ ‡äº‹ä»¶çš„åŸºæœ¬å›°éš¾æ˜¯å°†å…‰æ ‡æ”¾ç½®åœ¨é€‚å½“çš„åœ°ç‚¹ã€‚ç”±äºç¨‹åºå¤„ç†çš„æ˜¯å•è¡Œæ–‡æœ¬ï¼Œå› æ­¤åœ¨(x,y)å¤„çš„é¼ æ ‡ç‚¹å‡»æ˜¾ç„¶æ˜¯ä¸ºäº†å°†å…‰æ ‡æ”¾ç½®åœ¨æˆ–å›´ç»•xä½ç½®å¯è§çš„å­—æ¯ä¹‹é—´ã€‚æœ¬èŠ‚å¡«è¡¥äº†è¿™ä¸€ç©ºç™½ã€‚
- en: 'Recall the relevant definitions from [A Graphical Editor, Revisited](part_two.html#%28part._list-edit2._sec~3aedit2%29):'
  id: totrans-712
  prefs: []
  type: TYPE_NORMAL
  zh: å›æƒ³ä¸€ä¸‹[å›¾å½¢ç¼–è¾‘å™¨ï¼Œå†è®¿](part_two.html#%28part._list-edit2._sec~3aedit2%29)ä¸­çš„ç›¸å…³å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â FONT-SIZEÂ 11)
    |'
  id: totrans-713
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â FONT-SIZEÂ 11)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â FONT-COLORÂ "black")
    |'
  id: totrans-714
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â FONT-COLORÂ "black")
    |'
- en: '| Â  |'
  id: totrans-715
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)]
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-716
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)]
    -> [Image](part_one.html#%28tech._image%29) |'
- en: '| ;Â renders a string as an image for the editor |'
  id: totrans-717
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†å­—ç¬¦ä¸²æ¸²æŸ“ä¸ºç¼–è¾‘å™¨çš„å›¾åƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
  id: totrans-718
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
- en: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29)Â s)Â FONT-SIZEÂ FONT-COLOR))
    |'
  id: totrans-719
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29)Â s)Â FONT-SIZEÂ FONT-COLOR))
    |'
- en: '| Â  |'
  id: totrans-720
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â editorÂ [preÂ post])
    |'
  id: totrans-721
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â editorÂ [preÂ post])
    |'
- en: '| ;Â An Editor is a structure: |'
  id: totrans-722
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ª Editor æ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-editor  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)]  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)])
    |'
  id: totrans-723
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-editor  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)]  [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)])
    |'
- en: '| ;Â interpretation if (make-editor  p  s) is the state of |'
  id: totrans-724
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœ (make-editor  p  s) æ˜¯çŠ¶æ€ |'
- en: '| ;Â an interactive editor, ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)  p)
    corresponds to |'
  id: totrans-725
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªäº¤äº’å¼ç¼–è¾‘å™¨ï¼Œ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)  p)
    å¯¹åº”äº |'
- en: '| ;Â the text to the left of the cursor and s to the |'
  id: totrans-726
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å…‰æ ‡å·¦ä¾§çš„æ–‡æœ¬å’Œ s åˆ° |'
- en: '| ;Â text on the right |'
  id: totrans-727
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å³ä¾§çš„æ–‡æœ¬ |'
- en: ExerciseÂ 508\. Design split-structural using the structural design recipe. The
    function consumes a list of [1String](part_one.html#%28tech._1string%29)s ed and
    a natural number x; the former represents the complete string in some [Editor](#%28tech._accu-edit._editor%29)
    and the latter the x-coordinate of the mouse click. The function produces
  id: totrans-728
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  508ã€‚ä½¿ç”¨ç»“æ„è®¾è®¡é£Ÿè°±è®¾è®¡ split-structuralã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ª [1String](part_one.html#%28tech._1string%29)
    åˆ—è¡¨ ed å’Œä¸€ä¸ªè‡ªç„¶æ•° xï¼›å‰è€…ä»£è¡¨æŸä¸ª [Editor](#%28tech._accu-edit._editor%29) ä¸­çš„å®Œæ•´å­—ç¬¦ä¸²ï¼Œåè€…ä»£è¡¨é¼ æ ‡ç‚¹å‡»çš„
    x åæ ‡ã€‚è¯¥å‡½æ•°äº§ç”Ÿ
- en: (make-editorÂ pÂ s)
  id: totrans-729
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (make-editorÂ pÂ s)
- en: 'such that (1) p and s make up ed and (2) x is larger than the image of p and
    smaller than the image of p extended with the first [1String](part_one.html#%28tech._1string%29)
    on s (if any).Here is the first condition expressed with an ISL+ expression:'
  id: totrans-730
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿å¾—ï¼ˆ1ï¼‰p å’Œ s ç»„æˆ edï¼Œå¹¶ä¸”ï¼ˆ2ï¼‰x å¤§äº p çš„åƒï¼Œå°äºå°† p æ‰©å±•åˆ° s ä¸Šçš„ç¬¬ä¸€ä¸ª [1String](part_one.html#%28tech._1string%29)
    çš„åƒï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚ç¬¬ä¸€ä¸ªæ¡ä»¶ç”¨ ISL+ è¡¨è¾¾å¼è¡¨ç¤ºå¦‚ä¸‹ï¼š
- en: ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â ([string-append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-append%29%29)Â pÂ s)Â ed)
  id: totrans-731
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â ([string-append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-append%29%29)Â pÂ s)Â ed)
- en: The second one is
  id: totrans-732
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒä¸ªæ˜¯
- en: '| ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â ([image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)Â (editor-textÂ p))
    |'
  id: totrans-733
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â ([image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)Â (editor-textÂ p))
    |'
- en: '| Â Â Â Â x |'
  id: totrans-734
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â x |'
- en: '| Â Â Â Â ([image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)Â (editor-textÂ ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â pÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â s)))))
    |'
  id: totrans-735
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)Â (editor-textÂ ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â pÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â s))))
    |'
- en: assuming ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)  s).
  id: totrans-736
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)
    s)ã€‚
- en: Hints (1) The x-coordinate measures the distance from the left. Hence the function
    must check whether larger and larger prefixes of ed fit into the given width.
    The first one that doesnâ€™t fit corresponds to the pre field of the desired [Editor](#%28tech._accu-edit._editor%29),
    the remainder of ed to the post field.
  id: totrans-737
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤º(1) xåæ ‡è¡¡é‡çš„æ˜¯ä»å·¦è¾¹çš„è·ç¦»ã€‚å› æ­¤ï¼Œå‡½æ•°å¿…é¡»æ£€æŸ¥è¶Šæ¥è¶Šå¤§çš„å‰ç¼€æ˜¯å¦é€‚åˆç»™å®šçš„å®½åº¦ã€‚ç¬¬ä¸€ä¸ªä¸é€‚åˆçš„å¯¹åº”äºæ‰€éœ€[ç¼–è¾‘å™¨](#%28tech._accu-edit._editor%29)çš„å‰å­—æ®µï¼Œedçš„å‰©ä½™éƒ¨åˆ†å¯¹åº”äºåå­—æ®µã€‚
- en: (2) Designing this function calls for thoroughly developing examples and tests.
    See [Intervals, Enumerations, and Itemizations](part_one.html#%28part._ch~3aintervals-enums%29).
  id: totrans-738
  prefs: []
  type: TYPE_NORMAL
  zh: (2) è®¾è®¡è¿™ä¸ªå‡½æ•°éœ€è¦å½»åº•å¼€å‘ç¤ºä¾‹å’Œæµ‹è¯•ã€‚å‚è§[åŒºé—´ã€æšä¸¾å’Œé¡¹ç›®åŒ–](part_one.html#%28part._ch~3aintervals-enums%29)ã€‚
- en: ExerciseÂ 509\. Design the function split. Use the accumulator design recipe
    to improve on the result of [exerciseÂ 508](#%28counter._accu-edit._%28exercise._ex~3aeditor-mouse-structural%29%29).
    After all, the hints already point out that when the function discovers the correct
    split point, it needs both parts of the list, and one part is obviously lost due
    to recursion.
  id: totrans-739
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 509ã€‚è®¾è®¡splitå‡½æ•°ã€‚ä½¿ç”¨ç´¯åŠ å™¨è®¾è®¡é£Ÿè°±æ¥æ”¹è¿›[ç»ƒä¹ 508](#%28counter._accu-edit._%28exercise._ex~3aeditor-mouse-structural%29%29)çš„ç»“æœã€‚æ¯•ç«Ÿï¼Œæç¤ºå·²ç»æŒ‡å‡ºï¼Œå½“å‡½æ•°å‘ç°æ­£ç¡®çš„åˆ†å‰²ç‚¹æ—¶ï¼Œå®ƒéœ€è¦åˆ—è¡¨çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼Œè€Œå…¶ä¸­ä¸€ä¸ªéƒ¨åˆ†æ˜¾ç„¶ç”±äºé€’å½’è€Œä¸¢å¤±ã€‚
- en: Once you have solved this exercise, equip the main function of [A Graphical
    Editor, Revisited](part_two.html#%28part._list-edit2._sec~3aedit2%29) with a clause
    for mouse clicks. As you experiment with moving the cursor via mouse clicks, you
    will notice that it does not exactly behave like applications that you use on
    your other devicesâ€”<wbr>even though split passes all its tests.
  id: totrans-740
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ä½ è§£å†³äº†è¿™ä¸ªç»ƒä¹ ï¼Œå°±ç»™[A Graphical Editor, Revisited](part_two.html#%28part._list-edit2._sec~3aedit2%29)çš„ä¸»å‡½æ•°æ·»åŠ ä¸€ä¸ªé¼ æ ‡ç‚¹å‡»çš„å­å¥ã€‚å½“ä½ é€šè¿‡é¼ æ ‡ç‚¹å‡»ç§»åŠ¨å…‰æ ‡è¿›è¡Œå®éªŒæ—¶ï¼Œä½ ä¼šæ³¨æ„åˆ°å®ƒçš„è¡Œä¸ºå¹¶ä¸å®Œå…¨åƒä½ åœ¨å…¶ä»–è®¾å¤‡ä¸Šä½¿ç”¨çš„åº”ç”¨ç¨‹åºâ€”â€”å³ä½¿splité€šè¿‡äº†æ‰€æœ‰çš„æµ‹è¯•ã€‚
- en: Graphical programs, like editors, call for experimentation to come up with the
    best â€œlook and feelâ€ experiences. In this case, your editor is too simplistic
    with its placement of the cursor. After the applications on your computer determine
    the split point, they also determine which letter division is closer to the x-coordinate
    and place the cursor there.
  id: totrans-741
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾å½¢ç¨‹åºï¼Œå¦‚ç¼–è¾‘å™¨ï¼Œéœ€è¦å®éªŒæ¥æ‰¾åˆ°æœ€ä½³çš„â€œå¤–è§‚å’Œæ„Ÿè§‰â€ä½“éªŒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ çš„ç¼–è¾‘å™¨åœ¨å…‰æ ‡æ”¾ç½®ä¸Šè¿‡äºç®€å•ã€‚å½“ä½ çš„è®¡ç®—æœºä¸Šçš„åº”ç”¨ç¨‹åºç¡®å®šåˆ†å‰²ç‚¹åï¼Œå®ƒä»¬ä¹Ÿä¼šç¡®å®šå“ªä¸ªå­—æ¯åˆ’åˆ†æ›´æ¥è¿‘xåæ ‡ï¼Œå¹¶å°†å…‰æ ‡æ”¾åœ¨é‚£é‡Œã€‚
- en: ExerciseÂ 510\. Many operating systems come with the fmt program, which can rearrange
    the words in a file so that all lines in the resulting file have a maximal width.
    As a widely used program, fmt supports a range of related functions. This exercise
    focuses on its core functionality.
  id: totrans-742
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 510ã€‚è®¸å¤šæ“ä½œç³»ç»Ÿéƒ½è‡ªå¸¦fmtç¨‹åºï¼Œè¯¥ç¨‹åºå¯ä»¥é‡æ–°æ’åˆ—æ–‡ä»¶ä¸­çš„å•è¯ï¼Œä½¿å¾—ç»“æœæ–‡ä»¶ä¸­çš„æ‰€æœ‰è¡Œéƒ½å…·æœ‰æœ€å¤§å®½åº¦ã€‚ä½œä¸ºä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„ç¨‹åºï¼Œfmtæ”¯æŒä¸€ç³»åˆ—ç›¸å…³åŠŸèƒ½ã€‚æœ¬ç»ƒä¹ ä¾§é‡äºå…¶æ ¸å¿ƒåŠŸèƒ½ã€‚
- en: Design the program fmt. It consumes a natural number w, the name of an input
    file in-f, and the name of an output file out-fâ€”<wbr>in the same sense as [read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)
    from the 2htdp/batch-io teachpack. Its purpose is to read all the words from the
    in-f, to arrange these words in the given order into lines of maximal width w,
    and to write these lines to out-f.
  id: totrans-743
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ç¨‹åº fmtã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªè‡ªç„¶æ•° wï¼Œè¾“å…¥æ–‡ä»¶å in-fï¼Œä»¥åŠè¾“å‡ºæ–‡ä»¶å out-fâ€”â€”ä¸ [read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)
    ä» 2htdp/batch-io æ•™å­¦åŒ…ä¸­çš„ç”¨æ³•ç›¸åŒã€‚å®ƒçš„ç›®çš„æ˜¯ä» in-f ä¸­è¯»å–æ‰€æœ‰å•è¯ï¼Œå°†è¿™äº›å•è¯æŒ‰ç»™å®šé¡ºåºæ’åˆ—æˆå®½åº¦ä¸º w çš„è¡Œï¼Œå¹¶å°†è¿™äº›è¡Œå†™å…¥ out-fã€‚
- en: 33More Uses of Accumulation[ğŸ”—](#(part._ch~3amore-accu) "Link to here")
  id: totrans-744
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 33æ›´å¤šç´¯åŠ å™¨çš„ç”¨æ³•[ğŸ”—](#(part._ch~3amore-accu) "é“¾æ¥è‡³æ­¤")
- en: This chapter presents three more uses of accumulators. The first section concerns
    the use of accumulators in conjunction with tree-processing functions. It uses
    the compilation of ISL+ as an illustrative example. The second section explains
    why we occasionally want accumulators inside of data representations and how to
    go about placing them there. The final section resumes the discussion of rendering
    fractals.
  id: totrans-745
  prefs: []
  type: TYPE_NORMAL
  zh: 'æœ¬ç« ä»‹ç»äº†ç´¯åŠ å™¨çš„ä¸‰ç§æ›´å¤šç”¨æ³•ã€‚ç¬¬ä¸€éƒ¨åˆ†å…³æ³¨ç´¯åŠ å™¨ä¸æ ‘å¤„ç†å‡½æ•°çš„ç»“åˆä½¿ç”¨ã€‚å®ƒä½¿ç”¨ ISL+ çš„ç¼–è¯‘ä½œä¸ºè¯´æ˜æ€§ç¤ºä¾‹ã€‚ç¬¬äºŒéƒ¨åˆ†è§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä»¬æœ‰æ—¶éœ€è¦åœ¨æ•°æ®è¡¨ç¤ºä¸­æ”¾ç½®ç´¯åŠ å™¨ï¼Œä»¥åŠå¦‚ä½•æ”¾ç½®å®ƒä»¬ã€‚æœ€åä¸€éƒ¨åˆ†ç»§ç»­è®¨è®ºæ¸²æŸ“åˆ†å½¢ã€‚ '
- en: 33.1Accumulators and Trees[ğŸ”—](#(part._sec~3amore-accu-trees) "Link to here")
  id: totrans-746
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 33.1ç´¯åŠ å™¨å’Œæ ‘[ğŸ”—](#(part._sec~3amore-accu-trees) "é“¾æ¥è‡³æ­¤")
- en: When you ask DrRacket to run an ISL+ program, it translates the program to commands
    for your specific computer. This process is called compilation, and the part of
    DrRacket that performs the task is called a compiler. Before the compiler translates
    the ISL+ program, it checks that every variable is declared via a [define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29),
    a [define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29),
    or a [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29).
  id: totrans-747
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä½ è¯·æ±‚ DrRacket è¿è¡Œä¸€ä¸ª ISL+ ç¨‹åºæ—¶ï¼Œå®ƒå°†ç¨‹åºè½¬æ¢ä¸ºé’ˆå¯¹ä½ ç‰¹å®šè®¡ç®—æœºçš„å‘½ä»¤ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºç¼–è¯‘ï¼Œè€Œæ‰§è¡Œæ­¤ä»»åŠ¡çš„ DrRacket éƒ¨åˆ†ç§°ä¸ºç¼–è¯‘å™¨ã€‚åœ¨ç¼–è¯‘å™¨å°†
    ISL+ ç¨‹åºè½¬æ¢ä¸ºä¹‹å‰ï¼Œå®ƒä¼šæ£€æŸ¥æ¯ä¸ªå˜é‡æ˜¯å¦é€šè¿‡ [define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)ã€[define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)
    æˆ– [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    å£°æ˜ã€‚
- en: Stop! Enter x, ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)  (y)  x),
    and (x  5) as complete ISL+ programs into DrRacket and ask it to run each. What
    do you expect to see?
  id: totrans-748
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼è¾“å…¥ xï¼Œ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    (y) x)ï¼Œä»¥åŠ (x 5) ä½œä¸ºå®Œæ•´çš„ ISL+ ç¨‹åºåˆ° DrRacket ä¸­ï¼Œå¹¶è¯·æ±‚å®ƒè¿è¡Œæ¯ä¸ªç¨‹åºã€‚ä½ æœŸæœ›çœ‹åˆ°ä»€ä¹ˆï¼Ÿ
- en: 'Letâ€™s phrase this idea as a sample problem:'
  id: totrans-749
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å°†è¿™ä¸ªæƒ³æ³•è¡¨è¿°ä¸ºä¸€ä¸ªç¤ºä¾‹é—®é¢˜ï¼š
- en: Sample Problem You have been hired to re-create a part of the ISL+ compiler.
    Specifically, your task deals with the following language fragment, specified
    in the so-called grammar notation that many programming language manuals use:We
    use the Greek letter Î» instead of [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    to signal that this exercise deals with ISL+ as an object of study, not just a
    programming language.
  id: totrans-750
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹é—®é¢˜ï¼šä½ è¢«é›‡ä½£æ¥é‡æ–°åˆ›å»º ISL+ ç¼–è¯‘å™¨çš„ä¸€éƒ¨åˆ†ã€‚å…·ä½“æ¥è¯´ï¼Œä½ çš„ä»»åŠ¡æ¶‰åŠä»¥ä¸‹è¯­è¨€ç‰‡æ®µï¼Œè¯¥ç‰‡æ®µä»¥æ‰€è°“çš„è¯­æ³•è¡¨ç¤ºæ³•æŒ‡å®šï¼Œè¿™æ˜¯è®¸å¤šç¼–ç¨‹è¯­è¨€æ‰‹å†Œä¸­å¸¸ç”¨çš„ï¼šæˆ‘ä»¬ä½¿ç”¨å¸Œè…Šå­—æ¯
    Î» æ¥ä»£æ›¿ [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)ï¼Œä»¥è¡¨æ˜è¿™é¡¹ç»ƒä¹ å°†
    ISL+ ä½œä¸ºç ”ç©¶å¯¹è±¡ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¼–ç¨‹è¯­è¨€ã€‚
- en: ''
  id: totrans-751
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| Â Â expression | Â  | = | Â  | variable |'
  id: totrans-752
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| è¡¨è¾¾å¼ | | = | | å˜é‡ |'
- en: '| Â  | Â  | &#124; | Â  | ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)Â (variable)Â expression)
    |'
  id: totrans-753
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| | | | | ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)
    (å˜é‡) è¡¨è¾¾å¼) |'
- en: '| Â  | Â  | &#124; | Â  | (expressionÂ expression) |'
  id: totrans-754
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| | | | | (è¡¨è¾¾å¼ è¡¨è¾¾å¼) |'
- en: ''
  id: totrans-755
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Remember from intermezzo 1 that you can read the grammar aloud replacing = with
    â€œis one ofâ€ and | with â€œor.â€
  id: totrans-756
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä»é—´å¥æ›² 1 ä¸­è®°ä½ï¼Œä½ å¯ä»¥å¤§å£°æœ—è¯»è¯­æ³•ï¼Œå°† = æ›¿æ¢ä¸ºâ€œæ˜¯ä¹‹ä¸€â€å¹¶å°† | æ›¿æ¢ä¸ºâ€œæˆ–â€ã€‚
- en: ''
  id: totrans-757
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Recall that [Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)
    expressions are functions without names. They bind their parameter in their body.
    Conversely, a variable occurrence is declared by a surrounding [Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)
    that specifies the same name as a parameter. You may wish to revisit [Intermezzo
    3: Scope and Abstraction](i3-4.html) because it deals with the same issue from
    the perspective of a programmer. Look for the terms â€œbinding occurrence,â€ â€œbound
    occurrence,â€ and â€œfree.â€'
  id: totrans-758
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›æƒ³ä¸€ä¸‹ï¼Œ[Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)
    è¡¨è¾¾å¼æ˜¯æ²¡æœ‰åç§°çš„å‡½æ•°ã€‚å®ƒä»¬åœ¨å…¶ä¸»ä½“ä¸­ç»‘å®šå…¶å‚æ•°ã€‚ç›¸åï¼Œä¸€ä¸ªå˜é‡å‡ºç°æ˜¯é€šè¿‡ä¸€ä¸ªå‘¨å›´æŒ‡å®šä¸å‚æ•°ç›¸åŒåç§°çš„ [Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)
    å£°æ˜çš„ã€‚ä½ å¯èƒ½å¸Œæœ›é‡æ–°é˜…è¯»[é—´å¥æ›² 3ï¼šä½œç”¨åŸŸå’ŒæŠ½è±¡](i3-4.html)ï¼Œå› ä¸ºå®ƒä»ç¨‹åºå‘˜çš„è§†è§’å¤„ç†äº†ç›¸åŒçš„é—®é¢˜ã€‚å¯»æ‰¾â€œç»‘å®šå‡ºç°â€ã€â€œå·²ç»‘å®šå‡ºç°â€å’Œâ€œè‡ªç”±â€ç­‰æœ¯è¯­ã€‚
- en: ''
  id: totrans-759
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Develop a data representation for the above language fragment; use symbols to
    represent variables. Then design a function that replaces all undeclared variables
    with '*undeclared.
  id: totrans-760
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä¸ºä¸Šè¿°è¯­è¨€ç‰‡æ®µå¼€å‘ä¸€ä¸ªæ•°æ®è¡¨ç¤ºï¼Œç”¨ç¬¦å·è¡¨ç¤ºå˜é‡ã€‚ç„¶åè®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œå°†æ‰€æœ‰æœªå£°æ˜çš„å˜é‡æ›¿æ¢ä¸º '*undeclaredã€‚
- en: 'This problem is representative of many steps in the translation process and,
    at the same time, is a great case study for accumulator-style functions.Before
    we dive into the problem, letâ€™s look at some examples in this mini-language, recalling
    what we know about [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29):'
  id: totrans-761
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªé—®é¢˜ä»£è¡¨äº†ç¿»è¯‘è¿‡ç¨‹ä¸­çš„è®¸å¤šæ­¥éª¤ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå…³äºç´¯åŠ å™¨é£æ ¼å‡½æ•°çš„ç»ä½³æ¡ˆä¾‹ç ”ç©¶ã€‚åœ¨æˆ‘ä»¬æ·±å…¥æ¢è®¨è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªè¿·ä½ è¯­è¨€ä¸­çš„å‡ ä¸ªä¾‹å­ï¼Œå›é¡¾ä¸€ä¸‹æˆ‘ä»¬å…³äº
    [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    çš„çŸ¥è¯†ï¼š
- en: ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  x)
    is the function that returns whatever it is given, also known as the identity
    function;
  id: totrans-762
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  x)
    æ˜¯ä¸€ä¸ªè¿”å›å®ƒæ‰€æ¥å—ä»»ä½•å†…å®¹çš„å‡½æ•°ï¼Œä¹Ÿç§°ä¸ºæ’ç­‰å‡½æ•°ï¼›
- en: ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  y)
    looks like a function that returns y whenever it is given an argument, except
    that y isnâ€™t declared;
  id: totrans-763
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  y)
    çœ‹èµ·æ¥åƒä¸€ä¸ªå‡½æ•°ï¼Œå½“ç»™å®šä¸€ä¸ªå‚æ•°æ—¶æ€»æ˜¯è¿”å› yï¼Œé™¤äº† y æ²¡æœ‰è¢«å£°æ˜ï¼›
- en: ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (y)  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  y))
    is a function that, when given some value v, produces a function that always returns
    v;
  id: totrans-764
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (y)  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  y))
    æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“ç»™å®šæŸä¸ªå€¼ v æ—¶ï¼Œäº§ç”Ÿä¸€ä¸ªæ€»æ˜¯è¿”å› v çš„å‡½æ•°ï¼›
- en: (([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  x)  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  x))
    applies the identity function to itself;
  id: totrans-765
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  x)  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  x))
    å°†æ’ç­‰å‡½æ•°åº”ç”¨äºè‡ªèº«ï¼›
- en: (([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  (x  x))  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  (x  x)))
    is a short infinite loop; and
  id: totrans-766
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  (x  x))  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  (x  x)))
    æ˜¯ä¸€ä¸ªç®€çŸ­çš„æ— ç©·å¾ªç¯ï¼›å¹¶ä¸”
- en: ((([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (y)  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  y))  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (z)  z))  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (w)  w))
    is a complex expression that is best run in ISL+ to find out whether it terminates.
  id: totrans-767
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ((([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (y)  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  y))  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (z)  z))  ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (w)  w))
    æ˜¯ä¸€ä¸ªå¤æ‚çš„è¡¨è¾¾å¼ï¼Œæœ€å¥½åœ¨ISL+ä¸­è¿è¡Œä»¥ç¡®å®šå®ƒæ˜¯å¦ç»ˆæ­¢ã€‚
- en: Indeed, you can run all of the above ISL+ expressions in DrRacket to confirm
    what is written about them.
  id: totrans-768
  prefs: []
  type: TYPE_NORMAL
  zh: äº‹å®ä¸Šï¼Œä½ å¯ä»¥åœ¨DrRacketä¸­è¿è¡Œä¸Šè¿°æ‰€æœ‰ISL+è¡¨è¾¾å¼æ¥éªŒè¯å®ƒä»¬çš„æè¿°ã€‚
- en: ExerciseÂ 511\. Explain the scope of each binding occurrence in the above examples.
    Draw arrows from the bound to the binding occurrences.
  id: totrans-769
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 511ã€‚è§£é‡Šä¸Šè¿°ç¤ºä¾‹ä¸­æ¯ä¸ªç»‘å®šå‘ç”Ÿçš„èŒƒå›´ã€‚ä»ç»‘å®šåˆ°ç»‘å®šå‘ç”Ÿå¤„ç”»ç®­å¤´ã€‚
- en: 'Developing a data representation for the language is easy, especially because
    its description uses a grammar notation. Here is one possibility:'
  id: totrans-770
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºè¯­è¨€å¼€å‘æ•°æ®è¡¨ç¤ºæ˜¯å®¹æ˜“çš„ï¼Œå°¤å…¶æ˜¯å› ä¸ºå®ƒçš„æè¿°ä½¿ç”¨äº†ä¸€ç§è¯­æ³•ç¬¦å·ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå¯èƒ½æ€§ï¼š
- en: '| ;Â A Lam is one of: |'
  id: totrans-771
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªLamå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“ a [Symbol](i2-3.html#%28tech._symbol%29) |'
  id: totrans-772
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“ ä¸€ä¸ª [Symbol](i2-3.html#%28tech._symbol%29) |'
- en: '| ;Â â€“  ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''Î»  ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [Symbol](i2-3.html#%28tech._symbol%29))  [Lam](#%28tech._lam%29))
    |'
  id: totrans-773
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  ''Î»  ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [Symbol](i2-3.html#%28tech._symbol%29))  [Lam](#%28tech._lam%29))
    |'
- en: '| ;Â â€“  ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [Lam](#%28tech._lam%29)  [Lam](#%28tech._lam%29))
    |'
  id: totrans-774
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  [Lam](#%28tech._lam%29)  [Lam](#%28tech._lam%29))
    |'
- en: 'Because of [quote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29),
    this data representation makes it easy to create data representations for expressions
    in our subset of ISL+:'
  id: totrans-775
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº [quote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)ï¼Œè¿™ç§æ•°æ®è¡¨ç¤ºä½¿å¾—ä¸ºISL+å­é›†ä¸­çš„è¡¨è¾¾å¼åˆ›å»ºæ•°æ®è¡¨ç¤ºå˜å¾—å®¹æ˜“ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ex1Â ''(Î»Â (x)Â x))
    |'
  id: totrans-776
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ex1Â ''(Î»Â (x)Â x))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ex2Â ''(Î»Â (x)Â y))
    |'
  id: totrans-777
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ex2Â ''(Î»Â (x)Â y))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ex3Â ''(Î»Â (y)Â (Î»Â (x)Â y)))
    |'
  id: totrans-778
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ex3Â ''(Î»Â (y)Â (Î»Â (x)Â y)))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ex4Â ''((Î»Â (x)Â (xÂ x))Â (Î»Â (x)Â (xÂ x))))
    |'
  id: totrans-779
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ex4Â ''((Î»Â (x)Â (xÂ x))Â (Î»Â (x)Â (xÂ x))))
    |'
- en: These four data examples are representations of some of the above expressions.
    Stop! Create data representations for the remaining examples.
  id: totrans-780
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å››ä¸ªæ•°æ®ç¤ºä¾‹æ˜¯ä¸Šè¿°ä¸€äº›è¡¨è¾¾å¼çš„è¡¨ç¤ºã€‚åœï¼ä¸ºå‰©ä½™çš„ç¤ºä¾‹åˆ›å»ºæ•°æ®è¡¨ç¤ºã€‚
- en: ExerciseÂ 512\. Define is-var?, is-Î»?, and is-app?, that is, predicates that
    distinguish variables from Î» expressions and applications.
  id: totrans-781
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  512ã€‚å®šä¹‰ is-var?ã€is-Î»? å’Œ is-app?ï¼Œå³åŒºåˆ†å˜é‡å’Œ Î» è¡¨è¾¾å¼ä»¥åŠåº”ç”¨çš„è°“è¯ã€‚
- en: Also define
  id: totrans-782
  prefs: []
  type: TYPE_NORMAL
  zh: è¿˜å®šä¹‰äº†
- en: Î»-para, which extracts the parameter from a Î» expression;
  id: totrans-783
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Î»-paraï¼Œä» Î» è¡¨è¾¾å¼ä¸­æå–å‚æ•°ï¼›
- en: Î»-body, which extracts the body from a Î» expression;
  id: totrans-784
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Î»-bodyï¼Œä» Î» è¡¨è¾¾å¼ä¸­æå–ä¸»ä½“ï¼›
- en: app-fun, which extracts the function from an application; and
  id: totrans-785
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: app-funï¼Œä»åº”ç”¨ä¸­æå–å‡½æ•°ï¼›ä»¥åŠ
- en: app-arg, which extracts the argument from an application.
  id: totrans-786
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: app-argï¼Œä»åº”ç”¨ä¸­æå–å‚æ•°ã€‚
- en: With these predicates and selectors, you basically can act as if you had defined
    a structure-oriented data representation.
  id: totrans-787
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™äº›è°“è¯å’Œé€‰æ‹©å™¨ï¼Œä½ åŸºæœ¬ä¸Šå¯ä»¥åƒå®šä¹‰äº†é¢å‘ç»“æ„çš„æ•°æ®è¡¨ç¤ºä¸€æ ·æ“ä½œã€‚
- en: Design declareds, which produces the list of all symbols used as Î» parameters
    in a Î» term. Donâ€™t worry about duplicate symbols.
  id: totrans-788
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ declaredsï¼Œå®ƒç”Ÿæˆ Î» é¡¹ä¸­ç”¨ä½œ Î» å‚æ•°çš„æ‰€æœ‰ç¬¦å·çš„åˆ—è¡¨ã€‚ä¸ç”¨æ‹…å¿ƒé‡å¤çš„ç¬¦å·ã€‚
- en: ExerciseÂ 513\. Develop a data representation for the same subset of ISL+ that
    uses structures instead of lists. Also provide data representations for ex1, ex2,
    and ex3 following your data definition.
  id: totrans-789
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  513ã€‚ä¸º ISL+ çš„ç›¸åŒå­é›†å¼€å‘ä½¿ç”¨ç»“æ„è€Œä¸æ˜¯åˆ—è¡¨çš„æ•°æ®è¡¨ç¤ºã€‚æ ¹æ®ä½ çš„æ•°æ®å®šä¹‰ï¼Œä¹Ÿä¸º ex1ã€ex2 å’Œ ex3 æä¾›æ•°æ®è¡¨ç¤ºã€‚
- en: 'We follow the structural design recipe, and here is the product of steps two
    and three:'
  id: totrans-790
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éµå¾ªç»“æ„åŒ–è®¾è®¡é…æ–¹ï¼Œä»¥ä¸‹æ˜¯ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥çš„ç»“æœï¼š
- en: '| ;Â [Lam](#%28tech._lam%29) -> [Lam](#%28tech._lam%29) |'
  id: totrans-791
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Lam](#%28tech._lam%29) -> [Lam](#%28tech._lam%29) |'
- en: '| ;Â replaces all symbols s in le with ''*undeclared |'
  id: totrans-792
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°† le ä¸­çš„æ‰€æœ‰ç¬¦å· s æ›¿æ¢ä¸º ''*undeclared |'
- en: '| ;Â if they do not occur within the body of a Î» |'
  id: totrans-793
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœå®ƒä»¬ä¸å‡ºç°åœ¨ Î» çš„ä¸»ä½“ä¸­ |'
- en: '| ;Â expression whose parameter is s |'
  id: totrans-794
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è¡¨è¾¾å¼å‚æ•°ä¸º s |'
- en: '| Â  |'
  id: totrans-795
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (undeclaredsÂ ex1)Â ex1)
    |'
  id: totrans-796
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (undeclaredsÂ ex1)Â ex1)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (undeclaredsÂ ex2)Â ''(Î»Â (x)Â *undeclared))
    |'
  id: totrans-797
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (undeclaredsÂ ex2)Â ''(Î»Â (x)Â *undeclared))
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (undeclaredsÂ ex3)Â ex3)
    |'
  id: totrans-798
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (undeclaredsÂ ex3)Â ex3)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (undeclaredsÂ ex4)Â ex4)
    |'
  id: totrans-799
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (undeclaredsÂ ex4)Â ex4)
    |'
- en: '| Â  |'
  id: totrans-800
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (undeclaredsÂ le0)
    |'
  id: totrans-801
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (undeclaredsÂ le0)
    |'
- en: '| Â Â le0) |'
  id: totrans-802
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â le0) |'
- en: 'Note how we expect undeclareds to process ex4 even though the expression loops
    forever when run; compilers donâ€™t run programs, they read them and create others.A
    close look at the purpose statement directly suggests that the function needs
    an accumulator. This becomes even clearer when we inspect the template for undeclareds:'
  id: totrans-803
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„æˆ‘ä»¬æœŸæœ› undeclareds å¤„ç† ex4ï¼Œå³ä½¿è¡¨è¾¾å¼åœ¨è¿è¡Œæ—¶æ— é™å¾ªç¯ï¼›ç¼–è¯‘å™¨ä¸è¿è¡Œç¨‹åºï¼Œå®ƒä»¬è¯»å–å®ƒä»¬å¹¶åˆ›å»ºå…¶ä»–ç¨‹åºã€‚ä»”ç»†æŸ¥çœ‹ç›®çš„å£°æ˜ç›´æ¥è¡¨æ˜è¯¥å‡½æ•°éœ€è¦ä¸€ä¸ªç´¯åŠ å™¨ã€‚å½“æˆ‘ä»¬æ£€æŸ¥
    undeclareds çš„æ¨¡æ¿æ—¶ï¼Œè¿™ä¸€ç‚¹å˜å¾—æ›´åŠ æ¸…æ™°ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (undeclaredsÂ le)
    |'
  id: totrans-804
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (undeclaredsÂ le)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-805
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(is-var?Â le)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-806
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(is-var?Â le)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [(is-Î»?Â le)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclaredsÂ (Î»-bodyÂ le))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  id: totrans-807
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [(is-Î»?Â le)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclaredsÂ (Î»-bodyÂ le))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
- en: '| Â Â Â Â [(is-app?Â le) |'
  id: totrans-808
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [(is-app?Â le) |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclaredsÂ (app-funÂ le))
    |'
  id: totrans-809
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclaredsÂ (app-funÂ le))
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclaredsÂ (app-argÂ le))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  id: totrans-810
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclaredsÂ (app-argÂ le))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
- en: 'When undeclareds recurs on the body of (the representation of) a Î» expression,
    it forgets (Î»-para  le), the declared variable.So, letâ€™s start with an accumulator-style
    template:'
  id: totrans-811
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æœªå£°æ˜çš„å˜é‡åœ¨Î»è¡¨è¾¾å¼çš„ï¼ˆè¡¨ç¤ºï¼‰ä½“ä¸Šé€’å½’æ—¶ï¼Œå®ƒä¼šå¿˜è®°ï¼ˆÎ»-para  leï¼‰ï¼Œå³å£°æ˜çš„å˜é‡ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬ä»ä¸€ä¸ªç´¯åŠ å™¨é£æ ¼çš„æ¨¡æ¿å¼€å§‹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (undeclaredsÂ le0)
    |'
  id: totrans-812
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (undeclaredsÂ le0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    |'
  id: totrans-813
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    |'
- en: '| Â Â Â Â (;Â [Lam](#%28tech._lam%29) ??? -> [Lam](#%28tech._lam%29) |'
  id: totrans-814
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (;Â [Lam](#%28tech._lam%29) ??? -> [Lam](#%28tech._lam%29) |'
- en: '| Â Â Â Â Â ;Â accumulator  a represents ... |'
  id: totrans-815
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ;Â ç´¯åŠ å™¨  a ä»£è¡¨ ... |'
- en: '| Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (undeclareds/aÂ leÂ a)
    |'
  id: totrans-816
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (undeclareds/aÂ leÂ a)
    |'
- en: '| Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-817
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â [(is-var?Â le)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  id: totrans-818
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â [(is-var?Â le)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â Â Â Â Â Â [(is-Î»?Â le) |'
  id: totrans-819
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â [(is-Î»?Â le) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclareds/aÂ (Î»-bodyÂ le)
    |'
  id: totrans-820
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclareds/aÂ (Î»-bodyÂ le)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â aÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  id: totrans-821
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â aÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
- en: '| Â Â Â Â Â Â Â Â Â [(is-app?Â le) |'
  id: totrans-822
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â [(is-app?Â le) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclareds/aÂ (app-funÂ le)
    |'
  id: totrans-823
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclareds/aÂ (app-funÂ le)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â aÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  id: totrans-824
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    a [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (undeclareds/aÂ (app-argÂ le)
    |'
  id: totrans-825
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    (undeclareds/aÂ (app-argÂ le) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â aÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))])))
    |'
  id: totrans-826
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    a [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))))
    |'
- en: '| Â Â Â Â (undeclareds/aÂ le0Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
  id: totrans-827
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (undeclareds/aÂ le0 [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))))
    |'
- en: 'In this context, we can now formulate an accumulator invariant:'
  id: totrans-828
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸ªèƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åˆ¶å®šç´¯åŠ å™¨çš„ä¸å˜æ€§ï¼š
- en: a represents the list of Î» parameters encountered on the path from the top of
    le0 to the top of le.
  id: totrans-829
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: a ä»£è¡¨ä» le0 çš„é¡¶éƒ¨åˆ° le çš„é¡¶éƒ¨çš„è·¯å¾„ä¸Šé‡åˆ°çš„ Î» å‚æ•°åˆ—è¡¨ã€‚
- en: For example, if le0 is
  id: totrans-830
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œå¦‚æœ le0 æ˜¯
- en: '''(((Î»Â (y)Â ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  y))Â (Î»Â (z)Â z))Â (Î»Â (w)Â w))'
  id: totrans-831
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '''(((Î»Â (y)Â ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)  (x)  y))Â (Î»Â (z)Â z))Â (Î»Â (w)Â w))'
- en: and le is the highlighted subtree, then a contains y. The left side of [figureÂ 186](#%28counter._%28figure._fig~3alam-tree%29%29)
    presents a graphical illustration of the same example. It shows a [Lam](#%28tech._lam%29)
    expression as an upside-down tree; that is, the root is at the top. An @ node
    represents an application with two descendants; the other nodes are self-explanatory.
    In this tree diagram, the bold path leads from le0 to le through a single variable
    declaration.Similarly, if we pick a different subtree of the same piece of data,
  id: totrans-832
  prefs: []
  type: TYPE_NORMAL
  zh: le æ˜¯é«˜äº®çš„å­æ ‘ï¼Œé‚£ä¹ˆ a åŒ…å« yã€‚å›¾Â 186 çš„å·¦ä¾§å±•ç¤ºäº†ç›¸åŒç¤ºä¾‹çš„å›¾å½¢è¯´æ˜ã€‚å®ƒæ˜¾ç¤ºäº†ä¸€ä¸ª [Lam](#%28tech._lam%29) è¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªå€’ç½®çš„æ ‘ï¼›å³æ ¹åœ¨é¡¶éƒ¨ã€‚@
    èŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªæœ‰ä¸¤ä¸ªåä»£çš„å‡½æ•°åº”ç”¨ï¼›å…¶ä»–èŠ‚ç‚¹è§£é‡Šå¦‚ä¸‹ã€‚åœ¨è¿™ä¸ªæ ‘å›¾ä¸­ï¼Œç²—ä½“è·¯å¾„é€šè¿‡å•ä¸ªå˜é‡å£°æ˜ä» le0 åˆ° leã€‚åŒæ ·ï¼Œå¦‚æœæˆ‘ä»¬é€‰æ‹©åŒä¸€æ•°æ®å—çš„ä¸åŒå­æ ‘ï¼Œ
- en: '''(((Î»Â (y)Â (Î»Â (x)Â y))Â (Î»Â (z)Â z))Â (Î»Â (w)Â w))'
  id: totrans-833
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '''(((Î»Â (y)Â (Î»Â (x)Â y))Â (Î»Â (z)Â z))Â (Î»Â (w)Â w))'
- en: we get an accumulator that contains both 'y and 'x. The right side of [figureÂ 186](#%28counter._%28figure._fig~3alam-tree%29%29)
    makes this point again. Here the bold path leads through two 'Î» nodes to the boxed
    subtree, and the accumulator is the list of declared variables along the bold
    path.
  id: totrans-834
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªåŒ…å« 'y å’Œ 'x çš„ç´¯åŠ å™¨ã€‚å›¾Â 186 çš„å³ä¾§å†æ¬¡è¯´æ˜äº†è¿™ä¸€ç‚¹ã€‚åœ¨è¿™é‡Œï¼Œç²—ä½“è·¯å¾„é€šè¿‡ä¸¤ä¸ª 'Î» èŠ‚ç‚¹åˆ°è¾¾æ¡†ä½çš„å­æ ‘ï¼Œç´¯åŠ å™¨æ˜¯æ²¿ç€ç²—ä½“è·¯å¾„å£°æ˜çš„å˜é‡åˆ—è¡¨ã€‚
- en: '![image](../Images/89e19d71adf5622a85eebdf60ebc7fae.png) Â Â Â Â Â Â Â Â Â Â  ![image](../Images/94eb3a0d4d95c808454d82af78335146.png)'
  id: totrans-835
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/89e19d71adf5622a85eebdf60ebc7fae.png) ![image](../Images/94eb3a0d4d95c808454d82af78335146.png)'
- en: ''
  id: totrans-836
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 186: [Lam](#%28tech._lam%29) terms as trees'
  id: totrans-837
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'å›¾Â 186: [Lam](#%28tech._lam%29) é¡¹ä½œä¸ºæ ‘'
- en: 'Now that we have settled on the data representation of the accumulator and
    its invariant, we can resolve the remaining design questions:'
  id: totrans-838
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»ç¡®å®šäº†ç´¯åŠ å™¨çš„æ•°æ®è¡¨ç¤ºåŠå…¶ä¸å˜æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è§£å†³å‰©ä½™çš„è®¾è®¡é—®é¢˜ï¼š
- en: We pick an initial accumulator value of '().
  id: totrans-839
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é€‰æ‹©åˆå§‹ç´¯åŠ å™¨å€¼ä¸º '().
- en: We use [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    to add (Î»-para  le) to a.
  id: totrans-840
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½¿ç”¨ [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    å°† (Î»-para  le) æ·»åŠ åˆ° aã€‚
- en: We exploit the accumulator for the clause where undeclareds/a deals with a variable.
    Specifically, the function uses the accumulator to check whether the variable
    is in the scope of a declaration.
  id: totrans-841
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬åˆ©ç”¨ç´¯åŠ å™¨å¤„ç† undeclareds/a å¤„ç†å˜é‡çš„å­å¥ã€‚å…·ä½“æ¥è¯´ï¼Œè¯¥å‡½æ•°ä½¿ç”¨ç´¯åŠ å™¨æ¥æ£€æŸ¥å˜é‡æ˜¯å¦åœ¨å£°æ˜çš„èŒƒå›´å†…ã€‚
- en: '[FigureÂ 187](#%28counter._%28figure._fig~3aundeclareds%29%29) shows how to
    translate these ideas into a complete function definition. Note the name declareds
    for the accumulator; it brings across the key idea behind the accumulator invariant,
    helping the programmer understand the definition. The base case uses [member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)
    from ISL+ to determine whether the variable le is in declareds and, if not, replaces
    it with ''*undeclared. The second [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    clause uses a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    to introduce the extended accumulator newd. Because para is also used to rebuild
    the expression, it has its own local definition. Finally, the last clause concerns
    function applications, which do not declare variables and do not use any directly.
    As a result, it is by far the simplest of the three clauses.'
  id: totrans-842
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾187](#%28counter._%28figure._fig~3aundeclareds%29%29) å±•ç¤ºäº†å¦‚ä½•å°†è¿™äº›æƒ³æ³•è½¬åŒ–ä¸ºå®Œæ•´çš„å‡½æ•°å®šä¹‰ã€‚æ³¨æ„ç´¯åŠ å™¨åç§°
    declaredsï¼›å®ƒä¼ è¾¾äº†ç´¯åŠ å™¨ä¸å˜é‡çš„å…³é”®æ€æƒ³ï¼Œæœ‰åŠ©äºç¨‹åºå‘˜ç†è§£å®šä¹‰ã€‚åŸºæœ¬æ¡ˆä¾‹ä½¿ç”¨ [member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)
    ä» ISL+ æ¥ç¡®å®šå˜é‡ le æ˜¯å¦åœ¨ declareds ä¸­ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ç”¨ ''*undeclared æ›¿æ¢å®ƒã€‚ç¬¬äºŒä¸ª [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    å­å¥ä½¿ç”¨ä¸€ä¸ª [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    æ¥å¼•å…¥æ‰©å±•ç´¯åŠ å™¨ newdã€‚å› ä¸º para ä¹Ÿç”¨äºé‡å»ºè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®ƒæœ‰è‡ªå·±çš„å±€éƒ¨å®šä¹‰ã€‚æœ€åï¼Œæœ€åä¸€ä¸ªå­å¥æ¶‰åŠå‡½æ•°åº”ç”¨ï¼Œå®ƒä¸å£°æ˜å˜é‡ä¹Ÿä¸ç›´æ¥ä½¿ç”¨ä»»ä½•å˜é‡ã€‚å› æ­¤ï¼Œå®ƒæ˜¯ä¸‰ä¸ªå­å¥ä¸­æœ€ç®€å•çš„ã€‚'
- en: '| ;Â [Lam](#%28tech._lam%29) -> [Lam](#%28tech._lam%29) |'
  id: totrans-843
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [Lam](#%28tech._lam%29) -> [Lam](#%28tech._lam%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (undeclaredsÂ le0)
    |'
  id: totrans-844
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (æœªå£°æ˜çš„le0) |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [Lam](#%28tech._lam%29)
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Symbol](i2-3.html#%28tech._symbol%29)]
    -> [Lam](#%28tech._lam%29) |'
  id: totrans-845
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (; [Lam](#%28tech._lam%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Symbol](i2-3.html#%28tech._symbol%29)]
    -> [Lam](#%28tech._lam%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â accumulator  declareds is a list of all Î» |'
  id: totrans-846
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; ç´¯åŠ å™¨ declareds æ˜¯æ‰€æœ‰ Î» çš„åˆ—è¡¨ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â parameters on the path from le0 to le |'
  id: totrans-847
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| å‚æ•°ä»le0åˆ°leè·¯å¾„ä¸Šçš„å‚æ•° |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (undeclareds/aÂ leÂ declareds)
    |'
  id: totrans-848
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (undeclareds/a le declareds) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-849
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [(is-var?Â le) |'
  id: totrans-850
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [(is-var? le) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)Â leÂ declareds)Â leÂ ''*undeclared)]
    |'
  id: totrans-851
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)
    ([member?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member~3f%29%29)
    le declareds) le ''*undeclared)] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [(is-Î»?Â le) |'
  id: totrans-852
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [(is-Î»? le) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â paraÂ (Î»-paraÂ le))
    |'
  id: totrans-853
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â paraÂ (Î»-paraÂ le))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â bodyÂ (Î»-bodyÂ le))
    |'
  id: totrans-854
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â bodyÂ (Î»-bodyÂ le))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â newdÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â paraÂ declareds)))
    |'
  id: totrans-855
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â newdÂ ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â paraÂ declareds)))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ''Î»Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â para)
    |'
  id: totrans-856
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ''Î»Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â para)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (undeclareds/aÂ bodyÂ newd)))] |'
  id: totrans-857
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (undeclareds/aÂ bodyÂ newd)))] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [(is-app?Â le) |'
  id: totrans-858
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [(is-app?Â le) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â funÂ (app-funÂ le))
    |'
  id: totrans-859
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â funÂ (app-funÂ le))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â argÂ (app-argÂ le)))
    |'
  id: totrans-860
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â argÂ (app-argÂ le)))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â (undeclareds/aÂ funÂ declareds)
    |'
  id: totrans-861
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â (undeclareds/aÂ funÂ declareds)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (undeclareds/aÂ argÂ declareds)))]))) |'
  id: totrans-862
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (undeclareds/aÂ argÂ declareds)))]))) |'
- en: '| Â Â Â Â (undeclareds/aÂ le0Â ''()))) |'
  id: totrans-863
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (undeclareds/aÂ le0Â ''()))) |'
- en: ''
  id: totrans-864
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 187: Finding undeclared variables'
  id: totrans-865
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾Â 187ï¼šæŸ¥æ‰¾æœªå£°æ˜çš„å˜é‡
- en: ExerciseÂ 514\. Make up an ISL+ expression in which x occurs both free and bound.
    Formulate it as an element of [Lam](#%28tech._lam%29). Does undeclareds work properly
    on your expression?
  id: totrans-866
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ Â 514ï¼æ„é€ ä¸€ä¸ªISL+è¡¨è¾¾å¼ï¼Œå…¶ä¸­xåŒæ—¶å‡ºç°ä¸ºè‡ªç”±å˜é‡å’Œç»‘å®šå˜é‡ã€‚å°†å…¶ä½œä¸º[Lam](#%28tech._lam%29)çš„ä¸€ä¸ªå…ƒç´ æ¥è¡¨è¿°ã€‚undeclaredsåœ¨ä½ çš„è¡¨è¾¾å¼ä¸­å·¥ä½œæ­£å¸¸å—ï¼Ÿ
- en: 'ExerciseÂ 515\. Consider the following expression:'
  id: totrans-867
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ Â 515ï¼è€ƒè™‘ä»¥ä¸‹è¡¨è¾¾å¼ï¼š
- en: ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)Â (*undeclared)Â (([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)Â (x)Â (xÂ *undeclared))Â y))
  id: totrans-868
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)Â (*undeclared)Â (([Î»](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~ce~bb%29%29)Â (x)Â (xÂ *undeclared))Â y))
- en: Yes, it uses *undeclared as a variable. Represent it in [Lam](#%28tech._lam%29)
    and check what undeclareds produces for this expression.Modify undeclareds so
    that it replaces a free occurrence of 'x with
  id: totrans-869
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¯çš„ï¼Œå®ƒä½¿ç”¨*æœªå£°æ˜çš„å˜é‡ä½œä¸ºå˜é‡ã€‚ç”¨[Lam](#%28tech._lam%29)è¡¨ç¤ºå®ƒï¼Œå¹¶æ£€æŸ¥undeclaredså¯¹æ­¤è¡¨è¾¾å¼çš„è¾“å‡ºã€‚ä¿®æ”¹undeclaredsï¼Œä½¿å…¶å°†'xçš„è‡ªç”±å‡ºç°æ›¿æ¢ä¸º
- en: ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â '*undeclaredÂ 'x)
  id: totrans-870
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â '*undeclaredÂ 'x)
- en: and a bound one 'y with
  id: totrans-871
  prefs: []
  type: TYPE_NORMAL
  zh: å’Œä¸€ä¸ªç»‘å®šå˜é‡ 'yã€‚
- en: ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â '*declaredÂ 'y)
  id: totrans-872
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â '*declaredÂ 'x)
- en: Doing so unambiguously identifies problem spots, which a program development
    environment such as DrRacket can use to highlight errors.
  id: totrans-873
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ ·åšå¯ä»¥æ˜ç¡®åœ°è¯†åˆ«é—®é¢˜ç‚¹ï¼Œç¨‹åºå¼€å‘ç¯å¢ƒï¼ˆå¦‚ DrRacketï¼‰å¯ä»¥ä½¿ç”¨è¿™äº›ç‚¹æ¥çªå‡ºæ˜¾ç¤ºé”™è¯¯ã€‚
- en: Note The trick of replacing a variable occurrence with the representation of
    an application feels awkward. If you dislike it, consider synthesizing the symbols
    '*undeclared:x and 'declared:y instead.
  id: totrans-874
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼šå°†å˜é‡å‡ºç°æ›¿æ¢ä¸ºåº”ç”¨è¡¨ç¤ºçš„æŠ€å·§æ„Ÿè§‰æœ‰äº›ç¬¨æ‹™ã€‚å¦‚æœä½ ä¸å–œæ¬¢å®ƒï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¬¦å· '*undeclared:x å’Œ 'declared:y ä»£æ›¿ã€‚
- en: ExerciseÂ 516\. Redesign the undeclareds function for the structure-based data
    representation from [exerciseÂ 513](#%28counter._%28exercise._ex~3afree-bound-dd0%29%29).
  id: totrans-875
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  516. é‡æ–°è®¾è®¡åŸºäºç»“æ„çš„è¡¨ç¤ºå½¢å¼çš„æœªå£°æ˜å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥è‡ª [ç»ƒä¹  513](#%28counter._%28exercise._ex~3afree-bound-dd0%29%29)ã€‚
- en: '![image](../Images/735e00896b758e5026c91977c6194f18.png) Â Â Â Â Â Â Â Â Â Â  ![image](../Images/dbf625348840aca6825fb3d8115abae5.png)'
  id: totrans-876
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/735e00896b758e5026c91977c6194f18.png) ![image](../Images/dbf625348840aca6825fb3d8115abae5.png)'
- en: ''
  id: totrans-877
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 188: Static distances'
  id: totrans-878
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 188ï¼šé™æ€è·ç¦»
- en: ExerciseÂ 517\. Design static-distance. The function replaces all occurrences
    of variables with a natural number that represents how far away the declaring
    Î» is. [FigureÂ 188](#%28counter._%28figure._fig~3asd%29%29) illustrates the idea
    for the term
  id: totrans-879
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  517. è®¾è®¡é™æ€è·ç¦»å‡½æ•°ã€‚è¯¥å‡½æ•°å°†æ‰€æœ‰å˜é‡æ›¿æ¢ä¸ºè¡¨ç¤ºå£°æ˜ Î» è·ç¦»çš„è‡ªç„¶æ•°ã€‚[å›¾ 188](#%28counter._%28figure._fig~3asd%29%29)
    è¯´æ˜äº†è¯¥æœ¯è¯­çš„æ¦‚å¿µã€‚
- en: '''((Î»Â (x)Â ((Î»Â (y)Â (yÂ x))Â x))Â (Î»Â (z)Â z))'
  id: totrans-880
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '''((Î»Â (x)Â ((Î»Â (y)Â (yÂ x))Â x))Â (Î»Â (z)Â z))'
- en: in graphical form. It includes dotted arrows that point from variable occurrences
    to the corresponding variable declarations. On the right, the figure shows a tree
    of the same shape, though without the arrows. The 'Î» nodes come without names,
    and variable occurrences have been replaced by natural numbers that specify which
    'Î» declares the variable. Each natural number n says that the binding occurrence
    is n steps upwardâ€”<wbr>toward the root of the [Lam](#%28tech._lam%29) tree. A
    value of 0 denotes the first 'Î» on the path to the root, 1 the second one, and
    so on.
  id: totrans-881
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥å›¾å½¢å½¢å¼è¡¨ç¤ºã€‚å®ƒåŒ…æ‹¬ä»å˜é‡å‡ºç°æŒ‡å‘ç›¸åº”å˜é‡å£°æ˜çš„è™šçº¿ç®­å¤´ã€‚åœ¨å³ä¾§ï¼Œè¯¥å›¾æ˜¾ç¤ºäº†ç›¸åŒå½¢çŠ¶çš„æ ‘ï¼Œä½†æ²¡æœ‰ç®­å¤´ã€‚'Î» èŠ‚ç‚¹æ²¡æœ‰åç§°ï¼Œå˜é‡å‡ºç°å·²è¢«æ›¿æ¢ä¸ºè‡ªç„¶æ•°ï¼ŒæŒ‡å®šå“ªä¸ª
    'Î» å£°æ˜äº†å˜é‡ã€‚æ¯ä¸ªè‡ªç„¶æ•° n è¡¨ç¤ºç»‘å®šå‡ºç°å‘ä¸Šï¼ˆ<wbr>æœå‘ Lam æ ‘çš„æ ¹ï¼‰çš„æ­¥éª¤æ•°ã€‚å€¼ä¸º 0 è¡¨ç¤ºæ ¹è·¯å¾„ä¸Šçš„ç¬¬ä¸€ä¸ª 'Î»ï¼Œ1 è¡¨ç¤ºç¬¬äºŒä¸ªï¼Œä¾æ­¤ç±»æ¨ã€‚
- en: Hint The undeclareds accumulator of undeclareds/a is a list of all parameters
    on path from le to le0 in reverse orderâ€”<wbr>the last one seen is first on the
    list.
  id: totrans-882
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼šæœªå£°æ˜ç´¯ç§¯å™¨ undeclareds/a æ˜¯ä» le åˆ° le0 çš„è·¯å¾„ä¸Šæ‰€æœ‰å‚æ•°çš„åˆ—è¡¨ï¼Œé¡ºåºç›¸åâ€”â€”æœ€åçœ‹åˆ°çš„å‚æ•°æ’åœ¨åˆ—è¡¨çš„æœ€å‰é¢ã€‚
- en: 33.2Data Representations with Accumulators[ğŸ”—](#(part._sec~3amore-accu-mc) "Link
    to here")
  id: totrans-883
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 33.2 å¸¦ç´¯ç§¯å™¨çš„æ•°æ®è¡¨ç¤º[ğŸ”—](#(part._sec~3amore-accu-mc) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'The end of [Intermezzo 5: The Cost of Computation](i5-6.html) explains that
    *SL measures the size of containers, say lists, by traversing them and hints that
    other programming languages use a different,See [Finite State Machines](part_two.html#%28part._sec~3asec-fsm-list%29)
    for an early example of this idea. less expensive way, to compute sizes. In this
    section, we show how to implement this idea with the addition of an accumulator
    to data representations.'
  id: totrans-884
  prefs: []
  type: TYPE_NORMAL
  zh: '[ç¬¬äº”éƒ¨åˆ†ï¼šè®¡ç®—æˆæœ¬](i5-6.html) çš„ç»“å°¾è§£é‡Šäº† *SL é€šè¿‡éå†å®¹å™¨ï¼ˆå¦‚åˆ—è¡¨ï¼‰æ¥è¡¡é‡å®¹å™¨çš„å¤§å°ï¼Œå¹¶æš—ç¤ºå…¶ä»–ç¼–ç¨‹è¯­è¨€ä½¿ç”¨ä¸åŒçš„ã€æ›´ç»æµçš„æ–¹æ³•æ¥è®¡ç®—å¤§å°ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•é€šè¿‡å‘æ•°æ®è¡¨ç¤ºæ·»åŠ ç´¯ç§¯å™¨æ¥å®ç°è¿™ä¸€æƒ³æ³•ã€‚'
- en: Consider the ubiquitous lists in *SL. All lists are constructed from [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    and '(); operations such as [quote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)
    and [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29),
    for example, are merely abbreviations for these two. As [What Is '(), What Is
    cons](part_two.html#%28part._sec~3alists-cons%29) shows, it is also possible to
    mimic lists in BSL with suitable structure type and function definitions.
  id: totrans-885
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘åœ¨ *SL* ä¸­æ— å¤„ä¸åœ¨çš„åˆ—è¡¨ã€‚æ‰€æœ‰åˆ—è¡¨éƒ½æ˜¯ç”± [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    å’Œ '(); æ“ä½œæ„å»ºçš„ï¼Œä¾‹å¦‚ï¼Œ[quote](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._quote%29%29)
    å’Œ [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    ç­‰æ“ä½œåªæ˜¯è¿™ä¸¤ä¸ªçš„ç¼©å†™ã€‚æ­£å¦‚ [ä»€ä¹ˆæ˜¯ '(), ä»€ä¹ˆæ˜¯ cons](part_two.html#%28part._sec~3alists-cons%29)
    æ‰€ç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€‚å½“çš„ç»“æ„ç±»å‹å’Œå‡½æ•°å®šä¹‰åœ¨ BSL ä¸­æ¨¡æ‹Ÿåˆ—è¡¨ã€‚
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â pairÂ [leftÂ right])
    |'
  id: totrans-886
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)
    pair [left right]) |'
- en: '| ;Â ConsOrEmpty is one of: |'
  id: totrans-887
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; ConsOrEmpty æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“  ''() |'
  id: totrans-888
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; â€“ ''() |'
- en: '| ;Â â€“  (make-pair  [Any](part_one.html#%28tech._any%29)  [ConsOrEmpty](part_two.html#%28tech._consorempty%29))
    |'
  id: totrans-889
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; â€“ (make-pair [Any](part_one.html#%28tech._any%29) [ConsOrEmpty](part_two.html#%28tech._consorempty%29))
    |'
- en: '| Â  |'
  id: totrans-890
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â [...]) |'
- en: '| ;Â [Any](part_one.html#%28tech._any%29)  [ConsOrEmpty](part_two.html#%28tech._consorempty%29)
    -> [ConsOrEmpty](part_two.html#%28tech._consorempty%29) |'
  id: totrans-891
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; [Any](part_one.html#%28tech._any%29) [ConsOrEmpty](part_two.html#%28tech._consorempty%29)
    -> [ConsOrEmpty](part_two.html#%28tech._consorempty%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (our-consÂ a-valueÂ a-list)
    |'
  id: totrans-892
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (our-cons a-value a-list) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-893
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â a-list)Â (make-pairÂ a-valueÂ a-list)]
    |'
  id: totrans-894
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â ([([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    a-list) (make-pair a-value a-list)] |'
- en: '| Â Â Â Â [(pair?Â a-list)Â (make-pairÂ a-valueÂ a-list)] |'
  id: totrans-895
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â [(pair? a-list) (make-pair a-value a-list)] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "our-cons:
    ...")])) |'
  id: totrans-896
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)
    "our-cons: ...")])) |'
- en: '| Â  |'
  id: totrans-897
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â [ConsOrEmpty](part_two.html#%28tech._consorempty%29) -> [Any](part_one.html#%28tech._any%29)
    |'
  id: totrans-898
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; [ConsOrEmpty](part_two.html#%28tech._consorempty%29) -> [Any](part_one.html#%28tech._any%29)
    |'
- en: '| ;Â extracts the left part of the given pair |'
  id: totrans-899
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; æå–ç»™å®šå¯¹çš„å·¦ä¾§éƒ¨åˆ† |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (our-firstÂ mimicked-list)
    |'
  id: totrans-900
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (our-first mimicked-list) |'
- en: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â mimicked-list)
    |'
  id: totrans-901
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)
    ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    mimicked-list) |'
- en: '| Â Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "our-first:
    ...") |'
  id: totrans-902
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "our-first:
    ...") |'
- en: '| Â Â Â Â Â Â (pair-leftÂ mimicked-list))) |'
  id: totrans-903
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â (pair-leftÂ mimicked-list))) |'
- en: ''
  id: totrans-904
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 189: An implementation of lists in BSL'
  id: totrans-905
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 189ï¼šBSL ä¸­åˆ—è¡¨çš„å®ç°
- en: '[FigureÂ 189](#%28counter._%28figure._fig~3acons-recall%29%29) recalls the basic
    idea. Stop! Can you define our-rest now?'
  id: totrans-906
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾ 189](#%28counter._%28figure._fig~3acons-recall%29%29) å›é¡¾äº†åŸºæœ¬æ€æƒ³ã€‚åœï¼ä½ ç°åœ¨èƒ½å®šä¹‰æˆ‘ä»¬çš„-rest
    å—ï¼Ÿ'
- en: 'The key insight is that we can add a third field to the structure type definition
    of pair:'
  id: totrans-907
  prefs: []
  type: TYPE_NORMAL
  zh: å…³é”®çš„æ´å¯Ÿæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¹ pair çš„ç»“æ„ç±»å‹å®šä¹‰ä¸­æ·»åŠ ç¬¬ä¸‰ä¸ªå­—æ®µï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â cpairÂ [countÂ leftÂ right])
    |'
  id: totrans-908
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â cpairÂ [countÂ leftÂ right])
    |'
- en: '| ;Â A [MyList X] is one of: |'
  id: totrans-909
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ª [MyList X] æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“  ''() |'
  id: totrans-910
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  (make-cpair  (tech  "N")  X  [[MyList](#%28tech._mylist%29)  X]) |'
  id: totrans-911
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  (make-cpair  (tech  "N")  X  [[MyList](#%28tech._mylist%29)  X]) |'
- en: '| ;Â accumulator the count field is the number of cpairs |'
  id: totrans-912
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç´¯åŠ å™¨ï¼Œè®¡æ•°å­—æ®µæ˜¯ cpair çš„æ•°é‡ |'
- en: 'As the accumulator statement says, the extra field is used to keep track of
    the number of cpair instances used to create the list. That is, it remembers a
    fact about the construction of the list. We call this kind of structure field
    a data accumulator.Adding a field to the major list constructor does not come
    for free. To begin with, it requires a change to the checked version of the constructor,
    the one that is actually available to programs:'
  id: totrans-913
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚ç´¯åŠ å™¨è¯­å¥æ‰€è¿°ï¼Œé¢å¤–å­—æ®µç”¨äºè·Ÿè¸ªåˆ›å»ºåˆ—è¡¨æ‰€ä½¿ç”¨çš„ cpair å®ä¾‹çš„æ•°é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒè®°å½•äº†å…³äºåˆ—è¡¨æ„å»ºçš„äº‹å®ã€‚æˆ‘ä»¬ç§°è¿™ç§ç»“æ„å­—æ®µä¸ºæ•°æ®ç´¯åŠ å™¨ã€‚å‘ä¸»è¦åˆ—è¡¨æ„é€ å‡½æ•°æ·»åŠ å­—æ®µå¹¶éå…è´¹ã€‚é¦–å…ˆï¼Œå®ƒéœ€è¦æ›´æ”¹æ„é€ å‡½æ•°çš„æ£€æŸ¥ç‰ˆæœ¬ï¼Œå³ç¨‹åºå®é™…å¯ç”¨çš„ç‰ˆæœ¬ï¼š
- en: '| ;Â data definitions, via a constructor-function |'
  id: totrans-914
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ•°æ®å®šä¹‰ï¼Œé€šè¿‡æ„é€ å‡½æ•° |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (our-consÂ fÂ r)
    |'
  id: totrans-915
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (our-consÂ fÂ r)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-916
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â r)Â (make-cpairÂ 1Â fÂ r)]
    |'
  id: totrans-917
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â r)Â (make-cpairÂ 1Â fÂ r)]
    |'
- en: '| Â Â Â Â [(cpair?Â r)Â (make-cpairÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (cpair-countÂ r)Â 1)Â fÂ r)]
    |'
  id: totrans-918
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(cpair?Â r)Â (make-cpairÂ ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â (cpair-countÂ r)Â 1)Â fÂ r)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "our-cons:
    ...")])) |'
  id: totrans-919
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "our-cons:
    ...")])) |'
- en: 'If the extended list is ''(), count is populated with 1; otherwise, the function
    computes the length from the given cpair.Now the function definition for our-length
    is obvious:'
  id: totrans-920
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‰©å±•åˆ—è¡¨æ˜¯ '()ï¼Œè®¡æ•°è¢«å¡«å……ä¸º 1ï¼›å¦åˆ™ï¼Œå‡½æ•°ä»ç»™å®šçš„ cpair è®¡ç®—é•¿åº¦ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬çš„-length å‡½æ•°çš„å®šä¹‰å¾ˆæ˜æ˜¾ï¼š
- en: '| ;Â [Any](part_one.html#%28tech._any%29) -> [N](part_two.html#%28tech._n%29)
    |'
  id: totrans-921
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Any](part_one.html#%28tech._any%29) -> [N](part_two.html#%28tech._n%29)
    |'
- en: '| ;Â how many items does l contain |'
  id: totrans-922
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â l åŒ…å«å¤šå°‘é¡¹ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (our-lengthÂ l)
    |'
  id: totrans-923
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (our-lengthÂ l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-924
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â 0]
    |'
  id: totrans-925
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â 0]
    |'
- en: '| Â Â Â Â [(cpair?Â l)Â (cpair-countÂ l)] |'
  id: totrans-926
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [(cpair?Â l)Â (cpair-countÂ l)] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "my-length:
    ...")])) |'
  id: totrans-927
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "my-length:
    ...")])) |'
- en: The function consumes any kind of value. For '() and instances of cpair, it
    produces natural numbers; otherwise it signals an error.
  id: totrans-928
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥å‡½æ•°æ¶ˆè€—ä»»ä½•ç±»å‹çš„å€¼ã€‚å¯¹äºç©ºåˆ—è¡¨å’Œ cpair çš„å®ä¾‹ï¼Œå®ƒäº§ç”Ÿè‡ªç„¶æ•°ï¼›å¦åˆ™ï¼Œå®ƒå‘å‡ºé”™è¯¯ä¿¡å·ã€‚
- en: The second problem with the addition of a count field concerns performance.
    Indeed, there are two concerns. On the one hand, every single list construction
    comes with an extra field now, meaning a 33% increase in memory consumption. On
    the other hand, the addition of the field decreases how fast our-cons constructs
    a list. In addition to the check that the extended list is either '() or an instance
    of a cpair, the constructor now computes the size of the list. Although this computation
    consumes a constant amount of time, it is imposed on every single use of our-consâ€”<wbr>and
    just think how many times this book uses [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    and does not ever compute how long the resulting list is!
  id: totrans-929
  prefs: []
  type: TYPE_NORMAL
  zh: æ·»åŠ è®¡æ•°å­—æ®µçš„é—®é¢˜ä¹‹äºŒæ¶‰åŠæ€§èƒ½ã€‚ç¡®å®ï¼Œæœ‰ä¸¤ä¸ªæ‹…å¿§ã€‚ä¸€æ–¹é¢ï¼Œç°åœ¨æ¯ä¸ªåˆ—è¡¨æ„é€ éƒ½é™„å¸¦ä¸€ä¸ªé¢å¤–çš„å­—æ®µï¼Œè¿™æ„å‘³ç€å†…å­˜æ¶ˆè€—å¢åŠ äº† 33%ã€‚å¦ä¸€æ–¹é¢ï¼Œå­—æ®µçš„æ·»åŠ é™ä½äº†æˆ‘ä»¬çš„-cons
    æ„é€ åˆ—è¡¨çš„é€Ÿåº¦ã€‚é™¤äº†æ£€æŸ¥æ‰©å±•åˆ—è¡¨æ˜¯ç©ºåˆ—è¡¨æˆ– cpair çš„å®ä¾‹ä¹‹å¤–ï¼Œæ„é€ å‡½æ•°ç°åœ¨è¿˜è®¡ç®—åˆ—è¡¨çš„å¤§å°ã€‚å°½ç®¡è¿™ç§è®¡ç®—æ¶ˆè€—äº†å¸¸æ•°æ—¶é—´ï¼Œä½†å®ƒè¢«æ–½åŠ åœ¨æ¯æ¬¡ä½¿ç”¨æˆ‘ä»¬çš„-cons
    ä¸Šâ€”â€”<wbr>æƒ³æƒ³è¿™æœ¬ä¹¦æœ‰å¤šå°‘æ¬¡ä½¿ç”¨ [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    è€Œä¸”ä»æœªè®¡ç®—è¿‡ç»“æœåˆ—è¡¨çš„é•¿åº¦ï¼
- en: ExerciseÂ 518\. Argue that our-cons takes a constant amount of time to compute
    its result, regardless of the size of its input.
  id: totrans-930
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  518. è¯æ˜æˆ‘ä»¬çš„-cons è®¡ç®—å…¶ç»“æœæ‰€éœ€çš„æ—¶é—´æ˜¯å¸¸æ•°ï¼Œæ— è®ºå…¶è¾“å…¥çš„å¤§å°å¦‚ä½•ã€‚
- en: ExerciseÂ 519\. Is it acceptable to impose the extra cost on [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    for all programs to turn length into a constant-time function?
  id: totrans-931
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  519. æ˜¯å¦å¯ä»¥å¯¹æ‰€æœ‰ç¨‹åºæ–½åŠ é¢å¤–çš„æˆæœ¬ï¼Œå°† [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    è½¬æ¢ä¸ºå¸¸æ•°æ—¶é—´å‡½æ•°ï¼Ÿ
- en: While the addition of a count field to lists is questionable, sometimes data
    accumulators play a crucial role in finding a solution. The next example is about
    adding so-called artificial intelligence to a board-game-playing program, and
    its data accumulator is an absolute necessity.
  id: totrans-932
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶åœ¨åˆ—è¡¨ä¸­æ·»åŠ è®¡æ•°å­—æ®µæ˜¯æœ‰ç–‘é—®çš„ï¼Œä½†æœ‰æ—¶æ•°æ®ç´¯åŠ å™¨åœ¨å¯»æ‰¾è§£å†³æ–¹æ¡ˆä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚ä¸‹ä¸€ä¸ªä¾‹å­æ˜¯å‘ä¸€ä¸ªæ£‹ç›˜æ¸¸æˆç¨‹åºæ·»åŠ æ‰€è°“çš„â€œäººå·¥æ™ºèƒ½â€ï¼Œè€Œå…¶æ•°æ®ç´¯åŠ å™¨æ˜¯ç»å¯¹å¿…è¦çš„ã€‚
- en: 'As you play board games or solve puzzles, you tend to think about your possible
    moves at every stage. As you get better, you may even imagine the possibilities
    after this first step. The result is a so-called game tree, which is a (part of
    the) tree of all possible moves that the rules allow. Letâ€™s start with a problem:'
  id: totrans-933
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä½ ç©æ£‹ç›˜æ¸¸æˆæˆ–è§£å†³è°œé¢˜æ—¶ï¼Œä½ å€¾å‘äºåœ¨æ¯ä¸ªé˜¶æ®µè€ƒè™‘ä½ çš„å¯èƒ½ç§»åŠ¨ã€‚éšç€ä½ å˜å¾—æ›´å¥½ï¼Œä½ ç”šè‡³å¯èƒ½ä¼šæƒ³è±¡ç¬¬ä¸€æ­¥ä¹‹åçš„å¯èƒ½æ€§ã€‚ç»“æœæ˜¯æ‰€è°“çš„æ¸¸æˆæ ‘ï¼Œè¿™æ˜¯æ‰€æœ‰å…è®¸çš„å¯èƒ½ç§»åŠ¨çš„æ ‘ï¼ˆçš„ä¸€éƒ¨åˆ†ï¼‰ã€‚è®©æˆ‘ä»¬ä»ä¸€ä¸ªé—®é¢˜å¼€å§‹ï¼š
- en: Sample Problem Your manager tells you the following story.
  id: totrans-934
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜ ä½ çš„ç»ç†å‘Šè¯‰ä½ ä»¥ä¸‹æ•…äº‹ã€‚
- en: ''
  id: totrans-935
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: â€œOnce upon a time, three cannibals were guiding three missionaries through a
    jungle. They were on their way to the nearest mission station. After some time,
    they arrived at a wide river, filled with deadly snakes and fish. There was no
    way to cross the river without a boat. Fortunately, they found a rowboat with
    two oars after a short search. Unfortunately, the boat was too small to carry
    all of them. It could barely carry two people at a time. Worse, because of the
    riverâ€™s width someone had to row the boat back.
  id: totrans-936
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: â€œä»å‰ï¼Œæœ‰ä¸‰ä¸ªé£Ÿäººæ—åœ¨å¼•å¯¼ä¸‰ä¸ªä¼ æ•™å£«ç©¿è¶Šä¸›æ—ã€‚ä»–ä»¬æ­£åœ¨å‰å¾€æœ€è¿‘çš„ä¼ æ•™ç«™ã€‚è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œä»–ä»¬åˆ°è¾¾äº†ä¸€æ¡å®½é˜”çš„æ²³æµï¼Œæ²³é‡Œå……æ»¡äº†è‡´å‘½çš„è›‡å’Œé±¼ã€‚æ²¡æœ‰èˆ¹å°±æ— æ³•è¿‡æ²³ã€‚å¹¸è¿çš„æ˜¯ï¼Œä»–ä»¬åœ¨ç®€çŸ­çš„æœç´¢åæ‰¾åˆ°äº†ä¸€æ¡å¸¦æœ‰ä¸¤æ”¯æ¡¨çš„å°èˆ¹ã€‚ä¸å¹¸çš„æ˜¯ï¼Œèˆ¹å¤ªå°ï¼Œæ— æ³•è½½æ‰€æœ‰äººã€‚å®ƒä¸€æ¬¡åªèƒ½è½½ä¸¤ä¸ªäººã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œç”±äºæ²³çš„å®½åº¦ï¼Œæœ‰äººå¿…é¡»åˆ’èˆ¹å›æ¥ã€‚
- en: ''
  id: totrans-937
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: â€œSince the missionaries could not trust the cannibals, they had to figure out
    a plan to get all six of them safely across the river. The problem was that these
    cannibals would kill and eat missionaries as soon as there were more cannibals
    than missionaries in some place. Our missionaries had to devise a plan that guaranteed
    that there were never any missionaries in the minority on either side of the river.
    The cannibals, however, could be trusted to cooperate otherwise. Specifically,
    they would not abandon any potential food, just as the missionaries would not
    abandon any potential converts.â€
  id: totrans-938
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: â€œç”±äºä¼ æ•™å£«æ— æ³•ä¿¡ä»»é£Ÿäººæ—ï¼Œä»–ä»¬å¿…é¡»æƒ³å‡ºä¸€ä¸ªè®¡åˆ’ï¼Œä»¥ç¡®ä¿æ‰€æœ‰äººéƒ½èƒ½å®‰å…¨åœ°æ¸¡è¿‡æ²³æµã€‚é—®é¢˜æ˜¯ï¼Œè¿™äº›é£Ÿäººæ—ä¼šåœ¨æŸä¸ªåœ°æ–¹é£Ÿäººæ—çš„æ•°é‡è¶…è¿‡ä¼ æ•™å£«æ—¶ç«‹å³æ€æ­»å¹¶åƒæ‰ä¼ æ•™å£«ã€‚æˆ‘ä»¬çš„ä¼ æ•™å£«å¿…é¡»åˆ¶å®šä¸€ä¸ªè®¡åˆ’ï¼Œç¡®ä¿æ²³æµçš„ä»»ä½•ä¸€è¾¹éƒ½ä¸ä¼šæœ‰ä¼ æ•™å£«å¤„äºå°‘æ•°ã€‚ç„¶è€Œï¼Œé£Ÿäººæ—åœ¨å…¶ä»–æƒ…å†µä¸‹æ˜¯å¯ä»¥ä¿¡èµ–åˆä½œçš„ã€‚å…·ä½“æ¥è¯´ï¼Œä»–ä»¬ä¸ä¼šæ”¾å¼ƒä»»ä½•æ½œåœ¨çš„é£Ÿç‰©ï¼Œå°±åƒä¼ æ•™å£«ä¸ä¼šæ”¾å¼ƒä»»ä½•æ½œåœ¨çš„ä¿¡å¾’ä¸€æ ·ã€‚â€
- en: ''
  id: totrans-939
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: While your manager doesnâ€™t assign any specific design task, he wants to explore
    whether the company can design (and sell) programs that solve such puzzles.
  id: totrans-940
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è™½ç„¶ä½ çš„ç»ç†æ²¡æœ‰åˆ†é…ä»»ä½•å…·ä½“çš„è®¾è®¡ä»»åŠ¡ï¼Œä½†ä»–æƒ³æ¢ç´¢å…¬å¸æ˜¯å¦å¯ä»¥è®¾è®¡ï¼ˆå¹¶é”€å”®ï¼‰è§£å†³è¿™ç±»è°œé¢˜çš„ç¨‹åºã€‚
- en: 'While puzzles arenâ€™t board games, the program illustrates the idea of game
    trees in the most straightforward manner possible.In principle, it is quite straightforward
    to solve such puzzles by hand. Here is the rough idea. Pick a graphical representation
    of the problem states. Ours consists of a three-part box: the left one represents
    the missionaries and the cannibals; the middle combines the river and the boat;
    and the third part is the right-hand side of the river. Take a look at the following
    representation of the initial state:'
  id: totrans-941
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶è°œé¢˜ä¸æ˜¯æ£‹ç›˜æ¸¸æˆï¼Œä½†è¿™ä¸ªç¨‹åºä»¥æœ€ç›´æ¥çš„æ–¹å¼è¯´æ˜äº†æ¸¸æˆæ ‘çš„æ¦‚å¿µã€‚åŸåˆ™ä¸Šï¼Œç”¨æ‰‹è§£å†³è¿™ç±»è°œé¢˜ç›¸å½“ç›´æ¥ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå¤§è‡´çš„æƒ³æ³•ã€‚é€‰æ‹©é—®é¢˜çŠ¶æ€çš„å›¾å½¢è¡¨ç¤ºã€‚æˆ‘ä»¬çš„ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šå·¦è¾¹ä»£è¡¨ä¼ æ•™å£«å’Œé£Ÿäººæ—ï¼›ä¸­é—´ç»“åˆäº†æ²³æµå’Œèˆ¹ï¼›ç¬¬ä¸‰éƒ¨åˆ†æ˜¯æ²³æµçš„å³æ‰‹è¾¹ã€‚çœ‹çœ‹ä»¥ä¸‹åˆå§‹çŠ¶æ€çš„è¡¨ç¤ºï¼š
- en: '![image](../Images/36ce5d209c05eac77e06f51f401fecdd.png)'
  id: totrans-942
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/36ce5d209c05eac77e06f51f401fecdd.png)'
- en: 'Black circles denote missionaries, white circles cannibals. All of them are
    on the left-hand river bank. The boat is also on the left side. Nobody is on the
    right. Here are two more states:'
  id: totrans-943
  prefs: []
  type: TYPE_NORMAL
  zh: é»‘è‰²åœ†åœˆä»£è¡¨ä¼ æ•™å£«ï¼Œç™½è‰²åœ†åœˆä»£è¡¨é£Ÿäººæ—ã€‚ä»–ä»¬éƒ½åœ¨å·¦å²¸ã€‚èˆ¹ä¹Ÿåœ¨å·¦è¾¹ã€‚æ²¡æœ‰äººç«™åœ¨å³è¾¹ã€‚è¿™é‡Œæœ‰å¦å¤–ä¸¤ç§çŠ¶æ€ï¼š
- en: '![image](../Images/03b70e631ee82e436f80173725b7a93f.png) Â Â Â Â Â Â Â Â Â Â  ![image](../Images/b0adba1dc1cf2b520af8293777af0edc.png)'
  id: totrans-944
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/03b70e631ee82e436f80173725b7a93f.png) ![image](../Images/b0adba1dc1cf2b520af8293777af0edc.png)'
- en: The first one is the final state, where all people and the boat are on the right
    bank of the river. The second one depicts some intermediate state where two people
    are on the left with the boat and four people are on the right.
  id: totrans-945
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªçŠ¶æ€æ˜¯æœ€ç»ˆçŠ¶æ€ï¼Œæ‰€æœ‰äººåŒ…æ‹¬èˆ¹éƒ½åœ¨æ²³çš„å³å²¸ã€‚ç¬¬äºŒä¸ªçŠ¶æ€æç»˜çš„æ˜¯ä¸€ç§ä¸­é—´çŠ¶æ€ï¼Œå…¶ä¸­ä¸¤ä¸ªäººåœ¨å·¦è¾¹ï¼Œèˆ¹åœ¨å·¦è¾¹ï¼Œå››ä¸ªäººåœ¨å³è¾¹ã€‚
- en: '![image](../Images/cdee4c80a1a40a9a5efe5183701dac2a.png)'
  id: totrans-946
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/cdee4c80a1a40a9a5efe5183701dac2a.png)'
- en: ''
  id: totrans-947
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 190: Creating a game tree'
  id: totrans-948
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾Â 190ï¼šåˆ›å»ºæ¸¸æˆæ ‘
- en: 'Now that you have a way to write down the state of the puzzle, you can think
    about the possibilities at each stage. Doing so yields a tree of possible moves.
    [FigureÂ 190](#%28counter._%28figure._fig~3amc-transition%29%29) sketches the first
    two and a half layers in such a tree. The left-most state is the initial one.
    Because the boat can transport at most two people and must be rowed by at least
    one, you have five possibilities to explore: one cannibal rows across; two cannibals
    row across; one missionary and one cannibal go; one missionary crosses; or two
    missionaries do. These possibilities are represented with five arrows going from
    the initial state to five intermediate states.'
  id: totrans-949
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä½ æœ‰äº†è®°å½•è°œé¢˜çŠ¶æ€çš„æ–¹æ³•ï¼Œä½ å¯ä»¥è€ƒè™‘æ¯ä¸ªé˜¶æ®µçš„å¯èƒ½æ€§ã€‚è¿™æ ·åšä¼šäº§ç”Ÿä¸€ä¸ªå¯èƒ½çš„ç§»åŠ¨æ ‘ã€‚å›¾[190](#%28counter._%28figure._fig~3amc-transition%29%29)å±•ç¤ºäº†è¿™æ ·ä¸€ä¸ªæ ‘çš„å‰ä¸¤å±‚åŠã€‚æœ€å·¦è¾¹çš„çŠ¶æ€æ˜¯åˆå§‹çŠ¶æ€ã€‚å› ä¸ºèˆ¹æœ€å¤šèƒ½è¿é€ä¸¤ä¸ªäººï¼Œå¹¶ä¸”è‡³å°‘éœ€è¦ä¸€ä¸ªäººåˆ’æ¡¨ï¼Œæ‰€ä»¥ä½ æœ‰äº”ç§å¯èƒ½æ€§è¦æ¢ç´¢ï¼šä¸€ä¸ªé£Ÿäººæ—åˆ’èˆ¹è¿‡æ²³ï¼›ä¸¤ä¸ªé£Ÿäººæ—åˆ’èˆ¹è¿‡æ²³ï¼›ä¸€ä¸ªä¼ æ•™å£«å’Œä¸€ä¸ªé£Ÿäººæ—è¿‡æ²³ï¼›ä¸€ä¸ªä¼ æ•™å£«è¿‡æ²³ï¼›æˆ–è€…ä¸¤ä¸ªä¼ æ•™å£«è¿‡æ²³ã€‚è¿™äº›å¯èƒ½æ€§ç”¨ä»åˆå§‹çŠ¶æ€åˆ°äº”ä¸ªä¸­é—´çŠ¶æ€çš„äº”æ¡ç®­å¤´è¡¨ç¤ºã€‚
- en: 'For each of these five intermediate states, you can play the same game again.
    In [figureÂ 190](#%28counter._%28figure._fig~3amc-transition%29%29) you see how
    the game continues for the middle (third) one of the new states. Because there
    are only two people on the right river bank, you see three possibilities: a cannibal
    goes back, a missionary goes back, or both do. Hence three arrows connect the
    middle state to the three states on the right side of the tree. If you keep drawing
    this tree of possibilities in a systematic manner, you eventually discover the
    final state.'
  id: totrans-950
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºè¿™äº”ä¸ªä¸­é—´çŠ¶æ€ä¸­çš„æ¯ä¸€ä¸ªï¼Œä½ éƒ½å¯ä»¥å†æ¬¡ç©åŒæ ·çš„æ¸¸æˆã€‚åœ¨å›¾[190](#%28counter._%28figure._fig~3amc-transition%29%29)ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°æ¸¸æˆæ˜¯å¦‚ä½•åœ¨æ–°çŠ¶æ€çš„ä¸­é—´ï¼ˆç¬¬ä¸‰ä¸ªï¼‰çŠ¶æ€ç»§ç»­è¿›è¡Œçš„ã€‚å› ä¸ºå³å²¸åªæœ‰ä¸¤ä¸ªäººï¼Œæ‰€ä»¥ä½ æœ‰ä¸‰ç§å¯èƒ½æ€§ï¼šä¸€ä¸ªé£Ÿäººæ—è¿”å›ï¼Œä¸€ä¸ªä¼ æ•™å£«è¿”å›ï¼Œæˆ–è€…ä¸¤è€…éƒ½è¿”å›ã€‚å› æ­¤ï¼Œæœ‰ä¸‰æ¡ç®­å¤´ä»ä¸­é—´çŠ¶æ€è¿æ¥åˆ°æ ‘å³ä¾§çš„ä¸‰ä¸ªçŠ¶æ€ã€‚å¦‚æœä½ ä»¥ç³»ç»Ÿçš„æ–¹å¼ç»§ç»­ç»˜åˆ¶è¿™ä¸ªå¯èƒ½æ€§æ ‘ï¼Œæœ€ç»ˆä½ ä¼šå‘ç°æœ€ç»ˆçŠ¶æ€ã€‚
- en: A second look at [figureÂ 190](#%28counter._%28figure._fig~3amc-transition%29%29)
    reveals two problems with this naive approach to generating the tree of possibilities.
    The first one is the dashed arrow that connects the middle state on the right
    to the initial state. It indicates that rowing back the two people from the right
    to the left gets the puzzle back to its initial state, meaning youâ€™re starting
    over, which is obviously undesirable. The second problem concerns those states
    with a star in the top-right corner. In both cases, there are more white-circle
    cannibals than black-circle missionaries on the left river bank, meaning the cannibals
    would eat the missionaries. Again, the goal is to avoid such states, making these
    moves undesirable.
  id: totrans-951
  prefs: []
  type: TYPE_NORMAL
  zh: å†æ¬¡å®¡è§†å›¾[190](#%28counter._%28figure._fig~3amc-transition%29%29)ï¼Œå¯ä»¥å‘ç°è¿™ç§ç”Ÿæˆå¯èƒ½æ€§æ ‘çš„æœ´ç´ æ–¹æ³•æœ‰ä¸¤ä¸ªé—®é¢˜ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯è¿æ¥å³ä¾§ä¸­é—´çŠ¶æ€å’Œåˆå§‹çŠ¶æ€çš„è™šçº¿ç®­å¤´ã€‚å®ƒè¡¨ç¤ºå°†ä¸¤ä¸ªäººä»å³å‘å·¦åˆ’èˆ¹å¯ä»¥ä½¿è°œé¢˜å›åˆ°åˆå§‹çŠ¶æ€ï¼Œè¿™æ„å‘³ç€ä½ æ˜¯åœ¨é‡æ–°å¼€å§‹ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¸Œæœ›çš„ã€‚ç¬¬äºŒä¸ªé—®é¢˜æ¶‰åŠå³ä¸Šè§’æœ‰æ˜Ÿå·çš„çŠ¶æ€ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå·¦å²¸çš„ç™½åœ†åœˆé£Ÿäººæ—æ¯”é»‘åœ†åœˆä¼ æ•™å£«å¤šï¼Œè¿™æ„å‘³ç€é£Ÿäººæ—ä¼šåƒæ‰ä¼ æ•™å£«ã€‚å†æ¬¡å¼ºè°ƒï¼Œç›®æ ‡æ˜¯é¿å…è¿™ç§çŠ¶æ€ï¼Œå› æ­¤è¿™äº›ç§»åŠ¨æ˜¯ä¸å¸Œæœ›çš„ã€‚
- en: 'One way to turn this puzzle into a program is to design a function that determines
    whether some final stateâ€”<wbr>here the final stateâ€”<wbr>is reachable from some
    given state. Here is an appropriate function definition:'
  id: totrans-952
  prefs: []
  type: TYPE_NORMAL
  zh: å°†è¿™ä¸ªè°œé¢˜è½¬åŒ–ä¸ºç¨‹åºçš„ä¸€ç§æ–¹æ³•æ˜¯ä¸ºç¡®å®šæŸä¸ªæœ€ç»ˆçŠ¶æ€â€”â€”è¿™é‡ŒæŒ‡çš„æ˜¯æœ€ç»ˆçŠ¶æ€â€”â€”æ˜¯å¦å¯ä»¥ä»æŸä¸ªç»™å®šçŠ¶æ€åˆ°è¾¾è€Œè®¾è®¡ä¸€ä¸ªå‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåˆé€‚çš„å‡½æ•°å®šä¹‰ï¼š
- en: '| ;Â [PuzzleState](#%28tech._puzzlestate%29) -> [PuzzleState](#%28tech._puzzlestate%29)
    |'
  id: totrans-953
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [PuzzleState](#%28tech._puzzlestate%29) -> [PuzzleState](#%28tech._puzzlestate%29)
    |'
- en: '| ;Â is the final state reachable from state0 |'
  id: totrans-954
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»çŠ¶æ€0åˆ°æœ€ç»ˆçŠ¶æ€æ˜¯å¦å¯è¾¾ |'
- en: '| ;Â generative creates a tree of possible boat rides |'
  id: totrans-955
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”Ÿæˆå¯èƒ½çš„åˆ’èˆ¹æ ‘ |'
- en: '| ;Â termination ??? |'
  id: totrans-956
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç»ˆæ­¢æ¡ä»¶ ??? |'
- en: '| Â  |'
  id: totrans-957
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (solveÂ initial-puzzle)Â final-puzzle)
    |'
  id: totrans-958
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (solveÂ initial-puzzle)Â final-puzzle)
    |'
- en: '| Â  |'
  id: totrans-959
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (solveÂ state0)
    |'
  id: totrans-960
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (solveÂ state0)
    |'
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [PuzzleState](#%28tech._puzzlestate%29)]
    -> [PuzzleState](#%28tech._puzzlestate%29) |'
  id: totrans-961
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    (; [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [PuzzleState](#%28tech._puzzlestate%29)]
    -> [PuzzleState](#%28tech._puzzlestate%29) |'
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â generative generates the successors of los |'
  id: totrans-962
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ;Â generative generates the successors of los |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (solve*Â los)
    |'
  id: totrans-963
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)
    (solve* los) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-964
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([ormap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._ormap%29%29)Â final?Â los)
    |'
  id: totrans-965
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  |Â Â  ([ormap](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._ormap%29%29)
    final? los) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â ([filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)Â final?Â los))]
    |'
  id: totrans-966
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  |Â Â  ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    ([filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)
    final? los))] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-967
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  |Â Â  [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (solve*Â (create-next-statesÂ los))]))) |'
  id: totrans-968
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  |Â Â  (solve* (create-next-states los))) |'
- en: '| Â Â Â Â (solve*Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â state0))))
    |'
  id: totrans-969
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  (solve* ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    state0)))) |'
- en: The auxiliary function uses generative recursion, generating all new possibilities
    given a list of possibilities. If one of the given possibilities is a final state,
    the function returns it.
  id: totrans-970
  prefs: []
  type: TYPE_NORMAL
  zh: è¾…åŠ©å‡½æ•°ä½¿ç”¨ç”Ÿæˆæ€§é€’å½’ï¼Œæ ¹æ®ç»™å®šå¯èƒ½æ€§åˆ—è¡¨ç”Ÿæˆæ‰€æœ‰æ–°çš„å¯èƒ½æ€§ã€‚å¦‚æœç»™å®šå¯èƒ½æ€§ä¸­æœ‰ä¸€ä¸ªæ˜¯æœ€ç»ˆçŠ¶æ€ï¼Œåˆ™å‡½æ•°è¿”å›å®ƒã€‚
- en: Clearly, solve is quite generic. As long as you define a collection of PuzzleStates,
    a function for recognizing final states, and a function for creating all â€œsuccessorâ€
    states, solve can work on your puzzle.
  id: totrans-971
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç„¶ï¼Œsolve å‡½æ•°ç›¸å½“é€šç”¨ã€‚åªè¦å®šä¹‰äº†ä¸€ç»„ PuzzleStateï¼Œä¸€ä¸ªè¯†åˆ«æœ€ç»ˆçŠ¶æ€çš„å‡½æ•°å’Œä¸€ä¸ªåˆ›å»ºæ‰€æœ‰â€œåç»§â€çŠ¶æ€çš„å‡½æ•°ï¼Œsolve å°±å¯ä»¥å¤„ç†ä½ çš„éš¾é¢˜ã€‚
- en: ExerciseÂ 520\. The solve* function generates all states reachable with n boat
    trips before it looks at states that require n + 1 boat trips, even if some of
    those boat trips return to previously encountered states. Because of this systematic
    way of traversing the tree, solve* cannot go into an infinite loop. Why? Terminology
    This way of searching a tree or a graph is dubbed breadth-first search.
  id: totrans-972
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  520. solve* å‡½æ•°åœ¨æ£€æŸ¥éœ€è¦ n + 1 æ¬¡èˆ¹æ—…è¡Œçš„çŠ¶æ€ä¹‹å‰ï¼Œå…ˆç”Ÿæˆä½¿ç”¨ n æ¬¡èˆ¹æ—…è¡Œçš„æ‰€æœ‰å¯è¾¾çŠ¶æ€ï¼Œå³ä½¿å…¶ä¸­ä¸€äº›èˆ¹æ—…è¡Œå›åˆ°äº†ä¹‹å‰é‡åˆ°çš„çŠ¶æ€ã€‚ç”±äºè¿™ç§ç³»ç»Ÿæ€§çš„éå†æ ‘çš„æ–¹å¼ï¼Œsolve*
    ä¸ä¼šè¿›å…¥æ— é™å¾ªç¯ã€‚ä¸ºä»€ä¹ˆï¼Ÿæœ¯è¯­ è¿™ç§æœç´¢æ ‘æˆ–å›¾çš„æ–¹å¼è¢«ç§°ä¸ºå¹¿åº¦ä¼˜å…ˆæœç´¢ã€‚
- en: ExerciseÂ 521\. Develop a representation for the states of the missionary-and-cannibal
    puzzle. Like the graphical representation, a data representation must record the
    number of missionaries and cannibals on each side of the river plus the location
    of the boat.
  id: totrans-973
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  521. ä¸ºä¼ æ•™å£«ä¸é‡äººéš¾é¢˜çš„çŠ¶æ€å¼€å‘ä¸€ç§è¡¨ç¤ºæ–¹æ³•ã€‚ä¸å›¾å½¢è¡¨ç¤ºä¸€æ ·ï¼Œæ•°æ®è¡¨ç¤ºå¿…é¡»è®°å½•æ²³æµæ¯ä¸€è¾¹çš„ä¼ æ•™å£«å’Œé‡äººæ•°ç›®ä»¥åŠèˆ¹çš„ä½ç½®ã€‚
- en: The description of [PuzzleState](#%28tech._puzzlestate%29) calls for a new structure
    type. Represent the above initial, intermediate, and final states in your representation.
  id: totrans-974
  prefs: []
  type: TYPE_NORMAL
  zh: '[PuzzleState](#%28tech._puzzlestate%29) çš„æè¿°è¦æ±‚ä¸€ä¸ªæ–°çš„ç»“æ„ç±»å‹ã€‚åœ¨ä½ çš„è¡¨ç¤ºä¸­ï¼Œè¡¨ç¤ºä¸Šè¿°åˆå§‹ã€ä¸­é—´å’Œæœ€ç»ˆçŠ¶æ€ã€‚'
- en: Design the function final?, which detects whether in a given state all people
    are on the right river bank.
  id: totrans-975
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡å‡½æ•°final?ï¼Œå®ƒæ£€æµ‹åœ¨ç»™å®šçŠ¶æ€ä¸‹æ‰€æœ‰äººæ˜¯å¦éƒ½åœ¨å³å²¸ã€‚
- en: Design the function render-mc, which maps a state of the missionary-and-cannibal
    puzzle to an image.
  id: totrans-976
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡å‡½æ•°render-mcï¼Œå®ƒå°†ä¼ æ•™å£«å’Œé£Ÿäººæ—è°œé¢˜çš„çŠ¶æ€æ˜ å°„åˆ°å›¾åƒã€‚
- en: The problem is that returning the final state says nothing about how the player
    can get from the initial state to the final one. In other words, create-next-states
    forgets how it gets to the returned states from the given ones. And this situation
    clearly calls for an accumulator, but at the same time, the accumulated knowledge
    is best associated with every individual [PuzzleState](#%28tech._puzzlestate%29),
    not solve* or any other function.
  id: totrans-977
  prefs: []
  type: TYPE_NORMAL
  zh: é—®é¢˜åœ¨äºè¿”å›æœ€ç»ˆçŠ¶æ€å¹¶æ²¡æœ‰è¯´æ˜ç©å®¶æ˜¯å¦‚ä½•ä»åˆå§‹çŠ¶æ€åˆ°è¾¾æœ€ç»ˆçŠ¶æ€çš„ã€‚æ¢å¥è¯è¯´ï¼Œcreate-next-stateså¿˜è®°äº†å®ƒæ˜¯å¦‚ä½•ä»ç»™å®šçš„çŠ¶æ€åˆ°è¾¾è¿”å›çš„çŠ¶æ€çš„ã€‚è¿™ç§æƒ…å†µæ˜¾ç„¶éœ€è¦ç´¯åŠ å™¨ï¼Œä½†ä¸æ­¤åŒæ—¶ï¼Œç§¯ç´¯çš„çŸ¥è¯†æœ€å¥½ä¸æ¯ä¸ªå•ç‹¬çš„[PuzzleState](#%28tech._puzzlestate%29)ç›¸å…³è”ï¼Œè€Œä¸æ˜¯solve*æˆ–å…¶ä»–ä»»ä½•å‡½æ•°ã€‚
- en: ExerciseÂ 522\. Modify the representation from [exerciseÂ 521](#%28counter._%28exercise._ex~3amc-state%29%29)
    so that a state records the sequence of states traversed to get there. Use a list
    of states.
  id: totrans-978
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 522. ä»[ç»ƒä¹ 521](#%28counter._%28exercise._ex~3amc-state%29%29)ä¿®æ”¹è¡¨ç¤ºï¼Œä»¥ä¾¿çŠ¶æ€è®°å½•åˆ°è¾¾é‚£é‡Œçš„çŠ¶æ€åºåˆ—ã€‚ä½¿ç”¨çŠ¶æ€åˆ—è¡¨ã€‚
- en: Articulate and write down an accumulator statement with the data definition
    that explains the additional field.
  id: totrans-979
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜ç¡®å¹¶å†™ä¸‹ç´¯åŠ å™¨è¯­å¥ï¼Œå…¶ä¸­åŒ…å«æ•°æ®å®šä¹‰ï¼Œä»¥è§£é‡Šé™„åŠ å­—æ®µã€‚
- en: Modify final? or render-mc for this representation as needed.
  id: totrans-980
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®éœ€è¦ä¿®æ”¹final?æˆ–render-mcä»¥é€‚åº”è¿™ç§è¡¨ç¤ºã€‚
- en: ExerciseÂ 523\. Design the create-next-states function. It consumes lists of
    missionary-and-cannibal states and generates the list of all those states that
    a boat ride can reach.
  id: totrans-981
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 523. è®¾è®¡create-next-stateså‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¼ æ•™å£«å’Œé£Ÿäººæ—çŠ¶æ€çš„åˆ—è¡¨ï¼Œå¹¶ç”Ÿæˆæ‰€æœ‰è¿™äº›çŠ¶æ€ï¼Œè¿™äº›çŠ¶æ€å¯ä»¥é€šè¿‡ä¸€æ¬¡åˆ’èˆ¹åˆ°è¾¾ã€‚
- en: Ignore the accumulator in the first draft of create-next-states, but make sure
    that the function does not generate states where the cannibals can eat the missionaries.
  id: totrans-982
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨create-next-statesçš„ç¬¬ä¸€ç¨¿ä¸­å¿½ç•¥ç´¯åŠ å™¨ï¼Œä½†ç¡®ä¿è¯¥å‡½æ•°ä¸ä¼šç”Ÿæˆé£Ÿäººæ—å¯ä»¥åƒæ‰ä¼ æ•™å£«çš„çŠ¶æ€ã€‚
- en: For the second design, update the accumulator field in the state structures
    and use it to rule out states that have been encountered on the way to the current
    state.
  id: totrans-983
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºç¬¬äºŒç§è®¾è®¡ï¼Œæ›´æ–°çŠ¶æ€ç»“æ„ä¸­çš„ç´¯åŠ å™¨å­—æ®µï¼Œå¹¶ä½¿ç”¨å®ƒæ¥æ’é™¤åœ¨åˆ°è¾¾å½“å‰çŠ¶æ€çš„è¿‡ç¨‹ä¸­é‡åˆ°çš„çŠ¶æ€ã€‚
- en: ExerciseÂ 524\. Exploit the accumulator-oriented data representation to modify
    solve. The revised function produces the list of states that lead from the initial
    [PuzzleState](#%28tech._puzzlestate%29) to the final one.
  id: totrans-984
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 524. åˆ©ç”¨é¢å‘ç´¯åŠ å™¨çš„æ•°æ®è¡¨ç¤ºæ¥ä¿®æ”¹solveã€‚ä¿®æ”¹åçš„å‡½æ•°äº§ç”Ÿä»åˆå§‹[PuzzleState](#%28tech._puzzlestate%29)åˆ°æœ€ç»ˆçŠ¶æ€çš„çŠ¶æ€åˆ—è¡¨ã€‚
- en: Also consider creating a movie from this list, using render-mc to generate the
    images. Use [run-movie](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._%28%28lib._2htdp%2Funiverse..rkt%29._run-movie%29%29)
    to display the movie.
  id: totrans-985
  prefs: []
  type: TYPE_NORMAL
  zh: è¿˜å¯ä»¥è€ƒè™‘ä»è¿™ä¸ªåˆ—è¡¨ä¸­åˆ›å»ºä¸€ä¸ªç”µå½±ï¼Œä½¿ç”¨render-mcç”Ÿæˆå›¾åƒã€‚ä½¿ç”¨[run-movie](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._%28%28lib._2htdp%2Funiverse..rkt%29._run-movie%29%29)æ¥æ˜¾ç¤ºç”µå½±ã€‚
- en: 33.3Accumulators as Results[ğŸ”—](#(part._sec~3afractal-acc) "Link to here")
  id: totrans-986
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 33.3ç´¯åŠ å™¨ä½œä¸ºç»“æœ[ğŸ”—](#(part._sec~3afractal-acc) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Take another look at [figureÂ 156](part_five.html#%28counter._%28figure._fig~3asiepic%29%29).
    It displays a Sierpinski triangle and a suggestion how to create it. Specifically,
    the images on the right explain one version of the generative idea behind the
    process:'
  id: totrans-987
  prefs: []
  type: TYPE_NORMAL
  zh: å†çœ‹çœ‹[å›¾156](part_five.html#%28counter._%28figure._fig~3asiepic%29%29)ã€‚å®ƒæ˜¾ç¤ºäº†ä¸€ä¸ªSierpinskiä¸‰è§’å½¢åŠå…¶åˆ›å»ºçš„å»ºè®®ã€‚å…·ä½“æ¥è¯´ï¼Œå³ä¾§çš„å›¾åƒè§£é‡Šäº†è¯¥è¿‡ç¨‹èƒŒåçš„ç”Ÿæˆæƒ³æ³•çš„ä¸€ä¸ªç‰ˆæœ¬ï¼š
- en: The given problem is a triangle. When the triangle is too small to be subdivided
    any further, the algorithm does nothing; otherwise, it finds the midpoints of
    its three sides and deals with the three outer triangles recursively.
  id: totrans-988
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç»™å®šçš„é—®é¢˜æ˜¯ä¸‰è§’å½¢ã€‚å½“ä¸‰è§’å½¢å¤ªå°æ— æ³•è¿›ä¸€æ­¥ç»†åˆ†æ—¶ï¼Œç®—æ³•ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼›å¦åˆ™ï¼Œå®ƒæ‰¾åˆ°å…¶ä¸‰è¾¹çš„ä¸­ç‚¹ï¼Œå¹¶é€’å½’åœ°å¤„ç†ä¸‰ä¸ªå¤–éƒ¨çš„ä¸‰è§’å½¢ã€‚
- en: 'In contrast, [Fractals, a First Taste](part_five.html#%28part._sec~3afractal%29)
    shows how to compose Sierpinski triangles algebraically, a process that does not
    correspond to this description.Most programmers expect â€œdrawâ€ to mean the action
    of adding a triangle to some canvas. The [scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    function from the 2htdp/image teachpack makes this idea concrete. The function
    consumes an image s and the coordinates of two points and adds a line through
    these two points to s. It is easy to generalize from [scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    to add-triangle and from there to add-sierpinski:'
  id: totrans-989
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸åï¼Œ[Fractals, a First Taste](part_five.html#%28part._sec~3afractal%29) å±•ç¤ºäº†å¦‚ä½•é€šè¿‡ä»£æ•°æ–¹æ³•ç»„åˆSierpinskiä¸‰è§’å½¢ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸è¿™ä¸ªæè¿°ä¸å¯¹åº”ã€‚å¤§å¤šæ•°ç¨‹åºå‘˜æœŸæœ›â€œç»˜åˆ¶â€æ„å‘³ç€å°†ä¸‰è§’å½¢æ·»åŠ åˆ°æŸä¸ªç”»å¸ƒä¸Šçš„åŠ¨ä½œã€‚æ¥è‡ª2htdp/imageæ•™å­¦åŒ…çš„[scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)å‡½æ•°ä½¿è¿™ä¸ªæƒ³æ³•å…·ä½“åŒ–ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªå›¾åƒså’Œä¸¤ä¸ªç‚¹çš„åæ ‡ï¼Œå¹¶å°†ä¸€æ¡çº¿æ·»åŠ åˆ°è¿™ä¸¤ä¸ªç‚¹ä¹‹é—´ã€‚ä»[scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)æ³›åŒ–åˆ°add-triangleï¼Œå†ä»é‚£é‡Œåˆ°add-sierpinskiæ˜¯å¾ˆå®¹æ˜“çš„ï¼š
- en: Sample Problem Design the add-sierpinski function. It consumes an image and
    three [Posn](part_one.html#%28tech._posn%29)s describing a triangle. It uses the
    latter to add a Sierpinski triangle to this image.
  id: totrans-990
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜ è®¾è®¡add-sierpinskiå‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸€ä¸ªå›¾åƒå’Œä¸‰ä¸ªæè¿°ä¸‰è§’å½¢çš„[Posn](part_one.html#%28tech._posn%29)sã€‚å®ƒä½¿ç”¨åè€…å°†Sierpinskiä¸‰è§’å½¢æ·»åŠ åˆ°è¯¥å›¾åƒä¸­ã€‚
- en: 'Note how this problem implicitly refers to the above process description of
    how to draw a Sierpinski triangle. In other words, we are confronted with a classical
    generative-recursive problem, and we can start with the classic template of generative
    recursion and the four central design questions:'
  id: totrans-991
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„è¿™ä¸ªé—®é¢˜éšå«åœ°å¼•ç”¨äº†ä¸Šé¢å…³äºå¦‚ä½•ç»˜åˆ¶Sierpinskiä¸‰è§’å½¢çš„æè¿°è¿‡ç¨‹ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬é¢ä¸´çš„æ˜¯ä¸€ä¸ªç»å…¸çš„ç”Ÿæˆ-é€’å½’é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç»å…¸çš„ç”Ÿæˆé€’å½’æ¨¡æ¿å’Œå››ä¸ªæ ¸å¿ƒè®¾è®¡é—®é¢˜å¼€å§‹ï¼š
- en: The problem is trivial if the triangle is too small to be subdivided.
  id: totrans-992
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœä¸‰è§’å½¢å¤ªå°æ— æ³•ç»†åˆ†ï¼Œè¿™ä¸ªé—®é¢˜å°±å˜å¾—å¾ˆç®€å•ã€‚
- en: In the trivial case, the function returns the given image.
  id: totrans-993
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨å¹³å‡¡æƒ…å†µä¸‹ï¼Œè¯¥å‡½æ•°è¿”å›ç»™å®šçš„å›¾åƒã€‚
- en: Otherwise the midpoints of the sides of the given triangle are determined to
    add another triangle. Each â€œouterâ€ triangle is then processed recursively.
  id: totrans-994
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦åˆ™ï¼Œç¡®å®šç»™å®šä¸‰è§’å½¢çš„è¾¹çš„ä¸­ç‚¹ä»¥æ·»åŠ å¦ä¸€ä¸ªä¸‰è§’å½¢ã€‚ç„¶åé€’å½’åœ°å¤„ç†æ¯ä¸ªâ€œå¤–éƒ¨â€ä¸‰è§’å½¢ã€‚
- en: Each of these recursive steps produces an image. The remaining question is how
    to combine these images.
  id: totrans-995
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ¯ä¸ªè¿™äº›é€’å½’æ­¥éª¤éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå›¾åƒã€‚å‰©ä¸‹çš„é—®é¢˜æ˜¯å¦‚ä½•å°†è¿™äº›å›¾åƒç»„åˆèµ·æ¥ã€‚
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-996
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
- en: '| ;Â generative adds the triangle (a, b, c) to scene0, |'
  id: totrans-997
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â generative adds the triangle (a, b, c) to scene0, |'
- en: '| ;Â subdivides it into three triangles by taking the |'
  id: totrans-998
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â subdivides it into three triangles by taking the |'
- en: '| ;Â midpoints of its sides; stop if (a, b, c) is too small |'
  id: totrans-999
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â midpoints of its sides; stop if (a, b, c) is too small |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-sierpinskiÂ scene0Â aÂ bÂ c)
    |'
  id: totrans-1000
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-sierpinskiÂ scene0Â aÂ bÂ c)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1001
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(too-small?Â aÂ bÂ c)Â scene0] |'
  id: totrans-1002
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(too-small?Â aÂ bÂ c)Â scene0] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-1003
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    |'
  id: totrans-1004
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    |'
- en: '| Â Â Â Â Â Â Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene1Â (add-triangleÂ scene0Â aÂ bÂ c))
    |'
  id: totrans-1005
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene1Â (add-triangleÂ scene0Â aÂ bÂ c))
    |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-a-bÂ (mid-pointÂ aÂ b))
    |'
  id: totrans-1006
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-a-bÂ (mid-pointÂ aÂ b))
    |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-b-cÂ (mid-pointÂ bÂ c))
    |'
  id: totrans-1007
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-b-cÂ (mid-pointÂ bÂ c))
    |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-c-aÂ (mid-pointÂ cÂ a))
    |'
  id: totrans-1008
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-c-aÂ (mid-pointÂ cÂ a))
    |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene2
    |'
  id: totrans-1009
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â åœºæ™¯2
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â (add-sierpinskiÂ scene0Â aÂ mid-a-bÂ mid-c-a)) |'
  id: totrans-1010
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (add-sierpinskiÂ åœºæ™¯0Â aÂ mid-a-bÂ mid-c-a)) |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene3
    |'
  id: totrans-1011
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â åœºæ™¯3
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â (add-sierpinskiÂ scene0Â bÂ mid-b-cÂ mid-a-b)) |'
  id: totrans-1012
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (add-sierpinskiÂ åœºæ™¯0Â bÂ mid-b-cÂ mid-a-b)) |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene4
    |'
  id: totrans-1013
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â åœºæ™¯4
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â (add-sierpinskiÂ scene0Â cÂ mid-c-aÂ mid-b-c))) |'
  id: totrans-1014
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (add-sierpinskiÂ åœºæ™¯0Â cÂ mid-c-aÂ mid-b-c))) |'
- en: '| Â Â Â Â Â Â Â ;Â â€”<wbr>INâ€”<wbr> |'
  id: totrans-1015
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ;Â â€”<wbr>INâ€”<wbr> |'
- en: '| Â Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â scene1Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â scene2Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â scene3Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â scene4Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))]))
    |'
  id: totrans-1016
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â åœºæ™¯1Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â åœºæ™¯2Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â åœºæ™¯3Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â åœºæ™¯4Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)))]))
    |'
- en: ''
  id: totrans-1017
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 191: Accumulators as results of generative recursions, a skeleton'
  id: totrans-1018
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾191ï¼šç´¯åŠ å™¨ä½œä¸ºç”Ÿæˆé€’å½’çš„ç»“æœï¼Œä¸€ä¸ªéª¨æ¶
- en: '[FigureÂ 191](#%28counter._%28figure._fig~3aaccu-result-gen-temp%29%29) shows
    the result of translating these answers into a skeletal definition. Since each
    midpoint is used twice, the skeleton uses [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    to formulate the generative step in ISL+. The [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    expression introduces the three new midpoints plus three recursive applications
    of add-sierpinski. The dots in its body suggest a combination of the scenes.'
  id: totrans-1019
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾191](#%28counter._%28figure._fig~3aaccu-result-gen-temp%29%29)æ˜¾ç¤ºäº†å°†è¿™äº›ç­”æ¡ˆè½¬æ¢ä¸ºéª¨æ¶å®šä¹‰çš„ç»“æœã€‚ç”±äºæ¯ä¸ªä¸­ç‚¹è¢«ä½¿ç”¨ä¸¤æ¬¡ï¼Œéª¨æ¶ä½¿ç”¨[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)æ¥åœ¨ISL+ä¸­åˆ¶å®šç”Ÿæˆæ­¥éª¤ã€‚è¯¥[å±€éƒ¨](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)è¡¨è¾¾å¼å¼•å…¥äº†ä¸‰ä¸ªæ–°çš„ä¸­ç‚¹ä»¥åŠä¸‰æ¬¡å¯¹add-sierpinskiçš„é€’å½’åº”ç”¨ã€‚å…¶ä¸»ä½“ä¸­çš„ç‚¹è¡¨ç¤ºåœºæ™¯çš„ç»„åˆã€‚'
- en: 'ExerciseÂ 525\. Tackle the wish list that the skeleton implies:'
  id: totrans-1020
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 525ã€‚è§£å†³éª¨æ¶æ‰€æš—ç¤ºçš„æ„¿æœ›æ¸…å•ï¼š
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-1021
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
- en: '| ;Â adds the black triangle a, b, c to scene |'
  id: totrans-1022
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â adds the black triangle a, b, c to scene |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-triangleÂ sceneÂ aÂ bÂ c)Â scene)
    |'
  id: totrans-1023
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-triangleÂ sceneÂ aÂ bÂ c)Â scene)
    |'
- en: '| Â  |'
  id: totrans-1024
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-1025
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â is the triangle a, b, c too small to be divided |'
  id: totrans-1026
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â is the triangle a, b, c too small to be divided |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (too-small?Â aÂ bÂ c)
    |'
  id: totrans-1027
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (too-small?Â aÂ bÂ c)
    |'
- en: '| Â Â #false) |'
  id: totrans-1028
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â #false) |'
- en: '| Â  |'
  id: totrans-1029
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Posn](part_one.html#%28tech._posn%29) |'
  id: totrans-1030
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Posn](part_one.html#%28tech._posn%29) |'
- en: '| ;Â determines the midpoint between a and b |'
  id: totrans-1031
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â determines the midpoint between a and b |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (mid-pointÂ aÂ b)
    |'
  id: totrans-1032
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (mid-pointÂ aÂ b)
    |'
- en: '| Â Â a) |'
  id: totrans-1033
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â a) |'
- en: Design the three functions.Domain Knowledge (1) For the too-small? function
    it suffices to measure the distance between two points and to check whether it
    is below some chosen threshold, say, 10. The distance between (x0,y0) and (x1,y1)
    is
  id: totrans-1034
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸‰ä¸ªå‡½æ•°ã€‚é¢†åŸŸçŸ¥è¯†ï¼ˆ1ï¼‰å¯¹äºtoo-small?å‡½æ•°ï¼Œåªéœ€æµ‹é‡ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»å¹¶æ£€æŸ¥å®ƒæ˜¯å¦ä½äºæŸä¸ªé€‰æ‹©çš„é˜ˆå€¼ï¼Œä¾‹å¦‚ï¼Œ10ã€‚ç‚¹(x0, y0)å’Œ(x1,
    y1)ä¹‹é—´çš„è·ç¦»æ˜¯
- en: '![image](../Images/e473201e23ca706b362f0456082e7526.png)'
  id: totrans-1035
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/e473201e23ca706b362f0456082e7526.png)'
- en: 'that is, the distance of (x0 - x1,y0 - y1) to the origin.The midpoint between
    points (x0,y0) and (x1,y1) has as coordinates the midpoints between the respective
    x and y coordinates:'
  id: totrans-1036
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£å°±æ˜¯ç‚¹(x0 - x1, y0 - y1)åˆ°åŸç‚¹çš„è·ç¦»ã€‚ç‚¹(x0, y0)å’Œ(x1, y1)ä¹‹é—´çš„ä¸­ç‚¹åæ ‡æ˜¯å„è‡ªxå’Œyåæ ‡çš„ä¸­ç‚¹ï¼š
- en: '![image](../Images/fbc2f920c401a734278b66b3cc046476.png)'
  id: totrans-1037
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/fbc2f920c401a734278b66b3cc046476.png)'
- en: Now that we have all the auxiliary functions, it is time to return to the problem
    of combining the three images that are created by the recursive calls. One obvious
    guess is to use the [overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)
    or [underlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._underlay%29%29)
    function, but an evaluation in the interactions area of DrRacket shows that the
    functions hide the underlying triangles.
  id: totrans-1038
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†æ‰€æœ‰è¾…åŠ©å‡½æ•°ï¼Œæ˜¯æ—¶å€™å›åˆ°ç”±é€’å½’è°ƒç”¨åˆ›å»ºçš„ä¸‰ä¸ªå›¾åƒçš„ç»„åˆé—®é¢˜ä¸Šäº†ã€‚ä¸€ä¸ªæ˜æ˜¾çš„çŒœæµ‹æ˜¯ä½¿ç”¨[overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)æˆ–[underlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._underlay%29%29)å‡½æ•°ï¼Œä½†åœ¨DrRacketäº¤äº’åŒºåŸŸä¸­çš„è¯„ä¼°æ˜¾ç¤ºï¼Œè¿™äº›å‡½æ•°éšè—äº†åº•å±‚çš„ä¸‰è§’å½¢ã€‚
- en: 'Specifically, imagine that the three recursive calls produce the following
    empty scenes, enriched with a single triangle in appropriate locations:'
  id: totrans-1039
  prefs: []
  type: TYPE_NORMAL
  zh: å…·ä½“æ¥è¯´ï¼Œæƒ³è±¡ä¸‰ä¸ªé€’å½’è°ƒç”¨äº§ç”Ÿäº†ä»¥ä¸‹ç©ºåœºæ™¯ï¼Œå¹¶åœ¨é€‚å½“çš„ä½ç½®æ·»åŠ äº†ä¸€ä¸ªä¸‰è§’å½¢ï¼š
- en: '| > scene1 |'
  id: totrans-1040
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > scene1 |'
- en: '| ![image](../Images/87997ab0a2bc2ea2207b725605d91a55.png) |'
  id: totrans-1041
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/87997ab0a2bc2ea2207b725605d91a55.png) |'
- en: '| > scene2 |'
  id: totrans-1042
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > scene2 |'
- en: '| ![image](../Images/3890e223b247c3923e838413e9946216.png) |'
  id: totrans-1043
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/3890e223b247c3923e838413e9946216.png)'
- en: '| > scene3 |'
  id: totrans-1044
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > scene3 |'
- en: '| ![image](../Images/b7f6bcce10ac2315564326213b579f87.png) |'
  id: totrans-1045
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/b7f6bcce10ac2315564326213b579f87.png)'
- en: 'A combination should look like this figure:'
  id: totrans-1046
  prefs: []
  type: TYPE_NORMAL
  zh: ç»„åˆåº”è¯¥çœ‹èµ·æ¥åƒè¿™ä¸ªå›¾ï¼š
- en: '![image](../Images/2a40a7e927ca2cf8eed7203859dca0dd.png)'
  id: totrans-1047
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/2a40a7e927ca2cf8eed7203859dca0dd.png)'
- en: 'But, combining these shapes with [overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)
    or [underlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._underlay%29%29)
    does not yield this desired shape:'
  id: totrans-1048
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯ï¼Œä½¿ç”¨ [overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)
    æˆ– [underlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._underlay%29%29)
    ç»„åˆè¿™äº›å½¢çŠ¶å¹¶ä¸ä¼šå¾—åˆ°æœŸæœ›çš„å½¢çŠ¶ï¼š
- en: '| > ([overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)Â scene1Â scene2Â scene3)
    |'
  id: totrans-1049
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)Â scene1Â scene2Â scene3)
    |'
- en: '| ![image](../Images/a8faf7e616cc6875b66ce4a83be10702.png) |'
  id: totrans-1050
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/a8faf7e616cc6875b66ce4a83be10702.png) |'
- en: '| > ([underlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._underlay%29%29)Â scene1Â scene2Â scene3)
    |'
  id: totrans-1051
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([underlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._underlay%29%29)Â scene1Â scene2Â scene3)
    |'
- en: '| ![image](../Images/359554a49be6b3eee2e2218bcd20d7aa.png) |'
  id: totrans-1052
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/359554a49be6b3eee2e2218bcd20d7aa.png) |'
- en: Indeed, the image teachpack of ISL+ does not support a function that combines
    these scenes in an appropriate manner.Letâ€™s take a second look at these interactions.
    If scene1 is the result of adding the upper triangle to the given scene and scene2
    is the result of adding a triangle on the lower left, perhaps the second recursive
    call should add triangles to the result of the first call. Doing so would yield
  id: totrans-1053
  prefs: []
  type: TYPE_NORMAL
  zh: çš„ç¡®ï¼ŒISL+ çš„å›¾åƒæ•™å­¦åŒ…ä¸æ”¯æŒä»¥é€‚å½“æ–¹å¼ç»„åˆè¿™äº›åœºæ™¯çš„åŠŸèƒ½ã€‚è®©æˆ‘ä»¬å†æ¬¡å®¡è§†è¿™äº›äº¤äº’ã€‚å¦‚æœ scene1 æ˜¯å°†ä¸Šä¸‰è§’å½¢æ·»åŠ åˆ°ç»™å®šåœºæ™¯çš„ç»“æœï¼Œè€Œ scene2
    æ˜¯åœ¨å·¦ä¸‹è§’æ·»åŠ ä¸‰è§’å½¢çš„ç»“æœï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªé€’å½’è°ƒç”¨å¯èƒ½åº”è¯¥å°†ä¸‰è§’å½¢æ·»åŠ åˆ°ç¬¬ä¸€æ¬¡è°ƒç”¨çš„ç»“æœä¸­ã€‚è¿™æ ·åšä¼šäº§ç”Ÿ
- en: '![image](../Images/5e832ee0c3f0edbce2551442ff4e209b.png)'
  id: totrans-1054
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/5e832ee0c3f0edbce2551442ff4e209b.png)'
- en: 'and handing over this scene to the third recursive call produces exactly what
    is wanted:'
  id: totrans-1055
  prefs: []
  type: TYPE_NORMAL
  zh: å°†è¿™ä¸ªåœºæ™¯ä¼ é€’ç»™ç¬¬ä¸‰ä¸ªé€’å½’è°ƒç”¨å°†äº§ç”Ÿæ‰€éœ€çš„ç»“æœï¼š
- en: '![image](../Images/26e093371fb9d91e72553444ed02d45a.png)'
  id: totrans-1056
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/26e093371fb9d91e72553444ed02d45a.png)'
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-1057
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
- en: '| ;Â generative adds the triangle (a, b, c) to scene0, |'
  id: totrans-1058
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â generative adds the triangle (a, b, c) to scene0, |'
- en: '| ;Â subdivides it into three triangles by taking the |'
  id: totrans-1059
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â subdivides it into three triangles by taking the |'
- en: '| ;Â midpoints of its sides; stop if (a, b, c) is too small |'
  id: totrans-1060
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â midpoints of its sides; stop if (a, b, c) is too small |'
- en: '| ;Â accumulator the function accumulates the triangles of scene0 |'
  id: totrans-1061
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â accumulator the function accumulates the triangles of scene0 |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-sierpinskiÂ scene0Â aÂ bÂ c)
    |'
  id: totrans-1062
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-sierpinskiÂ scene0Â aÂ bÂ c)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  id: totrans-1063
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [(too-small?Â aÂ bÂ c)Â scene0] |'
  id: totrans-1064
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(too-small?Â aÂ bÂ c)Â scene0] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  id: totrans-1065
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    |'
  id: totrans-1066
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    |'
- en: '| Â Â Â Â Â Â Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene1Â (add-triangleÂ scene0Â aÂ bÂ c))
    |'
  id: totrans-1067
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene1Â (add-triangleÂ scene0Â aÂ bÂ c))
    |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-a-bÂ (mid-pointÂ aÂ b))
    |'
  id: totrans-1068
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-a-bÂ (mid-pointÂ aÂ b))
    |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-b-cÂ (mid-pointÂ bÂ c))
    |'
  id: totrans-1069
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-b-cÂ (mid-pointÂ bÂ c)))
    |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-c-aÂ (mid-pointÂ cÂ a))
    |'
  id: totrans-1070
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â mid-c-aÂ (mid-pointÂ cÂ a)))
    |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene2
    |'
  id: totrans-1071
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene2)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â (add-sierpinskiÂ scene1Â aÂ mid-a-bÂ mid-c-a)) |'
  id: totrans-1072
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (add-sierpinskiÂ scene1Â aÂ mid-a-bÂ mid-c-a))) |'
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene3
    |'
  id: totrans-1073
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â scene3)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â (add-sierpinskiÂ scene2Â bÂ mid-b-cÂ mid-a-b))) |'
  id: totrans-1074
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (add-sierpinskiÂ scene2Â bÂ mid-b-cÂ mid-a-b))) |'
- en: '| Â Â Â Â Â Â Â ;Â â€”<wbr>INâ€”<wbr> |'
  id: totrans-1075
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ;Â â€”<wbr>INâ€”<wbr> |'
- en: '| Â Â Â Â Â Â Â (add-sierpinskiÂ scene3Â cÂ mid-c-aÂ mid-b-c))])) |'
  id: totrans-1076
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (add-sierpinskiÂ scene3Â cÂ mid-c-aÂ mid-b-c))) |'
- en: ''
  id: totrans-1077
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 192: Accumulators as results of generative recursion, the function'
  id: totrans-1078
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾192ï¼šç´¯åŠ å™¨ä½œä¸ºç”Ÿæˆé€’å½’çš„ç»“æœï¼Œå‡½æ•°
- en: '[FigureÂ 192](#%28counter._%28figure._fig~3aadd-sierpinski%29%29) shows the
    reformulation based on this insight. The three highlights pinpoint the key design
    idea. All concern the case when the triangle is sufficiently large and it is added
    to the given scene. Once its sides are subdivided, the first outer triangle is
    recursively processed using scene1, the result of adding the given triangle. Similarly,
    the result of this first recursion, dubbed scene2, is used for the second recursion,
    which is about processing the second triangle. Finally, scene3 flows into the
    third recursive call. In sum, the novelty is that the accumulator is simultaneously
    an argument, a tool for collecting knowledge, and the result of the function.'
  id: totrans-1079
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾192](#%28counter._%28figure._fig~3aadd-sierpinski%29%29)å±•ç¤ºäº†åŸºäºè¿™ä¸€æ´å¯Ÿçš„é‡æ–°è¡¨è¿°ã€‚ä¸‰ä¸ªäº®ç‚¹æŒ‡å‡ºäº†å…³é”®çš„è®¾è®¡ç†å¿µã€‚æ‰€æœ‰è¿™äº›éƒ½å…³æ³¨äºå½“ä¸‰è§’å½¢è¶³å¤Ÿå¤§å¹¶ä¸”è¢«æ·»åŠ åˆ°ç»™å®šåœºæ™¯ä¸­çš„æƒ…å†µã€‚ä¸€æ—¦å…¶è¾¹è¢«ç»†åˆ†ï¼Œç¬¬ä¸€ä¸ªå¤–ä¸‰è§’å½¢å°±ä½¿ç”¨scene1ï¼ˆæ·»åŠ ç»™å®šä¸‰è§’å½¢çš„è¾“å‡ºï¼‰é€’å½’åœ°å¤„ç†ã€‚åŒæ ·ï¼Œè¿™ä¸ªç¬¬ä¸€æ¬¡é€’å½’çš„ç»“æœï¼Œè¢«ç§°ä¸ºscene2ï¼Œè¢«ç”¨äºç¬¬äºŒæ¬¡é€’å½’ï¼Œè¿™æ˜¯å…³äºå¤„ç†ç¬¬äºŒä¸ªä¸‰è§’å½¢ã€‚æœ€åï¼Œscene3æµå…¥ç¬¬ä¸‰ä¸ªé€’å½’è°ƒç”¨ã€‚æ€»çš„æ¥è¯´ï¼Œæ–°æ„åœ¨äºç´¯åŠ å™¨åŒæ—¶æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ”¶é›†çŸ¥è¯†çš„å·¥å…·ï¼Œä»¥åŠå‡½æ•°çš„è¾“å‡ºã€‚'
- en: 'To explore add-sierpinski it is best to start from an equilateral triangle
    and an image that leaves a sufficiently large border. Here are definitions that
    meet these two criteria:'
  id: totrans-1080
  prefs: []
  type: TYPE_NORMAL
  zh: è¦æ¢ç´¢add-sierpinskiï¼Œæœ€å¥½ä»ä¸€ä¸ªç­‰è¾¹ä¸‰è§’å½¢å’Œä¸€ä¸ªç•™ä¸‹è¶³å¤Ÿå¤§è¾¹ç•Œçš„å›¾åƒå¼€å§‹ã€‚ä»¥ä¸‹æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶çš„å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â MTÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 400Â 400))
    |'
  id: totrans-1081
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â MTÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 400Â 400)))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â AÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 200Â Â 50))
    |'
  id: totrans-1082
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â AÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 200Â Â 50)))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â BÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â Â 27Â 350))
    |'
  id: totrans-1083
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â BÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â Â 27Â 350)))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â CÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 373Â 350))
    |'
  id: totrans-1084
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â CÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 373Â 350))
    |'
- en: '| Â  |'
  id: totrans-1085
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| (add-sierpinskiÂ MTÂ AÂ BÂ C) |'
  id: totrans-1086
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (add-sierpinskiÂ MTÂ AÂ BÂ C) |'
- en: Check what kind of Sierpinski fractal this code fragment delivers. Experiment
    with the definitions from [exerciseÂ 525](#%28counter._%28exercise._ex~3asierpinski-aux%29%29)
    to create sparser and denser Sierpinski triangles than the first one.
  id: totrans-1087
  prefs: []
  type: TYPE_NORMAL
  zh: æ£€æŸ¥è¿™æ®µä»£ç ç”Ÿæˆçš„ Sierpinski åˆ†å½¢ç±»å‹ã€‚é€šè¿‡å®éªŒ [ç»ƒä¹  525](#%28counter._%28exercise._ex~3asierpinski-aux%29%29)
    ä¸­çš„å®šä¹‰ï¼Œåˆ›å»ºæ¯”ç¬¬ä¸€ä¸ªæ›´ç¨€ç–å’Œæ›´å¯†é›†çš„ Sierpinski ä¸‰è§’å½¢ã€‚
- en: ExerciseÂ 526\. To compute the endpoints of an equilateral Sierpinski triangle,
    draw a circle and pick three points on the circle that are 120 degrees apart,
    for example, 120, 240, and 360.
  id: totrans-1088
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  526. è¦è®¡ç®—ç­‰è¾¹ Sierpinski ä¸‰è§’å½¢çš„ç«¯ç‚¹ï¼Œç”»ä¸€ä¸ªåœ†å¹¶åœ¨åœ†ä¸Šé€‰å–ä¸‰ä¸ªç›¸éš” 120 åº¦çš„ç‚¹ï¼Œä¾‹å¦‚ï¼Œ120 åº¦ã€240 åº¦å’Œ 360 åº¦ã€‚
- en: 'Design the function circle-pt:'
  id: totrans-1089
  prefs: []
  type: TYPE_NORMAL
  zh: 'è®¾è®¡å‡½æ•° circle-pt:'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â CENTERÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 200Â 200))
    |'
  id: totrans-1090
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â CENTERÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 200Â 200))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â RADIUSÂ 200)Â ;Â the
    radius in pixels |'
  id: totrans-1091
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â RADIUSÂ 200)Â ;Â åƒç´ å•ä½ä¸­çš„åŠå¾„
    |'
- en: '| Â  |'
  id: totrans-1092
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Posn](part_one.html#%28tech._posn%29)
    |'
  id: totrans-1093
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Posn](part_one.html#%28tech._posn%29)
    |'
- en: '| ;Â determines the point on the circle with CENTER |'
  id: totrans-1094
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç¡®å®šåœ†ä¸Šä»¥ CENTER ä¸ºä¸­å¿ƒã€RADIUS ä¸ºåŠå¾„çš„ç‚¹ |'
- en: '| ;Â and RADIUS whose angle is |'
  id: totrans-1095
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å’Œè§’åº¦ |'
- en: '| Â  |'
  id: totrans-1096
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â examples |'
  id: totrans-1097
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç¤ºä¾‹ |'
- en: '| ;Â what are the x and y coordinates of the desired |'
  id: totrans-1098
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ‰€éœ€çš„ x å’Œ y åæ ‡æ˜¯ä»€ä¹ˆ |'
- en: '| ;Â point, when given: 120/360, 240/360, 360/360 |'
  id: totrans-1099
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç‚¹ï¼Œå½“ç»™å®šï¼š120/360ï¼Œ240/360ï¼Œ360/360 |'
- en: '| Â  |'
  id: totrans-1100
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (circle-ptÂ factor)
    |'
  id: totrans-1101
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (circle-ptÂ factor)
    |'
- en: '| Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 0Â 0))
    |'
  id: totrans-1102
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 0Â 0))
    |'
- en: 'Domain Knowledge This design problem calls on knowledge from mathematics. One
    way to view the problem is as a conversion of a complex number from the polar-coordinate
    representation to the [Posn](part_one.html#%28tech._posn%29) representation. Read
    up on [make-polar](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-polar%29%29),
    [real-part](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._real-part%29%29),
    and [imag-part](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._imag-part%29%29)
    in ISL+. Another way is to use trigonometry, [sin](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sin%29%29)
    and [cos](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cos%29%29),
    to determine the coordinates. If you choose this route, recall that these trigonometry
    functions compute the sine and cosine in terms of radians, not degrees. Also keep
    in mind that on-screen positions grow downward, not upward.ExerciseÂ 527\. Take
    a look at the following two images:'
  id: totrans-1103
  prefs: []
  type: TYPE_NORMAL
  zh: é¢†åŸŸçŸ¥è¯†è¿™ä¸ªè®¾è®¡é—®é¢˜éœ€è¦è°ƒç”¨æ•°å­¦çŸ¥è¯†ã€‚ä¸€ç§çœ‹å¾…è¿™ä¸ªé—®é¢˜çš„æ–¹å¼æ˜¯å°†ä¸€ä¸ªå¤æ•°ä»æåæ ‡è¡¨ç¤ºè½¬æ¢ä¸º [Posn](part_one.html#%28tech._posn%29)
    è¡¨ç¤ºã€‚åœ¨ ISL+ ä¸­æŸ¥é˜… [make-polar](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-polar%29%29)ã€[real-part](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._real-part%29%29)
    å’Œ [imag-part](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._imag-part%29%29)
    çš„ä¿¡æ¯ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ä¸‰è§’å­¦ï¼Œ[sin](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sin%29%29)
    å’Œ [cos](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cos%29%29)ï¼Œæ¥ç¡®å®šåæ ‡ã€‚å¦‚æœä½ é€‰æ‹©è¿™æ¡è·¯çº¿ï¼Œè¯·è®°ä½è¿™äº›ä¸‰è§’å‡½æ•°æ˜¯ä»¥å¼§åº¦è€Œä¸æ˜¯åº¦æ¥è®¡ç®—æ­£å¼¦å’Œä½™å¼¦çš„ã€‚è¿˜è¦è®°ä½ï¼Œå±å¹•ä¸Šçš„ä½ç½®æ˜¯å‘ä¸‹å¢é•¿çš„ï¼Œè€Œä¸æ˜¯å‘ä¸Šã€‚ç»ƒä¹ 
    527ã€‚çœ‹çœ‹ä»¥ä¸‹ä¸¤å¼ å›¾ç‰‡ï¼š
- en: '![image](../Images/06653346cf054b21dc3fe405ccd97794.png)Â Â Â Â Â Â Â Â Â Â ![image](../Images/e9ddac8b628a7fa6554a6dd069139e3f.png)'
  id: totrans-1104
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/06653346cf054b21dc3fe405ccd97794.png)Â Â Â Â Â Â Â Â Â Â ![image](../Images/e9ddac8b628a7fa6554a6dd069139e3f.png)'
- en: They demonstrate how to generate a fractal Savannah tree in the same way that
    [figureÂ 156](part_five.html#%28counter._%28figure._fig~3asiepic%29%29) shows how
    to draw a Sierpinski triangle. The image on the left shows what a fractal Savannah
    tree looks like. The right one explains the generative construction step.
  id: totrans-1105
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä»¬å±•ç¤ºäº†å¦‚ä½•ä»¥ä¸ [å›¾ 156](part_five.html#%28counter._%28figure._fig~3asiepic%29%29)
    å±•ç¤ºå¦‚ä½•ç»˜åˆ¶ Sierpinski ä¸‰è§’å½¢ç›¸åŒçš„æ–¹å¼ç”Ÿæˆåˆ†å½¢è¨å‡¡çº³æ ‘ã€‚å·¦è¾¹çš„å›¾ç‰‡æ˜¾ç¤ºäº†åˆ†å½¢è¨å‡¡çº³æ ‘çš„å¤–è§‚ã€‚å³è¾¹çš„å›¾ç‰‡è§£é‡Šäº†ç”Ÿæˆæ„é€ æ­¥éª¤ã€‚
- en: 'Design the function add-savannah. The function consumes an image and four numbers:
    (1) the x-coordinate of a lineâ€™s base point, (2) the y-coordinate of a lineâ€™s
    base point, (3) the length of the line, and (4) the angle of the line. It adds
    a fractal Savannah tree to the given image.'
  id: totrans-1106
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡å‡½æ•° `add-savannah`ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå›¾åƒå’Œå››ä¸ªæ•°å­—ï¼šï¼ˆ1ï¼‰çº¿çš„åŸºç‚¹çš„ x åæ ‡ï¼Œï¼ˆ2ï¼‰çº¿çš„åŸºç‚¹çš„ y åæ ‡ï¼Œï¼ˆ3ï¼‰çº¿çš„é•¿åº¦ï¼Œä»¥åŠï¼ˆ4ï¼‰çº¿çš„è§’åº¦ã€‚å®ƒå°†åœ¨ç»™å®šçš„å›¾åƒä¸Šæ·»åŠ ä¸€ä¸ªåˆ†å½¢è¨å‡¡çº³æ ‘ã€‚
- en: Unless the line is too short, the function adds the specified line to the image.
    It then divides the line into three segments. It recursively uses the two intermediate
    points as the new starting points for two lines. The lengths and the angles of
    the two branches change in a fixed manner, but independently of each other. Use
    constants to define these changes and work with them until you like your tree
    well enough.
  id: totrans-1107
  prefs: []
  type: TYPE_NORMAL
  zh: é™¤éçº¿å¤ªçŸ­ï¼Œå¦åˆ™å‡½æ•°ä¼šå°†æŒ‡å®šçš„çº¿æ·»åŠ åˆ°å›¾åƒä¸­ã€‚ç„¶åå®ƒå°†çº¿åˆ†æˆä¸‰æ®µã€‚å®ƒé€’å½’åœ°ä½¿ç”¨ä¸¤ä¸ªä¸­é—´ç‚¹ä½œä¸ºä¸¤æ¡æ–°çº¿çš„èµ·ç‚¹ã€‚ä¸¤ä¸ªåˆ†æ”¯çš„é•¿åº¦å’Œè§’åº¦ä»¥å›ºå®šæ–¹å¼æ”¹å˜ï¼Œä½†å½¼æ­¤ç‹¬ç«‹ã€‚ä½¿ç”¨å¸¸æ•°æ¥å®šä¹‰è¿™äº›å˜åŒ–ï¼Œå¹¶åœ¨æ­¤å·¥ä½œï¼Œç›´åˆ°ä½ å¯¹ä½ çš„æ ‘æ»¡æ„ä¸ºæ­¢ã€‚
- en: Hint Experiment with shortening each left branch by at least one third and rotating
    it left by at least 0.15 degrees. For each right branch, shorten it by at least
    20% and rotate it by 0.2 degrees in the opposite direction.
  id: totrans-1108
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºå°è¯•å°†æ¯ä¸ªå·¦åˆ†æ”¯è‡³å°‘ç¼©çŸ­ä¸‰åˆ†ä¹‹ä¸€ï¼Œå¹¶å‘å·¦æ—‹è½¬è‡³å°‘ 0.15 åº¦ã€‚å¯¹äºæ¯ä¸ªå³åˆ†æ”¯ï¼Œè‡³å°‘ç¼©çŸ­ 20%ï¼Œå¹¶ä»¥ 0.2 åº¦ç›¸åæ–¹å‘æ—‹è½¬ã€‚
- en: 'ExerciseÂ 528\. Graphics programmers often need to connect two points with a
    smooth curve where â€œsmoothâ€ is relative to some perspective.GÃ©raldine Morin suggested
    this exercise. Here are two sketches:'
  id: totrans-1109
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  528ã€‚å›¾å½¢ç¨‹åºå‘˜ç»å¸¸éœ€è¦ç”¨å¹³æ»‘çš„æ›²çº¿è¿æ¥ä¸¤ä¸ªç‚¹ï¼Œå…¶ä¸­â€œå¹³æ»‘â€ç›¸å¯¹äºæŸä¸ªè§†è§’è€Œè¨€ã€‚GÃ©raldine Morin æå‡ºäº†è¿™ä¸ªç»ƒä¹ ã€‚ä»¥ä¸‹æ˜¯ä¸¤ä¸ªè‰å›¾ï¼š
- en: '![image](../Images/03e0f9fe2c7f320b6d6f9887cd2a3247.png)Â Â Â Â Â Â Â Â Â Â ![image](../Images/f5f3344e6fdbd749f45017a3122cd0cb.png)'
  id: totrans-1110
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/03e0f9fe2c7f320b6d6f9887cd2a3247.png)Â Â Â Â Â Â Â Â Â Â ![image](../Images/f5f3344e6fdbd749f45017a3122cd0cb.png)'
- en: 'The left one shows a smooth curve, connecting points A and C; the right one
    supplies the perspective point, B, and the angle of an observer.One method for
    drawing such curves is due to BÃ©zier. It is a prime example of generative recursion,
    and the following sequence explains the eureka! behind the algorithm:'
  id: totrans-1111
  prefs: []
  type: TYPE_NORMAL
  zh: å·¦ä¾§çš„ä¸€ä¸ªæ˜¾ç¤ºäº†è¿æ¥ç‚¹ A å’Œ C çš„å¹³æ»‘æ›²çº¿ï¼›å³ä¾§çš„ä¸€ä¸ªæä¾›äº†è§‚å¯Ÿç‚¹ B å’Œè§‚å¯Ÿè€…çš„è§’åº¦ã€‚ç»˜åˆ¶æ­¤ç±»æ›²çº¿çš„ä¸€ç§æ–¹æ³•å½’åŠŸäºè´å¡å°”ã€‚å®ƒæ˜¯ç”Ÿæˆé€’å½’çš„ä¸€ä¸ªå…¸å‹ä¾‹å­ï¼Œä»¥ä¸‹åºåˆ—è§£é‡Šäº†ç®—æ³•èƒŒåçš„â€œeureka!â€ï¼š
- en: '![image](../Images/3ea5ad1c68940e922a8a902a41871aea.png)Â Â ![image](../Images/7f5a5777c79d9992bcf9e8a458e8df9d.png)Â Â ![image](../Images/283c9ed97f1b9d4f0658106c069b2895.png)'
  id: totrans-1112
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/3ea5ad1c68940e922a8a902a41871aea.png)Â Â ![image](../Images/7f5a5777c79d9992bcf9e8a458e8df9d.png)Â Â ![image](../Images/283c9ed97f1b9d4f0658106c069b2895.png)'
- en: Consider the image on the left. It reminds you that the three given points determine
    a triangle and that the connection from A to C is the focal point of the algorithm.
    The goal is to pull the line from A to C toward B so that it turns into a smooth
    curve.
  id: totrans-1113
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘å·¦ä¾§çš„å›¾åƒã€‚å®ƒæé†’ä½ ï¼Œä¸‰ä¸ªç»™å®šçš„ç‚¹ç¡®å®šäº†ä¸€ä¸ªä¸‰è§’å½¢ï¼Œå¹¶ä¸”ä» A åˆ° C çš„è¿æ¥æ˜¯ç®—æ³•çš„ç„¦ç‚¹ã€‚ç›®æ ‡æ˜¯å°† A åˆ° C çš„çº¿æ‹‰å‘ Bï¼Œä½¿å…¶å˜æˆä¸€æ¡å¹³æ»‘çš„æ›²çº¿ã€‚
- en: Now turn to the image in the middle. It explains the essential idea of the generative
    step. The algorithm determines the midpoint on the two observer lines, A-B and
    B-C, as well as their midpoint, A-B-C.
  id: totrans-1114
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è½¬å‘ä¸­é—´çš„å›¾åƒã€‚å®ƒè§£é‡Šäº†ç”Ÿæˆæ­¥éª¤çš„åŸºæœ¬æ€æƒ³ã€‚ç®—æ³•ç¡®å®šäº†ä¸¤ä¸ªè§‚å¯Ÿçº¿ A-B å’Œ B-C ä»¥åŠå®ƒä»¬çš„ä¸­é—´ç‚¹ A-B-C çš„ä¸­ç‚¹ã€‚
- en: 'Finally, the right-most image shows how these three new points generate two
    distinct recursive calls: one deals with the new triangle on the left and the
    other one with the triangle on the right. More precisely, A-B and B-C become the
    new observer points and the lines from A to A-B-C and from C to A-B-C become the
    foci of the two recursive calls.'
  id: totrans-1115
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œæœ€å³ä¾§çš„å›¾åƒå±•ç¤ºäº†è¿™ä¸‰ä¸ªæ–°ç‚¹å¦‚ä½•ç”Ÿæˆä¸¤ä¸ªä¸åŒçš„é€’å½’è°ƒç”¨ï¼šä¸€ä¸ªå¤„ç†å·¦ä¾§çš„æ–°ä¸‰è§’å½¢ï¼Œå¦ä¸€ä¸ªå¤„ç†å³ä¾§çš„ä¸‰è§’å½¢ã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼ŒA-B å’Œ B-C æˆä¸ºæ–°çš„è§‚å¯Ÿç‚¹ï¼Œä»
    A åˆ° A-B-C å’Œä» C åˆ° A-B-C çš„çº¿æˆä¸ºä¸¤ä¸ªé€’å½’è°ƒç”¨çš„ç„¦ç‚¹ã€‚
- en: When the triangle is small enough, we have a trivially solvable case. The algorithm
    just draws the triangle, and it appears as a point on the given image. As you
    implement this algorithm, you need to experiment with the notion of â€œsmall enoughâ€
    to make the curve look smooth.
  id: totrans-1116
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä¸‰è§’å½¢è¶³å¤Ÿå°çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ä»¥è½»æ˜“è§£å†³çš„ç®€å•æƒ…å†µã€‚ç®—æ³•åªæ˜¯ç»˜åˆ¶ä¸‰è§’å½¢ï¼Œå®ƒçœ‹èµ·æ¥å°±åƒç»™å®šå›¾åƒä¸Šçš„ä¸€ä¸ªç‚¹ã€‚åœ¨å®ç°è¿™ä¸ªç®—æ³•æ—¶ï¼Œä½ éœ€è¦å®éªŒâ€œè¶³å¤Ÿå°â€çš„æ¦‚å¿µï¼Œä»¥ä½¿æ›²çº¿çœ‹èµ·æ¥å¹³æ»‘ã€‚
- en: 34Summary[ğŸ”—](#(part._ch~3asummary6) "Link to here")
  id: totrans-1117
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 34 æ‘˜è¦[ğŸ”—](#(part._ch~3asummary6) "é“¾æ¥åˆ°è¿™é‡Œ")
- en: 'This last part is about designing with accumulators, a mechanism for collecting
    knowledge during a data structure traversal. Adding an accumulator can fix performance
    flaws and eliminate termination problems. Your takeaway from this part are two
    and a half design lessons:'
  id: totrans-1118
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æœ€åä¸€éƒ¨åˆ†æ˜¯å…³äºä½¿ç”¨ç´¯åŠ å™¨è¿›è¡Œè®¾è®¡ï¼Œè¿™æ˜¯ä¸€ç§åœ¨æ•°æ®ç»“æ„éå†è¿‡ç¨‹ä¸­æ”¶é›†çŸ¥è¯†çš„æ–¹æ³•ã€‚æ·»åŠ ç´¯åŠ å™¨å¯ä»¥ä¿®å¤æ€§èƒ½ç¼ºé™·å¹¶æ¶ˆé™¤ç»ˆæ­¢é—®é¢˜ã€‚ä»è¿™ä¸ªéƒ¨åˆ†ï¼Œä½ å¯ä»¥å­¦åˆ°ä¸¤ä¸ªåŠçš„è®¾è®¡è¯¾ç¨‹ï¼š
- en: The first step is to recognize the need for introducing an accumulator. Traversals
    â€œforgetâ€ pieces of the argument when they step from one piece to the next. If
    you discover that such knowledge could simplify the functionâ€™s design, consider
    introducing an accumulator. The first step is to switch to the accumulator template.
  id: totrans-1119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€æ­¥æ˜¯è®¤è¯†åˆ°å¼•å…¥ç´¯åŠ å™¨çš„éœ€è¦ã€‚éå†åœ¨ä»ä¸€ä¸ªéƒ¨åˆ†ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªéƒ¨åˆ†æ—¶ä¼šâ€œå¿˜è®°â€ä¸€äº›å‚æ•°ã€‚å¦‚æœä½ å‘ç°è¿™æ ·çš„çŸ¥è¯†å¯ä»¥ç®€åŒ–å‡½æ•°çš„è®¾è®¡ï¼Œè€ƒè™‘å¼•å…¥ç´¯åŠ å™¨ã€‚ç¬¬ä¸€æ­¥æ˜¯åˆ‡æ¢åˆ°ç´¯åŠ å™¨æ¨¡æ¿ã€‚
- en: The key step is to formulate an accumulator statement. The latter must express
    what knowledge the accumulator gathers as what kind of data. In most cases, the
    accumulator statement describes the difference between the original argument and
    the current one.
  id: totrans-1120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å…³é”®æ­¥éª¤æ˜¯åˆ¶å®šç´¯åŠ å™¨è¯­å¥ã€‚åè€…å¿…é¡»è¡¨è¾¾ç´¯åŠ å™¨æ”¶é›†çš„çŸ¥è¯†ä½œä¸ºä½•ç§ç±»å‹çš„æ•°æ®ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç´¯åŠ å™¨è¯­å¥æè¿°äº†åŸå§‹å‚æ•°å’Œå½“å‰å‚æ•°ä¹‹é—´çš„å·®å¼‚ã€‚
- en: The third step, a minor one, is to deduce from the accumulator statement (a)
    what the initial accumulator value is, (b) how to maintain it during traversal
    steps, and (c) how to exploit its knowledge.
  id: totrans-1121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç¬¬ä¸‰æ­¥ï¼Œä¸€ä¸ªå°çš„æ­¥éª¤ï¼Œæ˜¯ä»ç´¯åŠ å™¨è¯­å¥ï¼ˆaï¼‰æ¨æ–­å‡ºåˆå§‹ç´¯åŠ å™¨å€¼ï¼Œï¼ˆbï¼‰å¦‚ä½•åœ¨éå†æ­¥éª¤ä¸­ç»´æŠ¤å®ƒï¼Œï¼ˆcï¼‰å¦‚ä½•åˆ©ç”¨å®ƒçš„çŸ¥è¯†ã€‚
- en: The idea of accumulating knowledge is ubiquitous, and it appears in many different
    forms and shapes. It is widely used in so-called functional languages like ISL+.
    Programmers using imperative languages encounter accumulators in a different way,
    mostly via assignment statements in primitive looping constructs because the latter
    cannot return values. Designing such imperative accumulator programs proceeds
    just like the design of accumulator functions here, but the details are beyond
    the scope of this first book on systematic program design.
  id: totrans-1122
  prefs: []
  type: TYPE_NORMAL
  zh: ç´¯ç§¯çŸ¥è¯†çš„ç†å¿µæ— å¤„ä¸åœ¨ï¼Œå¹¶ä»¥å¤šç§ä¸åŒçš„å½¢å¼å’Œå½¢æ€å‡ºç°ã€‚å®ƒåœ¨æ‰€è°“çš„åŠŸèƒ½è¯­è¨€å¦‚ISL+ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚ä½¿ç”¨å‘½ä»¤å¼è¯­è¨€çš„ç¨‹åºå‘˜ä»¥ä¸åŒçš„æ–¹å¼é‡åˆ°ç´¯åŠ å™¨ï¼Œä¸»è¦æ˜¯é€šè¿‡åŸå§‹å¾ªç¯ç»“æ„ä¸­çš„èµ‹å€¼è¯­å¥ï¼Œå› ä¸ºåè€…æ— æ³•è¿”å›å€¼ã€‚è®¾è®¡è¿™æ ·çš„å‘½ä»¤å¼ç´¯åŠ å™¨ç¨‹åºçš„è¿‡ç¨‹ä¸è¿™é‡Œç´¯åŠ å™¨å‡½æ•°çš„è®¾è®¡è¿‡ç¨‹ç±»ä¼¼ï¼Œä½†ç»†èŠ‚è¶…å‡ºäº†è¿™æœ¬å…³äºç³»ç»ŸåŒ–ç¨‹åºè®¾è®¡çš„ç¬¬ä¸€æœ¬ä¹¦çš„èŒƒå›´ã€‚
