- en: Resizing
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 调整大小
- en: 原文：[https://rust-exercises.com/100-exercises/06_ticket_management/03_resizing.html](https://rust-exercises.com/100-exercises/06_ticket_management/03_resizing.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://rust-exercises.com/100-exercises/06_ticket_management/03_resizing.html](https://rust-exercises.com/100-exercises/06_ticket_management/03_resizing.html)
- en: We said that `Vec` is a "growable" vector type, but what does that mean? What
    happens if you try to insert an element into a `Vec` that's already at maximum
    capacity?
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们说`Vec`是一种“可增长”的向量类型，但这究竟意味着什么？如果你试图向已达到最大容量的`Vec`中插入一个元素会发生什么？
- en: '[PRE0]'
  id: totrans-3
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The `Vec` will **resize** itself.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '`Vec`将**自动调整大小**。'
- en: It will ask the allocator for a new (larger) chunk of heap memory, copy the
    elements over, and deallocate the old memory.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 它将向分配器请求一个新的（更大的）堆内存块，复制元素，并释放旧内存。
- en: This operation can be expensive, as it involves a new memory allocation and
    copying all existing elements.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 这个操作可能很昂贵，因为它涉及到新的内存分配和复制所有现有元素。
- en: '[`Vec::with_capacity`](#vecwith_capacity)'
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[Vec::with_capacity](#vecwith_capacity)'
- en: If you have a rough idea of how many elements you'll store in a `Vec`, you can
    use the `Vec::with_capacity` method to pre-allocate enough memory upfront.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有一个大致的元素数量存储在`Vec`中的概念，你可以使用`Vec::with_capacity`方法预先分配足够的内存。
- en: This can avoid a new allocation when the `Vec` grows, but it may waste memory
    if you overestimate actual usage.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以在`Vec`增长时避免新的分配，但如果你高估了实际的使用量，可能会浪费内存。
- en: Evaluate on a case-by-case basis.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 需要逐个案例进行评估。
- en: '[Exercise](#exercise)'
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[练习](#exercise)'
- en: The exercise for this section is located in [`06_ticket_management/03_resizing`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/06_ticket_management/03_resizing)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本节练习位于[`06_ticket_management/03_resizing`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/06_ticket_management/03_resizing)
