- en: Collections
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://freddiehaddad.github.io/fast-track-to-rust/collections.html](https://freddiehaddad.github.io/fast-track-to-rust/collections.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Rust's standard library features some highly powerful and useful data structures,
    referred to as [collections](https://doc.rust-lang.org/std/collections/index.html).
    While we'll explore one of them in this course, it's definitely worth spending
    time reviewing the entire collections library.
  prefs: []
  type: TYPE_NORMAL
- en: 'The collections are commonly grouped into four categories:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Sequences: [Vec](https://doc.rust-lang.org/std/vec/struct.Vec.html), [VecDeque](https://doc.rust-lang.org/std/collections/struct.VecDeque.html),
    [LinkedList](https://doc.rust-lang.org/std/collections/struct.LinkedList.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Maps: [HashMap](https://doc.rust-lang.org/std/collections/hash_map/struct.HashMap.html),
    [BTreeMap](https://doc.rust-lang.org/std/collections/struct.BTreeMap.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Sets: [HashSet](https://doc.rust-lang.org/std/collections/hash_set/struct.HashSet.html),
    [BTreeSet](https://doc.rust-lang.org/std/collections/struct.BTreeSet.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Misc: [BinaryHeap](https://doc.rust-lang.org/std/collections/struct.BinaryHeap.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Rustle](#rustle)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Currently, our rustle program only outputs the line number and the matching
    line for each pattern match. It doesn't yet support printing lines before or after
    the match. So far, we haven't had a straightforward way to implement this functionality,
    and there are several challenges we need to address.
  prefs: []
  type: TYPE_NORMAL
- en: '[Handling Context](#handling-context)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The `--before-context` option requires us to print preceding lines when we encounter
    a match. This necessitates a mechanism to reference those lines. However, we should
    only print each line once to avoid duplicating lines when consecutive lines within
    the context contain matches.
  prefs: []
  type: TYPE_NORMAL
- en: 'Consider the poem from our code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'If the pattern is "him" and the number of lines to print before each match
    is set to 2 (`--before-context=2`), without a method to track printed lines, we
    would end up with the following output:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'This is not the behavior we want from our rustle program. Instead, we aim for
    the following output:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: A similar issue arises with `--after-context`. Our solution involves using a
    vector and tuples (since we are now familiar with them) to create intervals over
    the ranges of lines we want to print.
  prefs: []
  type: TYPE_NORMAL
- en: '[Accessing Lines from the Input](#accessing-lines-from-the-input)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The context problem indicates that we need a method to reference a range of
    lines around each match. We'll address this by storing the lines in a collection
    from the Rust standard library called a vector `Vec<T>`.
  prefs: []
  type: TYPE_NORMAL
- en: '[Tracking the Lines Surrounding Each Match](#tracking-the-lines-surrounding-each-match)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Since we are familiar with them, we can use a `tuple` to represent the starting
    and ending intervals around each match. We'll need to track these intervals and
    merge overlapping ones to avoid printing the same line multiple times. Once again,
    a vector will be useful!
  prefs: []
  type: TYPE_NORMAL
- en: '[Next](#next)'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Let's start coding!
  prefs: []
  type: TYPE_NORMAL
