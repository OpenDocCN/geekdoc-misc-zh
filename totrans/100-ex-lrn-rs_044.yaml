- en: match
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: match
- en: 原文：[https://rust-exercises.com/100-exercises/05_ticket_v2/02_match.html](https://rust-exercises.com/100-exercises/05_ticket_v2/02_match.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://rust-exercises.com/100-exercises/05_ticket_v2/02_match.html](https://rust-exercises.com/100-exercises/05_ticket_v2/02_match.html)
- en: You may be wondering—what can you actually **do** with an enum?
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会想知道——你实际上可以用枚举做什么？
- en: The most common operation is to **match** on it.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 最常见的操作是对其进行 **匹配**。
- en: '[PRE0]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A `match` statement that lets you compare a Rust value against a series of **patterns**.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 一个 `match` 语句允许你将 Rust 值与一系列 **模式** 进行比较。
- en: You can think of it as a type-level `if`. If `status` is a `Done` variant, execute
    the first block; if it's a `InProgress` or `ToDo` variant, execute the second
    block.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以将其视为类型级别的 `if`。如果 `status` 是 `Done` 变体，则执行第一个块；如果它是 `InProgress` 或 `ToDo`
    变体，则执行第二个块。
- en: '[Exhaustiveness](#exhaustiveness)'
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[详尽性](#详尽性)'
- en: 'There''s one key detail here: `match` is **exhaustive**. You must handle all
    enum variants.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一个关键细节：`match` 是 **详尽性** 的。你必须处理所有枚举变体。
- en: If you forget to handle a variant, Rust will stop you **at compile-time** with
    an error.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你忘记处理一个变体，Rust 将在编译时通过错误阻止你。
- en: 'E.g. if we forget to handle the `ToDo` variant:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果我们忘记处理 `ToDo` 变体：
- en: '[PRE1]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'the compiler will complain:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 编译器会抱怨：
- en: '[PRE2]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: This is a big deal!
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这非常重要！
- en: Codebases evolve over time—you might add a new status down the line, e.g. `Blocked`.
    The Rust compiler will emit an error for every single `match` statement that's
    missing logic for the new variant. That's why Rust developers often sing the praises
    of "compiler-driven refactoring"—the compiler tells you what to do next, you just
    have to fix what it reports.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 代码库会随着时间的推移而演变——你可能会在以后添加一个新的状态，例如 `Blocked`。Rust 编译器将为每个缺少对新变体逻辑处理的 `match`
    语句发出错误。这就是为什么 Rust 开发者经常赞美“由编译器驱动的重构”——编译器告诉你下一步该做什么，你只需修复它报告的内容。
- en: '[Catch-all](#catch-all)'
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[通配符](#通配符)'
- en: 'If you don''t care about one or more variants, you can use the `_` pattern
    as a catch-all:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不在乎一个或多个变体，你可以使用 `_` 模式作为一个通配符：
- en: '[PRE3]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The `_` pattern matches anything that wasn't matched by the previous patterns.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '`_` 模式匹配任何之前模式未匹配的内容。'
- en: By using this catch-all pattern, you _won't_ get the benefits of compiler-driven
    refactoring. If you add a new enum variant, the compiler _won't_ tell you that
    you're not handling it.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用这个通配符模式，你 _不会_ 获得由编译器驱动的重构的好处。如果你添加了一个新的枚举变体，编译器 _不会_ 告诉你你没有处理它。
- en: If you're keen on correctness, avoid using catch-alls. Leverage the compiler
    to re-examine all matching sites and determine how new enum variants should be
    handled.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你注重正确性，避免使用通配符。利用编译器重新检查所有匹配点，并确定如何处理新的枚举变体。
- en: '[Exercise](#exercise)'
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[练习](#练习)'
- en: The exercise for this section is located in [`05_ticket_v2/02_match`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/05_ticket_v2/02_match)
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 本节的练习位于 `05_ticket_v2/02_match` 中。
