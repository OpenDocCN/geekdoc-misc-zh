["```rs\nfn read_file(file: impl Read) -> Vec<String>\n```", "```rs\nlet poem = \"I have a little shadow that goes in and out with me,\n            And what can be the use of him is more than I can see.\n            He is very, very like me from the heels up to the head;\n            And I see him jump before me, when I jump into my bed.\n\n            The funniest thing about him is the way he likes to grow -\n            Not at all like proper children, which is always very slow;\n            For he sometimes shoots up taller like an india-rubber ball,\n            And he sometimes gets so little that there's none of him at all.\";\n\nlet mock_file = std::io::Cursor::new(poem);\n```", "```rs\n// attempt to open the file\nlet lines = read_file(mock_file);\n//let lines = match File::open(filename) {\n//    // convert the poem into lines\n//    Ok(file) => read_file(file),\n//    Err(e) => {\n//        eprintln!(\"Error opening {filename}: {e}\");\n//        exit(1);\n//    }\n//};\n```", "```rs\n#![allow(unused_imports)]\nuse std::fs::File; use std::io::Read;\nuse std::io::{BufRead, BufReader}; use std::process::exit;   fn find_matching_lines(lines: &[String], pattern: &str) -> Vec<usize> {\n lines .iter() .enumerate() .filter_map(|(i, line)| match line.contains(pattern) { true => Some(i), false => None, }) .collect() // turns anything iterable into a collection }   fn create_intervals(\n lines: Vec<usize>, before_context: usize, after_context: usize, ) -> Vec<(usize, usize)> {\n lines .iter() .map(|line| { ( line.saturating_sub(before_context), line.saturating_add(after_context), ) }) .collect() }   fn merge_intervals(intervals: &mut Vec<(usize, usize)>) {\n // merge overlapping intervals intervals.dedup_by(|next, prev| { if prev.1 < next.0 { false } else { prev.1 = next.1; true } }) }   fn print_results(intervals: Vec<(usize, usize)>, lines: Vec<String>) {\n for (start, end) in intervals { for (line_no, line) in lines.iter().enumerate().take(end + 1).skip(start) { println!(\"{}: {}\", line_no + 1, line) } } }   fn read_file(file: impl Read) -> Vec<String> {\n    BufReader::new(file).lines().map_while(Result::ok).collect()\n}\n\nfn main() {\n    let poem = \"I have a little shadow that goes in and out with me,\n            And what can be the use of him is more than I can see.\n            He is very, very like me from the heels up to the head;\n            And I see him jump before me, when I jump into my bed.\n\n            The funniest thing about him is the way he likes to grow -\n            Not at all like proper children, which is always very slow;\n            For he sometimes shoots up taller like an india-rubber ball,\n            And he sometimes gets so little that there's none of him at all.\";\n\n    let mock_file = std::io::Cursor::new(poem);\n\n    // command line arguments\n    let pattern = \"all\";\n    let before_context = 1;\n    let after_context = 1;\n\n    // attempt to open the file\n    let lines = read_file(mock_file);\n //let lines = match File::open(filename) { //    // convert the poem into lines //    Ok(file) => read_file(file), //    Err(e) => { //        eprintln!(\"Error opening {filename}: {e}\"); //        exit(1); //    } //};   // store the 0-based line number for any matched line let match_lines = find_matching_lines(&lines, pattern);   // create intervals of the form [a,b] with the before/after context let mut intervals = create_intervals(match_lines, before_context, after_context);   // merge overlapping intervals merge_intervals(&mut intervals);   // print the lines print_results(intervals, lines); }\n```"]