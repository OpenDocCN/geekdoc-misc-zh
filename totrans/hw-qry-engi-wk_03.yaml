- en: Introduction
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: 原文：[https://howqueryengineswork.com/00-introduction.html](https://howqueryengineswork.com/00-introduction.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[https://howqueryengineswork.com/00-introduction.html](https://howqueryengineswork.com/00-introduction.html)'
- en: Query engines are the invisible workhorses powering modern data infrastructure.
    Every time you run a SQL query against a database, execute a Spark job, or query
    a data lake, a query engine is transforming your high-level request into an efficient
    execution plan. Understanding how query engines work gives you insight into one
    of the most important abstractions in computing.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 查询引擎是推动现代数据基础设施的无形工作马。每次你在数据库上运行 SQL 查询、执行 Spark 作业或查询数据湖时，查询引擎都会将你的高级请求转换为高效的执行计划。了解查询引擎的工作原理，可以让你深入了解计算中最重要抽象之一。
- en: This book takes a hands-on approach to demystifying query engines. Rather than
    surveying existing systems, we will build a fully functional query engine from
    scratch, covering each component in enough depth that you could implement your
    own.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书采用动手实践的方法来揭示查询引擎的神秘面纱。我们不会调查现有系统，而是从头开始构建一个完全功能性的查询引擎，对每个组件进行足够的深入探讨，以便你可以实现自己的。
- en: '[Who This Book Is For](#who-this-book-is-for)'
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[本书面向对象](#本书面向对象)'
- en: 'This book is for software engineers who want to understand the internals of
    query engines. You might be:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本书面向希望了解查询引擎内部结构的软件工程师。你可能：
- en: A data engineer who wants to understand why queries perform the way they do
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 想了解查询为何以这种方式执行的数据库工程师
- en: A database developer looking to learn foundational concepts
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 希望学习基础概念的数据库开发者
- en: A software engineer curious about compiler-like systems
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对编译器类系统感兴趣的软件工程师
- en: Someone building tooling that needs to parse or analyze SQL
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正在构建需要解析或分析 SQL 的工具的人
- en: Basic programming knowledge is assumed. The examples use Kotlin, chosen for
    its conciseness, but the concepts apply to any language.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 假设具备基本的编程知识。示例使用 Kotlin，因为它简洁，但概念适用于任何语言。
- en: '[What You Will Learn](#what-you-will-learn)'
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[你将学到什么](#你将学到什么)'
- en: 'By the end of this book, you will understand how to:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 到本书结束时，你将了解如何：
- en: Design a columnar type system using Apache Arrow
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Apache Arrow 设计列式类型系统
- en: Build data source connectors for CSV and Parquet files
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 CSV 和 Parquet 文件构建数据源连接器
- en: Represent queries as logical and physical plans
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将查询表示为逻辑和物理计划
- en: Create a DataFrame API for building queries programmatically
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建 DataFrame API 以编程方式构建查询
- en: Translate logical plans into executable physical plans
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将逻辑计划转换为可执行的物理计划
- en: Implement query optimizations like projection and predicate push-down
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现查询优化，如投影和谓词下推
- en: Parse SQL and convert it to query plans
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解析 SQL 并将其转换为查询计划
- en: Execute queries in parallel across multiple CPU cores
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在多个 CPU 核心上并行执行查询
- en: Design distributed query execution across a cluster
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设计跨集群的分布式查询执行
- en: '[How This Book Is Organized](#how-this-book-is-organized)'
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[本书的组织结构](#本书的组织结构)'
- en: The book follows the natural architecture of a query engine, building each layer
    on top of the previous.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 本书遵循查询引擎的自然架构，在上一层基础上构建每一层。
- en: Chapters 1 through 4 cover the foundations. We start with what a query engine
    is, then establish our foundation with Apache Arrow for the memory model, a type
    system for representing data, and data source abstractions for reading files.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 第 1 章至第 4 章涵盖基础内容。我们首先介绍查询引擎是什么，然后使用 Apache Arrow 建立内存模型的基础，一个用于表示数据的类型系统，以及用于读取文件的源数据抽象。
- en: Chapters 5 through 7 cover query representation. We define logical plans and
    expressions to represent queries abstractly, build a DataFrame API for constructing
    plans programmatically, and add SQL support so queries can be written in the familiar
    query language.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 第 5 章至第 7 章涵盖查询表示。我们定义逻辑计划和表达式来抽象地表示查询，构建 DataFrame API 以编程方式构建计划，并添加 SQL 支持，以便可以使用熟悉的查询语言编写查询。
- en: Chapters 8 through 10 cover execution. We translate logical plans into physical
    plans containing executable code, then cover joins and subqueries, two of the
    most complex operations in query processing.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 第 8 章至第 10 章涵盖执行。我们将逻辑计划转换为包含可执行代码的物理计划，然后介绍连接和子查询，这是查询处理中最复杂的两个操作。
- en: Chapters 11 through 13 cover planning and optimization. We implement a query
    planner to automate the translation from logical to physical plans, build optimizer
    rules to transform plans into more efficient forms, and execute queries to compare
    performance.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 第 11 章至第 13 章涵盖规划和优化。我们实现查询规划器来自动化逻辑到物理计划的转换，构建优化规则将计划转换为更有效的形式，并执行查询以比较性能。
- en: Chapters 14 and 15 cover scaling. We extend the engine to execute queries in
    parallel across CPU cores, then across distributed clusters.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 第14章和第15章涵盖了扩展性。我们将引擎扩展到能够在CPU核心之间并行执行查询，然后扩展到分布式集群之间。
- en: Chapters 16 and 17 cover quality. We cover testing strategies including fuzzing,
    and benchmarking approaches for measuring performance.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 第16章和第17章涵盖了质量。我们涵盖了包括模糊测试在内的测试策略，以及用于衡量性能的基准测试方法。
- en: '*This book is also available for purchase in ePub, MOBI, and PDF format from
    [https://leanpub.com/how-query-engines-work](https://leanpub.com/how-query-engines-work)*'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '*本书也以ePub、MOBI和PDF格式在[https://leanpub.com/how-query-engines-work](https://leanpub.com/how-query-engines-work)上提供购买。*'
- en: '**Copyright © 2020-2025 Andy Grove. All rights reserved.**'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '**版权所有 © 2020-2025 安迪·格鲁夫。保留所有权利。**'
