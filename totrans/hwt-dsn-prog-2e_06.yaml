- en: IIÂ Arbitrarily Large DatağŸ”—
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: IIÂ ä»»æ„å¤§çš„æ•°æ®ğŸ”—
- en: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/part_two.html](https://htdp.org/2024-11-6/Book/part_two.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/part_two.html](https://htdp.org/2024-11-6/Book/part_two.html)
- en: '| Â Â Â Â [8Â Lists](#%28part._ch~3alists1%29) |'
  id: totrans-2
  prefs: []
  type: TYPE_TB
  zh: '|   [8Â åˆ—è¡¨](#%28part._ch~3alists1%29) |'
- en: '| Â Â Â Â Â Â [8.1Â Creating Lists](#%28part._sec~3alists-records%29) |'
  id: totrans-3
  prefs: []
  type: TYPE_TB
  zh: '|   [8.1Â åˆ›å»ºåˆ—è¡¨](#%28part._sec~3alists-records%29) |'
- en: '| Â Â Â Â Â Â [8.2Â What Is ''(), What Is cons](#%28part._sec~3alists-cons%29) |'
  id: totrans-4
  prefs: []
  type: TYPE_TB
  zh: '|   [8.2Â ä»€ä¹ˆæ˜¯''()ï¼Œä»€ä¹ˆæ˜¯cons](#%28part._sec~3alists-cons%29) |'
- en: '| Â Â Â Â Â Â [8.3Â Programming with Lists](#%28part._sec~3alists-programming%29)
    |'
  id: totrans-5
  prefs: []
  type: TYPE_TB
  zh: '|   [8.3Â ä½¿ç”¨åˆ—è¡¨è¿›è¡Œç¼–ç¨‹](#%28part._sec~3alists-programming%29) |'
- en: '| Â Â Â Â Â Â [8.4Â Computing with Lists](#%28part._sec~3aeval-list%29) |'
  id: totrans-6
  prefs: []
  type: TYPE_TB
  zh: '|   [8.4Â ä½¿ç”¨åˆ—è¡¨è¿›è¡Œè®¡ç®—](#%28part._sec~3aeval-list%29) |'
- en: '| Â Â Â Â [9Â Designing with Self-Referential Data Definitions](#%28part._ch~3adesign-lists%29)
    |'
  id: totrans-7
  prefs: []
  type: TYPE_TB
  zh: '|   [9Â ä½¿ç”¨è‡ªå¼•ç”¨æ•°æ®å®šä¹‰è¿›è¡Œè®¾è®¡](#%28part._ch~3adesign-lists%29) |'
- en: '| Â Â Â Â Â Â [9.1Â Finger Exercises: Lists](#%28part._sec~3afinger-lists%29) |'
  id: totrans-8
  prefs: []
  type: TYPE_TB
  zh: '|   [9.1Â æ‰‹æŒ‡ç»ƒä¹ ï¼šåˆ—è¡¨](#%28part._sec~3afinger-lists%29) |'
- en: '| Â Â Â Â Â Â [9.2Â Non-empty Lists](#%28part._sec~3alists~3ane%29) |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '|   [9.2Â éç©ºåˆ—è¡¨](#%28part._sec~3alists~3ane%29) |'
- en: '| Â Â Â Â Â Â [9.3Â Natural Numbers](#%28part._sec~3anats%29) |'
  id: totrans-10
  prefs: []
  type: TYPE_TB
  zh: '|   [9.3Â è‡ªç„¶æ•°](#%28part._sec~3anats%29) |'
- en: '| Â Â Â Â Â Â [9.4Â Russian Dolls](#%28part._rd._sec~3ard%29) |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '|   [9.4Â ä¿„ç½—æ–¯å¥—å¨ƒ](#%28part._rd._sec~3ard%29) |'
- en: '| Â Â Â Â Â Â [9.5Â Lists and World](#%28part._sec~3alist-world%29) |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '|   [9.5Â åˆ—è¡¨å’Œä¸–ç•Œ](#%28part._sec~3alist-world%29) |'
- en: '| Â Â Â Â Â Â [9.6Â A Note on Lists and Sets](#%28part._sec~3alist-set%29) |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '|   [9.6Â å…³äºåˆ—è¡¨å’Œé›†åˆçš„æ³¨é‡Š](#%28part._sec~3alist-set%29) |'
- en: '| Â Â Â Â [10Â More on Lists](#%28part._ch~3alists2%29) |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '|   [10Â æ›´å¤šå…³äºåˆ—è¡¨çš„å†…å®¹](#%28part._ch~3alists2%29) |'
- en: '| Â Â Â Â Â Â [10.1Â Functions that Produce Lists](#%28part._sec~3alist-produce%29)
    |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '|   [10.1Â äº§ç”Ÿåˆ—è¡¨çš„å‡½æ•°](#%28part._sec~3alist-produce%29) |'
- en: '| Â Â Â Â Â Â [10.2Â Structures in Lists](#%28part._sec~3asil%29) |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '|   [10.2Â åˆ—è¡¨ä¸­çš„ç»“æ„](#%28part._sec~3asil%29) |'
- en: '| Â Â Â Â Â Â [10.3Â Lists in Lists, Files](#%28part._sec~3alis-lis%29) |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '|   [10.3Â åˆ—è¡¨ä¸­çš„åˆ—è¡¨ï¼Œæ–‡ä»¶](#%28part._sec~3alis-lis%29)'
- en: '| Â Â Â Â Â Â [10.4Â A Graphical Editor, Revisited](#%28part._list-edit2._sec~3aedit2%29)
    |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '|   [10.4Â å›¾å½¢ç¼–è¾‘å™¨ï¼Œé‡è®¿](#%28part._list-edit2._sec~3aedit2%29) |'
- en: '| Â Â Â Â [11Â Design by Composition](#%28part._ch~3alist-sort%29) |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '|   [11Â é€šè¿‡ç»„åˆè¿›è¡Œè®¾è®¡](#%28part._ch~3alist-sort%29) |'
- en: '| Â Â Â Â Â Â [11.1Â The list Function](#%28part._sec~3aabbrev%29) |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '|   [11.1Â åˆ—è¡¨å‡½æ•°](#%28part._sec~3aabbrev%29) |'
- en: '| Â Â Â Â Â Â [11.2Â Composing Functions](#%28part._sec~3acompounding2%29) |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '|   [11.2Â å‡½æ•°ç»„åˆ](#%28part._sec~3acompounding2%29) |'
- en: '| Â Â Â Â Â Â [11.3Â Auxiliary Functions that Recur](#%28part._sec~3asort.I%29) |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '|   [11.3Â é€’å½’çš„è¾…åŠ©å‡½æ•°](#%28part._sec~3asort.I%29) |'
- en: '| Â Â Â Â Â Â [11.4Â Auxiliary Functions that Generalize](#%28part._sec~3agen-funcs%29)
    |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '|   [11.4Â æ³›åŒ–çš„è¾…åŠ©å‡½æ•°](#%28part._sec~3agen-funcs%29) |'
- en: '| Â Â Â Â [12Â Projects: Lists](#%28part._ch~3aproj-lists%29) |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '|   [12Â é¡¹ç›®ï¼šåˆ—è¡¨](#%28part._ch~3aproj-lists%29) |'
- en: '| Â Â Â Â Â Â [12.1Â Real-World Data: Dictionaries](#%28part._sec~3adict%29) |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '|   [12.1Â ç°å®ä¸–ç•Œæ•°æ®ï¼šå­—å…¸](#%28part._sec~3adict%29) |'
- en: '| Â Â Â Â Â Â [12.2Â Real-World Data: iTunes](#%28part._itunes-data._sec~3aitunes%29)
    |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '|   [12.2Â ç°å®ä¸–ç•Œæ•°æ®ï¼šiTunes](#%28part._itunes-data._sec~3aitunes%29) |'
- en: '| Â Â Â Â Â Â [12.3Â Word Games, Composition Illustrated](#%28part._sec~3apermute-composition%29)
    |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '|   [12.3Â æ–‡å­—æ¸¸æˆï¼Œç»„æˆå›¾è§£](#%28part._sec~3apermute-composition%29) |'
- en: '| Â Â Â Â Â Â [12.4Â Word Games, the Heart of the Problem](#%28part._sec~3apermute%29)
    |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '|   [12.4Â æ–‡å­—æ¸¸æˆï¼Œé—®é¢˜çš„æ ¸å¿ƒ](#%28part._sec~3apermute%29) |'
- en: '| Â Â Â Â Â Â [12.5Â Feeding Worms](#%28part._sec~3aworms%29) |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '|   [12.5Â å–‚è™«å­](#%28part._sec~3aworms%29) |'
- en: '| Â Â Â Â Â Â [12.6Â Simple Tetris](#%28part._sec~3atetris%29) |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '|   [12.6Â ç®€å•çš„ä¿„ç½—æ–¯æ–¹å—](#%28part._sec~3atetris%29) |'
- en: '| Â Â Â Â Â Â [12.7Â Full Space War](#%28part._sec~3aspace-war%29) |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '|   [12.7Â å…¨é¢ç©ºé—´æˆ˜](#%28part._sec~3aspace-war%29) |'
- en: '| Â Â Â Â Â Â [12.8Â Finite State Machines](#%28part._sec~3asec-fsm-list%29) |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '|   [12.8Â æœ‰é™çŠ¶æ€æœº](#%28part._sec~3asec-fsm-list%29) |'
- en: '| Â Â Â Â [13Â Summary](#%28part._ch~3asummary2%29) |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '|   [13Â æ€»ç»“](#%28part._ch~3asummary2%29) |'
- en: Every data definition in [Fixed-Size Data](part_one.html) describes data of
    a fixed size. To us, Boolean values, numbers, strings, and images are atomic;
    computer scientists say they have a size of one unit. With a structure, you compose
    a fixed number of pieces of data. Even if you use the language of data definitions
    to create deeply nested structures, you always know the exact number of atomic
    pieces of data in any specific instance. Many programming problems, however, deal
    with an undetermined number of pieces of information that must be processed as
    one piece of data. For example, one program may have to compute the average of
    a bunch of numbers and another may have to keep track of an arbitrary number of
    objects in an interactive game. Regardless, it is impossible with your knowledge
    to formulate a data definition that can represent this kind of information as
    data.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨[å›ºå®šå¤§å°æ•°æ®](part_one.html)ä¸­æè¿°çš„æ¯ä¸ªæ•°æ®å®šä¹‰éƒ½æè¿°äº†å›ºå®šå¤§å°çš„æ•°æ®ã€‚å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œå¸ƒå°”å€¼ã€æ•°å­—ã€å­—ç¬¦ä¸²å’Œå›¾åƒæ˜¯åŸå­çš„ï¼›è®¡ç®—æœºç§‘å­¦å®¶è¯´å®ƒä»¬çš„å¤§å°ä¸ºå•ä¸ªå•ä½ã€‚é€šè¿‡ç»“æ„ï¼Œä½ å¯ä»¥ç»„åˆå›ºå®šæ•°é‡çš„æ•°æ®ã€‚å³ä½¿ä½ ä½¿ç”¨æ•°æ®å®šä¹‰çš„è¯­è¨€åˆ›å»ºæ·±åº¦åµŒå¥—çš„ç»“æ„ï¼Œä½ å§‹ç»ˆçŸ¥é“ä»»ä½•ç‰¹å®šå®ä¾‹ä¸­åŸå­æ•°æ®çš„ç¡®åˆ‡æ•°é‡ã€‚ç„¶è€Œï¼Œè®¸å¤šç¼–ç¨‹é—®é¢˜å¤„ç†çš„æ˜¯å¿…é¡»ä½œä¸ºä¸€ä¸ªæ•°æ®å•å…ƒå¤„ç†çš„ä¸ç¡®å®šæ•°é‡çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç¨‹åºå¯èƒ½å¿…é¡»è®¡ç®—ä¸€ç»„æ•°å­—çš„å¹³å‡å€¼ï¼Œå¦ä¸€ä¸ªç¨‹åºå¯èƒ½å¿…é¡»è·Ÿè¸ªäº¤äº’å¼æ¸¸æˆä¸­çš„ä»»æ„æ•°é‡çš„å¯¹è±¡ã€‚æ— è®ºå¦‚ä½•ï¼Œå‡­å€Ÿä½ çš„çŸ¥è¯†ï¼Œä½ æ— æ³•åˆ¶å®šä¸€ä¸ªå¯ä»¥è¡¨ç¤ºæ­¤ç±»ä¿¡æ¯çš„æ•°æ®å®šä¹‰ã€‚
- en: This part revises the language of data definitions so that it becomes possible
    to describe data of (finite but) arbitrary size. For a concrete illustration,
    the first half of this part deals with lists, a form of data that appears in most
    modern programming languages. In parallel with the extended language of data definitions,
    this part also revises the design recipe to cope with such data definitions. The
    latter chapters demonstrate how these data definitions and the revised design
    recipe work in a variety of contexts.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸€éƒ¨åˆ†ä¿®è®¢äº†æ•°æ®å®šä¹‰çš„è¯­è¨€ï¼Œä½¿å…¶èƒ½å¤Ÿæè¿°ï¼ˆæœ‰é™ä½†ï¼‰ä»»æ„å¤§å°çš„æ•°æ®ã€‚ä¸ºäº†å…·ä½“è¯´æ˜ï¼Œæœ¬éƒ¨åˆ†çš„å‰åŠéƒ¨åˆ†å¤„ç†åˆ—è¡¨ï¼Œè¿™æ˜¯å¤§å¤šæ•°ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸­å‡ºç°çš„ä¸€ç§æ•°æ®å½¢å¼ã€‚ä¸æ‰©å±•çš„æ•°æ®å®šä¹‰è¯­è¨€å¹¶è¡Œï¼Œæœ¬éƒ¨åˆ†è¿˜ä¿®è®¢äº†è®¾è®¡é…æ–¹ä»¥åº”å¯¹æ­¤ç±»æ•°æ®å®šä¹‰ã€‚åå‡ ç« å±•ç¤ºäº†è¿™äº›æ•°æ®å®šä¹‰å’Œä¿®è®¢åçš„è®¾è®¡é…æ–¹åœ¨å„ç§æƒ…å¢ƒä¸‹çš„å·¥ä½œæ–¹å¼ã€‚
- en: 8Lists[ğŸ”—](#(part._ch~3alists1) "Link to here")
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8 åˆ—è¡¨[ğŸ”—](#(part._ch~3alists1) "é“¾æ¥è‡³æ­¤")
- en: You have probably not encountered self-referential definitions before. Your
    English teachers certainly stay away from these, and many mathematics courses
    are vague when it comes to such definitions. Programmers cannot afford to be vague.
    Their work requires precision. While a definition may in general contain several
    references to itself, this chapter presents useful examples that need just one,
    starting with the one for lists.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½ä¹‹å‰æ²¡æœ‰é‡åˆ°è¿‡è‡ªå¼•ç”¨çš„å®šä¹‰ã€‚ä½ çš„è‹±è¯­è€å¸ˆå½“ç„¶ä¼šé¿å…è¿™äº›ï¼Œè®¸å¤šæ•°å­¦è¯¾ç¨‹åœ¨æ¶‰åŠæ­¤ç±»å®šä¹‰æ—¶ä¹Ÿå«ç³Šä¸æ¸…ã€‚ç¨‹åºå‘˜ä¸èƒ½ afford to be vagueã€‚ä»–ä»¬çš„å·¥ä½œéœ€è¦ç²¾ç¡®ã€‚è™½ç„¶ä¸€ä¸ªå®šä¹‰é€šå¸¸å¯èƒ½åŒ…å«å‡ ä¸ªå¯¹è‡ªèº«çš„å¼•ç”¨ï¼Œä½†æœ¬ç« æä¾›äº†åªéœ€è¦ä¸€ä¸ªçš„æœ‰ç”¨ç¤ºä¾‹ï¼Œä»åˆ—è¡¨çš„å®šä¹‰å¼€å§‹ã€‚
- en: The introduction of lists also spices up the kind of applications we can study.
    While this chapter carefully builds up your intuition with examples, it also motivates
    the revision of the design recipe in the next chapter, which explains how to systematically
    create functions that deal with self-referential data definitions.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ—è¡¨çš„å‡ºç°ä¹Ÿä¸°å¯Œäº†æˆ‘ä»¬å¯ä»¥ç ”ç©¶çš„åº”ç”¨ç±»å‹ã€‚è™½ç„¶æœ¬ç« é€šè¿‡ç¤ºä¾‹ä»”ç»†æ„å»ºä½ çš„ç›´è§‰ï¼Œä½†å®ƒä¹Ÿæ¿€åŠ±äº†ä¸‹ä¸€ç« è®¾è®¡é…æ–¹çš„ä¿®è®¢ï¼Œä¸‹ä¸€ç« è§£é‡Šäº†å¦‚ä½•ç³»ç»Ÿåœ°åˆ›å»ºå¤„ç†è‡ªå¼•ç”¨æ•°æ®å®šä¹‰çš„å‡½æ•°ã€‚
- en: 8.1Creating Lists[ğŸ”—](#(part._sec~3alists-records) "Link to here")
  id: totrans-39
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.1 åˆ›å»ºåˆ—è¡¨[ğŸ”—](#(part._sec~3alists-records) "é“¾æ¥è‡³æ­¤")
- en: All of us make lists all the time. Before we go grocery shopping, we write down
    a list of items we wish to purchase. Some people write down a to-do list every
    morning. During December, many children prepare Christmas wish lists. To plan
    a party, we make a list of invitees. Arranging information in the form of lists
    is an ubiquitous part of our life.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä¸€ç›´åœ¨åˆ¶ä½œåˆ—è¡¨ã€‚åœ¨æˆ‘ä»¬å»æ‚è´§åº—è´­ç‰©ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šå†™ä¸‹æƒ³è¦è´­ä¹°çš„ç‰©å“æ¸…å•ã€‚æœ‰äº›äººæ¯å¤©æ—©ä¸Šéƒ½ä¼šå†™ä¸‹å¾…åŠäº‹é¡¹æ¸…å•ã€‚åœ¨åäºŒæœˆï¼Œè®¸å¤šå­©å­ä¼šå‡†å¤‡åœ£è¯æ„¿æœ›æ¸…å•ã€‚ä»¥åˆ—è¡¨çš„å½¢å¼å®‰æ’ä¿¡æ¯æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­æ— å¤„ä¸åœ¨çš„ä¸€éƒ¨åˆ†ã€‚
- en: Given that information comes in the shape of lists, we must clearly learn how
    to represent such lists as BSL data. Indeed, because lists are so important, BSL
    comes with built-in support for creating and manipulating lists, similar to the
    support for Cartesian points (posn). In contrast to points, the data definition
    for lists is always left to you. But first things first. We start with the creation
    of lists.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: åŸºäºä¿¡æ¯ä»¥åˆ—è¡¨çš„å½¢å¼å‡ºç°ï¼Œæˆ‘ä»¬å¿…é¡»æ¸…æ¥šåœ°å­¦ä¹ å¦‚ä½•å°†æ­¤ç±»åˆ—è¡¨è¡¨ç¤ºä¸ºBSLæ•°æ®ã€‚å®é™…ä¸Šï¼Œç”±äºåˆ—è¡¨éå¸¸é‡è¦ï¼ŒBSLæä¾›äº†å†…ç½®çš„æ”¯æŒæ¥åˆ›å»ºå’Œæ“ä½œåˆ—è¡¨ï¼Œç±»ä¼¼äºå¯¹ç¬›å¡å°”ç‚¹ï¼ˆposnï¼‰çš„æ”¯æŒã€‚ä¸ç‚¹ä¸åŒï¼Œåˆ—è¡¨çš„æ•°æ®å®šä¹‰å§‹ç»ˆç•™ç»™ä½ ã€‚ä½†é¦–å…ˆï¼Œæˆ‘ä»¬ä»åˆ›å»ºåˆ—è¡¨å¼€å§‹ã€‚
- en: When we form a list, we always start out with the empty list. In BSL, we represent
    the empty list with
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æˆ‘ä»¬å½¢æˆåˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯ä»ç©ºåˆ—è¡¨å¼€å§‹ã€‚åœ¨BSLä¸­ï¼Œæˆ‘ä»¬ç”¨
- en: '''()'
  id: totrans-43
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ''())'
- en: 'which is pronounced â€œempty,â€ short for â€œempty list.â€ Like #true or 5, ''()
    is just a constant. When we add something to a list, we construct another list;
    in BSL, the [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    operation serves this purpose. For example,'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 'æ¥è¡¨ç¤ºç©ºåˆ—è¡¨ï¼Œå‘éŸ³ä¸ºâ€œemptyâ€ï¼Œç®€ç§°â€œempty listâ€ã€‚åƒ #true æˆ– 5 ä¸€æ ·ï¼Œ''() åªæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚å½“æˆ‘ä»¬å‘åˆ—è¡¨æ·»åŠ ä¸œè¥¿æ—¶ï¼Œæˆ‘ä»¬æ„å»ºå¦ä¸€ä¸ªåˆ—è¡¨ï¼›åœ¨BSLä¸­ï¼Œcons
    æ“ä½œç”¨äºæ­¤ç›®çš„ã€‚ä¾‹å¦‚ï¼Œ'
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"Â '())
  id: totrans-45
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Mercury" | '
- en: 'constructs a list from the ''() list and the string "Mercury". [FigureÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29)
    presents this list in the same pictorial manner we used for structures. The box
    for [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    has two fields: [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    and [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29).
    In this specific example the [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    field contains "Mercury" and the [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field contains ''().'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: ä»ç©ºåˆ—è¡¨å’Œå­—ç¬¦ä¸² "Mercury" æ„å»ºåˆ—è¡¨ã€‚å›¾44ï¼ˆ[counter.figure.fig~3abuild-a-list](#(counter.figure.fig~3abuild-a-list)ï¼‰ä»¥æˆ‘ä»¬ç”¨äºç»“æ„çš„ç›¸åŒå›¾ç¤ºæ–¹å¼å±•ç¤ºäº†è¿™ä¸ªåˆ—è¡¨ã€‚cons
    çš„æ¡†æœ‰ä¸¤ä¸ªå­—æ®µï¼šfirst å’Œ restã€‚åœ¨è¿™ä¸ªç‰¹å®šç¤ºä¾‹ä¸­ï¼Œfirst å­—æ®µåŒ…å« "Mercury"ï¼Œè€Œ rest å­—æ®µåŒ…å« '()ã€‚
- en: '| list |  | diagram |'
  id: totrans-47
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| åˆ—è¡¨ |  | å›¾è¡¨ |'
- en: '|'
  id: totrans-48
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-49
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"
    &#124;'
  id: totrans-50
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Mercury" | '
- en: '&#124; Â Â ''()) &#124;'
  id: totrans-51
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    ''()) | '
- en: ''
  id: totrans-52
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![image](../Images/311cded75d1c569c7480d0feadaf6f69.png) |'
  id: totrans-53
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | ![å›¾ç‰‡](../Images/311cded75d1c569c7480d0feadaf6f69.png) |'
- en: '|'
  id: totrans-54
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-55
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"
    &#124;'
  id: totrans-56
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Mercury" | '
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"
    &#124;'
  id: totrans-57
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Mercury" | '
- en: '&#124; Â Â Â Â ''())) &#124;'
  id: totrans-58
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Venus" | '
- en: ''
  id: totrans-59
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![image](../Images/ed10f73b490a83365e1da5a718fc09dd.png) |'
  id: totrans-60
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | ![å›¾ç‰‡](../Images/ed10f73b490a83365e1da5a718fc09dd.png) |'
- en: '|'
  id: totrans-61
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-62
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Earth"
    &#124;'
  id: totrans-63
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Earth" | '
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"
    &#124;'
  id: totrans-64
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Venus" |))'
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"
    &#124;'
  id: totrans-65
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Mercury" |))'
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  id: totrans-66
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Mercury" |))) |'
- en: ''
  id: totrans-67
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![image](../Images/09f01afd930b1f49077e603170472689.png) |'
  id: totrans-68
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/09f01afd930b1f49077e603170472689.png) |'
- en: ''
  id: totrans-69
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 44: Building a list'
  id: totrans-70
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾44ï¼šæ„å»ºåˆ—è¡¨
- en: 'Once we have a list with one item in it, we can construct lists with two items
    by using [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    again. Here is one:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡ä½¿ç”¨[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)æ¥æ„å»ºåŒ…å«ä¸¤ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼š
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"Â '()))
  id: totrans-72
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Venus" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Mercury" '())))
- en: 'And here is another:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œè¿˜æœ‰å¦ä¸€ä¸ªï¼š
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Earth"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"Â '()))
  id: totrans-74
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Earth" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Mercury" '())))
- en: 'The middle row of [figureÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29)
    shows how you can imagine lists that contain two items. It is also a box of two
    fields, but this time the [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field contains a box. Indeed, it contains the box from the top row of the same
    figure.Finally, we construct a list with three items:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸­é—´è¡Œå±•ç¤ºäº†å¦‚ä½•æƒ³è±¡åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå­—æ®µçš„æ¡†ï¼Œä½†è¿™æ¬¡[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)å­—æ®µåŒ…å«ä¸€ä¸ªæ¡†ã€‚å®é™…ä¸Šï¼Œå®ƒåŒ…å«çš„æ˜¯åŒä¸€å›¾é¡¶è¡Œçš„æ¡†ã€‚æœ€åï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼š
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Earth"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"Â '())))
  id: totrans-76
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Earth" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Venus" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Mercury" '())))
- en: The last row of [figureÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29)
    illustrates the list with three items. Its [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field contains a box that contains a box again. So, as we create lists we put
    boxes into boxes into boxes, and so on. While this may appear strange at first
    glance, it is just like a set of Chinese gift boxes or a set of nested drinking
    cups, which we sometimes get for birthdays. The only difference is that BSL programs
    can nest lists much deeper than any artist could nest physical boxes.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾44çš„æœ€åä¸€è¡Œå±•ç¤ºäº†åŒ…å«ä¸‰ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚å®ƒçš„[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)å­—æ®µåŒ…å«ä¸€ä¸ªåŒ…å«å¦ä¸€ä¸ªæ¡†çš„æ¡†ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬åˆ›å»ºåˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å°†æ¡†æ”¾å…¥æ¡†ä¸­ï¼Œå†æ”¾å…¥æ¡†ä¸­ï¼Œå¦‚æ­¤ç±»æ¨ã€‚è™½ç„¶ä¹ä¸€çœ‹è¿™å¯èƒ½æ˜¾å¾—æœ‰äº›å¥‡æ€ªï¼Œä½†å®ƒå°±åƒä¸€ç›’ä¸­å›½ç¤¼ç‰©ç›’æˆ–ä¸€ç›’åµŒå¥—çš„é…’æ¯ï¼Œæˆ‘ä»¬æœ‰æ—¶ä¼šåœ¨ç”Ÿæ—¥æ—¶æ”¶åˆ°ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼ŒBSLç¨‹åºå¯ä»¥åµŒå¥—åˆ—è¡¨çš„æ·±åº¦è¿œè¶…è¿‡ä»»ä½•è‰ºæœ¯å®¶å¯ä»¥åµŒå¥—çš„ç‰©ç†ç›’å­ã€‚
- en: '|'
  id: totrans-78
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-79
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Earth"
    &#124;'
  id: totrans-80
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Earth"
    &#124;'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"
    &#124;'
  id: totrans-81
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"
    &#124;'
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"
    &#124;'
  id: totrans-82
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"
    &#124;'
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  id: totrans-83
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â Â Â ''()))) &#124;'
- en: ''
  id: totrans-84
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ![image](../Images/cce69ee0beca715458478575c40e07c9.png) |'
  id: totrans-85
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/cce69ee0beca715458478575c40e07c9.png) |'
- en: '|  | ![image](../Images/f398e0609a1146725f847d1efbb1d5ad.png) |'
  id: totrans-86
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | ![image](../Images/f398e0609a1146725f847d1efbb1d5ad.png) |'
- en: ''
  id: totrans-87
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 45: Drawing a list'
  id: totrans-88
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[å›¾45ï¼šç»˜åˆ¶åˆ—è¡¨]'
- en: Because even good artists would have problems with drawing deeply nested structures,
    computer scientists resort to box-and-arrow diagrams instead. [FigureÂ 45](#%28counter._%28figure._fig~3alist-box%29%29)
    illustrates how to rearrange the last row of [figureÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29).
    Each [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    structure becomes a separate box. If the rest field is too complex to be drawn
    inside of the box, we draw a bullet instead and a line with an arrow to the box
    that it contains. Depending on how the boxes are arranged, you get two kinds of
    diagrams. The first, displayed in the top row of [figureÂ 45](#%28counter._%28figure._fig~3alist-box%29%29),
    lists the boxes in the order in which they are created. The second, displayed
    in the bottom row, lists the boxes in the order in which they are [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    together. Hence the second diagram immediately tells you what [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    would have produced when applied to the list, no matter how long the list is.
    For this reason, programmers prefer the second arrangement.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: å› ä¸ºå³ä½¿æ˜¯ä¼˜ç§€çš„è‰ºæœ¯å®¶åœ¨ç»˜åˆ¶æ·±åº¦åµŒå¥—çš„ç»“æ„æ—¶ä¹Ÿä¼šé‡åˆ°é—®é¢˜ï¼Œè®¡ç®—æœºç§‘å­¦å®¶ä»¬è½¬è€Œä½¿ç”¨æ¡†å›¾å’Œç®­å¤´æ¥è¡¨ç¤ºã€‚ [å›¾45](#%28counter._%28figure._fig~3alist-box%29%29)å±•ç¤ºäº†å¦‚ä½•é‡æ–°æ’åˆ—[å›¾44](#%28counter._%28figure._fig~3abuild-a-list%29%29)çš„æœ€åä¸€è¡Œã€‚æ¯ä¸ª[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ç»“æ„æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¡†ã€‚å¦‚æœå‰©ä½™å­—æ®µè¿‡äºå¤æ‚ï¼Œæ— æ³•åœ¨æ¡†å†…ç»˜åˆ¶ï¼Œæˆ‘ä»¬åˆ™ç”»ä¸€ä¸ªç‚¹å’Œä¸€ä¸ªæŒ‡å‘åŒ…å«è¯¥æ¡†çš„ç®­å¤´çº¿ã€‚æ ¹æ®æ¡†çš„æ’åˆ—æ–¹å¼ï¼Œå¯ä»¥å¾—åˆ°ä¸¤ç§ç±»å‹çš„å›¾ã€‚ç¬¬ä¸€ç§ï¼Œæ˜¾ç¤ºåœ¨[å›¾45](#%28counter._%28figure._fig~3alist-box%29%29)çš„é¡¶éƒ¨è¡Œï¼ŒæŒ‰ç…§åˆ›å»ºçš„é¡ºåºåˆ—å‡ºæ¡†ã€‚ç¬¬äºŒç§ï¼Œæ˜¾ç¤ºåœ¨åº•éƒ¨è¡Œï¼ŒæŒ‰ç…§å®ƒä»¬è¢«[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ç»„åˆçš„é¡ºåºåˆ—å‡ºæ¡†ã€‚å› æ­¤ï¼Œç¬¬äºŒä¸ªå›¾ç«‹å³å‘Šè¯‰ä½ ï¼Œæ— è®ºåˆ—è¡¨æœ‰å¤šé•¿ï¼Œåº”ç”¨[first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)åˆ°åˆ—è¡¨ä¸Šä¼šäº§ç”Ÿä»€ä¹ˆç»“æœã€‚å› æ­¤ï¼Œç¨‹åºå‘˜æ›´å–œæ¬¢ç¬¬äºŒç§æ’åˆ—ã€‚
- en: ExerciseÂ 129\. Create BSL lists that represent
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 129ã€‚åˆ›å»ºä»£è¡¨ä»¥ä¸‹å†…å®¹çš„BSLåˆ—è¡¨ï¼š
- en: a list of celestial bodies, say, at least all the planets in our solar system;
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ç³»åˆ—å¤©ä½“ï¼Œæ¯”å¦‚è¯´ï¼Œè‡³å°‘åŒ…æ‹¬æˆ‘ä»¬å¤ªé˜³ç³»ä¸­çš„æ‰€æœ‰è¡Œæ˜Ÿï¼›
- en: a list of items for a meal, for example, steak, french fries, beans, bread,
    water, Brie cheese, and ice cream; and
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ä»½é¤ç‚¹çš„ç‰©å“åˆ—è¡¨ï¼Œä¾‹å¦‚ï¼Œç‰›æ’ã€è–¯æ¡ã€è±†å­ã€é¢åŒ…ã€æ°´ã€å¸ƒé‡Œå¥¶é…ªå’Œå†°æ·‡æ·‹ï¼›
- en: a list of colors.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€ç³»åˆ—é¢œè‰²ã€‚
- en: 'Sketch some box representations of these lists, similar to those in [figuresÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29)
    and [45](#%28counter._%28figure._fig~3alist-box%29%29). Which of the sketches
    do you like better?You can also make lists of numbers. Here is a list with the
    10 digits:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: ç»˜åˆ¶ä¸€äº›ä¸[å›¾44](#%28counter._%28figure._fig~3abuild-a-list%29%29)å’Œ[å›¾45](#%28counter._%28figure._fig~3alist-box%29%29)ç›¸ä¼¼çš„åˆ—è¡¨çš„æ¡†å›¾ï¼Œé—®ä½ å–œæ¬¢å“ªä¸€ä¸ªï¼Ÿä½ ä¹Ÿå¯ä»¥åˆ¶ä½œæ•°å­—åˆ—è¡¨ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŒ…å«10ä¸ªæ•°å­—çš„åˆ—è¡¨ï¼š
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0
    |'
  id: totrans-95
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1
    |'
  id: totrans-96
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1
    |'
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    |'
  id: totrans-97
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    |'
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    |'
  id: totrans-98
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    |'
- en: '| Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 4
    |'
  id: totrans-99
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 4
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 5
    |'
  id: totrans-100
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 5
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 6
    |'
  id: totrans-101
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 6
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 7
    |'
  id: totrans-102
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 7
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 8
    |'
  id: totrans-103
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 8
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 9Â ''()))))))))))
    |'
  id: totrans-104
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 9Â ''()))))))))))
    |'
- en: To build this list requires 10 list constructions and one '(). For a list of
    three arbitrary numbers, for example,
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: æ„å»ºè¿™ä¸ªåˆ—è¡¨éœ€è¦10æ¬¡åˆ—è¡¨æ„é€ å’Œä¸€æ¬¡ '()ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸‰ä¸ªä»»æ„æ•°å­—çš„åˆ—è¡¨ï¼Œ
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29)
    |'
  id: totrans-106
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29)
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â e
    |'
  id: totrans-107
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â e
    |'
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â -22.3Â ''())))
    |'
  id: totrans-108
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â -22.3Â ''())))
    |'
- en: 'we need three [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)es.In
    general a list does not have to contain values of one kind, but may contain arbitrary
    values:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬éœ€è¦ä¸‰ä¸ª [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    æ“ä½œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªåˆ—è¡¨ä¸å¿…åªåŒ…å«ä¸€ç§ç±»å‹çš„å€¼ï¼Œå®ƒå¯ä»¥åŒ…å«ä»»æ„ç±»å‹çš„å€¼ï¼š
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Robbie
    Round" |'
  id: totrans-110
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Robbie
    Round" |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    |'
  id: totrans-111
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    |'
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â #true
    |'
  id: totrans-112
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â #true
    |'
- en: '| Â Â Â Â Â Â ''()))) |'
  id: totrans-113
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ''()))) |'
- en: 'The firstThen again, if this list is supposed to represent a record with a
    fixed number of pieces, use a structure type instead. item of this list is a string,
    the second one is a number, and the last one a Boolean. You may consider this
    list as the representation of a personnel record with three pieces of data: the
    name of the employee, the number of years spent at the company, and whether the
    employee has health insurance through the company. Or, you could think of it as
    representing a virtual player in some game. Without a data definition, you just
    canâ€™t know what data is all about.Here is a first data definition that involves
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29):'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ—è¡¨çš„ç¬¬ä¸€é¡¹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç¬¬äºŒé¡¹æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæœ€åä¸€é¡¹æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ä½ å¯ä»¥å°†è¿™ä¸ªåˆ—è¡¨è§†ä¸ºä¸€ä¸ªåŒ…å«ä¸‰ä»½æ•°æ®çš„äººå‘˜è®°å½•è¡¨ç¤ºï¼šå‘˜å·¥çš„å§“åã€åœ¨å…¬å¸å·¥ä½œçš„å¹´æ•°ä»¥åŠå‘˜å·¥æ˜¯å¦é€šè¿‡å…¬å¸è´­ä¹°å¥åº·ä¿é™©ã€‚æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥å°†å…¶è§†ä¸ºæŸäº›æ¸¸æˆä¸­è™šæ‹Ÿç©å®¶çš„è¡¨ç¤ºã€‚æ²¡æœ‰æ•°æ®å®šä¹‰ï¼Œä½ æ— æ³•äº†è§£æ‰€æœ‰æ•°æ®çš„å«ä¹‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ¶‰åŠ
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    çš„ç¬¬ä¸€ä¸ªæ•°æ®å®šä¹‰ï¼š
- en: '| ;Â A 3LON is a list of three numbers: |'
  id: totrans-115
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A 3LON is a list of three numbers: |'
- en: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  ''())))
    |'
  id: totrans-116
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  ''())))
    |'
- en: '| ;Â interpretation a point in 3-dimensional space |'
  id: totrans-117
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation a point in 3-dimensional space |'
- en: 'Of course, this data definition uses [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    like others use constructors for structure instances, and in a sense, [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    is just a special constructor. What this data definition fails to demonstrate
    is how to form lists of arbitrary length: lists that contain nothing, one item,
    two items, ten items, or perhaps 1,438,901 items.So letâ€™s try again:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œè¿™ä¸ªæ•°æ®å®šä¹‰åƒå…¶ä»–äººä½¿ç”¨ç»“æ„å®ä¾‹çš„æ„é€ å‡½æ•°ä¸€æ ·ä½¿ç”¨ [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    åªæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ å‡½æ•°ã€‚è¿™ä¸ªæ•°æ®å®šä¹‰æœªèƒ½å±•ç¤ºçš„æ˜¯å¦‚ä½•å½¢æˆä»»æ„é•¿åº¦çš„åˆ—è¡¨ï¼šåŒ…å«é›¶é¡¹ã€ä¸€é¡¹ã€ä¸¤é¡¹ã€åé¡¹ï¼Œæˆ–è€…å¯èƒ½æ˜¯ 1,438,901 é¡¹çš„åˆ—è¡¨ã€‚æ‰€ä»¥è®©æˆ‘ä»¬å†è¯•ä¸€æ¬¡ï¼š
- en: '| ;Â A List-of-names is one of: |'
  id: totrans-119
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A List-of-names is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-120
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [String](part_one.html#%28tech._string%29)  [List-of-names](#%28tech._list._of._name%29))
    |'
  id: totrans-121
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [String](part_one.html#%28tech._string%29)  [List-of-names](#%28tech._list._of._name%29))
    |'
- en: '| ;Â interpretation a list of invitees, by last name |'
  id: totrans-122
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation a list of invitees, by last name |'
- en: 'Take a deep breath, read it again. This data definition is one of the most
    unusual definitions you have ever encounteredâ€”<wbr>you have never before seen
    a definition that refers to itself. It isnâ€™t even clear whether it makes sense.
    After all, if you had told your English teacher that â€œa table is a tableâ€ defines
    the word â€œtable,â€ the most likely response would have been â€œNonsense!â€ because
    a self-referential definition doesnâ€™t explain what a word means.In computer science
    and in programming, though, self-referential definitions play a central role,
    and with some care, such definitions actually do make sense. Here â€œmaking senseâ€
    means that we can use the data definition for what it is intended for, namely,
    to generate examples of data that belong to the class that is being defined or
    to check whether some given piece of data belongs to the defined class of data.
    From this perspective, the definition of [List-of-names](#%28tech._list._of._name%29)
    makes complete sense. At a minimum, we can generate ''() as one example, using
    the first clause in the itemization. Given ''() as an element of [List-of-names](#%28tech._list._of._name%29),
    it is easy to make a second one:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: æ·±å¸ä¸€å£æ°”ï¼Œå†è¯»ä¸€éã€‚è¿™ä¸ªæ•°æ®å®šä¹‰æ˜¯ä½ é‡åˆ°è¿‡çš„æœ€ä¸å¯»å¸¸çš„å®šä¹‰ä¹‹ä¸€â€”â€”ä½ ä»¥å‰ä»æœªè§è¿‡ä¸€ä¸ªè‡ªæˆ‘å¼•ç”¨çš„å®šä¹‰ã€‚ç”šè‡³ä¸æ¸…æ¥šå®ƒæ˜¯å¦æœ‰æ„ä¹‰ã€‚æ¯•ç«Ÿï¼Œå¦‚æœä½ å‘Šè¯‰ä½ çš„è‹±è¯­è€å¸ˆâ€œä¸€å¼ æ¡Œå­æ˜¯ä¸€å¼ æ¡Œå­â€å®šä¹‰äº†â€œæ¡Œå­â€è¿™ä¸ªè¯ï¼Œæœ€å¯èƒ½çš„å›åº”å¯èƒ½æ˜¯â€œèƒ¡è¯´ï¼â€å› ä¸ºè‡ªæˆ‘å¼•ç”¨çš„å®šä¹‰å¹¶æ²¡æœ‰è§£é‡Šè¿™ä¸ªè¯çš„å«ä¹‰ã€‚ç„¶è€Œï¼Œåœ¨è®¡ç®—æœºç§‘å­¦å’Œç¼–ç¨‹ä¸­ï¼Œè‡ªæˆ‘å¼•ç”¨çš„å®šä¹‰èµ·ç€æ ¸å¿ƒä½œç”¨ï¼Œå¹¶ä¸”ç»è¿‡ä¸€äº›ä»”ç»†è€ƒè™‘ï¼Œè¿™ç±»å®šä¹‰å®é™…ä¸Šæ˜¯æœ‰æ„ä¹‰çš„ã€‚åœ¨è¿™é‡Œï¼Œâ€œæœ‰æ„ä¹‰â€æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°æ®å®šä¹‰æ¥å®ç°å…¶ç›®çš„ï¼Œå³ç”Ÿæˆå±äºæ­£åœ¨å®šä¹‰çš„ç±»åˆ«çš„æ•°æ®ç¤ºä¾‹ï¼Œæˆ–è€…æ£€æŸ¥æŸä¸ªç»™å®šçš„æ•°æ®é¡¹æ˜¯å¦å±äºå®šä¹‰çš„æ•°æ®ç±»åˆ«ã€‚ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œ[List-of-names](#%28tech._list._of._name%29)
    çš„å®šä¹‰æ˜¯å®Œå…¨æœ‰æ„ä¹‰çš„ã€‚è‡³å°‘ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ—ä¸¾çš„ç¬¬ä¸€æ¡è§„åˆ™ç”Ÿæˆä¸€ä¸ªç¤ºä¾‹ï¼Œå³ '()ã€‚ç»™å®š '() ä½œä¸º [List-of-names](#%28tech._list._of._name%29)
    çš„ä¸€ä¸ªå…ƒç´ ï¼Œå¾ˆå®¹æ˜“ç”Ÿæˆç¬¬äºŒä¸ªï¼š
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Findler"Â '())
  id: totrans-124
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Findler"Â '())
- en: 'Here we are using a [String](part_one.html#%28tech._string%29) and the only
    list from [List-of-names](#%28tech._list._of._name%29) to generate a piece of
    data according to the second clause in the itemization. With the same rule, we
    can generate many more lists of this kind:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª [String](part_one.html#%28tech._string%29) å’Œæ¥è‡ª [List-of-names](#%28tech._list._of._name%29)
    çš„å”¯ä¸€åˆ—è¡¨æ¥æ ¹æ®åˆ—ä¸¾çš„ç¬¬äºŒæ¡è§„åˆ™ç”Ÿæˆä¸€ä¸ªæ•°æ®é¡¹ã€‚æŒ‰ç…§ç›¸åŒçš„è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆæ›´å¤šè¿™ç±»åˆ—è¡¨ï¼š
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ''())
    |'
  id: totrans-126
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ''())
    |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Felleisen"Â ''())
    |'
  id: totrans-127
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Felleisen"Â ''())
    |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Krishnamurthi"Â ''())
    |'
  id: totrans-128
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Krishnamurthi"Â ''())
    |'
- en: 'And while these lists all contain one name (represented as a [String](part_one.html#%28tech._string%29)),
    it is actually possible to use the second line of the data definition to create
    lists with more names in them:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶è¿™äº›åˆ—è¡¨éƒ½åŒ…å«ä¸€ä¸ªåå­—ï¼ˆè¡¨ç¤ºä¸º [String](part_one.html#%28tech._string%29)ï¼‰ï¼Œä½†å®é™…ä¸Šå¯ä»¥ä½¿ç”¨æ•°æ®å®šä¹‰çš„ç¬¬äºŒè¡Œæ¥åˆ›å»ºåŒ…å«æ›´å¤šåå­—çš„åˆ—è¡¨ï¼š
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Felleisen"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Findler"Â '()))
  id: totrans-130
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Felleisen"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Findler"Â '())))
- en: This piece of data belongs to [List-of-names](#%28tech._list._of._name%29) because
    "Felleisen" is a [String](part_one.html#%28tech._string%29) and ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Findler"  '())
    is a confirmed [List-of-names](#%28tech._list._of._name%29).
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ¡æ•°æ®å±äº [List-of-names](#%28tech._list._of._name%29)ï¼Œå› ä¸º "Felleisen" æ˜¯ä¸€ä¸ª [String](part_one.html#%28tech._string%29)ï¼Œè€Œ
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Findler" '()) æ˜¯ä¸€ä¸ªå·²ç¡®è®¤çš„ [List-of-names](#%28tech._list._of._name%29)ã€‚
- en: ExerciseÂ 130\. Create an element of [List-of-names](#%28tech._list._of._name%29)
    that contains five [String](part_one.html#%28tech._string%29)s. Sketch a box representation
    of the list similar to those found in [figureÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29).
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  130ã€‚åˆ›å»ºä¸€ä¸ªåŒ…å«äº”ä¸ª [String](part_one.html#%28tech._string%29)s çš„ [List-of-names](#%28tech._list._of._name%29)
    å…ƒç´ ã€‚ç»˜åˆ¶ä¸€ä¸ªç±»ä¼¼äº [å›¾ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29) ä¸­çš„åˆ—è¡¨çš„æ¡†è¡¨ç¤ºã€‚
- en: Explain why
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: è§£é‡Šä¸ºä»€ä¹ˆ
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "1"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "2"Â '()))
  id: totrans-134
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "1"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "2"Â '()))
- en: is an element of [List-of-names](#%28tech._list._of._name%29) and why ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  '())
    isnâ€™t.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¯ [List-of-names](#%28tech._list._of._name%29) çš„ä¸€ä¸ªå…ƒç´ ï¼Œä»¥åŠä¸ºä»€ä¹ˆ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    2 '()) ä¸æ˜¯ã€‚
- en: ExerciseÂ 131\. Provide a data definition for representing lists of [Boolean](part_one.html#%28tech._boolean%29)
    values. The class contains all arbitrarily long lists of [Boolean](part_one.html#%28tech._boolean%29)s.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  131ã€‚æä¾›ä¸€ä¸ªè¡¨ç¤ºå¸ƒå°”å€¼åˆ—è¡¨çš„æ•°æ®å®šä¹‰ã€‚è¯¥ç±»åˆ«åŒ…å«æ‰€æœ‰ä»»æ„é•¿åº¦çš„å¸ƒå°”å€¼åˆ—è¡¨ã€‚
- en: 8.2What Is '(), What Is [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)[ğŸ”—](#(part._sec~3alists-cons)
    "Link to here")
  id: totrans-137
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.2 '() æ˜¯ä»€ä¹ˆï¼Œ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    æ˜¯ä»€ä¹ˆ[ğŸ”—](#(part._sec~3alists-cons) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Letâ€™s step back for a moment and take a close look at ''() and [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29).
    As mentioned, ''() is just a constant. When compared to constants such as 5 or
    "this is a string", it looks more like a function name or a variable; but when
    compared with #true and #false, it should be easy to see that it really is just
    BSLâ€™s representation for empty lists.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 'è®©æˆ‘ä»¬æš‚æ—¶é€€åä¸€æ­¥ï¼Œä»”ç»†çœ‹çœ‹ ''() å’Œ [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ã€‚æ­£å¦‚ä¹‹å‰æåˆ°çš„ï¼Œ''()
    åªæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚å½“ä¸åƒ 5 æˆ– "è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²" è¿™æ ·çš„å¸¸é‡ç›¸æ¯”æ—¶ï¼Œå®ƒçœ‹èµ·æ¥æ›´åƒæ˜¯ä¸€ä¸ªå‡½æ•°åæˆ–å˜é‡ï¼›ä½†æ˜¯å½“ä¸ #true å’Œ #false ç›¸æ¯”æ—¶ï¼Œåº”è¯¥å¾ˆå®¹æ˜“çœ‹å‡ºå®ƒå®é™…ä¸Šåªæ˜¯
    BSL å¯¹ç©ºåˆ—è¡¨çš„è¡¨ç¤ºã€‚'
- en: 'As for our evaluation rules, ''() is a new kind of atomic value, distinct from
    any other kind: numbers, Booleans, strings, and so on. It also isnâ€™t a compound
    value, like [Posn](part_one.html#%28tech._posn%29)s. Indeed, ''() is so unique
    it belongs in a class of values all by itself. As such, this class of values comes
    with a predicate that recognizes only ''() and nothing else:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºæˆ‘ä»¬çš„è¯„ä¼°è§„åˆ™ï¼Œ'() æ˜¯ä¸€ç§æ–°çš„åŸå­å€¼ï¼Œä¸ä»»ä½•å…¶ä»–ç±»å‹éƒ½ä¸åŒï¼šæ•°å­—ã€å¸ƒå°”å€¼ã€å­—ç¬¦ä¸²ç­‰ç­‰ã€‚å®ƒä¹Ÿä¸æ˜¯å¤åˆå€¼ï¼Œæ¯”å¦‚ [Posn](part_one.html#%28tech._posn%29)sã€‚å®é™…ä¸Šï¼Œ'()
    éå¸¸ç‹¬ç‰¹ï¼Œå®ƒå±äºä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„å€¼ç±»åˆ«ã€‚å› æ­¤ï¼Œè¿™ä¸ªç±»åˆ«çš„å€¼æœ‰ä¸€ä¸ªè°“è¯ï¼Œåªè¯†åˆ« '() è€Œä¸æ˜¯å…¶ä»–ä»»ä½•å€¼ï¼š
- en: '| ;Â [Any](part_one.html#%28tech._any%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-140
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Any](part_one.html#%28tech._any%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| ;Â is the given value ''() |'
  id: totrans-141
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â is the given value ''() |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â x)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-142
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â x)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: 'Like all predicates, [empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    can be applied to any value from the universe of BSL values. It produces #true
    precisely when it is applied to ''():'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 'åƒæ‰€æœ‰è°“è¯ä¸€æ ·ï¼Œ[empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    å¯ä»¥åº”ç”¨äº BSL å€¼å®‡å®™ä¸­çš„ä»»ä½•å€¼ã€‚å½“å®ƒåº”ç”¨äº ''() æ—¶ï¼Œå®ƒç²¾ç¡®åœ°äº§ç”Ÿ #trueï¼š'
- en: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ''())
    |'
  id: totrans-144
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    ''()) |'
- en: '| #true |'
  id: totrans-145
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #true |'
- en: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â 5)
    |'
  id: totrans-146
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    5) |'
- en: '| #false |'
  id: totrans-147
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #false |'
- en: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â "hello
    world") |'
  id: totrans-148
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    "hello world") |'
- en: '| #false |'
  id: totrans-149
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #false |'
- en: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ''()))
    |'
  id: totrans-150
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    1 ''())) |'
- en: '| #false |'
  id: totrans-151
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #false |'
- en: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 0Â 0))
    |'
  id: totrans-152
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    0 0)) |'
- en: '| #false |'
  id: totrans-153
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #false |'
- en: 'Next we turn to [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29).
    Everything we have seen so far suggests that [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    is a constructor just like those introduced by structure type definitions. More
    precisely, [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    appears to be the constructor for a two-field structure: the first one for any
    kind of value and the second one for any list-like value. The following definitions
    translate this idea into BSL:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 'ä¸‹ä¸€æ­¥æˆ‘ä»¬å°†è½¬å‘ [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ã€‚åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ä¸€åˆ‡éƒ½è¡¨æ˜
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå°±åƒç»“æ„ç±»å‹å®šä¹‰ä¸­å¼•å…¥çš„é‚£äº›ä¸€æ ·ã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    ä¼¼ä¹æ˜¯ä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªå­—æ®µçš„ç»“æ„çš„æ„é€ å‡½æ•°ï¼šç¬¬ä¸€ä¸ªç”¨äºä»»ä½•ç±»å‹çš„å€¼ï¼Œç¬¬äºŒä¸ªç”¨äºä»»ä½•ç±»ä¼¼åˆ—è¡¨çš„å€¼ã€‚ä»¥ä¸‹å®šä¹‰å°†è¿™ä¸ªæƒ³æ³•è½¬åŒ–ä¸ºBSLï¼š '
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â pairÂ [[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)Â [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
  id: totrans-155
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)
    pair [[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
- en: '| ;Â A ConsPair is a structure: |'
  id: totrans-156
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªConsPairæ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-pair  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)).
    |'
  id: totrans-157
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-pair [Any](part_one.html#%28tech._any%29) [Any](part_one.html#%28tech._any%29)).
    |'
- en: '| Â  |'
  id: totrans-158
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [ConsPair](#%28tech._conspair%29) |'
  id: totrans-159
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Any](part_one.html#%28tech._any%29) [Any](part_one.html#%28tech._any%29)
    -> [ConsPair](#%28tech._conspair%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (our-consÂ a-valueÂ a-list)
    |'
  id: totrans-160
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (our-cons a-value a-list) |'
- en: '| Â Â (make-pairÂ a-valueÂ a-list)) |'
  id: totrans-161
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆmake-pair a-value a-listï¼‰|'
- en: 'The only catch is that our-cons accepts all possible BSL values for its second
    argument and [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    doesnâ€™t, as the following experiment validates:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: å”¯ä¸€çš„éš¾ç‚¹åœ¨äºï¼Œæˆ‘ä»¬çš„`cons`å‡½æ•°æ¥å—æ‰€æœ‰å¯èƒ½çš„BSLå€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œè€Œ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)å‡½æ•°åˆ™ä¸è¡Œï¼Œä»¥ä¸‹å®éªŒå¯ä»¥éªŒè¯è¿™ä¸€ç‚¹ï¼š
- en: '| > ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â 2)
    |'
  id: totrans-163
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â 2)
    |'
- en: '| cons:second argument must be a list, but received 1 and 2 |'
  id: totrans-164
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| cons:ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯åˆ—è¡¨ï¼Œä½†æ¥æ”¶åˆ°çš„æ˜¯1å’Œ2 |'
- en: 'Put differently, [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    is really a checked function, the kind discussed in [Itemizations and Structures](part_one.html#%28part._ch~3amix%29),
    which suggests the following refinement:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: æ¢å¥è¯è¯´ï¼Œ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ£€æŸ¥å‡½æ•°ï¼Œæ­£å¦‚åœ¨[é¡¹åŒ–å’Œç»“æ„](part_one.html#%28part._ch~3amix%29)ä¸­è®¨è®ºçš„é‚£æ ·ï¼Œè¿™å»ºè®®ä»¥ä¸‹ç»†åŒ–ï¼š
- en: '| ;Â A ConsOrEmpty is one of: |'
  id: totrans-166
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A ConsOrEmpty is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-167
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  (make-pair  [Any](part_one.html#%28tech._any%29)  [ConsOrEmpty](#%28tech._consorempty%29))
    |'
  id: totrans-168
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  (make-pair  [Any](part_one.html#%28tech._any%29)  [ConsOrEmpty](#%28tech._consorempty%29))
    |'
- en: '| ;Â interpretation  [ConsOrEmpty](#%28tech._consorempty%29) is the class of
    all lists |'
  id: totrans-169
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation  [ConsOrEmpty](#%28tech._consorempty%29) æ˜¯æ‰€æœ‰åˆ—è¡¨çš„ç±» |'
- en: '| Â  |'
  id: totrans-170
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [ConsOrEmpty](#%28tech._consorempty%29) |'
  id: totrans-171
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [ConsOrEmpty](#%28tech._consorempty%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (our-consÂ a-valueÂ a-list)
    |'
  id: totrans-172
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (our-consÂ a-valueÂ a-list)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-173
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â a-list)Â (make-pairÂ a-valueÂ a-list)]
    |'
  id: totrans-174
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â a-list)Â (make-pairÂ a-valueÂ a-list)]
    |'
- en: '| Â Â Â Â [(pair?Â a-list)Â (make-pairÂ a-valueÂ a-list)] |'
  id: totrans-175
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(pair?Â a-list)Â (make-pairÂ a-valueÂ a-list)] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â "cons:
    second argument ...")])) |'
  id: totrans-176
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â "cons:
    second argument ...")])) |'
- en: 'If [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    is a checked constructor function, you may be wondering how to extract the pieces
    from the resulting structure. After all, [Adding Structure](part_one.html#%28part._ch~3astructure%29)
    says that programming with structures requires selectors. Since a [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    structure has two fields, there are two selectors: [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    and [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29).
    They are also easily defined in terms of our pair structure:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)æ˜¯ä¸€ä¸ªæ£€æŸ¥æ„é€ å‡½æ•°ï¼Œä½ å¯èƒ½æƒ³çŸ¥é“å¦‚ä½•ä»ç»“æœç»“æ„ä¸­æå–ç‰‡æ®µã€‚æ¯•ç«Ÿï¼Œ[æ·»åŠ ç»“æ„](part_one.html#%28part._ch~3astructure%29)è¯´ï¼Œä½¿ç”¨ç»“æ„ç¼–ç¨‹éœ€è¦é€‰æ‹©å™¨ã€‚ç”±äºä¸€ä¸ª[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ç»“æ„æœ‰ä¸¤ä¸ªå­—æ®µï¼Œå› æ­¤æœ‰ä¸¤ä¸ªé€‰æ‹©å™¨ï¼š[first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)å’Œ[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)ã€‚å®ƒä»¬ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨æˆ‘ä»¬çš„å¯¹ç»“æ„æ¥å®šä¹‰ï¼š
- en: '| ;Â [ConsOrEmpty](#%28tech._consorempty%29) -> [Any](part_one.html#%28tech._any%29)
    |'
  id: totrans-178
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [ConsOrEmpty](#%28tech._consorempty%29) -> [Any](part_one.html#%28tech._any%29)
    |'
- en: '| ;Â extracts the [left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    part of the given pair |'
  id: totrans-179
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; æå–ç»™å®šå¯¹çš„[å·¦](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)éƒ¨åˆ†
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (our-firstÂ a-list)
    |'
  id: totrans-180
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (our-first a-list) |'
- en: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â a-list)
    |'
  id: totrans-181
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å¦‚æœ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    a-list) |'
- en: '| Â Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â ''our-firstÂ "...")
    |'
  id: totrans-182
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[é”™è¯¯](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)
    ''æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª "...") |'
- en: '| Â Â Â Â Â Â (pair-leftÂ a-list))) |'
  id: totrans-183
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆå·¦å¯¹é½åˆ—è¡¨ï¼‰|'
- en: Stop! Define our-rest.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼å®šä¹‰æˆ‘ä»¬çš„-restã€‚
- en: If your program can access the structure type definition for pair, it is easy
    to create pairs that donâ€™t contain '() or another pair in the [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)
    field. Whether such bad instances are created intentionally or accidentally, they
    tend to break functions and programs in strange ways. BSL therefore hides the
    actual structure type definition for [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    to avoid these problems. [Local Definitions](part_three.html#%28part._sec~3alocal-definitions%29)
    demonstrates one way that your programs can hide such definitions, too, but for
    now, you donâ€™t need this power.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ çš„ç¨‹åºå¯ä»¥è®¿é—®å¯¹çš„ç»“æ„ç±»å‹å®šä¹‰ï¼Œé‚£ä¹ˆåˆ›å»ºä¸åŒ…å«'()æˆ–å¦ä¸€ä¸ªå¯¹åœ¨[å³](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)å­—æ®µä¸­çš„å¯¹å°±å¾ˆå®¹æ˜“äº†ã€‚æ— è®ºè¿™äº›ä¸è‰¯å®ä¾‹æ˜¯æ•…æ„è¿˜æ˜¯æ„å¤–åˆ›å»ºçš„ï¼Œå®ƒä»¬å¾€å¾€ä¼šä»¥å¥‡æ€ªçš„æ–¹å¼ç ´åå‡½æ•°å’Œç¨‹åºã€‚å› æ­¤ï¼ŒBSLéšè—äº†[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)çš„å®é™…ç»“æ„ç±»å‹å®šä¹‰ï¼Œä»¥é¿å…è¿™äº›é—®é¢˜ã€‚[å±€éƒ¨å®šä¹‰](part_three.html#%28part._sec~3alocal-definitions%29)å±•ç¤ºäº†ä½ çš„ç¨‹åºå¯ä»¥éšè—æ­¤ç±»å®šä¹‰çš„ä¸€ç§æ–¹æ³•ï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ ä¸éœ€è¦è¿™ç§èƒ½åŠ›ã€‚
- en: '| ''() |  | a special value, mostly to represent the empty list |'
  id: totrans-186
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''() |  | ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œä¸»è¦ç”¨äºè¡¨ç¤ºç©ºåˆ—è¡¨ |'
- en: '| [empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    |  | a predicate to recognize ''() and nothing else |'
  id: totrans-187
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| [empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    |  | ä¸€ä¸ªè¯†åˆ«''()å’Œå…¶ä»–å†…å®¹çš„è°“è¯ |'
- en: '| [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    |  | a checked constructor to create two-field instances |'
  id: totrans-188
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    |  | ä¸€ä¸ªæ£€æŸ¥æ„é€ å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸¤ä¸ªå­—æ®µçš„å®ä¾‹ |'
- en: '| [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    |  | the selector to extract the last item added |'
  id: totrans-189
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    |  | æå–æœ€åæ·»åŠ é¡¹çš„é€‰æ‹©å™¨ |'
- en: '| [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    |  | the selector to extract the extended list |'
  id: totrans-190
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    |  | æå–æ‰©å±•åˆ—è¡¨çš„é€‰æ‹©å™¨ |'
- en: '| [cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    |  | a predicate to recognize instances of [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    |'
  id: totrans-191
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| [cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    |  | ä¸€ä¸ªè¯†åˆ«[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)å®ä¾‹çš„è°“è¯
    |'
- en: ''
  id: totrans-192
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 46: List primitives'
  id: totrans-193
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾46ï¼šåˆ—è¡¨åŸè¯­
- en: '[FigureÂ 46](#%28counter._%28figure._fig~3acons%29%29) summarizes this section.
    The key insight is that ''() is a unique value and that [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    is a checked constructor that produces list values. Furthermore, [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29),
    [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29),
    and [cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    are merely distinct names for the usual predicate and selectors. What this chapter
    teaches, then, is not a new way of creating data but a new way of formulating
    data definitions.'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾ 46](#%28counter._%28figure._fig~3acons%29%29) æ€»ç»“äº†æœ¬èŠ‚å†…å®¹ã€‚å…³é”®æ´å¯Ÿæ˜¯ ''() æ˜¯ä¸€ä¸ªç‹¬ç‰¹çš„å€¼ï¼Œè€Œ
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    æ˜¯ä¸€ä¸ªæ£€æŸ¥æ„é€ å‡½æ•°ï¼Œå®ƒäº§ç”Ÿåˆ—è¡¨å€¼ã€‚æ­¤å¤–ï¼Œ[first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)ã€[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    å’Œ [cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    åªæ˜¯é€šå¸¸è°“è¯å’Œé€‰æ‹©å™¨çš„ä¸åŒåç§°ã€‚å› æ­¤ï¼Œæœ¬ç« æ‰€æ•™æˆçš„ï¼Œä¸æ˜¯åˆ›å»ºæ•°æ®çš„æ–°æ–¹æ³•ï¼Œè€Œæ˜¯æ•°æ®å®šä¹‰çš„æ–°æ–¹æ³•ã€‚'
- en: 8.3Programming with Lists[ğŸ”—](#(part._sec~3alists-programming) "Link to here")
  id: totrans-195
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.3 ä½¿ç”¨åˆ—è¡¨è¿›è¡Œç¼–ç¨‹[ğŸ”—](#(part._sec~3alists-programming) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Say youâ€™re keeping track of your friends with some list, and say the list has
    grown so large that you need a program to determine whether someHere we use the
    word â€œfriendâ€ in the sense of social networks, not the real world. name is on
    the list. To make this idea concrete, letâ€™s state it as an exercise:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ä½ ç”¨æŸä¸ªåˆ—è¡¨è·Ÿè¸ªä½ çš„æœ‹å‹ï¼Œå¹¶ä¸”è¿™ä¸ªåˆ—è¡¨å·²ç»å˜å¾—å¾ˆå¤§ï¼Œä»¥è‡³äºä½ éœ€è¦ä¸€ä¸ªç¨‹åºæ¥ç¡®å®šæŸä¸ªåå­—æ˜¯å¦åœ¨åˆ—è¡¨ä¸­ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨â€œæœ‹å‹â€è¿™ä¸ªè¯åœ¨ç¤¾äº¤ç½‘ç»œçš„æ„ä¹‰ä¸Šï¼Œè€Œä¸æ˜¯ç°å®ä¸–ç•Œã€‚ä¸ºäº†ä½¿è¿™ä¸ªæƒ³æ³•å…·ä½“åŒ–ï¼Œè®©æˆ‘ä»¬å°†å…¶è¡¨è¿°ä¸ºä¸€ä¸ªç»ƒä¹ ï¼š
- en: Sample Problem You are working on the contact list for some new cell phone.
    The phoneâ€™s owner updates and consults this list on various occasions. For now,
    you are assigned the task of designing a function that consumes this list of contacts
    and determines whether it contains the name â€œFlatt.â€
  id: totrans-197
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜ ä½ æ­£åœ¨ä¸ºæŸä¸ªæ–°æ‰‹æœºè®¾è®¡è”ç³»äººåˆ—è¡¨ã€‚æ‰‹æœºæ‰€æœ‰è€…ä¼šåœ¨å„ç§åœºåˆæ›´æ–°å’ŒæŸ¥é˜…è¿™ä¸ªåˆ—è¡¨ã€‚ç›®å‰ï¼Œä½ è¢«åˆ†é…çš„ä»»åŠ¡æ˜¯è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¶ˆè€—è”ç³»äººåˆ—è¡¨å¹¶ç¡®å®šå®ƒæ˜¯å¦åŒ…å«åç§°â€œFlattâ€ã€‚
- en: 'Once we have a solution to this sample problem, we will generalize it to a
    function that finds any name on a list.The data definition for [List-of-names](#%28tech._list._of._name%29)
    from the preceding is appropriate for representing the list of names that the
    function is to search. Next we turn to the header material:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªç¤ºä¾‹é—®é¢˜ï¼Œæˆ‘ä»¬å°†å°†å…¶æ¨å¹¿ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥æ‰¾åˆ°åˆ—è¡¨ä¸­çš„ä»»ä½•åç§°ã€‚[List-of-names](#%28tech._list._of._name%29)
    çš„æ•°æ®å®šä¹‰é€‚ç”¨äºè¡¨ç¤ºå‡½æ•°è¦æœç´¢çš„åç§°åˆ—è¡¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è½¬å‘å¤´ææ–™ï¼š
- en: '| ;Â [List-of-names](#%28tech._list._of._name%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-199
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-names](#%28tech._list._of._name%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| ;Â determines whether "Flatt" is on a-list-of-names |'
  id: totrans-200
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â determines whether "Flatt" is on a-list-of-names |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â a-list-of-names)
    |'
  id: totrans-201
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â a-list-of-names)
    |'
- en: '| Â Â #false) |'
  id: totrans-202
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â #false) |'
- en: 'While a-list-of-names is a good name for the list of names that the function
    consumes, it is a mouthful and we therefore shorten it to alon.Following the general
    design recipe, we next make up some examples that illustrate the purpose of the
    function. First, we determine the output for the simplest input: ''(). Since this
    list does not contain any strings, it certainly does not contain "Flatt":'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶ a-list-of-names æ˜¯å‡½æ•°æ¶ˆè€—çš„åç§°åˆ—è¡¨çš„å¥½åå­—ï¼Œä½†å®ƒå¤ªé•¿äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶ç¼©çŸ­ä¸º alonã€‚éµå¾ªé€šç”¨è®¾è®¡é…æ–¹ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ç¼–å†™ä¸€äº›ç¤ºä¾‹æ¥è¯´æ˜å‡½æ•°çš„ç›®çš„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç¡®å®šæœ€ç®€å•è¾“å…¥çš„è¾“å‡ºï¼š'()ã€‚ç”±äºè¿™ä¸ªåˆ—è¡¨ä¸åŒ…å«ä»»ä½•å­—ç¬¦ä¸²ï¼Œå®ƒå½“ç„¶ä¸åŒ…å«
    "Flatt"ï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (contains-flatt?Â '())Â #false)
  id: totrans-204
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (contains-flatt?Â '())Â #false)
- en: 'Then we consider lists with a single item. Here are two examples:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åæˆ‘ä»¬è€ƒè™‘åªæœ‰ä¸€ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªä¾‹å­ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Find"Â ''()))
    |'
  id: totrans-206
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Find"Â ''()))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â #false) |'
  id: totrans-207
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â #false) |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ''()))
    |'
  id: totrans-208
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ''()))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â #true) |'
  id: totrans-209
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â #true) |'
- en: 'In the first case, the answer is #false because the single item on the list
    is not "Flatt"; in the second case, the single item is "Flatt", so the answer
    is #true. Finally, here is a more general example:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 'åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œç­”æ¡ˆæ˜¯ #falseï¼Œå› ä¸ºåˆ—è¡¨ä¸Šçš„å•ä¸ªé¡¹ä¸æ˜¯ "Flatt"ï¼›åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œå•ä¸ªé¡¹æ˜¯ "Flatt"ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ #trueã€‚æœ€åï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´é€šç”¨çš„ç¤ºä¾‹ï¼š'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-211
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (contains-flatt? |'
  id: totrans-212
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (contains-flatt? |'
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''()))))
    |'
  id: totrans-213
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''()))))
    |'
- en: '| Â Â #true) |'
  id: totrans-214
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â #true) |'
- en: 'Again, the answer case must be #true because the list contains "Flatt". Stop!
    Make a general example for which the answer must be #false.'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 'å†æ¬¡ï¼Œç­”æ¡ˆæƒ…å†µå¿…é¡»æ˜¯ #trueï¼Œå› ä¸ºåˆ—è¡¨ä¸­åŒ…å« "Flatt"ã€‚åœï¼ä¸ºå¿…é¡»è¿”å› #false çš„æƒ…å†µåˆ¶ä½œä¸€ä¸ªé€šç”¨ç¤ºä¾‹ã€‚'
- en: Take a breath. Run the program. The header is a â€œdummyâ€ definition for the function;
    you have some examples; they have been turned into tests; and best of all, some
    of them actually succeed. They succeed for the wrong reason but succeed they do.
    If things make sense now, read on.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: æ·±å¸ä¸€å£æ°”ã€‚è¿è¡Œç¨‹åºã€‚å¤´éƒ¨çš„å®šä¹‰æ˜¯å‡½æ•°çš„â€œè™šæ‹Ÿâ€å®šä¹‰ï¼›ä½ æœ‰ä¸€äº›ç¤ºä¾‹ï¼›å®ƒä»¬å·²ç»è¢«è½¬æ¢æˆæµ‹è¯•ï¼›æœ€å¥½çš„æ˜¯ï¼Œå…¶ä¸­ä¸€äº›å®é™…ä¸ŠæˆåŠŸäº†ã€‚å®ƒä»¬è™½ç„¶æ˜¯å› ä¸ºé”™è¯¯çš„åŸå› è€ŒæˆåŠŸï¼Œä½†ç¡®å®æˆåŠŸäº†ã€‚å¦‚æœç°åœ¨ä¸€åˆ‡éƒ½æœ‰æ„ä¹‰ï¼Œè¯·ç»§ç»­é˜…è¯»ã€‚
- en: 'The fourth step is to design a function template that matches the data definition.
    Since the data definition for lists of strings has two clauses, the functionâ€™s
    body must be a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with two clauses. The two conditions determine which of the two kinds
    of lists the function received:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬å››æ­¥æ˜¯è®¾è®¡ä¸€ä¸ªä¸æ•°æ®å®šä¹‰ç›¸åŒ¹é…çš„å‡½æ•°æ¨¡æ¿ã€‚ç”±äºå­—ç¬¦ä¸²åˆ—è¡¨çš„æ•°æ®å®šä¹‰æœ‰ä¸¤ä¸ªå­å¥ï¼Œå› æ­¤å‡½æ•°ä½“å¿…é¡»æ˜¯ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå­å¥çš„ [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    è¡¨è¾¾å¼ã€‚è¿™ä¸¤ä¸ªæ¡ä»¶å†³å®šäº†å‡½æ•°æ¥æ”¶çš„æ˜¯ä¸¤ç§åˆ—è¡¨ä¸­çš„å“ªä¸€ç§ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
  id: totrans-218
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-219
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-220
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  id: totrans-221
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    alon) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'Instead of ([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  alon),
    we could use [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    in the second clause.We can add one more hint to the template by studying each
    clause of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression in turn. Specifically, recall that the design recipe suggests annotating
    each clause with selector expressions if the corresponding class of inputs consists
    of compounds. In our case, we know that ''() does not have compounds, so there
    are no components. Otherwise the list is constructed from a string and another
    list of strings, and we remind ourselves of this fact by adding ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    and ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    to the template:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: ä»£æ›¿ ([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    alon)ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¬¬äºŒä¸ªå­å¥ä¸­ä½¿ç”¨ [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)ã€‚é€šè¿‡é€ä¸€ç ”ç©¶
    [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    è¡¨è¾¾å¼çš„æ¯ä¸ªå­å¥ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ¨¡æ¿æ·»åŠ ä¸€ä¸ªé¢å¤–çš„æç¤ºã€‚å…·ä½“æ¥è¯´ï¼Œè®¾è®¡é…æ–¹å»ºè®®å¦‚æœç›¸åº”çš„è¾“å…¥ç±»åˆ«ç”±å¤åˆä½“ç»„æˆï¼Œåˆ™å¯¹æ¯ä¸ªå­å¥è¿›è¡Œé€‰æ‹©è¡¨è¾¾å¼æ³¨é‡Šã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“
    '() æ²¡æœ‰å¤åˆä½“ï¼Œå› æ­¤æ²¡æœ‰ç»„ä»¶ã€‚å¦åˆ™ï¼Œåˆ—è¡¨æ˜¯ç”±ä¸€ä¸ªå­—ç¬¦ä¸²å’Œå¦ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨æ„æˆçš„ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨æ¨¡æ¿ä¸­æ·»åŠ  ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon) å’Œ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon) æ¥æé†’è‡ªå·±è¿™ä¸ªäº‹å®ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
  id: totrans-223
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (contains-flatt? alon) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-224
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-225
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    alon) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)
    |'
  id: totrans-226
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    alon) |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-227
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'Now it is time to switch to the programming task proper, the fifth step of
    our design recipe. It starts from a template and deals with each [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause separately. If ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  alon)
    is true, the input is the empty list, in which case the function must produce
    the result #false. In the second case, ([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  alon)
    is true. The annotations in the template remind us that there is a first string
    and then the rest of the list. So letâ€™s consider an example that falls into this
    category:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç°åœ¨æ˜¯æ—¶å€™åˆ‡æ¢åˆ°çœŸæ­£çš„ç¼–ç¨‹ä»»åŠ¡ï¼Œå³æˆ‘ä»¬çš„è®¾è®¡é£Ÿè°±çš„ç¬¬äº”æ­¥ã€‚å®ƒä»ä¸€ä¸ªæ¨¡æ¿å¼€å§‹ï¼Œå¹¶åˆ†åˆ«å¤„ç†æ¯ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥ã€‚å¦‚æœ ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  alon)
    ä¸ºçœŸï¼Œåˆ™è¾“å…¥æ˜¯ç©ºåˆ—è¡¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°å¿…é¡»äº§ç”Ÿç»“æœ #falseã€‚åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œ([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  alon)
    ä¸ºçœŸã€‚æ¨¡æ¿ä¸­çš„æ³¨é‡Šæé†’æˆ‘ä»¬ï¼Œæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åæ˜¯åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªå±äºè¿™ä¸€ç±»åˆ«çš„ä¾‹å­ï¼š'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"
    |'
  id: totrans-229
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-230
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ''()))
    |'
  id: totrans-231
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ''()))
    |'
- en: 'The function, like a person, must compare the first item with "Flatt". In this
    example, the first one is "A" and not "Flatt", so the comparison yields #false.
    If we had considered some other example instead, say,'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 'å‡½æ•°ï¼Œå°±åƒäººä¸€æ ·ï¼Œå¿…é¡»å°†ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ "Flatt" è¿›è¡Œæ¯”è¾ƒã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ "A" è€Œä¸æ˜¯ "Flatt"ï¼Œå› æ­¤æ¯”è¾ƒç»“æœä¸º #falseã€‚å¦‚æœæˆ‘ä»¬è€ƒè™‘å…¶ä»–ä¾‹å­ï¼Œæ¯”å¦‚ï¼Œ'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"
    |'
  id: totrans-233
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-234
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ''()))
    |'
  id: totrans-235
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ''()))
    |'
- en: 'the function would determine that the first item on the input is "Flatt", and
    would therefore respond with #true. This implies that the second line in the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression should contain an expression that compares the first name on the list
    with "Flatt":'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 'å‡½æ•°å°†ç¡®å®šè¾“å…¥çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ "Flatt"ï¼Œå› æ­¤ä¼šå“åº” #trueã€‚è¿™è¡¨æ˜ [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    è¡¨è¾¾å¼çš„ç¬¬äºŒè¡Œåº”åŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼å°†åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªåç§°ä¸ "Flatt" è¿›è¡Œæ¯”è¾ƒï¼š'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
  id: totrans-237
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-238
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
  id: totrans-239
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    alon) #false] |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)
    |'
  id: totrans-240
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    alon)] |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")
    |'
  id: totrans-241
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon) "Flatt") |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-242
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: 'Furthermore, if the comparison yields #true, the function must produce #true.
    If the comparison yields #false, we are left with another list of strings: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon).
    Clearly, the function canâ€™t know the final answer in this case, because the answer
    depends on what â€œ...â€ represents. Put differently, if the first item is not "Flatt",
    we need some way to check whether the rest of the list contains "Flatt".'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 'æ­¤å¤–ï¼Œå¦‚æœæ¯”è¾ƒç»“æœä¸º #trueï¼Œå‡½æ•°å¿…é¡»è¿”å› #trueã€‚å¦‚æœæ¯”è¾ƒç»“æœä¸º #falseï¼Œæˆ‘ä»¬å°†å¾—åˆ°å¦ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼š([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon)ã€‚æ˜¾ç„¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°æ— æ³•çŸ¥é“æœ€ç»ˆç­”æ¡ˆï¼Œå› ä¸ºç­”æ¡ˆå–å†³äºâ€œ...â€ä»£è¡¨ä»€ä¹ˆã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ ä¸æ˜¯ "Flatt"ï¼Œæˆ‘ä»¬éœ€è¦æŸç§æ–¹æ³•æ¥æ£€æŸ¥åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†æ˜¯å¦åŒ…å«
    "Flatt"ã€‚'
- en: Fortunately, we have contains-flatt? and it fits the bill. According to its
    purpose statement, it determines whether a list contains "Flatt". The statement
    implies that (contains-flatt?  l) tells us whether the list of strings l contains
    "Flatt". And, in the same vein, (contains-flatt?  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    determines whether "Flatt" is a member of ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon),
    which is precisely what we need to know.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰ contains-flatt? å‡½æ•°ï¼Œå®ƒç¬¦åˆè¦æ±‚ã€‚æ ¹æ®å…¶ç›®çš„è¯´æ˜ï¼Œå®ƒç¡®å®šä¸€ä¸ªåˆ—è¡¨æ˜¯å¦åŒ…å« "Flatt"ã€‚è¯¥è¯´æ˜æš—ç¤ºäº† (contains-flatt?
    l) å‘Šè¯‰æˆ‘ä»¬å­—ç¬¦ä¸²åˆ—è¡¨ l æ˜¯å¦åŒ…å« "Flatt"ã€‚åŒæ ·åœ°ï¼Œ(contains-flatt? ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon)) ç¡®å®šæ˜¯å¦ "Flatt" æ˜¯ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon) çš„æˆå‘˜ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬éœ€è¦çŸ¥é“çš„ä¿¡æ¯ã€‚
- en: 'In short, the last line should be (contains-flatt?  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)):'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: ç®€è€Œè¨€ä¹‹ï¼Œæœ€åä¸€è¡Œåº”è¯¥æ˜¯ (contains-flatt? ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon))ï¼š
- en: '| ;Â [List-of-names](#%28tech._list._of._name%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-246
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [List-of-names](#%28tech._list._of._name%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
  id: totrans-247
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (contains-flatt? alon) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-248
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
  id: totrans-249
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)
    |'
  id: totrans-250
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-251
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-252
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'The trick is now to combine the values of the two expressions in the appropriate
    manner. As mentioned, if the first expression yields #true, there is no need to
    search the rest of the list; if it is #false, though, the second expression may
    still yield #true, meaning the name "Flatt" is on the rest of the list. All of
    this suggests that the result of (contains-flatt?  alon) is #true if either the
    first expression in the last line or the second expression yields #true.'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨çš„æŠ€å·§æ˜¯å°†ä¸¤ä¸ªè¡¨è¾¾å¼çš„å€¼ä»¥é€‚å½“çš„æ–¹å¼ç»„åˆèµ·æ¥ã€‚æ­£å¦‚ä¹‹å‰æåˆ°çš„ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¡¨è¾¾å¼è¿”å›#trueï¼Œåˆ™æ— éœ€æœç´¢åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ï¼›å¦‚æœå®ƒæ˜¯#falseï¼Œåˆ™ç¬¬äºŒä¸ªè¡¨è¾¾å¼å¯èƒ½ä»ç„¶è¿”å›#trueï¼Œè¿™æ„å‘³ç€åç§°"Flatt"åœ¨åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ã€‚æ‰€æœ‰è¿™äº›éƒ½è¡¨æ˜ï¼Œå¦‚æœæœ€åä¸€è¡Œä¸­çš„ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼æˆ–ç¬¬äºŒä¸ªè¡¨è¾¾å¼è¿”å›#trueï¼Œåˆ™(contains-flatt?
    alon)çš„ç»“æœæ˜¯#trueã€‚
- en: '| ;Â [List-of-names](#%28tech._list._of._name%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-254
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-names](#%28tech._list._of._name%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| ;Â determines whether "Flatt" occurs on alon |'
  id: totrans-255
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: ;Â ç¡®å®š"Flatt"æ˜¯å¦å‡ºç°åœ¨alonä¸­
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-256
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "X"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Y"Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Z"Â ''()))))
    |'
  id: totrans-257
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "X"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Y"Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Z"Â ''()))))])
    |'
- en: '| Â Â #false) |'
  id: totrans-258
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| (#false) |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-259
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''()))))
    |'
  id: totrans-260
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''()))))
    |'
- en: '| Â Â #true) |'
  id: totrans-261
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â #true) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
  id: totrans-262
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-263
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
  id: totrans-264
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)
    |'
  id: totrans-265
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)
    |'
- en: '| Â Â Â Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")
    |'
  id: totrans-266
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")
    |'
- en: '| Â Â Â Â Â Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))]))
    |'
  id: totrans-267
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))]))
    |'
- en: ''
  id: totrans-268
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 47: Searching a list'
  id: totrans-269
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾47ï¼šæœç´¢åˆ—è¡¨
- en: '[FigureÂ 47](#%28counter._%28figure._fig~3acontains-flatt~3f%29%29) then shows
    the complete definition. Overall it doesnâ€™t look too different from the definitions
    in the first chapter of the book. It consists of a signature, a purpose statement,
    two examples, and a definition. The only way in which this function definition
    differs from anything you have seen before is the self-reference, that is, the
    reference to contains-flatt? in the body of the [define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29).
    Then again, the data definition is self-referential, too, so in some sense the
    self-reference in the function shouldnâ€™t be too surprising.'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾47](#%28counter._%28figure._fig~3acontains-flatt~3f%29%29)å±•ç¤ºäº†å®Œæ•´çš„å®šä¹‰ã€‚æ€»ä½“æ¥çœ‹ï¼Œå®ƒä¸ä¹¦ä¸­ç¬¬ä¸€ç« çš„å®šä¹‰æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚å®ƒåŒ…æ‹¬ä¸€ä¸ªç­¾åã€ä¸€ä¸ªç›®çš„è¯´æ˜ã€ä¸¤ä¸ªç¤ºä¾‹å’Œä¸€ä¸ªå®šä¹‰ã€‚è¿™ä¸ªå‡½æ•°å®šä¹‰ä¸ä¹‹å‰æ‰€è§çš„ä¸åŒä¹‹å¤„ä»…åœ¨äºè‡ªå¼•ç”¨ï¼Œå³[define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)ä½“ä¸­å¯¹contains-flatt?çš„å¼•ç”¨ã€‚ç„¶è€Œï¼Œæ•°æ®å®šä¹‰ä¹Ÿæ˜¯è‡ªå¼•ç”¨çš„ï¼Œæ‰€ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œå‡½æ•°ä¸­çš„è‡ªå¼•ç”¨å¹¶ä¸ä»¤äººæ„å¤–ã€‚'
- en: 'ExerciseÂ 132\. Use DrRacket to run contains-flatt? in this example:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 132ã€‚ä½¿ç”¨DrRacketè¿è¡Œæ­¤ç¤ºä¾‹ä¸­çš„contains-flatt?ï¼š
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Fagan"
    |'
  id: totrans-272
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Fagan"
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Findler"
    |'
  id: totrans-273
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Findler"
    |'
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Fisler"
    |'
  id: totrans-274
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Fisler"
    |'
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flanagan"
    |'
  id: totrans-275
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flanagan"
    |'
- en: '| Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"
    |'
  id: totrans-276
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Felleisen"
    |'
  id: totrans-277
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Felleisen"
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Friedman"Â ''())))))))
    |'
  id: totrans-278
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Friedman"Â ''())))))
    |'
- en: 'What answer do you expect?ExerciseÂ 133\. Here is another way of formulating
    the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause in contains-flatt?:'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ æœŸæœ›ä»€ä¹ˆç­”æ¡ˆï¼Ÿç»ƒä¹  133ã€‚è¿™æ˜¯å¦ä¸€ç§åœ¨ contains-flatt? ä¸­è¡¨è¾¾ç¬¬äºŒä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    æ¡ä»¶çš„æ–¹æ¡ˆï¼š
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-280
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")Â #true]
    |'
  id: totrans-281
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")Â #true]
    |'
- en: '| Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))])Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-282
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))])Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: Explain why this expression produces the same answers as the [or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    expression in the version of [figureÂ 47](#%28counter._%28figure._fig~3acontains-flatt~3f%29%29).
    Which version is clearer to you? Explain.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: è§£é‡Šä¸ºä»€ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼äº§ç”Ÿçš„ç­”æ¡ˆä¸ [figure 47](#%28counter._%28figure._fig~3acontains-flatt~3f%29%29)
    ç‰ˆæœ¬ä¸­çš„ [or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    è¡¨è¾¾å¼ç›¸åŒã€‚å“ªä¸ªç‰ˆæœ¬æ›´æ¸…æ™°ï¼Ÿè§£é‡Šä¸€ä¸‹ã€‚
- en: ExerciseÂ 134\. Develop the contains? function, which determines whether some
    given string occurs on a given list of strings.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  134ã€‚å¼€å‘ contains? å‡½æ•°ï¼Œè¯¥å‡½æ•°ç¡®å®šæŸä¸ªç»™å®šçš„å­—ç¬¦ä¸²æ˜¯å¦å‡ºç°åœ¨ç»™å®šçš„å­—ç¬¦ä¸²åˆ—è¡¨ä¸­ã€‚
- en: 'Note BSL actually comes with [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29),
    a function that consumes two values and checks whether the first occurs in the
    second, a list:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼ŒBSL å®é™…ä¸ŠåŒ…å«äº† [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¶ˆè€—ä¸¤ä¸ªå€¼çš„å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ç¬¬ä¸€ä¸ªå€¼æ˜¯å¦å‡ºç°åœ¨ç¬¬äºŒä¸ªå€¼ï¼ˆä¸€ä¸ªåˆ—è¡¨ï¼‰ä¸­ï¼š
- en: '| > ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ''())))
    |'
  id: totrans-286
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ''())))
    |'
- en: '| #true |'
  id: totrans-287
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| #true |'
- en: Donâ€™t use [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    to define the contains? function.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸è¦ä½¿ç”¨[member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)æ¥å®šä¹‰contains?å‡½æ•°ã€‚
- en: '| (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))
    |'
  id: totrans-289
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))
    |'
- en: '| == |'
  id: totrans-290
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-291
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Flatt"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "C"  ''())))Â #false]
    |'
  id: totrans-292
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Flatt"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "C"  ''())))Â #false]
    |'
- en: '| Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))
    |'
  id: totrans-293
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))
    |'
- en: '| Â Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    |'
  id: totrans-294
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆæˆ–[or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)ï¼‰
    |'
- en: '| Â Â Â Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))Â "Flatt")
    |'
  id: totrans-295
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))Â "Flatt")
    |'
- en: '| Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))])
    |'
  id: totrans-296
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))
    |'
- en: ''
  id: totrans-297
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 48: Computing with lists, step 1'
  id: totrans-298
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾48ï¼šä½¿ç”¨åˆ—è¡¨è¿›è¡Œè®¡ç®—ï¼Œæ­¥éª¤1
- en: 8.4Computing with Lists[ğŸ”—](#(part._sec~3aeval-list) "Link to here")
  id: totrans-299
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.4 ä½¿ç”¨åˆ—è¡¨è¿›è¡Œè®¡ç®—[ğŸ”—](#(part._sec~3aeval-list) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Since we are still using BSL, the rules of algebraâ€”<wbr>see intermezzo 1â€”<wbr>tell
    us how to determine the value of expressions such as
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘ä»¬ä»åœ¨ä½¿ç”¨BSLï¼Œä»£æ•°è§„åˆ™â€”â€”<wbr>å‚è§æ’æ›²1â€”â€”<wbr>å‘Šè¯‰æˆ‘ä»¬å¦‚ä½•ç¡®å®šè¯¸å¦‚
- en: (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â '())))
  id: totrans-301
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â '())))
- en: without DrRacket. Programmers must have an intuitive understanding of how this
    kind of calculation works, so we step through the one for this simple example.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ä½¿ç”¨DrRacketã€‚ç¨‹åºå‘˜å¿…é¡»å¯¹è¿™ç§è®¡ç®—æ–¹å¼æœ‰ç›´è§‚çš„ç†è§£ï¼Œå› æ­¤æˆ‘ä»¬é€æ­¥åˆ†æè¿™ä¸ªç®€å•ç¤ºä¾‹ã€‚
- en: '[FigureÂ 48](#%28counter._%28figure._fig~3acomp-cons1%29%29) displays the first
    step, which uses the usual substitution rule to determine the value of an application.
    The result is a conditional expression because, as an algebra teacher would say,
    the function is defined in a step-wise fashion.'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾48](#%28counter._%28figure._fig~3acomp-cons1%29%29) å±•ç¤ºäº†ç¬¬ä¸€æ­¥ï¼Œå®ƒä½¿ç”¨å¸¸è§„æ›¿æ¢è§„åˆ™æ¥ç¡®å®šåº”ç”¨çš„å€¼ã€‚ç»“æœæ˜¯ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼ï¼Œå› ä¸ºï¼Œæ­£å¦‚ä¸€ä½ä»£æ•°è€å¸ˆæ‰€è¯´ï¼Œå‡½æ•°æ˜¯ä»¥é€æ­¥æ–¹å¼å®šä¹‰çš„ã€‚'
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-304
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| == |'
  id: totrans-305
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-306
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â [#falseÂ #false] |'
  id: totrans-307
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â [#falseÂ #false] |'
- en: '| Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))
    |'
  id: totrans-308
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))
    |'
- en: '| Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))Â "Flatt")
    |'
  id: totrans-309
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))Â "Flatt")
    |'
- en: '| Â Â Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))])
    |'
  id: totrans-310
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| åŒ…å«æ‰å¹³åŒ–ï¼Ÿ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Flatt" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "C" ''())))))) |'
- en: '| == |'
  id: totrans-311
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-312
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Flatt"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "C"  ''())))
    |'
  id: totrans-313
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Flatt"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "C"  ''())))
    |'
- en: '| Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))Â "Flatt")
    |'
  id: totrans-314
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Flatt" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "C" ''()))) "Flatt") |'
- en: '| Â Â Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))])
    |'
  id: totrans-315
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â (contains-flatt? ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Flatt" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "C" ''())))))] |'
- en: '| == |'
  id: totrans-316
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-317
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â [#true |'
  id: totrans-318
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â [#true |'
- en: '| Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))Â "Flatt")
    |'
  id: totrans-319
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Flatt" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "C" ''()))) "Flatt") |'
- en: '| Â Â Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))])
    |'
  id: totrans-320
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â (contains-flatt? ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Flatt" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "C" ''()))))) |'
- en: '| == |'
  id: totrans-321
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Flatt"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "C"  ''())))Â "Flatt")
    |'
  id: totrans-322
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Flatt" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "C" ''()))) "Flatt") |'
- en: '| Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))
    |'
  id: totrans-323
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (contains-flatt? ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Flatt" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "C" ''()))))) |'
- en: ''
  id: totrans-324
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 49: Computing with lists, step 2'
  id: totrans-325
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾49ï¼šä½¿ç”¨åˆ—è¡¨è¿›è¡Œè®¡ç®—ï¼Œæ­¥éª¤2
- en: 'The calculation is continued in [figureÂ 49](#%28counter._%28figure._fig~3acomp-cons2%29%29).
    To find the correct clause of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression, we must determine the value of the conditions, one by one. Since a
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    list isnâ€™t empty, the first conditionâ€™s result is #false, and we therefore eliminate
    the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause. Finally the condition in the second clause evaluates to #true because
    [cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    of a [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    list holds.'
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: è®¡ç®—åœ¨[å›¾49](#%28counter._%28figure._fig~3acomp-cons2%29%29)ä¸­ç»§ç»­ã€‚ä¸ºäº†æ‰¾åˆ°[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)è¡¨è¾¾å¼çš„æ­£ç¡®å­å¥ï¼Œæˆ‘ä»¬å¿…é¡»é€ä¸ªç¡®å®šæ¡ä»¶å€¼ã€‚ç”±äºè¿æ¥çš„åˆ—è¡¨ä¸ä¸ºç©ºï¼Œç¬¬ä¸€ä¸ªæ¡ä»¶çš„ç»“æœæ˜¯#falseï¼Œå› æ­¤æˆ‘ä»¬æ’é™¤äº†ç¬¬ä¸€ä¸ª[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)å­å¥ã€‚æœ€åï¼Œç¬¬äºŒä¸ªå­å¥ä¸­çš„æ¡ä»¶è¯„ä¼°ä¸º#trueï¼Œå› ä¸ºè¿æ¥åˆ—è¡¨çš„[cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)ä¸ºçœŸã€‚
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-327
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| == |'
  id: totrans-328
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| == |'
- en: '| ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)  "Flatt"  "Flatt")
    |'
  id: totrans-329
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)  "Flatt"  "Flatt")
    |'
- en: '| Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))
    |'
  id: totrans-330
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))
    |'
- en: '| ==Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)  #true  (contains-flatt?  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  id: totrans-331
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â ([æˆ–](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)  #true  (contains-flatt?  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
- en: '| ==Â #true |'
  id: totrans-332
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ==Â #true |'
- en: ''
  id: totrans-333
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 50: Computing with lists, step 3'
  id: totrans-334
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾50ï¼šä½¿ç”¨åˆ—è¡¨è¿›è¡Œè®¡ç®—ï¼Œæ­¥éª¤3
- en: 'From here, it is just three more steps of arithmetic to get the final result.
    [FigureÂ 50](#%28counter._%28figure._fig~3acomp-cons3%29%29) displays the three
    steps. The first evaluates ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Flatt"  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    to "Flatt" due to the laws for [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29).
    The second discovers that "Flatt" is a string and equal to "Flatt". The third
    says ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)  #true  X)
    is #true regardless of what X is.'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 'ä»è¿™é‡Œå¼€å§‹ï¼Œåªéœ€å†è¿›è¡Œä¸‰ä¸ªç®—æœ¯æ­¥éª¤å°±å¯ä»¥å¾—åˆ°æœ€ç»ˆç»“æœã€‚[å›¾50](#%28counter._%28figure._fig~3acomp-cons3%29%29)å±•ç¤ºäº†è¿™ä¸‰ä¸ªæ­¥éª¤ã€‚ç¬¬ä¸€æ­¥è¯„ä¼°([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Flatt" [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))åˆ°"Flatt"ï¼Œè¿™æ˜¯ç”±äº[first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)çš„è§„åˆ™ã€‚ç¬¬äºŒæ­¥å‘ç°"Flatt"æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ç­‰äº"Flatt"ã€‚ç¬¬ä¸‰æ­¥è¯´æ˜([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    #true X)æ— è®ºXæ˜¯ä»€ä¹ˆéƒ½ç­‰äº#trueã€‚'
- en: ExerciseÂ 135\. Use DrRacketâ€™s stepper to check the calculation for
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 135ã€‚ä½¿ç”¨DrRacketçš„æ­¥è¿›å™¨æ£€æŸ¥ä»¥ä¸‹
- en: (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â '())))
  id: totrans-337
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (contains-flatt? ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Flatt" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "C" '())))
- en: Also use the stepper to determine the value of
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: è¿˜å¯ä»¥ä½¿ç”¨æ­¥è¿›å™¨ç¡®å®šä»¥ä¸‹å€¼
- en: '| (contains-flatt? |'
  id: totrans-339
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (contains-flatt? |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''()))))
    |'
  id: totrans-340
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "A" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "Flatt" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "C" ''()))) |'
- en: What happens when "Flatt" is replaced with "B"?ExerciseÂ 136\. Validate with
    DrRacketâ€™s stepper
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: å½“"Flatt"è¢«æ›¿æ¢ä¸º"B"æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿç»ƒä¹ 136ã€‚ä½¿ç”¨DrRacketçš„æ­¥è¿›å™¨è¿›è¡ŒéªŒè¯
- en: '| (our-firstÂ (our-consÂ "a"Â ''()))Â ==Â "a" |'
  id: totrans-342
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (our-first (our-cons "a" ''())) == "a" |'
- en: '| (our-restÂ (our-consÂ "a"Â ''()))Â ==Â ''() |'
  id: totrans-343
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (our-rest (our-cons "a" ''())) == ''() |'
- en: See [What Is '(), What Is cons](#%28part._sec~3alists-cons%29) for the definitions
    of these functions.
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹å…³äºè¿™äº›å‡½æ•°å®šä¹‰çš„[â€œ()ï¼Œä»€ä¹ˆæ˜¯ consâ€](#%28part._sec~3alists-cons%29)ã€‚
- en: '| ![image](../Images/21fc4536ef697bc86d2ec0299ded590f.png) |  | ![image](../Images/244e82bccaa4b3a16cf5fd0c1882bdfe.png)
    |'
  id: totrans-345
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/21fc4536ef697bc86d2ec0299ded590f.png) |  | ![image](../Images/244e82bccaa4b3a16cf5fd0c1882bdfe.png)
    |'
- en: ''
  id: totrans-346
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 51: Arrows for self-references in data definitions and templates'
  id: totrans-347
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾51ï¼šæ•°æ®å®šä¹‰å’Œæ¨¡æ¿ä¸­çš„è‡ªå¼•ç”¨ç®­å¤´
- en: 9Designing with Self-Referential Data Definitions[ğŸ”—](#(part._ch~3adesign-lists)
    "Link to here")
  id: totrans-348
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 9ä½¿ç”¨è‡ªå¼•ç”¨æ•°æ®å®šä¹‰è¿›è¡Œè®¾è®¡[ğŸ”—](#(part._ch~3adesign-lists) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'At first glance, self-referential data definitions seem to be far more complex
    than those for mixed data. But, as the example of contains-flatt? shows, the six
    steps of the design recipe still work. Nevertheless, in this section we generalize
    the design recipe so that it works even better for self-referential data definitions.
    The new parts concern the process of discovering when a self-referential data
    definition is needed, deriving a template, and defining the function body:'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: åˆçœ‹èµ·æ¥ï¼Œè‡ªå¼•ç”¨æ•°æ®å®šä¹‰ä¼¼ä¹æ¯”æ··åˆæ•°æ®å®šä¹‰è¦å¤æ‚å¾—å¤šã€‚ä½†æ˜¯ï¼Œæ­£å¦‚contains-flatt?çš„ä¾‹å­æ‰€ç¤ºï¼Œè®¾è®¡é£Ÿè°±çš„å…­ä¸ªæ­¥éª¤ä»ç„¶é€‚ç”¨ã€‚å°½ç®¡å¦‚æ­¤ï¼Œåœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¾è®¡é£Ÿè°±è¿›è¡Œæ³›åŒ–ï¼Œä½¿å…¶åœ¨è‡ªå¼•ç”¨æ•°æ®å®šä¹‰ä¸­è¡¨ç°å¾—æ›´å¥½ã€‚æ–°çš„éƒ¨åˆ†æ¶‰åŠå‘ç°ä½•æ—¶éœ€è¦è‡ªå¼•ç”¨æ•°æ®å®šä¹‰çš„è¿‡ç¨‹ã€æ¨å¯¼æ¨¡æ¿ä»¥åŠå®šä¹‰å‡½æ•°ä½“ï¼š
- en: If a problem statement is about information of arbitrary size, you need a self-referential
    data definition to represent it. At this point, you have seen only one such class,
    [List-of-names](#%28tech._list._of._name%29). The left side of [figureÂ 51](#%28counter._%28figure._fig~3adata-def-arrows%29%29)
    shows how to define List-of-strings in the same way. Other lists of atomic data
    work the same way.
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœä¸€ä¸ªé—®é¢˜é™ˆè¿°æ¶‰åŠä»»æ„å¤§å°çš„ä¿¡æ¯ï¼Œä½ éœ€è¦ä¸€ä¸ªè‡ªå¼•ç”¨çš„æ•°æ®å®šä¹‰æ¥è¡¨ç¤ºå®ƒã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åªçœ‹åˆ°è¿‡è¿™æ ·ä¸€ä¸ªç±»ï¼Œ[åç§°åˆ—è¡¨](#%28tech._list._of._name%29)ã€‚[å›¾51](#%28counter._%28figure._fig~3adata-def-arrows%29%29)çš„å·¦ä¾§æ˜¾ç¤ºäº†å¦‚ä½•ä»¥ç›¸åŒçš„æ–¹å¼å®šä¹‰å­—ç¬¦ä¸²åˆ—è¡¨ã€‚å…¶ä»–åŸå­æ•°æ®çš„åˆ—è¡¨ä»¥ç›¸åŒçš„æ–¹å¼å·¥ä½œã€‚
- en: Numbers also seem to be arbitrarily large. For inexact numbers, this is an illusion.
    For precise integers, this is indeed the case. Dealing with integers is therefore
    a part of this chapter.
  id: totrans-351
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ•°å­—ä¼¼ä¹ä¹Ÿå¯ä»¥ä»»æ„å¤§ã€‚å¯¹äºä¸ç²¾ç¡®æ•°å­—ï¼Œè¿™æ˜¯ä¸€ç§é”™è§‰ã€‚å¯¹äºç²¾ç¡®æ•´æ•°ï¼Œè¿™ç¡®å®æ˜¯æƒ…å†µã€‚å› æ­¤ï¼Œå¤„ç†æ•´æ•°æ˜¯æœ¬ç« çš„ä¸€éƒ¨åˆ†ã€‚
- en: For a self-referential data definition to be valid, it must satisfy two conditions.
    First, it must contain at least two clauses. Second, at least one of the clauses
    must not refer back to the class of data that is being defined. It is good practice
    to identify the self-references explicitly with arrows from the references in
    the data definition back to the term being defined; see [figureÂ 51](#%28counter._%28figure._fig~3adata-def-arrows%29%29)
    for an example of such an annotation.
  id: totrans-352
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä½¿è‡ªå¼•ç”¨æ•°æ®å®šä¹‰æœ‰æ•ˆï¼Œå®ƒå¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ã€‚é¦–å…ˆï¼Œå®ƒå¿…é¡»åŒ…å«è‡³å°‘ä¸¤ä¸ªå­å¥ã€‚å…¶æ¬¡ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªå­å¥ä¸èƒ½å¼•ç”¨æ­£åœ¨å®šä¹‰çš„æ•°æ®ç±»åˆ«ã€‚æ˜ç¡®åœ°ç”¨ç®­å¤´ä»æ•°æ®å®šä¹‰ä¸­çš„å¼•ç”¨æŒ‡å‘è¢«å®šä¹‰çš„é¡¹æ˜¯è‰¯å¥½çš„å®è·µï¼›å‚è§[å›¾51](#%28counter._%28figure._fig~3adata-def-arrows%29%29)ä»¥äº†è§£æ­¤ç±»æ³¨é‡Šçš„ç¤ºä¾‹ã€‚
- en: 'You must check the validity of self-referential data definitions with the creation
    of data examples. Start with the clause that does not refer to the data definition;
    continue with the other one, using the first example where the clause refers to
    the definition itself. For the data definition in [figureÂ 51](#%28counter._%28figure._fig~3adata-def-arrows%29%29),
    you thus get lists like the following three:'
  id: totrans-353
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ä½ å¿…é¡»é€šè¿‡åˆ›å»ºæ•°æ®ç¤ºä¾‹æ¥æ£€æŸ¥è‡ªå¼•ç”¨æ•°æ®å®šä¹‰çš„æœ‰æ•ˆæ€§ã€‚ä»ä¸€ä¸ªä¸å¼•ç”¨æ•°æ®å®šä¹‰çš„å­å¥å¼€å§‹ï¼›ç»§ç»­ä½¿ç”¨å…¶ä»–å­å¥ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªå¼•ç”¨å®šä¹‰æœ¬èº«çš„ç¤ºä¾‹ã€‚å¯¹äº[å›¾51](#%28counter._%28figure._fig~3adata-def-arrows%29%29)ä¸­çš„æ•°æ®å®šä¹‰ï¼Œå› æ­¤ä½ å¾—åˆ°ä»¥ä¸‹ä¸‰ä¸ªåˆ—è¡¨ï¼š
- en: '| ''() |  | by the first clause |'
  id: totrans-354
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| ''() |  | ç”±ç¬¬ä¸€ä¸ªå­å¥å®šä¹‰ |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''())
    |  | by the second clause, previous example |'
  id: totrans-355
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''())
    |  | æ ¹æ®ç¬¬äºŒä¸ªå­å¥ï¼Œå‰ä¸€ä¸ªç¤ºä¾‹ |'
- en: '|'
  id: totrans-356
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '|'
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  id: totrans-357
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-358
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
- en: '&#124; Â Â Â Â ''())) &#124;'
  id: totrans-359
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ''())) &#124;'
- en: '|  | by the second clause, previous example |'
  id: totrans-360
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '|  | æ ¹æ®ç¬¬äºŒä¸ªå­å¥ï¼Œå‰ä¸€ä¸ªç¤ºä¾‹ |'
- en: If it is impossible to generate examples from the data definition, it is invalid.
    If you can generate examples but you canâ€™t see how to generate increasingly larger
    examples, the definition may not live up to its interpretation.
  id: totrans-361
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœæ— æ³•ä»æ•°æ®å®šä¹‰ä¸­ç”Ÿæˆç¤ºä¾‹ï¼Œåˆ™è¯¥å®šä¹‰æ— æ•ˆã€‚å¦‚æœä½ å¯ä»¥ç”Ÿæˆç¤ºä¾‹ï¼Œä½†ä½ ä¸çŸ¥é“å¦‚ä½•ç”Ÿæˆè¶Šæ¥è¶Šå¤§çš„ç¤ºä¾‹ï¼Œåˆ™å®šä¹‰å¯èƒ½ä¸ç¬¦åˆå…¶è§£é‡Šã€‚
- en: 'Nothing changes about the header material: the signature, the purpose statement,
    and the dummy definition. When you do formulate the purpose statement, focus on
    what the function computes not how it goes about it, especially not how it goes
    through instances of the given data.'
  id: totrans-362
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ ‡é¢˜ææ–™æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼šç­¾åã€ç›®çš„é™ˆè¿°å’Œå ä½ç¬¦å®šä¹‰ã€‚å½“ä½ ç¡®å®åˆ¶å®šç›®çš„é™ˆè¿°æ—¶ï¼Œè¦å…³æ³¨å‡½æ•°è®¡ç®—çš„å†…å®¹ï¼Œè€Œä¸æ˜¯å®ƒæ˜¯å¦‚ä½•è¿›è¡Œçš„ï¼Œç‰¹åˆ«æ˜¯ä¸è¦å…³æ³¨å®ƒæ˜¯å¦‚ä½•é€šè¿‡ç»™å®šæ•°æ®çš„å®ä¾‹çš„ã€‚
- en: 'Here is an example to make this design recipe concrete:'
  id: totrans-363
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­æ¥ä½¿è¿™ä¸ªè®¾è®¡é£Ÿè°±å…·ä½“åŒ–ï¼š
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-364
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â counts how many strings alos contains |'
  id: totrans-365
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â counts how many strings alos contains |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alos)
    |'
  id: totrans-366
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alos)
    |'
- en: '| Â Â 0) |'
  id: totrans-367
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â 0) |'
- en: The purpose statement clearly states that the function just counts the strings
    on the given input; there is no need to think ahead about how you might formulate
    this idea as a BSL function.
  id: totrans-368
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç›®çš„å£°æ˜æ˜ç¡®æŒ‡å‡ºï¼Œè¯¥å‡½æ•°ä»…è®¡ç®—ç»™å®šè¾“å…¥ä¸Šçš„å­—ç¬¦ä¸²æ•°é‡ï¼›æ— éœ€æå‰è€ƒè™‘å¦‚ä½•å°†æ­¤æƒ³æ³•ä½œä¸ºBSLå‡½æ•°æ¥è¡¨è¿°ã€‚
- en: When it comes to functional examples, be sure to work through inputs that use
    the self-referential clause of the data definition several times. It is the best
    way to formulate tests that cover the entire function definition later.
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å½“æ¶‰åŠåˆ°åŠŸèƒ½ç¤ºä¾‹æ—¶ï¼ŒåŠ¡å¿…å¤šæ¬¡å¤„ç†ä½¿ç”¨æ•°æ®å®šä¹‰ä¸­è‡ªå¼•ç”¨å­å¥çš„è¾“å…¥ã€‚è¿™æ˜¯åæ¥åˆ¶å®šæ¶µç›–æ•´ä¸ªå‡½æ•°å®šä¹‰çš„æµ‹è¯•çš„æœ€ä½³æ–¹å¼ã€‚
- en: 'For our running example, the purpose statement almost generates functional
    examples by itself from the data examples:'
  id: totrans-370
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¯¹äºæˆ‘ä»¬çš„è¿è¡Œç¤ºä¾‹ï¼Œç›®çš„å£°æ˜å‡ ä¹å¯ä»¥è‡ªè¡Œä»æ•°æ®ç¤ºä¾‹ç”ŸæˆåŠŸèƒ½ç¤ºä¾‹ï¼š
- en: '| given |  | wanted |'
  id: totrans-371
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ç»™å®š |  | æœŸæœ› |'
- en: '| ''() |  | 0 |'
  id: totrans-372
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''() |  | 0 |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ''())
    |  | 1 |'
  id: totrans-373
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "a" ''()) |  | 1 |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ''()))
    |  | 2 |'
  id: totrans-374
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "b" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "a" ''())) |  | 2 |'
- en: The first row is about the empty list, and we know that empty list contains
    nothing. The second row is a list of one string, so 1 is the desired answer. The
    last row is about a list of two strings.
  id: totrans-375
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€è¡Œæ˜¯å…³äºç©ºåˆ—è¡¨çš„ï¼Œæˆ‘ä»¬çŸ¥é“ç©ºåˆ—è¡¨ä¸åŒ…å«ä»»ä½•å†…å®¹ã€‚ç¬¬äºŒè¡Œæ˜¯ä¸€ä¸ªåŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²çš„åˆ—è¡¨ï¼Œæ‰€ä»¥1æ˜¯æœŸæœ›çš„ç­”æ¡ˆã€‚æœ€åä¸€è¡Œæ˜¯å…³äºåŒ…å«ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ—è¡¨ã€‚
- en: At the core, a self-referential data definition looks like a data definition
    for mixed data. The development of the template can therefore proceed according
    to the recipe in [Itemizations and Structures](part_one.html#%28part._ch~3amix%29).
    Specifically, we formulate a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with as many [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses as there are clauses in the data definition, match each recognizing condition
    to the corresponding clause in the data definition, and write down appropriate
    selector expressions in all [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines that process compound values.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨æ ¸å¿ƒä¸Šï¼Œä¸€ä¸ªè‡ªå¼•ç”¨çš„æ•°æ®å®šä¹‰çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªæ··åˆæ•°æ®çš„æ•°æ®å®šä¹‰ã€‚å› æ­¤ï¼Œæ¨¡æ¿çš„å¼€å‘å¯ä»¥æŒ‰ç…§[é¡¹ç›®åŒ–å’Œç»“æ„](part_one.html#%28part._ch~3amix%29)ä¸­çš„é…æ–¹è¿›è¡Œã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬æ ¹æ®æ•°æ®å®šä¹‰ä¸­çš„å­å¥æ•°é‡åˆ¶å®šä¸€ä¸ª[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)è¡¨è¾¾å¼ï¼Œå°†æ¯ä¸ªè¯†åˆ«æ¡ä»¶ä¸æ•°æ®å®šä¹‰ä¸­çš„ç›¸åº”å­å¥ç›¸åŒ¹é…ï¼Œå¹¶åœ¨å¤„ç†å¤åˆå€¼çš„æ‰€æœ‰[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)è¡Œä¸­å†™ä¸‹é€‚å½“çš„é€‰æ‹©è¡¨è¾¾å¼ã€‚
- en: '| Question |  | Answer |'
  id: totrans-377
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| é—®é¢˜ |  | ç­”æ¡ˆ |'
- en: '| Does the data definition distinguish among different sub-classes of data?
    |  | Your template needs as many [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses as sub-classes that the data definition distinguishes. |'
  id: totrans-378
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ•°æ®å®šä¹‰æ˜¯å¦åŒºåˆ†ä¸åŒçš„æ•°æ®å­ç±»ï¼Ÿ |  | æ‚¨çš„æ¨¡æ¿éœ€è¦ä¸æ•°æ®å®šä¹‰åŒºåˆ†çš„å­ç±»ä¸€æ ·å¤šçš„[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)å­å¥ã€‚
    |'
- en: '| How do the sub-classes differ from each other? |  | Use the differences to
    formulate a condition per clause. |'
  id: totrans-379
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| å­ç±»ä¹‹é—´æœ‰ä½•ä¸åŒï¼Ÿ |  | ä½¿ç”¨è¿™äº›å·®å¼‚ä¸ºæ¯ä¸ªå­å¥åˆ¶å®šä¸€ä¸ªæ¡ä»¶ã€‚ |'
- en: '| Do any of the clauses deal with structured values? |  | If so, add appropriate
    selector expressions to the clause. |'
  id: totrans-380
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ˜¯å¦æœ‰ä»»ä½•å­å¥å¤„ç†ç»“æ„åŒ–å€¼ï¼Ÿ |  | å¦‚æœæ˜¯ï¼Œå‘å­å¥ä¸­æ·»åŠ é€‚å½“çš„é€‰æ‹©è¡¨è¾¾å¼ã€‚ |'
- en: '| Does the data definition use self-references? |  | Formulate â€œnatural recursionsâ€
    for the template to represent the self-references of the data definition. |'
  id: totrans-381
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ•°æ®å®šä¹‰æ˜¯å¦ä½¿ç”¨è‡ªå¼•ç”¨ï¼Ÿ |  | ä¸ºæ¨¡æ¿åˆ¶å®šâ€œè‡ªç„¶é€’å½’â€ä»¥è¡¨ç¤ºæ•°æ®å®šä¹‰çš„è‡ªå¼•ç”¨ã€‚ |'
- en: '| If the data definition refers to some other data definition, where is this
    cross-reference to another data definition? |  | Specialize the template for the
    other data definition. Refer to this template. See [Designing with Itemizations,
    Again](part_one.html#%28part._mix._sec~3aitemization-design2%29), steps 4 and
    5 of the design recipe. |'
  id: totrans-382
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| å¦‚æœæ•°æ®å®šä¹‰å¼•ç”¨äº†å…¶ä»–æ•°æ®å®šä¹‰ï¼Œè¿™ä¸ªäº¤å‰å¼•ç”¨åˆ°å¦ä¸€ä¸ªæ•°æ®å®šä¹‰åœ¨å“ªé‡Œï¼Ÿ |  | ä¸ºå…¶ä»–æ•°æ®å®šä¹‰ä¸“é—¨åŒ–æ¨¡æ¿ã€‚å‚è€ƒæ­¤æ¨¡æ¿ã€‚è§[å†æ¬¡ä½¿ç”¨åˆ—ä¸¾è®¾è®¡](part_one.html#%28part._mix._sec~3aitemization-design2%29)ï¼Œè®¾è®¡é£Ÿè°±çš„ç¬¬4æ­¥å’Œç¬¬5æ­¥ã€‚
    |'
- en: ''
  id: totrans-383
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 52: How to translate a data definition into a template'
  id: totrans-384
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾52ï¼šå¦‚ä½•å°†æ•°æ®å®šä¹‰è½¬æ¢ä¸ºæ¨¡æ¿
- en: '[FigureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29) expresses this
    idea as a question-and-answer game. In the left column it states questions about
    the data definition for the argument, and in the right column it explains what
    the answer means for the construction of the template.'
  id: totrans-385
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[å›¾52](#%28counter._%28figure._fig~3atemplate-q%29%29) å°†è¿™ä¸ªæƒ³æ³•è¡¨è¾¾ä¸ºä¸€ä¸ªé—®ç­”æ¸¸æˆã€‚åœ¨å·¦ä¾§åˆ—ä¸­ï¼Œå®ƒé™ˆè¿°äº†å…³äºå‚æ•°æ•°æ®å®šä¹‰çš„é—®é¢˜ï¼Œè€Œåœ¨å³ä¾§åˆ—ä¸­ï¼Œå®ƒè§£é‡Šäº†ç­”æ¡ˆå¯¹äºæ„å»ºæ¨¡æ¿çš„å«ä¹‰ã€‚'
- en: 'If you ignore the last row and apply the first three questions to any function
    that consumes a [List-of-strings](#%28tech._list._of._string%29), you arrive at
    this shape:'
  id: totrans-386
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœä½ å¿½ç•¥æœ€åä¸€è¡Œï¼Œå¹¶å°†å‰ä¸‰ä¸ªé—®é¢˜åº”ç”¨äºä»»ä½•æ¶ˆè€—[å­—ç¬¦ä¸²åˆ—è¡¨](#%28tech._list._of._string%29)çš„å‡½æ•°ï¼Œä½ å°†å¾—åˆ°è¿™ä¸ªå½¢çŠ¶ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (fun-for-losÂ alos)
    |'
  id: totrans-387
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (fun-for-losÂ alos)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-388
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-389
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-390
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-391
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: Recall, though, that the purpose of a template is to express the data definition
    as a function layout. That is, a template expresses as code what the data definition
    for the input expresses as a mix of English and BSL. Hence all important pieces
    of the data definition must find a counterpart in the template, and this guideline
    should also hold when a data definition is self-referentialâ€”<wbr>contains an arrow
    from inside the definition to the term being defined. In particular, when a data
    definition is self-referential in the ith clause and the kth field of the structure
    mentioned there, the template should be self-referential in the ith [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause and the selector expression for the kth field. For each such selector expression,
    add an arrow back to the function parameter. At the end, your template must have
    as many arrows as we have in the data definition.
  id: totrans-392
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è™½ç„¶ï¼Œæ¨¡æ¿çš„ç›®çš„æ˜¯å°†æ•°æ®å®šä¹‰è¡¨è¾¾ä¸ºä¸€ä¸ªå‡½æ•°å¸ƒå±€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¨¡æ¿ä»¥ä»£ç çš„å½¢å¼è¡¨è¾¾çš„æ•°æ®å®šä¹‰ï¼Œè¾“å…¥çš„æ•°æ®å®šä¹‰åˆ™ä»¥è‹±è¯­å’ŒBSLçš„æ··åˆå½¢å¼è¡¨è¾¾ã€‚å› æ­¤ï¼Œæ•°æ®å®šä¹‰çš„æ‰€æœ‰é‡è¦éƒ¨åˆ†éƒ½å¿…é¡»åœ¨æ¨¡æ¿ä¸­æ‰¾åˆ°å¯¹åº”çš„éƒ¨åˆ†ï¼Œå¹¶ä¸”å½“æ•°æ®å®šä¹‰æ˜¯è‡ªå¼•ç”¨çš„â€”â€”<wbr>åŒ…å«ä»å®šä¹‰å†…éƒ¨æŒ‡å‘è¢«å®šä¹‰é¡¹çš„ç®­å¤´æ—¶ï¼Œä¹Ÿåº”éµå¾ªæ­¤æŒ‡å—ã€‚ç‰¹åˆ«æ˜¯ï¼Œå½“æ•°æ®å®šä¹‰åœ¨iä¸ªæ¡æ¬¾ä¸­è‡ªå¼•ç”¨ï¼Œå¹¶ä¸”åœ¨è¯¥æ¡æ¬¾ä¸­æåˆ°çš„ç»“æ„çš„ç¬¬kä¸ªå­—æ®µæ—¶ï¼Œæ¨¡æ¿åº”åœ¨ç¬¬iä¸ª
    [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    æ¡æ¬¾å’Œç¬¬kä¸ªå­—æ®µçš„é€‰æ‹©è¡¨è¾¾å¼ä¸­è‡ªå¼•ç”¨ã€‚å¯¹äºæ¯ä¸ªè¿™æ ·çš„é€‰æ‹©è¡¨è¾¾å¼ï¼Œæ·»åŠ ä¸€ä¸ªæŒ‡å‘å‡½æ•°å‚æ•°çš„ç®­å¤´ã€‚æœ€åï¼Œä½ çš„æ¨¡æ¿å¿…é¡»å…·æœ‰ä¸æ•°æ®å®šä¹‰ä¸­ç›¸åŒæ•°é‡çš„ç®­å¤´ã€‚
- en: '[FigureÂ 51](#%28counter._%28figure._fig~3adata-def-arrows%29%29) illustrates
    this idea with the template for functions that consume [List-of-strings](#%28tech._list._of._string%29)
    shown side by side with the data definition. Both contain one arrow that originates
    in the second clauseâ€”<wbr>the [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field and selector, respectivelyâ€”<wbr>and points back to the top of the respective
    definitions.'
  id: totrans-393
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[å›¾51](#%28counter._%28figure._fig~3adata-def-arrows%29%29) é€šè¿‡æ˜¾ç¤ºä¸æ•°æ®å®šä¹‰å¹¶æ’çš„å‡½æ•°æ¨¡æ¿
    [List-of-strings](#%28tech._list._of._string%29) æ¥è¯´æ˜è¿™ä¸ªæƒ³æ³•ã€‚ä¸¤è€…éƒ½åŒ…å«ä¸€ä¸ªä»ç¬¬äºŒä¸ªæ¡æ¬¾â€”â€”<wbr>
    [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    å­—æ®µå’Œé€‰æ‹©å™¨â€”â€”<wbr>å¼€å§‹çš„ç®­å¤´ï¼Œå¹¶æŒ‡å‘å„è‡ªå®šä¹‰çš„é¡¶éƒ¨ã€‚'
- en: 'Since BSL and most programming languages are text-oriented, you must use an
    alternative to the arrow, namely, a self-application of the function to the appropriate
    selector expression:'
  id: totrans-394
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç”±äºBSLå’Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯é¢å‘æ–‡æœ¬çš„ï¼Œå› æ­¤å¿…é¡»ä½¿ç”¨ç®­å¤´çš„æ›¿ä»£å“ï¼Œå³å‡½æ•°å¯¹é€‚å½“çš„é€‰æ‹©è¡¨è¾¾å¼çš„è‡ªæˆ‘åº”ç”¨ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (fun-for-losÂ alos)
    |'
  id: totrans-395
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (fun-for-los alo) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-396
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-397
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    alo) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-398
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-399
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alo) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fun-for-losÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-400
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...] [fun-for-los ([rest alos))] [...] |  |  |'
- en: We refer to a self-use of a function as recursion and in the first four parts
    of the book as natural recursion.
  id: totrans-401
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†å‡½æ•°çš„è‡ªç”¨ç§°ä¸ºé€’å½’ï¼Œåœ¨æœ¬ä¹¦çš„å‰å››ç« ä¸­ç§°ä¸ºè‡ªç„¶é€’å½’ã€‚
- en: For the function body we start with thoseFor the curious among our readers,
    the design recipe for arbitrarily large data corresponds to so-called â€œproofs
    by inductionâ€ in mathematics, and the â€œleap of faithâ€ represents the use of the
    induction hypothesis for the inductive step of such a proof. Logic proves the
    validity of this proof technique with an Induction Theorem. [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines without recursive function calls, known as base cases.The corresponding
    answers are typically easy to formulate or already given as examples.
  id: totrans-402
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¯¹äºå‡½æ•°ä½“ï¼Œæˆ‘ä»¬é¦–å…ˆä»é‚£äº›æ²¡æœ‰é€’å½’å‡½æ•°è°ƒç”¨çš„åŸºç¡€æƒ…å†µï¼ˆç§°ä¸ºåŸºç¡€æƒ…å†µï¼‰çš„`cond`è¡Œå¼€å§‹ã€‚å¯¹åº”çš„ç­”æ¡ˆé€šå¸¸å¾ˆå®¹æ˜“åˆ¶å®šæˆ–å·²ç»ä½œä¸ºç¤ºä¾‹ç»™å‡ºã€‚
- en: Then we deal with the self-referential cases. We start by reminding ourselves
    what each of the expressions in the template line computes. For the natural recursion
    we assume that the function already works as specified in our purpose statement.
    This last step is a leap of faith, but as you will see, it always works.
  id: totrans-403
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç„¶åæˆ‘ä»¬å¤„ç†è‡ªå¼•ç”¨çš„æƒ…å†µã€‚æˆ‘ä»¬é¦–å…ˆæé†’è‡ªå·±æ¨¡æ¿è¡Œä¸­çš„æ¯ä¸ªè¡¨è¾¾å¼è®¡ç®—äº†ä»€ä¹ˆã€‚å¯¹äºè‡ªç„¶é€’å½’ï¼Œæˆ‘ä»¬å‡è®¾å‡½æ•°å·²ç»æŒ‰ç…§æˆ‘ä»¬çš„ç›®çš„å£°æ˜å·¥ä½œã€‚è¿™ä¸€æ­¥æ˜¯â€œä¿¡ä»°è·³è·ƒâ€ï¼Œä½†æ­£å¦‚ä½ å°†çœ‹åˆ°çš„ï¼Œå®ƒæ€»æ˜¯æœ‰æ•ˆçš„ã€‚
- en: The rest is then a matter of combining the various values.
  id: totrans-404
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç„¶åå‰©ä¸‹çš„å°±æ˜¯ç»„åˆå„ç§å€¼çš„é—®é¢˜ã€‚
- en: '| Question |  | Answer |'
  id: totrans-405
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| é—®é¢˜ |  | ç­”æ¡ˆ |'
- en: '| What are the answers for the non-recursive [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses? |  | The examples should tell you which values you need here. If not,
    formulate appropriate examples and tests. |'
  id: totrans-406
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| éé€’å½’çš„[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)å­å¥çš„ç­”æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ
    |  | ç¤ºä¾‹åº”è¯¥å‘Šè¯‰ä½ è¿™é‡Œéœ€è¦å“ªäº›å€¼ã€‚å¦‚æœä¸æ˜¯è¿™æ ·ï¼Œåˆ¶å®šé€‚å½“çš„ç¤ºä¾‹å’Œæµ‹è¯•ã€‚ |'
- en: '| What do the selector expressions in the recursive clauses compute? |  | The
    data definitions tell you what kind of data these expressions extract, and the
    interpretations of the data definitions tell you what this data represents. |'
  id: totrans-407
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| é€’å½’å­å¥ä¸­çš„é€‰æ‹©è¡¨è¾¾å¼è®¡ç®—ä»€ä¹ˆï¼Ÿ |  | æ•°æ®å®šä¹‰å‘Šè¯‰ä½ è¿™äº›è¡¨è¾¾å¼æå–äº†ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œè€Œæ•°æ®å®šä¹‰çš„è§£é‡Šå‘Šè¯‰ä½ è¿™äº›æ•°æ®ä»£è¡¨ä»€ä¹ˆã€‚ |'
- en: '| What do the natural recursions compute? |  | Use the purpose statement of
    the function to determine what the value of the recursion means, not how it computes
    this answer. If the purpose statement doesnâ€™t tell you the answer, improve the
    purpose statement. |'
  id: totrans-408
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| è‡ªç„¶é€’å½’è®¡ç®—ä»€ä¹ˆï¼Ÿ |  | ä½¿ç”¨å‡½æ•°çš„ç›®çš„å£°æ˜æ¥ç¡®å®šé€’å½’çš„å€¼æ„å‘³ç€ä»€ä¹ˆï¼Œè€Œä¸æ˜¯å®ƒæ˜¯å¦‚ä½•è®¡ç®—è¿™ä¸ªç­”æ¡ˆçš„ã€‚å¦‚æœç›®çš„å£°æ˜æ²¡æœ‰å‘Šè¯‰ä½ ç­”æ¡ˆï¼Œæ”¹è¿›ç›®çš„å£°æ˜ã€‚
    |'
- en: '| How can the function combine these values to get the desired answer? |  |
    Find a function in BSL that combines the values. Or, if that doesnâ€™t work, make
    a wish for a helper function. For many functions, this last step is straightforward.
    The purpose, the examples, and the template together tell you which function or
    expression combines the available values into the proper result. We refer to this
    function or expression as a combinator, slightly abusing existing terminology.
    |'
  id: totrans-409
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| å‡½æ•°å¦‚ä½•å°†è¿™äº›å€¼ç»„åˆèµ·æ¥å¾—åˆ°æœŸæœ›çš„ç­”æ¡ˆï¼Ÿ |  | åœ¨BSLä¸­æ‰¾åˆ°ä¸€ä¸ªç»„åˆè¿™äº›å€¼çš„å‡½æ•°ã€‚æˆ–è€…ï¼Œå¦‚æœè¿™ä¸èµ·ä½œç”¨ï¼Œå°±å¸Œæœ›æœ‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚å¯¹äºè®¸å¤šå‡½æ•°ï¼Œè¿™ä¸€æ­¥æ˜¯ç›´æ¥çš„ã€‚ç›®çš„ã€ç¤ºä¾‹å’Œæ¨¡æ¿ä¸€èµ·å‘Šè¯‰ä½ å“ªä¸ªå‡½æ•°æˆ–è¡¨è¾¾å¼å°†å¯ç”¨çš„å€¼ç»„åˆæˆé€‚å½“çš„ç»“æœã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªå‡½æ•°æˆ–è¡¨è¾¾å¼ç§°ä¸ºç»„åˆå™¨ï¼Œç¨å¾®æ»¥ç”¨äº†ä¸€ä¸‹ç°æœ‰çš„æœ¯è¯­ã€‚
    |'
- en: ''
  id: totrans-410
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 53: How to turn a template into a function definition'
  id: totrans-411
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾Â 53ï¼šå¦‚ä½•å°†æ¨¡æ¿è½¬æ¢ä¸ºå‡½æ•°å®šä¹‰
- en: '| Question |  | Answer |'
  id: totrans-412
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| é—®é¢˜ |  | ç­”æ¡ˆ |'
- en: '| So, if you are stuck here, ... |  | ... arrange the examples from the third
    step in a table. Place the given input in the first column and the desired output
    in the last column. In the intermediate columns enter the values of the selector
    expressions and the natural recursion(s). Add examples until you see a pattern
    emerge that suggests a combinator. |'
  id: totrans-413
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| So, if you are stuck here, ... |  | ... arrange the examples from the third
    step in a table. Place the given input in the first column and the desired output
    in the last column. In the intermediate columns enter the values of the selector
    expressions and the natural recursion(s). Add examples until you see a pattern
    emerge that suggests a combinator. |'
- en: '| If the template refers to some other template, what does the auxiliary function
    compute? |  | Consult the other functionâ€™s purpose statement and examples to determine
    what it computes, and assume you may use the result even if you havenâ€™t finished
    the design of this helper function. |'
  id: totrans-414
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| If the template refers to some other template, what does the auxiliary function
    compute? |  | Consult the other functionâ€™s purpose statement and examples to determine
    what it computes, and assume you may use the result even if you havenâ€™t finished
    the design of this helper function. |'
- en: ''
  id: totrans-415
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 54: Turning a template into a function, the table method'
  id: totrans-416
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'FigureÂ 54: Turning a template into a function, the table method'
- en: '[FigureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29) formulates the
    first four questions and answers for this step. Letâ€™s use this game to complete
    the definition of how-many. Renaming the fun-for-los template to how-many gives
    us this much:'
  id: totrans-417
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[FigureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29) formulates the
    first four questions and answers for this step. Letâ€™s use this game to complete
    the definition of how-many. Renaming the fun-for-los template to how-many gives
    us this much:'
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-418
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â determines how many strings are on alos |'
  id: totrans-419
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â determines how many strings are on alos |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alos)
    |'
  id: totrans-420
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alos)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-421
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-422
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-423
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-424
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (how-manyÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-425
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (how-manyÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'As the functional examples already suggest, the answer for the base case is
    0. The two expressions in the second clause compute the [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    item and the number of strings in ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alos).
    To compute how many strings there are on all of alos, the function just needs
    to add 1 to the value of the latter expression:'
  id: totrans-426
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚åŠŸèƒ½ç¤ºä¾‹æ‰€ç¤ºï¼ŒåŸºæœ¬æƒ…å†µçš„ç­”æ¡ˆæ˜¯0ã€‚ç¬¬äºŒæ¡æ¬¾ä¸­çš„ä¸¤ä¸ªè¡¨è¾¾å¼è®¡ç®—ç¬¬ä¸€ä¸ªé¡¹ç›®ä»¥åŠå­—ç¬¦ä¸²åˆ—è¡¨([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alos)ä¸­çš„å­—ç¬¦ä¸²æ•°é‡ã€‚ä¸ºäº†è®¡ç®—alosä¸­æ‰€æœ‰å­—ç¬¦ä¸²çš„æ•°é‡ï¼Œå‡½æ•°åªéœ€å°†åè€…è¡¨è¾¾å¼çš„å€¼åŠ 1ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alos)
    |'
  id: totrans-427
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (how-many alos) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-428
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alos)Â 0]
    |'
  id: totrans-429
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    alos) 0] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (how-manyÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))Â 1)]))
    |'
  id: totrans-430
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    (how-many ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alos)) 1)])) |'
- en: Felix Klock suggested this table-based approach to guessing the combinator.
  id: totrans-431
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è´¹åˆ©å…‹æ–¯Â·å…‹æ´›å…‹æå‡ºäº†è¿™ç§åŸºäºè¡¨æ ¼çš„çŒœæµ‹ç»„åˆå™¨çš„æ–¹æ³•ã€‚
- en: 'Finding the correct way to combine the values into the desired answer isnâ€™t
    always as easy. Novice programmers often get stuck with this step. As [figureÂ 54](#%28counter._%28figure._fig~3adefinition-qb%29%29)
    suggests, it is a good idea to arrange the functional examples into a table that
    also spells out the values of the expressions in the template. [FigureÂ 55](#%28counter._%28figure._fig~3afelix-table1%29%29)
    shows what this table looks like for our how-many example. The left-most column
    lists the sample inputs, while the right-most column contains the desired answers
    for these inputs. The three columns in between show the values of the template
    expressions: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alos),
    ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alos),
    and (how-many  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alos)),
    which is the natural recursion. If you stare at this table long enough, you recognize
    that the result column is always one more than the values in the natural recursion
    column. You may thus guess that'
  id: totrans-432
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: æ‰¾åˆ°æ­£ç¡®çš„æ–¹æ³•å°†å€¼ç»„åˆæˆæœŸæœ›çš„ç­”æ¡ˆå¹¶ä¸æ€»æ˜¯é‚£ä¹ˆå®¹æ˜“ã€‚æ–°æ‰‹ç¨‹åºå‘˜å¸¸å¸¸åœ¨è¿™ä¸ªæ­¥éª¤ä¸Šå¡ä½ã€‚å¦‚å›¾54æ‰€ç¤ºï¼Œå°†åŠŸèƒ½ç¤ºä¾‹å®‰æ’æˆè¡¨æ ¼ï¼ŒåŒæ—¶åˆ—å‡ºæ¨¡æ¿ä¸­è¡¨è¾¾å¼çš„å€¼æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚[å›¾55](#%28counter._%28figure._fig~3afelix-table1%29%29)å±•ç¤ºäº†æˆ‘ä»¬çš„how-manyç¤ºä¾‹çš„è¡¨æ ¼æ ·å­ã€‚æœ€å·¦è¾¹çš„åˆ—åˆ—å‡ºäº†æ ·æœ¬è¾“å…¥ï¼Œè€Œæœ€å³è¾¹çš„åˆ—åŒ…å«äº†è¿™äº›è¾“å…¥çš„æœŸæœ›ç­”æ¡ˆã€‚ä¸­é—´çš„ä¸‰åˆ—æ˜¾ç¤ºäº†æ¨¡æ¿è¡¨è¾¾å¼çš„å€¼ï¼š([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alos)ï¼Œ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alos)ï¼Œä»¥åŠ(how-many ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alos))ï¼Œè¿™æ˜¯è‡ªç„¶çš„é€’å½’ã€‚å¦‚æœä½ é•¿æ—¶é—´åœ°ç›¯ç€è¿™ä¸ªè¡¨æ ¼ï¼Œä½ ä¼šè®¤è¯†åˆ°ç»“æœåˆ—æ€»æ˜¯æ¯”è‡ªç„¶é€’å½’åˆ—çš„å€¼å¤š1ã€‚å› æ­¤ï¼Œä½ å¯ä»¥çŒœæµ‹
- en: ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (how-manyÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))Â 1)
  id: totrans-433
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    ï¼ˆå¦‚ä½•è®¡ç®—ï¼ˆ[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alos)ï¼‰ 1ï¼‰
- en: is the expression that computes the desired result. Since DrRacket is fast at
    checking these kinds of guesses, plug it in and click RUN. If the examples-turned-into-tests
    pass, think through the expression to convince yourself it works for all lists;
    otherwise add more example rows to the table until you have a different idea.
  id: totrans-434
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™æ˜¯è®¡ç®—æ‰€éœ€ç»“æœçš„è¡¨è¾¾å¼ã€‚ç”±äºDrRacketåœ¨æ£€æŸ¥è¿™ç±»çŒœæµ‹æ–¹é¢é€Ÿåº¦å¾ˆå¿«ï¼Œæ‰€ä»¥å°†å…¶æ’å…¥å¹¶ç‚¹å‡»è¿è¡Œã€‚å¦‚æœè¿™äº›ä¾‹å­è½¬å˜ä¸ºæµ‹è¯•é€šè¿‡ï¼Œé‚£ä¹ˆä»”ç»†æ€è€ƒè¿™ä¸ªè¡¨è¾¾å¼ï¼Œä»¥è¯´æœè‡ªå·±å®ƒé€‚ç”¨äºæ‰€æœ‰åˆ—è¡¨ï¼›å¦åˆ™ï¼Œå‘è¡¨ä¸­æ·»åŠ æ›´å¤šç¤ºä¾‹è¡Œï¼Œç›´åˆ°ä½ æœ‰ä¸€ä¸ªä¸åŒçš„æƒ³æ³•ã€‚
- en: The table also points out that some selector expressions in the template are
    possibly irrelevant for the actual definition. Here ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alos)
    is not needed to compute the final answerâ€”<wbr>which is quite a contrast to contains-flatt?,
    which uses both expressions from the template.
  id: totrans-435
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¡¨æ ¼è¿˜æŒ‡å‡ºï¼Œæ¨¡æ¿ä¸­çš„ä¸€äº›é€‰æ‹©è¡¨è¾¾å¼å¯¹äºå®é™…å®šä¹‰å¯èƒ½æ˜¯æ— å…³ç´§è¦çš„ã€‚åœ¨è¿™é‡Œ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alos) å¯¹äºè®¡ç®—æœ€ç»ˆç­”æ¡ˆä¸æ˜¯å¿…éœ€çš„â€”â€”è¿™ä¸contains-flatt?å½¢æˆé²œæ˜å¯¹æ¯”ï¼Œåè€…ä½¿ç”¨äº†æ¨¡æ¿ä¸­çš„ä¸¤ä¸ªè¡¨è¾¾å¼ã€‚
- en: As you work your way through the rest of this book, keep in mind that, in many
    cases, the combination step can be expressed with BSLâ€™s primitives, say, [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29),
    [and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29),
    or [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29).
    In some cases, though, you may have to make a wish, that is, design an auxiliary
    function. Finally, in yet other cases, you may need nested conditions.
  id: totrans-436
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: åœ¨ä½ é˜…è¯»è¿™æœ¬ä¹¦çš„å…¶ä½™éƒ¨åˆ†æ—¶ï¼Œè¯·è®°ä½ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œç»„åˆæ­¥éª¤å¯ä»¥ç”¨BSLçš„åŸå§‹æ“ä½œç¬¦è¡¨ç¤ºï¼Œæ¯”å¦‚ï¼Œ[+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)ï¼Œ[and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)ï¼Œæˆ–è€…[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦è®¸ä¸ªæ„¿ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚æœ€åï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦åµŒå¥—æ¡ä»¶ã€‚
- en: Finally, make sure to turn all examples into tests, that these tests pass, and
    that running them covers all the pieces of the function.
  id: totrans-437
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æœ€åï¼Œç¡®ä¿å°†æ‰€æœ‰ç¤ºä¾‹è½¬æ¢ä¸ºæµ‹è¯•ï¼Œè¿™äº›æµ‹è¯•é€šè¿‡ï¼Œå¹¶ä¸”è¿è¡Œå®ƒä»¬è¦†ç›–äº†å‡½æ•°çš„æ‰€æœ‰éƒ¨åˆ†ã€‚
- en: 'Here are our examples for how-many turned into tests:'
  id: totrans-438
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯å¦‚ä½•å°†how-manyè½¬æ¢ä¸ºæµ‹è¯•çš„ç¤ºä¾‹ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (how-manyÂ ''())Â 0)
    |'
  id: totrans-439
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    ï¼ˆå¦‚ä½•è®¡ç®—ï¼ˆï¼‰ï¼‰ 0ï¼‰|'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (how-manyÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))Â 1)
    |'
  id: totrans-440
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    ï¼ˆå¦‚ä½•è®¡ç®—ï¼ˆ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "a" ''())ï¼‰ 1ï¼‰|'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-441
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (how-manyÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''())))Â 2)
    |'
  id: totrans-442
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆå¦‚ä½•è®¡ç®—ï¼ˆï¼ˆ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "b" ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "a" ''()))) 2ï¼‰|'
- en: Remember, it is best to formulate examples directly as tests, and BSL allows
    this. Doing so also helps if you need to resort to the table-based guessing approach
    of the preceding step.
  id: totrans-443
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '|  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    |'
- en: '| alos |  |'
  id: totrans-444
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  | "a" |  | ''() |  | 0 |  | 1 |'
- en: ''
  id: totrans-445
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    &#124;'
  id: totrans-446
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ''())) |'
- en: '&#124; Â Â alos) &#124;'
  id: totrans-447
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-448
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-449
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |Â Â Â alos) |'
- en: ''
  id: totrans-450
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    &#124;'
  id: totrans-451
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | 2 |  | 3 |'
- en: '&#124; Â Â alos) &#124;'
  id: totrans-452
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    |'
- en: ''
  id: totrans-453
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-454
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| (how-many |'
- en: ''
  id: totrans-455
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (how-many &#124;'
  id: totrans-456
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '&#124; Â Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))
    &#124;'
  id: totrans-457
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ''())) |'
- en: ''
  id: totrans-458
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-459
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    |'
- en: ''
  id: totrans-460
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (how-many &#124;'
  id: totrans-461
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  |'
- en: '&#124; Â Â alos) &#124;'
  id: totrans-462
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-463
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-464
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| (how-many |'
- en: '|'
  id: totrans-465
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos)
    |'
- en: ''
  id: totrans-466
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-467
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾55ï¼šåˆ—å‡ºå‚æ•°ã€ä¸­é—´å€¼å’Œç»“æœ
- en: '&#124; Â Â ''()) &#124;'
  id: totrans-468
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ''()) |'
- en: ''
  id: totrans-469
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | "a" |  | ''() |  | 0 |  | 1 |'
  id: totrans-470
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  | "b" |  |'
- en: '|'
  id: totrans-471
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ''()) |'
- en: ''
  id: totrans-472
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  id: totrans-473
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    |'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-474
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ''()))) |'
- en: '&#124; Â Â Â Â ''())) &#124;'
  id: totrans-475
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    |'
- en: ''
  id: totrans-476
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | "b" |  |'
  id: totrans-477
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    |'
- en: ''
  id: totrans-478
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-479
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è®°ä½ï¼Œæœ€å¥½ç›´æ¥å°†ç¤ºä¾‹ä½œä¸ºæµ‹è¯•æ¥åˆ¶å®šï¼ŒBSL å…è®¸è¿™æ ·åšã€‚è¿™æ ·åšä¹Ÿæœ‰åŠ©äºåœ¨éœ€è¦å›é€€åˆ°å‰ä¸€æ­¥çš„åŸºäºè¡¨çš„çŒœæµ‹æ–¹æ³•æ—¶ã€‚
- en: '&#124; Â Â ''()) &#124;'
  id: totrans-480
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | "x" |'
- en: ''
  id: totrans-481
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | 1 |  | 2 |'
  id: totrans-482
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | 1 |  | 2 |'
- en: '|'
  id: totrans-483
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    |'
- en: ''
  id: totrans-484
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "x"
    &#124;'
  id: totrans-485
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    |'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  id: totrans-486
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "x"
    |'
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-487
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    |'
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  id: totrans-488
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-489
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | "x" |  |'
  id: totrans-490
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| alos |  |'
- en: ''
  id: totrans-491
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  id: totrans-492
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  |  |'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-493
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '&#124; Â Â Â Â ''())) &#124;'
  id: totrans-494
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-495
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | 2 |  | 3 |'
  id: totrans-496
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |  |'
- en: ''
  id: totrans-497
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 55: Tabulating arguments, intermediate values, and results'
  id: totrans-498
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|  |Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    |'
- en: '[FigureÂ 56](#%28counter._%28figure._fig~3adesign5%29%29) summarizes the design
    recipe of this section in a tabular format. The first column names the steps of
    the design recipe, and the second the expected results of each step. In the third
    column, we describe the activities that get you there.You may want to copy [figureÂ 56](#%28counter._%28figure._fig~3adesign5%29%29)
    onto one side of an index card and write down your favorite versions of the questions
    and answers for this design recipe onto the back of it. Then carry it with you
    for future reference. The figure is tailored to the kind of self-referential list
    definitions we use in this chapter. As always, practice helps you master the process,
    so we strongly recommend that you tackle the following exercises, which ask you
    to apply the recipe to several kinds of examples.'
  id: totrans-499
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾ 56](#%28counter._%28figure._fig~3adesign5%29%29) ä»¥è¡¨æ ¼å½¢å¼æ€»ç»“äº†æœ¬èŠ‚çš„è®¾è®¡é…æ–¹ã€‚ç¬¬ä¸€åˆ—å‘½åäº†è®¾è®¡é…æ–¹çš„æ­¥éª¤ï¼Œç¬¬äºŒåˆ—æ˜¯æ¯ä¸€æ­¥çš„é¢„æœŸç»“æœã€‚åœ¨ç¬¬ä¸‰åˆ—ä¸­ï¼Œæˆ‘ä»¬æè¿°äº†å¸®åŠ©ä½ è¾¾åˆ°é‚£é‡Œçš„æ´»åŠ¨ã€‚ä½ å¯èƒ½æƒ³å°†
    [å›¾ 56](#%28counter._%28figure._fig~3adesign5%29%29) å¤å°åœ¨ç´¢å¼•å¡çš„ä¸€ä¾§ï¼Œå¹¶å°†ä½ æœ€å–œæ¬¢çš„å…³äºè¿™ä¸ªè®¾è®¡é…æ–¹çš„é—®é¢˜å’Œç­”æ¡ˆå†™åœ¨èƒŒé¢ã€‚ç„¶åå¸¦ç€å®ƒä½œä¸ºæœªæ¥çš„å‚è€ƒã€‚è¯¥å›¾æ˜¯æ ¹æ®æˆ‘ä»¬åœ¨æœ¬ç« ä¸­ä½¿ç”¨çš„è‡ªå¼•ç”¨åˆ—è¡¨å®šä¹‰å®šåˆ¶çš„ã€‚åƒå¾€å¸¸ä¸€æ ·ï¼Œç»ƒä¹ æœ‰åŠ©äºä½ æŒæ¡è¿‡ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ è§£å†³ä»¥ä¸‹ç»ƒä¹ ï¼Œè¿™äº›ç»ƒä¹ è¦æ±‚ä½ å°†é…æ–¹åº”ç”¨äºå‡ ç§ä¸åŒçš„ä¾‹å­ã€‚'
- en: '| steps |  | outcome |  | activity |'
  id: totrans-500
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ­¥éª¤ |  | ç»“æœ |  | æ´»åŠ¨ |'
- en: '| problem analysis |  | data definition |  | Develop a data representation
    for the information; create examples for specific items of information and interpret
    data as information; identify self-references. |'
  id: totrans-501
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| é—®é¢˜åˆ†æ |  | æ•°æ®å®šä¹‰ |  | å¼€å‘ä¿¡æ¯çš„æ•°æ®è¡¨ç¤ºï¼›ä¸ºç‰¹å®šä¿¡æ¯é¡¹åˆ›å»ºç¤ºä¾‹å¹¶è§£é‡Šæ•°æ®ä½œä¸ºä¿¡æ¯ï¼›è¯†åˆ«è‡ªå¼•ç”¨ã€‚ |'
- en: '| header |  | signature; purpose; dummy definition |  | Write down a signature
    using defined names; formulate a concise purpose statement; create a dummy function
    that produces a constant value from the specified range. |'
  id: totrans-502
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| å¤´éƒ¨ |  | ç­¾åï¼›ç›®çš„ï¼›å ä½ç¬¦å®šä¹‰ |  | ä½¿ç”¨å®šä¹‰çš„åç§°å†™ä¸‹ç­¾åï¼›åˆ¶å®šä¸€ä¸ªç®€æ´çš„ç›®çš„é™ˆè¿°ï¼›åˆ›å»ºä¸€ä¸ªäº§ç”ŸæŒ‡å®šèŒƒå›´å†…å¸¸é‡å€¼çš„å ä½ç¬¦å‡½æ•°ã€‚ |'
- en: '| examples |  | examples and tests |  | Work through several examples, at least
    one per clause in the data definition. |'
  id: totrans-503
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ç¤ºä¾‹ |  | ç¤ºä¾‹å’Œæµ‹è¯• |  | è§£å†³å‡ ä¸ªç¤ºä¾‹ï¼Œè‡³å°‘æ¯ä¸ªæ•°æ®å®šä¹‰ä¸­ä¸€ä¸ªå­å¥ã€‚ |'
- en: '| template |  | function template |  | Translate the data definition into a
    template: one [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause per data clause; selectors where the condition identifies a structure;
    one natural recursion per self-reference. |'
  id: totrans-504
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ¨¡æ¿ |  | å‡½æ•°æ¨¡æ¿ |  | å°†æ•°æ®å®šä¹‰ç¿»è¯‘æˆæ¨¡æ¿ï¼šæ¯ä¸ªæ•°æ®å­å¥ä¸€ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥ï¼›é€‰æ‹©å™¨ï¼Œå…¶ä¸­æ¡ä»¶æ ‡è¯†ä¸€ä¸ªç»“æ„ï¼›æ¯ä¸ªè‡ªå¼•ç”¨ä¸€ä¸ªè‡ªç„¶é€’å½’ã€‚ |'
- en: '| definition |  | full-fledged definition |  | Find a function that combines
    the values of the expressions in the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses into the expected answer. |'
  id: totrans-505
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| å®šä¹‰ |  | å®Œæ•´å®šä¹‰ |  | æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°ï¼Œå°† [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥ä¸­çš„è¡¨è¾¾å¼çš„å€¼ç»„åˆæˆé¢„æœŸçš„ç­”æ¡ˆã€‚ |'
- en: '| test |  | validated tests |  | Turn them into [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    tests and run them. |'
  id: totrans-506
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| æµ‹è¯• |  | éªŒè¯æµ‹è¯• |  | å°†å®ƒä»¬è½¬æ¢ä¸º [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    æµ‹è¯•å¹¶è¿è¡Œã€‚ |'
- en: ''
  id: totrans-507
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 56: Designing a function for self-referential data'
  id: totrans-508
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 56ï¼šè®¾è®¡è‡ªå¼•ç”¨æ•°æ®å‡½æ•°
- en: '9.1Finger Exercises: Lists[ğŸ”—](#(part._sec~3afinger-lists) "Link to here")'
  id: totrans-509
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 9.1 æŒ‡å°–ç»ƒä¹ ï¼šåˆ—è¡¨[ğŸ”—](#(part._sec~3afinger-lists) "é“¾æ¥åˆ°æ­¤å¤„")
- en: ExerciseÂ 137\. Compare the template for contains-flatt? with the one for how-many.
    Ignoring the function name, they are the same. Explain the similarity.
  id: totrans-510
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  137ã€‚æ¯”è¾ƒ contains-flatt? çš„æ¨¡æ¿ä¸ how-many çš„æ¨¡æ¿ã€‚å¿½ç•¥å‡½æ•°åï¼Œå®ƒä»¬æ˜¯ç›¸åŒçš„ã€‚è§£é‡Šå®ƒä»¬çš„ç›¸ä¼¼ä¹‹å¤„ã€‚
- en: 'ExerciseÂ 138\. Here is a data definition for representing sequences of amounts
    of money:'
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  138ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¡¨ç¤ºé‡‘é¢åºåˆ—çš„æ•°æ®å®šä¹‰ï¼š
- en: '| ;Â A List-of-amounts is one of: |'
  id: totrans-512
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A List-of-amounts is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-513
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [PositiveNumber](part_one.html#%28tech._positivenumber%29)  [List-of-amounts](#%28tech._list._of._amount%29))
    |'
  id: totrans-514
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [PositiveNumber](part_one.html#%28tech._positivenumber%29)  [List-of-amounts](#%28tech._list._of._amount%29))
    |'
- en: Create some examples to make sure you understand the data definition. Also add
    an arrow for the self-reference.
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€äº›ç¤ºä¾‹ä»¥ç¡®ä¿ä½ ç†è§£æ•°æ®å®šä¹‰ã€‚åŒæ—¶æ·»åŠ ä¸€ä¸ªç®­å¤´è¡¨ç¤ºè‡ªå¼•ç”¨ã€‚
- en: Design the sum function, which consumes a [List-of-amounts](#%28tech._list._of._amount%29)
    and computes the sum of the amounts. Use DrRacketâ€™s stepper to see how (sum  l)
    works for a short list l in [List-of-amounts](#%28tech._list._of._amount%29).
  id: totrans-516
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªæ±‚å’Œå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª [é‡‘é¢åˆ—è¡¨](#%28tech._list._of._amount%29) å¹¶è®¡ç®—é‡‘é¢çš„æ€»å’Œã€‚ä½¿ç”¨ DrRacket çš„æ­¥è¿›å™¨æ¥æŸ¥çœ‹
    (sum l) å¯¹äº [é‡‘é¢åˆ—è¡¨](#%28tech._list._of._amount%29) ä¸­çš„çŸ­åˆ—è¡¨ l çš„å¤„ç†æ–¹å¼ã€‚
- en: 'ExerciseÂ 139\. Now take a look at this data definition:'
  id: totrans-517
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  139ã€‚ç°åœ¨çœ‹çœ‹è¿™ä¸ªæ•°æ®å®šä¹‰ï¼š
- en: '| ;Â A List-of-numbers is one of: |'
  id: totrans-518
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A List-of-numbers is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-519
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  [List-of-numbers](#%28tech._list._of._number%29))
    |'
  id: totrans-520
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    [Number](part_one.html#%28tech._number%29) [List-of-numbers](#%28tech._list._of._number%29))
    |'
- en: Some elements of this class of data are appropriate inputs for sum from [exerciseÂ 138](#%28counter._%28exercise._list-sum1%29%29)
    and some arenâ€™t.
  id: totrans-521
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæ•°æ®ç±»çš„ä¸€äº›å…ƒç´ é€‚åˆä½œä¸º [ç»ƒä¹  138](#%28counter._%28exercise._list-sum1%29%29) ä¸­çš„ sum å‡½æ•°çš„è¾“å…¥ï¼Œè€Œå¦ä¸€äº›åˆ™ä¸é€‚åˆã€‚
- en: 'Design the function pos?, which consumes a [List-of-numbers](#%28tech._list._of._number%29)
    and determines whether all numbers are positive numbers. In other words, if (pos?  l)
    yields #true, then l is an element of [List-of-amounts](#%28tech._list._of._amount%29).
    Use DrRacketâ€™s stepper to understand how pos? works for ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  5  ''())
    and ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  -1  ''()).'
  id: totrans-522
  prefs: []
  type: TYPE_NORMAL
  zh: 'è®¾è®¡ä¸€ä¸ªåä¸º pos? çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª [æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29) å¹¶ç¡®å®šæ‰€æœ‰æ•°å­—æ˜¯å¦ä¸ºæ­£æ•°ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœ
    (pos? l) è¿”å› #trueï¼Œåˆ™ l æ˜¯ [é‡‘é¢åˆ—è¡¨](#%28tech._list._of._amount%29) çš„ä¸€ä¸ªå…ƒç´ ã€‚ä½¿ç”¨ DrRacket
    çš„æ­¥è¿›å™¨æ¥ç†è§£ pos? å¯¹äº ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    5 ''()) å’Œ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    -1 ''()) çš„å¤„ç†æ–¹å¼ã€‚'
- en: Also design checked-sum. The function consumes a [List-of-numbers](#%28tech._list._of._number%29).
    It produces their sum if the input also belongs to [List-of-amounts](#%28tech._list._of._amount%29);
    otherwise it signals an error. Hint Recall to use check-error.
  id: totrans-523
  prefs: []
  type: TYPE_NORMAL
  zh: è¿˜è¦è®¾è®¡ä¸€ä¸ª checked-sum å‡½æ•°ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ª [æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29)ï¼Œå¦‚æœè¾“å…¥ä¹Ÿå±äº
    [é‡‘é¢åˆ—è¡¨](#%28tech._list._of._amount%29)ï¼Œåˆ™äº§ç”Ÿå®ƒä»¬çš„æ€»å’Œï¼›å¦åˆ™å‘å‡ºé”™è¯¯ä¿¡å·ã€‚æç¤ºï¼šå›æƒ³ä¸€ä¸‹ä½¿ç”¨ check-errorã€‚
- en: What does sum compute for an element of [List-of-numbers](#%28tech._list._of._number%29)?
  id: totrans-524
  prefs: []
  type: TYPE_NORMAL
  zh: sum å‡½æ•°å¯¹äºä¸€ä¸ª [æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29) çš„å…ƒç´ è®¡ç®—ä»€ä¹ˆï¼Ÿ
- en: 'ExerciseÂ 140\. Design the function all-true, which consumes a list of [Boolean](part_one.html#%28tech._boolean%29)
    values and determines whether all of them are #true. In other words, if there
    is any #false on the list, the function produces #false.'
  id: totrans-525
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹  140ã€‚è®¾è®¡ä¸€ä¸ªåä¸º all-true çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¸ƒå°”å€¼åˆ—è¡¨å¹¶ç¡®å®šæ‰€æœ‰è¿™äº›å€¼æ˜¯å¦éƒ½æ˜¯ #trueã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœåˆ—è¡¨ä¸­å­˜åœ¨ä»»ä½• #falseï¼Œåˆ™å‡½æ•°è¿”å›
    #falseã€‚'
- en: 'Now design one-true, a function that consumes a list of Boolean values and
    determines whether at least one item on the list is #true.'
  id: totrans-526
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç°åœ¨è®¾è®¡ä¸€ä¸ª one-true å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¸ƒå°”å€¼åˆ—è¡¨å¹¶ç¡®å®šåˆ—è¡¨ä¸­æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æ˜¯ #trueã€‚'
- en: 'Employ the table-based approach to coding. It may help with the base case.
    Use DrRacketâ€™s stepper to see how these functions process the lists ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #true  ''()),
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #false  ''()),
    and ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #true  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #false  ''())).'
  id: totrans-527
  prefs: []
  type: TYPE_NORMAL
  zh: 'é‡‡ç”¨åŸºäºè¡¨æ ¼çš„ç¼–ç æ–¹æ³•ã€‚è¿™å¯èƒ½æœ‰åŠ©äºå¤„ç†åŸºæœ¬æƒ…å†µã€‚ä½¿ç”¨ DrRacket çš„æ­¥è¿›å™¨æ¥æŸ¥çœ‹è¿™äº›å‡½æ•°å¦‚ä½•å¤„ç†åˆ—è¡¨ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    #true ''()), ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    #false ''()), å’Œ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    #true ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    #false ''()))ã€‚'
- en: 'ExerciseÂ 141\. If you are asked to design the function cat, which consumes
    a list of strings and appends them all into one long string, you are guaranteed
    to end up with this partial definition:'
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  141ã€‚å¦‚æœä½ è¢«è¦æ±‚è®¾è®¡ä¸€ä¸ªåä¸º cat çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨å¹¶å°†å®ƒä»¬å…¨éƒ¨è¿æ¥æˆä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œä½ å°†å¾—åˆ°ä»¥ä¸‹éƒ¨åˆ†å®šä¹‰ï¼š
- en: '| ;Â [List-of-string](#%28tech._list._of._string%29) -> [String](part_one.html#%28tech._string%29)
    |'
  id: totrans-529
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   ; [å­—ç¬¦ä¸²åˆ—è¡¨](#%28tech._list._of._string%29) -> [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)
    |'
- en: '| ;Â concatenates all strings in l into one long string |'
  id: totrans-530
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; å°†åˆ—è¡¨ l ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²è¿æ¥æˆä¸€ä¸ªé•¿å­—ç¬¦ä¸² |'
- en: '| Â  |'
  id: totrans-531
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (catÂ ''())Â "")
    |'
  id: totrans-532
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (catÂ ''())Â "")
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (catÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ''())))Â "ab")
    |'
  id: totrans-533
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (catÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ''())))Â "ab")
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-534
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (catÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "ab"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "cd"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "ef"Â ''()))))
    |'
  id: totrans-535
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |   (catÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "ab"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "cd"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "ef"Â ''()))))
    |'
- en: '| Â Â "abcdef") |'
  id: totrans-536
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   "abcdef" |'
- en: '| Â  |'
  id: totrans-537
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (catÂ l)
    |'
  id: totrans-538
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (catÂ l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-539
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ""]
    |'
  id: totrans-540
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |   [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ""]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (catÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-541
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (catÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: '| l |  | ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)
    |  | ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)
    |  | (catÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))
    |  | (catÂ l) |'
  id: totrans-542
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| l |  | ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)
    |  | ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)
    |  | (catÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))
    |  | (catÂ l) |'
- en: '|'
  id: totrans-543
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-544
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-545
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
- en: '&#124; Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  id: totrans-546
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
- en: '&#124; Â Â ''())) &#124;'
  id: totrans-547
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ''()))
    &#124;'
- en: ''
  id: totrans-548
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ??? |  | ??? |  | ??? |  | "ab" |'
  id: totrans-549
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | ??? |  | ??? |  | ??? |  | "ab" |'
- en: '|'
  id: totrans-550
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-551
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    &#124;'
  id: totrans-552
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    &#124;'
- en: '&#124; Â "ab" &#124;'
  id: totrans-553
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| Â "ab" &#124;'
- en: '&#124; Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "cd"
    &#124;'
  id: totrans-554
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "cd"
    &#124;'
- en: '&#124; Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "ef"
    &#124;'
  id: totrans-555
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "ef"
    &#124;'
- en: '&#124; Â Â Â Â Â ''()))) &#124;'
  id: totrans-556
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ''()))
    &#124;'
- en: ''
  id: totrans-557
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ??? |  | ??? |  | ??? |  | "abcdef" |'
  id: totrans-558
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | ??? |  | ??? |  | ??? |  | "abcdef" |'
- en: ''
  id: totrans-559
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 57: A table for cat'
  id: totrans-560
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 57ï¼šçŒ«çš„è¡¨æ ¼
- en: Fill in the table in [figureÂ 57](#%28counter._%28figure._fig~3aex~3atable%29%29).
    Guess a function that can create the desired result from the values computed by
    the sub-expressions.
  id: totrans-561
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ [å›¾ 57](#%28counter._%28figure._fig~3aex~3atable%29%29) ä¸­çš„è¡¨æ ¼ä¸­å¡«å†™ã€‚çŒœæµ‹ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä»å­è¡¨è¾¾å¼çš„è®¡ç®—å€¼ä¸­åˆ›å»ºæ‰€éœ€çš„ç»“æœã€‚
- en: Use DrRacketâ€™s stepper to evaluate (cat  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  '())).
  id: totrans-562
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ DrRacket çš„æ­¥è¿›å™¨è¯„ä¼° (cat  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  '())).
- en: 'ExerciseÂ 142\. Design the ill-sized? function, which consumes a list of images
    loi and a positive number n. It produces the first image on loi that is not an
    n by n square; if it cannot find such an image, it produces #false.'
  id: totrans-563
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹  142\. è®¾è®¡ ill-sized? å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå›¾åƒåˆ—è¡¨ loi å’Œä¸€ä¸ªæ­£æ•° nã€‚å®ƒäº§ç”Ÿ loi ä¸­ç¬¬ä¸€ä¸ªä¸æ˜¯ nÃ—n æ­£æ–¹å½¢çš„å›¾åƒï¼›å¦‚æœæ‰¾ä¸åˆ°è¿™æ ·çš„å›¾åƒï¼Œåˆ™äº§ç”Ÿ
    #falseã€‚'
- en: Hint Use
  id: totrans-564
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤º ä½¿ç”¨
- en: '| ;Â ImageOrFalse is one of: |'
  id: totrans-565
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å›¾åƒæˆ–å¸ƒå°”å€¼ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“ Image |'
  id: totrans-566
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“ å›¾åƒ |'
- en: '| ;Â â€“ #false |'
  id: totrans-567
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“ #false |'
- en: for the result part of the signature.
  id: totrans-568
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºç­¾åç»“æœéƒ¨åˆ†ã€‚
- en: 9.2Non-empty Lists[ğŸ”—](#(part._sec~3alists~3ane) "Link to here")
  id: totrans-569
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 9.2 éç©ºåˆ—è¡¨[ğŸ”—](#(part._sec~3alists~3ane) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Now you know enough to use [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and to create data definitions for lists. If you solved (some of) the exercises
    at the end of the preceding section, you can deal with lists of various flavors
    of numbers, lists of Boolean values, lists of images, and so on. In this section
    we continue to explore what lists are and how to process them.
  id: totrans-570
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä½ å·²ç»è¶³å¤Ÿäº†è§£å¦‚ä½•ä½¿ç”¨ [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    å¹¶ä¸ºåˆ—è¡¨åˆ›å»ºæ•°æ®å®šä¹‰ã€‚å¦‚æœä½ è§£å†³äº†å‰ä¸€èŠ‚æœ«å°¾çš„ï¼ˆä¸€äº›ï¼‰ç»ƒä¹ ï¼Œä½ å¯ä»¥å¤„ç†å„ç§ç±»å‹çš„æ•°å­—åˆ—è¡¨ã€å¸ƒå°”å€¼åˆ—è¡¨ã€å›¾åƒåˆ—è¡¨ç­‰ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­æ¢è®¨åˆ—è¡¨æ˜¯ä»€ä¹ˆä»¥åŠå¦‚ä½•å¤„ç†å®ƒä»¬ã€‚
- en: 'Letâ€™s start with the simple-looking problem of computing the average of a list
    of temperatures. To simplify, we provide the data definitions:'
  id: totrans-571
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»çœ‹èµ·æ¥ç®€å•çš„è®¡ç®—æ¸©åº¦åˆ—è¡¨å¹³å‡å€¼çš„é—®é¢˜å¼€å§‹ã€‚ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬æä¾›äº†æ•°æ®å®šä¹‰ï¼š
- en: '| ;Â A List-of-temperatures is one of: |'
  id: totrans-572
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ¸©åº¦åˆ—è¡¨ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“  ''() |'
  id: totrans-573
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  [List-of-temperatures](#%28tech._list._of._temperature%29))
    |'
  id: totrans-574
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    [CTemperature](#%28tech._ctemperature%29) [List-of-temperatures](#%28tech._list._of._temperature%29))
    |'
- en: '| Â  |'
  id: totrans-575
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ABSOLUTE0Â -272)
    |'
  id: totrans-576
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    ABSOLUTE0 -272) |'
- en: '| ;Â A CTemperature is a [Number](part_one.html#%28tech._number%29) greater
    than ABSOLUTE0. |'
  id: totrans-577
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â ä¸€ä¸ª CTemperature æ˜¯ä¸€ä¸ªå¤§äº ABSOLUTE0 çš„ [Number](part_one.html#%28tech._number%29)ã€‚
    |'
- en: 'For our intentions, you should think of temperatures as plain numbers, but
    the second data definition reminds you that in reality not all numbers are temperatures
    and you should keep this in mind.The header material is straightforward:'
  id: totrans-578
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºæˆ‘ä»¬çš„ç›®çš„ï¼Œä½ åº”è¯¥å°†æ¸©åº¦è§†ä¸ºæ™®é€šçš„æ•°å­—ï¼Œä½†ç¬¬äºŒä¸ªæ•°æ®å®šä¹‰æé†’ä½ ï¼Œåœ¨ç°å®ä¸­å¹¶éæ‰€æœ‰æ•°å­—éƒ½æ˜¯æ¸©åº¦ï¼Œä½ åº”è¯¥è®°ä½è¿™ä¸€ç‚¹ã€‚å¤´éƒ¨ææ–™å¾ˆç®€å•ï¼š
- en: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-579
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â computes the average temperature |'
  id: totrans-580
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â è®¡ç®—å¹³å‡æ¸©åº¦ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (averageÂ alot)Â 0)
    |'
  id: totrans-581
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (average alot) 0) |'
- en: 'Making up examples for this problem is also easy, and so we just formulate
    one test:'
  id: totrans-582
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºè¿™ä¸ªé—®é¢˜æ„é€ ç¤ºä¾‹ä¹Ÿå¾ˆç®€å•ï¼Œæ‰€ä»¥æˆ‘ä»¬åªåˆ¶å®šäº†ä¸€ä¸ªæµ‹è¯•ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-583
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (averageÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''()))))Â 2)
    |'
  id: totrans-584
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (average ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    1 ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    2 ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    3 ''()))) 2) |'
- en: 'The expected result is of course the sum of the temperatures divided by the
    number of temperatures.A momentâ€™s thought tells you that the template for average
    should be similar to the ones we have seen so far:'
  id: totrans-585
  prefs: []
  type: TYPE_NORMAL
  zh: é¢„æœŸç»“æœå½“ç„¶æ˜¯æ¸©åº¦æ€»å’Œé™¤ä»¥æ¸©åº¦æ•°é‡ã€‚ç¨åŠ æ€è€ƒå°±ä¼šçŸ¥é“ï¼Œå¹³å‡å€¼çš„æ¨¡æ¿åº”è¯¥ä¸æˆ‘ä»¬è¿„ä»Šä¸ºæ­¢çœ‹åˆ°çš„ç±»ä¼¼ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (averageÂ alot)
    |'
  id: totrans-586
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (average alot) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-587
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alot)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-588
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    alot) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alot)
    |'
  id: totrans-589
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â ([([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    alot) |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alot)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-590
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alot) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (averageÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alot))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-591
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    (average ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alot)) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
- en: The two [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses mirror the two clauses of the data definition; the questions distinguish
    empty lists from non-empty lists; and the natural recursion is needed because
    of the self-reference in the data definition.
  id: totrans-592
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¤ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    æ¡ä»¶åæ˜ äº†æ•°æ®å®šä¹‰çš„ä¸¤ä¸ªæ¡ä»¶ï¼›é—®é¢˜åŒºåˆ†äº†ç©ºåˆ—è¡¨å’Œéç©ºåˆ—è¡¨ï¼›å¹¶ä¸”ç”±äºæ•°æ®å®šä¹‰ä¸­çš„è‡ªå¼•ç”¨ï¼Œéœ€è¦è‡ªç„¶é€’å½’ã€‚
- en: It is way too difficult, however, to turn this template into a function definition.
    The first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause needs a number that represents the average of an empty collection of temperatures,
    but there is no such number. Similarly, the second clause demands a function that
    combines a temperature and an average for the remaining temperatures into a new
    average. Although possible, computing the average in this way is highly unnatural.
  id: totrans-593
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œå°†æ­¤æ¨¡æ¿è½¬æ¢ä¸ºå‡½æ•°å®šä¹‰éå¸¸å›°éš¾ã€‚ç¬¬ä¸€ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    æ¡ä»¶éœ€è¦è¡¨ç¤ºç©ºæ¸©åº¦é›†åˆå¹³å‡å€¼çš„æ•°å­—ï¼Œä½†ä¸å­˜åœ¨è¿™æ ·çš„æ•°å­—ã€‚åŒæ ·ï¼Œç¬¬äºŒä¸ªæ¡ä»¶éœ€è¦å°†æ¸©åº¦å’Œå‰©ä½™æ¸©åº¦çš„å¹³å‡å€¼ç»„åˆæˆæ–°çš„å¹³å‡å€¼çš„å‡½æ•°ã€‚å°½ç®¡å¯èƒ½ï¼Œä½†ä»¥è¿™ç§æ–¹å¼è®¡ç®—å¹³å‡å€¼éå¸¸ä¸è‡ªç„¶ã€‚
- en: 'When we compute the average of temperatures, we divide their sum by their number.
    We said so when we formulated our trivial little example. This sentence suggests
    that average is a function of three tasks: summing, counting, and dividing. Our
    guideline from [Fixed-Size Data](part_one.html) tells us to write one function
    per task, and if we do so the design of average is obvious:'
  id: totrans-594
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æˆ‘ä»¬è®¡ç®—æ¸©åº¦çš„å¹³å‡å€¼æ—¶ï¼Œæˆ‘ä»¬å°†å®ƒä»¬çš„æ€»å’Œé™¤ä»¥å®ƒä»¬çš„æ•°é‡ã€‚æˆ‘ä»¬åœ¨æå‡ºæˆ‘ä»¬çš„ç®€å•ç¤ºä¾‹æ—¶å·²ç»è¿™æ ·è¯´è¿‡ã€‚è¿™å¥è¯è¡¨æ˜å¹³å‡æ˜¯ä¸€ä¸ªç”±ä¸‰ä¸ªä»»åŠ¡ç»„æˆçš„å‡½æ•°ï¼šæ±‚å’Œã€è®¡æ•°å’Œé™¤æ³•ã€‚æˆ‘ä»¬ä»
    [å›ºå®šå¤§å°æ•°æ®](part_one.html) çš„æŒ‡å—ä¸­å¾—çŸ¥ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºæ¯ä¸ªä»»åŠ¡ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬è¿™æ ·åšï¼Œå¹³å‡çš„è®¾è®¡å°±æ˜¾è€Œæ˜“è§äº†ï¼š
- en: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-595
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [æ¸©åº¦åˆ—è¡¨](#%28tech._list._of._temperature%29) -> [æ•°å­—](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â computes the average temperature |'
  id: totrans-596
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; è®¡ç®—å¹³å‡æ¸©åº¦ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (averageÂ alot)
    |'
  id: totrans-597
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (average alot) |'
- en: '| Â Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â (sumÂ alot)Â (how-manyÂ alot)))
    |'
  id: totrans-598
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)
    (sum alot) (how-many alot))) |'
- en: '| Â  |'
  id: totrans-599
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-600
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [æ¸©åº¦åˆ—è¡¨](#%28tech._list._of._temperature%29) -> [æ•°å­—](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â adds up the temperatures on the given list |'
  id: totrans-601
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; å°†ç»™å®šåˆ—è¡¨ä¸­çš„æ¸©åº¦ç›¸åŠ  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ alot)Â 0)
    |'
  id: totrans-602
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (sum alot) 0) |'
- en: '| Â  |'
  id: totrans-603
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-604
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [æ¸©åº¦åˆ—è¡¨](#%28tech._list._of._temperature%29) -> [æ•°å­—](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â counts the temperatures on the given list |'
  id: totrans-605
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â counts the temperatures on the given list |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alot)Â 0)
    |'
  id: totrans-606
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alot)Â 0)
    |'
- en: 'The last two function definitions are wishes, of course, for which we need
    to design complete definitions. Doing so is easy because how-many from above works
    for [List-of-strings](#%28tech._list._of._string%29) and [List-of-temperatures](#%28tech._list._of._temperature%29)
    (why?) and because the design of sum follows the same old routine:'
  id: totrans-607
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œæœ€åä¸¤ä¸ªå‡½æ•°å®šä¹‰æ˜¯æ„¿æœ›ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå®ƒä»¬è®¾è®¡å®Œæ•´çš„å®šä¹‰ã€‚è¿™æ ·åšå¾ˆå®¹æ˜“ï¼Œå› ä¸ºä¸Šé¢çš„ how-many å¯¹ [List-of-strings](#%28tech._list._of._string%29)
    å’Œ [List-of-temperatures](#%28tech._list._of._temperature%29) éƒ½é€‚ç”¨ï¼ˆä¸ºä»€ä¹ˆï¼Ÿï¼‰å¹¶ä¸”å› ä¸º sum
    çš„è®¾è®¡éµå¾ªç›¸åŒçš„æ—§ç¨‹åºï¼š
- en: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-608
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â adds up the temperatures on the given list |'
  id: totrans-609
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â adds up the temperatures on the given list |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ alot)
    |'
  id: totrans-610
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ alot)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-611
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alot)Â 0]
    |'
  id: totrans-612
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alot)Â 0]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alot)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alot)))]))
    |'
  id: totrans-613
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alot)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alot)))]))
    |'
- en: Stop! Use the example for average to create one for sum and ensure that the
    test runs properly. Then run the tests for average.
  id: totrans-614
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä½¿ç”¨å¹³å‡å€¼çš„ç¤ºä¾‹æ¥åˆ›å»ºä¸€ä¸ªæ±‚å’Œçš„ç¤ºä¾‹ï¼Œå¹¶ç¡®ä¿æµ‹è¯•è¿è¡Œæ­£å¸¸ã€‚ç„¶åè¿è¡Œå¹³å‡å€¼çš„æµ‹è¯•ã€‚
- en: When you read this definition of average now, it is obviously correct simply
    because it directly corresponds to what everyone learns about averaging in school.
    Still, programs run not just for us but for others. In particular, others should
    be able to read the signature and use the function and expect an informative answer.
    But, our definition of average does not work for empty lists of temperatures.
  id: totrans-615
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä½ ç°åœ¨é˜…è¯»å¹³å‡å€¼çš„è¿™ä¸ªå®šä¹‰æ—¶ï¼Œå®ƒæ˜¾ç„¶æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸ºå®ƒç›´æ¥å¯¹åº”äºæ¯ä¸ªäººåœ¨å­¦æ ¡å­¦åˆ°çš„å…³äºå¹³å‡çš„çŸ¥è¯†ã€‚ç„¶è€Œï¼Œç¨‹åºä¸ä»…ä¸ºæˆ‘ä»¬è¿è¡Œï¼Œä¹Ÿä¸ºå…¶ä»–äººè¿è¡Œã€‚ç‰¹åˆ«æ˜¯ï¼Œå…¶ä»–äººåº”è¯¥èƒ½å¤Ÿé˜…è¯»ç­¾åå¹¶ä½¿ç”¨è¯¥å‡½æ•°ï¼Œå¹¶æœŸæœ›å¾—åˆ°ä¸€ä¸ªæœ‰ä¿¡æ¯çš„ç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„å¹³å‡å€¼å®šä¹‰ä¸é€‚ç”¨äºæ¸©åº¦çš„ç©ºåˆ—è¡¨ã€‚
- en: ExerciseÂ 143\. Determine how average behaves in DrRacket when applied to the
    empty list. Then design checked-average, a function that produces an informative
    error message when it is applied to '().
  id: totrans-616
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  143ã€‚ç¡®å®šåœ¨ DrRacket ä¸­åº”ç”¨ç©ºåˆ—è¡¨æ—¶å¹³å‡å€¼çš„è¡Œä¸ºã€‚ç„¶åè®¾è®¡ checked-average å‡½æ•°ï¼Œå½“å®ƒåº”ç”¨äº '() æ—¶äº§ç”Ÿä¸€ä¸ªæœ‰ä¿¡æ¯çš„é”™è¯¯æ¶ˆæ¯ã€‚
- en: In mathematics, we would say [exerciseÂ 143](#%28counter._%28exercise._average-0%29%29)
    shows that average is a partial function because it raises an error for '().
  id: totrans-617
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åœ¨æ•°å­¦ä¸­ï¼Œæˆ‘ä»¬ä¼šè¯´ç»ƒä¹  143 æ˜¾ç¤ºå¹³å‡å€¼æ˜¯ä¸€ä¸ªéƒ¨åˆ†å‡½æ•°ï¼Œå› ä¸ºå®ƒåœ¨åº”ç”¨äº '() æ—¶å¼•å‘é”™è¯¯ã€‚
- en: 'An alternative solution is to inform future readers through the signature that
    average doesnâ€™t work for empty lists. For that, we need a data representation
    for lists that excludes ''(), something like this:'
  id: totrans-618
  prefs: []
  type: TYPE_NORMAL
  zh: å¦ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡ç­¾åé€šçŸ¥æœªæ¥çš„è¯»è€…ï¼Œå¹³å‡å€¼ä¸é€‚ç”¨äºç©ºåˆ—è¡¨ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸åŒ…å« '() çš„åˆ—è¡¨æ•°æ®è¡¨ç¤ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '| ;Â An NEList-of-temperatures is one of: |'
  id: totrans-619
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An NEList-of-temperatures is one of: |'
- en: '| ;Â â€“ ??? |'
  id: totrans-620
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“ ??? |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  [NEList-of-temperatures](#%28tech._nelist._of._temperature%29))
    |'
  id: totrans-621
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  [NEList-of-temperatures](#%28tech._nelist._of._temperature%29))
    |'
- en: 'The question is with what we should replace â€œ???â€ so that the ''() list is
    excluded but all other lists of temperatures are still constructable. One hint
    is that while the empty list is the shortest list, any list of one temperature
    is the next shortest list. In turn, this suggests that the first clause should
    describe all possible lists of one temperature:'
  id: totrans-622
  prefs: []
  type: TYPE_NORMAL
  zh: é—®é¢˜æ˜¯æˆ‘ä»¬åº”è¯¥ç”¨ä»€ä¹ˆæ¥æ›¿æ¢â€œ??ï¼Ÿâ€ä»¥ä¾¿æ’é™¤ç©ºåˆ—è¡¨ï¼Œä½†ä»ç„¶å¯ä»¥æ„é€ æ‰€æœ‰å…¶ä»–æ¸©åº¦åˆ—è¡¨ã€‚ä¸€ä¸ªæç¤ºæ˜¯ï¼Œè™½ç„¶ç©ºåˆ—è¡¨æ˜¯æœ€çŸ­çš„åˆ—è¡¨ï¼Œä½†ä»»ä½•åªæœ‰ä¸€ä¸ªæ¸©åº¦çš„åˆ—è¡¨æ˜¯ä¸‹ä¸€ä¸ªæœ€çŸ­çš„åˆ—è¡¨ã€‚åè¿‡æ¥ï¼Œè¿™è¡¨æ˜ç¬¬ä¸€ä¸ªå­å¥åº”è¯¥æè¿°æ‰€æœ‰å¯èƒ½çš„ä¸€ä¸ªæ¸©åº¦çš„åˆ—è¡¨ï¼š
- en: '| ;Â An NEList-of-temperatures is one of: |'
  id: totrans-623
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An NEList-of-temperatures is one of: |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  ''())
    |'
  id: totrans-624
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  ''())
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  [NEList-of-temperatures](#%28tech._nelist._of._temperature%29))
    |'
  id: totrans-625
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  [NEList-of-temperatures](#%28tech._nelist._of._temperature%29))
    |'
- en: '| ;Â interpretation non-empty lists of Celsius temperatures |'
  id: totrans-626
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation non-empty lists of Celsius temperatures |'
- en: 'While this definition differs from the preceding list definitions, it shares
    the critical elements: a self-reference and a clause that does not use a self-reference.
    Strict adherence to the design recipe demands that you make up some examples of
    [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) to ensure that
    the definition makes sense. As always, you should start with the base clause,
    meaning the example must look like this:'
  id: totrans-627
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶è¿™ä¸ªå®šä¹‰ä¸å‰é¢çš„åˆ—è¡¨å®šä¹‰ä¸åŒï¼Œä½†å®ƒåŒ…å«äº†å…³é”®å…ƒç´ ï¼šä¸€ä¸ªè‡ªå¼•ç”¨å’Œä¸€ä¸ªä¸ä½¿ç”¨è‡ªå¼•ç”¨çš„å­å¥ã€‚ä¸¥æ ¼éµå¾ªè®¾è®¡é£Ÿè°±è¦æ±‚ä½ ä¸º[NEList-of-temperatures](#%28tech._nelist._of._temperature%29)ä¸¾ä¸€äº›ä¾‹å­ï¼Œä»¥ç¡®ä¿å®šä¹‰æœ‰æ„ä¹‰ã€‚ä¸€å¦‚æ—¢å¾€ï¼Œä½ åº”è¯¥ä»åŸºæœ¬å­å¥å¼€å§‹ï¼Œè¿™æ„å‘³ç€ç¤ºä¾‹å¿…é¡»çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â cÂ '())
  id: totrans-628
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â cÂ '())
- en: 'where c stands for a CTemperature, like thus: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ABSOLUTE0  ''()).
    Also, it is clear that all non-empty elements of [List-of-temperatures](#%28tech._list._of._temperature%29)
    are also elements of the new class of data: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''())))
    fits the bill if ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''()))
    does, and ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''()))
    belongs to [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) because
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''())
    is an element of [NEList-of-temperatures](#%28tech._nelist._of._temperature%29),
    as confirmed before. Check for yourself that there is no limit on the size of
    NEList-of-temperatures.Letâ€™s now return to the problem of designing average so
    that everyone knows it is for non-empty lists only. With the definition of [NEList-of-temperatures](#%28tech._nelist._of._temperature%29),
    we now have the means to say what we want in the signature:This alternative development
    explains that, in this case, we can narrow down the domain of average and create
    a total function.'
  id: totrans-629
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­ c ä»£è¡¨ä¸€ä¸ª CTemperatureï¼Œä¾‹å¦‚è¿™æ ·ï¼š([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ABSOLUTE0  '()).
    æ­¤å¤–ï¼Œå¾ˆæ˜æ˜¾ï¼Œ[List-of-temperatures](#%28tech._list._of._temperature%29) çš„æ‰€æœ‰éç©ºå…ƒç´ ä¹Ÿéƒ½æ˜¯æ–°æ•°æ®ç±»
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  '())))
    çš„å…ƒç´ ï¼Œå¦‚æœ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  '()))
    ç¬¦åˆæ¡ä»¶ï¼Œå¹¶ä¸” ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  '()))
    å±äº [NEList-of-temperatures](#%28tech._nelist._of._temperature%29)ï¼Œå› ä¸º ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  '())
    æ˜¯ [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) çš„ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚å‰æ‰€è¿°ã€‚è¯·è‡ªè¡Œæ£€æŸ¥ï¼ŒNEList-of-temperatures
    çš„å¤§å°æ²¡æœ‰é™åˆ¶ã€‚ç°åœ¨è®©æˆ‘ä»¬å›åˆ°è®¾è®¡å¹³å‡æ•°çš„é—®é¢˜ï¼Œä»¥ä¾¿æ¯ä¸ªäººéƒ½çŸ¥é“å®ƒä»…é€‚ç”¨äºéç©ºåˆ—è¡¨ã€‚æœ‰äº† [NEList-of-temperatures](#%28tech._nelist._of._temperature%29)
    çš„å®šä¹‰ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰æ‰‹æ®µåœ¨ç­¾åä¸­è¡¨è¾¾æˆ‘ä»¬çš„æ„å›¾ï¼šè¿™ç§æ›¿ä»£å¼€å‘è§£é‡Šè¯´ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç¼©å°å¹³å‡æ•°çš„å®šä¹‰åŸŸï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå…¨å‡½æ•°ã€‚
- en: '| ;Â [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-630
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â computes the average temperature |'
  id: totrans-631
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| è®¡ç®—å¹³å‡æ¸©åº¦ |'
- en: '| Â  |'
  id: totrans-632
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (averageÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''()))))
    |'
  id: totrans-633
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (averageÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''()))))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â 2) |'
  id: totrans-634
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| 2) |'
- en: '| Â  |'
  id: totrans-635
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (averageÂ ne-l)
    |'
  id: totrans-636
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (averageÂ ne-l)
    |'
- en: '| Â Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â (sumÂ ne-l)
    |'
  id: totrans-637
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â (sumÂ ne-l)
    |'
- en: '| Â Â Â Â Â (how-manyÂ ne-l))) |'
  id: totrans-638
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (how-manyÂ ne-l))) |'
- en: 'Naturally the rest remains the same: the purpose statement, the example-test,
    and the function definition. After all, the very idea of computing the average
    assumes a non-empty collection of numbers, and that was the entire point of our
    discussion.'
  id: totrans-639
  prefs: []
  type: TYPE_NORMAL
  zh: è‡ªç„¶åœ°ï¼Œå…¶ä½™éƒ¨åˆ†ä¿æŒä¸å˜ï¼šç›®çš„å£°æ˜ã€ç¤ºä¾‹æµ‹è¯•å’Œå‡½æ•°å®šä¹‰ã€‚æ¯•ç«Ÿï¼Œè®¡ç®—å¹³å‡å€¼çš„æƒ³æ³•å‡è®¾äº†ä¸€ä¸ªéç©ºæ•°å­—é›†åˆï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬è®¨è®ºçš„å…¨éƒ¨è¦ç‚¹ã€‚
- en: ExerciseÂ 144\. Will sum and how-many work for [NEList-of-temperatures](#%28tech._nelist._of._temperature%29)
    even though they are designed for inputs from [List-of-temperatures](#%28tech._list._of._temperature%29)?
    If you think they donâ€™t work, provide counter-examples. If you think they would,
    explain why.
  id: totrans-640
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 144ã€‚å³ä½¿æ±‚å’Œå’Œhow-manyæ˜¯ä¸º[NEList-of-temperatures](#%28tech._nelist._of._temperature%29)çš„è¾“å…¥è®¾è®¡çš„ï¼Œå®ƒä»¬ä¹Ÿä¼šä¸º[NEList-of-temperatures](#%28tech._nelist._of._temperature%29)å·¥ä½œå—ï¼Ÿå¦‚æœä½ è®¤ä¸ºå®ƒä»¬ä¸ä¼šå·¥ä½œï¼Œè¯·æä¾›åä¾‹ã€‚å¦‚æœä½ è®¤ä¸ºå®ƒä»¬ä¼šå·¥ä½œï¼Œè¯·è§£é‡ŠåŸå› ã€‚
- en: 'Nevertheless, the definition also raises the question how to design sum and
    how-many because they consume instances of [NEList-of-temperatures](#%28tech._nelist._of._temperature%29)
    now. Here is the obvious result of the first three steps of the design recipe:'
  id: totrans-641
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡å¦‚æ­¤ï¼Œè¿™ä¸ªå®šä¹‰ä¹Ÿæå‡ºäº†å¦‚ä½•è®¾è®¡æ±‚å’Œå’Œhow-manyçš„é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬ç°åœ¨æ¶ˆè€—çš„æ˜¯[NEList-of-temperatures](#%28tech._nelist._of._temperature%29)çš„å®ä¾‹ã€‚ä»¥ä¸‹æ˜¯è®¾è®¡é£Ÿè°±çš„å‰ä¸‰ä¸ªæ­¥éª¤çš„æ˜æ˜¾ç»“æœï¼š
- en: '| ;Â [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-642
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â computes the sum of the given temperatures |'
  id: totrans-643
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è®¡ç®—ç»™å®šæ¸©åº¦çš„æ€»å’Œ |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-644
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (sumÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''()))))Â 6)
    |'
  id: totrans-645
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (sumÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''()))))Â 6)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)Â 0)
    |'
  id: totrans-646
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)Â 0)
    |'
- en: 'The example is adapted from the example for average; the dummy definition produces
    a number, but the wrong one for the given test.The fourth step is the most interesting
    part of the design of sum for NEList-of-temperatures. All preceding examples of
    design demand a template that distinguishes empty lists from non-empty, that is,
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed,
    lists because the data definitions have an appropriate shape. This is not true
    for NEList-of-temperatures. Here both clauses add [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    lists. The two clauses differ, however, in the [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field of these lists. In particular, the first clause always uses ''() in the
    [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field and the second one uses [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    instead. Hence the proper condition to distinguish the first kind of data from
    the second extracts the [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field and then uses [empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29):'
  id: totrans-647
  prefs: []
  type: TYPE_NORMAL
  zh: 'è¯¥ç¤ºä¾‹æ”¹ç¼–è‡ªå¹³å‡å€¼çš„ç¤ºä¾‹ï¼›è™šæ‹Ÿå®šä¹‰äº§ç”Ÿäº†ä¸€ä¸ªæ•°å­—ï¼Œä½†ä¸æ˜¯ç»™å®šæµ‹è¯•çš„æ­£ç¡®æ•°å­—ã€‚ç¬¬å››æ­¥æ˜¯è®¾è®¡NEList-of-temperaturesæ±‚å’Œçš„æœ€æœ‰è¶£çš„éƒ¨åˆ†ã€‚æ‰€æœ‰å…ˆå‰çš„è®¾è®¡ç¤ºä¾‹éƒ½éœ€è¦ä¸€ä¸ªæ¨¡æ¿æ¥åŒºåˆ†ç©ºåˆ—è¡¨å’Œéç©ºåˆ—è¡¨ï¼Œå³[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)edåˆ—è¡¨ï¼Œå› ä¸ºæ•°æ®å®šä¹‰å…·æœ‰é€‚å½“çš„å½¢çŠ¶ã€‚å¯¹äºNEList-of-temperaturesæ¥è¯´ï¼Œæƒ…å†µå¹¶éå¦‚æ­¤ã€‚è¿™é‡Œä¸¤ä¸ªå­å¥éƒ½æ·»åŠ äº†[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)edåˆ—è¡¨ã€‚ç„¶è€Œï¼Œè¿™ä¸¤ä¸ªå­å¥åœ¨åˆ—è¡¨çš„[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)å­—æ®µä¸Šæœ‰æ‰€ä¸åŒã€‚ç‰¹åˆ«æ˜¯ï¼Œç¬¬ä¸€ä¸ªå­å¥å§‹ç»ˆåœ¨[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)å­—æ®µä¸­ä½¿ç”¨''()ï¼Œè€Œç¬¬äºŒä¸ªå­å¥åˆ™ä½¿ç”¨[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ä»£æ›¿ã€‚å› æ­¤ï¼ŒåŒºåˆ†ç¬¬ä¸€ç§æ•°æ®ç±»å‹å’Œç¬¬äºŒç§æ•°æ®çš„æ­£ç¡®æ¡ä»¶æ˜¯æå–[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)å­—æ®µï¼Œç„¶åä½¿ç”¨[empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29):'
- en: '| ;Â [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-648
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
  id: totrans-649
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-650
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-651
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  id: totrans-652
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
- en: 'Here [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    replaces ([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l)).Next
    you should inspect both clauses and determine whether one or both of them deal
    with ne-l as if it were a structure. This is of course the case, which the unconditional
    use of [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    on ne-l demonstrates. Put differently, add appropriate selector expressions to
    the two clauses:'
  id: totrans-653
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œ [å¦åˆ™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    æ›¿æ¢äº† ([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l)).æ¥ä¸‹æ¥ä½ åº”è¯¥æ£€æŸ¥è¿™ä¸¤ä¸ªå­å¥ï¼Œç¡®å®šæ˜¯å¦æœ‰ä¸€ä¸ªæˆ–ä¸¤ä¸ªå­å¥å°†
    ne-l å½“ä½œç»“æ„æ¥å¤„ç†ã€‚è¿™å½“ç„¶æ˜¯æ­£ç¡®çš„ï¼Œè¿™åœ¨æ— æ¡ä»¶ä½¿ç”¨ [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    æ¥å¤„ç† ne-l çš„ä¾‹å­ä¸­å¾—åˆ°äº†è¯æ˜ã€‚æ¢å¥è¯è¯´ï¼Œå‘ä¸¤ä¸ªå­å¥ä¸­æ·»åŠ é€‚å½“çš„é€‰æ‹©è¡¨è¾¾å¼ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
  id: totrans-654
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-655
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  id: totrans-656
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-657
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'Before you read on, explain why the first clause does not contain the selector
    expression ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l).The
    final question of the template design concerns self-references in the data definition.
    As you know, NEList-of-temperatures contains one, and therefore the template for
    sum demands one recursive use:'
  id: totrans-658
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œè§£é‡Šä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªå­å¥ä¸åŒ…å«é€‰æ‹©è¡¨è¾¾å¼([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ne-l))ã€‚æ¨¡æ¿è®¾è®¡çš„æœ€åä¸€ä¸ªé—®é¢˜æ¶‰åŠæ•°æ®å®šä¹‰ä¸­çš„è‡ªå¼•ç”¨ã€‚æ­£å¦‚ä½ æ‰€çŸ¥ï¼ŒNEList-of-temperatures åŒ…å«ä¸€ä¸ªï¼Œå› æ­¤ sum çš„æ¨¡æ¿éœ€è¦ä¸€æ¬¡é€’å½’ä½¿ç”¨ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
  id: totrans-659
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-660
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  id: totrans-661
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]])
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-662
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-663
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'Specifically, sum is called on ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l)
    in the second clause because the data definition is self-referential at the analogous
    point.For the fifth design step, letâ€™s understand how much we already have. Since
    the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause looks significantly simpler than the second one with its recursive function
    call, you should start with that one. In this particular case, the condition says
    that sum is applied to a list with exactly one temperature, ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ne-l).
    Clearly, this one temperature is the sum of all temperatures on the given list:'
  id: totrans-664
  prefs: []
  type: TYPE_NORMAL
  zh: å…·ä½“æ¥è¯´ï¼Œåœ¨ç¬¬äºŒä¸ªå­å¥ä¸­ï¼Œsum æ˜¯åœ¨ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l)
    ä¸Šè°ƒç”¨çš„ï¼Œå› ä¸ºæ•°æ®å®šä¹‰åœ¨ç±»ä¼¼çš„ä½ç½®æ˜¯è‡ªå¼•ç”¨çš„ã€‚å¯¹äºç¬¬äº”ä¸ªè®¾è®¡æ­¥éª¤ï¼Œè®©æˆ‘ä»¬äº†è§£æˆ‘ä»¬å·²ç»æ‹¥æœ‰äº†å¤šå°‘ã€‚ç”±äºç¬¬ä¸€ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥çœ‹èµ·æ¥æ¯”å¸¦æœ‰é€’å½’å‡½æ•°è°ƒç”¨çš„ç¬¬äºŒä¸ªå­å¥ç®€å•å¾—å¤šï¼Œä½ åº”è¯¥ä»é‚£ä¸ªå¼€å§‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¡ä»¶è¡¨æ˜ sum æ˜¯åº”ç”¨äºåªæœ‰ä¸€ä¸ªæ¸©åº¦çš„åˆ—è¡¨ä¸Šï¼Œ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ne-l)ã€‚æ˜¾ç„¶ï¼Œè¿™ä¸ªå•ä¸€çš„æ¸©åº¦æ˜¯ç»™å®šåˆ—è¡¨ä¸Šæ‰€æœ‰æ¸©åº¦çš„æ€»å’Œï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
  id: totrans-665
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-666
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)]
    |'
  id: totrans-667
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-668
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-669
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'The second clause says that the list consists of a temperature and at least
    one more; ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ne-l)
    extracts the first position and ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l)
    the remaining ones. Furthermore, the template suggests to use the result of (sum  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l)).
    But sum is the function that you are defining, and you canâ€™t possibly know how
    it uses ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l).
    All you do know is what the purpose statement says, namely, that sum adds all
    the temperatures on the given list, which is ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l).
    If this statement is true, then (sum  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l))
    adds up all but one of the numbers of ne-l. To get the total, the function just
    has to add the first temperature:'
  id: totrans-670
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒä¸ªå­å¥è¯´æ˜åˆ—è¡¨ç”±ä¸€ä¸ªæ¸©åº¦å’Œè‡³å°‘ä¸€ä¸ªæ›´å¤šå…ƒç´ ç»„æˆï¼›([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    ne-l) æå–ç¬¬ä¸€ä¸ªä½ç½®ï¼Œ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ne-l) æå–å‰©ä½™çš„å…ƒç´ ã€‚æ­¤å¤–ï¼Œæ¨¡æ¿å»ºè®®ä½¿ç”¨ (sum ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ne-l)) çš„ç»“æœã€‚ä½†æ˜¯ sum æ˜¯ä½ æ­£åœ¨å®šä¹‰çš„å‡½æ•°ï¼Œä½ ä¸å¯èƒ½çŸ¥é“å®ƒå¦‚ä½•ä½¿ç”¨ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ne-l))ã€‚ä½ æ‰€çŸ¥é“çš„å°±æ˜¯ç›®çš„å£°æ˜æ‰€è¯´çš„ï¼Œå³ sum å°†ç»™å®šåˆ—è¡¨ä¸Šçš„æ‰€æœ‰æ¸©åº¦ç›¸åŠ ï¼Œå³ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ne-l))ã€‚å¦‚æœè¿™ä¸ªå£°æ˜æ˜¯æ­£ç¡®çš„ï¼Œé‚£ä¹ˆ (sum ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ne-l)) å°±ä¼šåŠ ä¸Š ne-l çš„æ‰€æœ‰æ•°å­—ï¼Œé™¤äº†ä¸€ä¸ªã€‚ä¸ºäº†å¾—åˆ°æ€»æ•°ï¼Œå‡½æ•°åªéœ€å°†ç¬¬ä¸€ä¸ªæ¸©åº¦åŠ åˆ°ä¸Šé¢å³å¯ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
  id: totrans-671
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-672
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)]
    |'
  id: totrans-673
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l)))]))
    |'
  id: totrans-674
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l)))]))
    |'
- en: If you now run the test for this function, you will see that the leap of faith
    is justified. Indeed, for reasons beyond the scope of this book, this leap is
    always justified, which is why it is an inherent part of the design recipe.
  id: totrans-675
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ç°åœ¨è¿è¡Œè¿™ä¸ªå‡½æ•°çš„æµ‹è¯•ï¼Œä½ ä¼šçœ‹åˆ°è¿™ä¸ªä¿¡å¿µçš„é£è·ƒæ˜¯æœ‰é“ç†çš„ã€‚å®é™…ä¸Šï¼Œç”±äºè¿™ä¸ªè¯é¢˜è¶…å‡ºäº†æœ¬ä¹¦çš„èŒƒå›´ï¼Œè¿™ä¸ªé£è·ƒæ€»æ˜¯æœ‰é“ç†çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒæ˜¯è®¾è®¡é£Ÿè°±çš„ä¸€ä¸ªå›ºæœ‰éƒ¨åˆ†ã€‚
- en: 'ExerciseÂ 145\. Design the sorted>? predicate, which consumes a [NEList-of-temperatures](#%28tech._nelist._of._temperature%29)
    and produces #true if the temperatures are sorted in descending order. That is,
    if the second is smaller than the first, the third smaller than the second, and
    so on. Otherwise it produces #false.'
  id: totrans-676
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹  145\. è®¾è®¡ä¸€ä¸ªæ’åºåˆ¤æ–­è°“è¯ï¼Œå®ƒæ¶ˆè€—ä¸€ä¸ª [NEList-of-temperatures](#%28tech._nelist._of._temperature%29)
    å¹¶åœ¨æ¸©åº¦æŒ‰é™åºæ’åˆ—æ—¶è¿”å› #trueã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç¬¬äºŒä¸ªå°äºç¬¬ä¸€ä¸ªï¼Œç¬¬ä¸‰ä¸ªå°äºç¬¬äºŒä¸ªï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦åˆ™è¿”å› #falseã€‚'
- en: Hint This problem is another one where the table-based method for guessing the
    combinator works well. Here is a partial table for a number of examples in [figureÂ 58](#%28counter._%28figure._fig~3asorted%29%29).
    Fill in the rest of the table. Then try to create an expression that computes
    the result from the pieces.
  id: totrans-677
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼šè¿™ä¸ªé—®é¢˜æ˜¯å¦ä¸€ä¸ªä½¿ç”¨è¡¨æ ¼æ³•çŒœæµ‹ç»„åˆå™¨æ•ˆæœå¾ˆå¥½çš„é—®é¢˜ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ª [å›¾ 58](#%28counter._%28figure._fig~3asorted%29%29)
    ä¸­ä¸€äº›ç¤ºä¾‹çš„è¡¨æ ¼éƒ¨åˆ†ã€‚å¡«å†™å‰©ä½™çš„éƒ¨åˆ†ã€‚ç„¶åå°è¯•åˆ›å»ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä»è¿™äº›éƒ¨åˆ†è®¡ç®—ç»“æœã€‚
- en: '| l |  | ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)
    |  | ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)
    |  |'
  id: totrans-678
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| l |  | ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)
    |  | ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)
    |  |'
- en: ''
  id: totrans-679
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (sorted>? &#124;'
  id: totrans-680
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (sorted>? &#124;'
- en: '&#124; Â Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))
    &#124;'
  id: totrans-681
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))
    &#124;'
- en: ''
  id: totrans-682
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-683
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-684
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (sorted>? &#124;'
  id: totrans-685
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (sorted>? &#124;'
- en: '&#124; Â l) &#124;'
  id: totrans-686
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â l) &#124;'
- en: ''
  id: totrans-687
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-688
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '|'
  id: totrans-689
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-690
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1
    &#124;'
  id: totrans-691
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1
    &#124;'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
  id: totrans-692
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
- en: '&#124; Â Â Â Â ''())) &#124;'
  id: totrans-693
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ''())) &#124;'
- en: ''
  id: totrans-694
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | 1 |  | ??? |  | #true |  | #false |'
  id: totrans-695
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | 1 |  | ??? |  | #true |  | #false |'
- en: '|'
  id: totrans-696
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-697
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    &#124;'
  id: totrans-698
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    &#124;'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
  id: totrans-699
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
- en: '&#124; Â Â Â Â ''())) &#124;'
  id: totrans-700
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ''())) &#124;'
- en: ''
  id: totrans-701
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | 3 |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''())
    |  | ??? |  | #true |'
  id: totrans-702
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | 3 |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''())
    |  | ??? |  | #true |'
- en: '|'
  id: totrans-703
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-704
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0
    &#124;'
  id: totrans-705
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0
    &#124;'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    &#124;'
  id: totrans-706
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    &#124;'
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
  id: totrans-707
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  id: totrans-708
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â Â Â ''()))) &#124;'
- en: ''
  id: totrans-709
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | 0 |  |'
  id: totrans-710
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | 0 |  |'
- en: ''
  id: totrans-711
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    &#124;'
  id: totrans-712
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    &#124;'
- en: '&#124; Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
  id: totrans-713
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
- en: '&#124; Â Â Â ''())) &#124;'
  id: totrans-714
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â ''())) &#124;'
- en: ''
  id: totrans-715
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ??? |  | ??? |'
  id: totrans-716
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | ??? |  | ??? |'
- en: ''
  id: totrans-717
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 58: A table for sorted>?'
  id: totrans-718
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'FigureÂ 58: sorted>? çš„è¡¨æ ¼'
- en: ExerciseÂ 146\. Design how-many for [NEList-of-temperatures](#%28tech._nelist._of._temperature%29).
    Doing so completes average, so ensure that average passes all of its tests, too.
  id: totrans-719
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 146ã€‚è®¾è®¡how-manyç”¨äº[NEList-of-temperatures](#%28tech._nelist._of._temperature%29)ã€‚è¿™æ ·åšå°±å®Œæˆäº†å¹³å‡æ•°ï¼Œå› æ­¤ä¹Ÿè¦ç¡®ä¿å¹³å‡æ•°é€šè¿‡æ‰€æœ‰æµ‹è¯•ã€‚
- en: ExerciseÂ 147\. Develop a data definition for NEList-of-Booleans, a representation
    of non-empty lists of Boolean values. Then redesign the functions all-true and
    one-true from [exerciseÂ 140](#%28counter._%28exercise._list-and%29%29).
  id: totrans-720
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 147ã€‚ä¸ºNEList-of-Booleanså¼€å‘ä¸€ä¸ªæ•°æ®å®šä¹‰ï¼Œå®ƒè¡¨ç¤ºå¸ƒå°”å€¼çš„éç©ºåˆ—è¡¨ã€‚ç„¶åé‡æ–°è®¾è®¡æ¥è‡ª[ç»ƒä¹ 140](#%28counter._%28exercise._list-and%29%29)çš„all-trueå’Œone-trueå‡½æ•°ã€‚
- en: ExerciseÂ 148\. Compare the function definitions from this section (sum, how-many,
    all-true, one-true) with the corresponding function definitions from the preceding
    sections. Is it better to work with data definitions that accommodate empty lists
    as opposed to definitions for non-empty lists? Why? Why not?
  id: totrans-721
  prefs: []
  type: TYPE_NORMAL
  zh: 'ç»ƒä¹ 148ã€‚å°†æœ¬èŠ‚ï¼ˆsumã€how-manyã€all-trueã€one-trueï¼‰ä¸­çš„å‡½æ•°å®šä¹‰ä¸å‰é¢ç« èŠ‚ä¸­ç›¸åº”çš„å‡½æ•°å®šä¹‰è¿›è¡Œæ¯”è¾ƒã€‚ä½¿ç”¨å…è®¸ç©ºåˆ—è¡¨çš„æ•°æ®å®šä¹‰æ˜¯å¦æ¯”éç©ºåˆ—è¡¨çš„å®šä¹‰æ›´å¥½ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸ï¼Ÿ '
- en: 9.3Natural Numbers[ğŸ”—](#(part._sec~3anats) "Link to here")
  id: totrans-722
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 9.3è‡ªç„¶æ•°[ğŸ”—](#(part._sec~3anats) "é“¾æ¥è‡³æ­¤")
- en: 'The BSL programming language supplies many functions that consume lists and
    a few that produce them, too. Among those is [make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29),
    which consumes a number n together with some other value v and produces a list
    that contains v n times. Here are some examples:'
  id: totrans-723
  prefs: []
  type: TYPE_NORMAL
  zh: BSLç¼–ç¨‹è¯­è¨€æä¾›äº†è®¸å¤šæ¶ˆè€—åˆ—è¡¨çš„å‡½æ•°ï¼Œä»¥åŠä¸€äº›äº§ç”Ÿåˆ—è¡¨çš„å‡½æ•°ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯[make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)ï¼Œå®ƒæ¶ˆè€—ä¸€ä¸ªæ•°å­—nå’Œä¸€äº›å…¶ä»–å€¼vï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªåŒ…å«vé‡å¤næ¬¡çš„åˆ—è¡¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š
- en: '| > ([make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)Â 2Â "hello")
    |'
  id: totrans-724
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)Â 2Â "hello")
    |'
- en: '| (cons "hello" (cons "hello" ''())) |'
  id: totrans-725
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (cons "hello" (cons "hello" ''())) |'
- en: '| > ([make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)Â 3Â #true)
    |'
  id: totrans-726
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)Â 3Â #true)
    |'
- en: '| (cons #true (cons #true (cons #true ''()))) |'
  id: totrans-727
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (cons #true (cons #true (cons #true ''()))) |'
- en: '| > ([make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)Â 0Â 17)
    |'
  id: totrans-728
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)Â 0Â 17)
    |'
- en: '| ''() |'
  id: totrans-729
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''() |'
- en: 'In short, even though this function consumes atomic data, it produces arbitrarily
    large pieces of data. Your question should be how this is possible.Our answer
    is that [make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)â€™s
    input isnâ€™t just a number, it is a special kind of number. In kindergarten you
    called these numbers â€œcounting numbersâ€, that is, these numbers are used to count
    objects. In computer science, these numbers are dubbed natural numbers. Unlike
    regular numbers, natural numbers come with a data definition:'
  id: totrans-730
  prefs: []
  type: TYPE_NORMAL
  zh: ç®€è€Œè¨€ä¹‹ï¼Œå°½ç®¡è¿™ä¸ªå‡½æ•°æ¶ˆè€—çš„æ˜¯åŸå­æ•°æ®ï¼Œä½†å®ƒå¯ä»¥äº§ç”Ÿä»»æ„å¤§å°çš„æ•°æ®å—ã€‚ä½ çš„é—®é¢˜åº”è¯¥æ˜¯è¿™æ˜¯å¦‚ä½•å¯èƒ½çš„ã€‚æˆ‘ä»¬çš„ç­”æ¡ˆæ˜¯[make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)çš„è¾“å…¥ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè€Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°å­—ã€‚åœ¨å¹¼å„¿å›­æ—¶ï¼Œä½ ä»¬æŠŠè¿™äº›æ•°å­—ç§°ä¸ºâ€œè®¡æ•°æ•°å­—â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™äº›æ•°å­—ç”¨äºè®¡æ•°ç‰©ä½“ã€‚åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œè¿™äº›æ•°å­—è¢«ç§°ä¸ºè‡ªç„¶æ•°ã€‚ä¸å¸¸è§„æ•°å­—ä¸åŒï¼Œè‡ªç„¶æ•°æœ‰ä¸€ä¸ªæ•°æ®å®šä¹‰ï¼š
- en: '| ;Â An N is one of: |'
  id: totrans-731
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An N is one of: |'
- en: '| ;Â â€“  0 |'
  id: totrans-732
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  0 |'
- en: '| ;Â â€“  ([add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)  [N](#%28tech._n%29))
    |'
  id: totrans-733
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)  [N](#%28tech._n%29))
    |'
- en: '| ;Â interpretation represents the counting numbers |'
  id: totrans-734
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation represents the counting numbers |'
- en: The first clause says that 0 is a natural number; it is used to say that there
    is no object to be counted. The second clause tells you that if n is a natural
    number, then n+1 is one too, because [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)
    is a function that adds 1 to whatever number it is given. We could write this
    second clause as ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  n  1),
    but the use of [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)
    is supposed to signal that this addition is special.
  id: totrans-735
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€æ¡è§„åˆ™è¯´æ˜0æ˜¯ä¸€ä¸ªè‡ªç„¶æ•°ï¼›å®ƒè¢«ç”¨æ¥è¡¨ç¤ºæ²¡æœ‰è¦è®¡æ•°çš„ç›®æ ‡ã€‚ç¬¬äºŒæ¡è§„åˆ™å‘Šè¯‰ä½ ï¼Œå¦‚æœnæ˜¯ä¸€ä¸ªè‡ªç„¶æ•°ï¼Œé‚£ä¹ˆn+1ä¹Ÿæ˜¯ä¸€ä¸ªè‡ªç„¶æ•°ï¼Œå› ä¸º[add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)æ˜¯ä¸€ä¸ªå°†1åŠ åˆ°å®ƒæ‰€ç»™çš„ä»»ä½•æ•°ä¸Šçš„å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªç¬¬äºŒæ¡è§„åˆ™å†™æˆ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    n 1)ï¼Œä½†ä½¿ç”¨[add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)çš„ç›®çš„æ˜¯è¦è¡¨æ˜è¿™ç§åŠ æ³•æ˜¯ç‰¹æ®Šçš„ã€‚
- en: What is special about this use of [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)
    is that it acts more like a constructor from some structure-type definition than
    a regular function. For that reason, BSL also comes with the function [sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29),
    which is the â€œselectorâ€ corresponding to [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29).
    Given any natural number m not equal to 0, you can use [sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)
    to find out the number that went into the construction of m. Put differently,
    [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)
    is like [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and [sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)
    is like [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    and [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29).
  id: totrans-736
  prefs: []
  type: TYPE_NORMAL
  zh: '[add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)è¿™ç§ç”¨æ³•ä¹‹æ‰€ä»¥ç‰¹æ®Šï¼Œæ˜¯å› ä¸ºå®ƒæ›´åƒæ˜¯ä»æŸç§ç»“æ„ç±»å‹å®šä¹‰ä¸­æ„é€ å‡ºæ¥çš„ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¸¸è§„å‡½æ•°ã€‚å› æ­¤ï¼ŒBSLè¿˜é™„å¸¦äº†ä¸€ä¸ªå‡½æ•°[sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)ï¼Œå®ƒæ˜¯ä¸[add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)ç›¸å¯¹åº”çš„â€œé€‰æ‹©å™¨â€ã€‚ç»™å®šä»»ä½•ä¸ç­‰äº0çš„è‡ªç„¶æ•°mï¼Œä½ å¯ä»¥ä½¿ç”¨[sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)æ¥æ‰¾å‡ºæ„æˆmçš„æ•°å­—ã€‚æ¢å¥è¯è¯´ï¼Œ[add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)å°±åƒ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ï¼Œè€Œ[sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)å°±åƒ[first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)å’Œ[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)ã€‚'
- en: 'At this point you may wonder what the predicates are that distinguish 0 from
    those natural numbers that are not 0. There are two, just as for lists: [zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29),
    which determines whether some given number is 0, and [positive?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._positive~3f%29%29),
    which determines whether some number is larger than 0.'
  id: totrans-737
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ å¯èƒ½æƒ³çŸ¥é“æœ‰å“ªäº›è°“è¯å¯ä»¥åŒºåˆ†0å’Œé‚£äº›ä¸ç­‰äº0çš„è‡ªç„¶æ•°ã€‚æœ‰ä¸¤ä¸ªï¼Œå°±åƒåˆ—è¡¨ä¸€æ ·ï¼š[zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)ï¼Œå®ƒç¡®å®šæŸä¸ªç»™å®šçš„æ•°æ˜¯å¦ä¸º0ï¼Œä»¥åŠ[positive?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._positive~3f%29%29)ï¼Œå®ƒç¡®å®šæŸä¸ªæ•°æ˜¯å¦å¤§äº0ã€‚
- en: 'Now you are in a position to design functions on natural numbers, such as [make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29),
    yourself. The data definition is already available, so letâ€™s add the header material:'
  id: totrans-738
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä½ å·²ç»å¯ä»¥è®¾è®¡å…³äºè‡ªç„¶æ•°çš„å‡½æ•°äº†ï¼Œä¾‹å¦‚[make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)ï¼Œè‡ªå·±æ¥å®ç°ã€‚æ•°æ®å®šä¹‰å·²ç»å¯ç”¨ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æ·»åŠ å¤´ææ–™ï¼š
- en: '| ;Â [N](#%28tech._n%29)  [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  id: totrans-739
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [N](#%28tech._n%29)  [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) -> [å­—ç¬¦ä¸²åˆ—è¡¨](#%28tech._list._of._string%29)
    |'
- en: '| ;Â creates a list of n copies of s |'
  id: totrans-740
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åˆ›å»ºä¸€ä¸ªåŒ…å«nä¸ªså‰¯æœ¬çš„åˆ—è¡¨ |'
- en: '| Â  |'
  id: totrans-741
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 0Â "hello")Â ''())
    |'
  id: totrans-742
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 0Â "hello")Â ''())
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 2Â "hello")
    |'
  id: totrans-743
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 2Â "hello")
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ''())))
    |'
  id: totrans-744
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ''())))
    |'
- en: '| Â  |'
  id: totrans-745
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copierÂ nÂ s)
    |'
  id: totrans-746
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copierÂ nÂ s)
    |'
- en: '| Â Â ''()) |'
  id: totrans-747
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ''()) |'
- en: 'Developing the template is the next step. The questions for the template suggest
    that copierâ€™s body is a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with two clauses: one for 0 and one for positive numbers. Furthermore,
    0 is considered atomic and positive numbers are considered structured values,
    meaning the template needs a selector expression in the second clause. Last but
    not least, the data definition for [N](#%28tech._n%29) is self-referential in
    the second clause. Hence the template needs a recursive application to the corresponding
    selector expression in the second clause:'
  id: totrans-748
  prefs: []
  type: TYPE_NORMAL
  zh: å¼€å‘æ¨¡æ¿æ˜¯ä¸‹ä¸€æ­¥ã€‚æ¨¡æ¿çš„é—®é¢˜è¡¨æ˜ï¼Œå¤åˆ¶å™¨çš„ä¸»ä½“æ˜¯ä¸€ä¸ª[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)è¡¨è¾¾å¼ï¼ŒåŒ…å«ä¸¤ä¸ªå­å¥ï¼šä¸€ä¸ªç”¨äº0ï¼Œä¸€ä¸ªç”¨äºæ­£æ•°ã€‚æ­¤å¤–ï¼Œ0è¢«è§†ä¸ºåŸå­ï¼Œæ­£æ•°è¢«è§†ä¸ºç»“æ„åŒ–å€¼ï¼Œè¿™æ„å‘³ç€æ¨¡æ¿éœ€è¦åœ¨ç¬¬äºŒä¸ªå­å¥ä¸­æœ‰ä¸€ä¸ªé€‰æ‹©è¡¨è¾¾å¼ã€‚æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œ[N](#%28tech._n%29)çš„æ•°æ®å®šä¹‰åœ¨ç¬¬äºŒä¸ªå­å¥ä¸­æ˜¯è‡ªå¼•ç”¨çš„ã€‚å› æ­¤ï¼Œæ¨¡æ¿éœ€è¦åœ¨ç¬¬äºŒä¸ªå­å¥ä¸­çš„ç›¸åº”é€‰æ‹©è¡¨è¾¾å¼ä¸­è¿›è¡Œé€’å½’åº”ç”¨ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copierÂ nÂ s)
    |'
  id: totrans-749
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copierÂ nÂ s)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-750
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-751
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([positive?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._positive~3f%29%29)Â n)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (copierÂ ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â n)Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-752
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([positive?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._positive~3f%29%29)Â n)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (copierÂ ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â n)Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: '| ;Â [N](#%28tech._n%29)  [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  id: totrans-753
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [N](#%28tech._n%29)  [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
- en: '| ;Â creates a list of n copies of s |'
  id: totrans-754
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â åˆ›å»ºä¸€ä¸ªåŒ…å«nä¸ªså‰¯æœ¬çš„åˆ—è¡¨ |'
- en: '| Â  |'
  id: totrans-755
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   | |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 0Â "hello")Â ''())
    |'
  id: totrans-756
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 0Â "hello")Â ''())
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 2Â "hello")
    |'
  id: totrans-757
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 2Â "hello")
    |
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ''())))
    |'
  id: totrans-758
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ''())))
    |'
- en: '| Â  |'
  id: totrans-759
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   | |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copierÂ nÂ s)
    |'
  id: totrans-760
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copierÂ nÂ s)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-761
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)Â n)Â ''()]
    |'
  id: totrans-762
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)Â n)Â ''()]
    |'
- en: '| Â Â Â Â [([positive?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._positive~3f%29%29)Â n)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â sÂ (copierÂ ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â n)Â s))]))
    |'
  id: totrans-763
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   | ([positive?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._positive~3f%29%29)Â n)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â sÂ (copierÂ ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â n)Â s))]))
    |'
- en: ''
  id: totrans-764
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 59: Creating a list of copies'
  id: totrans-765
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾59ï¼šåˆ›å»ºå‰¯æœ¬åˆ—è¡¨
- en: '[FigureÂ 59](#%28counter._%28figure._fig~3acopier%29%29) contains a complete
    definition of the copier function, as obtained from its template. Letâ€™s reconstruct
    this step carefully. As always, we start with the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause that has no recursive calls. Here the condition tells us that the (important)
    input is 0, and that means the function must produce a list with 0 items, that
    is, none. Of course, working through the second example has already clarified
    this case. Next we turn to the other [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause and remind ourselves what its expressions compute:'
  id: totrans-766
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾ 59](#%28counter._%28figure._fig~3acopier%29%29) åŒ…å«äº† copier å‡½æ•°çš„å®Œæ•´å®šä¹‰ï¼Œè¿™æ˜¯ä»å…¶æ¨¡æ¿ä¸­è·å¾—çš„ã€‚è®©æˆ‘ä»¬ä»”ç»†é‡å»ºè¿™ä¸€æ­¥ã€‚åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬ä»æ²¡æœ‰é€’å½’è°ƒç”¨çš„
    [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥å¼€å§‹ã€‚è¿™é‡Œæ¡ä»¶å‘Šè¯‰æˆ‘ä»¬ï¼ˆé‡è¦çš„ï¼‰è¾“å…¥æ˜¯ 0ï¼Œè¿™æ„å‘³ç€å‡½æ•°å¿…é¡»ç”Ÿæˆä¸€ä¸ªåŒ…å« 0 ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œå³ç©ºåˆ—è¡¨ã€‚å½“ç„¶ï¼Œé€šè¿‡è§£å†³ç¬¬äºŒä¸ªä¾‹å­å·²ç»æ¾„æ¸…äº†è¿™ç§æƒ…å†µã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è½¬å‘å…¶ä»–
    [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥ï¼Œå¹¶æé†’è‡ªå·±å…¶è¡¨è¾¾å¼è®¡ç®—çš„å†…å®¹ï¼š'
- en: ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)
    extracts the natural number that went into the construction of n, which we know
    is larger than 0;
  id: totrans-767
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)
    æå–äº†æ„å»º n æ—¶ä½¿ç”¨çš„è‡ªç„¶æ•°ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªæ•°å¤§äº 0ï¼›
- en: (copier  ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)  s)
    produces a list of ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)
    strings s according to the purpose statement of copier.
  id: totrans-768
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (copier  ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)  s)
    ç”Ÿæˆä¸€ä¸ªåŒ…å« ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)
    ä¸ªå­—ç¬¦ä¸² s çš„åˆ—è¡¨ï¼Œæ ¹æ® copier çš„ç›®çš„å£°æ˜ã€‚
- en: But the function is given n and must therefore produce a list with n strings
    s. Given a list with one too few strings, it is easy to see that the function
    must simply [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    one s onto the result of (copier  ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)  s).
    And that is precisely what the second clause specifies.
  id: totrans-769
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†å‡½æ•°è¢«èµ‹äºˆäº† nï¼Œå› æ­¤å¿…é¡»ç”Ÿæˆä¸€ä¸ªåŒ…å« n ä¸ªå­—ç¬¦ä¸² s çš„åˆ—è¡¨ã€‚ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ•°é‡ä¸è¶³çš„åˆ—è¡¨ï¼Œå¾ˆå®¹æ˜“çœ‹å‡ºå‡½æ•°å¿…é¡»ç®€å•åœ°å°†ä¸€ä¸ª s [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    åˆ° (copier  ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)  s)
    çš„ç»“æœä¸Šã€‚è¿™æ­£æ˜¯ç¬¬äºŒä¸ªå­å¥æ‰€æŒ‡å®šçš„ã€‚
- en: At this point, you should run the tests to ensure that this function works at
    least for the two worked examples. In addition, you may wish to use the function
    on some additional inputs.
  id: totrans-770
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ åº”è¯¥è¿è¡Œæµ‹è¯•ä»¥ç¡®ä¿è¿™ä¸ªå‡½æ•°è‡³å°‘å¯¹ä¸¤ä¸ªå·²è§£å†³çš„é—®é¢˜æœ‰æ•ˆã€‚æ­¤å¤–ï¼Œä½ å¯èƒ½å¸Œæœ›å¯¹ä¸€äº›é¢å¤–çš„è¾“å…¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚
- en: ExerciseÂ 149\. Does copier function properly when you apply it to a natural
    number and a Boolean or an image? Or do you have to design another function? Read
    [Abstraction](part_three.html) for an answer.
  id: totrans-771
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  149. å½“ä½ å°† copier å‡½æ•°åº”ç”¨äºè‡ªç„¶æ•°ã€å¸ƒå°”å€¼æˆ–å›¾åƒæ—¶ï¼Œå®ƒæ˜¯å¦æ­£å¸¸å·¥ä½œï¼Ÿæˆ–è€…ä½ å¿…é¡»è®¾è®¡å¦ä¸€ä¸ªå‡½æ•°ï¼Ÿé˜…è¯» [æŠ½è±¡](part_three.html)
    è·å–ç­”æ¡ˆã€‚
- en: 'An alternative definition of copier might use [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29):'
  id: totrans-772
  prefs: []
  type: TYPE_NORMAL
  zh: copier çš„å¦ä¸€ç§å®šä¹‰å¯èƒ½ä½¿ç”¨ [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copier.v2Â nÂ s)
    |'
  id: totrans-773
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copier.v2Â nÂ s)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-774
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)Â n)Â ''()]
    |'
  id: totrans-775
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)Â n)Â ''()]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â sÂ (copier.v2Â ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â n)Â s))]))
    |'
  id: totrans-776
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â sÂ (copier.v2Â ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â n)Â s))]))
    |'
- en: 'How do copier and copier.v2 behave when you apply them to 0.1 and "x"? Explain.
    Use DrRacketâ€™s stepper to confirm your explanation.ExerciseÂ 150\. Design the function
    add-to-pi. It consumes a natural number n and adds it to [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29)
    without using the primitive [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    operation. Here is a start:'
  id: totrans-777
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä½ å°† copier å’Œ copier.v2 åº”ç”¨äº 0.1 å’Œ "x" æ—¶ï¼Œå®ƒä»¬çš„è¡¨ç°å¦‚ä½•ï¼Ÿè¯·è§£é‡Šã€‚ä½¿ç”¨ DrRacket çš„æ­¥è¿›å™¨æ¥ç¡®è®¤ä½ çš„è§£é‡Šã€‚ç»ƒä¹ 
    150ã€‚è®¾è®¡å‡½æ•° add-to-piã€‚å®ƒæ¥å—ä¸€ä¸ªè‡ªç„¶æ•° nï¼Œå¹¶å°†å…¶åŠ åˆ° [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29)
    ä¸Šï¼Œè€Œä¸ä½¿ç”¨åŸå§‹çš„ [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    æ“ä½œã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¼€å§‹ï¼š
- en: '| ;Â [N](#%28tech._n%29) -> [Number](part_one.html#%28tech._number%29) |'
  id: totrans-778
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [N](#%28tech._n%29) -> [Number](part_one.html#%28tech._number%29) |'
- en: '| ;Â computes ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  n  [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))
    without using [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    |'
  id: totrans-779
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â computes ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  n  [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))
    without using [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    |'
- en: '| Â  |'
  id: totrans-780
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-within](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-within%29%29)Â (add-to-piÂ 3)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 3Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))Â 0.001)
    |'
  id: totrans-781
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-within](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-within%29%29)Â (add-to-piÂ 3)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 3Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))Â 0.001)
    |'
- en: '| Â  |'
  id: totrans-782
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-to-piÂ n)
    |'
  id: totrans-783
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-to-piÂ n)
    |'
- en: '| Â Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))
    |'
  id: totrans-784
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))
    |'
- en: Once you have a complete definition, generalize the function to add, which adds
    a natural number n to some arbitrary number x without using [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29).
    Why does the skeleton use [check-within](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-within%29%29)?
  id: totrans-785
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ä½ æœ‰äº†å®Œæ•´çš„å®šä¹‰ï¼Œå°†å‡½æ•°æ³›åŒ–åˆ° addï¼Œå®ƒå°†ä¸€ä¸ªè‡ªç„¶æ•° n åŠ åˆ°ä»»æ„æ•° x ä¸Šï¼Œè€Œä¸ä½¿ç”¨ [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)ã€‚ä¸ºä»€ä¹ˆæ¡†æ¶ä½¿ç”¨
    [check-within](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-within%29%29)ï¼Ÿ
- en: ExerciseÂ 151\. Design the function multiply. It consumes a natural number n
    and multiplies it with a number x without using [*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29).
  id: totrans-786
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  151ã€‚è®¾è®¡å‡½æ•° multiplyã€‚å®ƒæ¥å—ä¸€ä¸ªè‡ªç„¶æ•° nï¼Œå¹¶å°†å…¶ä¸ä¸€ä¸ªæ•° x ç›¸ä¹˜ï¼Œè€Œä¸ä½¿ç”¨ [*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)ã€‚
- en: Use DrRacketâ€™s stepper to evaluate (multiply  3  x) for any x you like. How
    does multiply relate to what you know from grade school?
  id: totrans-787
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨DrRacketçš„æ­¥è¿›å™¨è¯„ä¼°(multiply 3 x)å¯¹äºä»»ä½•ä½ å–œæ¬¢çš„xã€‚multiplyä¸ä½ ä»å°å­¦é˜¶æ®µå­¦åˆ°çš„çŸ¥è¯†æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ
- en: 'ExerciseÂ 152\. Design two functions: col and row.'
  id: totrans-788
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 152ã€‚è®¾è®¡ä¸¤ä¸ªå‡½æ•°ï¼šcolå’Œrowã€‚
- en: The function col consumes a natural number n and an image img. It produces a
    columnâ€”<wbr>a vertical arrangementâ€”<wbr>of n copies of img.
  id: totrans-789
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°colæ¥å—ä¸€ä¸ªè‡ªç„¶æ•°nå’Œä¸€ä¸ªå›¾åƒimgã€‚å®ƒäº§ç”Ÿä¸€ä¸ªåˆ—â€”â€”<wbr>ä¸€ä¸ªå‚ç›´æ’åˆ—â€”â€”<wbr>imgçš„nä¸ªå‰¯æœ¬ã€‚
- en: The function row consumes a natural number n and an image img. It produces a
    rowâ€”<wbr>a horizontal arrangementâ€”<wbr>of n copies of img.
  id: totrans-790
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°rowæ¥å—ä¸€ä¸ªè‡ªç„¶æ•°nå’Œä¸€ä¸ªå›¾åƒimgã€‚å®ƒäº§ç”Ÿä¸€ä¸ªè¡Œâ€”â€”<wbr>ä¸€ä¸ªæ°´å¹³æ’åˆ—â€”â€”<wbr>imgçš„nä¸ªå‰¯æœ¬ã€‚
- en: '![image](../Images/22f2b400f2886255d337e960c6f00be4.png)Â Â Â Â Â ![image](../Images/8cbe75cb9c9e4c849428502005000815.png)Â Â Â Â Â ![image](../Images/741636214abd48e079ab1203d85cebe3.png)'
  id: totrans-791
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/22f2b400f2886255d337e960c6f00be4.png)Â Â Â Â Â ![image](../Images/8cbe75cb9c9e4c849428502005000815.png)Â Â Â Â Â ![image](../Images/741636214abd48e079ab1203d85cebe3.png)'
- en: ''
  id: totrans-792
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 60: Random attacks'
  id: totrans-793
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾60ï¼šéšæœºæ”»å‡»
- en: ExerciseÂ 153\. The goal of this exercise is to visualize the result of a 1968-style
    European student riot. Here is the rough idea. A small group of students meets
    to make paint-filled balloons, enters some lecture hall, and randomly throws the
    balloons at the attendees. Your program displays how the balloons color the seats
    in the lecture hall.
  id: totrans-794
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 153ã€‚è¿™ä¸ªç»ƒä¹ çš„ç›®æ ‡æ˜¯å¯è§†åŒ–1968å¹´æ¬§æ´²å­¦ç”Ÿæš´ä¹±çš„åæœã€‚å¤§è‡´æƒ³æ³•å¦‚ä¸‹ã€‚ä¸€å°ç¾¤å­¦ç”Ÿèšåœ¨ä¸€èµ·åˆ¶ä½œè£…æ»¡æ²¹æ¼†çš„æ°”çƒï¼Œè¿›å…¥æŸä¸ªè®²å ‚ï¼Œå¹¶éšæœºå‘å¬ä¼—æŠ•æ·æ°”çƒã€‚ä½ çš„ç¨‹åºæ˜¾ç¤ºæ°”çƒå¦‚ä½•ä½¿è®²å ‚çš„åº§ä½ç€è‰²ã€‚
- en: Use the two functions from [exerciseÂ 152](#%28counter._%28exercise._ex~3acol-row%29%29)
    to create a rectangle of COLUMNS by ROWS squares, each of which has size 10 by
    10\. Place it in an [empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)
    of the same size. This image is your lecture hall.
  id: totrans-795
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æ¥è‡ª[ç»ƒä¹ 152](#%28counter._%28exercise._ex~3acol-row%29%29)çš„ä¸¤ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ªç”±COLUMNSåˆ—å’ŒROWSè¡Œç»„æˆçš„çŸ©å½¢ï¼Œæ¯ä¸ªæ–¹å—çš„å°ºå¯¸ä¸º10x10ã€‚å°†å…¶æ”¾ç½®åœ¨ç›¸åŒå¤§å°çš„[ç©ºåœºæ™¯](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)ä¸­ã€‚è¿™å¼ å›¾ç‰‡å°±æ˜¯ä½ çš„è®²å ‚ã€‚
- en: Design add-balloons. The function consumes a list of [Posn](part_one.html#%28tech._posn%29)
    whose coordinates fit into the dimensions of the lecture hall. It produces an
    image of the lecture hall with red dots added as specified by the [Posn](part_one.html#%28tech._posn%29)s.
  id: totrans-796
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡add-balloonsã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ª[Posn](part_one.html#%28tech._posn%29)åˆ—è¡¨ï¼Œå…¶åæ ‡é€‚åˆè®²å ‚çš„å°ºå¯¸ã€‚å®ƒäº§ç”Ÿä¸€ä¸ªå¸¦æœ‰æ ¹æ®[Posn](part_one.html#%28tech._posn%29)sæŒ‡å®šçš„çº¢è‰²ç‚¹çš„è®²å ‚å›¾åƒã€‚
- en: '[FigureÂ 60](#%28counter._%28figure._fig~3aex~3arandom1%29%29) shows the output
    of our solution for 10 COLUMNS columns and 20 ROWS when given some list of [Posn](part_one.html#%28tech._posn%29)s.
    The left-most is the clean lecture hall, the second one is after two balloons
    have hit, and the last one is a highly unlikely distribution of 10 hits. Where
    is the 10th?'
  id: totrans-797
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾60](#%28counter._%28figure._fig~3aex~3arandom1%29%29)æ˜¾ç¤ºäº†æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆåœ¨ç»™å®šä¸€äº›[Posn](part_one.html#%28tech._posn%29)åˆ—è¡¨æ—¶ï¼Œå¯¹äº10åˆ—å’Œ20è¡Œæ—¶çš„è¾“å‡ºã€‚æœ€å·¦è¾¹æ˜¯å¹²å‡€çš„è®²å ‚ï¼Œç¬¬äºŒä¸ªæ˜¯åœ¨ä¸¤ä¸ªæ°”çƒå‡»ä¸­åï¼Œæœ€åä¸€ä¸ªæ˜¯éå¸¸ä¸å¯èƒ½çš„10æ¬¡å‡»ä¸­åˆ†å¸ƒã€‚ç¬¬10ä¸ªåœ¨å“ªé‡Œï¼Ÿ'
- en: 9.4Russian Dolls[ğŸ”—](#(part._rd._sec~3ard) "Link to here")
  id: totrans-798
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 9.4ä¿„ç½—æ–¯å¥—å¨ƒ[ğŸ”—](#(part._rd._sec~3ard) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Wikipedia defines a Russian doll as â€œa set of dolls of decreasing sizes placed
    one inside the otherâ€ and illustrates it with this picture:'
  id: totrans-799
  prefs: []
  type: TYPE_NORMAL
  zh: ç»´åŸºç™¾ç§‘å°†ä¿„ç½—æ–¯å¥—å¨ƒå®šä¹‰ä¸ºâ€œä¸€å¥—é€æ¸ç¼©å°çš„å¨ƒå¨ƒï¼Œä¸€ä¸ªå¥—ä¸€ä¸ªåœ°æ”¾ç½®â€ï¼Œå¹¶ç”¨è¿™å¼ å›¾ç‰‡æ¥å±•ç¤ºï¼š
- en: '![](../Images/4e434e9538acf13bb4b1e8e7bd32519c.png)'
  id: totrans-800
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![å›¾ç‰‡](../Images/4e434e9538acf13bb4b1e8e7bd32519c.png)'
- en: In this picture, the dolls are taken apart so that the viewer can see them all.
  id: totrans-801
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™å¼ å›¾ç‰‡ä¸­ï¼Œå¨ƒå¨ƒè¢«æ‹†å¼€ï¼Œä»¥ä¾¿è§‚ä¼—å¯ä»¥çœ‹åˆ°å®ƒä»¬å…¨éƒ¨ã€‚
- en: The problem may strike you as abstract or even absurd; it isnâ€™t clear why you
    would want to represent Russian dolls or what you would do with such a representation.
    Just play along for now.
  id: totrans-802
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: è¿™ä¸ªé—®é¢˜å¯èƒ½è®©ä½ è§‰å¾—æŠ½è±¡ï¼Œç”šè‡³è’è°¬ï¼›ä¸æ¸…æ¥šä½ ä¸ºä»€ä¹ˆè¦è¡¨ç¤ºä¿„ç½—æ–¯å¥—å¨ƒï¼Œæˆ–è€…ä½ ä¼šç”¨è¿™æ ·çš„è¡¨ç¤ºåšä»€ä¹ˆã€‚ç°åœ¨å°±è·Ÿç€ç©å§ã€‚
- en: Now consider the problem of representing such Russian dolls with BSL data. With
    a little bit of imagination, it is easy to see that an artist can create a nest
    of Russian dolls that consists of an arbitrary number of dolls. After all, it
    is always possible to wrap another layer around some given Russian doll. Then
    again, you also know that deep inside there is a solid doll without anything inside.
  id: totrans-803
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è€ƒè™‘ç”¨BSLæ•°æ®è¡¨ç¤ºè¿™æ ·çš„ä¿„ç½—æ–¯å¥—å¨ƒçš„é—®é¢˜ã€‚ç¨åŠ æƒ³è±¡ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹å‡ºï¼Œè‰ºæœ¯å®¶å¯ä»¥åˆ›å»ºä¸€ä¸ªç”±ä»»æ„æ•°é‡çš„å¨ƒå¨ƒç»„æˆçš„ä¿„ç½—æ–¯å¥—å¨ƒã€‚æ¯•ç«Ÿï¼Œæ€»æ˜¯å¯ä»¥åœ¨æŸä¸ªç»™å®šçš„ä¿„ç½—æ–¯å¥—å¨ƒå¤–é¢å†åŒ…è£¹ä¸€å±‚ã€‚å†æ¬¡ï¼Œä½ ä¹ŸçŸ¥é“ï¼Œåœ¨æœ€é‡Œé¢æœ‰ä¸€ä¸ªæ²¡æœ‰ä¸œè¥¿çš„å®å¿ƒå¨ƒå¨ƒã€‚
- en: 'For each layer of a Russian doll, we could care about many different things:
    its size, though it is related to the nesting level; its color; the image that
    is painted on the surface; and so on. Here we just pick one, namely the color
    of the doll, which we represent with a string. Given that, we know that each layer
    of the Russian doll has two properties: its color and the doll that is inside.
    To represent pieces of information with two properties, we always define a structure
    type:'
  id: totrans-804
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºä¿„ç½—æ–¯å¥—å¨ƒçš„æ¯ä¸€å±‚ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå…³å¿ƒè®¸å¤šä¸åŒçš„äº‹æƒ…ï¼šå®ƒçš„å¤§å°ï¼Œå°½ç®¡å®ƒä¸åµŒå¥—çº§åˆ«æœ‰å…³ï¼›å®ƒçš„é¢œè‰²ï¼›ç”»åœ¨è¡¨é¢çš„å›¾åƒï¼›ç­‰ç­‰ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªé€‰æ‹©ä¸€ä¸ªï¼Œå³å¥—å¨ƒçš„é¢œè‰²ï¼Œæˆ‘ä»¬ç”¨å­—ç¬¦ä¸²æ¥è¡¨ç¤ºã€‚é‰´äºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬çŸ¥é“ä¿„ç½—æ–¯å¥—å¨ƒçš„æ¯ä¸€å±‚éƒ½æœ‰ä¸¤ä¸ªå±æ€§ï¼šå®ƒçš„é¢œè‰²å’Œé‡Œé¢çš„å¥—å¨ƒã€‚ä¸ºäº†ç”¨ä¸¤ä¸ªå±æ€§è¡¨ç¤ºä¿¡æ¯ç‰‡æ®µï¼Œæˆ‘ä»¬æ€»æ˜¯å®šä¹‰ä¸€ä¸ªç»“æ„ç±»å‹ï¼š
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â layerÂ [[color](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._color%29%29)Â doll])
  id: totrans-805
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â layerÂ [[color](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._color%29%29)Â doll])
- en: 'And then we add a data definition:'
  id: totrans-806
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ•°æ®å®šä¹‰ï¼š
- en: '| ;Â An RD (short for Russian doll) is one of: |'
  id: totrans-807
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªRDï¼ˆå³ä¿„ç½—æ–¯å¥—å¨ƒï¼‰æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š|'
- en: '| ;Â â€“  [String](part_one.html#%28tech._string%29) |'
  id: totrans-808
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [String](part_one.html#%28tech._string%29) |'
- en: '| ;Â â€“  (make-layer  [String](part_one.html#%28tech._string%29)  [RD](#%28tech._rd._rd%29))
    |'
  id: totrans-809
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  (make-layer  [String](part_one.html#%28tech._string%29)  [RD](#%28tech._rd._rd%29))
    |'
- en: 'Naturally, the first clause of this data definition represents the innermost
    doll, or, to be precise, its color. The second clause is for adding a layer around
    some given Russian doll. We represent this with an instance of layer, which obviously
    contains the color of the doll and one other field: the doll that is nested immediately
    inside of this doll.Take a look at this doll:'
  id: totrans-810
  prefs: []
  type: TYPE_NORMAL
  zh: è‡ªç„¶åœ°ï¼Œè¿™ä¸ªæ•°æ®å®šä¹‰çš„ç¬¬ä¸€ä¸ªå­å¥è¡¨ç¤ºæœ€é‡Œé¢çš„å¥—å¨ƒï¼Œæˆ–è€…æ›´å‡†ç¡®åœ°è¯´ï¼Œå®ƒçš„é¢œè‰²ã€‚ç¬¬äºŒä¸ªå­å¥æ˜¯ä¸ºäº†åœ¨æŸä¸ªç»™å®šçš„ä¿„ç½—æ–¯å¥—å¨ƒå‘¨å›´æ·»åŠ ä¸€å±‚ã€‚æˆ‘ä»¬ç”¨å±‚çš„å®ä¾‹æ¥è¡¨ç¤ºè¿™ä¸€ç‚¹ï¼Œæ˜¾ç„¶å®ƒåŒ…å«å¥—å¨ƒçš„é¢œè‰²å’Œä¸€ä¸ªå…¶ä»–å­—æ®µï¼šè¿™ä¸ªå¥—å¨ƒç«‹å³åµŒå¥—åœ¨è¿™ä¸ªå¥—å¨ƒé‡Œé¢çš„å¥—å¨ƒã€‚çœ‹çœ‹è¿™ä¸ªå¥—å¨ƒï¼š
- en: '![image](../Images/9d595ae0642a527dfb64a6bf293657b5.png)'
  id: totrans-811
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/9d595ae0642a527dfb64a6bf293657b5.png)'
- en: It consists of three dolls. The red one is the innermost one, the green one
    sits in the middle, and the yellow is the current outermost wrapper. To represent
    this doll with an element of [RD](#%28tech._rd._rd%29), you start on either end.
    We proceed from the inside out. The red doll is easy to represent as an [RD](#%28tech._rd._rd%29).
    Since nothing is inside and since it is red, the string "red" will do fine. For
    the second layer, we use
  id: totrans-812
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒç”±ä¸‰ä¸ªå¥—å¨ƒç»„æˆã€‚çº¢è‰²çš„æ˜¯æœ€é‡Œé¢çš„ä¸€ä¸ªï¼Œç»¿è‰²çš„æ˜¯ä¸­é—´çš„ï¼Œé»„è‰²çš„æ˜¯å½“å‰æœ€å¤–å±‚çš„åŒ…è£…ã€‚è¦ç”¨[RD](#%28tech._rd._rd%29)å…ƒç´ è¡¨ç¤ºè¿™ä¸ªå¥—å¨ƒï¼Œä½ ä»ä¸¤ç«¯å¼€å§‹ã€‚æˆ‘ä»¬ä»å†…å‘å¤–è¿›è¡Œã€‚çº¢è‰²å¥—å¨ƒå¾ˆå®¹æ˜“è¡¨ç¤ºä¸º[RD](#%28tech._rd._rd%29)ã€‚å› ä¸ºå®ƒé‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè€Œä¸”æ˜¯çº¢è‰²çš„ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²"red"å°±è¶³å¤Ÿäº†ã€‚å¯¹äºç¬¬äºŒå±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨
- en: (make-layerÂ "green"Â "red")
  id: totrans-813
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (make-layerÂ "green"Â "red")
- en: 'which says that a green (hollow) doll contains a red doll. Finally, to get
    the outside we just wrap another layer around this last doll:'
  id: totrans-814
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™è¡¨ç¤ºä¸€ä¸ªç»¿è‰²çš„ï¼ˆç©ºå¿ƒçš„ï¼‰å¥—å¨ƒåŒ…å«ä¸€ä¸ªçº¢è‰²çš„å¥—å¨ƒã€‚æœ€åï¼Œä¸ºäº†å¾—åˆ°å¤–å±‚å¥—å¨ƒï¼Œæˆ‘ä»¬åªéœ€åœ¨è¿™ä¸ªæœ€åä¸€ä¸ªå¥—å¨ƒå¤–é¢å†åŒ…ä¸Šä¸€å±‚ï¼š
- en: (make-layerÂ "yellow"Â (make-layerÂ "green"Â "red"))
  id: totrans-815
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (make-layerÂ "yellow"Â (make-layerÂ "green"Â "red"))
- en: 'This process should give you a good idea of how to go from any set of colored
    Russian dolls to a data representation. But keep in mind that a programmer must
    also be able to do the converse, that is, go from a piece of data to concrete
    information. In this spirit, draw a schematic Russian doll for the following element
    of [RD](#%28tech._rd._rd%29):'
  id: totrans-816
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè¿‡ç¨‹åº”è¯¥èƒ½ç»™ä½ ä¸€ä¸ªå¾ˆå¥½çš„æƒ³æ³•ï¼Œäº†è§£å¦‚ä½•å°†ä»»ä½•ä¸€ç»„å½©è‰²ä¿„ç½—æ–¯å¥—å¨ƒè½¬æ¢ä¸ºæ•°æ®è¡¨ç¤ºã€‚ä½†è¯·è®°ä½ï¼Œç¨‹åºå‘˜è¿˜å¿…é¡»èƒ½å¤Ÿåšç›¸åçš„äº‹æƒ…ï¼Œå³ä»æ•°æ®åˆ°å…·ä½“ä¿¡æ¯çš„è½¬æ¢ã€‚æœ¬ç€è¿™ä¸ªç²¾ç¥ï¼Œä¸ºä»¥ä¸‹[RD](#%28tech._rd._rd%29)å…ƒç´ ç»˜åˆ¶ä¸€ä¸ªç¤ºæ„å›¾ï¼š
- en: (make-layerÂ "pink"Â (make-layerÂ "black"Â "white"))
  id: totrans-817
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (make-layerÂ "pink"Â (make-layerÂ "black"Â "white"))
- en: 'You might even try this in BSL.Now that we have a data definition and understand
    how to represent actual dolls and how to interpret elements of [RD](#%28tech._rd._rd%29)
    as dolls, we are ready to design functions that consume [RD](#%28tech._rd._rd%29)s.
    Specifically, letâ€™s design the function that counts how many dolls a Russian doll
    set contains. This sentence is a fine purpose statement and determines the signature,
    too:'
  id: totrans-818
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ ç”šè‡³å¯ä»¥å°è¯•åœ¨BSLä¸­åšè¿™ä¸ªã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†æ•°æ®å®šä¹‰ï¼Œå¹¶äº†è§£äº†å¦‚ä½•è¡¨ç¤ºå®é™…çš„å¥—å¨ƒä»¥åŠå¦‚ä½•å°†[RD](#%28tech._rd._rd%29)å…ƒç´ è§£é‡Šä¸ºå¥—å¨ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¾è®¡æ¶ˆè´¹[RD](#%28tech._rd._rd%29)çš„å‡½æ•°äº†ã€‚å…·ä½“æ¥è¯´ï¼Œè®©æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ä¿„ç½—æ–¯å¥—å¨ƒå¥—è£…åŒ…å«å¤šå°‘ä¸ªå¥—å¨ƒã€‚è¿™ä¸ªå¥å­æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç›®çš„é™ˆè¿°ï¼Œä¹Ÿå†³å®šäº†ç­¾åï¼š
- en: '| ;Â [RD](#%28tech._rd._rd%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-819
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [RD](#%28tech._rd._rd%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â how many dolls are part of an-rd |'
  id: totrans-820
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â an-rdä¸­æœ‰å¤šå°‘ä¸ªå¨ƒå¨ƒ |'
- en: 'As for data examples, letâ€™s start with (make-layer  "yellow"  (make-layer  "green"  "red")).
    The image above tells us that 3 is the expected answer because there are three
    dolls: the red one, the green one, and the yellow one. Just working through this
    one example also tells us that when the input is a representation of this doll'
  id: totrans-821
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºæ•°æ®ç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬ä»(make-layer "yellow" (make-layer "green" "red"))å¼€å§‹ã€‚ä¸Šé¢çš„å›¾åƒå‘Šè¯‰æˆ‘ä»¬é¢„æœŸçš„ç­”æ¡ˆæ˜¯3ï¼Œå› ä¸ºæœ‰ä¸‰ä¸ªå¨ƒå¨ƒï¼šçº¢è‰²ã€ç»¿è‰²å’Œé»„è‰²çš„ã€‚ä»…ä»…é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥äº†è§£åˆ°ï¼Œå½“è¾“å…¥æ˜¯è¿™ç§å¨ƒå¨ƒçš„è¡¨ç¤º
- en: '![image](../Images/ebd15aaf5fbc5859f8a5a3b276ce105b.png)'
  id: totrans-822
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/ebd15aaf5fbc5859f8a5a3b276ce105b.png)'
- en: 'then the answer is 1.Step four demands the development of a template. Using
    the standard questions for this step produces this template:'
  id: totrans-823
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆç­”æ¡ˆæ˜¯1ã€‚ç¬¬å››æ­¥éœ€è¦å¼€å‘ä¸€ä¸ªæ¨¡æ¿ã€‚ä½¿ç”¨è¿™ä¸€æ­¥çš„æ ‡å‡†é—®é¢˜äº§ç”Ÿçš„æ¨¡æ¿å¦‚ä¸‹ï¼š
- en: '| ;Â [RD](#%28tech._rd._rd%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-824
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [RD](#%28tech._rd._rd%29) -> [æ•°å­—](part_one.html#%28tech._number%29) |'
- en: '| ;Â how many dolls are a part of an-rd |'
  id: totrans-825
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â an-rdä¸­æœ‰å¤šå°‘ä¸ªå¨ƒå¨ƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (depthÂ an-rd)
    |'
  id: totrans-826
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (depthÂ an-rd)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-827
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â an-rd)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-828
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([å­—ç¬¦ä¸²?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â an-rd)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [(layer?Â an-rd) |'
  id: totrans-829
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [(å±‚?Â an-rd) |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (layer-colorÂ an-rd)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-830
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (layer-colorÂ an-rd)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (depthÂ (layer-dollÂ an-rd))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-831
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (depthÂ (layer-dollÂ an-rd))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'The number of [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses is determined by the number of clauses in the definition of [RD](#%28tech._rd._rd%29).
    Each of the clauses specifically spells out what kind of data it is about, and
    that tells us to use the [string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)
    and layer? predicates. While strings arenâ€™t compound data, instances of layer
    contain two values. If the function needs these values, it uses the selector expressions
    (layer-color  an-rd) and (layer-doll  an-rd). Finally, the second clause of the
    data definition contains a self-reference from the doll field of the layer structure
    to the definition itself. Hence we need a recursive function call for the second
    selector expression.The examples and the template almost dictate the function
    definition. For the non-recursive [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause, the answer is obviously 1. For the recursive clause, the template expressions
    compute the following results:'
  id: totrans-832
  prefs: []
  type: TYPE_NORMAL
  zh: '[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥çš„æ•°é‡ç”± [RD](#%28tech._rd._rd%29) å®šä¹‰ä¸­çš„å­å¥æ•°é‡å†³å®šã€‚æ¯ä¸ªå­å¥å…·ä½“è¯´æ˜äº†å®ƒå…³äºä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œè¿™å‘Šè¯‰æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ [string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)
    å’Œ layer? æ–­è¨€ã€‚è™½ç„¶å­—ç¬¦ä¸²ä¸æ˜¯å¤åˆæ•°æ®ï¼Œä½† layer çš„å®ä¾‹åŒ…å«ä¸¤ä¸ªå€¼ã€‚å¦‚æœå‡½æ•°éœ€è¦è¿™äº›å€¼ï¼Œå®ƒå°†ä½¿ç”¨é€‰æ‹©è¡¨è¾¾å¼ (layer-color  an-rd)
    å’Œ (layer-doll  an-rd)ã€‚æœ€åï¼Œæ•°æ®å®šä¹‰çš„ç¬¬äºŒå­å¥åŒ…å«ä»å±‚ç»“æ„ä¸­å¨ƒå¨ƒå­—æ®µåˆ°å®šä¹‰æœ¬èº«çš„è‡ªæˆ‘å¼•ç”¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç¬¬äºŒä¸ªé€‰æ‹©è¡¨è¾¾å¼è¿›è¡Œé€’å½’å‡½æ•°è°ƒç”¨ã€‚ç¤ºä¾‹å’Œæ¨¡æ¿å‡ ä¹è§„å®šäº†å‡½æ•°å®šä¹‰ã€‚å¯¹äºéé€’å½’çš„
    [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥ï¼Œç­”æ¡ˆæ˜¾ç„¶æ˜¯ 1ã€‚å¯¹äºé€’å½’å­å¥ï¼Œæ¨¡æ¿è¡¨è¾¾å¼è®¡ç®—ä»¥ä¸‹ç»“æœï¼š'
- en: (layer-color  an-rd) extracts the string that describes the color of the current
    layer;
  id: totrans-833
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (layer-color  an-rd) æå–æè¿°å½“å‰å±‚é¢œè‰²çš„å­—ç¬¦ä¸²ï¼›
- en: (layer-doll  an-rd) extracts the doll contained within the current layer; and
  id: totrans-834
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (layer-doll  an-rd) æå–å½“å‰å±‚åŒ…å«çš„å¨ƒå¨ƒï¼›å¹¶ä¸”
- en: (depth  (layer-doll  an-rd)) determines how many dolls are part of (layer-doll  an-rd),
    according to the purpose statement of depth.
  id: totrans-835
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (depth  (layer-doll  an-rd)) æ ¹æ®æ·±åº¦ç›®çš„è¯´æ˜ç¡®å®š (layer-doll  an-rd) ä¸­æœ‰å¤šå°‘ä¸ªå¨ƒå¨ƒï¼›
- en: 'This last number is almost the desired answer but not quite because the difference
    between an-rd and (layer-doll  an-rd) is one layer, meaning one extra doll. Put
    differently, the function must add 1 to the recursive result to obtain the actual
    answer:'
  id: totrans-836
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæœ€åçš„æ•°å­—å‡ ä¹å°±æ˜¯æœŸæœ›çš„ç­”æ¡ˆï¼Œä½†å¹¶ä¸å®Œå…¨å‡†ç¡®ï¼Œå› ä¸º an-rd å’Œ (layer-doll  an-rd) ä¹‹é—´çš„å·®å¼‚æ˜¯ä¸€ä¸ªå±‚ï¼Œæ„å‘³ç€å¤šäº†ä¸€ä¸ªå¨ƒå¨ƒã€‚æ¢å¥è¯è¯´ï¼Œå‡½æ•°å¿…é¡»å°†
    1 åŠ åˆ°é€’å½’ç»“æœä¸Šæ‰èƒ½å¾—åˆ°å®é™…ç­”æ¡ˆï¼š
- en: '| ;Â [RD](#%28tech._rd._rd%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-837
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [RD](#%28tech._rd._rd%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â how many dolls are a part of an-rd |'
  id: totrans-838
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â an-rd ä¸­æœ‰å¤šå°‘ä¸ªå¨ƒå¨ƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (depthÂ an-rd)
    |'
  id: totrans-839
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (depthÂ an-rd)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-840
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â an-rd)Â 1]
    |'
  id: totrans-841
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â an-rd)Â 1]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (depthÂ (layer-dollÂ an-rd))Â 1)]))
    |'
  id: totrans-842
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (depthÂ (layer-dollÂ an-rd))Â 1)]))
    |'
- en: 'Note how the function definition does not use (layer-color  an-rd) in the second
    clause. Once again, we see that the template is an organization schema for everything
    we know about the data definition, but we may not need all of these pieces for
    the actual definition.Letâ€™s finally translate the examples into tests:'
  id: totrans-843
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„å‡½æ•°å®šä¹‰åœ¨ç¬¬äºŒä¸ªå­å¥ä¸­æ²¡æœ‰ä½¿ç”¨ (layer-color  an-rd)ã€‚å†æ¬¡çœ‹åˆ°æ¨¡æ¿æ˜¯æˆ‘ä»¬æ‰€çŸ¥é“çš„æ•°æ®å®šä¹‰çš„ç»„ç»‡æ¶æ„ï¼Œä½†æˆ‘ä»¬å¯èƒ½ä¸éœ€è¦æ‰€æœ‰è¿™äº›éƒ¨åˆ†æ¥è¿›è¡Œå®é™…å®šä¹‰ã€‚è®©æˆ‘ä»¬æœ€ç»ˆå°†ç¤ºä¾‹ç¿»è¯‘æˆæµ‹è¯•ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (depthÂ "red")Â 1)
    |'
  id: totrans-844
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (depthÂ "red")Â 1)
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-845
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (depth |'
  id: totrans-846
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (depth |'
- en: '| Â Â Â (make-layerÂ "yellow"Â (make-layerÂ "green"Â "red"))) |'
  id: totrans-847
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â (make-layerÂ "yellow"Â (make-layerÂ "green"Â "red"))) |'
- en: '| Â Â 3) |'
  id: totrans-848
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â 3) |'
- en: If you run these in DrRacket, you will see that their evaluation touches all
    pieces of the definition of depth.ExerciseÂ 154\. Design the function colors. It
    consumes a Russian doll and produces a string of all colors, separated by a comma
    and a space. Thus our example should produce
  id: totrans-849
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ å°†è¿™äº›ä»£ç åœ¨DrRacketä¸­è¿è¡Œï¼Œä½ ä¼šçœ‹åˆ°å®ƒä»¬çš„è¯„ä¼°æ¶‰åŠåˆ°æ·±åº¦å®šä¹‰çš„æ‰€æœ‰éƒ¨åˆ†ã€‚ç»ƒä¹ 154ã€‚è®¾è®¡ä¸€ä¸ªåä¸ºcolorsçš„å‡½æ•°ã€‚å®ƒæ¥å—ä¸€ä¸ªä¿„ç½—æ–¯å¥—å¨ƒï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªç”±é€—å·å’Œç©ºæ ¼åˆ†éš”çš„é¢œè‰²å­—ç¬¦ä¸²ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹åº”è¯¥ç”Ÿæˆ
- en: '"yellow, green, red"'
  id: totrans-850
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '"é»„è‰²ï¼Œç»¿è‰²ï¼Œçº¢è‰²"'
- en: ExerciseÂ 155\. Design the function inner, which consumes an [RD](#%28tech._rd._rd%29)
    and produces the (color of the) innermost doll. Use DrRacketâ€™s stepper to evaluate
    (inner  rd) for your favorite rd.
  id: totrans-851
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 155ã€‚è®¾è®¡ä¸€ä¸ªåä¸ºinnerçš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª[RD](#%28tech._rd._rd%29)å¹¶äº§ç”Ÿæœ€å†…å±‚å¨ƒå¨ƒçš„é¢œè‰²ã€‚ä½¿ç”¨DrRacketçš„æ­¥è¿›å™¨è¯„ä¼°(inner
    rd)ä»¥ä½ çš„é¦–é€‰rdã€‚
- en: 9.5Lists and World[ğŸ”—](#(part._sec~3alist-world) "Link to here")
  id: totrans-852
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 9.5 åˆ—è¡¨å’Œä¸–ç•Œ[ğŸ”—](#(part._sec~3alist-world) "é“¾æ¥åˆ°æ­¤å¤„")
- en: With lists and self-referential data definitions in general, you can design
    and run many more interesting world programs than with finite data. Just imagine
    you can now create a version of the space invader program from [Itemizations and
    Structures](part_one.html#%28part._ch~3amix%29) that allows the player to fire
    as many shots from the tank as desired. Letâ€™s start with a simplistic version
    of this problem:If you havenâ€™t designed a world program in a while, reread [Designing
    World Programs](part_one.html#%28part._.D.K._sec~3adesign-world%29).
  id: totrans-853
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨åˆ—è¡¨å’Œè‡ªå¼•ç”¨æ•°æ®å®šä¹‰ï¼Œä½ å¯ä»¥è®¾è®¡å¹¶è¿è¡Œæ¯”æœ‰é™æ•°æ®æ›´å¤šçš„æœ‰è¶£ä¸–ç•Œç¨‹åºã€‚åªéœ€æƒ³è±¡ä½ ç°åœ¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¥è‡ª[é¡¹ç›®åŒ–å’Œç»“æ„](part_one.html#%28part._ch~3amix%29)çš„ç©ºé—´å…¥ä¾µè€…ç¨‹åºçš„ç‰ˆæœ¬ï¼Œå…è®¸ç©å®¶ä»å¦å…‹ä¸­å‘å°„ä»»æ„æ•°é‡çš„å­å¼¹ã€‚è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„é—®é¢˜å¼€å§‹ï¼šå¦‚æœä½ æœ‰ä¸€æ®µæ—¶é—´æ²¡æœ‰è®¾è®¡ä¸–ç•Œç¨‹åºäº†ï¼Œè¯·é‡æ–°é˜…è¯»[è®¾è®¡ä¸–ç•Œç¨‹åº](part_one.html#%28part._.D.K._sec~3adesign-world%29)ã€‚
- en: Sample Problem Design a world program that simulates firing shots. Every time
    the â€œplayerâ€ hits the space bar, the program adds a shot to the bottom of the
    canvas. These shots rise vertically at the rate of one pixel per tick.
  id: totrans-854
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·ä¾‹é—®é¢˜ è®¾è®¡ä¸€ä¸ªæ¨¡æ‹Ÿå°„å‡»çš„ä¸–ç•Œç¨‹åºã€‚æ¯æ¬¡â€œç©å®¶â€æŒ‰ä¸‹ç©ºæ ¼é”®ï¼Œç¨‹åºå°±ä¼šåœ¨ç”»å¸ƒåº•éƒ¨æ·»åŠ ä¸€é¢—å­å¼¹ã€‚è¿™äº›å­å¼¹ä»¥æ¯æ»´ç­”ä¸€ä¸ªåƒç´ çš„é€Ÿåº¦å‚ç›´ä¸Šå‡ã€‚
- en: 'Designing a world program starts with a separation of information into constants
    and elements of the ever-changing state of the world. For the former we introduce
    physical and graphical constants; for the latter we need to develop a data representation
    for world states. While the sample problem is relatively vague about the specifics,
    it clearly assumes a rectangular scenery with shots painted along a vertical line.
    Obviously the locations of the shots change with every clock tick, but the size
    of the scenery and x-coordinate of the line of shots remain the same:'
  id: totrans-855
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸–ç•Œç¨‹åºå¼€å§‹äºå°†ä¿¡æ¯åˆ†ä¸ºå¸¸é‡å’Œä¸–ç•Œä¸æ–­å˜åŒ–çš„çŠ¶æ€çš„å…ƒç´ ã€‚å¯¹äºå‰è€…ï¼Œæˆ‘ä»¬å¼•å…¥ç‰©ç†å’Œå›¾å½¢å¸¸é‡ï¼›å¯¹äºåè€…ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºä¸–ç•ŒçŠ¶æ€å¼€å‘æ•°æ®è¡¨ç¤ºã€‚è™½ç„¶æ ·ä¾‹é—®é¢˜åœ¨å…·ä½“ç»†èŠ‚ä¸Šç›¸å¯¹æ¨¡ç³Šï¼Œä½†å®ƒæ˜æ˜¾å‡è®¾æœ‰ä¸€ä¸ªçŸ©å½¢åœºæ™¯ï¼Œå­å¼¹æ²¿ç€å‚ç›´çº¿ç»˜åˆ¶ã€‚æ˜¾ç„¶ï¼Œå­å¼¹çš„ä½ç½®ä¼šéšç€æ¯ä¸ªæ—¶é’Ÿæ»´ç­”è€Œæ”¹å˜ï¼Œä½†åœºæ™¯çš„å¤§å°å’Œå­å¼¹çº¿çš„xåæ ‡ä¿æŒä¸å˜ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ 80)Â ;Â distances
    in terms of pixels |'
  id: totrans-856
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ 80)Â ;Â ä»¥åƒç´ ä¸ºå•ä½çš„è·ç¦»
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 100)
    |'
  id: totrans-857
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 100)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â XSHOTSÂ ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â WIDTHÂ 2))
    |'
  id: totrans-858
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â XSHOTSÂ ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â WIDTHÂ 2))
    |'
- en: '| Â  |'
  id: totrans-859
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â graphical constants |'
  id: totrans-860
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å›¾å½¢å¸¸é‡ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â BACKGROUNDÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHT))
    |'
  id: totrans-861
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    èƒŒæ™¯ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)
    å®½åº¦ é«˜åº¦)) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â SHOTÂ ([triangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._triangle%29%29)Â 3Â "solid"Â "red"))
    |'
  id: totrans-862
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    å°„å‡» ([triangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._triangle%29%29)
    3 "solid" "red")) |'
- en: 'Nothing in the problem statement demands these particular choices, but as long
    as they are easy to changeâ€”<wbr>meaning changing by editing a single definitionâ€”<wbr>we
    have achieved our goal.As for those aspects of the â€œworldâ€ that change, the problem
    statement mentions two. First, hitting the space bar adds a shot. Second, all
    the shots move straight up by one pixel per clock tick. Given that we cannot predict
    how many shots the player will â€œfire,â€ we use a list to represent them:'
  id: totrans-863
  prefs: []
  type: TYPE_NORMAL
  zh: é—®é¢˜é™ˆè¿°ä¸­æ²¡æœ‰è¦æ±‚è¿™äº›ç‰¹å®šçš„é€‰æ‹©ï¼Œä½†åªè¦å®ƒä»¬å®¹æ˜“æ›´æ”¹â€”â€”æ„å‘³ç€é€šè¿‡ç¼–è¾‘å•ä¸ªå®šä¹‰æ¥æ›´æ”¹â€”â€”æˆ‘ä»¬å°±è¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®æ ‡ã€‚è‡³äºâ€œä¸–ç•Œâ€ä¸­é‚£äº›ä¼šå˜åŒ–çš„éƒ¨åˆ†ï¼Œé—®é¢˜é™ˆè¿°æåˆ°äº†ä¸¤ç‚¹ã€‚é¦–å…ˆï¼ŒæŒ‰ä¸‹ç©ºæ ¼é”®ä¼šæ·»åŠ ä¸€ä¸ªå°„å‡»ã€‚å…¶æ¬¡ï¼Œæ‰€æœ‰å°„å‡»åœ¨æ¯ä¸ªæ—¶é’Ÿæ»´ç­”æ—¶å‘ä¸Šç§»åŠ¨ä¸€ä¸ªåƒç´ ã€‚é‰´äºæˆ‘ä»¬æ— æ³•é¢„æµ‹ç©å®¶ä¼šâ€œå‘å°„â€å¤šå°‘å°„å‡»ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ—è¡¨æ¥è¡¨ç¤ºå®ƒä»¬ï¼š
- en: '| ;Â A List-of-shots is one of: |'
  id: totrans-864
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°„å‡»åˆ—è¡¨æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“  ''() |'
  id: totrans-865
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Shot](#%28tech._shot%29)  [List-of-shots](#%28tech._list._of._shot%29))
    |'
  id: totrans-866
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Shot](#%28tech._shot%29)  [å°„å‡»åˆ—è¡¨](#%28tech._list._of._shot%29))
    |'
- en: '| ;Â interpretation the collection of shots fired |'
  id: totrans-867
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation å°„å‡»çš„é›†åˆ |'
- en: 'The one remaining question is how to represent each individual shot. We already
    know that all of them have the same x-coordinate and that this coordinate stays
    the same throughout. Furthermore, all shots look alike. Hence, their y-coordinates
    are the only property in which they differ from each other. It therefore suffices
    to represent each shot as a number:'
  id: totrans-868
  prefs: []
  type: TYPE_NORMAL
  zh: å‰©ä¸‹çš„ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚ä½•è¡¨ç¤ºæ¯ä¸ªå•ç‹¬çš„å°„å‡»ã€‚æˆ‘ä»¬å·²ç»çŸ¥é“å®ƒä»¬éƒ½å…·æœ‰ç›¸åŒçš„ x åæ ‡ï¼Œå¹¶ä¸”è¿™ä¸ªåæ ‡åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ä¿æŒä¸å˜ã€‚æ­¤å¤–ï¼Œæ‰€æœ‰å°„å‡»çœ‹èµ·æ¥éƒ½ä¸€æ ·ã€‚å› æ­¤ï¼Œå®ƒä»¬çš„
    y åæ ‡æ˜¯å®ƒä»¬ä¹‹é—´å”¯ä¸€ä¸åŒçš„å±æ€§ã€‚å› æ­¤ï¼Œåªéœ€è¦å°†æ¯ä¸ªå°„å‡»è¡¨ç¤ºä¸ºä¸€ä¸ªæ•°å­—ï¼š
- en: '| ;Â A Shot is a [Number](part_one.html#%28tech._number%29). |'
  id: totrans-869
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Shot æ˜¯ä¸€ä¸ª [æ•°å­—](part_one.html#%28tech._number%29)ã€‚ |'
- en: '| ;Â interpretation represents the shot''s y-coordinate |'
  id: totrans-870
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation è¡¨ç¤ºå°„å‡»çš„ y åæ ‡ |'
- en: 'We could restrict the representation of shots to the interval of numbers below
    HEIGHT because we know that all shots are launched from the bottom of the canvas
    and that they then move up, meaning their y-coordinate continuously decreases.You
    can also use a data definition like this to represent this world:'
  id: totrans-871
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥å°†å°„å‡»çš„è¡¨ç¤ºé™åˆ¶åœ¨é«˜åº¦ä»¥ä¸‹æ•°å­—çš„åŒºé—´å†…ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“æ‰€æœ‰å°„å‡»éƒ½æ˜¯ä»ç”»å¸ƒåº•éƒ¨å‘å°„çš„ï¼Œç„¶åå‘ä¸Šç§»åŠ¨ï¼Œè¿™æ„å‘³ç€å®ƒä»¬çš„ y åæ ‡æŒç»­å‡å°‘ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„æ•°æ®å®šä¹‰æ¥è¡¨ç¤ºè¿™ä¸ªä¸–ç•Œï¼š
- en: '| ;Â A ShotWorld is [List-of-numbers](#%28tech._list._of._number%29). |'
  id: totrans-872
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ShotWorld æ˜¯ [æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29)ã€‚ |'
- en: '| ;Â interpretation each number on such a list |'
  id: totrans-873
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation è§£é‡Šåˆ—è¡¨ä¸­çš„æ¯ä¸ªæ•°å­— |'
- en: '| ;Â Â Â represents the y-coordinate of a shot |'
  id: totrans-874
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â è¡¨ç¤ºå°„å‡»çš„ y åæ ‡ |'
- en: 'After all, the above two definitions describe all list of numbers; we already
    have a definition for lists of numbers, and the name [ShotWorld](#%28tech._shotworld%29)
    tells everyone what this class of data is about.Once you have defined constants
    and developed a data representation for the states of the world, the key task
    is to pick which event handlers you wish to employ and to adapt their signatures
    to the given problem. The running example mentions clock ticks and the space bar,
    all of which translates into a wish list of three functions:'
  id: totrans-875
  prefs: []
  type: TYPE_NORMAL
  zh: æ€»çš„æ¥è¯´ï¼Œä¸Šè¿°ä¸¤ä¸ªå®šä¹‰æè¿°äº†æ‰€æœ‰æ•°å­—åˆ—è¡¨ï¼›æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæ•°å­—åˆ—è¡¨çš„å®šä¹‰ï¼Œå¹¶ä¸”åç§° [ShotWorld](#%28tech._shotworld%29)
    å‘Šè¯‰äº†æ¯ä¸ªäººè¿™ç±»æ•°æ®æ˜¯å…³äºä»€ä¹ˆçš„ã€‚ä¸€æ—¦å®šä¹‰äº†å¸¸é‡å¹¶å¼€å‘äº†ä¸–ç•ŒçŠ¶æ€çš„è¡¨ç¤ºï¼Œå…³é”®ä»»åŠ¡å°±æ˜¯é€‰æ‹©ä½ å¸Œæœ›ä½¿ç”¨çš„å¤„ç†ç¨‹åºï¼Œå¹¶å°†å®ƒä»¬çš„ç­¾åé€‚åº”ç»™å®šçš„é—®é¢˜ã€‚è¿è¡Œç¤ºä¾‹æåˆ°äº†æ—¶é’Ÿæ»´ç­”å£°å’Œç©ºæ ¼é”®ï¼Œè¿™äº›éƒ½è½¬åŒ–ä¸ºä¸‰ä¸ªå‡½æ•°çš„æ„¿æœ›æ¸…å•ï¼š
- en: 'the function that turns a world state into an image:'
  id: totrans-876
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å°†ä¸–ç•ŒçŠ¶æ€è½¬æ¢ä¸ºå›¾åƒçš„å‡½æ•°ï¼š
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-877
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â adds the image of a shot for eachÂ Â y on w |'
  id: totrans-878
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨ä¸–ç•Œçš„æ¯ä¸ªyåæ ‡ä¸Šæ·»åŠ ä¸€ä¸ªå°„å‡»çš„å›¾åƒ |'
- en: '| ;Â at (MID,y) to the background image |'
  id: totrans-879
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨(MID,y)å¤„å°†æ•°æ®è½¬æ¢ä¸ºèƒŒæ™¯å›¾åƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (to-imageÂ w)Â BACKGROUND)
    |'
  id: totrans-880
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (to-imageÂ w)Â BACKGROUND)
    |'
- en: because the problem demands a visual rendering;
  id: totrans-881
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å› ä¸ºé—®é¢˜éœ€è¦è§†è§‰æ¸²æŸ“ï¼›
- en: 'one for dealing with tick events:'
  id: totrans-882
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªç”¨äºå¤„ç†tickäº‹ä»¶çš„ï¼š
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [ShotWorld](#%28tech._shotworld%29)
    |'
  id: totrans-883
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [ShotWorld](#%28tech._shotworld%29)
    |'
- en: '| ;Â moves each shot on w up by one pixel |'
  id: totrans-884
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†ä¸–ç•Œä¸­çš„æ¯ä¸ªå°„å‡»å‘ä¸Šç§»åŠ¨ä¸€ä¸ªåƒç´  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tockÂ w)Â w)
    |'
  id: totrans-885
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tockÂ w)Â w)
    |'
- en: 'and one function for dealing with key events:'
  id: totrans-886
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¹¶ä¸”ä¸€ä¸ªç”¨äºå¤„ç†æŒ‰é”®äº‹ä»¶çš„å‡½æ•°ï¼š
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [ShotWorld](#%28tech._shotworld%29) |'
  id: totrans-887
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [ShotWorld](#%28tech._shotworld%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [ShotWorld](#%28tech._shotworld%29) |'
- en: '| ;Â adds a shot to the world |'
  id: totrans-888
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å‘ä¸–ç•Œä¸­æ·»åŠ ä¸€ä¸ªå°„å‡» |'
- en: '| ;Â if the player presses the space bar |'
  id: totrans-889
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœç©å®¶æŒ‰ä¸‹ç©ºæ ¼é”® |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (keyhÂ wÂ ke)Â w)
    |'
  id: totrans-890
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (keyhÂ wÂ ke)Â w)
    |'
- en: 'Donâ€™t forget that in addition to the initial wish list, you also need to define
    a main function that actually sets up the world and installs the handlers. [FigureÂ 61](#%28counter._%28figure._fig~3ashots%29%29)
    includes this one function that is not designed but defined as a modification
    of standard schema.Letâ€™s start with the design of to-image. We have its signature,
    purpose statement, and header, so we need examples next. Since the data definition
    has two clauses, there should be at least two examples: ''() and a [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    list, say, ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  9  ''()).
    The expected result for ''() is obviously BACKGROUND; if there is a y-coordinate,
    though, the function must place the image of a shot at MID and the specified coordinate:'
  id: totrans-891
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸è¦å¿˜è®°ï¼Œé™¤äº†åˆå§‹æ„¿æœ›åˆ—è¡¨ä¹‹å¤–ï¼Œä½ è¿˜éœ€è¦å®šä¹‰ä¸€ä¸ªä¸»å‡½æ•°ï¼Œè¯¥å‡½æ•°å®é™…ä¸Šè®¾ç½®ä¸–ç•Œå¹¶å®‰è£…å¤„ç†ç¨‹åºã€‚[å›¾61](#%28counter._%28figure._fig~3ashots%29%29)åŒ…æ‹¬è¿™ä¸ªæœªè®¾è®¡ä½†ä½œä¸ºæ ‡å‡†æ¨¡å¼ä¿®æ”¹çš„å‡½æ•°ã€‚è®©æˆ‘ä»¬ä»to-imageçš„è®¾è®¡å¼€å§‹ã€‚æˆ‘ä»¬å·²ç»æœ‰å®ƒçš„ç­¾åã€ç›®çš„å£°æ˜å’Œå¤´æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¾‹å­ã€‚ç”±äºæ•°æ®å®šä¹‰æœ‰ä¸¤ä¸ªå­å¥ï¼Œåº”è¯¥è‡³å°‘æœ‰ä¸¤ä¸ªä¾‹å­ï¼š'()å’Œä¸€ä¸ª[åˆå¹¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)åˆ—è¡¨ï¼Œæ¯”å¦‚([åˆå¹¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    9  '())ã€‚å¯¹äº'()çš„é¢„æœŸç»“æœæ˜¾ç„¶æ˜¯BACKGROUNDï¼›å¦‚æœæœ‰yåæ ‡ï¼Œé‚£ä¹ˆå‡½æ•°å¿…é¡»åœ¨MIDå’ŒæŒ‡å®šçš„åæ ‡å¤„æ”¾ç½®å°„å‡»çš„å›¾åƒï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (to-imageÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 9Â ''()))
    |'
  id: totrans-892
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (to-imageÂ ([åˆå¹¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 9Â ''()))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â SHOTÂ XSHOTSÂ 9Â BACKGROUND))
    |'
  id: totrans-893
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([æ”¾ç½®å›¾åƒ](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â SHOTÂ XSHOTSÂ 9Â BACKGROUND))
    |'
- en: 'Before you read on, work through an example that applies to-image to a list
    of two [Shot](#%28tech._shot%29)s. Doing so helps understand how the function
    works.The fourth step is about translating the data definition into a template:'
  id: totrans-894
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œè¯·é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥åº”ç”¨to-imageåˆ°ä¸€ä¸ªåŒ…å«ä¸¤ä¸ª[å°„å‡»](#%28tech._shot%29)çš„åˆ—è¡¨ä¸Šã€‚è¿™æ ·åšæœ‰åŠ©äºç†è§£å‡½æ•°çš„å·¥ä½œåŸç†ã€‚ç¬¬å››æ­¥æ˜¯å°†æ•°æ®å®šä¹‰è½¬æ¢ä¸ºæ¨¡æ¿ï¼š
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-895
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (to-imageÂ w)
    |'
  id: totrans-896
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (to-imageÂ w)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-897
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-898
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    w) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-899
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (to-imageÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-900
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    w) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    (to-image ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    w)) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'The template for data definitions for lists is so familiar now that it doesnâ€™t
    need much explanation. If you have any doubts, read over the questions in [figureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29)
    and design the template on your own.From here it is straightforward to define
    the function. The key is to combine the examples with the template and to answer
    the questions from [figureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29).
    Following those, you start with the base case of an empty list of shots, and,
    from the examples, you know that the expected answer is BACKGROUND. Next you formulate
    what the template expressions in the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    compute:'
  id: totrans-901
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ—è¡¨æ•°æ®å®šä¹‰çš„æ¨¡æ¿ç°åœ¨éå¸¸ç†Ÿæ‚‰ï¼Œå› æ­¤ä¸éœ€è¦å¤ªå¤šè§£é‡Šã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·é˜…è¯» [å›¾52](#%28counter._%28figure._fig~3atemplate-q%29%29)
    ä¸­çš„é—®é¢˜ï¼Œå¹¶è‡ªè¡Œè®¾è®¡æ¨¡æ¿ã€‚ä»è¿™é‡Œå¼€å§‹ï¼Œå®šä¹‰å‡½æ•°å°±å¾ˆç®€å•äº†ã€‚å…³é”®æ˜¯ç»“åˆç¤ºä¾‹å’Œæ¨¡æ¿ï¼Œå¹¶å›ç­” [å›¾53](#%28counter._%28figure._fig~3adefinition-q%29%29)
    ä¸­çš„é—®é¢˜ã€‚æŒ‰ç…§è¿™äº›æ­¥éª¤ï¼Œæ‚¨ä»ç©ºå°„å‡»åˆ—è¡¨çš„åŸºç¡€æƒ…å†µå¼€å§‹ï¼Œå¹¶ä¸”ä»ç¤ºä¾‹ä¸­çŸ¥é“é¢„æœŸçš„ç­”æ¡ˆæ˜¯ BACKGROUNDã€‚æ¥ä¸‹æ¥ï¼Œæ‚¨ç¡®å®šç¬¬äºŒä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    è¡¨è¾¾å¼è®¡ç®—çš„å†…å®¹ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  w)
    extracts the first coordinate from the list;
  id: totrans-902
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    w) ä»åˆ—è¡¨ä¸­æå–ç¬¬ä¸€ä¸ªåæ ‡ï¼›
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  w)
    is the rest of the coordinates; and
  id: totrans-903
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    w) æ˜¯åæ ‡çš„å…¶ä½™éƒ¨åˆ†ï¼›å¹¶ä¸”
- en: (to-image  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  w))
    adds each shot on ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  w)
    to the background image, according to the purpose statement of to-image.
  id: totrans-904
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (to-image ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    w)) å°† ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    w) ä¸Šçš„æ¯ä¸€å¸§æ·»åŠ åˆ°èƒŒæ™¯å›¾åƒä¸­ï¼Œæ ¹æ® to-image çš„ç›®çš„å£°æ˜ã€‚
- en: 'In other words, (to-image  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  w))
    renders the rest of the list as an image and thus performs almost all the work.
    What is missing is the first shot, ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  w).
    If you now apply the purpose statement to these two expressions, you get the desired
    expression for the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause:'
  id: totrans-905
  prefs: []
  type: TYPE_NORMAL
  zh: æ¢å¥è¯è¯´ï¼Œ`(to-image  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  w))`å°†åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†æ¸²æŸ“ä¸ºå›¾åƒï¼Œå› æ­¤æ‰§è¡Œäº†å‡ ä¹æ‰€æœ‰çš„å·¥ä½œã€‚ç¼ºå°‘çš„æ˜¯ç¬¬ä¸€ä¸ªå°„å‡»ï¼Œ`([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  w)`ã€‚å¦‚æœä½ ç°åœ¨å°†è¿™äº›ç›®çš„è¯´æ˜åº”ç”¨äºè¿™ä¸¤ä¸ªè¡¨è¾¾å¼ï¼Œä½ å°†å¾—åˆ°ç¬¬äºŒä¸ª[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)å­å¥æ‰€éœ€çš„è¡¨è¾¾å¼ï¼š
- en: '| ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â SHOTÂ XSHOTSÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)
    |'
  id: totrans-906
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â SHOTÂ XSHOTSÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â (to-imageÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))
    |'
  id: totrans-907
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â (to-imageÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))
    |'
- en: The added icon is the standard image for a shot; the two coordinates are spelled
    out in the purpose statement; and the last argument to [place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)
    is the image constructed from the rest of the list.
  id: totrans-908
  prefs: []
  type: TYPE_NORMAL
  zh: æ·»åŠ çš„å›¾æ ‡æ˜¯å°„å‡»çš„æ ‡å‡†å›¾åƒï¼›ä¸¤ä¸ªåæ ‡åœ¨ç›®çš„è¯´æ˜ä¸­æ˜ç¡®æŒ‡å‡ºï¼›[place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ç”±åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†æ„å»ºçš„å›¾åƒã€‚
- en: '[FigureÂ 61](#%28counter._%28figure._fig~3ashots%29%29) displays the complete
    function definition for to-image and indeed the rest of the program, too. The
    design of tock is just like the design of to-image, and you should work through
    it for yourself. The signature of the keyh handler, though, poses one interesting
    question. It specifies that the handler consumes two inputs with nontrivial data
    definitions. On the one hand, the [ShotWorld](#%28tech._shotworld%29) is a self-referential
    data definition. On the other hand, the definition for [KeyEvent](part_one.html#%28tech._keyevent%29)s
    is a large enumeration. For now, we have you â€œguessâ€ which of the two arguments
    should drive the development of the template; later we will study such cases in
    depth.'
  id: totrans-909
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾61](#%28counter._%28figure._fig~3ashots%29%29)æ˜¾ç¤ºäº†`to-image`å‡½æ•°çš„å®Œæ•´å‡½æ•°å®šä¹‰ï¼Œä»¥åŠæ•´ä¸ªç¨‹åºçš„å…¶ä½™éƒ¨åˆ†ã€‚`tock`çš„è®¾è®¡ä¸`to-image`çš„è®¾è®¡ç±»ä¼¼ï¼Œä½ åº”è¯¥äº²è‡ªå°è¯•ç†è§£å®ƒã€‚ä¸è¿‡ï¼Œé”®å¤„ç†ç¨‹åº`keyh`çš„ç­¾åæå‡ºäº†ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ã€‚å®ƒæŒ‡å®šå¤„ç†ç¨‹åºæ¶ˆè€—ä¸¤ä¸ªå…·æœ‰éå¹³å‡¡æ•°æ®å®šä¹‰çš„è¾“å…¥ã€‚ä¸€æ–¹é¢ï¼Œ[ShotWorld](#%28tech._shotworld%29)æ˜¯ä¸€ä¸ªè‡ªå¼•ç”¨çš„æ•°æ®å®šä¹‰ã€‚å¦ä¸€æ–¹é¢ï¼Œ[KeyEvent](part_one.html#%28tech._keyevent%29)çš„å®šä¹‰æ˜¯ä¸€ä¸ªå¤§çš„æšä¸¾ã€‚ç›®å‰ï¼Œæˆ‘ä»¬è®©ä½ â€œçŒœæµ‹â€ä¸¤ä¸ªå‚æ•°ä¸­å“ªä¸€ä¸ªåº”è¯¥é©±åŠ¨æ¨¡æ¿çš„å¼€å‘ï¼›ç¨åæˆ‘ä»¬å°†æ·±å…¥ç ”ç©¶æ­¤ç±»æ¡ˆä¾‹ã€‚'
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [ShotWorld](#%28tech._shotworld%29)
    |'
  id: totrans-910
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [ShotWorld](#%28tech._shotworld%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ w0)
    |'
  id: totrans-911
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ w0)
    |'
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â w0
    |'
  id: totrans-912
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â w0
    |'
- en: '| Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â tock]
    |'
  id: totrans-913
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â tock]
    |'
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â keyh]
    |'
  id: totrans-914
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â keyh]
    |'
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â to-image]))
    |'
  id: totrans-915
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)
    to-image])) |'
- en: '| Â  |'
  id: totrans-916
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [ShotWorld](#%28tech._shotworld%29)
    |'
  id: totrans-917
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; [ShotWorld](#%28tech._shotworld%29) -> [ShotWorld](#%28tech._shotworld%29)
    |'
- en: '| ;Â moves each shot up by one pixel |'
  id: totrans-918
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; å°†æ¯ä¸ªå°„å‡»å‘ä¸Šç§»åŠ¨ä¸€ä¸ªåƒç´  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tockÂ w)
    |'
  id: totrans-919
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (tock w) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-920
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â ''()]
    |'
  id: totrans-921
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    w) ''()] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w))Â (tockÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))]))
    |'
  id: totrans-922
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    w)) (tock ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    w)))])) |'
- en: '| Â  |'
  id: totrans-923
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [ShotWorld](#%28tech._shotworld%29) |'
  id: totrans-924
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; [ShotWorld](#%28tech._shotworld%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [ShotWorld](#%28tech._shotworld%29) |'
- en: '| ;Â adds a shot to the world if the space bar is hit |'
  id: totrans-925
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; å¦‚æœæŒ‰ä¸‹ç©ºæ ¼é”®ï¼Œåˆ™å°†å°„å‡»æ·»åŠ åˆ°ä¸–ç•Œä¸­ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (keyhÂ wÂ ke)
    |'
  id: totrans-926
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (keyh w ke) |'
- en: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "
    ")Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â HEIGHTÂ w)Â w))
    |'
  id: totrans-927
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    ([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)
    ke " ") ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    HEIGHT w) w)) |'
- en: '| Â  |'
  id: totrans-928
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-929
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ; [ShotWorld](#%28tech._shotworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â adds each shot y on w at (XSHOTS,y} to BACKGROUND |'
  id: totrans-930
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| å°†æ¯ä¸ªå°„å‡» y åœ¨ (XSHOTS,y} å¤„æ·»åŠ åˆ° BACKGROUND |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (to-imageÂ w)
    |'
  id: totrans-931
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (to-image w) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-932
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â BACKGROUND]
    |'
  id: totrans-933
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    w) BACKGROUND] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â SHOTÂ XSHOTSÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)
    |'
  id: totrans-934
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([æ”¾ç½®å›¾åƒ](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â SHOTÂ XSHOTSÂ ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (to-imageÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))]))
    |'
  id: totrans-935
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (to-imageÂ ([å‰©ä½™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))]))
    |'
- en: ''
  id: totrans-936
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 61: A list-based world program'
  id: totrans-937
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾61ï¼šåŸºäºåˆ—è¡¨çš„ä¸–ç•Œç¨‹åº
- en: 'As far as a world program is concerned, a key handler such as keyh is about
    the key event that it consumes. Hence, we consider it the main argument and use
    its data definition to derive the template. Specifically, following the data definition
    for [KeyEvent](part_one.html#%28tech._keyevent%29) from [Enumerations](part_one.html#%28part._sec~3aenums%29),
    it dictates that the function needs a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with numerous clauses like this:'
  id: totrans-938
  prefs: []
  type: TYPE_NORMAL
  zh: å°±ä¸–ç•Œç¨‹åºè€Œè¨€ï¼Œä¸€ä¸ªé”®å¤„ç†ç¨‹åºå¦‚keyhæ˜¯å…³äºå®ƒæ‰€æ¶ˆè´¹çš„é”®äº‹ä»¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å…¶è§†ä¸ºä¸»è¦å‚æ•°ï¼Œå¹¶ä½¿ç”¨å…¶æ•°æ®å®šä¹‰æ¥æ¨å¯¼æ¨¡æ¿ã€‚å…·ä½“æ¥è¯´ï¼Œæ ¹æ®[æšä¸¾](part_one.html#%28part._sec~3aenums%29)ä¸­çš„[KeyEvent](part_one.html#%28tech._keyevent%29)æ•°æ®å®šä¹‰ï¼Œå®ƒè§„å®šå‡½æ•°éœ€è¦ä¸€ä¸ªå…·æœ‰å¤šä¸ªç±»ä¼¼ä»¥ä¸‹å­å¥çš„[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)è¡¨è¾¾å¼ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (keyhÂ wÂ ke)
    |'
  id: totrans-939
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (keyhÂ wÂ ke)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-940
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "left")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-941
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([é”®æ¯”è¾ƒ](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "left")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "right")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-942
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([é”®æ¯”è¾ƒ](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "right")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-943
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "
    ")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-944
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([é”®æ¯”è¾ƒ](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "
    ")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-945
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "a")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-946
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([é”®æ¯”è¾ƒ](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "a")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-947
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "z")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  id: totrans-948
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "z")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
- en: Of course, just like for functions that consume all possible BSL values, a key
    handler usually does not need to inspect all possible cases. For our running problem,
    you specifically know that the key handler reacts only to the space bar and all
    others are ignored. So it is natural to collapse all of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses into an [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    clause except for the clause for " ".
  id: totrans-949
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œå°±åƒå¯¹äºæ¶ˆè€—æ‰€æœ‰å¯èƒ½çš„BSLå€¼çš„å‡½æ•°ä¸€æ ·ï¼Œé”®å¤„ç†ç¨‹åºé€šå¸¸ä¸éœ€è¦æ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„æ¡ˆä¾‹ã€‚å¯¹äºæˆ‘ä»¬çš„è¿è¡Œé—®é¢˜ï¼Œä½ ç‰¹åˆ«çŸ¥é“é”®å¤„ç†ç¨‹åºåªå¯¹ç©ºæ ¼é”®åšå‡ºååº”ï¼Œå…¶ä»–æ‰€æœ‰é”®éƒ½è¢«å¿½ç•¥ã€‚å› æ­¤ï¼Œå°†æ‰€æœ‰[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)å­å¥åˆå¹¶ä¸ºä¸€ä¸ª[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)å­å¥ï¼Œé™¤äº†â€œ
    â€çš„å­å¥ä¹‹å¤–ã€‚
- en: ExerciseÂ 156\. Equip the program in [figureÂ 61](#%28counter._%28figure._fig~3ashots%29%29)
    with tests and make sure it passes those. Explain what main does. Then run the
    program via main.
  id: totrans-950
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 156ã€‚ä¸º[å›¾61](#%28counter._%28figure._fig~3ashots%29%29)ä¸­çš„ç¨‹åºæ·»åŠ æµ‹è¯•ï¼Œå¹¶ç¡®ä¿å®ƒé€šè¿‡è¿™äº›æµ‹è¯•ã€‚è§£é‡Šmainçš„ä½œç”¨ã€‚ç„¶åé€šè¿‡mainè¿è¡Œç¨‹åºã€‚
- en: 'ExerciseÂ 157\. Experiment to determine whether the arbitrary decisions concerning
    constants are easy to change. For example, determine whether changing a single
    constant definition achieves the desired outcome:'
  id: totrans-951
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 157ã€‚å°è¯•ç¡®å®šæœ‰å…³å¸¸æ•°çš„ä»»æ„å†³ç­–æ˜¯å¦å®¹æ˜“æ›´æ”¹ã€‚ä¾‹å¦‚ï¼Œç¡®å®šæ›´æ”¹å•ä¸ªå¸¸é‡å®šä¹‰æ˜¯å¦è¾¾åˆ°é¢„æœŸçš„ç»“æœï¼š
- en: change the height of the canvas to 220 pixels;
  id: totrans-952
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å°†ç”»å¸ƒçš„é«˜åº¦æ›´æ”¹ä¸º220åƒç´ ï¼›
- en: change the width of the canvas to 30 pixels;
  id: totrans-953
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å°†ç”»å¸ƒçš„å®½åº¦æ›´æ”¹ä¸º30åƒç´ ï¼›
- en: change the x location of the line of shots to â€œsomewhere to the left of the
    middleâ€;
  id: totrans-954
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å°†å°„å‡»è¡Œçš„xä½ç½®æ›´æ”¹ä¸ºâ€œä¸­é—´å·¦ä¾§æŸå¤„â€ï¼›
- en: change the background to a green rectangle; and
  id: totrans-955
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å°†èƒŒæ™¯æ›´æ”¹ä¸ºç»¿è‰²çŸ©å½¢ï¼›å¹¶ä¸”
- en: change the rendering of shots to a red elongated rectangle.
  id: totrans-956
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å°†å°„å‡»çš„æ¸²æŸ“æ”¹ä¸ºçº¢è‰²ç»†é•¿çš„çŸ©å½¢ã€‚
- en: Also check whether it is possible to double the size of the shot without changing
    anything else or to change its color to black.
  id: totrans-957
  prefs: []
  type: TYPE_NORMAL
  zh: è¿˜è¦æ£€æŸ¥æ˜¯å¦å¯ä»¥åœ¨ä¸æ”¹å˜å…¶ä»–ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹å°†å°„å‡»çš„å¤§å°åŠ å€ï¼Œæˆ–è€…å°†å…¶é¢œè‰²æ”¹ä¸ºé»‘è‰²ã€‚
- en: ExerciseÂ 158\. If you run main, press the space bar (fire a shot), and wait
    for a goodly amount of time, the shot disappears from the canvas. When you shut
    down the world canvas, however, the result is a world that still contains this
    invisible shot.
  id: totrans-958
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 158ã€‚å¦‚æœä½ è¿è¡Œmainï¼ŒæŒ‰ç©ºæ ¼é”®ï¼ˆå‘å°„å°„å‡»ï¼‰ï¼Œå¹¶ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå°„å‡»å°†ä»ç”»å¸ƒä¸Šæ¶ˆå¤±ã€‚ç„¶è€Œï¼Œå½“ä½ å…³é—­ä¸–ç•Œç”»å¸ƒæ—¶ï¼Œç»“æœæ˜¯ä¸€ä¸ªä»ç„¶åŒ…å«è¿™ä¸ªéšå½¢å°„å‡»çš„ä¸–ç•Œã€‚
- en: Design an alternative tock function that doesnâ€™t just move shots one pixel per
    clock tick but also eliminates those whose coordinates place them above the canvas.
    Hint You may wish to consider the design of an auxiliary function for the recursive
    [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause.
  id: totrans-959
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªæ›¿ä»£çš„æ—¶é’Ÿå‡½æ•°ï¼Œå®ƒä¸ä»…æ¯æ¬¡æ—¶é’Ÿæ»´ç­”æ—¶ç§»åŠ¨ä¸€ä¸ªåƒç´ ï¼Œè€Œä¸”è¿˜èƒ½æ¶ˆé™¤é‚£äº›åæ ‡ä½¿å…¶ä½äºç”»å¸ƒä¸Šæ–¹çš„å°„å‡»ã€‚æç¤ºï¼šä½ å¯èƒ½éœ€è¦è€ƒè™‘ä¸ºé€’å½’[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)å­å¥è®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚
- en: ExerciseÂ 159\. Turn the solution of [exerciseÂ 153](#%28counter._%28exercise._ex~3arandom1%29%29)
    into a world program. Its main function, dubbed riot, consumes how many balloons
    the students want to throw; its visualization shows one balloon dropping after
    another at a rate of one per second. The function produces the list of [Posn](part_one.html#%28tech._posn%29)s
    where the balloons hit.
  id: totrans-960
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 159ã€‚å°†[ç»ƒä¹ 153](#%28counter._%28exercise._ex~3arandom1%29%29)çš„è§£å†³æ–¹æ¡ˆè½¬æ¢ä¸ºä¸–ç•Œç¨‹åºã€‚å®ƒçš„ä¸»å‡½æ•°è¢«ç§°ä¸ºriotï¼Œå®ƒæ¶ˆè€—å­¦ç”Ÿæƒ³è¦æ‰”å‡ºçš„æ°”çƒæ•°é‡ï¼›å…¶å¯è§†åŒ–æ˜¾ç¤ºä¸€ä¸ªæ°”çƒæ¥ä¸€ä¸ªæ°”çƒä»¥æ¯ç§’ä¸€ä¸ªçš„é€Ÿåº¦è½ä¸‹ã€‚è¯¥å‡½æ•°äº§ç”Ÿ[Posn](part_one.html#%28tech._posn%29)åˆ—è¡¨ï¼Œå…¶ä¸­æ°”çƒå‡»ä¸­ã€‚
- en: 'Hints (1) Here is one possible data representation:'
  id: totrans-961
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼ˆ1ï¼‰è¿™é‡Œæ˜¯ä¸€ç§å¯èƒ½çš„æ•°æ®è¡¨ç¤ºï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â pairÂ [balloon#Â lob])
    |'
  id: totrans-962
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â pairÂ [balloon#Â lob])
    |'
- en: '| ;Â A Pair is a structure (make-pair  [N](#%28tech._n%29)  [List-of-posns](#%28tech._list._of._posn%29))
    |'
  id: totrans-963
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Pair is a structure (make-pair  [N](#%28tech._n%29)  [List-of-posns](#%28tech._list._of._posn%29))
    |'
- en: '| ;Â A List-of-posns is one of: |'
  id: totrans-964
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A List-of-posns is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-965
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [List-of-posns](#%28tech._list._of._posn%29))
    |'
  id: totrans-966
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [List-of-posns](#%28tech._list._of._posn%29))
    |'
- en: '| ;Â interpretation  (make-pair  n  lob) means n balloons |'
  id: totrans-967
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation  (make-pair  n  lob) means n balloons |'
- en: '| ;Â must yet be thrown and added to lob |'
  id: totrans-968
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â must yet be thrown and added to lob |'
- en: (2) A [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression is really just an expression. It is legitimate to nest it within another
    expression.
  id: totrans-969
  prefs: []
  type: TYPE_NORMAL
  zh: (2) ä¸€ä¸ª [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    è¡¨è¾¾å¼å®é™…ä¸Šåªæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼å†…éƒ¨åµŒå¥—å®ƒæ˜¯åˆæ³•çš„ã€‚
- en: (3) Recall that [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    creates random numbers.
  id: totrans-970
  prefs: []
  type: TYPE_NORMAL
  zh: (3) å›æƒ³ä¸€ä¸‹ï¼Œ[random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    åˆ›å»ºéšæœºæ•°ã€‚
- en: 9.6A Note on Lists and Sets[ğŸ”—](#(part._sec~3alist-set) "Link to here")
  id: totrans-971
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 9.6A å…³äºåˆ—è¡¨å’Œé›†åˆçš„æ³¨æ„äº‹é¡¹[ğŸ”—](#(part._sec~3alist-set) "é“¾æ¥åˆ°æ­¤å¤„")
- en: This book relies on your intuitive understanding of sets as collections of BSL
    values. [The Universe of Data](part_one.html#%28part._data-uni._sec~3adata-uni%29)
    specifically says that a data definition introduces a name for a set of BSL values.
    There is one question that this book consistently asks about sets, and it is whether
    some element is in some given set. For example, 4 is in [Number](part_one.html#%28tech._number%29),
    while "four" is not. The book also shows how to use a data definition to check
    whether some value is a member of some named set and how to use some of the data
    definitions to generate sample elements of sets, but these two procedures are
    about data definitions, not sets per se.
  id: totrans-972
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ä¹¦ä¾èµ–äºä½ å¯¹é›†åˆä½œä¸ºBSLå€¼é›†åˆçš„ç›´è§‚ç†è§£ã€‚[æ•°æ®å®‡å®™](part_one.html#%28part._data-uni._sec~3adata-uni%29)ç‰¹åˆ«è¯´æ˜ï¼Œæ•°æ®å®šä¹‰å¼•å…¥äº†BSLå€¼é›†åˆçš„åç§°ã€‚æœ¬ä¹¦å§‹ç»ˆè¯¢é—®å…³äºé›†åˆçš„ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨æŸä¸ªç»™å®šçš„é›†åˆä¸­ã€‚ä¾‹å¦‚ï¼Œ4åœ¨[Number](part_one.html#%28tech._number%29)ä¸­ï¼Œè€Œ"four"ä¸åœ¨ã€‚æœ¬ä¹¦è¿˜å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ•°æ®å®šä¹‰æ¥æ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦æ˜¯æŸä¸ªå‘½åé›†åˆçš„æˆå‘˜ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ä¸€äº›æ•°æ®å®šä¹‰æ¥ç”Ÿæˆé›†åˆçš„æ ·æœ¬å…ƒç´ ï¼Œä½†è¿™ä¸¤ä¸ªè¿‡ç¨‹æ˜¯å…³äºæ•°æ®å®šä¹‰ï¼Œè€Œä¸æ˜¯é›†åˆæœ¬èº«ã€‚
- en: At the same time, lists represent collections of values. Hence you might be
    wondering what the difference between a list and a set is or whether this is a
    needless distinction. If so, this section is for you.
  id: totrans-973
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ—¶ï¼Œåˆ—è¡¨è¡¨ç¤ºå€¼çš„é›†åˆã€‚å› æ­¤ï¼Œä½ å¯èƒ½æƒ³çŸ¥é“åˆ—è¡¨å’Œé›†åˆä¹‹é—´çš„åŒºåˆ«ï¼Œæˆ–è€…è¿™æ˜¯å¦æ˜¯ä¸€ä¸ªä¸å¿…è¦çš„åŒºåˆ†ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œæœ¬èŠ‚å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚
- en: Right now the primary difference between sets and lists is that the former is
    a concept we use to discuss steps in the design of code and the latter is one
    of many forms of data in BSL, our chosen programming language. The two ideas live
    at rather different levels in our conversations. However, given that a data definition
    introduces a data representation of actual information inside of BSL and given
    that sets are collections of information, you may now ask yourself how sets are
    represented inside of BSL as data.
  id: totrans-974
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®å‰ï¼Œé›†åˆå’Œåˆ—è¡¨ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå‰è€…æ˜¯æˆ‘ä»¬ç”¨æ¥è®¨è®ºä»£ç è®¾è®¡æ­¥éª¤çš„æ¦‚å¿µï¼Œè€Œåè€…æ˜¯BSLï¼ˆæˆ‘ä»¬é€‰æ‹©çš„ç¼–ç¨‹è¯­è¨€ï¼‰çš„å¤šç§æ•°æ®å½¢å¼ä¹‹ä¸€ã€‚è¿™ä¸¤ä¸ªæ¦‚å¿µåœ¨æˆ‘ä»¬å¯¹è¯ä¸­çš„å±‚æ¬¡ç›¸å½“ä¸åŒã€‚ç„¶è€Œï¼Œé‰´äºæ•°æ®å®šä¹‰åœ¨BSLå†…éƒ¨å¼•å…¥äº†å®é™…ä¿¡æ¯çš„è¡¨ç¤ºï¼Œå¹¶ä¸”é‰´äºé›†åˆæ˜¯ä¿¡æ¯çš„é›†åˆï¼Œä½ ç°åœ¨å¯ä»¥é—®è‡ªå·±é›†åˆå¦‚ä½•åœ¨BSLä¸­ä½œä¸ºæ•°æ®è¡¨ç¤ºã€‚
- en: Most full-fledged languages directly support data representations of both lists
    and sets.
  id: totrans-975
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å¤§å¤šæ•°åŠŸèƒ½é½å…¨çš„è¯­è¨€ç›´æ¥æ”¯æŒåˆ—è¡¨å’Œé›†åˆçš„æ•°æ®è¡¨ç¤ºã€‚
- en: While lists have a special status in BSL, sets donâ€™t, but at the same time sets
    somewhat resemble lists. The key difference is the kind of functions a program
    normally uses with either form of data. BSL provides several basic constants and
    functions for listsâ€”<wbr>say, [empty](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty%29%29),
    [empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29),
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29),
    [cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29),
    [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29),
    [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)â€”<wbr>and
    some functions that you could define yourselfâ€”<wbr>for example, [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29),
    [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29),
    [remove](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove%29%29),
    [reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29),
    and so on. Here is an example of a function you can define but does not come with
    BSL
  id: totrans-976
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶ BSL ä¸­åˆ—è¡¨å…·æœ‰ç‰¹æ®Šåœ°ä½ï¼Œä½†é›†åˆå´æ²¡æœ‰ï¼Œä½†ä¸æ­¤åŒæ—¶é›†åˆåœ¨æŸç§ç¨‹åº¦ä¸Šä¸åˆ—è¡¨ç›¸ä¼¼ã€‚å…³é”®åŒºåˆ«åœ¨äºç¨‹åºé€šå¸¸ä½¿ç”¨å“ªç§å½¢å¼çš„æ•°æ®æ—¶ä½¿ç”¨çš„å‡½æ•°ç±»å‹ã€‚BSL ä¸ºåˆ—è¡¨æä¾›äº†å‡ ä¸ªåŸºæœ¬å¸¸é‡å’Œå‡½æ•°â€”â€”ä¾‹å¦‚ï¼Œ[empty](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty%29%29)ã€[empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)ã€[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ã€[cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)ã€[first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)ã€[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)â€”â€”ä»¥åŠä¸€äº›ä½ å¯ä»¥è‡ªå·±å®šä¹‰çš„å‡½æ•°â€”â€”ä¾‹å¦‚ï¼Œ[member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)ã€[length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)ã€[remove](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove%29%29)ã€[reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29)ï¼Œç­‰ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½ å¯ä»¥å®šä¹‰ä½†BSLæ²¡æœ‰æä¾›çš„å‡½æ•°ç¤ºä¾‹
- en: '| ;Â [List-of-string](#%28tech._list._of._string%29)  [String](part_one.html#%28tech._string%29)
    -> [N](#%28tech._n%29) |'
  id: totrans-977
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-string](#%28tech._list._of._string%29)  [String](part_one.html#%28tech._string%29)
    -> [N](#%28tech._n%29) |'
- en: '| ;Â determines how often s occurs in los |'
  id: totrans-978
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â determines how often s occurs in los |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (countÂ losÂ s)
    |'
  id: totrans-979
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (countÂ losÂ s)
    |'
- en: '| Â Â 0) |'
  id: totrans-980
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â 0) |'
- en: Stop! Finish the design of this function.
  id: totrans-981
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼å®Œæˆè¿™ä¸ªå‡½æ•°çš„è®¾è®¡ã€‚
- en: Letâ€™s proceed in a straightforward and possibly naive manner and say sets are
    basically lists. And, to simplify further, letâ€™s focus on lists of numbers in
    this section. If we now accept that it merely matters whether a number is a part
    of a set or not, it is almost immediately clear that we can use lists in two different
    ways to represent sets.
  id: totrans-982
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»¥ä¸€ç§ç›´æ¥ä¸”å¯èƒ½æœ‰äº›å¤©çœŸçš„æ–¹å¼ç»§ç»­è¿›è¡Œï¼Œå¹¶è¯´é›†åˆåŸºæœ¬ä¸Šæ˜¯åˆ—è¡¨ã€‚ä¸ºäº†è¿›ä¸€æ­¥ç®€åŒ–ï¼Œè®©æˆ‘ä»¬åœ¨æœ¬èŠ‚ä¸­å…³æ³¨æ•°å­—åˆ—è¡¨ã€‚å¦‚æœæˆ‘ä»¬ç°åœ¨æ¥å—ä¸€ä¸ªæ•°å­—æ˜¯å¦æ˜¯é›†åˆçš„ä¸€éƒ¨åˆ†è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‡ ä¹å¯ä»¥ç«‹å³æ¸…æ¥šåœ°çŸ¥é“æˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ç§ä¸åŒçš„æ–¹å¼ä½¿ç”¨åˆ—è¡¨æ¥è¡¨ç¤ºé›†åˆã€‚
- en: '|'
  id: totrans-983
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| |'
- en: ''
  id: totrans-984
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â A Son.L is one of: &#124;'
  id: totrans-985
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â A Son.L æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š &#124;'
- en: '&#124; ;Â â€“  [empty](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty%29%29)
    &#124;'
  id: totrans-986
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  [empty](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty%29%29)
    &#124;'
- en: '&#124; ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  [Son.L](#%28tech._son..l%29))
    &#124;'
  id: totrans-987
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  [Son.L](#%28tech._son..l%29))'
- en: '&#124; ;Â  &#124;'
  id: totrans-988
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â  &#124;'
- en: '&#124; ;Â Son is used when it &#124;'
  id: totrans-989
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â Son æ˜¯å½“å®ƒè¢«ä½¿ç”¨æ—¶ &#124;'
- en: '&#124; ;Â applies to [Son.L](#%28tech._son..l%29) and [Son.R](#%28tech._son..r%29)
    &#124;'
  id: totrans-990
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â é€‚ç”¨äº [Son.L](#%28tech._son..l%29) å’Œ [Son.R](#%28tech._son..r%29) &#124;'
- en: ''
  id: totrans-991
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-992
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-993
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â A Son.R is one of: &#124;'
  id: totrans-994
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â ä¸€ä¸ª Son.R æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š &#124;'
- en: '&#124; ;Â â€“  [empty](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty%29%29)
    &#124;'
  id: totrans-995
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  [empty](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty%29%29)
    &#124;'
- en: '&#124; ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  [Son.R](#%28tech._son..r%29))
    &#124;'
  id: totrans-996
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  [Son.R](#%28tech._son..r%29))
    &#124;'
- en: '&#124; ;Â  &#124;'
  id: totrans-997
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â  &#124;'
- en: '&#124; ;Â Constraint If s is a [Son.R](#%28tech._son..r%29), &#124;'
  id: totrans-998
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â çº¦æŸï¼šå¦‚æœ s æ˜¯ä¸€ä¸ª [Son.R](#%28tech._son..r%29)ï¼Œ &#124;'
- en: '&#124; ;Â no number occurs twice in s &#124;'
  id: totrans-999
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ;Â s ä¸­ä¸å‡ºç°é‡å¤çš„æ•°å­— &#124;'
- en: ''
  id: totrans-1000
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1001
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1002
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 62: Two data representations for sets'
  id: totrans-1003
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾62ï¼šé›†åˆçš„ä¸¤ç§æ•°æ®è¡¨ç¤º
- en: '[FigureÂ 62](#%28counter._%28figure._fig~3asets-vs-lists%29%29) displays the
    two data definitions. Both basically say that a set is represented as a list of
    numbers. The difference is that the definition on the right comes with the constraint
    that no number may occur more than once on the list. After all, the key question
    we ask about a set is whether some number is in the set or not, and whether it
    is in a set once, twice, or three times makes no difference.'
  id: totrans-1004
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾62](#%28counter._%28figure._fig~3asets-vs-lists%29%29) å±•ç¤ºäº†ä¸¤ç§é›†åˆçš„æ•°æ®å®šä¹‰ã€‚ä¸¤è€…åŸºæœ¬ä¸Šéƒ½è¯´é›†åˆæ˜¯ä»¥æ•°å­—åˆ—è¡¨çš„å½¢å¼è¡¨ç¤ºçš„ã€‚åŒºåˆ«åœ¨äºå³ä¾§çš„å®šä¹‰å¸¦æœ‰çº¦æŸï¼Œå³åˆ—è¡¨ä¸­ä¸å…è®¸å‡ºç°é‡å¤çš„æ•°å­—ã€‚æ¯•ç«Ÿï¼Œæˆ‘ä»¬å¯¹é›†åˆæå‡ºçš„å…³é”®é—®é¢˜æ˜¯æŸä¸ªæ•°å­—æ˜¯å¦åœ¨é›†åˆä¸­ï¼Œä»¥åŠå®ƒæ˜¯å¦åœ¨é›†åˆä¸­ä¸€æ¬¡ã€ä¸¤æ¬¡æˆ–ä¸‰æ¬¡ï¼Œè¿™éƒ½æ²¡æœ‰å…³ç³»ã€‚'
- en: 'Regardless of which definition you choose, you can already define two important
    notions:'
  id: totrans-1005
  prefs: []
  type: TYPE_NORMAL
  zh: æ— è®ºä½ é€‰æ‹©å“ªç§å®šä¹‰ï¼Œä½ éƒ½å¯ä»¥å®šä¹‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š
- en: '| ;Â [Son](#%28tech._son%29) |'
  id: totrans-1006
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Son](#%28tech._son%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â esÂ ''())
    |'
  id: totrans-1007
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â esÂ ''())
    |'
- en: '| Â  |'
  id: totrans-1008
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [Son](#%28tech._son%29) ->
    [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-1009
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Number](part_one.html#%28tech._number%29)  [Son](#%28tech._son%29) ->
    [Boolean](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â is x in s |'
  id: totrans-1010
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â x æ˜¯å¦åœ¨ s ä¸­ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (in?Â xÂ s)
    |'
  id: totrans-1011
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (in?Â xÂ s)
    |'
- en: '| Â Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â xÂ s))
    |'
  id: totrans-1012
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â xÂ s))
    |'
- en: 'The first one is the empty set, which in both cases is represented by the empty
    list. The second one is a membership test.One way to build larger sets is to use
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and the above definitions. Say we wish to build a representation of the set that
    contains 1, 2, and 3. Here is one such representation:'
  id: totrans-1013
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªæ˜¯ç©ºé›†ï¼Œåœ¨ä¸¤ç§æƒ…å†µä¸‹éƒ½ç”±ç©ºåˆ—è¡¨è¡¨ç¤ºã€‚ç¬¬äºŒä¸ªæ˜¯æˆå‘˜æµ‹è¯•ã€‚æ„å»ºè¾ƒå¤§é›†åˆçš„ä¸€ç§æ–¹æ³•æ˜¯ç”¨ [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    å’Œä¸Šè¿°å®šä¹‰ã€‚å‡è®¾æˆ‘ä»¬å¸Œæœ›æ„å»ºåŒ…å« 1ã€2 å’Œ 3 çš„é›†åˆçš„è¡¨ç¤ºã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªè¿™æ ·çš„è¡¨ç¤ºï¼š
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â '())))
  id: totrans-1014
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    3Â '())))
- en: And it works for both data representations. But, is
  id: totrans-1015
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒé€‚ç”¨äºä¸¤ç§æ•°æ®è¡¨ç¤ºã€‚ä½†æ˜¯ï¼Œé—®é¢˜æ˜¯
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â '())))
  id: totrans-1016
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3  ''())))'
- en: really not a representation of the same set? Or how about
  id: totrans-1017
  prefs: []
  type: TYPE_NORMAL
  zh: '| ;Â è¿™çœŸçš„æ˜¯åŒä¸€é›†åˆçš„è¡¨ç¤ºå—ï¼Ÿæˆ–è€…å¦‚ä½•'
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â '()))))
  id: totrans-1018
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3  ''()))))
    | '
- en: The answer has to be affirmative as long as the primary concern is whether a
    number is in a set or not. Still, while the order of [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    cannot matter, the constraint in the right-hand data definition rules out the
    last list as a [Son.R](#%28tech._son..r%29) because it contains 1 twice.
  id: totrans-1019
  prefs: []
  type: TYPE_NORMAL
  zh: '| ;Â ç­”æ¡ˆå¿…é¡»æ˜¯è‚¯å®šçš„ï¼Œåªè¦ä¸»è¦å…³æ³¨çš„æ˜¯æ•°å­—æ˜¯å¦åœ¨é›†åˆä¸­ã€‚å°½ç®¡å¦‚æ­¤ï¼Œç”±äº [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    çš„é¡ºåºæ— å…³ç´§è¦ï¼Œä½†å³æ‰‹æ•°æ®å®šä¹‰ä¸­çš„çº¦æŸæ’é™¤äº†æœ€åä¸€ä¸ªåˆ—è¡¨ä½œä¸º [å­.R](#%28tech._son..r%29) çš„å¯èƒ½æ€§ï¼Œå› ä¸ºå®ƒåŒ…å«æ•°å­— 1 ä¸¤æ¬¡ã€‚ | '
- en: '|'
  id: totrans-1020
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| |'
- en: ''
  id: totrans-1021
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â [Number](part_one.html#%28tech._number%29)  [Son.L](#%28tech._son..l%29)
    -> [Son.L](#%28tech._son..l%29) &#124;'
  id: totrans-1022
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â [æ•°å­—](part_one.html#%28tech._number%29)  [å­.L](#%28tech._son..l%29) -> [å­.L](#%28tech._son..l%29)
    | '
- en: '&#124; ;Â removes x from s &#124;'
  id: totrans-1023
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â ä» s ä¸­ç§»é™¤ x | '
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â s1.L
    &#124;'
  id: totrans-1024
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â s1.L
    | '
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ''())))
    &#124;'
  id: totrans-1025
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ''())))
    | '
- en: '&#124; Â  &#124;'
  id: totrans-1026
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â | '
- en: '&#124; ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    &#124;'
  id: totrans-1027
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    | '
- en: '&#124; Â Â (set-.LÂ 1Â s1.L)Â es) &#124;'
  id: totrans-1028
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â (set-.LÂ 1Â s1.L)Â es) | '
- en: '&#124; Â  &#124;'
  id: totrans-1029
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â | '
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (set-.LÂ xÂ s)
    &#124;'
  id: totrans-1030
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (set-.LÂ xÂ s)
    | '
- en: '&#124; Â Â ([remove-all](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove-all%29%29)Â xÂ s))
    &#124;'
  id: totrans-1031
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â ([remove-all](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove-all%29%29)Â xÂ s))
    | '
- en: ''
  id: totrans-1032
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-1033
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| | '
- en: ''
  id: totrans-1034
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â [Number](part_one.html#%28tech._number%29)  [Son.R](#%28tech._son..r%29)
    -> [Son.R](#%28tech._son..r%29) &#124;'
  id: totrans-1035
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â [æ•°å­—](part_one.html#%28tech._number%29)  [å­.R](#%28tech._son..r%29) -> [å­.R](#%28tech._son..r%29)
    | '
- en: '&#124; ;Â removes x from s &#124;'
  id: totrans-1036
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â ä» s ä¸­ç§»é™¤ x | '
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â s1.R
    &#124;'
  id: totrans-1037
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ;Â ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â s1.R
    | '
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ''()))
    &#124;'
  id: totrans-1038
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    1 ''())) &#124;'
- en: '&#124; Â  &#124;'
  id: totrans-1039
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â  &#124;'
- en: '&#124; ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    &#124;'
  id: totrans-1040
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    &#124;'
- en: '&#124; Â Â (set-.RÂ 1Â s1.R)Â es) &#124;'
  id: totrans-1041
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â  (set-.R 1 s1.R) es) &#124;'
- en: '&#124; Â  &#124;'
  id: totrans-1042
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â  &#124;'
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (set-.RÂ xÂ s)
    &#124;'
  id: totrans-1043
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (set-.R x s) &#124;'
- en: '&#124; Â Â ([remove](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove%29%29)Â xÂ s))
    &#124;'
  id: totrans-1044
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â  ([remove](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove%29%29)
    x s)) &#124;'
- en: ''
  id: totrans-1045
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1046
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1047
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 63: Functions for the two data representations of sets'
  id: totrans-1048
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾63ï¼šé›†åˆä¸¤ç§æ•°æ®è¡¨ç¤ºçš„å‡½æ•°
- en: 'The difference between the two data definitions shows up when we design functions.
    Say we want a function that removes a number from a set. Here is a wish-list entry
    that applies to both representations:'
  id: totrans-1049
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æˆ‘ä»¬è®¾è®¡å‡½æ•°æ—¶ï¼Œä¸¤ä¸ªæ•°æ®å®šä¹‰ä¹‹é—´çš„å·®å¼‚æ˜¾ç°å‡ºæ¥ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªå‡½æ•°å¯ä»¥ä»é›†åˆä¸­ç§»é™¤ä¸€ä¸ªæ•°å­—ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªé€‚ç”¨äºä¸¤ç§è¡¨ç¤ºçš„æ„¿æœ›æ¸…å•æ¡ç›®ï¼š
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [Son](#%28tech._son%29) ->
    [Son](#%28tech._son%29) |'
  id: totrans-1050
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Number](part_one.html#%28tech._number%29)  [Son](#%28tech._son%29) ->
    [Son](#%28tech._son%29) |'
- en: '| ;Â subtracts x from s |'
  id: totrans-1051
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»sä¸­å‡å»x |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (set-Â xÂ s)
    |'
  id: totrans-1052
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (set- x s) |'
- en: '| Â Â s) |'
  id: totrans-1053
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  s) |'
- en: 'The purpose statement uses the word â€œsubtractâ€ because this is what logicians
    and mathematicians use when they work with sets.[FigureÂ 63](#%28counter._%28figure._fig~3asets-vs-lists-ops%29%29)
    shows the results. The two columns differ in two points:'
  id: totrans-1054
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®çš„å£°æ˜ä¸­ä½¿ç”¨â€œå‡å»â€è¿™ä¸ªè¯ï¼Œå› ä¸ºè¿™æ˜¯é€»è¾‘å­¦å®¶å’Œæ•°å­¦å®¶åœ¨å¤„ç†é›†åˆæ—¶ä½¿ç”¨çš„æœ¯è¯­ã€‚[å›¾63](#%28counter._%28figure._fig~3asets-vs-lists-ops%29%29)æ˜¾ç¤ºäº†ç»“æœã€‚ä¸¤åˆ—åœ¨ä¸¤ç‚¹ä¸Šæœ‰æ‰€ä¸åŒï¼š
- en: The test on the left uses a list that contains 1 twice, while the one on the
    right represents the same set with a single [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29).
  id: totrans-1055
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å·¦ä¾§çš„æµ‹è¯•ä½¿ç”¨äº†ä¸€ä¸ªåŒ…å«1ä¸¤æ¬¡çš„åˆ—è¡¨ï¼Œè€Œå³ä¾§çš„è¡¨ç¤ºä½¿ç”¨å•ä¸ª[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)æ¥è¡¨ç¤ºç›¸åŒçš„é›†åˆã€‚
- en: Because of these differences, the set- on the left must use [remove-all](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove-all%29%29),
    while the one on the right gets away with [remove](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove%29%29).
  id: totrans-1056
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç”±äºè¿™äº›å·®å¼‚ï¼Œå·¦ä¾§çš„é›†åˆå¿…é¡»ä½¿ç”¨[remove-all](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove-all%29%29)ï¼Œè€Œå³ä¾§çš„å¯ä»¥ä½¿ç”¨[remove](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove%29%29)ã€‚
- en: 'Stop! Copy the code into the DrRacket definitions area and make sure the tests
    pass. Then read on and experiment with the code as you do.An unappealing aspect
    of [figureÂ 63](#%28counter._%28figure._fig~3asets-vs-lists-ops%29%29) is that
    the tests use es, a plain list, as the expected result. This problem may seem
    minor at first glance. Consider the following example, however:'
  id: totrans-1057
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼å°†ä»£ç å¤åˆ¶åˆ°DrRacketå®šä¹‰åŒºåŸŸï¼Œå¹¶ç¡®ä¿æµ‹è¯•é€šè¿‡ã€‚ç„¶åç»§ç»­é˜…è¯»å¹¶å°è¯•ä½¿ç”¨ä»£ç è¿›è¡Œå®éªŒã€‚å›¾63çš„ä¸€ä¸ªä¸å¸å¼•äººçš„æ–¹é¢æ˜¯æµ‹è¯•ä½¿ç”¨äº†esï¼Œä¸€ä¸ªæ™®é€šçš„åˆ—è¡¨ï¼Œä½œä¸ºé¢„æœŸçš„ç»“æœã€‚è¿™ä¸ªé—®é¢˜ä¹ä¸€çœ‹å¯èƒ½ä¼¼ä¹å¾®ä¸è¶³é“ã€‚ç„¶è€Œï¼Œè€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š
- en: (set-Â 1Â set123)
  id: totrans-1058
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (set- 1 set123)
- en: 'where set123 represents the set containing 1, 2, and 3 in one of two ways:'
  id: totrans-1059
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­set123ä»£è¡¨åŒ…å«1ã€2å’Œ3çš„é›†åˆï¼Œä»¥ä¸¤ç§æ–¹å¼ä¹‹ä¸€è¡¨ç¤ºï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â set123-version1
    |'
  id: totrans-1060
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    set123-version1 |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''()))))
    |'
  id: totrans-1061
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    1 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    2 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    3 ''()))) |'
- en: '| Â  |'
  id: totrans-1062
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â set123-version2
    |'
  id: totrans-1063
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    set123-version2 |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''()))))
    |'
  id: totrans-1064
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    1 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    3 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    2 ''()))) |'
- en: 'Regardless of which representation we choose, (set-  1  set123) evaluates to
    one of these two lists:'
  id: totrans-1065
  prefs: []
  type: TYPE_NORMAL
  zh: æ— è®ºæˆ‘ä»¬é€‰æ‹©å“ªç§è¡¨ç¤ºæ–¹å¼ï¼Œ(set- 1 set123) çš„è®¡ç®—ç»“æœå°†æ˜¯ä»¥ä¸‹ä¸¤ä¸ªåˆ—è¡¨ä¹‹ä¸€ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â set23-version1
    |'
  id: totrans-1066
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    set23-version1 |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''())))
    |'
  id: totrans-1067
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    2 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    3 ''()))) |'
- en: '| Â  |'
  id: totrans-1068
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â set23-version2
    |'
  id: totrans-1069
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    set23-version2 |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''())))
    |'
  id: totrans-1070
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    3 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    2 ''()))) |'
- en: 'But we cannot predict which of those two set- produces.For the simple case
    of two alternatives, it is possible to use the [check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)
    testing facility as follows:'
  id: totrans-1071
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯æˆ‘ä»¬æ— æ³•é¢„æµ‹è¿™ä¸¤ä¸ª set- ä¸­å“ªä¸€ä¸ªä¼šäº§ç”Ÿã€‚å¯¹äºä¸¤ç§é€‰æ‹©çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ [check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)
    æµ‹è¯•è®¾æ–½å¦‚ä¸‹ï¼š
- en: '| ([check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)Â (set-.v1Â 1Â set123.v1)
    |'
  id: totrans-1072
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)
    (set-.v1 1 set123.v1) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â set23-version1 |'
  id: totrans-1073
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    3 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    2 ''()))) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â set23-version2) |'
  id: totrans-1074
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    3 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    2 ''()))) |'
- en: If the expected set contains three elements, there are six possible variations,
    not including representations with repetitions, which the left-hand data definition
    allows.
  id: totrans-1075
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæœŸæœ›çš„é›†åˆåŒ…å«ä¸‰ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆæœ‰å…­ç§å¯èƒ½çš„å˜ä½“ï¼Œä¸åŒ…æ‹¬é‡å¤çš„è¡¨ç¤ºï¼Œè¿™æ˜¯å·¦ä¾§æ•°æ®å®šä¹‰æ‰€å…è®¸çš„ã€‚
- en: Fixing this problem calls for the combination of two ideas. First, recall that
    set- is really about ensuring that the given element does not occur in the result.
    It is an idea that our way of turning the examples into tests does not bring across.
    Second, with BSLâ€™s [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    testing facility, it is possible to state precisely this idea.
  id: totrans-1076
  prefs: []
  type: TYPE_NORMAL
  zh: è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦ç»“åˆä¸¤ä¸ªæƒ³æ³•ã€‚é¦–å…ˆï¼Œå›æƒ³ä¸€ä¸‹ set- å®é™…ä¸Šæ˜¯ç¡®ä¿ç»™å®šå…ƒç´ ä¸å‡ºç°åœ¨ç»“æœä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªæˆ‘ä»¬è½¬æ¢ç¤ºä¾‹ä¸ºæµ‹è¯•çš„æ–¹æ³•æ²¡æœ‰ä¼ è¾¾å‡ºæ¥çš„æƒ³æ³•ã€‚å…¶æ¬¡ï¼Œä½¿ç”¨
    BSL çš„ [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    æµ‹è¯•åŠŸèƒ½ï¼Œå¯ä»¥ç²¾ç¡®åœ°è¡¨è¿°è¿™ä¸ªæƒ³æ³•ã€‚
- en: '[Intermezzo 1: Beginning Student Language](i1-2.html) briefly mentions [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29),
    but, in a nutshell, the facility determines whether an expression satisfies a
    certain property. A property is a function from values to [Boolean](part_one.html#%28tech._boolean%29).
    In our specific case, we wish to state that 1 is not a member of some set:'
  id: totrans-1077
  prefs: []
  type: TYPE_NORMAL
  zh: '[é—´å¥æ›² 1ï¼šåˆå­¦è€…è¯­è¨€](i1-2.html) ç®€è¦æåˆ°äº† [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)ï¼Œä½†ç®€è€Œè¨€ä¹‹ï¼Œè¯¥åŠŸèƒ½ç¡®å®šä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å¦æ»¡è¶³æŸä¸ªç‰¹å®šå±æ€§ã€‚å±æ€§æ˜¯ä¸€ä¸ªä»å€¼åˆ°
    [å¸ƒå°”](part_one.html#%28tech._boolean%29) çš„å‡½æ•°ã€‚åœ¨æˆ‘ä»¬çš„ç‰¹å®šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›è¡¨è¿° 1 ä¸æ˜¯æŸä¸ªé›†åˆçš„æˆå‘˜ï¼š'
- en: '| ;Â [Son](#%28tech._son%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-1078
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [å­](#%28tech._son%29) -> [å¸ƒå°”](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â #true if 1 is not a member of s;Â Â #false otherwise |'
  id: totrans-1079
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â #true å¦‚æœ 1 ä¸æ˜¯ s çš„æˆå‘˜ï¼›Â Â #false å¦åˆ™ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (not-member-1?Â s)
    |'
  id: totrans-1080
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (not-member-1?Â s)
    |'
- en: '| Â Â ([not](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._not%29%29)Â (in?Â 1Â s)))
    |'
  id: totrans-1081
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([é](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._not%29%29)Â (in?Â 1Â s)))
    |'
- en: 'Using not-member-1?, we can formulate the test case as follows:'
  id: totrans-1082
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ not-member-1?ï¼Œæˆ‘ä»¬å¯ä»¥å°†æµ‹è¯•ç”¨ä¾‹è¡¨è¿°å¦‚ä¸‹ï¼š
- en: ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)Â (set-Â 1Â set123)Â not-member-1?)
  id: totrans-1083
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)Â (set-Â 1Â set123)Â not-member-1?)
- en: 'and this variant clearly states what the function is supposed to accomplish.
    Better yet, this formulation simply does not depend on how the input or output
    set is represented.In sum, lists and sets are related in that both are about collections
    of values, but they also differ strongly:'
  id: totrans-1084
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¶ä¸”è¿™ä¸ªå˜ä½“æ¸…æ¥šåœ°è¯´æ˜äº†å‡½æ•°åº”è¯¥å®Œæˆä»€ä¹ˆã€‚æ›´å¥½çš„æ˜¯ï¼Œè¿™ä¸ªè¡¨è¿°æ ¹æœ¬ä¸ä¾èµ–äºè¾“å…¥æˆ–è¾“å‡ºé›†åˆçš„è¡¨ç¤ºæ–¹å¼ã€‚æ€»çš„æ¥è¯´ï¼Œåˆ—è¡¨å’Œé›†åˆéƒ½æ˜¯å…³äºå€¼é›†åˆçš„ï¼Œä½†å®ƒä»¬ä¹Ÿæœ‰æ˜¾è‘—çš„å·®å¼‚ï¼š
- en: '| property |  | lists |  | sets |'
  id: totrans-1085
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å±æ€§ |  | åˆ—è¡¨ |  | é›†åˆ |'
- en: '| membership |  | one among many |  | critical |'
  id: totrans-1086
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| æˆå‘˜å…³ç³» |  | å¤šè€…ä¹‹ä¸€ |  | å…³é”® |'
- en: '| ordering |  | critical |  | irrelevant |'
  id: totrans-1087
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| æ’åº |  | å…³é”® |  | ä¸ç›¸å…³ |'
- en: '| # of occurrences |  | sensible |  | irrelevant |'
  id: totrans-1088
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å‘ç”Ÿæ¬¡æ•° |  | åˆç† |  | ä¸ç›¸å…³ |'
- en: '| size |  | finite but arbitrary |  | finite or infinite |'
  id: totrans-1089
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å¤§å° |  | æœ‰é™ä½†ä»»æ„ |  | æœ‰é™æˆ–æ— é™ |'
- en: The last row in this table presents a new idea, though an obvious one, too.
    Many of the sets mentioned in this book are infinitely large, for example, [Number](part_one.html#%28tech._number%29),
    [String](part_one.html#%28tech._string%29), and also [List-of-strings](#%28tech._list._of._string%29).
    In contrast, a list is always finite though it may contain an arbitrarily large
    number of items.
  id: totrans-1090
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨æ ¼ä¸­çš„æœ€åä¸€è¡Œæå‡ºäº†ä¸€ä¸ªæ–°æƒ³æ³•ï¼Œå°½ç®¡å®ƒä¹Ÿå¾ˆæ˜æ˜¾ã€‚è¿™æœ¬ä¹¦ä¸­æåˆ°çš„è®¸å¤šé›†åˆéƒ½æ˜¯æ— é™å¤§çš„ï¼Œä¾‹å¦‚ï¼Œ[æ•°å­—](part_one.html#%28tech._number%29)ã€[å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)
    ä»¥åŠ [å­—ç¬¦ä¸²åˆ—è¡¨](#%28tech._list._of._string%29)ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåˆ—è¡¨æ€»æ˜¯æœ‰é™çš„ï¼Œå°½ç®¡å®ƒå¯èƒ½åŒ…å«ä»»æ„æ•°é‡çš„é¡¹ç›®ã€‚
- en: In sum, this section explains the essential differences between sets and lists
    and how to represent finite sets with finite lists in two different ways. BSL
    is not expressive enough to represent infinite sets; [exerciseÂ 299](part_three.html#%28counter._%28exercise._ex~3ainfinite-set%29%29)
    introduces a completely different representation of sets, a representation that
    can cope with infinite sets, too. The question of how actual programming languages
    represent sets is beyond the scope of this book, however.
  id: totrans-1091
  prefs: []
  type: TYPE_NORMAL
  zh: æ€»ç»“æ¥è¯´ï¼Œæœ¬èŠ‚è§£é‡Šäº†é›†åˆå’Œåˆ—è¡¨ä¹‹é—´çš„åŸºæœ¬åŒºåˆ«ï¼Œä»¥åŠå¦‚ä½•ä»¥ä¸¤ç§ä¸åŒçš„æ–¹å¼ç”¨æœ‰é™åˆ—è¡¨è¡¨ç¤ºæœ‰é™é›†åˆã€‚BSL è¡¨è¾¾èƒ½åŠ›ä¸è¶³ï¼Œæ— æ³•è¡¨ç¤ºæ— é™é›†åˆï¼›[ç»ƒä¹  299](part_three.html#%28counter._%28exercise._ex~3ainfinite-set%29%29)
    ä»‹ç»äº†é›†åˆçš„å¦ä¸€ç§å®Œå…¨ä¸åŒçš„è¡¨ç¤ºæ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿå¯ä»¥å¤„ç†æ— é™é›†åˆã€‚ç„¶è€Œï¼Œå…³äºå®é™…ç¼–ç¨‹è¯­è¨€å¦‚ä½•è¡¨ç¤ºé›†åˆçš„é—®é¢˜è¶…å‡ºäº†æœ¬ä¹¦çš„èŒƒå›´ã€‚
- en: ExerciseÂ 160\. Design the functions set+.L and set+.R, which create a set by
    adding a number x to some given set s for the left-hand and right-hand data definition,
    respectively.
  id: totrans-1092
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  160ã€‚è®¾è®¡å‡½æ•° set+.L å’Œ set+.Rï¼Œåˆ†åˆ«ç”¨äºåœ¨å·¦è¾¹çš„å’Œå³è¾¹çš„æ•°æ®å®šä¹‰ä¸­é€šè¿‡å‘æŸä¸ªç»™å®šçš„é›†åˆ s æ·»åŠ ä¸€ä¸ªæ•°å­— x æ¥åˆ›å»ºä¸€ä¸ªé›†åˆã€‚
- en: 10More on Lists[ğŸ”—](#(part._ch~3alists2) "Link to here")
  id: totrans-1093
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 10 æ›´å¤šå…³äºåˆ—è¡¨[ğŸ”—](#(part._ch~3alists2) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Lists are a versatile form of data that come with almost all languages now.
    Programmers have used them to build large applications, artificial intelligences,
    distributed systems, and more. This chapter illustrates some ideas from this world,
    including functions that create lists, data representations that call for structures
    inside of lists, and representing text files as lists.
  id: totrans-1094
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ—è¡¨æ˜¯å‡ ä¹æ‰€æœ‰è¯­è¨€éƒ½å…·å¤‡çš„çµæ´»æ•°æ®å½¢å¼ã€‚ç¨‹åºå‘˜ä»¬ä½¿ç”¨å®ƒä»¬æ„å»ºäº†å¤§å‹åº”ç”¨ç¨‹åºã€äººå·¥æ™ºèƒ½ã€åˆ†å¸ƒå¼ç³»ç»Ÿç­‰ç­‰ã€‚æœ¬ç« å±•ç¤ºäº†è¿™ä¸ªé¢†åŸŸçš„ä¸€äº›æƒ³æ³•ï¼ŒåŒ…æ‹¬åˆ›å»ºåˆ—è¡¨çš„å‡½æ•°ã€éœ€è¦åœ¨åˆ—è¡¨å†…éƒ¨è°ƒç”¨ç»“æ„çš„æ•°æ“šè¡¨ç¤ºï¼Œä»¥åŠå°†æ–‡æœ¬æ–‡ä»¶è¡¨ç¤ºä¸ºåˆ—è¡¨ã€‚
- en: 10.1Functions that Produce Lists[ğŸ”—](#(part._sec~3alist-produce) "Link to here")
  id: totrans-1095
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 10.1 ç”Ÿæˆåˆ—è¡¨çš„å‡½æ•°[ğŸ”—](#(part._sec~3alist-produce) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Here is a function for determining the wage of an hourly employee:'
  id: totrans-1096
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯ä¸€ä¸ªç”¨äºç¡®å®šæ¯å°æ—¶å·¥èµ„çš„å‘˜å·¥çš„å‡½æ•°ï¼š
- en: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-1097
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â computes the wage for h hours of work |'
  id: totrans-1098
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è®¡ç®— h å°æ—¶å·¥ä½œçš„å·¥èµ„ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wageÂ h)
    |'
  id: totrans-1099
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wageÂ h)
    |'
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 12Â h))
    |'
  id: totrans-1100
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 12Â h))
    |'
- en: It consumes the number of hours worked and produces the wage. A company that
    wishes to use payroll software isnâ€™t interested in this function, however. It
    wants one that computes the wages for all its employees.
  id: totrans-1101
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒæ¶ˆè€—å·¥ä½œçš„å°æ—¶æ•°å¹¶äº§ç”Ÿå·¥èµ„ã€‚ç„¶è€Œï¼Œä¸€ä¸ªå¸Œæœ›ä½¿ç”¨å·¥èµ„è½¯ä»¶çš„å…¬å¸å¯¹è¿™ç§å‡½æ•°ä¸æ„Ÿå…´è¶£ã€‚å®ƒæƒ³è¦ä¸€ä¸ªå¯ä»¥è®¡ç®—æ‰€æœ‰å‘˜å·¥å·¥èµ„çš„å‡½æ•°ã€‚
- en: Call this new function wage*. Its task is to process all employee work hours
    and to determine the wages due to each of them. For simplicity, letâ€™s assume that
    the input is a list of numbers, each representing the number of hours that one
    employee worked, and that the expected result is a list of the weekly wages earned,
    also represented with a list of numbers.
  id: totrans-1102
  prefs: []
  type: TYPE_NORMAL
  zh: å°†è¿™ä¸ªæ–°å‡½æ•°ç§°ä¸º wage*ã€‚å®ƒçš„ä»»åŠ¡æ˜¯å¤„ç†æ‰€æœ‰å‘˜å·¥çš„å·¥ä½œæ—¶é—´ï¼Œå¹¶ç¡®å®šæ¯ä¸ªå‘˜å·¥çš„åº”å¾—å·¥èµ„ã€‚ä¸ºäº†ç®€åŒ–ï¼Œè®©æˆ‘ä»¬å‡è®¾è¾“å…¥æ˜¯ä¸€ä¸ªä»£è¡¨ä¸€ä¸ªå‘˜å·¥å·¥ä½œå°æ—¶æ•°çš„æ•°å­—åˆ—è¡¨ï¼Œå¹¶ä¸”é¢„æœŸçš„ç»“æœæ˜¯æ¯å‘¨å·¥èµ„çš„åˆ—è¡¨ï¼Œä¹Ÿç”¨æ•°å­—åˆ—è¡¨è¡¨ç¤ºã€‚
- en: 'Since we already have a data definition for the inputs and outputs, we can
    immediately move to the second design step:'
  id: totrans-1103
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘ä»¬å·²ç»æœ‰è¾“å…¥å’Œè¾“å‡ºçš„æ•°æ®å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ç«‹å³è¿›å…¥ç¬¬äºŒä¸ªè®¾è®¡æ­¥éª¤ï¼š
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1104
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
- en: '| ;Â computes the weekly wages for the weekly hours |'
  id: totrans-1105
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è®¡ç®—æ¯å‘¨çš„å·¥èµ„ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*Â whrs)
    |'
  id: totrans-1106
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*Â whrs)
    |'
- en: '| Â Â ''()) |'
  id: totrans-1107
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ''()) |'
- en: 'Next you need some examples of inputs and the corresponding outputs. So you
    make up some short lists of numbers that represent weekly hours:'
  id: totrans-1108
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ä½ éœ€è¦ä¸€äº›è¾“å…¥ç¤ºä¾‹å’Œç›¸åº”çš„è¾“å‡ºã€‚å› æ­¤ï¼Œä½ åˆ›å»ºäº†ä¸€äº›ä»£è¡¨æ¯å‘¨å·¥ä½œæ—¶é—´çš„çŸ­æ•°å­—åˆ—è¡¨ï¼š
- en: '| given |  | expected |'
  id: totrans-1109
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ç»™å®š |  | é¢„æœŸ |'
- en: '| ''() |  | ''() |'
  id: totrans-1110
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''() |  | ''() |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  28  ''())
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  336  ''())
    |'
  id: totrans-1111
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  28  ''())
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  336  ''())
    |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  4  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ''()))
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  48  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  24  ''()))
    |'
  id: totrans-1112
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  4  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ''()))
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  48  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  24  ''()))
    |'
- en: In order to compute the output, you determine the weekly wage for each number
    on the given input list. For the first example, there are no numbers on the input
    list so the output is '(). Make sure you understand why the second and third expected
    outputs are what you want.
  id: totrans-1113
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è®¡ç®—è¾“å‡ºï¼Œä½ éœ€è¦ç¡®å®šç»™å®šè¾“å…¥åˆ—è¡¨ä¸­æ¯ä¸ªæ•°å­—çš„æ¯å‘¨å·¥èµ„ã€‚å¯¹äºç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œè¾“å…¥åˆ—è¡¨ä¸­æ²¡æœ‰æ•°å­—ï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯'()ã€‚ç¡®ä¿ä½ ç†è§£ä¸ºä»€ä¹ˆç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªé¢„æœŸè¾“å‡ºæ˜¯ä½ æƒ³è¦çš„ã€‚
- en: 'Given that wage* consumes the same kind of data as several other functions
    from [Lists](#%28part._ch~3alists1%29) and given that a template depends only
    on the shape of the data definition, you can reuse this template:'
  id: totrans-1114
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº`wage*`æ¶ˆè€—ä¸[åˆ—è¡¨](#%28part._ch~3alists1%29)ä¸­å…¶ä»–å‡ ä¸ªå‡½æ•°ç›¸åŒç±»å‹çš„æ•°æ®ï¼Œå¹¶ä¸”ç”±äºæ¨¡æ¿åªä¾èµ–äºæ•°æ®å®šä¹‰çš„å½¢çŠ¶ï¼Œä½ å¯ä»¥é‡ç”¨æ­¤æ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*Â whrs)
    |'
  id: totrans-1115
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*Â whrs)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1116
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â whrs)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1117
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â whrs)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â whrs)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1118
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â whrs)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (wage*Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â whrs))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1119
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (wage*Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â whrs))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: In case you want to practice the development of templates, use the questions
    from [figureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29).
  id: totrans-1120
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æƒ³ç»ƒä¹ æ¨¡æ¿çš„å¼€å‘ï¼Œè¯·ä½¿ç”¨[å›¾52](#%28counter._%28figure._fig~3atemplate-q%29%29)ä¸­çš„é—®é¢˜ã€‚
- en: It is now time for the most creative design step. Following the design recipe,
    we consider each [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line of the template in isolation. For the non-recursive case, ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  whrs)
    is true, meaning the input is '(). The examples from above specify the desired
    answer, '(), and so we are done.
  id: totrans-1121
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æ˜¯è¿›è¡Œæœ€å…·åˆ›é€ æ€§çš„è®¾è®¡æ­¥éª¤çš„æ—¶å€™äº†ã€‚æŒ‰ç…§è®¾è®¡é£Ÿè°±ï¼Œæˆ‘ä»¬å•ç‹¬è€ƒè™‘æ¨¡æ¿ä¸­çš„æ¯ä¸€è¡Œ[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)ã€‚å¯¹äºéé€’å½’æƒ…å†µï¼Œ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    whrs)ä¸ºçœŸï¼Œæ„å‘³ç€è¾“å…¥æ˜¯'()ã€‚ä¸Šé¢çš„ä¾‹å­æŒ‡å®šäº†æœŸæœ›çš„ç­”æ¡ˆ'()ï¼Œå› æ­¤æˆ‘ä»¬å·²ç»å®Œæˆäº†ã€‚
- en: 'In the second case, the design questions tell us to state what each expression
    of the template computes:'
  id: totrans-1122
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œè®¾è®¡é—®é¢˜å‘Šè¯‰æˆ‘ä»¬è¯´æ˜æ¨¡æ¿ä¸­çš„æ¯ä¸ªè¡¨è¾¾å¼è®¡ç®—ä»€ä¹ˆï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  whrs)
    yields the first number on whrs, which is the first number of hours worked;
  id: totrans-1123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    whrs) è¿”å›whrsä¸Šçš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œå³ç¬¬ä¸€ä¸ªå·¥ä½œå°æ—¶æ•°ï¼›
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  whrs)
    is the rest of the given list; and
  id: totrans-1124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    whrs) æ˜¯ç»™å®šåˆ—è¡¨çš„å‰©ä½™éƒ¨åˆ†ï¼›
- en: (wage*  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  whrs))
    says that the rest is processed by the very function we are defining. As always,
    we use its signature and its purpose statement to figure out the result of this
    expression. The signature tells us that it is a list of numbers, and the purpose
    statement explains that this list represents the list of wages for its input,
    which is the rest of the list of hours.
  id: totrans-1125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (wage*  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    whrs)) è¡¨ç¤ºå‰©ä½™éƒ¨åˆ†å°†ç”±æˆ‘ä»¬æ­£åœ¨å®šä¹‰çš„å‡½æ•°å¤„ç†ã€‚ä¸€å¦‚æ—¢å¾€ï¼Œæˆ‘ä»¬ä½¿ç”¨å…¶ç­¾åå’Œå…¶ç›®çš„è¯´æ˜æ¥æ‰¾å‡ºè¿™ä¸ªè¡¨è¾¾å¼çš„ç»“æœã€‚ç­¾åå‘Šè¯‰æˆ‘ä»¬å®ƒæ˜¯ä¸€ä¸ªæ•°å­—åˆ—è¡¨ï¼Œè€Œç›®çš„è¯´æ˜è§£é‡Šè¯´è¿™ä¸ªåˆ—è¡¨ä»£è¡¨è¾“å…¥çš„å·¥èµ„åˆ—è¡¨ï¼Œå³å°æ—¶åˆ—è¡¨çš„å‰©ä½™éƒ¨åˆ†ã€‚
- en: 'The key is to rely on these facts when you formulate the expression that computes
    the result in this case, even if the function is not yet defined.Since we already
    have the list of wages for all but the first item of whrs, the function must perform
    two computations to produce the expected output for the entire whrs: compute the
    weekly wage for ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  whrs)
    and construct the list that represents all weekly wages for whrs. For the first
    part, we reuse wage. For the second, we [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    the two pieces of information together into one list:'
  id: totrans-1126
  prefs: []
  type: TYPE_NORMAL
  zh: å…³é”®åœ¨äºåœ¨åˆ¶å®šè®¡ç®—ç»“æœçš„è¿™ä¸ªè¡¨è¾¾å¼çš„è¿‡ç¨‹ä¸­ï¼Œå³ä½¿å‡½æ•°å°šæœªå®šä¹‰ï¼Œä¹Ÿè¦ä¾èµ–è¿™äº›äº‹å®ã€‚ç”±äºæˆ‘ä»¬å·²ç»æœ‰é™¤äº†whrsçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å¤–çš„æ‰€æœ‰å·¥èµ„åˆ—è¡¨ï¼Œå‡½æ•°å¿…é¡»æ‰§è¡Œä¸¤ä¸ªè®¡ç®—æ¥ç”Ÿæˆæ•´ä¸ªwhrsçš„é¢„æœŸè¾“å‡ºï¼šè®¡ç®—([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    whrs))çš„æ¯å‘¨å·¥èµ„ï¼Œå¹¶æ„å»ºä»£è¡¨whrsæ‰€æœ‰æ¯å‘¨å·¥èµ„çš„åˆ—è¡¨ã€‚å¯¹äºç¬¬ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬é‡ç”¨wageã€‚å¯¹äºç¬¬äºŒéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†è¿™ä¸¤éƒ¨åˆ†ä¿¡æ¯ç»„åˆæˆä¸€ä¸ªåˆ—è¡¨ï¼š[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ã€‚
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (wageÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â whrs))Â (wage*Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â whrs)))
  id: totrans-1127
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    (wage ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    whrs)) ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    whrs)))
- en: 'And with that, the definition is complete: see [figureÂ 64](#%28counter._%28figure._fig~3awage%2A%29%29).'
  id: totrans-1128
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰äº†è¿™ä¸ªå®šä¹‰ï¼Œæ•´ä¸ªå®šä¹‰å°±å®Œæˆäº†ï¼šå‚è§[å›¾64](#%28counter._%28figure._fig~3awage%2A%29%29)ã€‚
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1129
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
- en: '| ;Â computes the weekly wages for all given weekly hours |'
  id: totrans-1130
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â computes the weekly wages for all given weekly hours |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*Â whrs)
    |'
  id: totrans-1131
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*Â whrs)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1132
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â whrs)Â ''()]
    |'
  id: totrans-1133
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â whrs)Â ''()]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (wageÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â whrs))Â (wage*Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â whrs)))]))
    |'
  id: totrans-1134
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (wageÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â whrs))Â (wage*Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â whrs)))]))
    |'
- en: '| Â  |'
  id: totrans-1135
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-1136
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â computes the wage for h hours of work |'
  id: totrans-1137
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â computes the wage for h hours of work |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wageÂ h)
    |'
  id: totrans-1138
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wageÂ h)
    |'
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 12Â h))
    |'
  id: totrans-1139
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 12Â h))
    |'
- en: ''
  id: totrans-1140
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 64: Computing the wages of all employees'
  id: totrans-1141
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾64ï¼šè®¡ç®—æ‰€æœ‰å‘˜å·¥çš„å·¥èµ„
- en: ExerciseÂ 161\. Translate the examples into tests and make sure they all succeed.
    Then change the function in [figureÂ 64](#%28counter._%28figure._fig~3awage%2A%29%29)
    so that everyone gets $14 per hour. Now revise the entire program so that changing
    the wage for everyone is a single change to the entire program and not several.
  id: totrans-1142
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 161ã€‚å°†ç¤ºä¾‹è½¬æ¢ä¸ºæµ‹è¯•ï¼Œå¹¶ç¡®ä¿å®ƒä»¬éƒ½æˆåŠŸã€‚ç„¶åä¿®æ”¹[å›¾64](#%28counter._%28figure._fig~3awage%2A%29%29)ä¸­çš„å‡½æ•°ï¼Œä»¥ä¾¿æ¯ä¸ªäººéƒ½èƒ½å¾—åˆ°æ¯å°æ—¶14ç¾å…ƒã€‚ç°åœ¨ä¿®æ”¹æ•´ä¸ªç¨‹åºï¼Œä»¥ä¾¿æ›´æ”¹æ¯ä¸ªäººçš„å·¥èµ„åªéœ€å¯¹æ•´ä¸ªç¨‹åºè¿›è¡Œä¸€æ¬¡æ›´æ”¹ï¼Œè€Œä¸æ˜¯å¤šæ¬¡æ›´æ”¹ã€‚
- en: ExerciseÂ 162\. No employee could possibly work more than 100 hours per week.
    To protect the company against fraud, the function should check that no item of
    the input list of wage* exceeds 100\. If one of them does, the function should
    immediately signal an error. How do we have to change the function in [figureÂ 64](#%28counter._%28figure._fig~3awage%2A%29%29)
    if we want to perform this basic reality check?
  id: totrans-1143
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 162ã€‚æ²¡æœ‰ä»»ä½•å‘˜å·¥å¯èƒ½æ¯å‘¨å·¥ä½œè¶…è¿‡100å°æ—¶ã€‚ä¸ºäº†ä¿æŠ¤å…¬å¸å…å—æ¬ºè¯ˆï¼Œè¯¥å‡½æ•°åº”æ£€æŸ¥è¾“å…¥å·¥èµ„åˆ—è¡¨ä¸­çš„ä»»ä½•ä¸€é¡¹æ˜¯å¦ä¸è¶…è¿‡100ã€‚å¦‚æœå…¶ä¸­ä¹‹ä¸€è¶…è¿‡äº†ï¼Œå‡½æ•°åº”ç«‹å³å‘å‡ºé”™è¯¯ä¿¡å·ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ‰§è¡Œè¿™é¡¹åŸºæœ¬ç°å®æ£€æŸ¥ï¼Œæˆ‘ä»¬å¦‚ä½•ä¿®æ”¹[å›¾64](#%28counter._%28figure._fig~3awage%2A%29%29)ä¸­çš„å‡½æ•°ï¼Ÿ
- en: Show the products of the various steps in the design recipe. If you are stuck,
    show someone how far you got according to the design recipe. The recipe isnâ€™t
    just a design tool for you to use; it is also a diagnosis system so that others
    can help you help yourself.
  id: totrans-1144
  prefs: []
  type: TYPE_NORMAL
  zh: å±•ç¤ºè®¾è®¡è¿‡ç¨‹ä¸­çš„å„ä¸ªæ­¥éª¤çš„äº§å“ã€‚å¦‚æœä½ å¡ä½äº†ï¼Œå±•ç¤ºä½ æ ¹æ®è®¾è®¡è¿‡ç¨‹æ‰€å–å¾—çš„è¿›å±•ã€‚è¿™ä¸ªé…æ–¹ä¸ä»…ä»…æ˜¯ä½ ä½¿ç”¨çš„å·¥å…·ï¼›å®ƒä¹Ÿæ˜¯ä¸€ä¸ªè¯Šæ–­ç³»ç»Ÿï¼Œä»¥ä¾¿ä»–äººå¯ä»¥å¸®åŠ©ä½ è‡ªåŠ©ã€‚
- en: ExerciseÂ 163\. Design convertFC. The function converts a list of measurements
    in Fahrenheit to a list of Celsius measurements.
  id: totrans-1145
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 163ã€‚è®¾è®¡convertFCå‡½æ•°ã€‚è¯¥å‡½æ•°å°†åæ°æ¸©åº¦çš„æµ‹é‡å€¼åˆ—è¡¨è½¬æ¢ä¸ºæ‘„æ°æ¸©åº¦çš„æµ‹é‡å€¼åˆ—è¡¨ã€‚
- en: ExerciseÂ 164\. Design the function convert-euro, which converts a list of US$
    amounts into a list of â‚¬ amounts. Look up the current exchange rate on the web.
  id: totrans-1146
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 164ã€‚è®¾è®¡å‡½æ•°convert-euroï¼Œè¯¥å‡½æ•°å°†ç¾å…ƒé‡‘é¢åˆ—è¡¨è½¬æ¢ä¸ºæ¬§å…ƒé‡‘é¢åˆ—è¡¨ã€‚åœ¨ç½‘ä¸ŠæŸ¥æ‰¾å½“å‰çš„æ±‡ç‡ã€‚
- en: Generalize convert-euro to the function convert-euro*, which consumes an exchange
    rate and a list of US$ amounts and converts the latter into a list of â‚¬ amounts.
  id: totrans-1147
  prefs: []
  type: TYPE_NORMAL
  zh: å°†convert-euroæ³›åŒ–ä¸ºå‡½æ•°convert-euro*ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªæ±‡ç‡å’Œä¸€ä¸ªç¾å…ƒé‡‘é¢åˆ—è¡¨ï¼Œå¹¶å°†åè€…è½¬æ¢ä¸ºæ¬§å…ƒé‡‘é¢åˆ—è¡¨ã€‚
- en: ExerciseÂ 165\. Design the function subst-robot, which consumes a list of toy
    descriptions (one-word strings) and replaces all occurrences of "robot" with "r2d2";
    all other descriptions remain the same.
  id: totrans-1148
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 165ã€‚è®¾è®¡å‡½æ•°subst-robotï¼Œè¯¥å‡½æ•°æ¥å—ç©å…·æè¿°åˆ—è¡¨ï¼ˆå•å­—å­—ç¬¦ä¸²ï¼‰å¹¶æ›¿æ¢æ‰€æœ‰â€œrobotâ€çš„å‡ºç°ä¸ºâ€œr2d2â€ï¼›æ‰€æœ‰å…¶ä»–æè¿°ä¿æŒä¸å˜ã€‚
- en: Generalize subst-robot to substitute. The latter consumes two strings, called
    new and old, and a list of strings. It produces a new list of strings by substituting
    all occurrences of old with new.
  id: totrans-1149
  prefs: []
  type: TYPE_NORMAL
  zh: å°†subst-robotæ³›åŒ–ä¸ºæ›¿æ¢å‡½æ•°ã€‚åè€…æ¥å—ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œç§°ä¸ºnewå’Œoldï¼Œä»¥åŠä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ã€‚å®ƒé€šè¿‡å°†æ‰€æœ‰oldæ›¿æ¢ä¸ºnewæ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²åˆ—è¡¨ã€‚
- en: 10.2Structures in Lists[ğŸ”—](#(part._sec~3asil) "Link to here")
  id: totrans-1150
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 10.2 åˆ—è¡¨ä¸­çš„ç»“æ„[ğŸ”—](#(part._sec~3asil) "é“¾æ¥åˆ°è¿™é‡Œ")
- en: Representing a work week as a number is a bad choice because the printing of
    a paycheck requires more information than hours worked per week. Also, not all
    employees earn the same amount per hour. Fortunately a list may contain items
    other than atomic values; indeed, lists may contain whatever values we want, especially
    structures.
  id: totrans-1151
  prefs: []
  type: TYPE_NORMAL
  zh: å°†å·¥ä½œå‘¨è¡¨ç¤ºä¸ºä¸€ä¸ªæ•°å­—æ˜¯ä¸€ä¸ªç³Ÿç³•çš„é€‰æ‹©ï¼Œå› ä¸ºæ‰“å°å·¥èµ„æ¡éœ€è¦æ¯”æ¯å‘¨å·¥ä½œå°æ—¶æ•°æ›´å¤šçš„ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œå¹¶éæ‰€æœ‰å‘˜å·¥æ¯å°æ—¶çš„æ”¶å…¥éƒ½ç›¸åŒã€‚å¹¸è¿çš„æ˜¯ï¼Œåˆ—è¡¨å¯ä»¥åŒ…å«é™¤äº†åŸå­å€¼ä¹‹å¤–çš„é¡¹ç›®ï¼›å®é™…ä¸Šï¼Œåˆ—è¡¨å¯ä»¥åŒ…å«æˆ‘ä»¬æƒ³è¦çš„ä»»ä½•å€¼ï¼Œå°¤å…¶æ˜¯ç»“æ„ã€‚
- en: 'Our running example calls for just such a data representation. Instead of numbers,
    we use structures that represent employees plus their work hours and pay rates:'
  id: totrans-1152
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„è¿è¡Œç¤ºä¾‹éœ€è¦è¿™æ ·çš„æ•°æ®è¡¨ç¤ºã€‚æˆ‘ä»¬ä¸ç”¨æ•°å­—ï¼Œè€Œæ˜¯ä½¿ç”¨è¡¨ç¤ºå‘˜å·¥åŠå…¶å·¥ä½œæ—¶é—´å’Œå·¥èµ„ç‡çš„ç»“æ„ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â workÂ [employeeÂ rateÂ hours])
    |'
  id: totrans-1153
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â workÂ [employeeÂ rateÂ hours])
    |'
- en: '| ;Â A (piece of) Work is a structure: |'
  id: totrans-1154
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A (piece of) Work is a structure: |'
- en: '| ;Â Â Â (make-work  [String](part_one.html#%28tech._string%29)  [Number](part_one.html#%28tech._number%29)  [Number](part_one.html#%28tech._number%29))
    |'
  id: totrans-1155
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-work  [String](part_one.html#%28tech._string%29)  [Number](part_one.html#%28tech._number%29)  [Number](part_one.html#%28tech._number%29))
    |'
- en: '| ;Â interpretation  (make-work  n  r  h) combines the name |'
  id: totrans-1156
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation  (make-work  n  r  h) combines the name |'
- en: '| ;Â with the pay rate r and the number of hours h |'
  id: totrans-1157
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â with the pay rate r and the number of hours h |'
- en: 'While this representation is still simplistic, it is just enough of an additional
    challenge because it forces us to formulate a data definition for lists that contain
    structures:'
  id: totrans-1158
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶è¿™ç§è¡¨ç¤ºä»ç„¶å¾ˆç®€å•ï¼Œä½†å®ƒå¢åŠ äº†ä¸€ä¸ªé¢å¤–çš„æŒ‘æˆ˜ï¼Œå› ä¸ºå®ƒè¿«ä½¿æˆ‘ä»¬ä¸ºåŒ…å«ç»“æ„çš„åˆ—è¡¨åˆ¶å®šæ•°æ®å®šä¹‰ï¼š
- en: '| ;Â Low (short for list of works) is one of: |'
  id: totrans-1159
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Low (short for list of works) is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-1160
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  Work  Low)
    |'
  id: totrans-1161
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  Work  Low)
    |'
- en: '| ;Â interpretation an instance of Low represents the |'
  id: totrans-1162
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation an instance of Low represents the |'
- en: '| ;Â hours worked for a number of employees |'
  id: totrans-1163
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â hours worked for a number of employees |'
- en: 'Here are three elements of [Low](#%28tech._low%29):'
  id: totrans-1164
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯[Low](#%28tech._low%29)çš„ä¸‰ä¸ªå…ƒç´ ï¼š
- en: '| ''() |'
  id: totrans-1165
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ''() |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)
    |'
  id: totrans-1166
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)
    |'
- en: '| Â Â Â Â Â Â ''()) |'
  id: totrans-1167
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ''()) |'
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Matthew"Â 12.95Â 45)
    |'
  id: totrans-1168
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Matthew"Â 12.95Â 45)
    |'
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)
    |'
  id: totrans-1169
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ''())) |'
  id: totrans-1170
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ''())) |'
- en: Use the data definition to explain why these pieces of data belong to [Low](#%28tech._low%29).
  id: totrans-1171
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æ•°æ®å®šä¹‰æ¥è§£é‡Šä¸ºä»€ä¹ˆè¿™äº›æ•°æ®å±äº[Low](#%28tech._low%29)ã€‚
- en: Stop! Also use the data definition to generate two more examples.
  id: totrans-1172
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼è¿˜è¦ä½¿ç”¨æ•°æ®å®šä¹‰ç”Ÿæˆä¸¤ä¸ªæ›´å¤šç¤ºä¾‹ã€‚
- en: When you work on real-world projects, you wonâ€™t use such suffixes; instead you
    will use a tool for managing different versions of code.
  id: totrans-1173
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å½“ä½ å¤„ç†ç°å®ä¸–ç•Œçš„é¡¹ç›®æ—¶ï¼Œä½ ä¸ä¼šä½¿ç”¨è¿™æ ·çš„åç¼€ï¼›ç›¸åï¼Œä½ å°†ä½¿ç”¨ä¸€ä¸ªç”¨äºç®¡ç†ä»£ç ä¸åŒç‰ˆæœ¬çš„å·¥å…·ã€‚
- en: 'Now that you know that the definition of [Low](#%28tech._low%29) makes sense,
    it is time to redesign the function wage* so that it consumes elements of [Low](#%28tech._low%29),
    not just lists of numbers:'
  id: totrans-1174
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä½ å·²ç»çŸ¥é“[ä½](#%28tech._low%29)çš„å®šä¹‰æ˜¯æœ‰æ„ä¹‰çš„ï¼Œæ˜¯æ—¶å€™é‡æ–°è®¾è®¡å‡½æ•°wage*ï¼Œä½¿å…¶æ¶ˆè€—[ä½](#%28tech._low%29)çš„å…ƒç´ ï¼Œè€Œä¸ä»…ä»…æ˜¯æ•°å­—åˆ—è¡¨ï¼š
- en: '| ;Â [Low](#%28tech._low%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1175
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Low](#%28tech._low%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
- en: '| ;Â computes the weekly wages for the given records |'
  id: totrans-1176
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è®¡ç®—ç»™å®šè®°å½•çš„æ¯å‘¨å·¥èµ„ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
  id: totrans-1177
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
- en: '| Â Â ''()) |'
  id: totrans-1178
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ''()) |'
- en: The suffix â€œ.v2â€ at the end of the function name informs every reader of the
    code that this is a second, revised version of the function. In this case, the
    revision starts with a new signature and an adapted purpose statement. The header
    is the same as above.
  id: totrans-1179
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°åæœ«å°¾çš„â€œv2â€åç¼€é€šçŸ¥ä»£ç çš„æ¯ä¸ªè¯»è€…ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°çš„ç¬¬äºŒç‰ˆï¼Œå³ä¿®è®¢ç‰ˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¿®è®¢ä»æ–°çš„ç­¾åå’Œé€‚åº”çš„ç›®çš„å£°æ˜å¼€å§‹ã€‚æ ‡é¢˜ä¸ä¸Šé¢ç›¸åŒã€‚
- en: The third step of the design recipe is to work through an example. Letâ€™s start
    with the second list above. It contains one work record, namely, (make-work  "Robby"  11.95  39).
    Its interpretation is that "Robby" worked for 39 hours and that he is paid at
    the rate of $11.95 per hour. Hence his wage for the week is $466.05, that is,
    ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  11.95  39).
    The desired result for wage*.v2 is therefore ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  466.05  '()).
    Naturally, if the input list contained two work records, we would perform this
    kind of computation twice, and the result would be a list of two numbers. Stop!
    Determine the expected result for the third data example above.
  id: totrans-1180
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡é£Ÿè°±çš„ç¬¬ä¸‰æ­¥æ˜¯å¤„ç†ä¸€ä¸ªç¤ºä¾‹ã€‚è®©æˆ‘ä»¬ä»ä¸Šé¢çš„ç¬¬äºŒä¸ªåˆ—è¡¨å¼€å§‹ã€‚å®ƒåŒ…å«ä¸€ä¸ªå·¥ä½œè®°å½•ï¼Œå³(make-work "Robby" 11.95 39)ã€‚å®ƒçš„è§£é‡Šæ˜¯â€œRobbyâ€å·¥ä½œäº†39å°æ—¶ï¼Œå¹¶ä¸”ä»–æŒ‰æ¯å°æ—¶11.95ç¾å…ƒçš„è´¹ç‡æ”¯ä»˜ã€‚å› æ­¤ï¼Œä»–ä¸€å‘¨çš„å·¥èµ„æ˜¯466.05ç¾å…ƒï¼Œå³([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)
    11.95  39)ã€‚å› æ­¤ï¼Œwage*.v2çš„æœŸæœ›ç»“æœæ˜¯([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    466.05  '())ã€‚å½“ç„¶ï¼Œå¦‚æœè¾“å…¥åˆ—è¡¨åŒ…å«ä¸¤ä¸ªå·¥ä½œè®°å½•ï¼Œæˆ‘ä»¬å°†æ‰§è¡Œè¿™ç§è®¡ç®—ä¸¤æ¬¡ï¼Œç»“æœå°†æ˜¯ä¸¤ä¸ªæ•°å­—çš„åˆ—è¡¨ã€‚åœæ­¢ï¼ç¡®å®šä¸Šé¢ç¬¬ä¸‰ä¸ªæ•°æ®ç¤ºä¾‹çš„æœŸæœ›ç»“æœã€‚
- en: Note on Numbers Keep in mind that BSLâ€”<wbr>unlike most other programming languagesâ€”<wbr>understands
    decimal numbers just like you do, namely, as exact fractions. A language such
    as Java, for example, would produce 466.04999999999995 for the expected wage of
    the first work record. Since you cannot predict when operations on decimal numbers
    behave in this strange way, you are better off writing down such examples as
  id: totrans-1181
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºæ•°å­—çš„è¯´æ˜è¯·è®°ä½ï¼ŒBSLâ€”â€”ä¸å¤§å¤šæ•°å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸åŒâ€”â€”ç†è§£åè¿›åˆ¶æ•°å­—å°±åƒä½ ä¸€æ ·ï¼Œå³ä½œä¸ºç²¾ç¡®çš„åˆ†æ•°ã€‚ä¾‹å¦‚ï¼ŒJavaè¿™æ ·çš„è¯­è¨€ä¼šäº§ç”Ÿ466.04999999999995ä½œä¸ºç¬¬ä¸€ä¸ªå·¥ä½œè®°å½•çš„æœŸæœ›å·¥èµ„ã€‚ç”±äºä½ æ— æ³•é¢„æµ‹åè¿›åˆ¶æ•°å­—æ“ä½œä½•æ—¶ä»¥è¿™ç§æ–¹å¼è¡¨ç°å¼‚å¸¸ï¼Œä½ æœ€å¥½å°†è¿™äº›ç¤ºä¾‹å†™æˆè¿™æ ·ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-1182
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (wage*.v2 |'
  id: totrans-1183
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (wage*.v2 |'
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)Â ''()))
    |'
  id: totrans-1184
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)Â ''()))
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 11.95Â 39)Â ''()))
    |'
  id: totrans-1185
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 11.95Â 39)Â ''()))
    |'
- en: 'just to prepare yourself for other programming languages. Then again, writing
    down the example in this style also means you have really figured out how to compute
    the wage. EndFrom here we move on to the development of the template. If you use
    the template questions, you quickly get this much:'
  id: totrans-1186
  prefs: []
  type: TYPE_NORMAL
  zh: ä»…ä¸ºäº†è®©è‡ªå·±ä¸ºå…¶ä»–ç¼–ç¨‹è¯­è¨€åšå¥½å‡†å¤‡ã€‚ç„¶åï¼Œå†æ¬¡ï¼Œç”¨è¿™ç§é£æ ¼å†™ä¸‹ç¤ºä¾‹ä¹Ÿæ„å‘³ç€ä½ çœŸæ­£å¼„æ‡‚äº†å¦‚ä½•è®¡ç®—å·¥èµ„ã€‚ä»è¿™é‡Œå¼€å§‹ï¼Œæˆ‘ä»¬è½¬å‘æ¨¡æ¿çš„å¼€å‘ã€‚å¦‚æœä½ ä½¿ç”¨æ¨¡æ¿é—®é¢˜ï¼Œä½ ä¼šå¾ˆå¿«å¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
  id: totrans-1187
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1188
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1189
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)
    |'
  id: totrans-1190
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1191
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1192
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'because the data definition consists of two clauses, because it introduces
    ''() in the first clause and [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    structures in the second, and so on. But you also realize that you know even more
    about the input than this template expresses. For example, you know that ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  an-low)
    extracts a structure of three fields from the given list. This seems to suggest
    the addition of three more expressions to the template:'
  id: totrans-1193
  prefs: []
  type: TYPE_NORMAL
  zh: å› ä¸ºæ•°æ®å®šä¹‰ç”±ä¸¤ä¸ªå­å¥ç»„æˆï¼Œå› ä¸ºå®ƒåœ¨ç¬¬ä¸€ä¸ªå­å¥ä¸­å¼•å…¥äº†'()ï¼Œåœ¨ç¬¬äºŒä¸ªå­å¥ä¸­å¼•å…¥äº†[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)edç»“æ„ï¼Œç­‰ç­‰ã€‚ä½†ä½ åŒæ—¶ä¹Ÿæ„è¯†åˆ°ï¼Œä½ å¯¹è¾“å…¥çš„äº†è§£ç”šè‡³æ¯”è¿™ä¸ªæ¨¡æ¿è¡¨è¾¾çš„å†…å®¹è¿˜è¦å¤šã€‚ä¾‹å¦‚ï¼Œä½ çŸ¥é“([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  an-low)ä»ç»™å®šçš„åˆ—è¡¨ä¸­æå–äº†ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå­—æ®µçš„ç»“æ„çš„ä¾‹å­ã€‚è¿™ä¼¼ä¹è¡¨æ˜éœ€è¦åœ¨æ¨¡æ¿ä¸­æ·»åŠ ä¸‰ä¸ªé¢å¤–çš„è¡¨è¾¾å¼ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
  id: totrans-1194
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1195
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1196
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)
    |'
  id: totrans-1197
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1198
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-employeeÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1199
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (å‘˜å·¥å·¥ä½œÂ ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-rateÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1200
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (å·¥ä½œé€Ÿç‡Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-hoursÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1201
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (å·¥ä½œå°æ—¶Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1202
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â (å·¥èµ„.v2Â ([å‰©ä½™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'This template lists all potentially interesting data.We use a different strategy
    here. Specifically, we suggest that you create and refer to a separate function
    template whenever you are developing a template for a data definition that refers
    to other data definitions:'
  id: totrans-1203
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæ¨¡æ¿åˆ—å‡ºäº†æ‰€æœ‰å¯èƒ½æœ‰è¶£çš„æ•°æ®ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œé‡‡ç”¨ä¸åŒçš„ç­–ç•¥ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å»ºè®®åœ¨å¼€å‘å¼•ç”¨å…¶ä»–æ•°æ®å®šä¹‰çš„æ•°æ®å®šä¹‰æ¨¡æ¿æ—¶ï¼Œåˆ›å»ºå¹¶å¼•ç”¨ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°æ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
  id: totrans-1204
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1205
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1206
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)
    |'
  id: totrans-1207
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (for-workÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))
    |'
  id: totrans-1208
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (for-workÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1209
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: '| Â  |'
  id: totrans-1210
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Work](#%28tech._work%29) -> ??? |'
  id: totrans-1211
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [å·¥ä½œ](#%28tech._work%29) -> ??? |'
- en: '| ;Â a template for processing elements of [Work](#%28tech._work%29) |'
  id: totrans-1212
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¤„ç†[å·¥ä½œ](#%28tech._work%29)å…ƒç´ çš„æ¨¡æ¿ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (for-workÂ w)
    |'
  id: totrans-1213
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (for-workÂ w)
    |'
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-employeeÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1214
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-employeeÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-rateÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1215
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-rateÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-hoursÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  id: totrans-1216
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-hoursÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
- en: 'Splitting the templates leads to a natural partition of work into functions
    and among functions; none of them grows too large, and all of them relate to a
    specific data definition.Finally, you are ready to program. As always you start
    with the simple-looking case, which is the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line here. If wage*.v2 is applied to ''(), you expect ''() back and that settles
    it. Next you move on to the second line and remind yourself of what these expressions
    compute:'
  id: totrans-1217
  prefs: []
  type: TYPE_NORMAL
  zh: å°†æ¨¡æ¿æ‹†åˆ†ä¼šå¯¼è‡´å·¥ä½œè‡ªç„¶åœ°åˆ†ä¸ºå‡½æ•°å’Œå‡½æ•°ä¹‹é—´ï¼›å®ƒä»¬éƒ½ä¸ä¼šå˜å¾—å¤ªå¤§ï¼Œå¹¶ä¸”éƒ½ä¸ç‰¹å®šçš„æ•°æ®å®šä¹‰ç›¸å…³ã€‚æœ€åï¼Œä½ å°±å¯ä»¥å¼€å§‹ç¼–ç¨‹äº†ã€‚ä¸€å¦‚æ—¢å¾€ï¼Œä½ ä»çœ‹èµ·æ¥ç®€å•çš„æ¡ˆä¾‹å¼€å§‹ï¼Œè¿™é‡Œæ˜¯ç¬¬ä¸€ä¸ª[æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)è¡Œã€‚å¦‚æœå°†wage*.v2åº”ç”¨äº'()ï¼Œä½ æœŸæœ›è¿”å›'()å¹¶å°±æ­¤è§£å†³ã€‚æ¥ä¸‹æ¥ï¼Œä½ ç»§ç»­åˆ°ç¬¬äºŒè¡Œï¼Œå¹¶æé†’è‡ªå·±è¿™äº›è¡¨è¾¾å¼è®¡ç®—çš„å†…å®¹ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  an-low)
    extracts the first work structure from the list;
  id: totrans-1218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  an-low)
    ä»åˆ—è¡¨ä¸­æå–ç¬¬ä¸€ä¸ªå·¥ä½œç»“æ„ï¼›
- en: (for-work  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    says that you wish to design a function that processes work structures;
  id: totrans-1219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (for-work  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29])
    è¡¨ç¤ºä½ å¸Œæœ›è®¾è®¡ä¸€ä¸ªå¤„ç†å·¥ä½œç»“æ„çš„å‡½æ•°ï¼›
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  an-low)
    extracts the rest of the given list; and
  id: totrans-1220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  an-low)
    æå–ç»™å®šåˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ï¼›å¹¶ä¸”
- en: (wage*.v2  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  an-low))
    determines the list of wages for all the work records other than the first one,
    according to the purpose statement of the function.
  id: totrans-1221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (wage*.v2  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  an-low))
    æ ¹æ®å‡½æ•°çš„ç›®çš„å£°æ˜ç¡®å®šé™¤äº†ç¬¬ä¸€ä¸ªå·¥ä½œè®°å½•ä¹‹å¤–çš„æ‰€æœ‰å·¥ä½œè®°å½•çš„å·¥èµ„åˆ—è¡¨ã€‚
- en: 'If you are stuck here, use the table method from [figureÂ 54](#%28counter._%28figure._fig~3adefinition-qb%29%29).If
    you understand it all, you see that it is enough to [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    the two expressions together:'
  id: totrans-1222
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ åœ¨è¿™é‡Œå¡ä½äº†ï¼Œè¯·ä½¿ç”¨[å›¾54](#%28counter._%28figure._fig~3adefinition-qb%29%29)ä¸­çš„è¡¨æ ¼æ–¹æ³•ã€‚å¦‚æœä½ ç†è§£äº†æ‰€æœ‰å†…å®¹ï¼Œä½ ä¼šå‘ç°åªéœ€è¦å°†ä¸¤ä¸ªè¡¨è¾¾å¼[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)åœ¨ä¸€èµ·å°±è¶³å¤Ÿäº†ï¼š
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (for-workÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))
    |'
  id: totrans-1223
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (for-workÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low)))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low)))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1224
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low)))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: 'assuming that for-work computes the wage for the first work record. In short,
    you have finished the function by adding another entry to your wish list of functions.Since
    for-work is a name that just serves as a stand-in and since it is a bad name for
    this function, letâ€™s call the function wage.v2 and write down its complete wish-list
    entry:'
  id: totrans-1225
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾for-workè®¡ç®—ç¬¬ä¸€ä¸ªå·¥ä½œè®°å½•çš„å·¥èµ„ã€‚ç®€è€Œè¨€ä¹‹ï¼Œä½ é€šè¿‡å‘ä½ çš„å‡½æ•°æ„¿æœ›åˆ—è¡¨ä¸­æ·»åŠ å¦ä¸€ä¸ªæ¡ç›®æ¥å®Œæˆå‡½æ•°ã€‚ç”±äºfor-workåªæ˜¯ä¸€ä¸ªå……å½“æ›¿èº«çš„åå­—ï¼Œå¹¶ä¸”è¿™ä¸ªåå­—å¯¹è¿™ä¸ªå‡½æ•°æ¥è¯´ä¸å¥½ï¼Œè®©æˆ‘ä»¬ç§°è¿™ä¸ªå‡½æ•°ä¸ºwage.v2ï¼Œå¹¶å†™ä¸‹å…¶å®Œæ•´çš„æ„¿æœ›åˆ—è¡¨æ¡ç›®ï¼š
- en: '| ;Â [Work](#%28tech._work%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-1226
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [å·¥ä½œ](#%28tech._work%29) -> [æ•°å­—](part_one.html#%28tech._number%29) |'
- en: '| ;Â computes the wage for the given work record w |'
  id: totrans-1227
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è®¡ç®—ç»™å®šå·¥ä½œè®°å½•wçš„å·¥èµ„ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage.v2Â w)
    |'
  id: totrans-1228
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage.v2Â w)
    |'
- en: '| Â Â 0) |'
  id: totrans-1229
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â 0) |'
- en: The design of this kind of function is extensively covered in [Fixed-Size Data](part_one.html)
    and thus doesnâ€™t need any additional explanation here. [FigureÂ 65](#%28counter._%28figure._fig~3awage..v2%29%29)
    shows the final result of developing wage.v2 and wage*.v2.
  id: totrans-1230
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§å‡½æ•°çš„è®¾è®¡åœ¨[å›ºå®šå¤§å°æ•°æ®](part_one.html)ä¸­å¾—åˆ°äº†å¹¿æ³›çš„ä»‹ç»ï¼Œå› æ­¤è¿™é‡Œä¸éœ€è¦é¢å¤–çš„è§£é‡Šã€‚[å›¾65](#%28counter._%28figure._fig~3awage..v2%29%29)æ˜¾ç¤ºäº†`wage.v2`å’Œ`wage*.v2`å¼€å‘çš„æœ€ç»ˆç»“æœã€‚
- en: '| ;Â [Low](#%28tech._low%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1231
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Low](#%28tech._low%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
- en: '| ;Â computes the weekly wages for all weekly work records |'
  id: totrans-1232
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è®¡ç®—æ‰€æœ‰æ¯å‘¨å·¥ä½œè®°å½•çš„å‘¨å·¥èµ„ |'
- en: '| Â  |'
  id: totrans-1233
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-1234
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (wage*.v2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)Â ''()))
    |'
  id: totrans-1235
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (wage*.v2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)Â ''()))
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 11.95Â 39)Â ''()))
    |'
  id: totrans-1236
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 11.95Â 39)Â ''()))
    |'
- en: '| Â  |'
  id: totrans-1237
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
  id: totrans-1238
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1239
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â ''()]
    |'
  id: totrans-1240
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â ''()]
    |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (wage.v2Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))
    |'
  id: totrans-1241
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (wage.v2Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low)))]))
    |'
  id: totrans-1242
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low)))]))
    |'
- en: '| Â  |'
  id: totrans-1243
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Work](#%28tech._work%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-1244
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Work](#%28tech._work%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â computes the wage for the given work record w |'
  id: totrans-1245
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è®¡ç®—ç»™å®šå·¥ä½œè®°å½•wçš„å·¥èµ„ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage.v2Â w)
    |'
  id: totrans-1246
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage.v2Â w)
    |'
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â (work-rateÂ w)Â (work-hoursÂ w)))
    |'
  id: totrans-1247
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â (work-rateÂ w)Â (work-hoursÂ w)))
    |'
- en: ''
  id: totrans-1248
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 65: Computing the wages from work records'
  id: totrans-1249
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾65ï¼šä»å·¥ä½œè®°å½•è®¡ç®—å·¥èµ„
- en: ExerciseÂ 166\. The wage*.v2 function consumes a list of work records and produces
    a list of numbers. Of course, functions may also produce lists of structures.
  id: totrans-1250
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 166ã€‚`wage*.v2`å‡½æ•°æ¥å—ä¸€ä¸ªå·¥ä½œè®°å½•åˆ—è¡¨å¹¶äº§ç”Ÿä¸€ä¸ªæ•°å­—åˆ—è¡¨ã€‚å½“ç„¶ï¼Œå‡½æ•°ä¹Ÿå¯ä»¥äº§ç”Ÿç»“æ„åˆ—è¡¨ã€‚
- en: 'Develop a data representation for paychecks. Assume that a paycheck contains
    two distinctive pieces of information: the employeeâ€™s name and an amount. Then
    design the function wage*.v3. It consumes a list of work records and computes
    a list of paychecks from it, one per record.'
  id: totrans-1251
  prefs: []
  type: TYPE_NORMAL
  zh: å¼€å‘å·¥èµ„æ¡çš„æ•°æ®è¡¨ç¤ºã€‚å‡è®¾å·¥èµ„æ¡åŒ…å«ä¸¤ä¸ªç‹¬ç‰¹çš„ä¿¡æ¯ï¼šå‘˜å·¥çš„å§“åå’Œé‡‘é¢ã€‚ç„¶åè®¾è®¡å‡½æ•°`wage*.v3`ï¼Œå®ƒæ¥å—ä¸€ä¸ªå·¥ä½œè®°å½•åˆ—è¡¨ï¼Œå¹¶ä»ä¸­è®¡ç®—å‡ºä¸€ä¸ªå·¥èµ„æ¡åˆ—è¡¨ï¼Œæ¯ä¸ªè®°å½•å¯¹åº”ä¸€ä¸ªå·¥èµ„æ¡ã€‚
- en: In reality, a paycheck also contains an employee number. Develop a data representation
    for employee information and change the data definition for work records so that
    it uses employee information and not just a string for the employeeâ€™s name. Also
    change your data representation of paychecks so that it contains an employeeâ€™s
    name and number, too. Finally, design wage*.v4, a function that maps lists of
    revised work records to lists of revised paychecks.
  id: totrans-1252
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç°å®ä¸­ï¼Œå·¥èµ„æ¡è¿˜åŒ…å«ä¸€ä¸ªå‘˜å·¥ç¼–å·ã€‚å¼€å‘å‘˜å·¥ä¿¡æ¯çš„æ•°æ®è¡¨ç¤ºï¼Œå¹¶æ›´æ”¹å·¥ä½œè®°å½•çš„æ•°æ®å®šä¹‰ï¼Œä½¿å…¶ä½¿ç”¨å‘˜å·¥ä¿¡æ¯è€Œä¸æ˜¯ä»…ä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºå‘˜å·¥çš„å§“åã€‚æ­¤å¤–ï¼Œæ›´æ”¹å·¥èµ„æ¡çš„æ•°æ®è¡¨ç¤ºï¼Œä½¿å…¶åŒ…å«å‘˜å·¥å§“åå’Œç¼–å·ã€‚æœ€åï¼Œè®¾è®¡`wage*.v4`å‡½æ•°ï¼Œå®ƒå°†ä¿®æ”¹åçš„å·¥ä½œè®°å½•åˆ—è¡¨æ˜ å°„åˆ°ä¿®æ”¹åçš„å·¥èµ„æ¡åˆ—è¡¨ã€‚
- en: Note on Iterative Refinement This exercise demonstrates the iterative refinement
    of a task. Instead of using data representations that include all relevant information,
    we started from simplistic representation of paychecks and gradually made the
    representation realistic. For this simple program, refinement is overkill; later
    we will encounter situations where iterative refinement is not just an option
    but a necessity.
  id: totrans-1253
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºè¿­ä»£ç²¾ç‚¼çš„è¯´æ˜ï¼šè¿™ä¸ªç»ƒä¹ å±•ç¤ºäº†ä»»åŠ¡çš„è¿­ä»£ç²¾ç‚¼ã€‚æˆ‘ä»¬ä¸æ˜¯ä½¿ç”¨åŒ…å«æ‰€æœ‰ç›¸å…³ä¿¡æ¯çš„æ•°æ®è¡¨ç¤ºï¼Œè€Œæ˜¯ä»ç®€å•çš„å·¥èµ„æ¡è¡¨ç¤ºå¼€å§‹ï¼Œé€æ¸ä½¿å…¶å˜å¾—ç°å®ã€‚å¯¹äºè¿™ä¸ªç®€å•çš„ç¨‹åºï¼Œç²¾ç‚¼æ˜¯è¿‡åº¦çš„ï¼›ç¨åæˆ‘ä»¬å°†é‡åˆ°è¿­ä»£ç²¾ç‚¼ä¸ä»…æ˜¯é€‰æ‹©è€Œæ˜¯å¿…éœ€çš„æƒ…å†µã€‚
- en: ExerciseÂ 167\. Design the function sum, which consumes a list of Posns and produces
    the sum of all of its x-coordinates.
  id: totrans-1254
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 167ã€‚è®¾è®¡å‡½æ•°`sum`ï¼Œå®ƒæ¥å—ä¸€ä¸ªç‚¹åæ ‡åˆ—è¡¨ï¼Œå¹¶è®¡ç®—æ‰€æœ‰ç‚¹çš„xåæ ‡ä¹‹å’Œã€‚
- en: ExerciseÂ 168\. Design the function translate. It consumes and produces lists
    of [Posn](part_one.html#%28tech._posn%29)s. For each ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  x  y)
    in the former, the latter contains ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â xÂ ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â yÂ 1)).
    We borrow the word â€œtranslateâ€ from geometry, where the movement of a point by
    a constant distance along a straight line is called a translation.
  id: totrans-1255
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 168ã€‚è®¾è®¡å‡½æ•°`translate`ï¼Œå®ƒæ¥å—å¹¶ç”Ÿæˆç‚¹åæ ‡åˆ—è¡¨ã€‚å¯¹äºå‰ä¸€ä¸ªåˆ—è¡¨ä¸­çš„æ¯ä¸ª([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    x y)ï¼Œåä¸€ä¸ªåˆ—è¡¨åŒ…å«([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    x ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    y 1))ã€‚æˆ‘ä»¬ä»å‡ ä½•ä¸­å€Ÿç”¨äº†â€œè½¬æ¢â€è¿™ä¸ªè¯ï¼Œåœ¨å‡ ä½•ä¸­ï¼Œç‚¹æ²¿ç›´çº¿ç§»åŠ¨ä¸€ä¸ªå¸¸æ•°è·ç¦»ç§°ä¸ºå¹³ç§»ã€‚
- en: ExerciseÂ 169\. Design the function legal. Like translate from [exerciseÂ 168](#%28counter._%28exercise._work2%29%29),
    the function consumes and produces a list of [Posn](part_one.html#%28tech._posn%29)s.
    The result contains all those [Posn](part_one.html#%28tech._posn%29)s whose x-coordinates
    are between 0 and 100 and whose y-coordinates are between 0 and 200\.
  id: totrans-1256
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 169ã€‚è®¾è®¡å‡½æ•°`legal`ã€‚ç±»ä¼¼äºä»[ç»ƒä¹ 168](#%28counter._%28exercise._work2%29%29)è½¬æ¢ï¼Œè¯¥å‡½æ•°æ¥å—å¹¶ç”Ÿæˆä¸€ä¸ª[ç‚¹åæ ‡](part_one.html#%28tech._posn%29)åˆ—è¡¨ã€‚ç»“æœåŒ…å«æ‰€æœ‰xåæ ‡åœ¨0åˆ°100ä¹‹é—´ï¼Œyåæ ‡åœ¨0åˆ°200ä¹‹é—´çš„[ç‚¹åæ ‡](part_one.html#%28tech._posn%29)ã€‚
- en: 'ExerciseÂ 170\. Here is one way to represent a phone number:'
  id: totrans-1257
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 170ã€‚è¿™é‡Œæœ‰ä¸€ç§è¡¨ç¤ºç”µè¯å·ç çš„æ–¹æ³•ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â phoneÂ [areaÂ switchÂ four])
    |'
  id: totrans-1258
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)
    phone [area switch four]) |'
- en: '| ;Â A Phone is a structure: |'
  id: totrans-1259
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”µè¯æ˜¯ä¸€ä¸ªç»“æ„ï¼š|'
- en: '| ;Â Â Â (make-phone  [Three](#%28tech._three%29)  [Three](#%28tech._three%29)  [Four](#%28tech._four%29))
    |'
  id: totrans-1260
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-phone  [ä¸‰ä¸ª](#%28tech._three%29)  [ä¸‰ä¸ª](#%28tech._three%29)  [å››](#%28tech._four%29))
    |'
- en: '| ;Â A Three is a [Number](part_one.html#%28tech._number%29) between 100 and
    999. |'
  id: totrans-1261
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸‰ä¸ªæ˜¯ä¸€ä¸ªä½äº100åˆ°999ä¹‹é—´çš„[æ•°å­—](part_one.html#%28tech._number%29)ã€‚|'
- en: '| ;Â A Four is a [Number](part_one.html#%28tech._number%29) between 1000 and
    9999. |'
  id: totrans-1262
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å››æ˜¯ä¸€ä¸ªä½äº1000åˆ°9999ä¹‹é—´çš„[æ•°å­—](part_one.html#%28tech._number%29)ã€‚|'
- en: Design the function replace. It consumes and produces a list of [Phone](#%28tech._phone%29)s.
    It replaces all occurrence of area code 713 with 281.
  id: totrans-1263
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªåä¸ºreplaceçš„å‡½æ•°ã€‚å®ƒæ¶ˆè€—å¹¶äº§ç”Ÿä¸€ä¸ª[Phone](#%28tech._phone%29)åˆ—è¡¨ã€‚å®ƒå°†æ‰€æœ‰713åŒºå·çš„ç”µè¯å·ç æ›¿æ¢ä¸º281ã€‚
- en: 10.3Lists in Lists, Files[ğŸ”—](#(part._sec~3alis-lis) "Link to here")
  id: totrans-1264
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 10.3 åˆ—è¡¨ä¸­çš„åˆ—è¡¨ï¼Œæ–‡ä»¶[ğŸ”—](#(part._sec~3alis-lis) "é“¾æ¥åˆ°æ­¤å¤„")
- en: '[Functions and Programs](part_one.html#%28part._ch~3afuncs-progs%29) introduces
    [read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29),
    a function for readingAdd ([require](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._require%29%29)  2htdp/batch-io)
    to your definitions area. an entire text file as a string. In other words, the
    creator of [read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)
    chose to represent text files as strings, and the function creates the data representation
    for specific files (specified by a name). Text files arenâ€™t plain long texts or
    strings, however. They are organized into lines and words, rows and cells, and
    many other ways. In short, representing the content of a file as a plain string
    might work on rare occasions but is usually a bad choice.'
  id: totrans-1265
  prefs: []
  type: TYPE_NORMAL
  zh: '[å‡½æ•°å’Œç¨‹åº](part_one.html#%28part._ch~3afuncs-progs%29)ä»‹ç»äº†[read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå°†æ•´ä¸ªæ–‡æœ¬æ–‡ä»¶ä½œä¸ºå­—ç¬¦ä¸²è¯»å–çš„å‡½æ•°ã€‚æ¢å¥è¯è¯´ï¼Œ[read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)çš„åˆ›å»ºè€…é€‰æ‹©å°†æ–‡æœ¬æ–‡ä»¶è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”è¯¥å‡½æ•°ä¸ºç‰¹å®šæ–‡ä»¶ï¼ˆé€šè¿‡åç§°æŒ‡å®šï¼‰åˆ›å»ºæ•°æ®è¡¨ç¤ºã€‚ç„¶è€Œï¼Œæ–‡æœ¬æ–‡ä»¶ä¸æ˜¯ç®€å•çš„é•¿æ–‡æœ¬æˆ–å­—ç¬¦ä¸²ã€‚å®ƒä»¬è¢«ç»„ç»‡æˆè¡Œå’Œå•è¯ã€è¡Œå’Œå•å…ƒæ ¼ä»¥åŠè®¸å¤šå…¶ä»–æ–¹å¼ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°†æ–‡ä»¶å†…å®¹è¡¨ç¤ºä¸ºæ™®é€šå­—ç¬¦ä¸²å¯èƒ½åœ¨ç½•è§æƒ…å†µä¸‹å¯è¡Œï¼Œä½†é€šå¸¸æ˜¯ä¸€ä¸ªç³Ÿç³•çš„é€‰æ‹©ã€‚'
- en: ttt.txt
  id: totrans-1266
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ttt.txt
- en: ''
  id: totrans-1267
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-1268
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: '| Â Â TTT |'
  id: totrans-1269
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   TTT |'
- en: '|  |'
  id: totrans-1270
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: '| Â Â Put up in a place |'
  id: totrans-1271
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ |'
- en: '| Â Â where it''s easy to see |'
  id: totrans-1272
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   åœ¨è¿™é‡Œå¾ˆå®¹æ˜“çœ‹åˆ° |'
- en: '| Â Â the cryptic admonishment |'
  id: totrans-1273
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   éšæ™¦çš„å‘Šè¯« |'
- en: '| Â Â T.T.T. |'
  id: totrans-1274
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   T.T.T. |'
- en: '|  |'
  id: totrans-1275
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: '| Â Â When you feel how depressingly |'
  id: totrans-1276
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   å½“ä½ æ„Ÿåˆ°å¦‚ä½•æ²®ä¸§åœ° |'
- en: '| Â Â slowly you climb, |'
  id: totrans-1277
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   æ…¢æ…¢åœ°ä½ æ”€ç™»ï¼Œ |'
- en: '| Â Â it''s well to remember that |'
  id: totrans-1278
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   è®°ä½è¿™ä¸€ç‚¹æ˜¯å¾ˆå¥½çš„ |'
- en: '| Â Â Things Take Time. |'
  id: totrans-1279
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   äº‹ç‰©éœ€è¦æ—¶é—´ã€‚ |'
- en: '|  |'
  id: totrans-1280
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: '| Â Â Piet Hein |'
  id: totrans-1281
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   å½¼å¾—Â·æµ·å›  |'
- en: '|  |'
  id: totrans-1282
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-1283
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 66: Things take time'
  id: totrans-1284
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾66ï¼šäº‹ç‰©éœ€è¦æ—¶é—´
- en: For concreteness, take a look at the sample file in [figureÂ 66](#%28counter._%28figure._fig~3attt..txt%29%29).
    It contains a poem by Piet Hein, and it consists of many lines and words. When
    you use the program
  id: totrans-1285
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å…·ä½“è¯´æ˜ï¼Œè¯·æŸ¥çœ‹[å›¾66](#%28counter._%28figure._fig~3attt..txt%29%29)ä¸­çš„ç¤ºä¾‹æ–‡ä»¶ã€‚å®ƒåŒ…å«å½¼å¾—Â·æµ·å› çš„ä¸€é¦–è¯—ï¼Œç”±è®¸å¤šè¡Œå’Œå•è¯ç»„æˆã€‚å½“ä½ ä½¿ç”¨ç¨‹åº
- en: ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â "ttt.txt")
  id: totrans-1286
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â "ttt.txt")
- en: to turn this file into a BSL string, you get this:The dots arenâ€™t really a part
    of the result, as you probably guessed.
  id: totrans-1287
  prefs: []
  type: TYPE_NORMAL
  zh: å°†æ­¤æ–‡ä»¶è½¬æ¢ä¸ºBSLå­—ç¬¦ä¸²æ—¶ï¼Œä½ ä¼šå¾—åˆ°è¿™ä¸ªç»“æœï¼šæ­£å¦‚ä½ å¯èƒ½çŒœåˆ°çš„ï¼Œç‚¹å·å¹¶ä¸æ˜¯ç»“æœçš„ä¸€éƒ¨åˆ†ã€‚
- en: '"TTT\n \nPut up in a place\nwhere ...."'
  id: totrans-1288
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '"TTT\n \næ”¾åœ¨ä¸€ä¸ªåœ°æ–¹\nå“ªé‡Œ...."'
- en: 'where the "\n" inside the string indicates line breaks.While it is indeed possible
    to break apart this string with primitive operations on strings, for example,
    [explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29),
    most programming languagesâ€”<wbr>including BSLâ€”<wbr>support many different representations
    of files and functions that create such representations from existing files:'
  id: totrans-1289
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­å­—ç¬¦ä¸²ä¸­çš„ "\n" è¡¨ç¤ºæ¢è¡Œç¬¦ã€‚è™½ç„¶ç¡®å®å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²çš„åŸå§‹æ“ä½œæ¥æ‹†åˆ†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼Œ[explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29)ï¼Œä½†å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€â€”â€”åŒ…æ‹¬
    BSLâ€”â€”æ”¯æŒè®¸å¤šä¸åŒçš„æ–‡ä»¶å’Œå‡½æ•°è¡¨ç¤ºå½¢å¼ï¼Œè¿™äº›è¡¨ç¤ºå½¢å¼å¯ä»¥ä»ç°æœ‰æ–‡ä»¶åˆ›å»ºï¼š
- en: 'One way to represent this file is as a list of lines, where each line is represented
    as one string:'
  id: totrans-1290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¡¨ç¤ºæ­¤æ–‡ä»¶çš„ä¸€ç§æ–¹å¼æ˜¯å°†å…¶è¡¨ç¤ºä¸ºè¡Œåˆ—è¡¨ï¼Œå…¶ä¸­æ¯è¡Œè¡¨ç¤ºä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼š
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "TTT"
    |'
  id: totrans-1291
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "TTT"
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ""
    |'
  id: totrans-1292
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ""
    |'
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Put
    up in a place" |'
  id: totrans-1293
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Put
    up in a place" |'
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1294
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â ''())))) |'
  id: totrans-1295
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â ''())))) |'
- en: Here the second item of the list is the empty string because the file contains
    an empty line.
  id: totrans-1296
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œåˆ—è¡¨çš„ç¬¬äºŒé¡¹æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œå› ä¸ºæ–‡ä»¶åŒ…å«ä¸€ä¸ªç©ºè¡Œã€‚
- en: 'Another way is to use a list of words, again each word represented as a string:'
  id: totrans-1297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å•è¯åˆ—è¡¨ï¼Œæ¯ä¸ªå•è¯éƒ½è¡¨ç¤ºä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼š
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "TTT"
    |'
  id: totrans-1298
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "TTT"
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Put"
    |'
  id: totrans-1299
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Put"
    |'
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "up"
    |'
  id: totrans-1300
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "up"
    |'
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "in"
    |'
  id: totrans-1301
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "in"
    |'
- en: '| Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1302
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â ''()))))) |'
  id: totrans-1303
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â ''()))))) |'
- en: Note how the empty second line disappears with this representation. After all,
    there are no words on the empty line.
  id: totrans-1304
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œä½¿ç”¨è¿™ç§è¡¨ç¤ºæ–¹æ³•æ—¶ï¼Œç©ºçš„ç¬¬äºŒè¡Œæ¶ˆå¤±äº†ã€‚æ¯•ç«Ÿï¼Œç©ºè¡Œä¸Šæ²¡æœ‰å•è¯ã€‚
- en: 'And a third representation relies on lists of lists of words:'
  id: totrans-1305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬ä¸‰ç§è¡¨ç¤ºæ–¹æ³•ä¾èµ–äºå•è¯çš„åˆ—è¡¨åˆ—è¡¨ï¼š
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "TTT"Â ''())
    |'
  id: totrans-1306
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "TTT"Â ''())
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ''()
    |'
  id: totrans-1307
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ''()
    |'
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Put"
    |'
  id: totrans-1308
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Put"
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "up"
    |'
  id: totrans-1309
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "up"
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ''())))
    |'
  id: totrans-1310
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ''())))
    |'
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1311
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| Â Â Â Â Â Â Â Â ''())))) |'
  id: totrans-1312
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â ''())))) |'
- en: This representation has an advantage over the second one in that it preserves
    the organization of the file, including the emptiness of the second line. The
    price is that all of a sudden lists contain lists.
  id: totrans-1313
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™ç§è¡¨ç¤ºæ–¹æ³•ä¸ç¬¬äºŒç§æ–¹æ³•ç›¸æ¯”æœ‰ä¸€ä¸ªä¼˜ç‚¹ï¼Œå³å®ƒä¿ç•™äº†æ–‡ä»¶çš„ç»„ç»‡ç»“æ„ï¼ŒåŒ…æ‹¬ç¬¬äºŒè¡Œçš„ç©ºè¡Œã€‚ä»£ä»·æ˜¯çªç„¶ä¹‹é—´åˆ—è¡¨ä¸­åŒ…å«åˆ—è¡¨ã€‚
- en: While the idea of list-containing lists may sound frightening at first, you
    need not worry. The design recipe helps even with such complications.
  id: totrans-1314
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶ä¸€å¼€å§‹åˆ—è¡¨åŒ…å«åˆ—è¡¨çš„æƒ³æ³•å¯èƒ½å¬èµ·æ¥ä»¤äººææƒ§ï¼Œä½†ä½ æ— éœ€æ‹…å¿ƒã€‚è®¾è®¡é…æ–¹ç”šè‡³æœ‰åŠ©äºå¤„ç†è¿™ç§å¤æ‚æ€§ã€‚
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [String](part_one.html#%28tech._string%29)
    |'
  id: totrans-1315
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [String](part_one.html#%28tech._string%29) -> [String](part_one.html#%28tech._string%29)
    |'
- en: '| ;Â produces the content of file f as a string |'
  id: totrans-1316
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ç”Ÿæˆæ–‡ä»¶fçš„å†…å®¹ä½œä¸ºå­—ç¬¦ä¸² |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-1317
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-1318
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-string](#%28tech._list._of._string%29)
    |'
  id: totrans-1319
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [String](part_one.html#%28tech._string%29) -> [List-of-string](#%28tech._list._of._string%29)
    |'
- en: '| ;Â produces the content of file f as a list of strings, |'
  id: totrans-1320
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ç”Ÿæˆæ–‡ä»¶fçš„å†…å®¹ä½œä¸ºå­—ç¬¦ä¸²çš„åˆ—è¡¨ |'
- en: '| ;Â one per line |'
  id: totrans-1321
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; æ¯è¡Œä¸€ä¸ª |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-1322
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-1323
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-string](#%28tech._list._of._string%29)
    |'
  id: totrans-1324
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [String](part_one.html#%28tech._string%29) -> [List-of-string](#%28tech._list._of._string%29)
    |'
- en: '| ;Â produces the content of file f as a list of strings, |'
  id: totrans-1325
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ç”Ÿæˆæ–‡ä»¶fçš„å†…å®¹ä½œä¸ºå­—ç¬¦ä¸²çš„åˆ—è¡¨ |'
- en: '| ;Â one per word |'
  id: totrans-1326
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; æ¯è¡Œä¸€ä¸ªå•è¯ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-words](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-1327
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-words](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-1328
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-list-of-string](#%28tech._list._of._list._of._string%29)
    |'
  id: totrans-1329
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [String](part_one.html#%28tech._string%29) -> [List-of-list-of-string](#%28tech._list._of._list._of._string%29)
    |'
- en: '| ;Â produces the content of file f as a list of list of |'
  id: totrans-1330
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ç”Ÿæˆæ–‡ä»¶fçš„å†…å®¹ä½œä¸ºåˆ—è¡¨çš„åˆ—è¡¨ |'
- en: '| ;Â strings, one list per line and one string per word |'
  id: totrans-1331
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; å­—ç¬¦ä¸²ï¼Œæ¯è¡Œä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯è¡Œä¸€ä¸ªå•è¯ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-1332
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-1333
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â The above functions consume the name of a file as a [String](part_one.html#%28tech._string%29)
    |'
  id: totrans-1334
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸Šè¿°å‡½æ•°æ¶ˆè€—ä¸€ä¸ªæ–‡ä»¶åä½œä¸º [String](part_one.html#%28tech._string%29) |'
- en: '| ;Â argument. If the specified file does not exist in the |'
  id: totrans-1335
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å‚æ•°ã€‚å¦‚æœæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨äº |'
- en: '| ;Â same folder as the program, they signal an error. |'
  id: totrans-1336
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸ç¨‹åºç›¸åŒçš„æ–‡ä»¶å¤¹ä¸­ï¼Œå®ƒä»¬ä¼šå¼•å‘é”™è¯¯ã€‚|'
- en: ''
  id: totrans-1337
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 67: Reading files'
  id: totrans-1338
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 67ï¼šè¯»å–æ–‡ä»¶
- en: 'Before we get started, take a look at [figureÂ 67](#%28counter._%28figure._fig~3aread%29%29).
    It introduces a number of useful file reading functions. They are not comprehensive:
    there are many other ways of dealing with text from files, and you will need to
    know a lot more to deal with all possible text files. For our purposes hereâ€”<wbr>teaching
    and learning the principles of systematic program designâ€”<wbr>they suffice, and
    they empower you to design reasonably interesting programs.'
  id: totrans-1339
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œçœ‹çœ‹ [å›¾ 67](#%28counter._%28figure._fig~3aread%29%29)ã€‚å®ƒä»‹ç»äº†ä¸€äº›æœ‰ç”¨çš„æ–‡ä»¶è¯»å–å‡½æ•°ã€‚å®ƒä»¬å¹¶ä¸å…¨é¢ï¼šå¤„ç†æ–‡ä»¶æ–‡æœ¬çš„æ–¹æ³•è¿˜æœ‰å¾ˆå¤šï¼Œä½ éœ€è¦äº†è§£å¾—æ›´å¤šæ‰èƒ½å¤„ç†æ‰€æœ‰å¯èƒ½çš„æ–‡æœ¬æ–‡ä»¶ã€‚å¯¹äºæˆ‘ä»¬è¿™é‡Œçš„ç”¨é€”â€”â€”<wbr>æ•™æˆå’Œå­¦ä¹ ç³»ç»ŸåŒ–ç¨‹åºè®¾è®¡åŸåˆ™â€”â€”<wbr>å®ƒä»¬è¶³å¤Ÿäº†ï¼Œå¹¶ä¸”å®ƒä»¬ä½¿ä½ èƒ½å¤Ÿè®¾è®¡å‡ºç›¸å½“æœ‰è¶£çš„ç¨‹åºã€‚
- en: '[FigureÂ 67](#%28counter._%28figure._fig~3aread%29%29) uses the names of two
    data definitions that do not exist yet, including one involving list-containing
    lists. As always, we start with a data definition, but this time we leave this
    task to you. Hence, before you read on, solve the following exercises. The solutions
    are needed to make complete sense out of the figure, and without working through
    the solutions, you cannot really understand the rest of this section.'
  id: totrans-1340
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾ 67](#%28counter._%28figure._fig~3aread%29%29) ä½¿ç”¨äº†ä¸¤ä¸ªå°šæœªå­˜åœ¨çš„æ•°æ®å®šä¹‰çš„åç§°ï¼ŒåŒ…æ‹¬ä¸€ä¸ªæ¶‰åŠåŒ…å«åˆ—è¡¨çš„åˆ—è¡¨ã€‚åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬ä»æ•°æ®å®šä¹‰å¼€å§‹ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬æŠŠè¿™ä¸ªä»»åŠ¡ç•™ç»™ä½ ã€‚å› æ­¤ï¼Œåœ¨ä½ ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œè§£å†³ä»¥ä¸‹ç»ƒä¹ ã€‚è¿™äº›è§£å†³æ–¹æ¡ˆå¯¹äºç†è§£å›¾ä¸­çš„å†…å®¹æ˜¯å¿…è¦çš„ï¼Œè€Œä¸”å¦‚æœä¸é€šè¿‡è§£å†³è¿™äº›è§£å†³æ–¹æ¡ˆï¼Œä½ çœŸçš„æ— æ³•ç†è§£æœ¬èŠ‚çš„å…¶ä½™éƒ¨åˆ†ã€‚'
- en: ExerciseÂ 171\. You know what the data definition for [List-of-strings](#%28tech._list._of._string%29)
    looks like. Spell it out. Make sure that you can represent Piet Heinâ€™s poem as
    an instance of the definition where each line is represented as a string and another
    instance where each word is a string. Use [read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)
    and [read-words](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%29%29)
    to confirm your representation choices.
  id: totrans-1341
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  171ã€‚ä½ çŸ¥é“ [å­—ç¬¦ä¸²åˆ—è¡¨](#%28tech._list._of._string%29) çš„æ•°æ®å®šä¹‰çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚æŠŠå®ƒå†™å‡ºæ¥ã€‚ç¡®ä¿ä½ èƒ½å°†çš®ç‰¹Â·æµ·å› çš„è¯—æ­Œä½œä¸ºä¸€ä¸ªå®ä¾‹æ¥è¡¨ç¤ºï¼Œå…¶ä¸­æ¯ä¸€è¡Œè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦ä¸€ä¸ªå®ä¾‹æ˜¯æ¯ä¸ªå•è¯éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä½¿ç”¨
    [read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)
    å’Œ [read-words](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%29%29)
    æ¥ç¡®è®¤ä½ çš„è¡¨ç¤ºé€‰æ‹©ã€‚
- en: Next develop the data definition for List-of-list-of-strings. Again, represent
    Piet Heinâ€™s poem as an instance of the definition where each line is represented
    as a list of strings, one per word, and the entire poem is a list of such line
    representations. You may use [read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)
    to confirm your choice.
  id: totrans-1342
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œä¸ºå­—ç¬¦ä¸²åˆ—è¡¨çš„åˆ—è¡¨å¼€å‘æ•°æ®å®šä¹‰ã€‚åŒæ ·ï¼Œå°†çš®ç‰¹Â·æµ·å› çš„è¯—æ­Œä½œä¸ºä¸€ä¸ªå®ä¾‹æ¥è¡¨ç¤ºï¼Œå…¶ä¸­æ¯ä¸€è¡Œè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¯ä¸ªå•è¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ•´ä¸ªè¯—æ­Œæ˜¯ä¸€ä¸ªè¿™æ ·çš„è¡Œè¡¨ç¤ºåˆ—è¡¨ã€‚ä½ å¯ä»¥ä½¿ç”¨
    [read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)
    æ¥ç¡®è®¤ä½ çš„é€‰æ‹©ã€‚
- en: As you probably know, operating systems come with programs that measure files.
    One counts the number of lines, another determines how many words appear per line.
    Let us start with the latter to illustrate how the design recipe helps with the
    design of complex functions.
  id: totrans-1343
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚ä½ æ‰€çŸ¥ï¼Œæ“ä½œç³»ç»Ÿè‡ªå¸¦äº†ä¸€äº›æµ‹é‡æ–‡ä»¶çš„ç¨‹åºã€‚ä¸€ä¸ªè®¡ç®—è¡Œæ•°ï¼Œå¦ä¸€ä¸ªç¡®å®šæ¯è¡Œæœ‰å¤šå°‘å•è¯ã€‚è®©æˆ‘ä»¬ä»åè€…å¼€å§‹ï¼Œä»¥è¯´æ˜è®¾è®¡é…æ–¹å¦‚ä½•å¸®åŠ©è®¾è®¡å¤æ‚å‡½æ•°ã€‚
- en: 'The first step is to ensure that we have all the necessary data definitions.
    If you solved the above exercise, you have a data definition for all possible
    inputs of the desired function, and the preceding section defines [List-of-numbers](#%28tech._list._of._number%29),
    which describes all possible outputs. To keep things short, we use [LN](#%28tech._ln%29)
    to refer to the class of lists of lists of strings, and use it to write down the
    header material for the desired function:'
  id: totrans-1344
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€æ­¥æ˜¯ç¡®ä¿æˆ‘ä»¬æ‹¥æœ‰æ‰€æœ‰å¿…è¦çš„æ•°æ®å®šä¹‰ã€‚å¦‚æœä½ è§£å†³äº†ä¸Šè¿°ç»ƒä¹ ï¼Œä½ å°±æœ‰äº†æ‰€æœ‰æœŸæœ›å‡½æ•°å¯èƒ½è¾“å…¥çš„æ•°æ®å®šä¹‰ï¼Œå‰æ–‡éƒ¨åˆ†å®šä¹‰äº†[List-of-numbers](#%28tech._list._of._number%29)ï¼Œå®ƒæè¿°äº†æ‰€æœ‰å¯èƒ½çš„è¾“å‡ºã€‚ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬ä½¿ç”¨[LN](#%28tech._ln%29)æ¥æŒ‡ä»£å­—ç¬¦ä¸²åˆ—è¡¨çš„åˆ—è¡¨ç±»ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å†™ä¸‹æœŸæœ›å‡½æ•°çš„å¤´éƒ¨ææ–™ï¼š
- en: '| ;Â [LN](#%28tech._ln%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1345
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [LN](#%28tech._ln%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
- en: '| ;Â determines the number of words on each line |'
  id: totrans-1346
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç¡®å®šæ¯è¡Œä¸­çš„å•è¯æ•°é‡ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words-on-lineÂ lls)Â ''())
    |'
  id: totrans-1347
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words-on-lineÂ lls)Â ''())
    |'
- en: 'We name the functions words-on-line because it is appropriate and captures
    the purpose statement in one phrase.What is really needed, though, is a set of
    data examples:'
  id: totrans-1348
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†è¿™ä¸ªå‡½æ•°å‘½åä¸ºâ€œwords-on-lineâ€ï¼Œå› ä¸ºå®ƒæ—¢åˆé€‚åˆèƒ½å¤Ÿæ¦‚æ‹¬å‡ºç›®çš„é™ˆè¿°ã€‚ç„¶è€Œï¼ŒçœŸæ­£éœ€è¦çš„æ˜¯ä¸€ç»„æ•°æ®ç¤ºä¾‹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "world"Â ''())))
    |'
  id: totrans-1349
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "world"Â ''())))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line1Â ''())
    |'
  id: totrans-1350
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line1Â ''())
    |'
- en: '| Â  |'
  id: totrans-1351
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â lls0Â ''())
    |'
  id: totrans-1352
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â lls0Â ''())
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â lls1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line1Â ''())))
    |'
  id: totrans-1353
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â lls1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line1Â ''())))
    |'
- en: 'The first two definitions introduce two examples of lines: one contains two
    words, the other contains none. The last two definitions show how to construct
    instances of [LN](#%28tech._ln%29) from these line examples. Determine what the
    expected result is when the function is given these two examples.'
  id: totrans-1354
  prefs: []
  type: TYPE_NORMAL
  zh: å‰ä¸¤ä¸ªå®šä¹‰å¼•å…¥äº†ä¸¤æ¡çº¿çš„ç¤ºä¾‹ï¼šä¸€æ¡åŒ…å«ä¸¤ä¸ªå•è¯ï¼Œå¦ä¸€æ¡ä¸åŒ…å«ä»»ä½•å•è¯ã€‚æœ€åä¸¤ä¸ªå®šä¹‰å±•ç¤ºäº†å¦‚ä½•ä»è¿™äº›çº¿ç¤ºä¾‹ä¸­æ„å»º[LN](#%28tech._ln%29)çš„å®ä¾‹ã€‚ç¡®å®šå½“å‡½æ•°è¢«ç»™è¿™ä¸¤ä¸ªç¤ºä¾‹æ—¶ï¼Œé¢„æœŸçš„ç»“æœæ˜¯ä»€ä¹ˆã€‚
- en: Once you have data examples, it is easy to formulate functional examples; just
    imagine applying the function to each of the data examples. When you apply words-on-line
    to lls0, you should get the empty list back because there are no lines. When you
    apply words-on-line to lls1, you should get a list of two numbers back because
    there are two lines. The two numbers are 2 and 0, respectively, given that the
    two lines in lls1 contain two and no words each.
  id: totrans-1355
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ä½ æœ‰äº†æ•°æ®ç¤ºä¾‹ï¼Œåˆ¶å®šåŠŸèƒ½ç¤ºä¾‹å°±å¾ˆå®¹æ˜“äº†ï¼›åªéœ€æƒ³è±¡å°†å‡½æ•°åº”ç”¨äºæ¯ä¸ªæ•°æ®ç¤ºä¾‹ã€‚å½“ä½ å°†words-on-lineåº”ç”¨äºlls0æ—¶ï¼Œä½ åº”è¯¥å¾—åˆ°ä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œå› ä¸ºæ²¡æœ‰çº¿ã€‚å½“ä½ å°†words-on-lineåº”ç”¨äºlls1æ—¶ï¼Œä½ åº”è¯¥å¾—åˆ°ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªæ•°å­—çš„åˆ—è¡¨ï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªçº¿ã€‚è¿™ä¸¤ä¸ªæ•°å­—åˆ†åˆ«æ˜¯2å’Œ0ï¼Œå› ä¸ºlls1ä¸­çš„ä¸¤æ¡çº¿åˆ†åˆ«åŒ…å«ä¸¤ä¸ªå•è¯å’Œæ²¡æœ‰å•è¯ã€‚
- en: 'Here is how you translate all this into test cases:'
  id: totrans-1356
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹é¢æ˜¯å¦‚ä½•å°†è¿™äº›å†…å®¹è½¬åŒ–ä¸ºæµ‹è¯•ç”¨ä¾‹ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ lls0)Â ''())
    |'
  id: totrans-1357
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ lls0)Â ''())
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ lls1)
    |'
  id: totrans-1358
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ lls1)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0Â ''())))
    |'
  id: totrans-1359
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0Â ''())))
    |'
- en: 'By doing it at the end of the second step, you have a complete program, though
    running it just fails some of the test cases.The development of the template is
    the interesting step for this sample problem. By answering the template questions
    from [figureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29), you get the
    usual list-processing template immediately:'
  id: totrans-1360
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡åœ¨ç¬¬äºŒæ­¥çš„æœ«å°¾è¿›è¡Œï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºï¼Œå°½ç®¡è¿è¡Œå®ƒåªä¼šå¤±è´¥ä¸€äº›æµ‹è¯•ç”¨ä¾‹ã€‚å¯¹äºè¿™ä¸ªç¤ºä¾‹é—®é¢˜ï¼Œæ¨¡æ¿çš„å¼€å‘æ˜¯æœ‰è¶£çš„ä¸€æ­¥ã€‚é€šè¿‡å›ç­”[å›¾52](#%28counter._%28figure._fig~3atemplate-q%29%29)ä¸­çš„æ¨¡æ¿é—®é¢˜ï¼Œä½ å¯ä»¥ç«‹å³å¾—åˆ°é€šå¸¸çš„åˆ—è¡¨å¤„ç†æ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words-on-lineÂ lls)
    |'
  id: totrans-1361
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words-on-lineÂ lls)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1362
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â lls)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1363
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â lls)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-1364
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  lls)Â ;Â a
    list of strings |'
  id: totrans-1365
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  lls)Â ;Â a
    list of strings |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (words-on-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â lls))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1366
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (words-on-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â lls))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'As in the preceding section, we know that the expression ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  lls)
    extracts a [List-of-strings](#%28tech._list._of._string%29), which has a complex
    organization, too. The temptation is to insert a nested template to express this
    knowledge, but as you should recall, the better idea is to develop a second auxiliary
    template and to change the first line in the second condition so that it refers
    to this auxiliary template.Since this auxiliary template is for a function that
    consumes a list, the template looks nearly identical to the previous one:'
  id: totrans-1367
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬çŸ¥é“è¡¨è¾¾å¼([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  lls)æå–äº†ä¸€ä¸ª[å­—ç¬¦ä¸²åˆ—è¡¨](#%28tech._list._of._string%29)ï¼Œå…¶ç»„ç»‡ç»“æ„ä¹Ÿç›¸å½“å¤æ‚ã€‚è¯±æƒ‘æ˜¯æ’å…¥ä¸€ä¸ªåµŒå¥—æ¨¡æ¿æ¥è¡¨ç¤ºè¿™ç§çŸ¥è¯†ï¼Œä½†å¦‚æ‚¨æ‰€å›å¿†çš„é‚£æ ·ï¼Œæ›´å¥½çš„æƒ³æ³•æ˜¯å¼€å‘ç¬¬äºŒä¸ªè¾…åŠ©æ¨¡æ¿ï¼Œå¹¶å°†ç¬¬äºŒä¸ªæ¡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œæ›´æ”¹ä¸ºå¼•ç”¨æ­¤è¾…åŠ©æ¨¡æ¿ã€‚ç”±äºè¿™ä¸ªè¾…åŠ©æ¨¡æ¿æ˜¯ä¸ºæ¶ˆè€—åˆ—è¡¨çš„å‡½æ•°è®¾è®¡çš„ï¼Œå› æ­¤æ¨¡æ¿çœ‹èµ·æ¥å‡ ä¹ä¸ä¸Šä¸€ä¸ªæ¨¡æ¿ç›¸åŒï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (line-processorÂ ln)
    |'
  id: totrans-1368
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (line-processorÂ ln)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1369
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ln)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1370
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ln)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-1371
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln)Â ;Â a
    string |'
  id: totrans-1372
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln)Â ;Â ä¸€ä¸ªå­—ç¬¦ä¸²
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (line-processorÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ln))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1373
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (line-processorÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ln))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: The important differences are that ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln)
    extracts a string from the list, and we consider strings as atomic values. With
    this template in hand, we can change the first line of the second case in words-on-line
    to
  id: totrans-1374
  prefs: []
  type: TYPE_NORMAL
  zh: é‡è¦çš„åŒºåˆ«åœ¨äº([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln)ä»åˆ—è¡¨ä¸­æå–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æˆ‘ä»¬å°†å­—ç¬¦ä¸²è§†ä¸ºåŸå­å€¼ã€‚æœ‰äº†è¿™ä¸ªæ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥å°†words-on-lineçš„ç¬¬äºŒç§æƒ…å†µçš„ç¬¬
    ä¸€è¡Œæ”¹ä¸º
- en: '[...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (line-processorÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â lls))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)'
  id: totrans-1375
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (line-processorÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â lls))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)'
- en: 'which reminds us for the fifth step that the definition for words-on-line may
    demand the design of an auxiliary function.Now it is time to program. As always,
    we use the questions from [figureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29)
    to guide this step. The first case, concerning empty lists of lines, is the easy
    case. Our examples tell us that the answer in this case is ''(), that is, the
    empty list of numbers. The second case, concerning [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29),
    contains several expressions, and we start with a reminder of what they compute:'
  id: totrans-1376
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æé†’æˆ‘ä»¬ï¼Œåœ¨ç¬¬äº”æ­¥ä¸­ï¼Œwords-on-line çš„å®šä¹‰å¯èƒ½éœ€è¦è®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚ç°åœ¨åˆ°äº†ç¼–ç¨‹çš„æ—¶å€™äº†ã€‚åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ [å›¾ 53](#%28counter._%28figure._fig~3adefinition-q%29%29)
    ä¸­çš„é—®é¢˜æ¥æŒ‡å¯¼è¿™ä¸€æ­¥ã€‚ç¬¬ä¸€ä¸ªæ¡ˆä¾‹ï¼Œå…³äºç©ºè¡Œåˆ—è¡¨ï¼Œæ˜¯ç®€å•çš„æƒ…å†µã€‚æˆ‘ä»¬çš„ä¾‹å­å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ç­”æ¡ˆæ˜¯ '(), å³ä¸€ä¸ªç©ºæ•°å­—åˆ—è¡¨ã€‚ç¬¬äºŒä¸ªæ¡ˆä¾‹ï¼Œå…³äº [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ï¼ŒåŒ…å«å‡ ä¸ªè¡¨è¾¾å¼ï¼Œæˆ‘ä»¬é¦–å…ˆå›é¡¾ä¸€ä¸‹å®ƒä»¬æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln)
    extracts the first line from the non-empty list of (represented) lines;
  id: totrans-1377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln)
    ä»éç©ºè¡Œåˆ—è¡¨ä¸­æå–ç¬¬ä¸€è¡Œï¼›
- en: (line-processor  ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln))
    suggests that we may wish to design an auxiliary function to process this line;
  id: totrans-1378
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (line-processor  ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln))
    å»ºè®®æˆ‘ä»¬å¯èƒ½éœ€è¦è®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥å¤„ç†è¿™ä¸€è¡Œï¼›
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ln)
    is the rest of the list of line; and
  id: totrans-1379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ln)
    æ˜¯è¡Œåˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ï¼›å¹¶ä¸”
- en: (words-on-line  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ln))
    computes a list of words per line for the rest of the list. How do we know this?
    We promised just that with the signature and the purpose statement for words-on-line.
  id: totrans-1380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (words-on-line  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ln))
    è®¡ç®—åˆ—è¡¨å‰©ä½™éƒ¨åˆ†çš„æ¯è¡Œçš„å•è¯åˆ—è¡¨ã€‚æˆ‘ä»¬å¦‚ä½•çŸ¥é“è¿™ä¸€ç‚¹ï¼Ÿæˆ‘ä»¬é€šè¿‡ words-on-line çš„ç­¾åå’Œç›®çš„è¯´æ˜å·²ç»æ‰¿è¯ºäº†è¿™ä¸€ç‚¹ã€‚
- en: 'Assuming we can design an auxiliary function that consumes a line and counts
    the words on one lineâ€”<wbr>letâ€™s call it words#â€”<wbr>it is easy to complete the
    second condition:'
  id: totrans-1381
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œå®ƒæ¶ˆè€—ä¸€è¡Œå¹¶è®¡ç®—è¯¥è¡Œä¸­çš„å•è¯æ•°â€”â€”è®©æˆ‘ä»¬ç§°å®ƒä¸º words#â€”â€”é‚£ä¹ˆå®Œæˆç¬¬äºŒä¸ªæ¡ä»¶å°±å¾ˆå®¹æ˜“äº†ï¼š
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (words#Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ln))
    |'
  id: totrans-1382
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (words#Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ln))
    |'
- en: '| Â Â Â Â Â Â (words-on-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ln)))
    |'
  id: totrans-1383
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â (words-on-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ln)))
    |'
- en: 'This expression [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)es
    the number of words on the first line of ln onto a list of numbers that represents
    the number of words on the remainder of the lines of ln.It remains to design the
    words# function. Its template is dubbed line-processor and its purpose is to count
    the number of words on a line, which is just a list of strings. So here is the
    wish-list entry:'
  id: totrans-1384
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè¡¨è¾¾å¼ [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    å°† ln ç¬¬ä¸€è¡Œçš„å•è¯æ•°è½¬æ¢æˆä¸€ä¸ªè¡¨ç¤º ln å‰©ä½™è¡Œå•è¯æ•°çš„æ•°å­—åˆ—è¡¨ã€‚æ¥ä¸‹æ¥éœ€è¦è®¾è®¡ words# å‡½æ•°ã€‚å®ƒçš„æ¨¡æ¿è¢«ç§°ä¸ºè¡Œå¤„ç†å™¨ï¼Œå…¶ç›®çš„æ˜¯è®¡ç®—ä¸€è¡Œä¸­çš„å•è¯æ•°ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ã€‚æ‰€ä»¥è¿™é‡Œæ˜¯æ„¿æœ›æ¸…å•æ¡ç›®ï¼š
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  id: totrans-1385
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Number](part_one.html#%28tech._number%29)
    |'
- en: '| ;Â counts the number of words on los |'
  id: totrans-1386
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â counts the number of words on los |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words#Â los)Â 0)
    |'
  id: totrans-1387
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words#Â los)Â 0)
    |'
- en: At this point, you may recall the example used to illustrate the design recipe
    for self-referential data in [Designing with Self-Referential Data Definitions](#%28part._ch~3adesign-lists%29).
    The function is called how-many, and it too counts the number of strings on a
    list of strings. Even though the input for how-many is supposed to represent a
    list of names, this difference simply doesnâ€™t matter; as long as it correctly
    counts the number of strings on a list of strings, how-many solves our problem.Since
    it is good to reuse existing functions, you may define words# as
  id: totrans-1388
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ å¯èƒ½è¿˜è®°å¾—åœ¨ [ä½¿ç”¨è‡ªå¼•ç”¨æ•°æ®å®šä¹‰è®¾è®¡](#%28part._ch~3adesign-lists%29) ä¸­ç”¨æ¥è¯´æ˜è‡ªå¼•ç”¨æ•°æ®è®¾è®¡æ–¹æ³•çš„ä¾‹å­ã€‚è¯¥å‡½æ•°è¢«å‘½åä¸º
    how-manyï¼Œå®ƒåŒæ ·è®¡ç®—å­—ç¬¦ä¸²åˆ—è¡¨ä¸Šçš„å­—ç¬¦ä¸²æ•°é‡ã€‚å°½ç®¡ how-many çš„è¾“å…¥æœ¬åº”è¡¨ç¤ºä¸€ä¸ªåå­—åˆ—è¡¨ï¼Œä½†è¿™ç§å·®å¼‚å¹¶ä¸é‡è¦ï¼›åªè¦å®ƒæ­£ç¡®åœ°è®¡ç®—å­—ç¬¦ä¸²åˆ—è¡¨ä¸Šçš„å­—ç¬¦ä¸²æ•°é‡ï¼Œhow-many
    å°±è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ã€‚ç”±äºé‡ç”¨ç°æœ‰å‡½æ•°æ˜¯å¥½çš„ï¼Œä½ å¯ä»¥å°† words# å®šä¹‰ä¸º
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words#Â los)
    |'
  id: totrans-1389
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words#Â los)
    |'
- en: '| Â Â (how-manyÂ los)) |'
  id: totrans-1390
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (how-manyÂ los)) |'
- en: In reality, however, programming languages come with functions that solve such
    problems already. BSL calls this function [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29),
    and it counts the number of values on any list of values, no matter what the values
    are.
  id: totrans-1391
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç°å®ä¸­ï¼Œç„¶è€Œï¼Œç¼–ç¨‹è¯­è¨€å·²ç»æä¾›äº†è§£å†³è¿™ç±»é—®é¢˜çš„å‡½æ•°ã€‚BSL å°†æ­¤å‡½æ•°ç§°ä¸º [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)ï¼Œå®ƒè®¡ç®—ä»»ä½•å€¼åˆ—è¡¨ä¸Šçš„å€¼çš„æ•°é‡ï¼Œæ— è®ºè¿™äº›å€¼æ˜¯ä»€ä¹ˆã€‚
- en: '| ;Â An LN is one of: |'
  id: totrans-1392
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An LN is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-1393
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Los](part_three.html#%28tech._sim-dd._lo%29)  [LN](#%28tech._ln%29))
    |'
  id: totrans-1394
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Los](part_three.html#%28tech._sim-dd._lo%29)  [LN](#%28tech._ln%29))
    |'
- en: '| ;Â interpretation a list of lines, each is a list of [String](part_one.html#%28tech._string%29)s
    |'
  id: totrans-1395
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation a list of lines, each is a list of [String](part_one.html#%28tech._string%29)s
    |'
- en: '| Â  |'
  id: totrans-1396
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "world"Â ''())))
    |'
  id: totrans-1397
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "world"Â ''())))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line1Â ''())
    |'
  id: totrans-1398
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line1Â ''())
    |'
- en: '| Â  |'
  id: totrans-1399
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ln0Â ''())
    |'
  id: totrans-1400
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ln0Â ''())
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ln1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line1Â ''())))
    |'
  id: totrans-1401
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ln1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line1Â ''())))
    |'
- en: '| Â  |'
  id: totrans-1402
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [LN](#%28tech._ln%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1403
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [LN](#%28tech._ln%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
- en: '| ;Â determines the number of words on each line |'
  id: totrans-1404
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â determines the number of words on each line |'
- en: '| Â  |'
  id: totrans-1405
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ ln0)Â ''())
    |'
  id: totrans-1406
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ ln0)Â ''())
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ ln1)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0Â ''())))
    |'
  id: totrans-1407
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ ln1)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0Â ''())))
    |'
- en: '| Â  |'
  id: totrans-1408
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words-on-lineÂ ln)
    |'
  id: totrans-1409
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words-on-lineÂ ln)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1410
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ln)Â ''()]
    |'
  id: totrans-1411
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ln)Â ''()]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ln))
    |'
  id: totrans-1412
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ln))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (words-on-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ln)))]))
    |'
  id: totrans-1413
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (words-on-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ln)))]))
    |'
- en: ''
  id: totrans-1414
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 68: Counting the words on a line'
  id: totrans-1415
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾68ï¼šè®¡ç®—æ¯è¡Œçš„å•è¯æ•°
- en: You may wish to look over the list of functions that come with BSL. Some may
    look obscure but may become useful in one of the upcoming problems. Using such
    functions saves your time, not ours.
  id: totrans-1416
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½æƒ³æŸ¥çœ‹BSLé™„å¸¦çš„åŠŸèƒ½åˆ—è¡¨ã€‚å…¶ä¸­ä¸€äº›å¯èƒ½çœ‹èµ·æ¥å¾ˆæ™¦æ¶©ï¼Œä½†å¯èƒ½åœ¨æœªæ¥çš„æŸä¸ªé—®é¢˜ä¸­å˜å¾—æœ‰ç”¨ã€‚ä½¿ç”¨è¿™äº›å‡½æ•°å¯ä»¥èŠ‚çœä½ çš„æ—¶é—´ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„ã€‚
- en: '[FigureÂ 68](#%28counter._%28figure._fig~3awords-on-line%29%29) summarizes the
    full design for our sample problem. The figure includes two test cases. Also,
    instead of using the separate function words#, the definition of words-on-line
    simply calls the [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)
    function that comes with BSL. Experiment with the definition in DrRacket and make
    sure that the two test cases cover the entire function definition.'
  id: totrans-1417
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾68](#%28counter._%28figure._fig~3awords-on-line%29%29)æ€»ç»“äº†æˆ‘ä»¬çš„ç¤ºä¾‹é—®é¢˜çš„å®Œæ•´è®¾è®¡ã€‚è¯¥å›¾åŒ…æ‹¬ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚æ­¤å¤–ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å•ç‹¬çš„å‡½æ•°words#ï¼Œwords-on-lineçš„å®šä¹‰ç®€å•åœ°è°ƒç”¨äº†BSLé™„å¸¦çš„é•¿å‡½æ•°[é•¿åº¦](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)ã€‚åœ¨DrRacketä¸­å°è¯•å®šä¹‰ï¼Œå¹¶ç¡®ä¿ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹è¦†ç›–æ•´ä¸ªå‡½æ•°å®šä¹‰ã€‚'
- en: 'With one small step, you can now design your first file utility:'
  id: totrans-1418
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡ä¸€å°æ­¥ï¼Œä½ ç°åœ¨å¯ä»¥è®¾è®¡ä½ çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶å®ç”¨å·¥å…·ï¼š
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1419
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
- en: '| ;Â counts the words on each line in the given file |'
  id: totrans-1420
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â counts the words on each line in the given file |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (file-statisticÂ file-name)
    |'
  id: totrans-1421
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (file-statisticÂ file-name)
    |'
- en: '| Â Â (words-on-line |'
  id: totrans-1422
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (words-on-line |'
- en: '| Â Â Â Â ([read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)Â file-name)))
    |'
  id: totrans-1423
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)Â file-name)))
    |'
- en: It merely composes a teachpack function with words-on-line. The former reads
    a file as a [List-of-list-of-strings](#%28tech._list._of._list._of._string%29)
    and hands this value to the latter.
  id: totrans-1424
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä»…ä»…æ˜¯å°†ä¸€ä¸ªæ•™å­¦åŒ…å‡½æ•°ä¸åœ¨çº¿å•è¯ç»„åˆèµ·æ¥ã€‚å‰è€…è¯»å–ä¸€ä¸ªæ–‡ä»¶ä½œä¸º [List-of-list-of-strings](#%28tech._list._of._list._of._string%29)
    å¹¶å°†è¿™ä¸ªå€¼ä¼ é€’ç»™åè€…ã€‚
- en: This idea of composing a built-in function with a newly designed function is
    common. Naturally, people donâ€™t design functions randomly and expect to find something
    in the chosen programming language to complement their design. Instead, program
    designers plan ahead and design the function to the output that available functions
    deliver. More generally still and as mentioned above, it is common to think about
    a solution as a composition of two computations and to develop an appropriate
    data collection with which to communicate the result of one computation to the
    second one, where each computation is implemented with a function.
  id: totrans-1425
  prefs: []
  type: TYPE_NORMAL
  zh: å°†ä¸€ä¸ªå†…ç½®å‡½æ•°ä¸ä¸€ä¸ªæ–°è®¾è®¡çš„å‡½æ•°ç»„åˆèµ·æ¥çš„æƒ³æ³•å¾ˆå¸¸è§ã€‚è‡ªç„¶åœ°ï¼Œäººä»¬ä¸ä¼šéšæœºè®¾è®¡å‡½æ•°å¹¶æœŸæœ›åœ¨é€‰å®šçš„ç¼–ç¨‹è¯­è¨€ä¸­æ‰¾åˆ°ä¸€äº›ä¸œè¥¿æ¥è¡¥å……ä»–ä»¬çš„è®¾è®¡ã€‚ç›¸åï¼Œç¨‹åºè®¾è®¡è€…ä¼šæå‰è§„åˆ’å¹¶è®¾è®¡å‡½æ•°ï¼Œä»¥é€‚åº”ç°æœ‰å‡½æ•°æä¾›çš„è¾“å‡ºã€‚æ›´æ™®éåœ°è¯´ï¼Œæ­£å¦‚ä¸Šé¢æåˆ°çš„ï¼Œé€šå¸¸å°†è§£å†³æ–¹æ¡ˆè§†ä¸ºä¸¤ä¸ªè®¡ç®—çš„ç»„åˆï¼Œå¹¶å¼€å‘é€‚å½“çš„æ•°æ®æ”¶é›†æ¥å°†ä¸€ä¸ªè®¡ç®—çš„ç»“æœä¼ é€’ç»™å¦ä¸€ä¸ªè®¡ç®—ï¼Œå…¶ä¸­æ¯ä¸ªè®¡ç®—éƒ½é€šè¿‡ä¸€ä¸ªå‡½æ•°æ¥å®ç°ã€‚
- en: '| ;Â [1String](part_one.html#%28tech._1string%29) -> [String](part_one.html#%28tech._string%29)
    |'
  id: totrans-1426
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [1String](part_one.html#%28tech._1string%29) -> [String](part_one.html#%28tech._string%29)
    |'
- en: '| ;Â converts the given [1String](part_one.html#%28tech._1string%29) to a 3-letter
    numeric [String](part_one.html#%28tech._string%29) |'
  id: totrans-1427
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; å°†ç»™å®šçš„ [1String](part_one.html#%28tech._1string%29) è½¬æ¢ä¸º 3 å­—ç¬¦æ•°å­— [String](part_one.html#%28tech._string%29)
    |'
- en: '| Â  |'
  id: totrans-1428
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (encode-letterÂ "z")Â (code1Â "z"))
    |'
  id: totrans-1429
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (encode-letterÂ "z")Â (code1Â "z"))
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (encode-letterÂ "\t")
    |'
  id: totrans-1430
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (encode-letterÂ "\t")
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "00"Â (code1Â "\t")))
    |'
  id: totrans-1431
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "00"Â (code1Â "\t")))
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (encode-letterÂ "a")
    |'
  id: totrans-1432
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (encode-letterÂ "a")
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "0"Â (code1Â "a")))
    |'
  id: totrans-1433
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "0"Â (code1Â "a")))
    |'
- en: '| Â  |'
  id: totrans-1434
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (encode-letterÂ s)
    |'
  id: totrans-1435
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (encode-letterÂ s)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1436
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â s)Â 100)Â (code1Â s)]
    |'
  id: totrans-1437
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â s)Â 100)Â (code1Â s)]
    |'
- en: '| Â Â Â Â [([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â s)Â 10)
    |'
  id: totrans-1438
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â s)Â 10)
    |'
- en: '| Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "00"Â (code1Â s))]
    |'
  id: totrans-1439
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "00"Â (code1Â s))]
    |'
- en: '| Â Â Â Â [([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â s)Â 100)
    |'
  id: totrans-1440
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â s)Â 100)
    |'
- en: '| Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "0"Â (code1Â s))]))
    |'
  id: totrans-1441
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "0"Â (code1Â s))]))
    |'
- en: '| Â  |'
  id: totrans-1442
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [1String](part_one.html#%28tech._1string%29) -> [String](part_one.html#%28tech._string%29)
    |'
  id: totrans-1443
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [1String](part_one.html#%28tech._1string%29) -> [String](part_one.html#%28tech._string%29)
    |'
- en: '| ;Â converts the given [1String](part_one.html#%28tech._1string%29) into a
    [String](part_one.html#%28tech._string%29) |'
  id: totrans-1444
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; å°†ç»™å®šçš„ [1String](part_one.html#%28tech._1string%29) è½¬æ¢ä¸º [String](part_one.html#%28tech._string%29)
    |'
- en: '| Â  |'
  id: totrans-1445
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (code1Â "z")Â "122")
    |'
  id: totrans-1446
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (code1Â "z")Â "122")
    |'
- en: '| Â  |'
  id: totrans-1447
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (code1Â c)
    |'
  id: totrans-1448
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (code1Â c)
    |'
- en: '| Â Â ([number->string](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number-~3estring%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â c)))
    |'
  id: totrans-1449
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([number->string](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number-~3estring%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â c)))
    |'
- en: ''
  id: totrans-1450
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 69: Encoding strings'
  id: totrans-1451
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 69ï¼šå­—ç¬¦ä¸²ç¼–ç 
- en: ExerciseÂ 172\. Design the function collapse, which converts a list of lines
    into a string. The strings should be separated by blank spaces (" "). The lines
    should be separated with a newline ("\n").
  id: totrans-1452
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  172ï¼šè®¾è®¡å‡½æ•° collapseï¼Œå®ƒå°†è¡Œåˆ—è¡¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²åº”é€šè¿‡ç©ºæ ¼ï¼ˆ" "ï¼‰åˆ†éš”ã€‚è¡Œåº”é€šè¿‡æ¢è¡Œç¬¦ï¼ˆ"\n"ï¼‰åˆ†éš”ã€‚
- en: 'Challenge When you are finished, use the program like this:'
  id: totrans-1453
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‘æˆ˜ï¼šå½“ä½ å®Œæˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¨‹åºå¦‚ä¸‹ï¼š
- en: '| ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)Â "ttt.dat"
    |'
  id: totrans-1454
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)Â "ttt.dat"
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (collapseÂ ([read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)Â "ttt.txt")))
    |'
  id: totrans-1455
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â (collapseÂ ([read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)Â "ttt.txt")))
    |'
- en: To make sure the two files "ttt.dat" and "ttt.txt" are identical, remove all
    extraneous white spaces in your version of the T.T.T. poem.
  id: totrans-1456
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ç¡®ä¿ä¸¤ä¸ªæ–‡ä»¶ "ttt.dat" å’Œ "ttt.txt" ç›¸åŒï¼Œè¯·ä»ä½ çš„ T.T.T. è¯—ç‰ˆæœ¬ä¸­åˆ é™¤æ‰€æœ‰å¤šä½™çš„ç©ºç™½å­—ç¬¦ã€‚
- en: 'ExerciseÂ 173\. Design a program that removes all articles from a text file.
    The program consumes the name n of a file, reads the file, removes the articles,
    and writes the result out to a file whose name is the result of concatenating
    "no-articles-" with n. For this exercise, an article is one of the following three
    words: "a", "an", and "the".'
  id: totrans-1457
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  173ï¼šè®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œä»æ–‡æœ¬æ–‡ä»¶ä¸­åˆ é™¤æ‰€æœ‰æ–‡ç« ã€‚ç¨‹åºæ¶ˆè€—æ–‡ä»¶å nï¼Œè¯»å–æ–‡ä»¶ï¼Œåˆ é™¤æ–‡ç« ï¼Œå¹¶å°†ç»“æœå†™å…¥åä¸º "no-articles-" ä¸ n è¿æ¥çš„æ–‡ä»¶ã€‚å¯¹äºè¿™ä¸ªç»ƒä¹ ï¼Œæ–‡ç« æ˜¯æŒ‡ä»¥ä¸‹ä¸‰ä¸ªå•è¯ä¹‹ä¸€ï¼š"a"ã€"an"
    å’Œ "the"ã€‚
- en: Use [read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)
    so that the transformation retains the organization of the original text into
    lines and words. When the program is designed, run it on the Piet Hein poem.
  id: totrans-1458
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ [read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)
    ä»¥ä¿ç•™åŸå§‹æ–‡æœ¬çš„è¡Œå’Œå•è¯çš„ç»„ç»‡ç»“æ„ã€‚å½“ç¨‹åºè®¾è®¡å®Œæˆåï¼Œåœ¨çš®ç‰¹Â·æµ·å› çš„è¯—æ­Œä¸Šè¿è¡Œå®ƒã€‚
- en: ExerciseÂ 174\. Design a program that encodes text files numerically. Each letter
    in a word should be encoded as a numeric three-letter string with a value between
    0 and 256\. [FigureÂ 69](#%28counter._%28figure._fig~3aex~3aencode%29%29) shows
    our encoding function for single letters. Before you start, explain these functions.
  id: totrans-1459
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  174ã€‚è®¾è®¡ä¸€ä¸ªç¨‹åºæ¥å¯¹æ–‡æœ¬æ–‡ä»¶è¿›è¡Œæ•°å€¼ç¼–ç ã€‚å•è¯ä¸­çš„æ¯ä¸ªå­—æ¯åº”ç¼–ç ä¸ºä¸€ä¸ªä»‹äº 0 å’Œ 256 ä¹‹é—´çš„ä¸‰å­—æ¯æ•°å­—å­—ç¬¦ä¸²ã€‚[å›¾ 69](#%28counter._%28figure._fig~3aex~3aencode%29%29)
    æ˜¾ç¤ºäº†æˆ‘ä»¬ä¸ºå•ä¸ªå­—æ¯çš„ç¼–ç å‡½æ•°ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œè§£é‡Šè¿™äº›å‡½æ•°ã€‚
- en: Hints (1) Use [read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)
    to preserve the organization of the file into lines and words. (2) Read up on
    [explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29)
    again.
  id: totrans-1460
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤º (1) ä½¿ç”¨ [read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)
    ä»¥ä¿ç•™æ–‡ä»¶è¡Œå’Œå•è¯çš„ç»„ç»‡ç»“æ„ã€‚(2) å†æ¬¡é˜…è¯» [explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29)ã€‚
- en: ExerciseÂ 175\. Design a BSL program that simulates the UnixUnix is an old operating
    system, which is emulated by Linux, macOS, and to some extent modern Windows.
    command wc. The purpose of the command is to count the number of [1String](part_one.html#%28tech._1string%29)s,
    words, and lines in a given file. That is, the command consumes the name of a
    file and produces a value that consists of three numbers. (Why might your computerâ€™s
    wc give a slightly different result from your code?)
  id: totrans-1461
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  175ã€‚è®¾è®¡ä¸€ä¸ª BSL ç¨‹åºæ¥æ¨¡æ‹Ÿ Unix å‘½ä»¤ wcã€‚è¯¥å‘½ä»¤çš„ç›®çš„æ˜¯è®¡ç®—ç»™å®šæ–‡ä»¶ä¸­çš„ [1String](part_one.html#%28tech._1string%29)
    æ•°é‡ã€å•è¯æ•°é‡å’Œè¡Œæ•°ã€‚å³ï¼Œè¯¥å‘½ä»¤æ¶ˆè€—ä¸€ä¸ªæ–‡ä»¶çš„åç§°å¹¶äº§ç”Ÿä¸€ä¸ªç”±ä¸‰ä¸ªæ•°å­—ç»„æˆçš„ä»·å€¼ã€‚(ä¸ºä»€ä¹ˆä½ çš„è®¡ç®—æœºçš„ wc å¯èƒ½ä¼šç»™å‡ºä¸ä½ çš„ä»£ç ç•¥æœ‰ä¸åŒçš„ç»“æœï¼Ÿ)
- en: '| ;Â [Matrix](#%28tech._matrix%29) -> [Matrix](#%28tech._matrix%29) |'
  id: totrans-1462
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [çŸ©é˜µ](#%28tech._matrix%29) -> [çŸ©é˜µ](#%28tech._matrix%29) |'
- en: '| ;Â transposes the given matrix along the diagonal |'
  id: totrans-1463
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ²¿å¯¹è§’çº¿è½¬ç½®ç»™å®šçš„çŸ©é˜µ |'
- en: '| Â  |'
  id: totrans-1464
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â wor1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 11Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 21Â ''())))
    |'
  id: totrans-1465
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â wor1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 11Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 21Â ''())))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â wor2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 12Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 22Â ''())))
    |'
  id: totrans-1466
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â wor2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 12Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 22Â ''())))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â tam1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â wor1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â wor2Â ''())))
    |'
  id: totrans-1467
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â tam1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â wor1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â wor2Â ''())))
    |'
- en: '| Â  |'
  id: totrans-1468
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (transposeÂ mat1)Â tam1)
    |'
  id: totrans-1469
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (è½¬ç½®Â mat1)Â tam1)
    |'
- en: '| Â  |'
  id: totrans-1470
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (transposeÂ lln)
    |'
  id: totrans-1471
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (è½¬ç½®Â lln)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1472
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â lln))Â ''()]
    |'
  id: totrans-1473
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â lln))Â ''()]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (first*Â lln)Â (transposeÂ (rest*Â lln)))]))
    |'
  id: totrans-1474
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (first*Â lln)Â (è½¬ç½®Â (rest*Â lln)))]))
    |'
- en: ''
  id: totrans-1475
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 70: Transpose a matrix'
  id: totrans-1476
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾70ï¼šè½¬ç½®çŸ©é˜µ
- en: 'ExerciseÂ 176\. Mathematics teachers may have introduced you to matrix calculations
    by now. In principle, matrix just means rectangle of numbers. Here is one possible
    data representation for matrices:'
  id: totrans-1477
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 176ã€‚æ•°å­¦è€å¸ˆå¯èƒ½å·²ç»å‘æ‚¨ä»‹ç»äº†çŸ©é˜µè®¡ç®—ã€‚åŸåˆ™ä¸Šï¼ŒçŸ©é˜µåªæ˜¯æ•°å­—çš„çŸ©å½¢ã€‚ä»¥ä¸‹æ˜¯çŸ©é˜µçš„ä¸€ç§å¯èƒ½çš„æ•°æ®è¡¨ç¤ºï¼š
- en: '| ;Â A Matrix is one of: |'
  id: totrans-1478
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â çŸ©é˜µå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Row](#%28tech._row%29)  ''())
    |'
  id: totrans-1479
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [è¡Œ](#%28tech._row%29)  ''())
    |'
- en: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Row](#%28tech._row%29)  [Matrix](#%28tech._matrix%29))
    |'
  id: totrans-1480
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [è¡Œ](#%28tech._row%29)  [çŸ©é˜µ](#%28tech._matrix%29))
    |'
- en: '| ;Â constraint all rows in matrix are of the same length |'
  id: totrans-1481
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â çº¦æŸçŸ©é˜µä¸­æ‰€æœ‰è¡Œé•¿åº¦ç›¸åŒ |'
- en: '| Â  |'
  id: totrans-1482
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A Row is one of: |'
  id: totrans-1483
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è¡Œå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â   â€“  ''() |'
  id: totrans-1484
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â   â€“  ''() |'
- en: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  [Row](#%28tech._row%29))
    |'
  id: totrans-1485
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [æ•°å­—](part_one.html#%28tech._number%29)  [è¡Œ](#%28tech._row%29))
    |'
- en: 'Note the constraints on matrices. Study the data definition and translate the
    two-by-two matrix consisting of the numbers 11, 12, 21, and 22 into this data
    representation. Stop, donâ€™t read on until you have figured out the data examples.Here
    is the solution for the five-second puzzle:'
  id: totrans-1486
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„çŸ©é˜µçš„çº¦æŸæ¡ä»¶ã€‚ç ”ç©¶æ•°æ®å®šä¹‰ï¼Œå¹¶å°†ç”±æ•°å­—11ã€12ã€21å’Œ22ç»„æˆçš„2x2çŸ©é˜µç¿»è¯‘æˆè¿™ç§æ•°æ®è¡¨ç¤ºã€‚åœä¸‹ï¼Œä¸è¦ç»§ç»­é˜…è¯»ï¼Œç›´åˆ°ä½ å¼„æ¸…æ¥šæ•°æ®ç¤ºä¾‹ã€‚ä»¥ä¸‹æ˜¯äº”ç§’è°œé¢˜çš„è§£å†³æ–¹æ¡ˆï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â row1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 11Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 12Â ''())))
    |'
  id: totrans-1487
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â row1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 11Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 12Â ''())))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â row2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 21Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 22Â ''())))
    |'
  id: totrans-1488
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â row2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 21Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 22Â ''())))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â mat1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â row1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â row2Â ''())))
    |'
  id: totrans-1489
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â mat1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â row1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â row2Â ''())))
    |'
- en: If you didnâ€™t create it yourself, study it now.
  id: totrans-1490
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æ²¡æœ‰è‡ªå·±åˆ›å»ºå®ƒï¼Œç°åœ¨å°±å­¦ä¹ å®ƒã€‚
- en: The function in [figureÂ 70](#%28counter._%28figure._fig~3aex~3atranspose%29%29)
    implements the important mathematical operation of transposing the entries in
    a matrix. To transpose means to mirror the entries along the diagonal, that is,
    the line from the top-left to the bottom-right.
  id: totrans-1491
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾70](#%28counter._%28figure._fig~3aex~3atranspose%29%29)ä¸­çš„å‡½æ•°å®ç°äº†çŸ©é˜µä¸­æ¡ç›®è½¬ç½®çš„é‡è¦æ•°å­¦æ“ä½œã€‚è½¬ç½®æ„å‘³ç€æ²¿ç€å¯¹è§’çº¿é•œåƒæ¡ç›®ï¼Œå³ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„çº¿ã€‚'
- en: Stop! Transpose mat1 by hand, then read [figureÂ 70](#%28counter._%28figure._fig~3aex~3atranspose%29%29).
    Why does transpose ask ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  lln))?
  id: totrans-1492
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼æ‰‹åŠ¨è½¬ç½®mat1ï¼Œç„¶åé˜…è¯»[å›¾70](#%28counter._%28figure._fig~3aex~3atranspose%29%29)ã€‚ä¸ºä»€ä¹ˆè½¬ç½®ä¼šè¯¢é—®([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  lln))ï¼Ÿ
- en: 'The definition assumes two auxiliary functions:'
  id: totrans-1493
  prefs: []
  type: TYPE_NORMAL
  zh: å®šä¹‰å‡è®¾äº†ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ï¼š
- en: first*, which consumes a matrix and produces the first column as a list of numbers;
    and
  id: totrans-1494
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: first*ï¼Œå®ƒæ¥å—ä¸€ä¸ªçŸ©é˜µå¹¶äº§ç”Ÿä¸€ä¸ªåŒ…å«æ•°å­—çš„åˆ—è¡¨ä½œä¸ºç¬¬ä¸€åˆ—ï¼›å¹¶ä¸”
- en: rest*, which consumes a matrix and removes the first column. The result is a
    matrix.
  id: totrans-1495
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: rest*ï¼Œå®ƒæ¥å—ä¸€ä¸ªçŸ©é˜µå¹¶ç§»é™¤ç¬¬ä¸€åˆ—ã€‚ç»“æœæ˜¯å¦ä¸€ä¸ªçŸ©é˜µã€‚
- en: Even though you lack definitions for these functions, you should be able to
    understand how transpose works. You should also understand that you cannot design
    this function with the design recipes you have seen so far. Explain why.
  id: totrans-1496
  prefs: []
  type: TYPE_NORMAL
  zh: å³ä½¿ä½ æ²¡æœ‰è¿™äº›å‡½æ•°çš„å®šä¹‰ï¼Œä½ ä¹Ÿåº”è¯¥èƒ½å¤Ÿç†è§£è½¬ç½®æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ä½ è¿˜åº”è¯¥ç†è§£ä½ ä¸èƒ½ä½¿ç”¨ä½ è¿„ä»Šä¸ºæ­¢çœ‹åˆ°çš„é…æ–¹æ¥è®¾è®¡è¿™ä¸ªå‡½æ•°ã€‚è§£é‡ŠåŸå› ã€‚
- en: Design the two wish-list functions. Then complete the design of transpose with
    some test cases.
  id: totrans-1497
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸¤ä¸ªæ„¿æœ›åˆ—è¡¨å‡½æ•°ã€‚ç„¶åä½¿ç”¨ä¸€äº›æµ‹è¯•æ¡ˆä¾‹å®Œæˆè½¬ç½®çš„è®¾è®¡ã€‚
- en: 10.4A Graphical Editor, Revisited[ğŸ”—](#(part._list-edit2._sec~3aedit2) "Link
    to here")
  id: totrans-1498
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 10.4å†æ¬¡è®¿é—®å›¾å½¢ç¼–è¾‘å™¨[ğŸ”—](#(part._list-edit2._sec~3aedit2) "é“¾æ¥åˆ°æ­¤å¤„")
- en: '[A Graphical Editor](part_one.html#%28part._sec~3aedit1%29) is about the design
    of an interactive graphical one-line editor. It suggests two different ways to
    represent the state of the editor and urges you to explore both: a structure that
    contains a pair of strings or a structure that combines a string with an index
    to a current position (see [exerciseÂ 87](part_one.html#%28counter._%28exercise._struct-edit4%29%29)).'
  id: totrans-1499
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾å½¢ç¼–è¾‘å™¨](part_one.html#%28part._sec~3aedit1%29)æ˜¯å…³äºè®¾è®¡ä¸€ä¸ªäº¤äº’å¼å•è¡Œå›¾å½¢ç¼–è¾‘å™¨çš„ã€‚å®ƒå»ºè®®ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥è¡¨ç¤ºç¼–è¾‘å™¨çš„çŠ¶æ€ï¼Œå¹¶æ•¦ä¿ƒä½ æ¢ç´¢ä¸¤ç§æ–¹å¼ï¼šä¸€ä¸ªåŒ…å«ä¸€å¯¹å­—ç¬¦ä¸²çš„ç»“æ„æˆ–ä¸€ä¸ªç»“åˆå­—ç¬¦ä¸²å’Œå½“å‰ä½ç½®ç´¢å¼•çš„ç»“æ„ï¼ˆå‚è§[ç»ƒä¹ 87](part_one.html#%28counter._%28exercise._struct-edit4%29%29)ï¼‰ã€‚'
- en: 'A third alternative is to use structures that combine two lists of [1String](part_one.html#%28tech._1string%29)s:'
  id: totrans-1500
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸‰ç§é€‰æ‹©æ˜¯ä½¿ç”¨ç»“åˆä¸¤ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨çš„ç»“æ„[1String](part_one.html#%28tech._1string%29)ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â editorÂ [preÂ post])
    |'
  id: totrans-1501
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â editorÂ [preÂ post])
    |'
- en: '| ;Â An Editor is a structure: |'
  id: totrans-1502
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªç¼–è¾‘å™¨æ˜¯ä¸€ä¸ªç»“æ„ï¼š|'
- en: '| ;Â Â Â (make-editor  [Lo1S](#%28tech._list-edit2._lo1%29)  [Lo1S](#%28tech._list-edit2._lo1%29))
    |'
  id: totrans-1503
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-editor  [Lo1S](#%28tech._list-edit2._lo1%29)  [Lo1S](#%28tech._list-edit2._lo1%29))
    |'
- en: '| ;Â An Lo1S is one of: |'
  id: totrans-1504
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An Lo1S is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-1505
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [1String](part_one.html#%28tech._1string%29)  [Lo1S](#%28tech._list-edit2._lo1%29))
    |'
  id: totrans-1506
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [1String](part_one.html#%28tech._1string%29)  [Lo1S](#%28tech._list-edit2._lo1%29))
    |'
- en: 'Before you wonder why, letâ€™s make up two data examples:'
  id: totrans-1507
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä½ å¥½å¥‡ä¸ºä»€ä¹ˆä¹‹å‰ï¼Œè®©æˆ‘ä»¬æ„é€ ä¸¤ä¸ªæ•°æ®ç¤ºä¾‹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â good
    |'
  id: totrans-1508
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â good
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "g"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "d"Â ''())))))
    |'
  id: totrans-1509
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "g"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "d"Â ''())))))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â all
    |'
  id: totrans-1510
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â all
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ''()))))
    |'
  id: totrans-1511
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ''()))))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â lla
    |'
  id: totrans-1512
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â lla
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))))
    |'
  id: totrans-1513
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))))
    |'
- en: '| Â  |'
  id: totrans-1514
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â data example 1: |'
  id: totrans-1515
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â data example 1: |'
- en: '| (make-editorÂ allÂ good) |'
  id: totrans-1516
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (make-editorÂ allÂ good) |'
- en: '| Â  |'
  id: totrans-1517
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â data example 2: |'
  id: totrans-1518
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â data example 2: |'
- en: '| (make-editorÂ llaÂ good) |'
  id: totrans-1519
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (make-editorÂ llaÂ good) |'
- en: 'The two examples demonstrate how important it is to write down an interpretation.
    While the two fields of an editor clearly represent the letters to the left and
    right of the cursor, the two examples demonstrate that there are at least two
    ways to interpret the structure types:'
  id: totrans-1520
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸¤ä¸ªç¤ºä¾‹å±•ç¤ºäº†å†™ä¸‹è§£é‡Šçš„é‡è¦æ€§ã€‚è™½ç„¶ç¼–è¾‘å™¨çš„ä¸¤ä¸ªå­—æ®µæ˜¾ç„¶ä»£è¡¨äº†å…‰æ ‡å·¦å³ä¸¤ä¾§çš„å­—æ¯ï¼Œä½†è¿™ä¸¤ä¸ªç¤ºä¾‹å±•ç¤ºäº†è‡³å°‘æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§£é‡Šç»“æ„ç±»å‹ï¼š
- en: (make-editor  pre  post) could mean the letters in pre precede the cursor and
    those in post succeed it and that the combined text is
  id: totrans-1521
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (make-editor  pre  post) å¯èƒ½æ„å‘³ç€ pre ä¸­çš„å­—æ¯åœ¨å…‰æ ‡ä¹‹å‰ï¼Œè€Œ post ä¸­çš„å­—æ¯åœ¨å…‰æ ‡ä¹‹åï¼Œå¹¶ä¸”ç»„åˆæ–‡æœ¬æ˜¯
- en: ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â pre)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â post))
  id: totrans-1522
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â pre)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â post))
- en: Recall that [implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)
    turns a list of [1String](part_one.html#%28tech._1string%29)s into a [String](part_one.html#%28tech._string%29).
  id: totrans-1523
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å›æƒ³ä¸€ä¸‹ï¼Œ[implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)
    å‡½æ•°å¯ä»¥å°†ä¸€ä¸ª [1String](part_one.html#%28tech._1string%29) åˆ—è¡¨è½¬æ¢æˆä¸€ä¸ª [String](part_one.html#%28tech._string%29)ã€‚
- en: '(make-editor  pre  post) could equally well mean that the letters in pre precede
    the cursor in reverse order. If so, we obtain the text in the displayed editor
    like this:'
  id: totrans-1524
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (make-editor  pre  post) å¯ä»¥åŒæ ·æ„å‘³ç€ pre ä¸­çš„å­—æ¯ä»¥é€†åºé¡ºåºä½äºå…‰æ ‡ä¹‹å‰ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬å°†åœ¨æ˜¾ç¤ºçš„ç¼–è¾‘å™¨ä¸­å¾—åˆ°å¦‚ä¸‹æ–‡æœ¬ï¼š
- en: '| ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â (revÂ pre))
    |'
  id: totrans-1525
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â (revÂ pre)))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â post))
    |'
  id: totrans-1526
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â post))
    |'
- en: The function rev must consume a list of [1String](part_one.html#%28tech._1string%29)s
    and reverse it.
  id: totrans-1527
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: rev å‡½æ•°å¿…é¡»æ¶ˆè´¹ä¸€ä¸ª [1String](part_one.html#%28tech._1string%29) åˆ—è¡¨å¹¶å°†å…¶åè½¬ã€‚
- en: 'Even without a complete definition for rev, you can imagine how it works. Use
    this understanding to make sure you understand that translating the first data
    example into information according to the first interpretation and treating the
    second data example according to the second interpretation yields the same editor
    display:'
  id: totrans-1528
  prefs: []
  type: TYPE_NORMAL
  zh: å³ä½¿æ²¡æœ‰ rev å‡½æ•°çš„å®Œæ•´å®šä¹‰ï¼Œä½ ä¹Ÿå¯ä»¥æƒ³è±¡å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ä½¿ç”¨è¿™ç§ç†è§£æ¥ç¡®ä¿ä½ ç†è§£ï¼Œæ ¹æ®ç¬¬ä¸€ç§è§£é‡Šå°†ç¬¬ä¸€ä¸ªæ•°æ®ç¤ºä¾‹è½¬æ¢ä¸ºä¿¡æ¯ï¼Œå¹¶æ ¹æ®ç¬¬äºŒç§è§£é‡Šå¤„ç†ç¬¬äºŒä¸ªæ•°æ®ç¤ºä¾‹ï¼Œä¼šäº§ç”Ÿç›¸åŒçš„ç¼–è¾‘å™¨æ˜¾ç¤ºï¼š
- en: '![image](../Images/46a6dc94bf699eacf19c45329bc5ae3b.png)'
  id: totrans-1529
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/46a6dc94bf699eacf19c45329bc5ae3b.png)'
- en: Both interpretations are fine choices, but it turns out that using the second
    one greatly simplifies the design of the program. The rest of this section demonstrates
    this point, illustrating the use of lists inside of structures at the same time.
    To appreciate the lesson properly, you should have solved the exercises in [A
    Graphical Editor](part_one.html#%28part._sec~3aedit1%29).
  id: totrans-1530
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¤ç§è§£é‡Šéƒ½æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œä½†ç»“æœè¯æ˜ä½¿ç”¨ç¬¬äºŒç§è§£é‡Šå¯ä»¥æå¤§åœ°ç®€åŒ–ç¨‹åºçš„è®¾è®¡ã€‚æœ¬èŠ‚å‰©ä½™éƒ¨åˆ†å°†æ¼”ç¤ºè¿™ä¸€ç‚¹ï¼ŒåŒæ—¶è¯´æ˜åœ¨ç»“æ„ä½“ä¸­ä½¿ç”¨åˆ—è¡¨çš„æ–¹æ³•ã€‚ä¸ºäº†æ­£ç¡®ç†è§£è¿™ä¸ªæ•™è®­ï¼Œä½ åº”è¯¥å·²ç»è§£å†³äº†
    [å›¾å½¢ç¼–è¾‘å™¨](part_one.html#%28part._sec~3aedit1%29) ä¸­çš„ç»ƒä¹ ã€‚
- en: 'Letâ€™s start with rev because we clearly need this function to make sense out
    of the data definition. Its header material is straightforward:'
  id: totrans-1531
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä» rev å‡½æ•°å¼€å§‹ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¾ç„¶éœ€è¦è¿™ä¸ªå‡½æ•°æ¥ä½¿æ•°æ®å®šä¹‰æœ‰æ„ä¹‰ã€‚å…¶å¤´éƒ¨ææ–™å¾ˆç®€å•ï¼š
- en: '| ;Â [Lo1s](#%28tech._list-edit2._lo1%29) -> [Lo1s](#%28tech._list-edit2._lo1%29)
    |'
  id: totrans-1532
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Lo1s](#%28tech._list-edit2._lo1%29) -> [Lo1s](#%28tech._list-edit2._lo1%29)
    |'
- en: '| ;Â produces a reverse version of the given list |'
  id: totrans-1533
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”Ÿæˆç»™å®šåˆ—è¡¨çš„é€†åºç‰ˆæœ¬ |'
- en: '| Â  |'
  id: totrans-1534
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-1535
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (revÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ''()))))
    |'
  id: totrans-1536
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (revÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ''()))))
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))))
    |'
  id: totrans-1537
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))))
    |'
- en: '| Â  |'
  id: totrans-1538
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (revÂ l)Â l)
    |'
  id: totrans-1539
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (revÂ l)Â l)
    |'
- en: 'For good measure, we have added one â€œobviousâ€ example as a test case. You may
    want to add some extra examples just to make sure you understand what is needed.The
    template for rev is the usual list template:'
  id: totrans-1540
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ç¡®ä¿ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªâ€œæ˜æ˜¾â€çš„ä¾‹å­ä½œä¸ºæµ‹è¯•ç”¨ä¾‹ã€‚ä½ å¯èƒ½è¿˜æƒ³æ·»åŠ ä¸€äº›é¢å¤–çš„ä¾‹å­ï¼Œä»¥ç¡®ä¿ä½ ç†è§£äº†æ‰€éœ€çš„å†…å®¹ã€‚revçš„æ¨¡æ¿æ˜¯å¸¸ç”¨çš„åˆ—è¡¨æ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (revÂ l)
    |'
  id: totrans-1541
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (revÂ l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1542
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1543
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1544
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (revÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1545
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (revÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'There are two cases, and the second case comes with several selector expressions
    and a self-referential one.Filling in the template is easy for the first clause:
    the reverse version of the empty list is the empty list. For the second clause,
    we once again use the coding questions:'
  id: totrans-1546
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰ä¸¤ç§æƒ…å†µï¼Œç¬¬äºŒç§æƒ…å†µåŒ…å«å‡ ä¸ªé€‰æ‹©è¡¨è¾¾å¼å’Œä¸€ä¸ªè‡ªå¼•ç”¨è¡¨è¾¾å¼ã€‚å¯¹äºç¬¬ä¸€ä¸ªå­å¥ï¼Œå¡«å……æ¨¡æ¿å¾ˆå®¹æ˜“ï¼šç©ºåˆ—è¡¨çš„åè½¬ç‰ˆæœ¬ä»ç„¶æ˜¯ç©ºåˆ—è¡¨ã€‚å¯¹äºç¬¬äºŒä¸ªå­å¥ï¼Œæˆ‘ä»¬å†æ¬¡ä½¿ç”¨ç¼–ç é—®é¢˜ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  l)
    is the first item on the list of [1String](part_one.html#%28tech._1string%29)s;
  id: totrans-1547
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    l) æ˜¯ [1String](part_one.html#%28tech._1string%29) åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l)
    is the rest of the list; and
  id: totrans-1548
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    l) æ˜¯åˆ—è¡¨å…¶ä½™éƒ¨åˆ†ï¼›å¹¶ä¸”
- en: (rev  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l))
    is the reverse of the rest of the list.
  id: totrans-1549
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (rev ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    l))) æ˜¯åˆ—è¡¨å…¶ä½™éƒ¨åˆ†çš„é€†åºã€‚
- en: Stop! Try to finish the design of rev with these hints.
  id: totrans-1550
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼å°è¯•ä½¿ç”¨ä»¥ä¸‹æç¤ºå®Œæˆ rev çš„è®¾è®¡ã€‚
- en: '| l |  |'
  id: totrans-1551
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| l |  |'
- en: ''
  id: totrans-1552
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    &#124;'
  id: totrans-1553
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    &#124;'
- en: '&#124; Â Â l) &#124;'
  id: totrans-1554
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â l) &#124;'
- en: ''
  id: totrans-1555
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-1556
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|'
- en: ''
  id: totrans-1557
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    &#124;'
  id: totrans-1558
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    &#124;'
- en: '&#124; Â Â l) &#124;'
  id: totrans-1559
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â l) &#124;'
- en: ''
  id: totrans-1560
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-1561
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-1562
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (rev &#124;'
  id: totrans-1563
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; (rev ...))'
- en: '&#124; Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))
    &#124;'
  id: totrans-1564
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    l)) &#124;'
- en: ''
  id: totrans-1565
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | (rev  l) |'
  id: totrans-1566
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | (rev l) |'
- en: '|'
  id: totrans-1567
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1568
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-1569
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "a" &#124;'
- en: '&#124; Â Â ''()) &#124;'
  id: totrans-1570
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ''()) &#124;'
- en: ''
  id: totrans-1571
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | "a" |  | ''() |  | ''() |  |'
  id: totrans-1572
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | "a" |  | ''() |  | ''() |  |'
- en: ''
  id: totrans-1573
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-1574
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "a" &#124;'
- en: '&#124; Â Â ''()) &#124;'
  id: totrans-1575
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ''()) &#124;'
- en: ''
  id: totrans-1576
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1577
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '|  |'
  id: totrans-1578
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: '|'
  id: totrans-1579
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1580
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-1581
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "a" &#124;'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  id: totrans-1582
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "b" &#124;'
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"
    &#124;'
  id: totrans-1583
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "c" &#124;'
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  id: totrans-1584
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â Â Â ''()))) &#124;'
- en: ''
  id: totrans-1585
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | "a" |  |'
  id: totrans-1586
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  | "a" |  |'
- en: ''
  id: totrans-1587
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  id: totrans-1588
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "b" &#124;'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"
    &#124;'
  id: totrans-1589
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "c" &#124;'
- en: '&#124; Â Â Â Â ''())) &#124;'
  id: totrans-1590
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ''())) &#124;'
- en: ''
  id: totrans-1591
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-1592
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-1593
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"
    &#124;'
  id: totrans-1594
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "c" &#124;'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  id: totrans-1595
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "b" &#124;'
- en: '&#124; Â Â Â Â ''())) &#124;'
  id: totrans-1596
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; Â Â Â Â ''())) &#124;'
- en: ''
  id: totrans-1597
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-1598
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-1599
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"
    &#124;'
  id: totrans-1600
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "c" &#124;'
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  id: totrans-1601
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  id: totrans-1602
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  id: totrans-1603
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;Â Â Â Â Â ''()))) &#124;'
- en: ''
  id: totrans-1604
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1605
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1606
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 71: Tabulating for rev'
  id: totrans-1607
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾71ï¼šrevçš„è¡¨æ ¼åŒ–
- en: 'If these hints leave you stuck, remember to create a table from the examples.
    [FigureÂ 71](#%28counter._list-edit2._%28figure._fig~3afk-for-rev%29%29) shows
    the table for two examples: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ''())
    and ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "c"  ''()))).
    The second example is particularly illustrative. A look at the next to last column
    shows that (rev  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l))
    accomplishes most of the work by producing ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "c"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ''())).
    Since the desired result is ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "c"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ''()))),
    rev must somehow add "a" to the end of the result of the recursion. Indeed, because
    (rev  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l))
    is always the reverse of the rest of the list, it clearly suffices to add ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  l)
    to its end. While we donâ€™t have a function that adds items to the end of a list,
    we can wish for it and use it to complete the function definition:'
  id: totrans-1608
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœè¿™äº›æç¤ºè®©æ‚¨æ„Ÿåˆ°å›°æƒ‘ï¼Œè¯·è®°ä½ä»ç¤ºä¾‹ä¸­åˆ›å»ºä¸€ä¸ªè¡¨æ ¼ã€‚[å›¾71](#%28counter._list-edit2._%28figure._fig~3afk-for-rev%29%29)æ˜¾ç¤ºäº†ä¸¤ä¸ªç¤ºä¾‹çš„è¡¨æ ¼ï¼š([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "a"  '()) å’Œ ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "a"  ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "b"  ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "c"  '()))). ç¬¬äºŒä¸ªç¤ºä¾‹å°¤å…¶å…·æœ‰è¯´æ˜æ€§ã€‚æŸ¥çœ‹å€’æ•°ç¬¬äºŒåˆ—å¯ä»¥çœ‹åˆ°ï¼Œ(rev  ([å‰©ä½™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l))é€šè¿‡äº§ç”Ÿ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "c"  ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "b"  '()))æ¥å®Œæˆå¤§éƒ¨åˆ†å·¥ä½œã€‚ç”±äºæ‰€éœ€çš„ç»“æœæ˜¯([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "c"  ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "b"  ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    "a"  '()))), revå¿…é¡»ä»¥æŸç§æ–¹å¼å°†"a"æ·»åŠ åˆ°é€’å½’ç»“æœçš„æœ«å°¾ã€‚ç¡®å®ï¼Œå› ä¸º(rev  ([å‰©ä½™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l))æ€»æ˜¯åˆ—è¡¨å…¶ä½™éƒ¨åˆ†çš„é€†åºï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾ï¼Œåªéœ€å°†([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  l)æ·»åŠ åˆ°å…¶æœ«å°¾å³å¯ã€‚è™½ç„¶æˆ‘ä»¬æ²¡æœ‰å‘åˆ—è¡¨æœ«å°¾æ·»åŠ é¡¹çš„å‡½æ•°ï¼Œä½†æˆ‘ä»¬å¯ä»¥å¸Œæœ›å®ƒå¹¶ä½¿ç”¨å®ƒæ¥å®Œæˆå‡½æ•°å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (revÂ l)
    |'
  id: totrans-1609
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (revÂ l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1610
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  id: totrans-1611
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (add-at-endÂ (revÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l))]))
    |'
  id: totrans-1612
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (add-at-endÂ (revÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l))]))
    |'
- en: 'Here is the extended wish-list entry for add-at-end:'
  id: totrans-1613
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯add-at-endçš„æ‰©å±•æ„¿æœ›æ¸…å•æ¡ç›®ï¼š
- en: '| ;Â [Lo1s](#%28tech._list-edit2._lo1%29)  [1String](part_one.html#%28tech._1string%29)
    -> [Lo1s](#%28tech._list-edit2._lo1%29) |'
  id: totrans-1614
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: ;Â [Lo1s](#%28tech._list-edit2._lo1%29)  [1String](part_one.html#%28tech._1string%29)
    -> [Lo1s](#%28tech._list-edit2._lo1%29) |
- en: '| ;Â creates a new list by adding s to the end of l |'
  id: totrans-1615
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â åœ¨åˆ—è¡¨lçš„æœ«å°¾æ·»åŠ sä»¥åˆ›å»ºä¸€ä¸ªæ–°åˆ—è¡¨ |'
- en: '| Â  |'
  id: totrans-1616
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-1617
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (add-at-endÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ''()))Â "a")
    |'
  id: totrans-1618
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([add-at-end](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add-at-end%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ''()))Â "a")
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))))
    |'
  id: totrans-1619
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))))
    |'
- en: '| Â  |'
  id: totrans-1620
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-at-endÂ lÂ s)
    |'
  id: totrans-1621
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-at-endÂ lÂ s)
    |'
- en: '| Â Â l) |'
  id: totrans-1622
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   l) |'
- en: 'It is â€œextendedâ€ because it comes with an example formulated as a test case.
    The example is derived from the example for rev, and indeed, it is precisely the
    example that motivates the wish-list entry. Make up an example where add-at-end
    consumes an empty list before you read on.Since add-at-end is also a list-processing
    function, the template is just a renaming of the one you know so well now:'
  id: totrans-1623
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒè¢«ç§°ä¸ºâ€œæ‰©å±•ç‰ˆâ€ï¼Œå› ä¸ºå®ƒé™„å¸¦äº†ä¸€ä¸ªä»¥æµ‹è¯•ç”¨ä¾‹å½¢å¼è¡¨è¿°çš„ç¤ºä¾‹ã€‚è¿™ä¸ªç¤ºä¾‹æ˜¯ä»revçš„ç¤ºä¾‹ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ï¼Œè€Œä¸”ç¡®å®ï¼Œè¿™æ­£æ˜¯æ¿€å‘æ„¿æœ›æ¸…å•æ¡ç›®æ„¿æœ›çš„ç¤ºä¾‹ã€‚åœ¨ä½ ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œå…ˆæƒ³ä¸€ä¸ªç¤ºä¾‹ï¼Œå…¶ä¸­add-at-endåœ¨æ¶ˆè€—ç©ºåˆ—è¡¨ä¹‹å‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-at-endÂ lÂ s)
    |'
  id: totrans-1624
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-at-endÂ lÂ s)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1625
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1626
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1627
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (add-at-endÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1628
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (add-at-endÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: To complete it into a function definition, we proceed according to the recipe
    questions for step 5\. Our first question is to formulate an answer for the â€œbasicâ€
    case, that is, the first case here. If you worked through the suggested exercise,
    you know that the result of
  id: totrans-1629
  prefs: []
  type: TYPE_NORMAL
  zh: '|   To complete it into a function definition, we proceed according to the
    recipe questions for step 5. Our first question is to formulate an answer for
    the â€œbasicâ€ case, that is, the first case here. If you worked through the suggested
    exercise, you know that the result of'
- en: (add-at-endÂ '()Â s)
  id: totrans-1630
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (add-at-endÂ '()Â s)
- en: 'is always ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  s  ''()).
    After all, the result must be a list and the list must contain the given 1String.The
    next two questions concern the â€œcomplexâ€ or â€œself-referentialâ€ case. We know what
    the expressions in the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line compute: the first expression extracts the first [1String](part_one.html#%28tech._1string%29)
    from the given list and the second expression â€œcreates a new list by adding s
    to the end of ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l).â€
    That is, the purpose statement dictates what the function must produce here. From
    here, it is clear that the function must add ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  l)
    back to the result of the recursion:'
  id: totrans-1631
  prefs: []
  type: TYPE_NORMAL
  zh: '|   is always ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  s  ''()).
    After all, the result must be a list and the list must contain the given 1String.
    The next two questions concern the â€œcomplexâ€ or â€œself-referentialâ€ case. We know
    what the expressions in the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line compute: the first expression extracts the first [1String](part_one.html#%28tech._1string%29)
    from the given list and the second expression â€œcreates a new list by adding s
    to the end of ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l).â€
    That is, the purpose statement dictates what the function must produce here. From
    here, it is clear that the function must add ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  l)
    back to the result of the recursion:'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-at-endÂ lÂ s)
    |'
  id: totrans-1632
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-at-endÂ lÂ s)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1633
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â sÂ ''())]
    |'
  id: totrans-1634
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |   [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â sÂ ''())]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-1635
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â (add-at-endÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)Â s))]))
    |'
  id: totrans-1636
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â (add-at-endÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)Â s)))
    |'
- en: Run the tests-as-examples to reassure yourself that this function works and
    that therefore rev works, too. Of course, you shouldnâ€™t be surprised to find out
    that BSL already provides a function that reverses any given list, including lists
    of [1String](part_one.html#%28tech._1string%29)s. And naturally, it is called
    [reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29).
  id: totrans-1637
  prefs: []
  type: TYPE_NORMAL
  zh: è¿è¡Œæµ‹è¯•ç¤ºä¾‹ä»¥ç¡®ä¿è¯¥å‡½æ•°æ­£å¸¸å·¥ä½œï¼Œä»è€Œç¡®ä¿revå‡½æ•°ä¹Ÿæ­£å¸¸å·¥ä½œã€‚å½“ç„¶ï¼Œä½ å¯èƒ½ä¼šå‘ç°BSLå·²ç»æä¾›äº†ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥åè½¬ä»»ä½•ç»™å®šçš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬[1String](part_one.html#%28tech._1string%29)åˆ—è¡¨ã€‚è€Œä¸”è‡ªç„¶åœ°ï¼Œå®ƒè¢«ç§°ä¸º[reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29)ã€‚
- en: ExerciseÂ 177\. Design the function create-editor. The function consumes two
    strings and produces an [Editor](#%28tech._list-edit2._editor%29). The first string
    is the text to the left of the cursor and the second string is the text to the
    right of the cursor. The rest of the section relies on this function.
  id: totrans-1638
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 177ã€‚è®¾è®¡create-editorå‡½æ•°ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸¤ä¸ªå­—ç¬¦ä¸²å¹¶ç”Ÿæˆä¸€ä¸ª[Editor](#%28tech._list-edit2._editor%29)ã€‚ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å…‰æ ‡å·¦ä¾§çš„æ–‡æœ¬ï¼Œç¬¬äºŒä¸ªå­—ç¬¦ä¸²æ˜¯å…‰æ ‡å³ä¾§çš„æ–‡æœ¬ã€‚æœ¬èŠ‚å…¶ä½™éƒ¨åˆ†ä¾èµ–äºæ­¤å‡½æ•°ã€‚
- en: 'At this point, you should have a complete understanding of our data representation
    for the graphical one-line editor. Following the design strategy for interactive
    programs from [Designing World Programs](part_one.html#%28part._.D.K._sec~3adesign-world%29),
    you should define physical constantsâ€”<wbr>the width and height of the editor,
    for exampleâ€”<wbr>and graphical constantsâ€”<wbr>for example, the cursor. Here are
    ours:'
  id: totrans-1639
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ åº”è¯¥å·²ç»å®Œå…¨ç†è§£äº†æˆ‘ä»¬ä¸ºå›¾å½¢åŒ–å•è¡Œç¼–è¾‘å™¨æ‰€é‡‡ç”¨çš„æ•°æ®è¡¨ç¤ºæ–¹æ³•ã€‚æ ¹æ®[è®¾è®¡ä¸–ç•Œç¨‹åº](part_one.html#%28part._.D.K._sec~3adesign-world%29)ä¸­çš„äº¤äº’ç¨‹åºè®¾è®¡ç­–ç•¥ï¼Œä½ åº”è¯¥å®šä¹‰ç‰©ç†å¸¸æ•°â€”â€”ä¾‹å¦‚ï¼Œç¼–è¾‘å™¨çš„å®½åº¦å’Œé«˜åº¦â€”â€”ä»¥åŠå›¾å½¢å¸¸æ•°â€”â€”ä¾‹å¦‚ï¼Œå…‰æ ‡ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ 20)Â ;Â the
    height of the editor |'
  id: totrans-1640
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ 20)Â ;Â ç¼–è¾‘å™¨çš„é«˜åº¦
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 200)Â ;Â its
    width |'
  id: totrans-1641
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 200)Â ;Â å…¶å®½åº¦
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â FONT-SIZEÂ 16)Â ;Â the
    font size |'
  id: totrans-1642
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â FONT-SIZEÂ 16)Â ;Â å­—ä½“å¤§å°
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â FONT-COLORÂ "black")Â ;Â the
    font color |'
  id: totrans-1643
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â FONT-COLORÂ "black")Â ;Â å­—ä½“é¢œè‰²
    |'
- en: '| Â  |'
  id: totrans-1644
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MTÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHT))
    |'
  id: totrans-1645
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MTÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHT))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â CURSORÂ ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â 1Â HEIGHTÂ "solid"Â "red"))
    |'
  id: totrans-1646
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â CURSORÂ ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â 1Â HEIGHTÂ "solid"Â "red"))
    |'
- en: 'The important point, however, is to write down the wish list for your event
    handler(s) and your function that draws the state of the editor. Recall that the
    2htdp/universe teachpack dictates the header material for these functions :'
  id: totrans-1647
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œé‡è¦çš„æ˜¯è¦å†™ä¸‹æ‚¨çš„äº‹ä»¶å¤„ç†å™¨å’Œç»˜åˆ¶ç¼–è¾‘å™¨çŠ¶æ€çš„å‡½æ•°çš„æ„¿æœ›åˆ—è¡¨ã€‚å›æƒ³ä¸€ä¸‹ï¼Œ2htdp/universeæ•™å­¦åŒ…è§„å®šäº†è¿™äº›å‡½æ•°çš„å¤´ææ–™ï¼š
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1648
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29) -> [å›¾åƒ](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â renders an editor as an image of the two texts |'
  id: totrans-1649
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†ç¼–è¾‘å™¨æ¸²æŸ“ä¸ºä¸¤ä¸ªæ–‡æœ¬çš„å›¾åƒ |'
- en: '| ;Â separated by the cursor |'
  id: totrans-1650
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”±å…‰æ ‡åˆ†éš” |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ e)Â MT)
    |'
  id: totrans-1651
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ e)Â MT)
    |'
- en: '| Â  |'
  id: totrans-1652
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [Editor](#%28tech._list-edit2._editor%29) |'
  id: totrans-1653
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29)  [é”®äº‹ä»¶](part_one.html#%28tech._keyevent%29)
    -> [ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29) |'
- en: '| ;Â deals with a key event, given some editor |'
  id: totrans-1654
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¤„ç†æŸä¸ªç¼–è¾‘å™¨çš„é”®äº‹ä»¶ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-khÂ edÂ ke)Â ed)
    |'
  id: totrans-1655
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-khÂ edÂ ke)Â ed)
    |'
- en: 'In addition, [Designing World Programs](part_one.html#%28part._.D.K._sec~3adesign-world%29)
    demands that you write down a main function for your program:'
  id: totrans-1656
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œ[è®¾è®¡ä¸–ç•Œç¨‹åº](part_one.html#%28part._.D.K._sec~3adesign-world%29)è¦æ±‚æ‚¨ä¸ºæ‚¨çš„ç¨‹åºç¼–å†™ä¸€ä¸ªä¸»å‡½æ•°ï¼š
- en: '| ;Â main : [String](part_one.html#%28tech._string%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
  id: totrans-1657
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â main : [String](part_one.html#%28tech._string%29) -> [ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29)
    |'
- en: '| ;Â launches the editor given some initial string |'
  id: totrans-1658
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¯åŠ¨ç¼–è¾‘å™¨ï¼Œç»™å®šä¸€äº›åˆå§‹å­—ç¬¦ä¸² |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ s)
    |'
  id: totrans-1659
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ s)
    |'
- en: '| Â Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â (create-editorÂ sÂ "")
    |'
  id: totrans-1660
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â ([å¤§çˆ†ç‚¸](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â (create-editorÂ sÂ "")
    |'
- en: '| Â Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â editor-kh]
    |'
  id: totrans-1661
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â editor-kh]
    |'
- en: '| Â Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â editor-render]))
    |'
  id: totrans-1662
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â editor-render]))
    |'
- en: 'Reread [exerciseÂ 177](#%28counter._list-edit2._%28exercise._create-editor%29%29)
    to determine the initial editor for this program.While it does not matter which
    wish you tackle next, we choose to design editor-kh first and editor-render second.
    Since we have the header material, letâ€™s explain the functioning of the key-event
    handler with two examples:'
  id: totrans-1663
  prefs: []
  type: TYPE_NORMAL
  zh: é‡æ–°é˜…è¯»[ç»ƒä¹ 177](#%28counter._list-edit2._%28exercise._create-editor%29%29)ä»¥ç¡®å®šæ­¤ç¨‹åºçš„åˆå§‹ç¼–è¾‘å™¨ã€‚è™½ç„¶å¤„ç†å“ªä¸ªæ„¿æœ›å¹¶ä¸é‡è¦ï¼Œä½†æˆ‘ä»¬é€‰æ‹©é¦–å…ˆè®¾è®¡editor-khï¼Œç„¶åæ˜¯editor-renderã€‚ç”±äºæˆ‘ä»¬æœ‰å¤´ææ–™ï¼Œè®©æˆ‘ä»¬ç”¨ä¸¤ä¸ªç¤ºä¾‹è§£é‡Šé”®äº‹ä»¶å¤„ç†å™¨çš„åŠŸèƒ½ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (editor-khÂ (create-editorÂ ""Â "")Â "e")
    |'
  id: totrans-1664
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (editor-khÂ (create-editorÂ ""Â "")Â "e")
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (create-editorÂ "e"Â "")) |'
  id: totrans-1665
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (create-editorÂ "e"Â "")) |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-1666
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (editor-khÂ (create-editorÂ "cd"Â "fgh")Â "e") |'
  id: totrans-1667
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (editor-khÂ (create-editorÂ "cd"Â "fgh")Â "e") |'
- en: '| Â Â (create-editorÂ "cde"Â "fgh")) |'
  id: totrans-1668
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (create-editorÂ "cde"Â "fgh")) |'
- en: Both of these examples demonstrate what happens when you press the letter â€œeâ€
    on your keyboard. The computer runs the function editor-kh on the current state
    of the editor and "e". In the first example, the editor is empty, which means
    that the result is an editor with just the letter "e" in it followed by the cursor.
    In the second example, the cursor is between the strings "cd" and "fgh", and therefore
    the result is an editor with the cursor between "cde" and "fgh". In short, the
    function always inserts any normal letter at the cursor position.
  id: totrans-1669
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸¤ä¸ªä¾‹å­éƒ½å±•ç¤ºäº†å½“ä½ æŒ‰ä¸‹é”®ç›˜ä¸Šçš„å­—æ¯â€œeâ€æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚è®¡ç®—æœºåœ¨å½“å‰ç¼–è¾‘å™¨çš„çŠ¶æ€å’Œâ€œeâ€ä¸Šè¿è¡Œeditor-khå‡½æ•°ã€‚åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œç¼–è¾‘å™¨æ˜¯ç©ºçš„ï¼Œè¿™æ„å‘³ç€ç»“æœæ˜¯åªåŒ…å«å­—æ¯â€œeâ€å¹¶è·Ÿéšå…‰æ ‡çš„ç¼–è¾‘å™¨ã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œå…‰æ ‡ä½äºå­—ç¬¦ä¸²â€œcdâ€å’Œâ€œfghâ€ä¹‹é—´ï¼Œå› æ­¤ç»“æœæ˜¯å…‰æ ‡ä½äºâ€œcdeâ€å’Œâ€œfghâ€ä¹‹é—´çš„ç¼–è¾‘å™¨ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¯¥å‡½æ•°æ€»æ˜¯åœ¨å…‰æ ‡ä½ç½®æ’å…¥ä»»ä½•æ™®é€šå­—æ¯ã€‚
- en: Before you read on, you should make up examples that illustrate how editor-kh
    works when you press the backspace ("\b") key to delete some letter, the "left"
    and "right" arrow keys to move the cursor, or some other arrow keys. In all cases,
    consider what should happen when the editor is empty, when the cursor is at the
    left end or right end of the non-empty string in the editor, and when it is in
    the middle. Even though you are not working with intervals here, it is still a
    good idea to develop examples for the â€œextremeâ€ cases.
  id: totrans-1670
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä½ ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œä½ åº”è¯¥æƒ³å‡ºä¸€äº›ä¾‹å­æ¥è¯´æ˜å½“ä½ æŒ‰ä¸‹é€€æ ¼é”®("\b")æ¥åˆ é™¤ä¸€äº›å­—æ¯ï¼Œæˆ–è€…æŒ‰ä¸‹â€œå·¦â€å’Œâ€œå³â€ç®­å¤´é”®æ¥ç§»åŠ¨å…‰æ ‡ï¼Œæˆ–è€…æŒ‰ä¸‹å…¶ä»–ç®­å¤´é”®æ—¶ï¼Œeditor-khæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œè€ƒè™‘å½“ç¼–è¾‘å™¨ä¸ºç©ºï¼Œå½“å…‰æ ‡ä½äºéç©ºå­—ç¬¦ä¸²çš„å·¦ç«¯æˆ–å³ç«¯ï¼Œä»¥åŠå½“å®ƒä½äºä¸­é—´æ—¶åº”è¯¥å‘ç”Ÿä»€ä¹ˆã€‚å³ä½¿ä½ åœ¨è¿™é‡Œä¸å¤„ç†åŒºé—´ï¼Œä¸ºâ€œæç«¯â€æƒ…å†µå¼€å‘ä¾‹å­ä¹Ÿæ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚
- en: 'Once you have test cases, it is time to develop the template. In the case of
    editor-kh you are working with a function that consumes two complex forms of data:
    one is a structure containing lists, the other one is a large enumeration of strings.
    Generally speaking, this design case calls for an improved design recipe; but
    in cases like these, it is also clear that you should deal with one of the inputs
    first, namely, the keystroke.'
  id: totrans-1671
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ä½ æœ‰äº†æµ‹è¯•ç”¨ä¾‹ï¼Œå°±æ˜¯æ—¶å€™å¼€å‘æ¨¡æ¿äº†ã€‚åœ¨ç¼–è¾‘å™¨-khçš„æƒ…å†µä¸‹ï¼Œä½ æ­£åœ¨å¤„ç†ä¸€ä¸ªæ¥å—ä¸¤ç§å¤æ‚æ•°æ®å½¢å¼çš„å‡½æ•°ï¼šä¸€ä¸ªæ˜¯åŒ…å«åˆ—è¡¨çš„ç»“æ„ï¼Œå¦ä¸€ä¸ªæ˜¯å¤§é‡çš„å­—ç¬¦ä¸²æšä¸¾ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ç§è®¾è®¡æ¡ˆä¾‹éœ€è¦æ”¹è¿›çš„è®¾è®¡æ–¹æ¡ˆï¼›ä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¹Ÿå¾ˆæ¸…æ¥šï¼Œä½ åº”è¯¥å…ˆå¤„ç†å…¶ä¸­ä¸€ä¸ªè¾“å…¥ï¼Œå³æŒ‰é”®ã€‚
- en: 'Having said that, the template is just a large [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression for checking which [KeyEvent](part_one.html#%28tech._keyevent%29) the
    function received:'
  id: totrans-1672
  prefs: []
  type: TYPE_NORMAL
  zh: è¯è™½å¦‚æ­¤ï¼Œæ¨¡æ¿åªæ˜¯ä¸€ä¸ªç”¨äºæ£€æŸ¥å‡½æ•°æ¥æ”¶åˆ°çš„å“ªä¸ª[KeyEvent](part_one.html#%28tech._keyevent%29)çš„å¤§[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)è¡¨è¾¾å¼ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-khÂ edÂ k)
    |'
  id: totrans-1673
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-khÂ edÂ k)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1674
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "left")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1675
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "left")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "right")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1676
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "right")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\b")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1677
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\b")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\t")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1678
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\t")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\r")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1679
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\r")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â k)Â 1)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1680
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â k)Â 1)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  id: totrans-1681
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
- en: The [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression doesnâ€™t quite match the data definition for [KeyEvent](part_one.html#%28tech._keyevent%29)
    because some [KeyEvent](part_one.html#%28tech._keyevent%29)s need special attention
    ("left", "\b", and so on), some need to be ignored because they are special ("\t"
    and "\r"), and some should be classified into one large group (ordinary keys).
  id: totrans-1682
  prefs: []
  type: TYPE_NORMAL
  zh: '[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    è¡¨è¾¾å¼å¹¶ä¸å®Œå…¨ç¬¦åˆ [KeyEvent](part_one.html#%28tech._keyevent%29) çš„æ•°æ®å®šä¹‰ï¼Œå› ä¸ºä¸€äº› [KeyEvent](part_one.html#%28tech._keyevent%29)
    éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼ˆå¦‚ "left", "\b" ç­‰ï¼‰ï¼Œä¸€äº›éœ€è¦è¢«å¿½ç•¥ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç‰¹æ®Šçš„ï¼ˆå¦‚ "\t" å’Œ "\r"ï¼‰ï¼Œè¿˜æœ‰ä¸€äº›åº”è¯¥è¢«å½’ç±»åˆ°ä¸€ä¸ªå¤§ç»„ä¸­ï¼ˆæ™®é€šé”®ï¼‰ã€‚'
- en: ExerciseÂ 178\. Explain why the template for editor-kh deals with "\t" and "\r"
    before it checks for strings of length 1.
  id: totrans-1683
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  178ã€‚è§£é‡Šä¸ºä»€ä¹ˆ editor-kh çš„æ¨¡æ¿åœ¨æ£€æŸ¥å­—ç¬¦ä¸²é•¿åº¦ä¸º 1 çš„å­—ç¬¦ä¸²ä¹‹å‰å¤„ç† "\t" å’Œ "\r"ã€‚
- en: 'For the fifth stepâ€”<wbr>the definition of the functionâ€”<wbr>we tackle each
    clause in the conditional separately. The first clause demands a result that moves
    the cursor and leaves the string content of the editor alone. So does the second
    clause. The third clause, however, demands the deletion of a letter from the editorâ€™s
    contentâ€”<wbr>if there is a letter. Last, the sixth [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause concerns the addition of letters at the cursor position. Following the
    first basic guideline, we make extensive use of a wish-list and imagine one function
    per task:'
  id: totrans-1684
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºç¬¬äº”æ­¥â€”â€”å‡½æ•°çš„å®šä¹‰â€”â€”æˆ‘ä»¬åˆ†åˆ«å¤„ç†æ¡ä»¶è¯­å¥ä¸­çš„æ¯ä¸ªå­å¥ã€‚ç¬¬ä¸€ä¸ªå­å¥è¦æ±‚ç§»åŠ¨å…‰æ ‡å¹¶ä¿ç•™ç¼–è¾‘å™¨çš„å­—ç¬¦ä¸²å†…å®¹ã€‚ç¬¬äºŒä¸ªå­å¥ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ç„¶è€Œï¼Œç¬¬ä¸‰ä¸ªå­å¥è¦æ±‚ä»ç¼–è¾‘å™¨çš„å†…å®¹ä¸­åˆ é™¤ä¸€ä¸ªå­—æ¯â€”â€”å¦‚æœå­˜åœ¨å­—æ¯çš„è¯ã€‚æœ€åï¼Œç¬¬å…­ä¸ª
    [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥æ¶‰åŠåœ¨å…‰æ ‡ä½ç½®æ·»åŠ å­—æ¯ã€‚éµå¾ªç¬¬ä¸€ä¸ªåŸºæœ¬æŒ‡å—ï¼Œæˆ‘ä»¬å¹¿æ³›ä½¿ç”¨æ„¿æœ›æ¸…å•ï¼Œå¹¶ä¸ºæ¯ä¸ªä»»åŠ¡æƒ³è±¡ä¸€ä¸ªå‡½æ•°ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-khÂ edÂ k)
    |'
  id: totrans-1685
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-khÂ edÂ k)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1686
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "left")Â (editor-lftÂ ed)]
    |'
  id: totrans-1687
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "left")Â (editor-lftÂ ed)]
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "right")Â (editor-rgtÂ ed)]
    |'
  id: totrans-1688
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([é”®=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "right")Â (editor-rgtÂ ed)]
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\b")Â (editor-delÂ ed)]
    |'
  id: totrans-1689
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([é”®=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\b")Â (editor-delÂ ed)]
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\t")Â ed]
    |'
  id: totrans-1690
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([é”®=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\t")Â ed]
    |'
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\r")Â ed]
    |'
  id: totrans-1691
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([é”®=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\r")Â ed]
    |'
- en: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â k)Â 1)Â (editor-insÂ edÂ k)]
    |'
  id: totrans-1692
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([å­—ç¬¦ä¸²é•¿åº¦](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â k)Â 1)Â (editor-insÂ edÂ k)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ed]))
    |'
  id: totrans-1693
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ed]))
    |'
- en: 'As you can tell from the definition of editor-kh, three of the four wish-list
    functions have the same signature:'
  id: totrans-1694
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æ‚¨ä»ç¼–è¾‘å™¨-khçš„å®šä¹‰ä¸­å¯ä»¥çœ‹å‡ºï¼Œå››ä¸ªæ„¿æœ›åˆ—è¡¨å‡½æ•°ä¸­æœ‰ä¸‰ä¸ªå…·æœ‰ç›¸åŒçš„ç­¾åï¼š
- en: ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
  id: totrans-1695
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ;Â [ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29) -> [ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29)
- en: 'The last one takes two arguments instead of one:'
  id: totrans-1696
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åä¸€ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°è€Œä¸æ˜¯ä¸€ä¸ªï¼š
- en: ;Â [Editor](#%28tech._list-edit2._editor%29)  [1String](part_one.html#%28tech._1string%29)
    -> [Editor](#%28tech._list-edit2._editor%29)
  id: totrans-1697
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ;Â [ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29)  [1å­—ç¬¦ä¸²](part_one.html#%28tech._1string%29)
    -> [ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29)
- en: 'We leave the proper formulation of wishes for the first three functions to
    you and focus on the fourth one.Letâ€™s start with a purpose statement and a function
    header:'
  id: totrans-1698
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†å‰ä¸‰ä¸ªå‡½æ•°çš„æ­£ç¡®å…¬å¼ç•™ç»™ä½ ä»¬ï¼Œå¹¶ä¸“æ³¨äºç¬¬å››ä¸ªå‡½æ•°ã€‚è®©æˆ‘ä»¬ä»ä¸€ä¸ªç›®çš„é™ˆè¿°å’Œä¸€ä¸ªå‡½æ•°å¤´å¼€å§‹ï¼š
- en: '| ;Â insert the [1String](part_one.html#%28tech._1string%29)  k between pre
    and post |'
  id: totrans-1699
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨å‰åä¹‹é—´æ’å…¥[1å­—ç¬¦ä¸²](part_one.html#%28tech._1string%29)  k |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-insÂ edÂ k)
    |'
  id: totrans-1700
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-insÂ edÂ k)
    |'
- en: '| Â Â ed) |'
  id: totrans-1701
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ed) |'
- en: 'The purpose is straight out of the problem statement. For the construction
    of a function header, we need an instance of [Editor](#%28tech._list-edit2._editor%29).
    Since pre and post are the pieces of the current one, we just put them back together.Next
    we derive examples for editor-ins from those for editor-kh:'
  id: totrans-1702
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®çš„æ˜ç¡®åœ°æ¥è‡ªé—®é¢˜é™ˆè¿°ã€‚å¯¹äºæ„å»ºå‡½æ•°å¤´ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª[ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29)çš„å®ä¾‹ã€‚ç”±äºå‰ç¼€å’Œåç¼€æ˜¯å½“å‰å®ä¾‹çš„ç»„æˆéƒ¨åˆ†ï¼Œæˆ‘ä»¬åªéœ€å°†å®ƒä»¬é‡æ–°ç»„åˆã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»ç¼–è¾‘å™¨-khçš„ä¾‹å­ä¸­æ¨å¯¼å‡ºç¼–è¾‘å™¨-insçš„ä¾‹å­ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-1703
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (editor-insÂ (make-editorÂ ''()Â ''())Â "e") |'
  id: totrans-1704
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (editor-insÂ (make-editorÂ ''()Â ''())Â "e") |'
- en: '| Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "e"Â ''())Â ''()))
    |'
  id: totrans-1705
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "e"Â ''())Â ''()))
    |'
- en: '| Â  |'
  id: totrans-1706
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-1707
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (editor-ins |'
  id: totrans-1708
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (editor-ins |'
- en: '| Â Â Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "d"Â ''())
    |'
  id: totrans-1709
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "d"Â ''())
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "f"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "g"Â ''())))
    |'
  id: totrans-1710
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "f"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "g"Â ''())))
    |'
- en: '| Â Â Â Â "e") |'
  id: totrans-1711
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â "e") |'
- en: '| Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "e"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "d"Â ''()))
    |'
  id: totrans-1712
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "e"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "d"Â ''()))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "f"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "g"Â ''()))))
    |'
  id: totrans-1713
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "f"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "g"Â ''())))
    |'
- en: 'You should work through these examples using the interpretation of [Editor](#%28tech._list-edit2._editor%29).
    That is, make sure you understand what the given editor means in terms of information
    and what the function call is supposed to achieve in those terms. In this particular
    case, it is best to draw the visual representation of the editor because it represents
    the information well.The fourth step demands the development of the template.
    The first argument is guaranteed to be a structure, and the second one is a string,
    an atomic piece of data. In other words, the template just pulls out the pieces
    from the given editor representation:'
  id: totrans-1714
  prefs: []
  type: TYPE_NORMAL
  zh: æ‚¨åº”è¯¥ä½¿ç”¨[ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29)çš„è§£é‡Šæ¥é€ä¸€å®Œæˆè¿™äº›ç¤ºä¾‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¡®ä¿æ‚¨ç†è§£ç»™å®šçš„ç¼–è¾‘å™¨åœ¨ä¿¡æ¯æ–¹é¢çš„å«ä¹‰ï¼Œä»¥åŠå‡½æ•°è°ƒç”¨åœ¨è¿™äº›æœ¯è¯­ä¸­åº”è¯¥å®ç°ä»€ä¹ˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½ç»˜åˆ¶ç¼–è¾‘å™¨çš„è§†è§‰è¡¨ç¤ºï¼Œå› ä¸ºå®ƒå¾ˆå¥½åœ°ä»£è¡¨äº†ä¿¡æ¯ã€‚ç¬¬å››æ­¥éœ€è¦å¼€å‘æ¨¡æ¿ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¿è¯æ˜¯ä¸€ä¸ªç»“æ„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸€ä¸ªåŸå­æ•°æ®ç‰‡æ®µã€‚æ¢å¥è¯è¯´ï¼Œæ¨¡æ¿åªæ˜¯ä»ç»™å®šçš„ç¼–è¾‘å™¨è¡¨ç¤ºä¸­æå–ç‰‡æ®µï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-insÂ edÂ k)
    |'
  id: totrans-1715
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-insÂ edÂ k)
    |'
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â edÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â kÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1716
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â edÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â kÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-preÂ ed)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1717
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-preÂ ed)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-postÂ ed)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  id: totrans-1718
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-postÂ ed)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: 'Remember a template lists parameters because they are available, too.From the
    template and the examples, it is relatively easy to conclude that editor-ins is
    supposed to create an editor from the given editorâ€™s pre and post fields with
    k added to the front of the former:'
  id: totrans-1719
  prefs: []
  type: TYPE_NORMAL
  zh: è®°ä½æ¨¡æ¿åˆ—å‡ºäº†å‚æ•°ï¼Œå› ä¸ºå®ƒä»¬ä¹Ÿæ˜¯å¯ç”¨çš„ã€‚ä»æ¨¡æ¿å’Œç¤ºä¾‹ä¸­ï¼Œå¯ä»¥ç›¸å¯¹å®¹æ˜“åœ°å¾—å‡ºç»“è®ºï¼Œeditor-insçš„ç›®çš„æ˜¯ä»ç»™å®šçš„ç¼–è¾‘å™¨çš„é¢„å’Œåå­—æ®µåˆ›å»ºä¸€ä¸ªç¼–è¾‘å™¨ï¼Œå¹¶å°†kæ·»åŠ åˆ°å‰è€…çš„å‰é¢ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-insÂ edÂ k)
    |'
  id: totrans-1720
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-insÂ edÂ k)
    |'
- en: '| Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â kÂ (editor-preÂ ed))
    |'
  id: totrans-1721
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â kÂ (editor-preÂ ed))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (editor-postÂ ed))) |'
  id: totrans-1722
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (editor-postÂ ed))) |'
- en: Even though both (editor-pre  ed) and (editor-post  ed) are lists of [1String](part_one.html#%28tech._1string%29)s,
    there is no need to design auxiliary functions. To get the desired result, it
    suffices to use [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29),
    which creates lists.
  id: totrans-1723
  prefs: []
  type: TYPE_NORMAL
  zh: å³ä½¿ï¼ˆeditor-pre edï¼‰å’Œï¼ˆeditor-post edï¼‰éƒ½æ˜¯[1String](part_one.html#%28tech._1string%29)çš„åˆ—è¡¨ï¼Œä¹Ÿä¸éœ€è¦è®¾è®¡è¾…åŠ©å‡½æ•°ã€‚ä¸ºäº†å¾—åˆ°æœŸæœ›çš„ç»“æœï¼Œåªéœ€ä½¿ç”¨[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ï¼Œå®ƒåˆ›å»ºåˆ—è¡¨ã€‚
- en: At this point, you should do two things. First, run the tests for this function.
    Second, use the interpretation of Editor and explain abstractly why this function
    performs the insertion. And as if this isnâ€™t enough, you may wish to compare this
    simple definition with the one from [exerciseÂ 84](part_one.html#%28counter._%28exercise._struct-edit1%29%29)
    and figure out why the other one needs an auxiliary function while our definition
    here doesnâ€™t.
  id: totrans-1724
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ åº”è¯¥åšä¸¤ä»¶äº‹ã€‚é¦–å…ˆï¼Œè¿è¡Œè¿™ä¸ªå‡½æ•°çš„æµ‹è¯•ã€‚å…¶æ¬¡ï¼Œä½¿ç”¨Editorçš„è§£é‡Šï¼ŒæŠ½è±¡åœ°è§£é‡Šè¿™ä¸ªå‡½æ•°ä¸ºä»€ä¹ˆèƒ½æ‰§è¡Œæ’å…¥æ“ä½œã€‚è€Œä¸”ä¼¼ä¹è¿˜ä¸å¤Ÿï¼Œä½ å¯èƒ½è¿˜æƒ³å°†è¿™ä¸ªç®€å•çš„å®šä¹‰ä¸[ç»ƒä¹ 84](part_one.html#%28counter._%28exercise._struct-edit1%29%29)ä¸­çš„å®šä¹‰è¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾å‡ºä¸ºä»€ä¹ˆå¦ä¸€ä¸ªéœ€è¦è¾…åŠ©å‡½æ•°è€Œæˆ‘ä»¬çš„å®šä¹‰è¿™é‡Œä¸éœ€è¦ã€‚
- en: ExerciseÂ 179\. Design the functions
  id: totrans-1725
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 179ã€‚è®¾è®¡ä»¥ä¸‹å‡½æ•°
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
  id: totrans-1726
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
- en: '| ;Â moves the cursor position one [1String](part_one.html#%28tech._1string%29)
    left, |'
  id: totrans-1727
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†å…‰æ ‡ä½ç½®å‘å·¦ç§»åŠ¨ä¸€ä¸ª[1String](part_one.html#%28tech._1string%29)ï¼Œ|'
- en: '| ;Â if possible |'
  id: totrans-1728
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœå¯èƒ½çš„è¯ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-lftÂ ed)Â ed)
    |'
  id: totrans-1729
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-lftÂ ed)Â ed)
    |'
- en: '| Â  |'
  id: totrans-1730
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
  id: totrans-1731
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
- en: '| ;Â moves the cursor position one [1String](part_one.html#%28tech._1string%29)
    right, |'
  id: totrans-1732
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†å…‰æ ‡ä½ç½®å‘å³ç§»åŠ¨ä¸€ä¸ª[1String](part_one.html#%28tech._1string%29)ï¼Œ|'
- en: '| ;Â if possible |'
  id: totrans-1733
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœå¯èƒ½çš„è¯ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-rgtÂ ed)Â ed)
    |'
  id: totrans-1734
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-rgtÂ ed)Â ed)
    |'
- en: '| Â  |'
  id: totrans-1735
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
  id: totrans-1736
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
- en: '| ;Â deletes a [1String](part_one.html#%28tech._1string%29) to the left of the
    cursor, |'
  id: totrans-1737
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åˆ é™¤å…‰æ ‡å·¦ä¾§çš„[1String](part_one.html#%28tech._1string%29)ï¼Œ|'
- en: '| ;Â if possible |'
  id: totrans-1738
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦‚æœå¯èƒ½çš„è¯ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-delÂ ed)Â ed)
    |'
  id: totrans-1739
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-delÂ ed)Â ed)
    |'
- en: 'Again, it is critical that you work through a good range of examples.Designing
    the rendering function for [Editor](#%28tech._list-edit2._editor%29)s poses some
    new but small challenges. The first one is to develop a sufficiently large number
    of test cases. On the one hand, it demands coverage of the possible combinations:
    an empty string to the left of the cursor, an empty one on the right, and both
    strings empty. On the other hand, it also requires some experimenting with the
    functions that the 2htdp/image teachpack teachpack provides. Specifically, it
    needs a way to compose the two pieces of strings rendered as text images, and
    it needs a way of placing the text image into the empty image frame (MT). Here
    is what we do to create an image for the result of (create-editor  "pre"  "post"):'
  id: totrans-1740
  prefs: []
  type: TYPE_NORMAL
  zh: å†æ¬¡å¼ºè°ƒï¼Œé€šè¿‡å¤§é‡ç¤ºä¾‹è¿›è¡Œç»ƒä¹ è‡³å…³é‡è¦ã€‚ä¸º[ç¼–è¾‘å™¨](#%28tech._list-edit2._editor%29)è®¾è®¡æ¸²æŸ“å‡½æ•°å¸¦æ¥äº†ä¸€äº›æ–°çš„ä½†è¾ƒå°çš„æŒ‘æˆ˜ã€‚ç¬¬ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å¼€å‘è¶³å¤Ÿå¤šçš„æµ‹è¯•ç”¨ä¾‹ã€‚ä¸€æ–¹é¢ï¼Œå®ƒè¦æ±‚è¦†ç›–å¯èƒ½çš„ç»„åˆï¼šå…‰æ ‡å·¦ä¾§ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå³ä¾§ä¹Ÿä¸ºç©ºï¼Œä»¥åŠä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½ä¸ºç©ºã€‚å¦ä¸€æ–¹é¢ï¼Œå®ƒè¿˜éœ€è¦å¯¹2htdp/image
    teachpackæä¾›çš„å‡½æ•°è¿›è¡Œä¸€äº›å®éªŒã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒéœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥ç»„åˆä½œä¸ºæ–‡æœ¬å›¾åƒæ¸²æŸ“çš„ä¸¤æ®µå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”éœ€è¦ä¸€ä¸ªæ–¹æ³•å°†æ–‡æœ¬å›¾åƒæ”¾ç½®åˆ°ç©ºå›¾åƒæ¡†æ¶ï¼ˆMTï¼‰ä¸­ã€‚ä»¥ä¸‹æ˜¯åˆ›å»º(create-editor
    "pre" "post")ç»“æœçš„å›¾åƒçš„æ–¹æ³•ï¼š
- en: '| ([place-image/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%2Falign%29%29)
    |'
  id: totrans-1741
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([place-image/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%2Falign%29%29)
    |'
- en: '| Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "pre"Â FONT-SIZEÂ FONT-COLOR)
    |'
  id: totrans-1742
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "pre"Â FONT-SIZEÂ FONT-COLOR)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â CURSOR |'
  id: totrans-1743
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â å…‰æ ‡ |'
- en: '| Â Â Â Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "post"Â FONT-SIZEÂ FONT-COLOR))
    |'
  id: totrans-1744
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "post"Â FONT-SIZEÂ FONT-COLOR))
    |'
- en: '| Â Â 1Â 1 |'
  id: totrans-1745
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â 1Â 1Â |'
- en: '| Â Â "left"Â "top" |'
  id: totrans-1746
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â "left"Â "top" |'
- en: '| Â Â MT) |'
  id: totrans-1747
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â MT) |'
- en: 'If you compare this with the editor image above, you notice some differences,
    which is fine because the exact layout isnâ€™t essential to the purpose of this
    exercise, and because the revised layout doesnâ€™t trivialize the problem. In any
    case, do experiment in the interactions area of DrRacket to find your favorite
    editor display.You are now ready to develop the template, and you should come
    up with this much:'
  id: totrans-1748
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ å°†æ­¤ä¸ä¸Šé¢çš„ç¼–è¾‘å™¨å›¾åƒè¿›è¡Œæ¯”è¾ƒï¼Œä½ ä¼šæ³¨æ„åˆ°ä¸€äº›å·®å¼‚ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºç²¾ç¡®çš„å¸ƒå±€å¯¹è¿™ä¸ªç»ƒä¹ çš„ç›®çš„ä¸æ˜¯å¿…è¦çš„ï¼Œè€Œä¸”å› ä¸ºä¿®æ”¹åçš„å¸ƒå±€å¹¶æ²¡æœ‰ä½¿é—®é¢˜å˜å¾—ç®€å•ã€‚æ— è®ºå¦‚ä½•ï¼Œä½ å¯ä»¥åœ¨DrRacketçš„äº¤äº’åŒºåŸŸè¿›è¡Œå®éªŒï¼Œæ‰¾åˆ°ä½ æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨æ˜¾ç¤ºæ–¹å¼ã€‚ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½å¼€å‘æ¨¡æ¿äº†ï¼Œä½ åº”è¯¥èƒ½å¤Ÿå¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ e)
    |'
  id: totrans-1749
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ e)
    |'
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-preÂ e)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-postÂ e)))
    |'
  id: totrans-1750
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-preÂ e)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-postÂ e)))
    |'
- en: 'The given argument is just a structure type with two fields. Their values,
    however, are lists of [1String](part_one.html#%28tech._1string%29)s, and you might
    be tempted to refine the template even more. Donâ€™t! Instead, keep in mind that
    when one data definition refers to another complex data definition, you are better
    off using the wish list.If you have worked through a sufficient number of examples,
    you also know what you want on your wish list: one function that turns a string
    into a text of the right size and color. Letâ€™s call this function editor-text.
    Then the definition of editor-render just uses editor-text twice and then composes
    the result with [beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)
    and [place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29):'
  id: totrans-1751
  prefs: []
  type: TYPE_NORMAL
  zh: ç»™å®šçš„å‚æ•°åªæ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå­—æ®µçš„ç»“æ„ç±»å‹ã€‚ç„¶è€Œï¼Œå®ƒä»¬çš„å€¼æ˜¯[1String](part_one.html#%28tech._1string%29)çš„åˆ—è¡¨ï¼Œä½ å¯èƒ½ä¼šæƒ³è¿›ä¸€æ­¥ä¼˜åŒ–æ¨¡æ¿ã€‚ä¸è¦è¿™æ ·åšï¼ç›¸åï¼Œè¯·è®°ä½ï¼Œå½“ä¸€ä¸ªæ•°æ®å®šä¹‰å¼•ç”¨å¦ä¸€ä¸ªå¤æ‚çš„æ•°æ®å®šä¹‰æ—¶ï¼Œä½¿ç”¨æ„¿æœ›åˆ—è¡¨ä¼šæ›´å¥½ã€‚å¦‚æœä½ å·²ç»è¶³å¤Ÿå¤šåœ°ç»ƒä¹ äº†ç¤ºä¾‹ï¼Œä½ ä¹ŸçŸ¥é“ä½ çš„æ„¿æœ›åˆ—è¡¨ä¸Šéœ€è¦ä»€ä¹ˆï¼šä¸€ä¸ªå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ­£ç¡®å¤§å°å’Œé¢œè‰²çš„æ–‡æœ¬çš„åŠŸèƒ½ã€‚è®©æˆ‘ä»¬ç§°è¿™ä¸ªå‡½æ•°ä¸ºeditor-textã€‚ç„¶åeditor-renderçš„å®šä¹‰åªæ˜¯ä¸¤æ¬¡ä½¿ç”¨editor-textï¼Œç„¶åä½¿ç”¨[beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)å’Œ[place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)ç»„åˆç»“æœï¼š
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1752
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ e)
    |'
  id: totrans-1753
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ e)
    |'
- en: '| Â Â ([place-image/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%2Falign%29%29)
    |'
  id: totrans-1754
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([place-image/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%2Falign%29%29)
    |'
- en: '| Â Â Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â (editor-textÂ (editor-preÂ e))
    |'
  id: totrans-1755
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â (editor-textÂ (editor-preÂ e))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â CURSOR |'
  id: totrans-1756
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â CURSOR |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (editor-textÂ (editor-postÂ e))) |'
  id: totrans-1757
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â (editor-textÂ (editor-postÂ e))) |'
- en: '| Â Â Â Â 1Â 1 |'
  id: totrans-1758
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â 1Â 1 |'
- en: '| Â Â Â Â "left"Â "top" |'
  id: totrans-1759
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â "left"Â "top" |'
- en: '| Â Â Â Â MT)) |'
  id: totrans-1760
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â MT)) |'
- en: 'Although this definition nests expressions three levels deep, the use of the
    imaginary editor-text function renders it quite readable.What remains is to design
    editor-text. From the design of editor-render, we know that editor-text consumes
    a list of [1String](part_one.html#%28tech._1string%29)s and produces a text image:'
  id: totrans-1761
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶è¿™ä¸ªå®šä¹‰åµŒå¥—äº†ä¸‰å±‚è¡¨è¾¾å¼ï¼Œä½†ä½¿ç”¨å‡æƒ³çš„editor-textå‡½æ•°ä½¿å…¶ç›¸å½“æ˜“äºé˜…è¯»ã€‚å‰©ä¸‹è¦åšçš„å°±æ˜¯è®¾è®¡editor-textã€‚ä»editor-renderçš„è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“editor-textæ¶ˆè€—ä¸€ä¸ª[1String](part_one.html#%28tech._1string%29)çš„åˆ—è¡¨å¹¶ç”Ÿæˆä¸€ä¸ªæ–‡æœ¬å›¾åƒï¼š
- en: '| ;Â [Lo1s](#%28tech._list-edit2._lo1%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-1762
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Lo1s](#%28tech._list-edit2._lo1%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â renders a list of [1String](part_one.html#%28tech._1string%29)s as a text
    image |'
  id: totrans-1763
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†[1String](part_one.html#%28tech._1string%29)çš„åˆ—è¡¨æ¸²æŸ“ä¸ºæ–‡æœ¬å›¾åƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
  id: totrans-1764
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
- en: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ""Â FONT-SIZEÂ FONT-COLOR))
    |'
  id: totrans-1765
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ""Â FONT-SIZEÂ FONT-COLOR))
    |'
- en: This dummy definition produces an empty text image.To demonstrate what editor-text
    is supposed to compute, we work through an example. The example input is
  id: totrans-1766
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè™šæ‹Ÿå®šä¹‰ç”Ÿæˆä¸€ä¸ªç©ºçš„æ–‡æœ¬å›¾åƒã€‚ä¸ºäº†å±•ç¤ºeditor-textåº”è¯¥è®¡ç®—çš„å†…å®¹ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥æ¼”ç¤ºã€‚ç¤ºä¾‹è¾“å…¥æ˜¯
- en: (create-editorÂ "pre"Â "post")
  id: totrans-1767
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (create-editorÂ "pre"Â "post")
- en: which was also used to explain editor-render and is equivalent to
  id: totrans-1768
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¹Ÿè¢«ç”¨æ¥è§£é‡Šeditor-renderï¼Œå¹¶ä¸”ç­‰åŒäº
- en: '| (make-editor |'
  id: totrans-1769
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (make-editor |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "e"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "r"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ''())))
    |'
  id: totrans-1770
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "e"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "r"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ''())))
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "s"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "t"Â ''())))))
    |'
  id: totrans-1771
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "s"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "t"Â ''())))))
    |'
- en: 'We pick the second list as our sample input for editor-text, and we know the
    expected result from the example for editor-render:'
  id: totrans-1772
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é€‰æ‹©ç¬¬äºŒä¸ªåˆ—è¡¨ä½œä¸ºeditor-textçš„æ ·æœ¬è¾“å…¥ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“ä»editor-renderçš„ä¾‹å­ä¸­é¢„æœŸçš„ç»“æœï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-1773
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (editor-text |'
  id: totrans-1774
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (editor-text |'
- en: '| Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "s"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "t"Â ''())))))
    |'
  id: totrans-1775
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "s"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "t"Â ''())))))
    |'
- en: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "post"Â FONT-SIZEÂ FONT-COLOR))
    |'
  id: totrans-1776
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "post"Â FONT-SIZEÂ FONT-COLOR))
    |'
- en: 'You may wish to make up a second example before reading on.Given that editor-text
    consumes a list of [1String](part_one.html#%28tech._1string%29)s, we can write
    down the template without much ado:'
  id: totrans-1777
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½å¸Œæœ›åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰æƒ³å‡ºä¸€ä¸ªç¬¬äºŒä¸ªä¾‹å­ã€‚é‰´äºeditor-textæ¥å—ä¸€ä¸ªç”±[1String](part_one.html#%28tech._1string%29)ç»„æˆçš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¸è´¹å¹ç°ä¹‹åŠ›åœ°å†™ä¸‹æ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
  id: totrans-1778
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1779
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1780
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â s)
    |'
  id: totrans-1781
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    s) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-textÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â s))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1782
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-textÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â s))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: After all, the template is dictated by the data definition that describes the
    function input. But you donâ€™t need the template if you understand and keep in
    mind the interpretation for [Editor](#%28tech._list-edit2._editor%29). It uses
    [explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29)
    to turn a string into a list of [1String](part_one.html#%28tech._1string%29)s.
    Naturally, there is a function [implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)
    that performs the inverse computation, that is,
  id: totrans-1783
  prefs: []
  type: TYPE_NORMAL
  zh: æ€»çš„æ¥è¯´ï¼Œæ¨¡æ¿æ˜¯ç”±æè¿°å‡½æ•°è¾“å…¥çš„æ•°æ®å®šä¹‰æ‰€å†³å®šçš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ç†è§£å¹¶è®°ä½äº† [Editor](#%28tech._list-edit2._editor%29)
    çš„è§£é‡Šï¼Œä½ å°±ä¸éœ€è¦æ¨¡æ¿ã€‚å®ƒä½¿ç”¨ [explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29)
    å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º [1String](part_one.html#%28tech._1string%29) çš„åˆ—è¡¨ã€‚è‡ªç„¶åœ°ï¼Œå­˜åœ¨ä¸€ä¸ª [implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)
    å‡½æ•°ï¼Œå®ƒæ‰§è¡Œé€†è®¡ç®—ï¼Œå³ï¼Œ
- en: '|'
  id: totrans-1784
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-1785
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)
    &#124;'
  id: totrans-1786
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| > ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)
    |'
- en: '&#124; Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "s"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "t"Â ''())))))
    &#124;'
  id: totrans-1787
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| > ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "s"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "t"Â ''())))))
    |'
- en: ''
  id: totrans-1788
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-1789
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| "post" |'
  id: totrans-1790
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| "post" |'
- en: 'Using this function, the definition of editor-text is just a small step from
    the example to the function body:'
  id: totrans-1791
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œeditor-text çš„å®šä¹‰åªæ˜¯ä»ç¤ºä¾‹åˆ°å‡½æ•°ä½“çš„å°æ­¥éª¤ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
  id: totrans-1792
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
- en: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â s)Â FONT-SIZEÂ FONT-COLOR))
    |'
  id: totrans-1793
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â s)Â FONT-SIZEÂ FONT-COLOR))
    |'
- en: ExerciseÂ 180\. Design editor-text without using [implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29).
  id: totrans-1794
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  180. ä¸ä½¿ç”¨ [implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)
    è®¾è®¡ editor-textã€‚
- en: 'The true surprise comes when you test the two functions. While our test for
    editor-text succeeds, the test for editor-render fails. An inspection of the failure
    shows that the string to the left of the cursorâ€”<wbr> "pre"â€”<wbr>is typeset backward.
    We forgot that this part of the editorâ€™s state is represented in reverse. Fortunately,
    the unit tests for the two functions pinpoint which function is wrong and even
    tell us what is wrong with the function and suggest how to fix the problem:'
  id: totrans-1795
  prefs: []
  type: TYPE_NORMAL
  zh: çœŸæ­£çš„æƒŠå–œå‡ºç°åœ¨ä½ æµ‹è¯•è¿™ä¸¤ä¸ªå‡½æ•°çš„æ—¶å€™ã€‚è™½ç„¶æˆ‘ä»¬å¯¹editor-textçš„æµ‹è¯•æˆåŠŸï¼Œä½†å¯¹editor-renderçš„æµ‹è¯•å¤±è´¥ã€‚å¯¹å¤±è´¥çš„æ£€æŸ¥æ˜¾ç¤ºï¼Œå…‰æ ‡å·¦ä¾§çš„å­—ç¬¦ä¸²â€”â€”<wbr>
    "pre"â€”<wbr>æ˜¯åå‘æ’ç‰ˆçš„ã€‚æˆ‘ä»¬å¿˜è®°äº†è¿™ä¸ªç¼–è¾‘å™¨çŠ¶æ€çš„ä¸€éƒ¨åˆ†æ˜¯ä»¥ç›¸åçš„æ–¹å¼è¡¨ç¤ºçš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°çš„å•å…ƒæµ‹è¯•æŒ‡å‡ºäº†å“ªä¸ªå‡½æ•°æ˜¯é”™è¯¯çš„ï¼Œç”šè‡³å‘Šè¯‰æˆ‘ä»¬å‡½æ•°çš„é”™è¯¯åœ¨å“ªé‡Œï¼Œå¹¶å»ºè®®å¦‚ä½•ä¿®å¤é—®é¢˜ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ ed)
    |'
  id: totrans-1796
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ ed)
    |'
- en: '| Â Â ([place-image/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%2Falign%29%29)
    |'
  id: totrans-1797
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([place-image/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%2Falign%29%29)
    |'
- en: '| Â Â Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â (editor-textÂ ([reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29)Â (editor-preÂ ed)))
    |'
  id: totrans-1798
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â (editor-textÂ ([reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29)Â (editor-preÂ ed)))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â CURSOR |'
  id: totrans-1799
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â CURSOR |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (editor-textÂ (editor-postÂ ed))) |'
  id: totrans-1800
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â (editor-textÂ (editor-postÂ ed))) |'
- en: '| Â Â Â Â 1Â 1 |'
  id: totrans-1801
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â 1Â 1 |'
- en: '| Â Â Â Â "left"Â "top" |'
  id: totrans-1802
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â "left"Â "top" |'
- en: '| Â Â Â Â MT)) |'
  id: totrans-1803
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â MT)) |'
- en: This definition uses the [reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29)
    function on the pre field of ed.
  id: totrans-1804
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªå®šä¹‰ä½¿ç”¨äº†edçš„å‰ç½®å­—æ®µä¸Šçš„[reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29)
    å‡½æ•°ã€‚
- en: Note Modern applications allow users to position the cursor with the mouse (or
    other gesture-based devices). While it is in principle possible to add this capability
    to your editor, we wait with doing so until [A Graphical Editor, with Mouse](part_six.html#%28part._accu-edit._sec~3aedit3%29).
  id: totrans-1805
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ç°ä»£åº”ç”¨ç¨‹åºå…è®¸ç”¨æˆ·ä½¿ç”¨é¼ æ ‡ï¼ˆæˆ–å…¶ä»–åŸºäºæ‰‹åŠ¿çš„è®¾å¤‡ï¼‰å®šä½å…‰æ ‡ã€‚è™½ç„¶åœ¨åŸåˆ™ä¸Šå¯ä»¥å°†è¿™ç§åŠŸèƒ½æ·»åŠ åˆ°ä½ çš„ç¼–è¾‘å™¨ä¸­ï¼Œä½†æˆ‘ä»¬æš‚æ—¶ä¸è¿™æ ·åšï¼Œç›´åˆ°[A Graphical
    Editor, with Mouse](part_six.html#%28part._accu-edit._sec~3aedit3%29)ã€‚
- en: 11Design by Composition[ğŸ”—](#(part._ch~3alist-sort) "Link to here")
  id: totrans-1806
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 11é€šè¿‡ç»„åˆè¿›è¡Œè®¾è®¡[ğŸ”—](#(part._ch~3alist-sort) "é“¾æ¥åˆ°æ­¤å¤„")
- en: By now you know that programs are complex products and that their production
    requires the design of many collaborating functions. This collaboration works
    well if the designer knows when to design several functions and how to compose
    these functions into one program.
  id: totrans-1807
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»çŸ¥é“ç¨‹åºæ˜¯å¤æ‚çš„äº§ç‰©ï¼Œå®ƒä»¬çš„åˆ¶ä½œéœ€è¦è®¾è®¡è®¸å¤šåä½œå‡½æ•°ã€‚å¦‚æœè®¾è®¡è€…çŸ¥é“ä½•æ—¶è®¾è®¡å‡ ä¸ªå‡½æ•°ä»¥åŠå¦‚ä½•å°†è¿™äº›å‡½æ•°ç»„åˆæˆä¸€ä¸ªç¨‹åºï¼Œè¿™ç§åä½œå°±èƒ½å¾ˆå¥½åœ°å·¥ä½œã€‚
- en: You have encountered this need to design interrelated functions several times.
    Sometimes a problem statement implies several different tasks, and each task is
    best realized with a function. At other times, a data definition may refer to
    another one, and in that case, a function processing the former kind of data relies
    on a function processing the latter.
  id: totrans-1808
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å·²ç»å¤šæ¬¡é‡åˆ°è¿‡è®¾è®¡ç›¸äº’å…³è”çš„å‡½æ•°çš„éœ€æ±‚ã€‚æœ‰æ—¶ä¸€ä¸ªé—®é¢˜é™ˆè¿°æš—ç¤ºäº†å‡ ä¸ªä¸åŒçš„ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡æœ€å¥½é€šè¿‡ä¸€ä¸ªå‡½æ•°æ¥å®ç°ã€‚åœ¨å…¶ä»–æ—¶å€™ï¼Œä¸€ä¸ªæ•°æ®å®šä¹‰å¯èƒ½å¼•ç”¨å¦ä¸€ä¸ªï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤„ç†å‰ä¸€ç§ç±»å‹æ•°æ®çš„å‡½æ•°ä¾èµ–äºå¤„ç†åä¸€ç§ç±»å‹æ•°æ®çš„å‡½æ•°ã€‚
- en: In this chapter, we present several scenarios that call for the design of programs
    that compose many functions. To support this kind of design, the chapter presents
    some informal guidelines on divvying up functions and composing them. Since these
    examples demand complex forms of lists, however, this chapter starts with a section
    on concise list notation.
  id: totrans-1809
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å‡ ä¸ªéœ€è¦è®¾è®¡ç”±è®¸å¤šå‡½æ•°ç»„æˆçš„ç¨‹åºçš„åœºæ™¯ã€‚ä¸ºäº†æ”¯æŒè¿™ç§è®¾è®¡ï¼Œæœ¬ç« æå‡ºäº†ä¸€äº›å…³äºå¦‚ä½•åˆ’åˆ†å‡½æ•°å’Œç»„åˆå®ƒä»¬çš„éæ­£å¼æŒ‡å—ã€‚ç„¶è€Œï¼Œç”±äºè¿™äº›ä¾‹å­éœ€è¦å¤æ‚çš„åˆ—è¡¨å½¢å¼ï¼Œå› æ­¤æœ¬ç« ä»å…³äºç®€æ´åˆ—è¡¨è®°æ³•çš„éƒ¨åˆ†å¼€å§‹ã€‚
- en: 11.1The [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    Function[ğŸ”—](#(part._sec~3aabbrev) "Link to here")
  id: totrans-1810
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 11.1[åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    å‡½æ•°[ğŸ”—](#(part._sec~3aabbrev) "é“¾æ¥åˆ°æ­¤å¤„")
- en: At this point, you should have tired of writing so many [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)es
    just to create a list, especially for lists that contain a bunch of values. Fortunately,
    we have an additional teaching language for you thatYou have graduated from BSL.
    It is time to use the â€œLanguageâ€ menu and to select â€œBeginning Student with List
    Abbreviationsâ€ for your studies. provides mechanisms for simplifying this part
    of a programmerâ€™s life. BSL+ does so, too.
  id: totrans-1811
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å¯èƒ½å·²ç»åŒå€¦äº†å†™è¿™ä¹ˆå¤š [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    æ¥åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œå°¤å…¶æ˜¯å¯¹äºåŒ…å«å¤§é‡å€¼çš„åˆ—è¡¨ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸ºä½ æä¾›äº†ä¸€ç§é¢å¤–çš„æ•™å­¦è¯­è¨€ï¼Œä½ å·²ç»ä» BSL æ¯•ä¸šäº†ã€‚ç°åœ¨æ˜¯æ—¶å€™ä½¿ç”¨â€œè¯­è¨€â€èœå•ï¼Œå¹¶é€‰æ‹©â€œä½¿ç”¨åˆ—è¡¨ç¼©å†™çš„åˆå­¦è€…â€è¿›è¡Œå­¦ä¹ äº†ã€‚è¿™ç§è¯­è¨€æä¾›äº†ç®€åŒ–ç¨‹åºå‘˜ç”Ÿæ´»è¿™ä¸€éƒ¨åˆ†çš„æœºåˆ¶ã€‚BSL+
    ä¹Ÿåšåˆ°äº†è¿™ä¸€ç‚¹ã€‚
- en: The key innovation is [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29),
    which consumes an arbitrary number of values and creates a list. The simplest
    way to understand [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    is to think of it as an abbreviation. Specifically, every expression of the shape
  id: totrans-1812
  prefs: []
  type: TYPE_NORMAL
  zh: å…³é”®åˆ›æ–°æ˜¯ [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)ï¼Œå®ƒå¯ä»¥æ¶ˆè´¹ä»»æ„æ•°é‡çš„å€¼å¹¶åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ã€‚ç†è§£
    [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    çš„æœ€ç®€å•æ–¹æ³•æ˜¯å°†å®ƒè§†ä¸ºä¸€ä¸ªç¼©å†™ã€‚å…·ä½“æ¥è¯´ï¼Œæ¯ä¸ªå…·æœ‰ä»¥ä¸‹å½¢çŠ¶çš„è¡¨è¾¾å¼
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â exp-1Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â exp-n)
  id: totrans-1813
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â exp-1Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â exp-n)
- en: 'stands for a series of n [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    expressions:'
  id: totrans-1814
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨ç¤ºä¸€ç³»åˆ—çš„ n ä¸ª [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    è¡¨è¾¾å¼ï¼š
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â exp-1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â exp-nÂ '())))
  id: totrans-1815
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â exp-1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â exp-nÂ '()))ï¼‰
- en: 'Keep in mind that ''() is not an item of the list here, but actually the rest
    of the list. Here is a table with three examples:'
  id: totrans-1816
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·è®°ä½ï¼Œ'() åœ¨è¿™é‡Œä¸æ˜¯åˆ—è¡¨çš„ä¸€é¡¹ï¼Œè€Œæ˜¯åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªç¤ºä¾‹çš„è¡¨æ ¼ï¼š
- en: '| short-hand |  | long-hand |'
  id: totrans-1817
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ç®€å†™ |  | å®Œæ•´å½¢å¼ |'
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "ABC")
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "ABC"  ''())
    |'
  id: totrans-1818
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "ABC")
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "ABC"  ''())
    |'
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  #false  #true)
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #false  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #true  ''()))
    |'
  id: totrans-1819
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  #false  #true)
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #false  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #true  ''()))
    |'
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3)
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''())))
    |'
  id: totrans-1820
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3)
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''())))
    |'
- en: 'They introduce lists with one, two, and three items, respectively.Of course,
    we can apply [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    not only to values but also to expressions:'
  id: totrans-1821
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä»¬åˆ†åˆ«å¼•å…¥äº†ä¸€ä¸ªã€ä¸¤ä¸ªå’Œä¸‰ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥å°†[åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)åº”ç”¨äºå€¼ï¼Œè¿˜å¯ä»¥åº”ç”¨äºè¡¨è¾¾å¼ï¼š
- en: '| > ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 0Â 1)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 1))
    |'
  id: totrans-1822
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    0 1)  ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    1 1)) |'
- en: '| (list 1 2) |'
  id: totrans-1823
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (åˆ—è¡¨ 1 2) |'
- en: '| > ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 1Â 0)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 1))
    |'
  id: totrans-1824
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)
    1 0)  ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    1 1)) |'
- en: '| /:division by zero |'
  id: totrans-1825
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| /:é™¤ä»¥é›¶ |'
- en: 'Before the list is constructed, the expressions must be evaluated. If during
    the evaluation of an expression an error occurs, the list is never formed. In
    short, [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    behaves just like any other primitive operation that consumes an arbitrary number
    of arguments; its result just happens to be a list constructed with [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)es.The
    use of [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    greatly simplifies the notation for lists with many items and lists that contain
    lists or structures. Here is an example:'
  id: totrans-1826
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ„å»ºåˆ—è¡¨ä¹‹å‰ï¼Œå¿…é¡»è¯„ä¼°è¡¨è¾¾å¼ã€‚å¦‚æœåœ¨è¯„ä¼°è¡¨è¾¾å¼æœŸé—´å‘ç”Ÿé”™è¯¯ï¼Œåˆ™åˆ—è¡¨æ°¸è¿œä¸ä¼šå½¢æˆã€‚ç®€è€Œè¨€ä¹‹ï¼Œ[åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)çš„è¡Œä¸ºå°±åƒä»»ä½•å…¶ä»–æ¶ˆè€—ä»»æ„æ•°é‡å‚æ•°çš„åŸç”Ÿæ“ä½œä¸€æ ·ï¼›å…¶ç»“æœåªæ˜¯æ°å¥½æ˜¯ä¸€ä¸ªä½¿ç”¨[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)æ„é€ çš„åˆ—è¡¨ã€‚ä½¿ç”¨[åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)æå¤§åœ°ç®€åŒ–äº†åŒ…å«è®¸å¤šé¡¹çš„åˆ—è¡¨ä»¥åŠåŒ…å«åˆ—è¡¨æˆ–ç»“æ„çš„åˆ—è¡¨çš„è¡¨ç¤ºæ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 0Â 1Â 2Â 3Â 4Â 5Â 6Â 7Â 8Â 9)
  id: totrans-1827
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    0 1 2 3 4 5 6 7 8 9)
- en: This list contains 10 items and its formation with [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    would require 10 uses of [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and one instance of '(). Similarly, the list
  id: totrans-1828
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤åˆ—è¡¨åŒ…å«10ä¸ªé¡¹ç›®ï¼Œå…¶ä½¿ç”¨[æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)æ„å»ºå°†éœ€è¦10æ¬¡ä½¿ç”¨[æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)å’Œä¸€æ¬¡'()å®ä¾‹ã€‚åŒæ ·ï¼Œåˆ—è¡¨
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "bob"Â 0Â "a")
    |'
  id: totrans-1829
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "bob" 0 "a")) |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "carl"Â 1Â "a")
    |'
  id: totrans-1830
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "carl" 1 "a") |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "dana"Â 2Â "b")
    |'
  id: totrans-1831
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "dana" 2 "b") |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "erik"Â 3Â "c")
    |'
  id: totrans-1832
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "erik" 3 "c") |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "frank"Â 4Â "a")
    |'
  id: totrans-1833
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "frank" 4 "a") |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "grant"Â 5Â "b")
    |'
  id: totrans-1834
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "grant" 5 "b") |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "hank"Â 6Â "c")
    |'
  id: totrans-1835
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "hank" 6 "c") |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "ian"Â 7Â "a")
    |'
  id: totrans-1836
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "ian" 7 "a") |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "john"Â 8Â "d")
    |'
  id: totrans-1837
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "john" 8 "d") |'
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "karel"Â 9Â "e"))
    |'
  id: totrans-1838
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "karel" 9 "e") |'
- en: 'requires 11 uses of [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29),
    which sharply contrasts with 40 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and 11 additional uses of ''().ExerciseÂ 181\. Use [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    to construct the equivalent of these lists:'
  id: totrans-1839
  prefs: []
  type: TYPE_NORMAL
  zh: éœ€è¦11æ¬¡ä½¿ç”¨[åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)ï¼Œè¿™ä¸40æ¬¡ä½¿ç”¨[æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)å’Œ11æ¬¡é¢å¤–çš„'()ä½¿ç”¨å½¢æˆé²œæ˜å¯¹æ¯”ã€‚ç»ƒä¹ 181ã€‚ä½¿ç”¨[åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)æ„å»ºä»¥ä¸‹åˆ—è¡¨çš„ç­‰æ•ˆå½¢å¼ï¼š
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "c"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "d"  '()))))
  id: totrans-1840
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "c"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "d"  '()))))
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  '()))  '())
  id: totrans-1841
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  '()))  '())
- en: '([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ''())  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #false  ''())))'
  id: totrans-1842
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ''())  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #false  ''())))'
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  '()))  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "hello"  '()))
  id: totrans-1843
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  '()))  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "hello"  '()))
- en: 'Also try your hand at this one:'
  id: totrans-1844
  prefs: []
  type: TYPE_NORMAL
  zh: ä¹Ÿå°è¯•ä¸€ä¸‹è¿™ä¸ªï¼š
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''()))
    |'
  id: totrans-1845
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''()))
    |'
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''())
    |'
  id: totrans-1846
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''())
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ''())) |'
  id: totrans-1847
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â ''())) |'
- en: 'Start by determining how many items each list and each nested list contains.
    Use [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    to express your answers; this ensures that your abbreviations are really the same
    as the long-hand.ExerciseÂ 182\. Use [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and ''() to form the equivalent of these lists:'
  id: totrans-1848
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆç¡®å®šæ¯ä¸ªåˆ—è¡¨å’Œæ¯ä¸ªåµŒå¥—åˆ—è¡¨åŒ…å«å¤šå°‘ä¸ªé¡¹ç›®ã€‚ä½¿ç”¨ [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    æ¥è¡¨è¾¾ä½ çš„ç­”æ¡ˆï¼›è¿™ç¡®ä¿äº†ä½ çš„ç¼©å†™ç¡®å®ä¸é•¿æ ¼å¼ç›¸åŒã€‚ç»ƒä¹  182ã€‚ä½¿ç”¨ [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    å’Œ '() æ¥å½¢æˆä»¥ä¸‹åˆ—è¡¨çš„ç­‰ä»·å½¢å¼ï¼š
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  0  1  2  3  4  5)
  id: totrans-1849
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  0  1  2  3  4  5)
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "he"  0)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "it"  1)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "lui"  14))
  id: totrans-1850
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "he"  0)  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "it"  1)  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "lui"  14))
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3))
  id: totrans-1851
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2)  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3))
- en: Use [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    to express your answers.ExerciseÂ 183\. On some occasions lists are formed with
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29).
  id: totrans-1852
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    æ¥è¡¨è¾¾ä½ çš„ç­”æ¡ˆã€‚ç»ƒä¹  183ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåˆ—è¡¨æ˜¯é€šè¿‡ [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    å’Œ [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    å½¢æˆçš„ã€‚
- en: '([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  0  #false))'
  id: totrans-1853
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  0  #false))'
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  13  '())))
  id: totrans-1854
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  13  '())))
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  13  '()))  '())
  id: totrans-1855
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  13  '()))  '())
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  '()  '()  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  '()))
  id: totrans-1856
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  '()  '()  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  '()))
- en: '([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  #false  ''())))'
  id: totrans-1857
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  #false  ''())))'
- en: 'Reformulate each of the following expressions using only [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    or only [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29).
    Use [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    to check your answers.ExerciseÂ 184\. Determine the values of the following expressions:'
  id: totrans-1858
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ä»…[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)æˆ–ä»…[åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)é‡æ–°è¡¨è¿°ä»¥ä¸‹è¡¨è¾¾å¼ã€‚ä½¿ç”¨[check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)æ¥æ£€æŸ¥ä½ çš„ç­”æ¡ˆã€‚ç»ƒä¹ 184ï¼šç¡®å®šä»¥ä¸‹è¡¨è¾¾å¼çš„å€¼ï¼š
- en: '([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)  "a"  "b")  #false)'
  id: totrans-1859
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([å­—ç¬¦ä¸²ç­‰äº](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)  "a"  "b")  #false)'
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  10  20)  ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  10  20)  ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)  10  20))
  id: totrans-1860
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  10  20)  ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  10  20)  ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)  10  20))
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "dana"  "jane"  "mary"  "laura")
  id: totrans-1861
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "dana"  "jane"  "mary"  "laura")
- en: 'Use [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    to express your answers.ExerciseÂ 185\. You know about [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    and [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    from BSL, but BSL+ comes with even more selectors than that. Determine the values
    of the following expressions:'
  id: totrans-1862
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    æ¥è¡¨è¾¾ä½ çš„ç­”æ¡ˆã€‚ç»ƒä¹  185ã€‚ä½ å·²ç»äº†è§£äº† BSL ä¸­çš„ [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    å’Œ [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)ï¼Œä½†
    BSL+ æä¾›äº†æ¯”è¿™æ›´å¤šçš„é€‰æ‹©å™¨ã€‚ç¡®å®šä»¥ä¸‹è¡¨è¾¾å¼çš„å€¼ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3))
  id: totrans-1863
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    1 2 3))
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3))
  id: totrans-1864
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    1 2 3))
- en: ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3))
  id: totrans-1865
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)
    ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    1 2 3))
- en: Find out from the documentation whether [third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)
    and [fourth](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._fourth%29%29)
    exist.
  id: totrans-1866
  prefs: []
  type: TYPE_NORMAL
  zh: ä»æ–‡æ¡£ä¸­æ‰¾å‡º [third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)
    å’Œ [fourth](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._fourth%29%29)
    æ˜¯å¦å­˜åœ¨ã€‚
- en: 11.2Composing Functions[ğŸ”—](#(part._sec~3acompounding2) "Link to here")
  id: totrans-1867
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 11.2 å‡½æ•°ç»„åˆ[ğŸ”—](#(part._sec~3acompounding2) "é“¾æ¥åˆ°æ­¤å¤„")
- en: '[How to Design Programs](part_one.html#%28part._ch~3ahtdp%29) explains that
    programs are collections of definitions: structure type definitions, data definitions,
    constant definitions, and function definitions.And donâ€™t forget tests. To guide
    the division of labor among functions, the section also suggests a rough guideline:'
  id: totrans-1868
  prefs: []
  type: TYPE_NORMAL
  zh: '[ã€Šå¦‚ä½•è®¾è®¡ç¨‹åºã€‹](part_one.html#%28part._ch~3ahtdp%29) è§£é‡Šè¯´ç¨‹åºæ˜¯ç”±ä¸€ç³»åˆ—å®šä¹‰ç»„æˆçš„ï¼šç»“æ„ç±»å‹å®šä¹‰ã€æ•°æ®å®šä¹‰ã€å¸¸é‡å®šä¹‰å’Œå‡½æ•°å®šä¹‰ã€‚åˆ«å¿˜äº†æµ‹è¯•ã€‚ä¸ºäº†æŒ‡å¯¼å‡½æ•°ä¹‹é—´çš„åŠ³åŠ¨åˆ†å·¥ï¼Œè¯¥éƒ¨åˆ†è¿˜æå‡ºäº†ä¸€æ¡å¤§è‡´çš„æŒ‡å¯¼æ–¹é’ˆï¼š'
- en: Design one function per task. Formulate auxiliary function definitions for every
    dependency between quantities in the problem.
  id: totrans-1869
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ¯ä¸ªä»»åŠ¡è®¾è®¡ä¸€ä¸ªå‡½æ•°ã€‚ä¸ºé—®é¢˜ä¸­æ•°é‡ä¹‹é—´çš„æ¯ä¸ªä¾èµ–å…³ç³»åˆ¶å®šè¾…åŠ©å‡½æ•°å®šä¹‰ã€‚
- en: 'This part of the book introduces another guideline on auxiliary functions:'
  id: totrans-1870
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ä¹¦æœ¬éƒ¨åˆ†ä»‹ç»äº†å…³äºè¾…åŠ©å‡½æ•°çš„å¦ä¸€ä¸ªæŒ‡å¯¼æ–¹é’ˆï¼š
- en: Design one template per data definition. Formulate auxiliary function definitions
    when one data definition points to a second data definition.
  id: totrans-1871
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ¯ä¸ªæ•°æ®å®šä¹‰è®¾è®¡ä¸€ä¸ªæ¨¡æ¿ã€‚å½“ä¸€ä¸ªæ•°æ®å®šä¹‰æŒ‡å‘ç¬¬äºŒä¸ªæ•°æ®å®šä¹‰æ—¶ï¼Œåˆ¶å®šè¾…åŠ©å‡½æ•°å®šä¹‰ã€‚
- en: 'In this section, we take a look at one specific place in the design process
    that may call for additional auxiliary functions: the definition step, which creates
    a full-fledged definition from a template. Turning a template into a complete
    function definition means combining the values of the templateâ€™s sub-expressions
    into the final answer. As you do so, you might encounter several situations that
    suggest the need for auxiliary functions:'
  id: totrans-1872
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨è®¾è®¡è¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦é¢å¤–è¾…åŠ©å‡½æ•°çš„ä¸€ä¸ªç‰¹å®šä½ç½®ï¼šå®šä¹‰æ­¥éª¤ï¼Œå®ƒä»æ¨¡æ¿åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å®šä¹‰ã€‚å°†æ¨¡æ¿è½¬æ¢ä¸ºå®Œæ•´çš„å‡½æ•°å®šä¹‰æ„å‘³ç€å°†æ¨¡æ¿å­è¡¨è¾¾å¼çš„å€¼ç»„åˆæˆæœ€ç»ˆç­”æ¡ˆã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°éœ€è¦è¾…åŠ©å‡½æ•°çš„å‡ ç§æƒ…å†µï¼š
- en: If the composition of values requires knowledge of a particular domain of applicationâ€”<wbr>for
    example, composing two (computer) images, accounting, music, or scienceâ€”<wbr>design
    an auxiliary function.
  id: totrans-1873
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœå€¼çš„ç»„åˆéœ€è¦ç‰¹å®šåº”ç”¨é¢†åŸŸçš„çŸ¥è¯†â€”â€”ä¾‹å¦‚ï¼Œç»„åˆä¸¤ä¸ªï¼ˆè®¡ç®—æœºï¼‰å›¾åƒã€ä¼šè®¡ã€éŸ³ä¹æˆ–ç§‘å­¦â€”â€”è®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚
- en: If the composition of values requires a case analysis of the available valuesâ€”<wbr>for
    example, depends on a number being positive, zero, or negativeâ€”<wbr> use a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression. If the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    looks complex, design an auxiliary function whose arguments are the templateâ€™s
    expressions and whose body is the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression.
  id: totrans-1874
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœå€¼çš„ç»„åˆéœ€è¦åˆ†æå¯ç”¨çš„å€¼çš„æƒ…å†µâ€”â€”ä¾‹å¦‚ï¼Œå–å†³äºä¸€ä¸ªæ•°å­—æ˜¯æ­£æ•°ã€é›¶è¿˜æ˜¯è´Ÿæ•°â€”â€”ä½¿ç”¨ä¸€ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    è¡¨è¾¾å¼ã€‚å¦‚æœ [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    çœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œè®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œå…¶å‚æ•°æ˜¯æ¨¡æ¿çš„è¡¨è¾¾å¼ï¼Œå…¶ä¸»ä½“æ˜¯ [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    è¡¨è¾¾å¼ã€‚
- en: If the composition of values must process an element from a self-referential
    data definitionâ€”<wbr>a list, a natural number, or something like thoseâ€”<wbr>design
    an auxiliary function.
  id: totrans-1875
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœå€¼çš„ç»„åˆå¿…é¡»å¤„ç†è‡ªå¼•ç”¨æ•°æ®å®šä¹‰ä¸­çš„å…ƒç´ â€”â€”ä¾‹å¦‚ï¼Œåˆ—è¡¨ã€è‡ªç„¶æ•°æˆ–ç±»ä¼¼çš„ä¸œè¥¿â€”â€”è®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚
- en: If everything fails, you may need to design a more general function and define
    the main function as a specific use of the general function. This suggestion sounds
    counterintuitive, but it is called for in a remarkably large number of cases.
  id: totrans-1876
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœæ‰€æœ‰æ–¹æ³•éƒ½å¤±è´¥äº†ï¼Œä½ å¯èƒ½éœ€è¦è®¾è®¡ä¸€ä¸ªæ›´é€šç”¨çš„å‡½æ•°ï¼Œå¹¶å°†ä¸»å‡½æ•°å®šä¹‰ä¸ºé€šç”¨å‡½æ•°çš„ç‰¹å®šç”¨æ³•ã€‚è¿™ä¸ªå»ºè®®å¬èµ·æ¥ä¼¼ä¹è¿åç›´è§‰ï¼Œä½†åœ¨å¤§é‡æƒ…å†µä¸‹æ˜¯å¿…è¦çš„ã€‚
- en: The last two criteria are situations that we havenâ€™t discussed in any detail,
    though examples have come up before. The next two sections illustrate these principles
    with additional examples.
  id: totrans-1877
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åä¸¤ä¸ªæ ‡å‡†æ˜¯æˆ‘ä»¬æ²¡æœ‰è¯¦ç»†è®¨è®ºè¿‡çš„æƒ…å†µï¼Œå°½ç®¡ä¹‹å‰å·²ç»å‡ºç°äº†ä¾‹å­ã€‚æ¥ä¸‹æ¥çš„ä¸¤ä¸ªéƒ¨åˆ†å°†ä½¿ç”¨é¢å¤–çš„ä¾‹å­æ¥é˜è¿°è¿™äº›åŸåˆ™ã€‚
- en: Before we continue, though, remember that the key to managing the design of
    programs is to maintain the often-mentioned
  id: totrans-1878
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œè®°ä½ï¼Œç®¡ç†ç¨‹åºè®¾è®¡çš„å…³é”®æ˜¯ç»´æŠ¤ç»å¸¸æåˆ°çš„
- en: Wish List
  id: totrans-1879
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ„¿æœ›æ¸…å•
- en: Maintain a list of function headers that must be designed to complete a program.
    Writing down complete function headers ensures that you can test those portions
    of the programs that you have finished, which is useful even though many tests
    will fail. Of course, when the wish list is empty, all tests should pass and all
    functions should be covered by tests.
  id: totrans-1880
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ç»´æŠ¤ä¸€ä¸ªå¿…é¡»è®¾è®¡ä»¥å®Œæˆç¨‹åºçš„å‡½æ•°å¤´åˆ—è¡¨ã€‚å†™ä¸‹å®Œæ•´çš„å‡½æ•°å¤´å¯ä»¥ç¡®ä¿ä½ å¯ä»¥æµ‹è¯•ä½ å·²ç»å®Œæˆçš„ç¨‹åºçš„éƒ¨åˆ†ï¼Œå³ä½¿è®¸å¤šæµ‹è¯•ä¼šå¤±è´¥ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚å½“ç„¶ï¼Œå½“æ„¿æœ›æ¸…å•ä¸ºç©ºæ—¶ï¼Œæ‰€æœ‰æµ‹è¯•éƒ½åº”è¯¥é€šè¿‡ï¼Œæ‰€æœ‰å‡½æ•°éƒ½åº”è¯¥è¢«æµ‹è¯•è¦†ç›–ã€‚
- en: Before you put a function on the wish list, you should check whether something
    like the function already exists in your languageâ€™s teachpack or whether something
    similar is already on the wish list. BSL, BSL+, and indeed all programming languages
    provide many built-in operations and many teachpack functions. You should explore
    your chosen language when you have time and when you have a need, so that you
    know what it provides.
  id: totrans-1881
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å°†å‡½æ•°æ·»åŠ åˆ°æ„¿æœ›æ¸…å•ä¹‹å‰ï¼Œä½ åº”è¯¥æ£€æŸ¥åœ¨ä½ çš„è¯­è¨€çš„æ•™å­¦åŒ…ä¸­æ˜¯å¦å·²ç»å­˜åœ¨ç±»ä¼¼åŠŸèƒ½çš„å‡½æ•°ï¼Œæˆ–è€…æ˜¯å¦å·²ç»åœ¨æ„¿æœ›æ¸…å•ä¸Šã€‚BSLã€BSL+ä»¥åŠæ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½æä¾›äº†è®¸å¤šå†…ç½®æ“ä½œå’Œè®¸å¤šæ•™å­¦åŒ…å‡½æ•°ã€‚ä½ åº”è¯¥åœ¨æœ‰æ—¶é—´å¹¶ä¸”æœ‰éœ€è¦çš„æ—¶å€™æ¢ç´¢ä½ é€‰æ‹©çš„è¯­è¨€ï¼Œä»¥ä¾¿äº†è§£å®ƒæä¾›äº†ä»€ä¹ˆã€‚
- en: 11.3Auxiliary Functions that Recur[ğŸ”—](#(part._sec~3asort.I) "Link to here")
  id: totrans-1882
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 11.3 é€’å½’è¾…åŠ©å‡½æ•°[ğŸ”—](#(part._sec~3asort.I) "é“¾æ¥åˆ°è¿™é‡Œ")
- en: People need to sort things all the time, and so do programs. Investment advisors
    sort portfolios by the profit each holding generates. Game programs sort lists
    of players according to scores. And mail programs sort messages according to date
    or sender or some other criterion.
  id: totrans-1883
  prefs: []
  type: TYPE_NORMAL
  zh: äººä»¬éœ€è¦ç»å¸¸å¯¹äº‹ç‰©è¿›è¡Œæ’åºï¼Œç¨‹åºä¹Ÿæ˜¯å¦‚æ­¤ã€‚æŠ•èµ„é¡¾é—®æ ¹æ®æ¯ä¸ªæŒä»“äº§ç”Ÿçš„åˆ©æ¶¦å¯¹æŠ•èµ„ç»„åˆè¿›è¡Œæ’åºã€‚æ¸¸æˆç¨‹åºæ ¹æ®å¾—åˆ†å¯¹ç©å®¶åˆ—è¡¨è¿›è¡Œæ’åºã€‚é‚®ä»¶ç¨‹åºæ ¹æ®æ—¥æœŸæˆ–å‘ä»¶äººæˆ–æŸäº›å…¶ä»–æ ‡å‡†å¯¹æ¶ˆæ¯è¿›è¡Œæ’åºã€‚
- en: 'In general, you can sort a bunch of items if you can compare and order each
    pair of data items. Although not every kind of data comes with a comparison primitive,
    we all know one that does: numbers. Hence, we use a simplistic but highly representative
    sample problem in this section:'
  id: totrans-1884
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ å¯ä»¥æ¯”è¾ƒå’Œæ’åºæ¯ä¸€å¯¹æ•°æ®é¡¹ï¼Œä½ å°±å¯ä»¥å¯¹ä¸€ç»„é¡¹ç›®è¿›è¡Œæ’åºã€‚å°½ç®¡å¹¶éæ‰€æœ‰ç±»å‹çš„æ•°æ®éƒ½å¸¦æœ‰æ¯”è¾ƒåŸè¯­ï¼Œä½†æˆ‘ä»¬éƒ½çŸ¥é“ä¸€ç§ï¼šæ•°å­—ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨æœ¬èŠ‚ä¸­ä½¿ç”¨ä¸€ä¸ªç®€å•ä½†å…·æœ‰é«˜åº¦ä»£è¡¨æ€§çš„ç¤ºä¾‹é—®é¢˜ï¼š
- en: Sample Problem Design a function that sorts a list of reals.
  id: totrans-1885
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·ä¾‹é—®é¢˜è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¯¹å®æ•°åˆ—è¡¨è¿›è¡Œæ’åºã€‚
- en: 'The exercises below clarify how to adapt this function to other data.Since
    the problem statement does not mention any other task and since sorting does not
    seem to suggest other tasks, we just follow the design recipe. Sorting means rearranging
    a bunch of numbers. This restatement implies a natural data definition for the
    inputs and outputs of the function and thus its signature. Given that we have
    a definition for [List-of-numbers](#%28tech._list._of._number%29), the first step
    is easy:'
  id: totrans-1886
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹é¢çš„ç»ƒä¹ è¯´æ˜äº†å¦‚ä½•å°†æ­¤å‡½æ•°é€‚åº”å…¶ä»–æ•°æ®ã€‚ç”±äºé—®é¢˜é™ˆè¿°æ²¡æœ‰æåˆ°ä»»ä½•å…¶ä»–ä»»åŠ¡ï¼Œå¹¶ä¸”æ’åºä¼¼ä¹ä¹Ÿä¸æš—ç¤ºå…¶ä»–ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€éµå¾ªè®¾è®¡é…æ–¹ã€‚æ’åºæ„å‘³ç€é‡æ–°æ’åˆ—ä¸€ç»„æ•°å­—ã€‚è¿™ç§é‡æ–°è¡¨è¿°æš—ç¤ºäº†å‡½æ•°è¾“å…¥å’Œè¾“å‡ºçš„è‡ªç„¶æ•°æ®å®šä¹‰ï¼Œä»è€Œç¡®å®šäº†å…¶ç­¾åã€‚é‰´äºæˆ‘ä»¬å·²ç»æœ‰[æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29)çš„å®šä¹‰ï¼Œç¬¬ä¸€æ­¥å¾ˆå®¹æ˜“ï¼š
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1887
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29) -> [æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29)
    |'
- en: '| ;Â produces a sorted version of alon |'
  id: totrans-1888
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â äº§ç”Ÿalonçš„æ’åºç‰ˆæœ¬ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
  id: totrans-1889
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
- en: '| Â Â alon) |'
  id: totrans-1890
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â alon) |'
- en: Returning alon ensures that the result is appropriate as far as the function
    signature is concerned, but in general, the given list isnâ€™t sorted and this result
    is wrong.When it comes to making up examples, it quickly becomes clear that the
    problem statement is quite imprecise. As before, we use the data definition of
    [List-of-numbers](#%28tech._list._of._number%29) to organize the development of
    examples. Since the data definition consists of two clauses, we need two examples.
    Clearly, when sort> is applied to '(), the result must be '(). The question is
    what the result for
  id: totrans-1891
  prefs: []
  type: TYPE_NORMAL
  zh: å•ç‹¬è¿”å›ç¡®ä¿ç»“æœåœ¨å‡½æ•°ç­¾åæ–¹é¢æ˜¯åˆé€‚çš„ï¼Œä½†ä¸€èˆ¬æ¥è¯´ï¼Œç»™å®šçš„åˆ—è¡¨å¹¶æ²¡æœ‰æ’åºï¼Œå› æ­¤è¿™ä¸ªç»“æœæ˜¯é”™è¯¯çš„ã€‚å½“æ¶‰åŠåˆ°æ„é€ ä¾‹å­æ—¶ï¼Œé—®é¢˜é™ˆè¿°çš„æ¨¡ç³Šæ€§å¾ˆå¿«å°±ä¼šå˜å¾—æ˜æ˜¾ã€‚å’Œä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨[æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29)çš„æ•°æ®å®šä¹‰æ¥ç»„ç»‡ä¾‹å­çš„å¼€å‘ã€‚ç”±äºæ•°æ®å®šä¹‰ç”±ä¸¤ä¸ªå­å¥ç»„æˆï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªä¾‹å­ã€‚æ˜¾ç„¶ï¼Œå½“å¯¹ç©ºåˆ—è¡¨åº”ç”¨`sort>`æ—¶ï¼Œç»“æœå¿…é¡»æ˜¯ç©ºåˆ—è¡¨ã€‚é—®é¢˜æ˜¯å¯¹äº
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 12Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 20Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â -5Â '())))
  id: totrans-1892
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 12Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 20Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â -5Â '())))
- en: 'should be. The list isnâ€™t sorted, but there are two ways to sort it:'
  id: totrans-1893
  prefs: []
  type: TYPE_NORMAL
  zh: åº”è¯¥æ˜¯ä»€ä¹ˆã€‚åˆ—è¡¨æ²¡æœ‰æ’åºï¼Œä½†æœ‰ä¸¤ç§æ’åºæ–¹æ³•ï¼š
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  20  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  12  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  -5  '()))),
    that is, a list with the numbers arranged in descending order; and
  id: totrans-1894
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 20Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 12Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â -5Â '()))),
    å³ä¸€ä¸ªæŒ‰é™åºæ’åˆ—æ•°å­—çš„åˆ—è¡¨ï¼›å’Œ
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  -5  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  12  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  20  '()))),
    that is, a list with the numbers arranged in ascending order.
  id: totrans-1895
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  -5  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  12  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  20  '()))),
    å³ä¸€ä¸ªæŒ‰å‡åºæ’åˆ—çš„æ•°å­—åˆ—è¡¨ã€‚
- en: 'In a real-world situation, you would now have to ask the person who posed the
    problem for clarification. Here we go for the descending alternative; designing
    the ascending alternative doesnâ€™t pose any different obstacles.The decision calls
    for a revision of the header material:'
  id: totrans-1896
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç°å®æƒ…å†µä¸‹ï¼Œä½ ç°åœ¨éœ€è¦å‘æå‡ºé—®é¢˜çš„äººè¯¢é—®æ¾„æ¸…ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©é™åºæ’åˆ—çš„æ›¿ä»£æ–¹æ¡ˆï¼›è®¾è®¡å‡åºæ’åˆ—å¹¶æ²¡æœ‰å¸¦æ¥ä»»ä½•ä¸åŒçš„éšœç¢ã€‚è¿™ä¸ªå†³å®šéœ€è¦å¯¹æ ‡é¢˜ææ–™è¿›è¡Œä¿®è®¢ï¼š
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1897
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
- en: '| ;Â rearranges alon in descending order |'
  id: totrans-1898
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; å°† alon é™åºæ’åˆ— |'
- en: '| Â  |'
  id: totrans-1899
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ''())Â ''())
    |'
  id: totrans-1900
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ''())Â ''())
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 3Â 2Â 1))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 3Â 2Â 1))
    |'
  id: totrans-1901
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 3Â 2Â 1))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 3Â 2Â 1))
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 1Â 2Â 3))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 3Â 2Â 1))
    |'
  id: totrans-1902
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 1Â 2Â 3))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 3Â 2Â 1))
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 12Â 20Â -5))
    |'
  id: totrans-1903
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 12Â 20Â -5))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 20Â 12Â -5))
    |'
  id: totrans-1904
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 20Â 12Â -5))
    |'
- en: '| Â  |'
  id: totrans-1905
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| | '
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
  id: totrans-1906
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
- en: '| Â Â alon) |'
  id: totrans-1907
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| alon) |'
- en: 'The header material now includes the examples reformulated as unit tests and
    using [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29).
    If the latter makes you uncomfortable, reformulate the test with [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    to exercise translating back and forth. As for the additional two examples, they
    demand that sort> works on lists already sorted in ascending and descending order.Next
    we must translate the data definition into a function template. We have dealt
    with lists of numbers before, so this step is easy:'
  id: totrans-1908
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‡é¢˜ææ–™ç°åœ¨åŒ…æ‹¬å°†ç¤ºä¾‹é‡æ–°è¡¨è¿°ä¸ºå•å…ƒæµ‹è¯•å¹¶ä½¿ç”¨ [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    çš„ä¾‹å­ã€‚å¦‚æœåè€…è®©ä½ æ„Ÿåˆ°ä¸èˆ’æœï¼Œå¯ä»¥ç”¨ [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    é‡æ–°è¡¨è¿°æµ‹è¯•ï¼Œä»¥ç»ƒä¹ ç¿»è¯‘çš„æ¥å›è½¬æ¢ã€‚è‡³äºé¢å¤–çš„ä¸¤ä¸ªç¤ºä¾‹ï¼Œå®ƒä»¬è¦æ±‚ sort> åœ¨å·²æŒ‰å‡åºå’Œé™åºæ’åºçš„åˆ—è¡¨ä¸Šå·¥ä½œã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¿…é¡»å°†æ•°æ®å®šä¹‰ç¿»è¯‘æˆå‡½æ•°æ¨¡æ¿ã€‚æˆ‘ä»¬ä¹‹å‰å·²ç»å¤„ç†è¿‡æ•°å­—åˆ—è¡¨ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å¾ˆå®¹æ˜“ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
  id: totrans-1909
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1910
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1911
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1912
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (sort>Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1913
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (sort>Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'Using this template, we can finally turn to the interesting part of the program
    development. We consider each case of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression separately, starting with the simple case. If sort>â€™s input is ''(),
    the answer is ''(), as specified by the example. If sort>â€™s input is a [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    list, the template suggests two expressions that might help:'
  id: totrans-1914
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿ï¼Œæˆ‘ä»¬æœ€ç»ˆå¯ä»¥è½¬å‘ç¨‹åºå¼€å‘çš„æœ‰è¶£éƒ¨åˆ†ã€‚æˆ‘ä»¬å•ç‹¬è€ƒè™‘ [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    è¡¨è¾¾å¼çš„æ¯ä¸ªæƒ…å†µï¼Œä»ç®€å•çš„æƒ…å†µå¼€å§‹ã€‚å¦‚æœ sort> çš„è¾“å…¥æ˜¯ '()ï¼Œåˆ™ç­”æ¡ˆä¸º '()ï¼Œå¦‚ç¤ºä¾‹æ‰€è¿°ã€‚å¦‚æœ sort> çš„è¾“å…¥æ˜¯ä¸€ä¸ª [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    åˆ—è¡¨ï¼Œæ¨¡æ¿å»ºè®®ä¸¤ä¸ªå¯èƒ½æœ‰åŠ©äºçš„è¡¨è¾¾å¼ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    extracts the first number from the input; and
  id: totrans-1915
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    æå–è¾“å…¥ä¸­çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼›å¹¶ä¸”
- en: (sort>  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    rearranges ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    in descending order, according to the purpose statement of the function.
  id: totrans-1916
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: (sort>  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    æ ¹æ®å‡½æ•°çš„ç›®çš„å£°æ˜å°† ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    é‡æ–°æ’åˆ—æˆé™åºã€‚
- en: To clarify these abstract answers, letâ€™s use the second example to explain these
    pieces in detail. When sort> consumes ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  12  20  -5),
  id: totrans-1917
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†é˜æ˜è¿™äº›æŠ½è±¡ç­”æ¡ˆï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒä¸ªä¾‹å­æ¥è¯¦ç»†è§£é‡Šè¿™äº›éƒ¨åˆ†ã€‚å½“ sort> æ¶ˆè´¹ ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  12  20  -5)ï¼Œ
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    is 12,
  id: totrans-1918
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    æ˜¯ 12ï¼Œ
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    is ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  20  -5),
    and
  id: totrans-1919
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    æ˜¯ ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  20  -5)ï¼Œå¹¶ä¸”
- en: (sort>  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    produces ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  20  -5)
    because this list is already sorted.
  id: totrans-1920
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (sort>  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    ç”Ÿæˆ ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  20  -5)ï¼Œå› ä¸ºè¿™ä¸ªåˆ—è¡¨å·²ç»æ’åºäº†ã€‚
- en: To produce the desired answer, sort> must insert 12 between the two numbers
    of the last list. More generally, we must find an expression that inserts ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    in its proper place into the result of (sort>  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)).
    If we can do so, sorting is an easily solved problem.
  id: totrans-1921
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å¾—åˆ°æœŸæœ›çš„ç­”æ¡ˆï¼Œsort> å¿…é¡»åœ¨åˆ—è¡¨çš„æœ€åä¸¤ä¸ªæ•°å­—ä¹‹é—´æ’å…¥ 12ã€‚æ›´æ™®éåœ°è¯´ï¼Œæˆ‘ä»¬å¿…é¡»æ‰¾åˆ°ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå°† ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon))
    æ’å…¥åˆ° (sort>  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    çš„æ­£ç¡®ä½ç½®ã€‚å¦‚æœæˆ‘ä»¬èƒ½è¿™æ ·åšï¼Œæ’åºé—®é¢˜å°±å¾ˆå®¹æ˜“è§£å†³äº†ã€‚
- en: Inserting a number into a sorted list clearly isnâ€™t a simple task. It demands
    searching through the sorted list to find the proper place of the item. Searching
    through any list demands an auxiliary function because lists are of arbitrary
    size and, by item 3 of the preceding section, processing values of arbitrary size
    calls for the design of an auxiliary function.
  id: totrans-1922
  prefs: []
  type: TYPE_NORMAL
  zh: å°†ä¸€ä¸ªæ•°å­—æ’å…¥åˆ°å·²æ’åºçš„åˆ—è¡¨ä¸­æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„ä»»åŠ¡ã€‚å®ƒéœ€è¦æœç´¢æ•´ä¸ªæ’åºåˆ—è¡¨ä»¥æ‰¾åˆ°é¡¹ç›®æ­£ç¡®çš„ä½ç½®ã€‚æœç´¢ä»»ä½•åˆ—è¡¨éƒ½éœ€è¦ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œå› ä¸ºåˆ—è¡¨çš„å¤§å°æ˜¯ä»»æ„çš„ï¼Œæ ¹æ®å‰ä¸€å°èŠ‚ä¸­çš„ç¬¬
    3 ç‚¹ï¼Œå¤„ç†ä»»æ„å¤§å°çš„å€¼éœ€è¦è®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚
- en: 'So here is the new wish-list entry:'
  id: totrans-1923
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæ–°çš„æ„¿æœ›æ¸…å•æ¡ç›®ï¼š
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [List-of-numbers](#%28tech._list._of._number%29)
    -> [List-of-numbers](#%28tech._list._of._number%29) |'
  id: totrans-1924
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Number](part_one.html#%28tech._number%29)  [List-of-numbers](#%28tech._list._of._number%29)
    -> [List-of-numbers](#%28tech._list._of._number%29) |'
- en: '| ;Â inserts n into the sorted list of numbers alon |'
  id: totrans-1925
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| å°†æ•°å­— n æ’å…¥åˆ°å·²æ’åºçš„æ•°å­—åˆ—è¡¨ alon ä¸­ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (insertÂ nÂ alon)Â alon)
    |'
  id: totrans-1926
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (insertÂ nÂ alon)Â alon)
    |'
- en: 'That is, insert consumes a number and a list sorted in descending order and
    produces a sorted list by inserting the former into the latter.With insert, it
    is easy to complete the definition of sort>:'
  id: totrans-1927
  prefs: []
  type: TYPE_NORMAL
  zh: ä¹Ÿå°±æ˜¯è¯´ï¼Œinsert æ¶ˆè€—ä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªæŒ‰é™åºæ’åºçš„åˆ—è¡¨ï¼Œå¹¶é€šè¿‡å°†å‰è€…æ’å…¥åè€…æ¥ç”Ÿæˆä¸€ä¸ªæ’åºåˆ—è¡¨ã€‚ä½¿ç”¨ insertï¼Œå¯ä»¥è½»æ¾å®Œæˆ sort> çš„å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
  id: totrans-1928
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1929
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â ''()]
    |'
  id: totrans-1930
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â ''()]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-1931
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â (insertÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â (sort>Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))]))
    |'
  id: totrans-1932
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â (insertÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â (sort>Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))]))
    |'
- en: In order to produce the final result, sort> extracts the first item of a non-empty
    list, computes the sorted version of the rest, and uses insert to produce the
    completely sorted list from the two pieces.
  id: totrans-1933
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†äº§ç”Ÿæœ€ç»ˆç»“æœï¼Œsort> ä»éç©ºåˆ—è¡¨ä¸­æå–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè®¡ç®—å…¶ä½™éƒ¨åˆ†çš„æ’åºç‰ˆæœ¬ï¼Œå¹¶ä½¿ç”¨æ’å…¥æ¥ä»è¿™ä¸¤éƒ¨åˆ†äº§ç”Ÿä¸€ä¸ªå®Œå…¨æ’åºçš„åˆ—è¡¨ã€‚
- en: Stop! Test the program as is. Some test cases pass, and some fail. Thatâ€™s progress.
    The next step in its design is the creation of functional examples. Since the
    first input of insert is any number, we use 5 and use the data definition for
    [List-of-numbers](#%28tech._list._of._number%29) to make up examples for the second
    input.
  id: totrans-1934
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼æŒ‰ç…§å½“å‰çŠ¶æ€æµ‹è¯•ç¨‹åºã€‚ä¸€äº›æµ‹è¯•ç”¨ä¾‹é€šè¿‡äº†ï¼Œä¸€äº›å¤±è´¥äº†ã€‚è¿™æ˜¯è¿›æ­¥ã€‚å…¶è®¾è®¡ä¸­çš„ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºåŠŸèƒ½ç¤ºä¾‹ã€‚ç”±äºæ’å…¥çš„ç¬¬ä¸€ä¸ªè¾“å…¥æ˜¯ä»»ä½•æ•°å­—ï¼Œæˆ‘ä»¬ä½¿ç”¨5ï¼Œå¹¶ä½¿ç”¨[æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29)çš„æ•°æ®å®šä¹‰æ¥ä¸ºç¬¬äºŒä¸ªè¾“å…¥åˆ¶ä½œç¤ºä¾‹ã€‚
- en: 'First we consider what insert should produce when given a number and ''().
    According to insertâ€™s purpose statement, the output must be a list, it must contain
    all numbers from the second input, and it must contain the first argument. This
    suggests the following:'
  id: totrans-1935
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬è€ƒè™‘å½“æ’å…¥ä¸€ä¸ªæ•°å­—å’Œç©ºåˆ—è¡¨æ—¶ï¼Œæ’å…¥åº”è¯¥äº§ç”Ÿä»€ä¹ˆã€‚æ ¹æ®æ’å…¥çš„ç›®çš„å£°æ˜ï¼Œè¾“å‡ºå¿…é¡»æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå®ƒå¿…é¡»åŒ…å«ç¬¬äºŒä¸ªè¾“å…¥ä¸­çš„æ‰€æœ‰æ•°å­—ï¼Œå¹¶ä¸”å¿…é¡»åŒ…å«ç¬¬ä¸€ä¸ªå‚æ•°ã€‚è¿™è¡¨æ˜ä»¥ä¸‹ï¼š
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 5Â '())Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 5))
  id: totrans-1936
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 5Â '())Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 5))
- en: 'Second, we use a non-empty list of just one item:'
  id: totrans-1937
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå…ƒç´ çš„éç©ºåˆ—è¡¨ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 5Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6Â 5))
    |'
  id: totrans-1938
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 5Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6Â 5))
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 5Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 4))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 5Â 4))
    |'
  id: totrans-1939
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 5Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 4))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 5Â 4))
    |'
- en: 'The reasoning of why these are the expected results is just like before. For
    one, the result must contain all numbers from the second list and the extra number.
    For two, the result must be sorted.Finally, letâ€™s create an example with a list
    that contains more than one item. Indeed, we can derive such an example from the
    examples for sort> and especially from our analysis of the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause. From there, we know that sort> works only if 12 is inserted into ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  20  -5)
    at its proper place:'
  id: totrans-1940
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºä»€ä¹ˆè¿™äº›æ˜¯é¢„æœŸçš„ç»“æœçš„åŸå› å°±åƒä¹‹å‰ä¸€æ ·ã€‚ä¸€æ–¹é¢ï¼Œç»“æœå¿…é¡»åŒ…å«ç¬¬äºŒä¸ªåˆ—è¡¨ä¸­çš„æ‰€æœ‰æ•°å­—å’Œé¢å¤–çš„æ•°å­—ã€‚å¦ä¸€æ–¹é¢ï¼Œç»“æœå¿…é¡»æ˜¯æœ‰åºçš„ã€‚æœ€åï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…å«å¤šä¸ªå…ƒç´ çš„åˆ—è¡¨çš„ä¾‹å­ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä»
    sort> çš„ä¾‹å­ä¸­æ¨å¯¼å‡ºè¿™æ ·çš„ä¾‹å­ï¼Œç‰¹åˆ«æ˜¯ä»æˆ‘ä»¬å¯¹ç¬¬äºŒä¸ª [æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥çš„åˆ†æä¸­ã€‚ä»é‚£é‡Œï¼Œæˆ‘ä»¬çŸ¥é“ sort> åªæœ‰åœ¨ 12 è¢«æ’å…¥åˆ° ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    20 -5) çš„æ­£ç¡®ä½ç½®æ—¶æ‰ä¼šå·¥ä½œï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 12Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 20Â -5))
    |'
  id: totrans-1941
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    æ’å…¥ 12 ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    20 -5)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 20Â 12Â -5))
    |'
  id: totrans-1942
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    20 12 -5)) |'
- en: That is, insert is given a second list and it is sorted in descending order.
  id: totrans-1943
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£å°±æ˜¯æ’å…¥ç»™å®šäº†ç¬¬äºŒä¸ªåˆ—è¡¨ï¼Œå¹¶ä¸”å®ƒæ˜¯æŒ‰é™åºæ’åºçš„ã€‚
- en: Note what the development of examples teaches us. The insert function has to
    find the first number that is smaller than the given n. When there is no such
    number, the function eventually reaches the end of the list and it must add n
    to the end. Now, before we move on to the template, you should work out some additional
    examples. To do so, you may wish to use the supplementary examples for sort>.
  id: totrans-1944
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ä¾‹å­çš„å‘å±•è¿‡ç¨‹æ‰€æ•™ç»™æˆ‘ä»¬çš„ã€‚æ’å…¥å‡½æ•°å¿…é¡»æ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äºç»™å®š n çš„æ•°å­—ã€‚å¦‚æœæ²¡æœ‰è¿™æ ·çš„æ•°å­—ï¼Œå‡½æ•°æœ€ç»ˆä¼šåˆ°è¾¾åˆ—è¡¨çš„æœ«å°¾ï¼Œå¹¶ä¸”å¿…é¡»åœ¨æœ«å°¾æ·»åŠ  nã€‚ç°åœ¨ï¼Œåœ¨æˆ‘ä»¬ç»§ç»­åˆ°æ¨¡æ¿ä¹‹å‰ï¼Œä½ åº”è¯¥è§£å†³ä¸€äº›é¢å¤–çš„ä¾‹å­ã€‚ä¸ºæ­¤ï¼Œä½ å¯èƒ½å¸Œæœ›ä½¿ç”¨æ’åºçš„è¡¥å……ä¾‹å­ã€‚
- en: 'In contrast to sort>, the function insert consumes two inputs. Since we know
    that the first one is a number and atomic, we can focus on the second argumentâ€”<wbr>the
    list of numbersâ€”<wbr>for the template development:'
  id: totrans-1945
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ sort> ç›¸æ¯”ï¼Œå‡½æ•° insert æ¶ˆè€—ä¸¤ä¸ªè¾“å…¥ã€‚ç”±äºæˆ‘ä»¬çŸ¥é“ç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªæ•°å­—å¹¶ä¸”æ˜¯åŸå­çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¸“æ³¨äºç¬¬äºŒä¸ªå‚æ•°â€”â€”<wbr>æ•°å­—çš„åˆ—è¡¨â€”â€”<wbr>ç”¨äºæ¨¡æ¿å¼€å‘ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (insertÂ nÂ alon)
    |'
  id: totrans-1946
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    æ’å…¥ n å•ç‹¬) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1947
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-1948
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [([ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    alon) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-1949
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon) [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (insertÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-1950
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (insertÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: The only difference between this template and the one for sort> is that this
    one needs to take into account the additional argument n.
  id: totrans-1951
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæ¨¡æ¿ä¸ sort> çš„æ¨¡æ¿ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«æ˜¯ï¼Œè¿™ä¸ªæ¨¡æ¿éœ€è¦è€ƒè™‘é¢å¤–çš„å‚æ•° nã€‚
- en: To fill the gaps in the template of insert, we again proceed on a case-by-case
    basis. The first case concerns the empty list. According to the first example,
    ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  n)
    is the expression needed in the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause because it constructs a sorted list from n and alon.
  id: totrans-1952
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å¡«è¡¥æ’å…¥æ¨¡æ¿ä¸­çš„ç©ºç™½ï¼Œæˆ‘ä»¬å†æ¬¡é€ä¸ªæ¡ˆä¾‹è¿›è¡Œæ“ä½œã€‚ç¬¬ä¸€ç§æƒ…å†µæ¶‰åŠç©ºåˆ—è¡¨ã€‚æ ¹æ®ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    n) æ˜¯ç¬¬ä¸€ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    æ¡ä»¶ä¸­éœ€è¦çš„è¡¨è¾¾å¼ï¼Œå› ä¸ºå®ƒä» n å’Œ alon æ„å»ºäº†ä¸€ä¸ªæœ‰åºåˆ—è¡¨ã€‚
- en: 'The second case is more complicated than the first, and so we follow the questions
    from [figureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29):'
  id: totrans-1953
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒç§æƒ…å†µæ¯”ç¬¬ä¸€ç§æ›´å¤æ‚ï¼Œå› æ­¤æˆ‘ä»¬éµå¾ª[å›¾53](#%28counter._%28figure._fig~3adefinition-q%29%29)ä¸­çš„é—®é¢˜ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    is the first number on alon;
  id: totrans-1954
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon) æ˜¯ alon ä¸Šçš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼›
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    is the rest of alon and, like alon, it is sorted in descending order; and
  id: totrans-1955
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon) æ˜¯ alon çš„å…¶ä½™éƒ¨åˆ†ï¼Œå¹¶ä¸”åƒ alon ä¸€æ ·ï¼Œå®ƒæ˜¯æŒ‰é™åºæ’åºçš„ï¼›å¹¶ä¸”
- en: (insert  n  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    produces a sorted list from n and the numbers on ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon).
  id: totrans-1956
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (insert  n  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    ä» n å’Œ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon) ä¸Šçš„æ•°å­—ç”Ÿæˆä¸€ä¸ªæœ‰åºåˆ—è¡¨ã€‚
- en: 'The problem is how to combine these pieces of data to get the final answer.Letâ€™s
    work through some examples to make all this concrete:'
  id: totrans-1957
  prefs: []
  type: TYPE_NORMAL
  zh: é—®é¢˜æ˜¯å¦‚ä½•å°†è¿™äº›æ•°æ®ç‰‡æ®µç»„åˆèµ·æ¥å¾—åˆ°æœ€ç»ˆç­”æ¡ˆã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€äº›ä¾‹å­æ¥å…·ä½“è¯´æ˜æ‰€æœ‰è¿™äº›å†…å®¹ï¼š
- en: (insertÂ 7Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6Â 5Â 4))
  id: totrans-1958
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (insertÂ 7Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6Â 5Â 4))
- en: Here n is 7 and larger than any of the numbers in the second input. We know
    so by just looking at the first item of the list. It is 6, but because the list
    is sorted all other numbers on the list are even smaller than 6. Hence it suffices
    if we just [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    7 onto ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  6  5  4).In
    contrast, when the application is something like
  id: totrans-1959
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œ n æ˜¯ 7ï¼Œæ¯”ç¬¬äºŒä¸ªè¾“å…¥ä¸­çš„ä»»ä½•æ•°å­—éƒ½è¦å¤§ã€‚æˆ‘ä»¬åªéœ€çœ‹ä¸€ä¸‹åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªé¡¹ç›®å°±èƒ½çŸ¥é“è¿™ä¸€ç‚¹ã€‚å®ƒæ˜¯ 6ï¼Œä½†ç”±äºåˆ—è¡¨æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥åˆ—è¡¨ä¸Šçš„å…¶ä»–æ‰€æœ‰æ•°å­—éƒ½æ¯”
    6 å°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€å°† 7 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    åˆ° ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    6 5 4) ä¸Šå³å¯ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå½“åº”ç”¨ç±»ä¼¼äº
- en: (insertÂ 0Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6Â 2Â 1Â -1))
  id: totrans-1960
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (insert 0 ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    6 2 1 -1))
- en: 'n must indeed be inserted into the rest of the list. More concretely, ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    is 6; ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    is ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  2  1  -1);
    and (insert  n  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    produces ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  2  1  0  -1)
    according to the purpose statement. By adding 6 back onto that last list, we get
    the desired answer for (insert  0  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  6  2  1  -1)).To
    get a complete function definition, we must generalize these examples. The case
    analysis suggests a nested conditional that determines whether n is larger than
    (or equal to) ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon):'
  id: totrans-1961
  prefs: []
  type: TYPE_NORMAL
  zh: nç¡®å®å¿…é¡»æ’å…¥åˆ°åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon)æ˜¯6ï¼›([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon)æ˜¯([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    2 1 -1)ï¼›å¹¶ä¸”(insert n ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon))æ ¹æ®ç›®çš„å£°æ˜äº§ç”Ÿ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    2 1 0 -1)ã€‚é€šè¿‡å°†6åŠ å›åˆ°æœ€åä¸€ä¸ªåˆ—è¡¨ä¸Šï¼Œæˆ‘ä»¬å¾—åˆ°(insert 0 ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    6 2 1 -1))æ‰€æœŸæœ›çš„ç­”æ¡ˆã€‚ä¸ºäº†å¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„å‡½æ•°å®šä¹‰ï¼Œæˆ‘ä»¬å¿…é¡»å°†è¿™äº›ä¾‹å­è¿›è¡Œæ³›åŒ–ã€‚æƒ…å†µåˆ†æè¡¨æ˜éœ€è¦ä¸€ä¸ªåµŒå¥—çš„æ¡ä»¶åˆ¤æ–­ï¼Œä»¥ç¡®å®šnæ˜¯å¦å¤§äºï¼ˆæˆ–ç­‰äºï¼‰([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon)ï¼š
- en: If so, all the items in alon are smaller than n because alon is already sorted.
    The answer in that case is ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  n  alon).
  id: totrans-1962
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœæ˜¯è¿™æ ·ï¼Œalonä¸­çš„æ‰€æœ‰é¡¹ç›®éƒ½å°äºnï¼Œå› ä¸ºalonå·²ç»æ’åºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç­”æ¡ˆæ˜¯([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    n alon)ã€‚
- en: If, however, n is smaller than ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon),
    then the function has not yet found the proper place to insert n into alon. The
    first item of the result must be ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    and n must be inserted into ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon).
    The final result in this case is
  id: totrans-1963
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œå¦‚æœnå°äº([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon)ï¼Œé‚£ä¹ˆå‡½æ•°è¿˜æ²¡æœ‰æ‰¾åˆ°å°†næ’å…¥alonçš„æ­£ç¡®ä½ç½®ã€‚ç»“æœçš„ç¬¬ä¸€é¡¹å¿…é¡»æ˜¯([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon)ï¼Œè€Œnå¿…é¡»æ’å…¥åˆ°([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon)ä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€ç»ˆç»“æœæ˜¯
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â (insertÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))
  id: totrans-1964
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon) (insert n ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    alon)))
- en: because this list contains n and all items of alon in sorted orderâ€”<wbr>which
    is what we need.
  id: totrans-1965
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å› ä¸ºè¿™ä¸ªåˆ—è¡¨åŒ…å«nå’Œalonçš„æ‰€æœ‰é¡¹ï¼Œä¸”å·²æ’åºâ€”â€”è¿™æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚
- en: The translation of this discussion into BSL+ calls for an [if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    expression for such cases. The condition is ([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)  n  ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)),
    and the expressions for the two branches have been formulated.
  id: totrans-1966
  prefs: []
  type: TYPE_NORMAL
  zh: å°†è¿™æ¬¡è®¨è®ºç¿»è¯‘æˆBSL+éœ€è¦ä¸ºè¿™ç§æƒ…å†µç¼–å†™ä¸€ä¸ª[if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)è¡¨è¾¾å¼ã€‚æ¡ä»¶æ˜¯([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)
    n ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    alon))ï¼Œä¸¤ä¸ªåˆ†æ”¯çš„è¡¨è¾¾å¼å·²ç»åˆ¶å®šã€‚
- en: '[FigureÂ 72](#%28counter._%28figure._fig~3asort%29%29) contains the complete
    sort program. Copy it into the definitions area of DrRacket, add the test cases
    back in, and test the program. All tests should pass now, and they should cover
    all expressions.'
  id: totrans-1967
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾72](#%28counter._%28figure._fig~3asort%29%29) åŒ…å«äº†å®Œæ•´çš„æ’åºç¨‹åºã€‚å°†å…¶å¤åˆ¶åˆ°DrRacketçš„å®šä¹‰åŒºåŸŸï¼Œé‡æ–°æ·»åŠ æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶æµ‹è¯•ç¨‹åºã€‚ç°åœ¨æ‰€æœ‰æµ‹è¯•éƒ½åº”è¯¥é€šè¿‡ï¼Œå¹¶ä¸”åº”è¯¥æ¶µç›–æ‰€æœ‰è¡¨è¾¾å¼ã€‚'
- en: Terminology This particular program for sorting is known as insertion sort in
    the programming literature. Later we will study alternative ways to sort lists,
    using an entirely different design strategy.
  id: totrans-1968
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¯è¯­è¿™ä¸ªç‰¹å®šçš„æ’åºç¨‹åºåœ¨ç¼–ç¨‹æ–‡çŒ®ä¸­è¢«ç§°ä¸ºæ’å…¥æ’åºã€‚ç¨åæˆ‘ä»¬å°†ç ”ç©¶ä½¿ç”¨å®Œå…¨ä¸åŒçš„è®¾è®¡ç­–ç•¥æ¥æ’åºåˆ—è¡¨çš„å…¶ä»–æ–¹æ³•ã€‚
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1969
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29) -> [æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29)
    |'
- en: '| ;Â produces a sorted version of l |'
  id: totrans-1970
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”Ÿæˆlçš„æ’åºç‰ˆæœ¬ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â l)
    |'
  id: totrans-1971
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1972
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  id: totrans-1973
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â l)Â (insertÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â (sort>Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)))]))
    |'
  id: totrans-1974
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â l)Â (insertÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â (sort>Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)))]))
    |'
- en: '| Â  |'
  id: totrans-1975
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [List-of-numbers](#%28tech._list._of._number%29)
    -> [List-of-numbers](#%28tech._list._of._number%29) |'
  id: totrans-1976
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [æ•°å­—](part_one.html#%28tech._number%29) [æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29)
    -> [æ•°å­—åˆ—è¡¨](#%28tech._list._of._number%29) |'
- en: '| ;Â inserts n into the sorted list of numbers l |'
  id: totrans-1977
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†næ’å…¥åˆ°æ’åºåçš„æ•°å­—åˆ—è¡¨lä¸­ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (insertÂ nÂ l)
    |'
  id: totrans-1978
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (insertÂ nÂ l)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-1979
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â nÂ ''())]
    |'
  id: totrans-1980
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â nÂ ''())]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â nÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l))
    |'
  id: totrans-1981
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    ([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)
    n ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    l)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â nÂ l)
    |'
  id: totrans-1982
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    n lï¼‰|'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â (insertÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))))]))
    |'
  id: totrans-1983
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    l) (insert n ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    l))))])) |'
- en: ''
  id: totrans-1984
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 72: Sorting lists of numbers'
  id: totrans-1985
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾72ï¼šæ’åºæ•°å­—åˆ—è¡¨
- en: 'ExerciseÂ 186\. Take a second look at [Intermezzo 1: Beginning Student Language](i1-2.html),
    the intermezzo that presents BSL and its ways of formulating tests. One of the
    latter is [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29),
    which determines whether an expression satisfies a certain property. Use sorted>?
    from [exerciseÂ 145](#%28counter._%28exercise._nelist4%29%29) to reformulate the
    tests for sort> with [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29).'
  id: totrans-1986
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 186ã€‚å†æ¬¡æŸ¥çœ‹[é—´å¥æ›²1ï¼šåˆå­¦è€…çš„è¯­è¨€](i1-2.html)ï¼Œè¿™ä¸ªé—´å¥æ›²ä»‹ç»äº†BSLåŠå…¶åˆ¶å®šæµ‹è¯•çš„æ–¹æ³•ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯[check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)ï¼Œå®ƒç”¨äºåˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å¦æ»¡è¶³æŸä¸ªç‰¹å®šå±æ€§ã€‚ä½¿ç”¨[ç»ƒä¹ 145](#%28counter._%28exercise._nelist4%29%29)ä¸­çš„sorted>?æ¥ä½¿ç”¨[check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)é‡æ–°åˆ¶å®šsort>çš„æµ‹è¯•ã€‚
- en: 'Now consider this function definition:'
  id: totrans-1987
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è€ƒè™‘è¿™ä¸ªå‡½æ•°å®šä¹‰ï¼š
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  id: totrans-1988
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
- en: '| ;Â produces a sorted version of l |'
  id: totrans-1989
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”Ÿæˆlçš„æ’åºç‰ˆæœ¬ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>/badÂ l)
    |'
  id: totrans-1990
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (sort>/bad l) |'
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 9Â 8Â 7Â 6Â 5Â 4Â 3Â 2Â 1Â 0))
    |'
  id: totrans-1991
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    9 8 7 6 5 4 3 2 1 0)) |'
- en: Can you formulate a test case that shows that sort>/bad is not a sorting function?
    Can you use [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    to formulate this test case?
  id: totrans-1992
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ èƒ½å¦åˆ¶å®šä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æ¥å±•ç¤ºsort>/badä¸æ˜¯ä¸€ä¸ªæ’åºå‡½æ•°ï¼Ÿä½ èƒ½ä½¿ç”¨[check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)æ¥åˆ¶å®šè¿™ä¸ªæµ‹è¯•ç”¨ä¾‹å—ï¼Ÿ
- en: Notes (1) What may surprise you here is that we define a function to create
    a test. In the real world, this step is common, and, on occasion, you really need
    to design functions for testsâ€”<wbr>with their own tests and all. (2) Formulating
    tests with [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    is occasionally easier than using [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    (or other forms), and it is also a bit more general. When the predicate completely
    describes the relationship between all possible inputs and outputs of a function,
    computer scientists speak of a specification. [Specifying with lambda](part_three.html#%28part._sec~3aspecification%29)
    explains how to specify sort> completely.
  id: totrans-1993
  prefs: []
  type: TYPE_NORMAL
  zh: å¤‡æ³¨ï¼ˆ1ï¼‰è¿™é‡Œå¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°æƒŠè®¶çš„æ˜¯ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºæµ‹è¯•ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œè¿™ä¸€æ­¥å¾ˆå¸¸è§ï¼Œæœ‰æ—¶ä½ ç¡®å®éœ€è¦ä¸ºæµ‹è¯•è®¾è®¡å‡½æ•°â€”â€”åŒ…æ‹¬å®ƒä»¬è‡ªå·±çš„æµ‹è¯•ã€‚ ï¼ˆ2ï¼‰ä½¿ç”¨
    [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    åˆ¶å®šæµ‹è¯•æœ‰æ—¶æ¯”ä½¿ç”¨ [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)ï¼ˆæˆ–å…¶ä»–å½¢å¼ï¼‰æ›´å®¹æ˜“ï¼Œå®ƒä¹Ÿæ›´é€šç”¨ã€‚å½“è°“è¯å®Œå…¨æè¿°äº†å‡½æ•°æ‰€æœ‰å¯èƒ½çš„è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å…³ç³»æ—¶ï¼Œè®¡ç®—æœºç§‘å­¦å®¶ç§°ä¹‹ä¸ºè§„èŒƒã€‚[ä½¿ç”¨
    lambda è§„èŒƒ](part_three.html#%28part._sec~3aspecification%29) è§£é‡Šäº†å¦‚ä½•å®Œå…¨è§„èŒƒæ’åºã€‚
- en: 'ExerciseÂ 187\. Design a program that sorts lists of game players by score:'
  id: totrans-1994
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  187\. è®¾è®¡ä¸€ä¸ªç¨‹åºï¼ŒæŒ‰å¾—åˆ†å¯¹æ¸¸æˆç©å®¶åˆ—è¡¨è¿›è¡Œæ’åºï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â gpÂ [nameÂ score])
    |'
  id: totrans-1995
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â gpÂ [nameÂ score])
    |'
- en: '| ;Â A GamePlayer is a structure: |'
  id: totrans-1996
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªæ¸¸æˆç©å®¶æ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â Â (make-gp  [String](part_one.html#%28tech._string%29)  [Number](part_one.html#%28tech._number%29))
    |'
  id: totrans-1997
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â Â (make-gp  [String](part_one.html#%28tech._string%29)  [Number](part_one.html#%28tech._number%29))
    |'
- en: '| ;Â interpretation  (make-gp  p  s) represents player p who |'
  id: totrans-1998
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation  (make-gp  p  s) è¡¨ç¤ºç©å®¶ p |'
- en: '| ;Â scored a maximum of s points |'
  id: totrans-1999
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¾—åˆ†ä¸º s åˆ† |'
- en: 'Hint Formulate a function that compares two elements of [GamePlayer](#%28tech._gameplayer%29).ExerciseÂ 188\.
    Design a program that sorts lists of emails by date:'
  id: totrans-2000
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼šå®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥æ¯”è¾ƒ [GamePlayer](#%28tech._gameplayer%29) çš„ä¸¤ä¸ªå…ƒç´ ã€‚ç»ƒä¹  188\. è®¾è®¡ä¸€ä¸ªç¨‹åºï¼ŒæŒ‰æ—¥æœŸå¯¹ç”µå­é‚®ä»¶åˆ—è¡¨è¿›è¡Œæ’åºï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â emailÂ [fromÂ dateÂ message])
    |'
  id: totrans-2001
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â emailÂ [fromÂ dateÂ message])
    |'
- en: '| ;Â An Email Message is a structure: |'
  id: totrans-2002
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªç”µå­é‚®ä»¶æ¶ˆæ¯æ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-email  [String](part_one.html#%28tech._string%29)  [Number](part_one.html#%28tech._number%29)  [String](part_one.html#%28tech._string%29))
    |'
  id: totrans-2003
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-email  [String](part_one.html#%28tech._string%29)  [Number](part_one.html#%28tech._number%29)  [String](part_one.html#%28tech._string%29))
    |'
- en: '| ;Â interpretation  (make-email  f  d  m) represents text m |'
  id: totrans-2004
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â interpretation  (make-email  f  d  m) è¡¨ç¤ºæ–‡æœ¬ m |'
- en: '| ;Â sent by f, d seconds after the beginning of time |'
  id: totrans-2005
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”± f å‘é€ï¼Œåœ¨æ—¶é—´å¼€å§‹åçš„ d ç§’ |'
- en: 'Also develop a program that sorts lists of email messages by name. To compare
    two strings alphabetically, use the [string<?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3c~3f%29%29)
    primitive.ExerciseÂ 189\. Here is the function search:'
  id: totrans-2006
  prefs: []
  type: TYPE_NORMAL
  zh: è¿˜å¼€å‘ä¸€ä¸ªç¨‹åºï¼ŒæŒ‰åç§°å¯¹ç”µå­é‚®ä»¶æ¶ˆæ¯åˆ—è¡¨è¿›è¡Œæ’åºã€‚è¦æŒ‰å­—æ¯é¡ºåºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨ [string<?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3c~3f%29%29)
    åŸè¯­ã€‚ç»ƒä¹  189\. ä¸‹é¢æ˜¯ search å‡½æ•°ï¼š
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [List-of-numbers](#%28tech._list._of._number%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-2007
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Number](part_one.html#%28tech._number%29)  [List-of-numbers](#%28tech._list._of._number%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (searchÂ nÂ alon)
    |'
  id: totrans-2008
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (searchÂ nÂ alon)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-2009
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
  id: totrans-2010
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â n)
    |'
  id: totrans-2011
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â n)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (searchÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))]))
    |'
  id: totrans-2012
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (searchÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))]))
    |'
- en: It determines whether some number occurs in a list of numbers. The function
    may have to traverse the entire list to find out that the number of interest isnâ€™t
    contained in the list.
  id: totrans-2013
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒç¡®å®šæŸä¸ªæ•°å­—æ˜¯å¦å‡ºç°åœ¨æ•°å­—åˆ—è¡¨ä¸­ã€‚å‡½æ•°å¯èƒ½éœ€è¦éå†æ•´ä¸ªåˆ—è¡¨ï¼Œæ‰èƒ½å‘ç°æ„Ÿå…´è¶£çš„æ•°å­—ä¸åœ¨åˆ—è¡¨ä¸­ã€‚
- en: Develop the function search-sorted, which determines whether a number occurs
    in a sorted list of numbers. The function must take advantage of the fact that
    the list is sorted.
  id: totrans-2014
  prefs: []
  type: TYPE_NORMAL
  zh: å¼€å‘å‡½æ•° search-sortedï¼Œå®ƒç¡®å®šä¸€ä¸ªæ•°å­—æ˜¯å¦å‡ºç°åœ¨æ’åºåçš„æ•°å­—åˆ—è¡¨ä¸­ã€‚è¯¥å‡½æ•°å¿…é¡»åˆ©ç”¨åˆ—è¡¨å·²æ’åºçš„äº‹å®ã€‚
- en: ExerciseÂ 190\. Design the prefixes function, which consumes a list of [1String](part_one.html#%28tech._1string%29)s
    and produces the list of all prefixes. A list p is a prefix of l if p and l are
    the same up through all items in p. For example, ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "a"  "b"  "c")
    is a prefix of itself and ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "a"  "b"  "c"  "d").
  id: totrans-2015
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  190\. è®¾è®¡ä¸€ä¸ªå‰ç¼€å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨å¹¶ç”Ÿæˆæ‰€æœ‰å‰ç¼€åˆ—è¡¨ã€‚ä¸€ä¸ªåˆ—è¡¨ p æ˜¯åˆ—è¡¨ l çš„å‰ç¼€ï¼Œå¦‚æœ p å’Œ l åœ¨ p çš„æ‰€æœ‰é¡¹ä¸Šéƒ½æ˜¯ç›¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "a" "b" "c") æ˜¯å®ƒè‡ªå·±çš„å‰ç¼€ï¼Œ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "a" "b" "c" "d")ã€‚
- en: Design the function suffixes, which consumes a list of [1String](part_one.html#%28tech._1string%29)s
    and produces all suffixes. A list s is a suffix of l if s and l are the same from
    the end, up through all items in s. For example, ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "b"  "c"  "d")
    is a suffix of itself and ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "a"  "b"  "c"  "d").
  id: totrans-2016
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡å‡½æ•° suffixesï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨å¹¶ç”Ÿæˆæ‰€æœ‰åç¼€ã€‚ä¸€ä¸ªåˆ—è¡¨ s æ˜¯åˆ—è¡¨ l çš„åç¼€ï¼Œå¦‚æœ s å’Œ l ä»æœ«å°¾å¼€å§‹ç›¸åŒï¼Œç›´åˆ° s çš„æ‰€æœ‰é¡¹ã€‚ä¾‹å¦‚ï¼Œ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "b" "c" "d") æ˜¯å®ƒè‡ªå·±çš„åç¼€ï¼Œ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "a" "b" "c" "d")ã€‚
- en: 11.4Auxiliary Functions that Generalize[ğŸ”—](#(part._sec~3agen-funcs) "Link to
    here")
  id: totrans-2017
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 11.4 è¾…åŠ©å‡½æ•°çš„æ³›åŒ–[ğŸ”—](#(part._sec~3agen-funcs) "é“¾æ¥åˆ°æ­¤å¤„")
- en: On occasion an auxiliary function is not just a small helper function but a
    solution to a more general problem. Such auxiliaries are needed when a problem
    statement is too narrow. As programmers work through the steps of the design recipe,
    they may discover that the â€œnaturalâ€ solution is wrong. An analysis of this broken
    solution may suggest a slightly different, but more general, problem statement,
    as well as a simple way of using the solution to the general problem for the original
    one.
  id: totrans-2018
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰æ—¶ï¼Œè¾…åŠ©å‡½æ•°ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå°çš„è¾…åŠ©å‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªæ›´ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚å½“é—®é¢˜é™ˆè¿°è¿‡äºç‹­çª„æ—¶ï¼Œéœ€è¦è¿™æ ·çš„è¾…åŠ©å‡½æ•°ã€‚éšç€ç¨‹åºå‘˜åœ¨è®¾è®¡æ–¹æ¡ˆçš„æ­¥éª¤ä¸­å·¥ä½œï¼Œä»–ä»¬å¯èƒ½ä¼šå‘ç°â€œè‡ªç„¶â€çš„è§£å†³æ–¹æ¡ˆæ˜¯é”™è¯¯çš„ã€‚å¯¹è¿™ä¸ªé”™è¯¯è§£å†³æ–¹æ¡ˆçš„åˆ†æå¯èƒ½ä¼šå»ºè®®ä¸€ä¸ªç¨å¾®ä¸åŒä½†æ›´ä¸€èˆ¬çš„é—®é¢˜é™ˆè¿°ï¼Œä»¥åŠä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œå³ä½¿ç”¨è¯¥ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ¥è§£å†³åŸå§‹é—®é¢˜ã€‚
- en: We illustrate this idea with a solution to the following problem:Paul C. Fisher
    suggested this problem.
  id: totrans-2019
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç”¨ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ¥å±•ç¤ºè¿™ä¸ªæƒ³æ³•ï¼šä¿ç½—Â·CÂ·è´¹èˆå°”æå‡ºäº†è¿™ä¸ªé—®é¢˜ã€‚
- en: Sample Problem Design a function that adds a polygon to a given scene.
  id: totrans-2020
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œå°†å¤šè¾¹å½¢æ·»åŠ åˆ°ç»™å®šçš„åœºæ™¯ä¸­ã€‚
- en: 'Just in case you donâ€™t recall your basic geometry (domain) knowledge, we add
    a (simplistic) definition of polygon:'
  id: totrans-2021
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ä¸è®°å¾—ä½ çš„åŸºæœ¬å‡ ä½•ï¼ˆåŸŸï¼‰çŸ¥è¯†ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªï¼ˆç®€åŒ–çš„ï¼‰å¤šè¾¹å½¢å®šä¹‰ï¼š
- en: A polygon is a planar figure with at least three points (not on a straight line)
    connected by three straight sides.
  id: totrans-2022
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å¤šè¾¹å½¢æ˜¯ç”±è‡³å°‘ä¸‰ä¸ªä¸åœ¨åŒä¸€ç›´çº¿ä¸Šçš„ç‚¹é€šè¿‡ä¸‰æ¡ç›´çº¿è¾¹è¿æ¥çš„å¹³é¢å›¾å½¢ã€‚
- en: One natural data representation for a polygon is thus a list of [Posn](part_one.html#%28tech._posn%29)s.
    For example, the following two definitions
  id: totrans-2023
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œå¤šè¾¹å½¢çš„è‡ªç„¶æ•°æ®è¡¨ç¤ºæ˜¯ä¸€ä¸ªPosnçš„åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤ä¸ªå®šä¹‰
- en: '|'
  id: totrans-2024
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-2025
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â triangle-p
    &#124;'
  id: totrans-2026
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â triangle-pÂ Â Â |Â Â '
- en: '&#124; Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    &#124;'
  id: totrans-2027
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â Â Â |Â Â '
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 10)
    &#124;'
  id: totrans-2028
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 10)Â Â Â |Â Â '
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 20)
    &#124;'
  id: totrans-2029
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 20)Â Â Â |Â Â '
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 30Â 20)))
    &#124;'
  id: totrans-2030
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 30Â 20)))Â Â Â |Â Â '
- en: ''
  id: totrans-2031
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  id: totrans-2032
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  |'
- en: ''
  id: totrans-2033
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â square-p
    &#124;'
  id: totrans-2034
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â square-pÂ Â Â |Â Â '
- en: '&#124; Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    &#124;'
  id: totrans-2035
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â Â Â |Â Â '
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 10)
    &#124;'
  id: totrans-2036
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 10)Â Â Â |Â Â '
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 10)
    &#124;'
  id: totrans-2037
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 10)Â Â Â |Â Â '
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 20)
    &#124;'
  id: totrans-2038
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 20)Â Â Â |'
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 20)))
    &#124;'
  id: totrans-2039
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 20)))Â Â Â |Â Â '
- en: ''
  id: totrans-2040
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-2041
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: 'introduce a triangle and a square, just as the names say. Now you may wonder
    how to interpret ''() or ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  30  40))
    as polygons, and the answer is that they do not describe polygons. Because a polygon
    consists of at least three points, a good data representation of polygons is the
    collection of lists with at least three [Posn](part_one.html#%28tech._posn%29)s.Following
    the development of the data definition for non-empty lists of temperatures ([NEList-of-temperatures](#%28tech._nelist._of._temperature%29),
    in [Non-empty Lists](#%28part._sec~3alists~3ane%29)), formulating a data representation
    for polygons is straightforward:'
  id: totrans-2042
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç…§åç§°å¼•å…¥ä¸€ä¸ªä¸‰è§’å½¢å’Œä¸€ä¸ªæ­£æ–¹å½¢ã€‚ç°åœ¨ä½ å¯èƒ½æƒ³çŸ¥é“å¦‚ä½•è§£é‡Š'()'æˆ–([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  30  40))ä½œä¸ºå¤šè¾¹å½¢ï¼Œç­”æ¡ˆæ˜¯å®ƒä»¬å¹¶ä¸æè¿°å¤šè¾¹å½¢ã€‚å› ä¸ºå¤šè¾¹å½¢è‡³å°‘ç”±ä¸‰ä¸ªç‚¹ç»„æˆï¼Œå¤šè¾¹å½¢çš„å¥½æ•°æ®è¡¨ç¤ºæ˜¯è‡³å°‘åŒ…å«ä¸‰ä¸ª[Posn](part_one.html#%28tech._posn%29)sçš„åˆ—è¡¨é›†åˆã€‚åœ¨éç©ºæ¸©åº¦åˆ—è¡¨([NEList-of-temperatures](#%28tech._nelist._of._temperature%29)ï¼Œåœ¨[Non-empty
    Lists](#%28part._sec~3alists~3ane%29))çš„æ•°æ®å®šä¹‰å‘å±•ä¹‹åï¼Œåˆ¶å®šå¤šè¾¹å½¢çš„æ•°æ®è¡¨ç¤ºæ˜¯ç›´æ¥çš„ï¼š
- en: '| ;Â A Polygon is one of: |'
  id: totrans-2043
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªPolygonå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š|'
- en: '| ;Â â€“  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29))
    |'
  id: totrans-2044
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29))
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [Polygon](#%28tech._polygon%29))
    |'
  id: totrans-2045
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [Polygon](#%28tech._polygon%29))
    |'
- en: 'The first clause says that a list of three [Posn](part_one.html#%28tech._posn%29)s
    is a [Polygon](#%28tech._polygon%29), and the second clause says that [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ing
    a [Posn](part_one.html#%28tech._posn%29) onto some existing [Polygon](#%28tech._polygon%29)
    creates another one. Since this data definition is the very first to use [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    in one of its clauses, we spell it out with [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    just to make sure you see this conversion from an abbreviation to long-hand in
    this context:'
  id: totrans-2046
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€æ¡è§„åˆ™è¯´æ˜ä¸‰ä¸ª[Posn](part_one.html#%28tech._posn%29)çš„åˆ—è¡¨æ˜¯ä¸€ä¸ª[Polygon](#%28tech._polygon%29)ï¼Œç¬¬äºŒæ¡è§„åˆ™è¯´æ˜å°†ä¸€ä¸ª[Posn](part_one.html#%28tech._posn%29)æ·»åŠ åˆ°æŸä¸ªç°æœ‰çš„[Polygon](#%28tech._polygon%29)ä¸­ä¼šåˆ›å»ºå¦ä¸€ä¸ªã€‚ç”±äºè¿™ä¸ªæ•°æ®å®šä¹‰æ˜¯ç¬¬ä¸€ä¸ªåœ¨å…¶æ¡æ¬¾ä¸­ä½¿ç”¨[list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)çš„ï¼Œæˆ‘ä»¬ç”¨[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)æ¥æ˜ç¡®æŒ‡å‡ºï¼Œä»¥ç¡®ä¿ä½ åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­çœ‹åˆ°ä»ç¼©å†™åˆ°é•¿å†™çš„è½¬æ¢ï¼š
- en: '| ;Â a Polygon is one of: |'
  id: totrans-2047
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªPolygonå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š|'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ''())))
    |'
  id: totrans-2048
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ''())))
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [Polygon](#%28tech._polygon%29))
    |'
  id: totrans-2049
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; â€“ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    [Posn](part_one.html#%28tech._posn%29) [å¤šè¾¹å½¢](#%28tech._polygon%29)) |'
- en: The point is that a naively chosen data representationâ€”<wbr>plain lists of [Posn](part_one.html#%28tech._posn%29)sâ€”<wbr>may
    not properly represent the intended information. Revising the data definition
    during an initial exploration is normal; indeed, on occasion such revisions become
    necessary during the rest of the design process. As long as you stick to a systematic
    approach, though, changes to the data definition can naturally be propagated through
    the rest of the design.
  id: totrans-2050
  prefs: []
  type: TYPE_NORMAL
  zh: å…³é”®åœ¨äºä¸€ä¸ªå¤©çœŸé€‰æ‹©çš„æ•°æ®è¡¨ç¤ºâ€”â€”<wbr>ç®€å•çš„ [Posn](part_one.html#%28tech._posn%29) åˆ—è¡¨â€”â€”å¯èƒ½æ— æ³•æ­£ç¡®è¡¨ç¤ºé¢„æœŸçš„ä¿¡æ¯ã€‚åœ¨åˆå§‹æ¢ç´¢è¿‡ç¨‹ä¸­ä¿®è®¢æ•°æ®å®šä¹‰æ˜¯æ­£å¸¸çš„ï¼›å®é™…ä¸Šï¼Œåœ¨è®¾è®¡è¿‡ç¨‹çš„å…¶ä½™éƒ¨åˆ†ï¼Œè¿™æ ·çš„ä¿®è®¢æœ‰æ—¶å˜å¾—å¿…è¦ã€‚ç„¶è€Œï¼Œåªè¦åšæŒç³»ç»Ÿçš„æ–¹æ³•ï¼Œæ•°æ®å®šä¹‰çš„æ›´æ”¹å°±å¯ä»¥è‡ªç„¶åœ°ä¼ æ’­åˆ°è®¾è®¡çš„å…¶ä½™éƒ¨åˆ†ã€‚
- en: 'The second step calls for the signature, purpose statement, and header of the
    function. Since the problem statement mentions just one task and no other task
    is implied, we start with one function:'
  id: totrans-2051
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒæ­¥éœ€è¦å‡½æ•°çš„ç­¾åã€ç›®çš„é™ˆè¿°å’Œå¤´ä¿¡æ¯ã€‚ç”±äºé—®é¢˜é™ˆè¿°åªæåˆ°ä¸€ä¸ªä»»åŠ¡ï¼Œæ²¡æœ‰æš—ç¤ºå…¶ä»–ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»ä¸€ä¸ªå‡½æ•°å¼€å§‹ï¼š
- en: '| ;Â a plain background image |'
  id: totrans-2052
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ä¸€ä¸ªç®€å•çš„èƒŒæ™¯å›¾åƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MTÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 50Â 50))
    |'
  id: totrans-2053
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    MT ï¼ˆ[ç©ºåœºæ™¯](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)
    50 50ï¼‰|'
- en: '| Â  |'
  id: totrans-2054
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| |'
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Polygon](#%28tech._polygon%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-2055
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [å›¾åƒ](part_one.html#%28tech._image%29) [å¤šè¾¹å½¢](#%28tech._polygon%29) -> [å›¾åƒ](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â renders the given polygon p into img |'
  id: totrans-2056
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; å°†ç»™å®šçš„å¤šè¾¹å½¢ p æ¸²æŸ“åˆ° img ä¸­ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
  id: totrans-2057
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    ï¼ˆæ¸²æŸ“å¤šè¾¹å½¢ img pï¼‰|'
- en: '| Â Â img) |'
  id: totrans-2058
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆimgï¼‰|'
- en: 'The additional definition of MT is called for because it simplifies the formulation
    of examples.For the first example, we use the above-mentioned triangle. A quick
    look in the 2htdp/image teachpack suggests [scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    is the function needed to render the three lines for a triangle:'
  id: totrans-2059
  prefs: []
  type: TYPE_NORMAL
  zh: éœ€è¦é¢å¤–å®šä¹‰ MT æ˜¯å› ä¸ºå®ƒç®€åŒ–äº†ç¤ºä¾‹çš„è¡¨è¿°ã€‚å¯¹äºç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸Šé¢æåˆ°çš„ä¸‰è§’å½¢ã€‚å¿«é€ŸæŸ¥çœ‹ 2htdp/image æ•™å­¦åŒ…ï¼Œæˆ‘ä»¬å‘ç° [åœºæ™¯+è¡Œ](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    æ˜¯æ¸²æŸ“ä¸‰è§’å½¢ä¸‰æ¡è¾¹çš„å‡½æ•°ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-2060
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[æ£€æŸ¥æœŸæœ›](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (render-polyÂ MTÂ triangle-p) |'
  id: totrans-2061
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆæ¸²æŸ“å¤šè¾¹å½¢ MT ä¸‰è§’å½¢-pï¼‰|'
- en: '| Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  id: totrans-2062
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[åœºæ™¯+è¡Œ](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
- en: '| Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  id: totrans-2063
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[åœºæ™¯+è¡Œ](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
- en: '| Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)Â MTÂ 20Â 10Â 20Â 20Â "red")
    |'
  id: totrans-2064
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ[åœºæ™¯+è¡Œ](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    MT 20 10 20 20 "red"ï¼‰|'
- en: '| Â Â Â Â Â Â 20Â 20Â 30Â 20Â "red") |'
  id: totrans-2065
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ20 20 30 20 "red"ï¼‰|'
- en: '| Â Â Â Â 30Â 20Â 20Â 10Â "red")) |'
  id: totrans-2066
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ï¼ˆ30 20 20 10 "red"ï¼‰|'
- en: 'The innermostOf course, we experimented in DrRacketâ€™s interactions area to
    get this expression right. [scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    renders the line from the first to the second [Posn](part_one.html#%28tech._posn%29);
    the middle one uses the second and third [Posn](part_one.html#%28tech._posn%29);
    and the outermost [scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    connects the third and the first [Posn](part_one.html#%28tech._posn%29).Given
    that the first and smallest polygon is a triangle, then a rectangle or a square
    suggests itself as the second example. We use square-p:'
  id: totrans-2067
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œæˆ‘ä»¬åœ¨DrRacketçš„äº¤äº’åŒºåŸŸè¿›è¡Œäº†å®éªŒï¼Œä»¥ç¡®ä¿è¿™ä¸ªè¡¨è¾¾å¼çš„æ­£ç¡®æ€§ã€‚[scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    ä»ç¬¬ä¸€ä¸ªåˆ°ç¬¬äºŒä¸ª [Posn](part_one.html#%28tech._posn%29) ç»˜åˆ¶çº¿æ¡ï¼›ä¸­é—´çš„ä¸€ä¸ªä½¿ç”¨ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ª [Posn](part_one.html#%28tech._posn%29)ï¼›æœ€å¤–å±‚çš„
    [scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    è¿æ¥ç¬¬ä¸‰ä¸ªå’Œç¬¬ä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29)ã€‚é‰´äºç¬¬ä¸€ä¸ªå’Œæœ€å°çš„å¤šè¾¹å½¢æ˜¯ä¸‰è§’å½¢ï¼Œé‚£ä¹ˆçŸ©å½¢æˆ–æ­£æ–¹å½¢è‡ªç„¶æˆä¸ºç¬¬äºŒä¸ªä¾‹å­ã€‚æˆ‘ä»¬ä½¿ç”¨square-pï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-2068
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (render-polyÂ MTÂ square-p) |'
  id: totrans-2069
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (render-polyÂ MTÂ square-p) |'
- en: '| Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  id: totrans-2070
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
- en: '| Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  id: totrans-2071
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
- en: '| Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  id: totrans-2072
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)Â MTÂ 10Â 10Â 20Â 10Â "red")
    |'
  id: totrans-2073
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   Â Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)Â MTÂ 10Â 10Â 20Â 10Â "red")
    |'
- en: '| Â Â Â Â Â Â Â Â 20Â 10Â 20Â 20Â "red") |'
  id: totrans-2074
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   Â Â Â 20Â 10Â 20Â 20Â "red") |'
- en: '| Â Â Â Â Â Â 20Â 20Â 10Â 20Â "red") |'
  id: totrans-2075
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   Â Â Â 20Â 20Â 10Â 20Â "red") |'
- en: '| Â Â Â Â 10Â 20Â 10Â 10Â "red")) |'
  id: totrans-2076
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (10Â 20Â 10Â 10Â "red")) |'
- en: 'A square is just one more point than a triangle, and it is easy to render.
    You may also wish to draw these shapes on a piece of graph paper.The construction
    of the template poses a challenge. Specifically, the first and the second questions
    of [figureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29) ask whether the
    data definition differentiates distinct subsets and how to distinguish among them.
    While the data definition clearly sets apart triangles from all other polygons
    in the first clause, it is not immediately clear how to differentiate the two.
    Both clauses describe lists of [Posn](part_one.html#%28tech._posn%29)s. The first
    describes lists of three [Posn](part_one.html#%28tech._posn%29)s, while the second
    one describes lists of [Posn](part_one.html#%28tech._posn%29)s that have at least
    four items. Thus one alternative is to ask whether the given polygon is three
    items long:'
  id: totrans-2077
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£æ–¹å½¢æ¯”ä¸‰è§’å½¢å¤šä¸€ä¸ªç‚¹ï¼Œç»˜åˆ¶èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ã€‚ä½ å¯èƒ½è¿˜å¸Œæœ›åœ¨ä¸€å¼ åæ ‡çº¸ä¸Šç»˜åˆ¶è¿™äº›å½¢çŠ¶ã€‚æ¨¡æ¿çš„æ„å»ºæå‡ºäº†æŒ‘æˆ˜ã€‚å…·ä½“æ¥è¯´ï¼Œ[å›¾52](#%28counter._%28figure._fig~3atemplate-q%29%29)
    çš„å‰ä¸¤ä¸ªé—®é¢˜è¯¢é—®æ•°æ®å®šä¹‰æ˜¯å¦åŒºåˆ†äº†ä¸åŒçš„å­é›†ä»¥åŠå¦‚ä½•åŒºåˆ†å®ƒä»¬ã€‚è™½ç„¶æ•°æ®å®šä¹‰åœ¨ç¬¬ä¸€ä¸ªå­å¥ä¸­æ˜ç¡®å°†ä¸‰è§’å½¢ä¸å…¶ä»–æ‰€æœ‰å¤šè¾¹å½¢åŒºåˆ†å¼€æ¥ï¼Œä½†å¦‚ä½•åŒºåˆ†è¿™ä¸¤ä¸ªå­é›†å¹¶ä¸ç«‹å³æ˜äº†ã€‚ä¸¤ä¸ªå­å¥éƒ½æè¿°äº†
    [Posn](part_one.html#%28tech._posn%29) çš„åˆ—è¡¨ã€‚ç¬¬ä¸€ä¸ªæè¿°äº†ä¸‰ä¸ª [Posn](part_one.html#%28tech._posn%29)
    çš„åˆ—è¡¨ï¼Œè€Œç¬¬äºŒä¸ªæè¿°äº†è‡³å°‘æœ‰å››ä¸ªå…ƒç´ çš„ [Posn](part_one.html#%28tech._posn%29) åˆ—è¡¨ã€‚å› æ­¤ï¼Œä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆæ˜¯è¯¢é—®ç»™å®šçš„å¤šè¾¹å½¢æ˜¯å¦é•¿åº¦ä¸ºä¸‰ä¸ªé¡¹ï¼š
- en: ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)Â p)Â 3)
  id: totrans-2078
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)Â p)Â 3)
- en: Using the long-hand version of the first clause, that is,
  id: totrans-2079
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ç¬¬ä¸€ä¸ªå­å¥çš„é•¿ç‰ˆæœ¬ï¼Œå³ï¼Œ
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [Posn](part_one.html#%28tech._posn%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [Posn](part_one.html#%28tech._posn%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [Posn](part_one.html#%28tech._posn%29)Â '())))
  id: totrans-2080
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [Posn](part_one.html#%28tech._posn%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [Posn](part_one.html#%28tech._posn%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [Posn](part_one.html#%28tech._posn%29)Â '())))
- en: 'suggests a second way to formulate the first condition, namely, checking whether
    the given [Polygon](#%28tech._polygon%29) is empty after using three [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    functions:'
  id: totrans-2081
  prefs: []
  type: TYPE_NORMAL
  zh: æå‡ºäº†ä¸€ç§åˆ¶å®šç¬¬ä¸€ä¸ªæ¡ä»¶çš„ç¬¬äºŒç§æ–¹æ³•ï¼Œå³æ£€æŸ¥åœ¨ä¸‰æ¬¡ä½¿ç”¨[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)å‡½æ•°åï¼Œç»™å®šçš„[å¤šè¾¹å½¢](#%28tech._polygon%29)æ˜¯å¦ä¸ºç©ºï¼š
- en: ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))))
  id: totrans-2082
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))))
- en: Since all [Polygon](#%28tech._polygon%29)s consist of at least three [Posn](part_one.html#%28tech._posn%29)s,
    using [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    three times is legal. Unlike [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29),
    [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    is a primitive, easy-to-understand operation with a clear operational meaning.
    It selects the second field in a [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    structure and that is all it does.
  id: totrans-2083
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæ‰€æœ‰[å¤šè¾¹å½¢](#%28tech._polygon%29)éƒ½ç”±è‡³å°‘ä¸‰ä¸ª[ç‚¹](part_one.html#%28tech._posn%29)ç»„æˆï¼Œå› æ­¤ä½¿ç”¨[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)ä¸‰æ¬¡æ˜¯åˆæ³•çš„ã€‚ä¸[é•¿åº¦](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)ä¸åŒï¼Œ[rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)æ˜¯ä¸€ä¸ªåŸå§‹çš„ã€æ˜“äºç†è§£çš„è¿ç®—ï¼Œå…·æœ‰æ˜ç¡®çš„æ“ä½œæ„ä¹‰ã€‚å®ƒé€‰æ‹©[cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ç»“æ„ä¸­çš„ç¬¬äºŒä¸ªå­—æ®µï¼Œä»…æ­¤è€Œå·²ã€‚
- en: 'It is truly better to formulate conditions in terms of built-in predicates
    and selectors than your own (recursive) functions. See [Intermezzo 5: The Cost
    of Computation](i5-6.html) for an explanation.'
  id: totrans-2084
  prefs: []
  type: TYPE_NORMAL
  zh: çœŸçš„æ˜¯ç”¨å†…ç½®è°“è¯å’Œé€‰æ‹©å™¨æ¥åˆ¶å®šæ¡ä»¶ï¼Œè€Œä¸æ˜¯ä½ è‡ªå·±çš„ï¼ˆé€’å½’ï¼‰å‡½æ•°è¦å¥½å¾—å¤šã€‚å‚è§[é—´å¥æ›²5ï¼šè®¡ç®—çš„ä»£ä»·](i5-6.html)ä»¥è·å–è§£é‡Šã€‚
- en: 'The rest of the questions in [figureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29)
    have direct answers, and thus we get this template:'
  id: totrans-2085
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾52](#%28counter._%28figure._fig~3atemplate-q%29%29)ä¸­çš„å…¶ä½™é—®é¢˜éƒ½æœ‰ç›´æ¥ç­”æ¡ˆï¼Œå› æ­¤æˆ‘ä»¬å¾—åˆ°è¿™ä¸ªæ¨¡æ¿ï¼š'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
  id: totrans-2086
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-2087
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))))
    |'
  id: totrans-2088
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [[empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p)))) |'
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â imgÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-2089
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    p)[...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    img[...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-2090
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)
    p)[...] |'
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  id: totrans-2091
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)
    p)[...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-2092
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    [...]([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    p)[...] |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (render-polyÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-2093
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    render-poly img ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p)[...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: 'Because p describes a triangle in the first clause, it must consist of exactly
    three [Posn](part_one.html#%28tech._posn%29)s, which are extracted via [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29),
    [second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29),
    and [third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29).
    In the second clause, p consists of a [Posn](part_one.html#%28tech._posn%29) and
    a Polygon, justifying ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    and ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p).
    The former extracts a [Posn](part_one.html#%28tech._posn%29) from p, the latter
    a Polygon. We therefore add a self-referential function call around it; we must
    also keep in mind that dealing with ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    in this clause and the three [Posn](part_one.html#%28tech._posn%29)s in the first
    clause may demand the design of an auxiliary function.Now we are ready to focus
    on the function definition, dealing with one clause at a time. The first clause
    concerns triangles, which suggests a straightforward answer. Specifically, there
    are three [Posn](part_one.html#%28tech._posn%29)s and render-poly should connect
    the three in an empty scene of 50 by 50 pixels. Given that [Posn](part_one.html#%28tech._posn%29)
    is a separate data definition, we get an obvious wish-list entry:'
  id: totrans-2094
  prefs: []
  type: TYPE_NORMAL
  zh: å› ä¸º p æè¿°äº†ä¸€ä¸ªåœ¨ç¬¬ä¸€ä¸ªå­å¥ä¸­çš„ä¸‰è§’å½¢ï¼Œå®ƒå¿…é¡»æ°å¥½ç”±ä¸‰ä¸ª [Posn](part_one.html#%28tech._posn%29) ç»„æˆï¼Œè¿™äº›
    [Posn](part_one.html#%28tech._posn%29) é€šè¿‡ [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)ã€[second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)
    å’Œ [third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)
    æå–ã€‚åœ¨ç¬¬äºŒä¸ªå­å¥ä¸­ï¼Œp ç”±ä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29) å’Œä¸€ä¸ª Polygon ç»„æˆï¼Œå³ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    å’Œ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)ã€‚å‰è€…ä»
    p ä¸­æå–ä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29)ï¼Œåè€…æå–ä¸€ä¸ª Polygonã€‚å› æ­¤ï¼Œæˆ‘ä»¬å›´ç»•å®ƒæ·»åŠ ä¸€ä¸ªè‡ªå¼•ç”¨å‡½æ•°è°ƒç”¨ï¼›æˆ‘ä»¬è¿˜éœ€è¦è®°ä½ï¼Œåœ¨è¿™ä¸ªå­å¥ä¸­å¤„ç†
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    ä»¥åŠåœ¨ç¬¬ä¸€ä¸ªå­å¥ä¸­çš„ä¸‰ä¸ª [Posn](part_one.html#%28tech._posn%29) å¯èƒ½éœ€è¦è®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚ç°åœ¨æˆ‘ä»¬å‡†å¤‡ä¸“æ³¨äºå‡½æ•°å®šä¹‰ï¼Œä¸€æ¬¡å¤„ç†ä¸€ä¸ªå­å¥ã€‚ç¬¬ä¸€ä¸ªå­å¥æ¶‰åŠä¸‰è§’å½¢ï¼Œè¿™æš—ç¤ºäº†ä¸€ä¸ªç›´æ¥çš„ç­”æ¡ˆã€‚å…·ä½“æ¥è¯´ï¼Œæœ‰ä¸‰ä¸ª
    [Posn](part_one.html#%28tech._posn%29)ï¼Œrender-poly åº”è¯¥åœ¨ä¸€ä¸ª 50x50 åƒç´ çš„ç©ºåœºæ™¯ä¸­å°†å®ƒä»¬è¿æ¥èµ·æ¥ã€‚é‰´äº
    [Posn](part_one.html#%28tech._posn%29) æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®å®šä¹‰ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªæ˜æ˜¾çš„æ„¿æœ›æ¸…å•æ¡ç›®ï¼š
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-2095
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
- en: '| ;Â draws a red line from [Posn](part_one.html#%28tech._posn%29)  p to [Posn](part_one.html#%28tech._posn%29)  q
    into im |'
  id: totrans-2096
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä» [Posn](part_one.html#%28tech._posn%29)  p åˆ° [Posn](part_one.html#%28tech._posn%29)  q
    ç»˜åˆ¶ä¸€æ¡çº¢è‰²çº¿æ¡åˆ° im |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-lineÂ imÂ pÂ q)
    |'
  id: totrans-2097
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-lineÂ imÂ pÂ q)
    |'
- en: '| Â Â im) |'
  id: totrans-2098
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â im) |'
- en: 'Using this function, the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause in render-poly is this:'
  id: totrans-2099
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œrender-poly ä¸­çš„ç¬¬ä¸€ä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    å­å¥å¦‚ä¸‹ï¼š
- en: '| (render-line |'
  id: totrans-2100
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (render-line |'
- en: '| Â Â (render-line |'
  id: totrans-2101
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (render-line |'
- en: '| Â Â Â Â (render-lineÂ MTÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))
    |'
  id: totrans-2102
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (render-lineÂ MTÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))
    |'
- en: '| Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p)Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p))
    |'
  id: totrans-2103
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p)Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p))
    |'
- en: '| Â Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p))
    |'
  id: totrans-2104
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p))
    |'
- en: 'This expression obviously renders the given [Polygon](#%28tech._polygon%29)
    p as a triangle by drawing a line from the first to the second, the second to
    the third, and the third to the first [Posn](part_one.html#%28tech._posn%29).The
    second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause is about [Polygon](#%28tech._polygon%29)s that have been extended with
    one [Posn](part_one.html#%28tech._posn%29). In the template, we find two expressions,
    and, following [figureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29),
    we remind ourselves of what these expressions compute:'
  id: totrans-2105
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè¡¨è¾¾å¼æ˜¾ç„¶é€šè¿‡ä»ç¬¬ä¸€ä¸ªåˆ°ç¬¬äºŒä¸ªã€ç¬¬äºŒä¸ªåˆ°ç¬¬ä¸‰ä¸ªã€ç¬¬ä¸‰ä¸ªåˆ°ç¬¬ä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29) ç”»çº¿ï¼Œå°†ç»™å®šçš„
    [Polygon](#%28tech._polygon%29) p è½¬æ¢æˆäº†ä¸€ä¸ªä¸‰è§’å½¢ã€‚ç¬¬äºŒä¸ª [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    æ¡ä»¶æ˜¯å…³äºå·²ç»æ‰©å±•äº†ä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29) çš„ [Polygon](#%28tech._polygon%29)ã€‚åœ¨æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä¸¤ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶ä¸”æ ¹æ®
    [å›¾ 53](#%28counter._%28figure._fig~3adefinition-q%29%29)ï¼Œæˆ‘ä»¬æé†’è‡ªå·±è¿™äº›è¡¨è¾¾å¼è®¡ç®—çš„å†…å®¹ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    extracts the first [Posn](part_one.html#%28tech._posn%29);
  id: totrans-2106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    æå–ç¬¬ä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29)ï¼›
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    extracts the [Polygon](#%28tech._polygon%29) from p; and
  id: totrans-2107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    ä» p ä¸­æå– [Polygon](#%28tech._polygon%29)ï¼›ä»¥åŠ
- en: (render-poly  img  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p))
    renders ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p),
    which is what the purpose statement of the function says.
  id: totrans-2108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (render-poly  img  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p))
    æ¸²æŸ“ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)ï¼Œè¿™æ­£æ˜¯å‡½æ•°çš„ç›®çš„å£°æ˜ã€‚
- en: 'The question is how to use these pieces to render the given [Polygon](#%28tech._polygon%29)
    p.One idea that may come to mind is that ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    consists of at least three [Posn](part_one.html#%28tech._posn%29)s. It is therefore
    possible to extract at least one [Posn](part_one.html#%28tech._posn%29) from this
    embedded Polygon and to connect ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    with this additional point. Here is what this idea looks like with BSL+ code:'
  id: totrans-2109
  prefs: []
  type: TYPE_NORMAL
  zh: é—®é¢˜æ˜¯å¦‚ä½•ä½¿ç”¨è¿™äº›ç‰‡æ®µæ¥æ¸²æŸ“ç»™å®šçš„ [Polygon](#%28tech._polygon%29) pã€‚ä¸€ä¸ªå¯èƒ½çš„æƒ³æ³•æ˜¯ï¼Œ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    è‡³å°‘åŒ…å«ä¸‰ä¸ª [Posn](part_one.html#%28tech._posn%29)ã€‚å› æ­¤ï¼Œå¯ä»¥ä»è¿™ä¸ªåµŒå¥—çš„ Polygon ä¸­æå–è‡³å°‘ä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29)ï¼Œå¹¶å°†
    ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    ä¸è¿™ä¸ªé¢å¤–çš„ç‚¹è¿æ¥èµ·æ¥ã€‚ä»¥ä¸‹æ˜¯ç”¨ BSL+ ä»£ç è¡¨ç¤ºè¿™ä¸ªæƒ³æ³•çš„æ ·å­ï¼š
- en: '| (render-lineÂ (render-poly  MT  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
  id: totrans-2110
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([render-line](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._render-line%29%29)
    ([render-poly](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._render-poly%29%29)
    MT ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p)) ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    p) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))
    |'
  id: totrans-2111
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)
    p)) |'
- en: 'As mentioned, the highlighted sub-expression renders the embedded [Polygon](#%28tech._polygon%29)
    in an empty 50 by 50 scene. The use of render-line adds one line to this scene,
    from the first to the second [Posn](part_one.html#%28tech._posn%29) of p.Our analysis
    suggests a rather natural, complete function definition:'
  id: totrans-2112
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å‰æ‰€è¿°ï¼Œé«˜äº®æ˜¾ç¤ºçš„å­è¡¨è¾¾å¼åœ¨50x50çš„ç©ºåœºæ™¯ä¸­æ¸²æŸ“äº†åµŒå…¥çš„[å¤šè¾¹å½¢](#%28tech._polygon%29)ã€‚ä½¿ç”¨`render-line`å‘åœºæ™¯æ·»åŠ ä¸€è¡Œï¼Œä»pçš„ç¬¬ä¸€ä¸ªåˆ°ç¬¬äºŒä¸ª[ä½ç½®](part_one.html#%28tech._posn%29)ã€‚æˆ‘ä»¬çš„åˆ†æè¡¨æ˜ï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å½“è‡ªç„¶ã€å®Œæ•´çš„å‡½æ•°å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
  id: totrans-2113
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    ([render-poly](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._render-poly%29%29)
    img p) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-2114
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))))
    |'
  id: totrans-2115
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p)))) |'
- en: '| Â Â Â Â Â (render-line |'
  id: totrans-2116
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([render-line](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._render-line%29%29)
    |'
- en: '| Â Â Â Â Â Â Â (render-line |'
  id: totrans-2117
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([render-line](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._render-line%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â (render-lineÂ MTÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))
    |'
  id: totrans-2118
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([render-line](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._render-line%29%29)
    MT ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    p) ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)
    p)) |'
- en: '| Â Â Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p)Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p))
    |'
  id: totrans-2119
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)
    p) ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)
    p)) |'
- en: '| Â Â Â Â Â Â Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p))]
    |'
  id: totrans-2120
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)
    p) ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    p))] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-2121
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â (render-lineÂ (render-polyÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))
    |'
  id: totrans-2122
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([render-line](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._render-line%29%29)
    ([render-poly](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._render-poly%29%29)
    img ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p)) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
  id: totrans-2123
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))]))
    |'
  id: totrans-2124
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([ç¬¬äºŒä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))]))
    |'
- en: 'Designing render-line is the kind of problem that you solved in the first part
    of the book. Hence we just provide the final definition so that you can test the
    above function:'
  id: totrans-2125
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡`render-line`æ˜¯è¿™æ ·çš„é—®é¢˜ï¼Œä½ åœ¨ä¹¦çš„ç¬¬ä¸€ä¸ªéƒ¨åˆ†å°±è§£å†³äº†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªæä¾›æœ€ç»ˆå®šä¹‰ï¼Œä»¥ä¾¿ä½ å¯ä»¥æµ‹è¯•ä¸Šè¿°å‡½æ•°ï¼š
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-2126
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [å›¾ç‰‡](part_one.html#%28tech._image%29)  [ä½ç½®](part_one.html#%28tech._posn%29)  [ä½ç½®](part_one.html#%28tech._posn%29)
    -> [å›¾ç‰‡](part_one.html#%28tech._image%29) |'
- en: '| ;Â renders a line from p to q into img |'
  id: totrans-2127
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†ç‚¹påˆ°ç‚¹qçš„çº¿æ¸²æŸ“åˆ°imgä¸­ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-lineÂ imgÂ pÂ q)
    |'
  id: totrans-2128
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-lineÂ imgÂ pÂ q)
    |'
- en: '| Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  id: totrans-2129
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([åœºæ™¯+çº¿](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
- en: '| Â Â Â Â img |'
  id: totrans-2130
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â img |'
- en: '| Â Â Â Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â q)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â q)
    |'
  id: totrans-2131
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([ä½ç½®X](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â ([ä½ç½®Y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â ([ä½ç½®X](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â q)Â ([ä½ç½®Y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â q)
    |'
- en: '| Â Â Â Â "red")) |'
  id: totrans-2132
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â "çº¢è‰²")) |'
- en: Stop! Develop a test for render-line.
  id: totrans-2133
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä¸º`render-line`å¼€å‘ä¸€ä¸ªæµ‹è¯•ã€‚
- en: Lastly, we must test the functions. The tests for render-poly fail. On the one
    hand, the test failure is fortunate because it is the purpose of tests to find
    problems before they affect regular consumers. On the other hand, the flaw is
    unfortunate because we followed the design recipe, we made fairly natural choices,
    and yet the function doesnâ€™t work.
  id: totrans-2134
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œæˆ‘ä»¬å¿…é¡»æµ‹è¯•è¿™äº›å‡½æ•°ã€‚`render-poly`çš„æµ‹è¯•å¤±è´¥äº†ã€‚ä¸€æ–¹é¢ï¼Œæµ‹è¯•å¤±è´¥æ˜¯å¹¸è¿çš„ï¼Œå› ä¸ºæµ‹è¯•çš„ç›®çš„å°±æ˜¯åœ¨é—®é¢˜å½±å“åˆ°æ™®é€šæ¶ˆè´¹è€…ä¹‹å‰å‘ç°å®ƒä»¬ã€‚å¦ä¸€æ–¹é¢ï¼Œè¿™ä¸ªç¼ºé™·æ˜¯ä¸å¹¸çš„ï¼Œå› ä¸ºæˆ‘ä»¬éµå¾ªäº†è®¾è®¡é…æ–¹ï¼Œæˆ‘ä»¬åšå‡ºäº†ç›¸å½“è‡ªç„¶çš„é€‰æ‹©ï¼Œä½†å‡½æ•°ä»ç„¶æ— æ³•å·¥ä½œã€‚
- en: 'Stop! Why do you think the tests fail? Draw an image of the pieces in the template
    of render-poly. Then draw the line that combines them. Alternatively, experiment
    in DrRacketâ€™s interactions area:'
  id: totrans-2135
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä½ è®¤ä¸ºæµ‹è¯•ä¸ºä»€ä¹ˆå¤±è´¥ï¼Ÿåœ¨`render-poly`çš„æ¨¡æ¿ä¸­ç»˜åˆ¶è¿™äº›éƒ¨ä»¶çš„å›¾åƒã€‚ç„¶åç»˜åˆ¶è¿æ¥å®ƒä»¬çš„çº¿ã€‚æˆ–è€…ï¼Œåœ¨DrRacketçš„äº¤äº’åŒºåŸŸè¿›è¡Œå®éªŒï¼š
- en: '| > (render-polyÂ MTÂ square-p) |'
  id: totrans-2136
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (render-polyÂ MTÂ square-p) |'
- en: '| ![image](../Images/3f715fd3eb4b6d48ead9b4db496da2a1.png) |'
  id: totrans-2137
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![å›¾åƒ](../Images/3f715fd3eb4b6d48ead9b4db496da2a1.png) |'
- en: 'The image shows that render-poly connects the three dots of ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    and then connects ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    to the first point of ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p),
    that is, ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)  p).
    You can easily validate this claim with an interaction that uses ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  square-p)
    directly as input for render-poly:'
  id: totrans-2138
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾åƒæ˜¾ç¤º `render-poly` è¿æ¥äº† ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p) çš„ä¸‰ä¸ªç‚¹ï¼Œç„¶åè¿æ¥ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    p) åˆ° ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p) çš„ç¬¬ä¸€ä¸ªç‚¹ï¼Œå³ ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)
    p)ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    square-p) ç›´æ¥ä½œä¸º `render-poly` çš„è¾“å…¥æ¥è½»æ¾éªŒè¯è¿™ä¸€è¯´æ³•ï¼š
- en: '| > (render-polyÂ MTÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â square-p))
    |'
  id: totrans-2139
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > (render-polyÂ MTÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â square-p))
    |'
- en: '| ![image](../Images/0c97250f4c55f16eacfa00feb2342065.png) |'
  id: totrans-2140
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/0c97250f4c55f16eacfa00feb2342065.png) |'
- en: 'In addition, you may wonder what render-poly would draw if we added another
    point, say, ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  40  30),
    to the original square:'
  id: totrans-2141
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œä½ å¯èƒ½æƒ³çŸ¥é“å¦‚æœæˆ‘ä»¬å‘åŸå§‹æ­£æ–¹å½¢æ·»åŠ å¦ä¸€ä¸ªç‚¹ï¼Œæ¯”å¦‚ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    40 30)ï¼Œ`render-poly` ä¼šç»˜åˆ¶ä»€ä¹ˆï¼š
- en: '|'
  id: totrans-2142
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: ''
  id: totrans-2143
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > (render-poly &#124;'
  id: totrans-2144
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124; > (render-poly &#124;'
- en: '&#124; Â Â Â Â MT &#124;'
  id: totrans-2145
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;    MT &#124;'
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 40Â 30)Â square-p))
    &#124;'
  id: totrans-2146
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '&#124;    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    40 30) square-p)) &#124;'
- en: ''
  id: totrans-2147
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  id: totrans-2148
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '|'
- en: '| ![image](../Images/cf6c756a889653e779e961ec7128e70e.png) |'
  id: totrans-2149
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ![image](../Images/cf6c756a889653e779e961ec7128e70e.png) |'
- en: Instead of the desired pentagon, render-poly always draws the triangle at the
    end of the given [Polygon](#%28tech._polygon%29) and otherwise connects the [Posn](part_one.html#%28tech._posn%29)s
    that precede the triangle.
  id: totrans-2150
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸æœŸæœ›çš„äº”è¾¹å½¢ä¸åŒï¼Œ`render-poly` æ€»æ˜¯åœ¨ç»™å®šçš„ [Polygon](#%28tech._polygon%29) çš„æœ«ç«¯ç»˜åˆ¶ä¸‰è§’å½¢ï¼Œå¹¶ä¸”å°†ä¸‰è§’å½¢ä¹‹å‰çš„
    [Posn](part_one.html#%28tech._posn%29) è¿æ¥èµ·æ¥ã€‚
- en: While the experiments confirm the problems of our design, they also suggest
    that the function is â€œalmost correct.â€ It connects the successive dots specified
    by a list of [Posn](part_one.html#%28tech._posn%29)s, and then it draws a line
    from the first to the last [Posn](part_one.html#%28tech._posn%29) of the trailing
    triangle. If it skipped this last step, the function would just â€œconnect the dotsâ€
    and thus draw an â€œopenâ€ polygon. By connecting the first and the last point, it
    could then complete its task.
  id: totrans-2151
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡å®éªŒç¡®è®¤äº†æˆ‘ä»¬çš„è®¾è®¡é—®é¢˜ï¼Œä½†å®ƒä»¬ä¹Ÿè¡¨æ˜è¯¥å‡½æ•°â€œå‡ ä¹æ­£ç¡®â€ã€‚å®ƒè¿æ¥ç”±ä¸€ç³»åˆ— [Posn](part_one.html#%28tech._posn%29)
    æŒ‡å®šçš„è¿ç»­ç‚¹ï¼Œç„¶åä»ç¬¬ä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29) åˆ°æœ€åä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29)
    ç»˜åˆ¶ä¸‰è§’å½¢çš„çº¿ã€‚å¦‚æœå®ƒè·³è¿‡è¿™ä¸€æœ€åä¸€æ­¥ï¼Œè¯¥å‡½æ•°å°†åªæ˜¯â€œè¿æ¥ç‚¹â€ï¼Œä»è€Œç»˜åˆ¶ä¸€ä¸ªâ€œå¼€æ”¾â€çš„å¤šè¾¹å½¢ã€‚é€šè¿‡è¿æ¥ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªç‚¹ï¼Œå®ƒå°±å¯ä»¥å®Œæˆå…¶ä»»åŠ¡ã€‚
- en: 'Put differently, the analysis of our failure suggests a two-step solution:'
  id: totrans-2152
  prefs: []
  type: TYPE_NORMAL
  zh: æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å¤±è´¥çš„åˆ†æè¡¨æ˜æœ‰ä¸¤ä¸ªæ­¥éª¤çš„è§£å†³æ–¹æ¡ˆï¼š
- en: Solve a more general problem.
  id: totrans-2153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è§£å†³ä¸€ä¸ªæ›´ä¸€èˆ¬çš„é—®é¢˜ã€‚
- en: Use the solution to this general problem to solve the original one.
  id: totrans-2154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ¥è§£å†³åŸå§‹é—®é¢˜ã€‚
- en: 'We start with the statement for the general problem:'
  id: totrans-2155
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä»ä¸€èˆ¬é—®é¢˜çš„é™ˆè¿°å¼€å§‹ï¼š
- en: Sample Problem Design a function that draws connections between a given bunch
    of dots and into a given scene.
  id: totrans-2156
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨ç»™å®šçš„ç‚¹ç¾¤å’Œç»™å®šçš„åœºæ™¯ä¹‹é—´ç»˜åˆ¶è¿æ¥ã€‚
- en: 'Although the design of render-poly almost solves this problem, we design this
    function mostly from scratch. First, we need a data definition. Connecting the
    dots makes no sense unless we have at least a couple of dots. To keep things simple,
    we go with at least one dot:'
  id: totrans-2157
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶render-polyçš„è®¾è®¡å‡ ä¹è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†æˆ‘ä»¬ä¸»è¦ä»å¤´å¼€å§‹è®¾è®¡è¿™ä¸ªå‡½æ•°ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®å®šä¹‰ã€‚å¦‚æœæ²¡æœ‰è‡³å°‘å‡ ä¸ªç‚¹ï¼Œè¿æ¥ç‚¹å°±æ²¡æœ‰æ„ä¹‰ã€‚ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦ä¸€ä¸ªç‚¹ï¼š
- en: '| ;Â An NELoP is one of: |'
  id: totrans-2158
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An NELoP is one of: |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ''())
    |'
  id: totrans-2159
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ''())
    |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [NELoP](#%28tech._nelop%29))
    |'
  id: totrans-2160
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [NELoP](#%28tech._nelop%29))
    |'
- en: 'Second, we formulate a signature, a purpose statement, and a header for a â€œconnect
    the dotsâ€ function:'
  id: totrans-2161
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒï¼Œæˆ‘ä»¬ä¸ºâ€œè¿æ¥ç‚¹â€å‡½æ•°åˆ¶å®šäº†ä¸€ä¸ªç­¾åã€ä¸€ä¸ªç›®çš„é™ˆè¿°å’Œä¸€ä¸ªå¤´ï¼š
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [NELoP](#%28tech._nelop%29) ->
    [Image](part_one.html#%28tech._image%29) |'
  id: totrans-2162
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Image](part_one.html#%28tech._image%29)  [NELoP](#%28tech._nelop%29) ->
    [Image](part_one.html#%28tech._image%29) |'
- en: '| ;Â connects the dots in p by rendering lines in img |'
  id: totrans-2163
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â connects the dots in p by rendering lines in img |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
  id: totrans-2164
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
- en: '| Â Â MT) |'
  id: totrans-2165
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â MT) |'
- en: 'Third, we adapt the examples for render-poly for this new function. As our
    failure analysis says, the function connects the first [Posn](part_one.html#%28tech._posn%29)
    on p to the second one, the second one to the third, the third to the fourth,
    and so on, all the way to the last one, which isnâ€™t connected to anything. Here
    is the adaptation of the first example, a list of three [Posn](part_one.html#%28tech._posn%29)s:'
  id: totrans-2166
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸‰ï¼Œæˆ‘ä»¬å°†render-polyçš„ç¤ºä¾‹ä¿®æ”¹ä¸ºè¿™ä¸ªæ–°å‡½æ•°ã€‚æ­£å¦‚æˆ‘ä»¬çš„å¤±è´¥åˆ†ææ‰€è¯´ï¼Œè¯¥å‡½æ•°å°†pä¸Šçš„ç¬¬ä¸€ä¸ª[Posn](part_one.html#%28tech._posn%29)è¿æ¥åˆ°ç¬¬äºŒä¸ªï¼Œç¬¬äºŒä¸ªè¿æ¥åˆ°ç¬¬ä¸‰ä¸ªï¼Œç¬¬ä¸‰ä¸ªè¿æ¥åˆ°ç¬¬å››ä¸ªï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æœ€åä¸€ä¸ªï¼Œå®ƒæ²¡æœ‰è¿æ¥åˆ°ä»»ä½•ä¸œè¥¿ã€‚ä»¥ä¸‹æ˜¯ç¬¬ä¸€ä¸ªç¤ºä¾‹çš„ä¿®æ”¹ï¼Œä¸€ä¸ªåŒ…å«ä¸‰ä¸ª[Posn](part_one.html#%28tech._posn%29)çš„åˆ—è¡¨ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (connect-dotsÂ MTÂ triangle-p)
    |'
  id: totrans-2167
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (connect-dotsÂ MTÂ triangle-p)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  id: totrans-2168
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)Â MTÂ 20Â 20Â 30Â 20Â "red")
    |'
  id: totrans-2169
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)Â MTÂ 20Â 20Â 30Â 20Â "red")
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 20Â 10Â 20Â 20Â "red")) |'
  id: totrans-2170
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 20Â 10Â 20Â 20Â "red")) |'
- en: 'The expected value is an image with two lines: one from the first [Posn](part_one.html#%28tech._posn%29)
    to the second one, and another one from the second to the third [Posn](part_one.html#%28tech._posn%29).'
  id: totrans-2171
  prefs: []
  type: TYPE_NORMAL
  zh: é¢„æœŸå€¼æ˜¯ä¸€ä¸ªåŒ…å«ä¸¤æ¡çº¿çš„å›¾åƒï¼šä¸€æ¡ä»ç¬¬ä¸€ä¸ª[Posn](part_one.html#%28tech._posn%29)åˆ°ç¬¬äºŒä¸ªï¼Œå¦ä¸€æ¡ä»ç¬¬äºŒä¸ªåˆ°ç¬¬ä¸‰ä¸ª[Posn](part_one.html#%28tech._posn%29)ã€‚
- en: ExerciseÂ 191\. Adapt the second example for the render-poly function to connect-dots.
  id: totrans-2172
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 191ã€‚å°†ç¬¬äºŒä¸ªç¤ºä¾‹çš„render-polyå‡½æ•°ä¿®æ”¹ä¸ºconnect-dotsã€‚
- en: 'Fourth, we use the template for functions that process non-empty lists:'
  id: totrans-2173
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬å››ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤„ç†éç©ºåˆ—è¡¨çš„å‡½æ•°æ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
  id: totrans-2174
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-2175
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  id: totrans-2176
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([å‰©ä½™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-2177
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (connect-dotsÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-2178
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (connect-dotsÂ imgÂ ([å‰©ä½™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'The template has two clauses: one for lists of one [Posn](part_one.html#%28tech._posn%29)
    and the second one for lists with more than one. Since there is at least one [Posn](part_one.html#%28tech._posn%29)
    in both cases, the template contains ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    in both clauses; the second one also contains (connect-dots  img  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p))
    to remind us of the self-reference in the second clause of the data definition.The
    fifth and central step is to turn the template into a function definition. Since
    the first clause is the simplest one, we start with it. As we have already said,
    it is impossible to connect anything when the given list contains only one [Posn](part_one.html#%28tech._posn%29).
    Hence, the function just returns MT from the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause. For the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause, let us remind ourselves of what the template expressions compute:'
  id: totrans-2179
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡æ¿åŒ…å«ä¸¤ä¸ªå­å¥ï¼šä¸€ä¸ªç”¨äºåŒ…å«ä¸€ä¸ª[Posn](part_one.html#%28tech._posn%29)çš„åˆ—è¡¨ï¼Œå¦ä¸€ä¸ªç”¨äºåŒ…å«å¤šä¸ª[Posn](part_one.html#%28tech._posn%29)çš„åˆ—è¡¨ã€‚ç”±äºåœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹éƒ½è‡³å°‘æœ‰ä¸€ä¸ª[Posn](part_one.html#%28tech._posn%29)ï¼Œå› æ­¤æ¨¡æ¿åœ¨ä¸¤ä¸ªå­å¥ä¸­éƒ½åŒ…å«([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    p)ï¼›ç¬¬äºŒä¸ªå­å¥è¿˜åŒ…å«(connect-dots  img  ([å‰©ä½™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p))æ¥æé†’æˆ‘ä»¬åœ¨æ•°æ®å®šä¹‰çš„ç¬¬äºŒå­å¥ä¸­çš„è‡ªå¼•ç”¨ã€‚ç¬¬äº”å’Œä¸­å¿ƒæ­¥éª¤æ˜¯å°†æ¨¡æ¿è½¬æ¢ä¸ºå‡½æ•°å®šä¹‰ã€‚ç”±äºç¬¬ä¸€ä¸ªå­å¥æ˜¯æœ€ç®€å•çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»è¿™é‡Œå¼€å§‹ã€‚æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„ï¼Œå½“ç»™å®šçš„åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ª[Posn](part_one.html#%28tech._posn%29)æ—¶ï¼Œæ— æ³•è¿æ¥ä»»ä½•ä¸œè¥¿ã€‚å› æ­¤ï¼Œå‡½æ•°ä»…ä»ç¬¬ä¸€ä¸ª[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)å­å¥è¿”å›MTã€‚å¯¹äºç¬¬äºŒä¸ª[cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)å­å¥ï¼Œè®©æˆ‘ä»¬æé†’è‡ªå·±æ¨¡æ¿è¡¨è¾¾å¼è®¡ç®—çš„å†…å®¹ï¼š
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    extracts the first [Posn](part_one.html#%28tech._posn%29);
  id: totrans-2180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    æå–ç¬¬ä¸€ä¸ª [Posn](part_one.html#%28tech._posn%29)ï¼›
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    extracts the [NELoP](#%28tech._nelop%29) from p; and
  id: totrans-2181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p) ä» p ä¸­æå– [NELoP](#%28tech._nelop%29)ï¼›å¹¶ä¸”
- en: (connect-dots  img  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p))
    connects the dots in ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    by rendering lines in img.
  id: totrans-2182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (connect-dots  img  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p))
    é€šè¿‡åœ¨ img ä¸­ç»˜åˆ¶çº¿æ¡è¿æ¥ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p) ä¸­çš„ç‚¹ã€‚
- en: 'From our first attempt to design render-poly, we know connect-dots needs to
    add one line to the result of (connect-dots  img  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)),
    namely, from ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    to ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)  p).
    We know that p contains a second [Posn](part_one.html#%28tech._posn%29) because
    otherwise the evaluation of [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    would have picked the first clause.Putting everything together, we get the following
    definition:'
  id: totrans-2183
  prefs: []
  type: TYPE_NORMAL
  zh: ä»æˆ‘ä»¬ç¬¬ä¸€æ¬¡å°è¯•è®¾è®¡ render-poly å¼€å§‹ï¼Œæˆ‘ä»¬çŸ¥é“ connect-dots éœ€è¦åœ¨ (connect-dots img ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    p)) çš„ç»“æœä¸­æ·»åŠ ä¸€è¡Œï¼Œå³ä» ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    p) åˆ° ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)
    p)ã€‚æˆ‘ä»¬çŸ¥é“ p åŒ…å«ä¸€ä¸ªç¬¬äºŒä¸ª [Posn](part_one.html#%28tech._posn%29)ï¼Œå› ä¸ºå¦åˆ™ [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    çš„è¯„ä¼°å°†é€‰æ‹©ç¬¬ä¸€ä¸ªå­å¥ã€‚å°†æ‰€æœ‰è¿™äº›æ”¾åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
  id: totrans-2184
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-2185
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â img]
    |'
  id: totrans-2186
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â img]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  id: totrans-2187
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
- en: '| Â Â Â Â Â (render-line |'
  id: totrans-2188
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â (render-line |'
- en: '| Â Â Â Â Â Â Â (connect-dotsÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))
    |'
  id: totrans-2189
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â (connect-dotsÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))
    |'
- en: '| Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
  id: totrans-2190
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
- en: '| Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))]))
    |'
  id: totrans-2191
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))]))
    |'
- en: This definition looks simpler than the faulty version of render-poly, even though
    it copes with two more lists of [Posn](part_one.html#%28tech._posn%29)s than render-poly.This
    argument is informal. If you ever need a formal argument for such claims about
    the relationship between sets or functions, you will need to study logic. Indeed,
    this bookâ€™s design process is deeply informed by logic, and a course on logic
    in computation is a natural complement. In general, logic is to computing what
    analysis is to engineering.
  id: totrans-2192
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªå®šä¹‰çœ‹èµ·æ¥æ¯”render-polyçš„é”™è¯¯ç‰ˆæœ¬ç®€å•ï¼Œå°½ç®¡å®ƒå¤„ç†äº†æ¯”render-polyæ›´å¤šçš„[ä½ç½®](part_one.html#%28tech._posn%29)åˆ—è¡¨ã€‚è¿™ä¸ªè®ºç‚¹æ˜¯éæ­£å¼çš„ã€‚å¦‚æœä½ éœ€è¦å…³äºé›†åˆæˆ–å‡½æ•°ä¹‹é—´å…³ç³»çš„æ­¤ç±»å£°æ˜çš„æ­£å¼è®ºæ®ï¼Œä½ éœ€è¦å­¦ä¹ é€»è¾‘ã€‚ç¡®å®ï¼Œè¿™æœ¬ä¹¦çš„è®¾è®¡è¿‡ç¨‹æ·±å—é€»è¾‘çš„å½±å“ï¼Œè®¡ç®—é€»è¾‘è¯¾ç¨‹æ˜¯ä¸€ä¸ªè‡ªç„¶çš„è¡¥å……ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé€»è¾‘å¯¹äºè®¡ç®—å°±åƒåˆ†æå¯¹äºå·¥ç¨‹ä¸€æ ·ã€‚
- en: Conversely, we say that connect-dots generalizes render-poly. Every input for
    the latter is also an input for the former. Or in terms of data definitions, every
    [Polygon](#%28tech._polygon%29) is also an [NELoP](#%28tech._nelop%29). But, there
    are many [NELoP](#%28tech._nelop%29)s that are not [Polygon](#%28tech._polygon%29)s.
    To be precise, all lists of [Posn](part_one.html#%28tech._posn%29)s that contain
    two items or one belong to [NELoP](#%28tech._nelop%29) but not to [Polygon](#%28tech._polygon%29).
    The key insight for you is, however, that just because a function has to deal
    with more inputs than another function does not mean that the former is more complex
    than the latter; generalizations often simplify function definitions.
  id: totrans-2193
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸åï¼Œæˆ‘ä»¬è¯´connect-dotsæ˜¯render-polyçš„æ³›åŒ–ã€‚åè€…çš„æ¯ä¸ªè¾“å…¥ä¹Ÿæ˜¯å‰è€…çš„è¾“å…¥ã€‚æˆ–è€…ç”¨æ•°æ®å®šä¹‰çš„è¯è¯´ï¼Œæ¯ä¸ª[å¤šè¾¹å½¢](#%28tech._polygon%29)ä¹Ÿæ˜¯[NELoP](#%28tech._nelop%29)ã€‚ä½†æ˜¯ï¼Œæœ‰è®¸å¤š[NELoP](#%28tech._nelop%29)ä¸æ˜¯[å¤šè¾¹å½¢](#%28tech._polygon%29)ã€‚ä¸ºäº†ç²¾ç¡®èµ·è§ï¼Œæ‰€æœ‰åŒ…å«ä¸¤ä¸ªæˆ–ä¸€ä¸ªå…ƒç´ çš„[ä½ç½®](part_one.html#%28tech._posn%29)åˆ—è¡¨éƒ½å±äº[NELoP](#%28tech._nelop%29)ä½†ä¸å±äº[å¤šè¾¹å½¢](#%28tech._polygon%29)ã€‚ç„¶è€Œï¼Œå¯¹ä½ æ¥è¯´ï¼Œå…³é”®çš„è®¤è¯†æ˜¯ï¼Œä»…ä»…å› ä¸ºä¸€ä¸ªå‡½æ•°å¿…é¡»å¤„ç†æ¯”å¦ä¸€ä¸ªå‡½æ•°æ›´å¤šçš„è¾“å…¥ï¼Œå¹¶ä¸æ„å‘³ç€å‰è€…æ¯”åè€…æ›´å¤æ‚ï¼›æ³›åŒ–é€šå¸¸ç®€åŒ–å‡½æ•°å®šä¹‰ã€‚
- en: 'As spelled out above, render-poly can use connect-dots to connect all successive
    [Posn](part_one.html#%28tech._posn%29)s of the given [Polygon](#%28tech._polygon%29);
    to complete its task, it must then add a line from the first to the last [Posn](part_one.html#%28tech._posn%29)
    of the given [Polygon](#%28tech._polygon%29). In terms of code, this just means
    composing two functions: connect-dots and render-line, but we also need a function
    to extract the last [Posn](part_one.html#%28tech._posn%29) from the [Polygon](#%28tech._polygon%29).
    Once we are granted this wish, the definition of render-poly is a one-liner:'
  id: totrans-2194
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚ä¸Šæ‰€è¿°ï¼Œrender-polyå¯ä»¥ä½¿ç”¨connect-dotsè¿æ¥ç»™å®š[å¤šè¾¹å½¢](#%28tech._polygon%29)çš„æ‰€æœ‰è¿ç»­[ä½ç½®](part_one.html#%28tech._posn%29)ï¼›ä¸ºäº†å®Œæˆå…¶ä»»åŠ¡ï¼Œå®ƒå¿…é¡»ç„¶åä»ç»™å®š[å¤šè¾¹å½¢](#%28tech._polygon%29)çš„ç¬¬ä¸€ä¸ªåˆ°æœ€åçš„[ä½ç½®](part_one.html#%28tech._posn%29)æ·»åŠ ä¸€æ¡çº¿ã€‚ä»ä»£ç çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä»…ä»…æ„å‘³ç€ç»„åˆä¸¤ä¸ªå‡½æ•°ï¼šconnect-dotså’Œrender-lineï¼Œä½†æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå‡½æ•°æ¥ä»[å¤šè¾¹å½¢](#%28tech._polygon%29)ä¸­æå–æœ€åä¸€ä¸ª[ä½ç½®](part_one.html#%28tech._posn%29)ã€‚ä¸€æ—¦æˆ‘ä»¬å¾—åˆ°è¿™ä¸ªæ„¿æœ›ï¼Œrender-polyçš„å®šä¹‰å°±æ˜¯ä¸€è¡Œï¼š
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Polygon](#%28tech._polygon%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-2195
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [å›¾åƒ](part_one.html#%28tech._image%29)  [å¤šè¾¹å½¢](#%28tech._polygon%29) -> [å›¾åƒ](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â adds an image of p to img |'
  id: totrans-2196
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å‘imgæ·»åŠ pçš„å›¾åƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
  id: totrans-2197
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ç»˜åˆ¶å¤šè¾¹å½¢Â imgÂ p)
    |'
- en: '| Â Â (render-lineÂ (connect-dotsÂ imgÂ p) |'
  id: totrans-2198
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (ç»˜åˆ¶çº¿æ¡Â (è¿æ¥ç‚¹Â imgÂ p) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
  id: totrans-2199
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (lastÂ p))) |'
  id: totrans-2200
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([æœ€åä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._last%29%29)Â p)))
    |'
- en: 'Formulating the wish-list entry for last is straightforward:'
  id: totrans-2201
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºlaståˆ¶å®šæ„¿æœ›æ¸…å•æ¡ç›®æ˜¯ç›´æ¥çš„ï¼š
- en: '| ;Â [Polygon](#%28tech._polygon%29) -> [Posn](part_one.html#%28tech._posn%29)
    |'
  id: totrans-2202
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [å¤šè¾¹å½¢](#%28tech._polygon%29) -> [ä½ç½®](part_one.html#%28tech._posn%29) |'
- en: '| ;Â extracts the last item from p |'
  id: totrans-2203
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»pä¸­æå–æœ€åä¸€ä¸ªå…ƒç´  |'
- en: 'Then again, it is clear that last could be a generally useful function and
    we might be better off designing it for inputs from [NELoP](#%28tech._nelop%29):'
  id: totrans-2204
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œå†æ¬¡æ˜ç¡®çš„æ˜¯ï¼Œæœ€åä¸€ä¸ªå¯èƒ½æ˜¯ä¸€ä¸ªé€šç”¨çš„æœ‰ç”¨å‡½æ•°ï¼Œæˆ‘ä»¬å¯èƒ½æ›´é€‚åˆä¸º[NELoP](#%28tech._nelop%29)çš„è¾“å…¥æ¥è®¾è®¡å®ƒï¼š
- en: '| ;Â [NELoP](#%28tech._nelop%29) -> [Posn](part_one.html#%28tech._posn%29) |'
  id: totrans-2205
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [NELoP](#%28tech._nelop%29) -> [ä½ç½®](part_one.html#%28tech._posn%29) |'
- en: '| ;Â extracts the last item from p |'
  id: totrans-2206
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»pä¸­æå–æœ€åä¸€ä¸ªå…ƒç´  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (lastÂ p)
    |'
  id: totrans-2207
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (lastÂ p)
    |'
- en: '| Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p))
    |'
  id: totrans-2208
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p))
    |'
- en: 'Stop! Why is it acceptable to use [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    for the stub definition of last?ExerciseÂ 192\. Argue why it is acceptable to use
    last on [Polygon](#%28tech._polygon%29)s. Also argue why you may adapt the template
    for connect-dots to last:'
  id: totrans-2209
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä¸ºä»€ä¹ˆå¯ä»¥ä½¿ç”¨ [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    æ¥å®šä¹‰ last çš„å ä½ç¬¦ï¼Ÿç»ƒä¹  192ã€‚è®ºè¯ä¸ºä»€ä¹ˆåœ¨ [å¤šè¾¹å½¢](#%28tech._polygon%29) ä¸Šä½¿ç”¨ last æ˜¯å¯æ¥å—çš„ã€‚ä¹Ÿè®ºè¯ä¸ºä»€ä¹ˆä½ å¯ä»¥ä¸º
    connect-dots çš„æ¨¡æ¿è°ƒæ•´ lastï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (lastÂ p)
    |'
  id: totrans-2210
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (lastÂ p)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-2211
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  id: totrans-2212
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([å‰©ä½™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (lastÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-2213
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[å¦åˆ™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([ç¬¬ä¸€ä¸ª](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (lastÂ ([å‰©ä½™](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: Finally, develop examples for last, turn them into tests, and ensure that the
    definition of last in [figureÂ 73](#%28counter._%28figure._fig~3adraw-poly%29%29)
    works on your examples.
  id: totrans-2214
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œä¸º last å¼€å‘ç¤ºä¾‹ï¼Œå°†å®ƒä»¬è½¬æ¢ä¸ºæµ‹è¯•ï¼Œå¹¶ç¡®ä¿ [å›¾ 73](#%28counter._%28figure._fig~3adraw-poly%29%29)
    ä¸­ last çš„å®šä¹‰åœ¨ä½ çš„ç¤ºä¾‹ä¸Šå·¥ä½œã€‚
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Polygon](#%28tech._polygon%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-2215
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [å›¾åƒ](part_one.html#%28tech._image%29)  [å¤šè¾¹å½¢](#%28tech._polygon%29) -> [å›¾åƒ](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â adds a corner of p to img |'
  id: totrans-2216
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°† p çš„ä¸€ä¸ªè§’æ·»åŠ åˆ° img |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
  id: totrans-2217
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
- en: '| Â Â (render-lineÂ (connect-dotsÂ imgÂ p)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â (lastÂ p)))
    |'
  id: totrans-2218
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (render-lineÂ (connect-dotsÂ imgÂ p)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â (lastÂ p)))
    |'
- en: '| Â  |'
  id: totrans-2219
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [NELoP](#%28tech._nelop%29) ->
    [Image](part_one.html#%28tech._image%29) |'
  id: totrans-2220
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [å›¾åƒ](part_one.html#%28tech._image%29)  [NELoP](#%28tech._nelop%29) -> [å›¾åƒ](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â connects the [Posn](part_one.html#%28tech._posn%29)s in p in an image |'
  id: totrans-2221
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; å°†å›¾åƒä¸­ p ä¸­çš„ä½ç½®è¿æ¥èµ·æ¥ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
  id: totrans-2222
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-2223
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â img]
    |'
  id: totrans-2224
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â img]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (render-lineÂ (connect-dotsÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))
    |'
  id: totrans-2225
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (render-lineÂ (connect-dotsÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
  id: totrans-2226
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))]))
    |'
  id: totrans-2227
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))]))
    |'
- en: '| Â  |'
  id: totrans-2228
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  id: totrans-2229
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [å›¾åƒ](part_one.html#%28tech._image%29)  [ä½ç½®](part_one.html#%28tech._posn%29)  [ä½ç½®](part_one.html#%28tech._posn%29)
    -> [å›¾åƒ](part_one.html#%28tech._image%29) |'
- en: '| ;Â draws a red line from [Posn](part_one.html#%28tech._posn%29)  p to [Posn](part_one.html#%28tech._posn%29)  q
    into im |'
  id: totrans-2230
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; åœ¨å›¾åƒ im ä¸­ä»ä½ç½® p åˆ°ä½ç½® q ç»˜åˆ¶ä¸€æ¡çº¢è‰²çº¿æ¡ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-lineÂ imÂ pÂ q)
    |'
  id: totrans-2231
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-lineÂ imÂ pÂ q)
    |'
- en: '| Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  id: totrans-2232
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
- en: '| Â Â Â Â imÂ ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â q)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â q)Â "red"))
    |'
  id: totrans-2233
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â imÂ ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â q)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â q)Â "red"))
    |'
- en: '| Â  |'
  id: totrans-2234
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Polygon](#%28tech._polygon%29) -> [Posn](part_one.html#%28tech._posn%29)
    |'
  id: totrans-2235
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [å¤šè¾¹å½¢](#%28tech._polygon%29) -> [ä½ç½®](part_one.html#%28tech._posn%29) |'
- en: '| ;Â extracts the last item from p |'
  id: totrans-2236
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ä» p ä¸­æå–æœ€åä¸€ä¸ªé¡¹ç›® |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (lastÂ p)
    |'
  id: totrans-2237
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (lastÂ p)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-2238
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))))Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p)]
    |'
  id: totrans-2239
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))))Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (lastÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))]))
    |'
  id: totrans-2240
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (lastÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))]))
    |'
- en: ''
  id: totrans-2241
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 73: Drawing a polygon'
  id: totrans-2242
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 73ï¼šç»˜åˆ¶å¤šè¾¹å½¢
- en: In summary, the development of render-poly naturally points us to consider the
    general problem of connecting a list of successive dots. We can then solve the
    original problem by defining a function that composes the general function with
    other auxiliary functions. The program therefore consists of a relatively straightforward
    main functionâ€”<wbr>render-polyâ€”<wbr>and complex auxiliary functions that perform
    most of the work. You will see time and again that this kind of design approach
    is common and a good method for designing and organizing programs.
  id: totrans-2243
  prefs: []
  type: TYPE_NORMAL
  zh: æ€»ç»“æ¥è¯´ï¼Œrender-poly çš„å‘å±•è‡ªç„¶å¼•å¯¼æˆ‘ä»¬è€ƒè™‘è¿æ¥ä¸€ç³»åˆ—è¿ç»­ç‚¹çš„ä¸€èˆ¬é—®é¢˜ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªå°†é€šç”¨å‡½æ•°ä¸å…¶ä»–è¾…åŠ©å‡½æ•°ç»„åˆçš„å‡½æ•°æ¥è§£å†³åŸå§‹é—®é¢˜ã€‚å› æ­¤ï¼Œç¨‹åºç”±ä¸€ä¸ªç›¸å¯¹ç›´æ¥çš„ä¸»å‡½æ•°â€”â€”render-polyâ€”â€”å’Œæ‰§è¡Œå¤§éƒ¨åˆ†å·¥ä½œçš„å¤æ‚è¾…åŠ©å‡½æ•°ç»„æˆã€‚ä½ å°†ä¸€æ¬¡åˆä¸€æ¬¡åœ°çœ‹åˆ°è¿™ç§è®¾è®¡æ–¹æ³•å¾ˆå¸¸è§ï¼Œå¹¶ä¸”æ˜¯è®¾è®¡å’Œç»„ç»‡ç¨‹åºçš„å¥½æ–¹æ³•ã€‚
- en: 'ExerciseÂ 193\. Here are two more ideas for defining render-poly:'
  id: totrans-2244
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  193. è¿™é‡Œæ˜¯å®šä¹‰ render-poly çš„ä¸¤ä¸ªæ›´å¤šæƒ³æ³•ï¼š
- en: render-poly could [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    the last item of p onto p and then call connect-dots.
  id: totrans-2245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: render-poly å¯ä»¥å°† p çš„æœ€åä¸€ä¸ªå…ƒç´  cons åˆ° p ä¸Šï¼Œç„¶åè°ƒç”¨ connect-dotsã€‚
- en: render-poly could add the first item of p to the end of p via a version of add-at-end
    that works on [Polygon](#%28tech._polygon%29)s.
  id: totrans-2246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: render-poly å¯ä»¥é€šè¿‡ä¸€ä¸ªåœ¨ [Polygon](#%28tech._polygon%29)s ä¸Šå·¥ä½œçš„ add-at-end ç‰ˆæœ¬ï¼Œå°† p
    çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ° p çš„æœ«å°¾ã€‚
- en: Use both ideas to define render-poly; make sure both definitions pass the test
    cases.
  id: totrans-2247
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸¤ä¸ªæƒ³æ³•æ¥å®šä¹‰ render-polyï¼›ç¡®ä¿ä¸¤ä¸ªå®šä¹‰éƒ½èƒ½é€šè¿‡æµ‹è¯•ç”¨ä¾‹ã€‚
- en: ExerciseÂ 194\. Modify connect-dots so that it consumes an additional [Posn](part_one.html#%28tech._posn%29)
    to which the last [Posn](part_one.html#%28tech._posn%29) is connected. Then modify
    render-poly to use this new version of connect-dots.
  id: totrans-2248
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  194. ä¿®æ”¹ connect-dotsï¼Œä½¿å…¶æ¶ˆè€—ä¸€ä¸ªé¢å¤–çš„ [Posn](part_one.html#%28tech._posn%29)ï¼Œè¯¥ä½ç½®ä¸æœ€åä¸€ä¸ª
    [Posn](part_one.html#%28tech._posn%29) ç›¸è¿æ¥ã€‚ç„¶åä¿®æ”¹ render-poly ä»¥ä½¿ç”¨è¿™ä¸ªæ–°çš„ connect-dots
    ç‰ˆæœ¬ã€‚
- en: Naturally, functions such as last are available in a full-fledged programming
    language, and something like render-poly is available in the 2htdp/image teachpack.
    If you are wondering why we just designed these functions, consider the titles
    of both the book and this section. The goal is not (just) to design useful functions
    but to study how code is designed systematically. Specifically, this section is
    about the idea of generalization in the design process; for more on this idea
    see [Abstraction](part_three.html) and [Accumulators](part_six.html).
  id: totrans-2249
  prefs: []
  type: TYPE_NORMAL
  zh: è‡ªç„¶åœ°ï¼Œåƒlastè¿™æ ·çš„å‡½æ•°åœ¨å®Œæ•´çš„ç¼–ç¨‹è¯­è¨€ä¸­æ˜¯å¯ç”¨çš„ï¼Œè€Œåƒrender-polyè¿™æ ·çš„å‡½æ•°åœ¨2htdp/image teachpackä¸­ä¹Ÿæ˜¯å¯ç”¨çš„ã€‚å¦‚æœä½ æƒ³çŸ¥é“æˆ‘ä»¬ä¸ºä»€ä¹ˆåªè®¾è®¡äº†è¿™äº›å‡½æ•°ï¼Œè€ƒè™‘ä¸€ä¸‹è¿™æœ¬ä¹¦å’Œè¿™ä¸ªç« èŠ‚çš„æ ‡é¢˜ã€‚ç›®æ ‡ä¸æ˜¯ï¼ˆä»…ä»…ï¼‰è®¾è®¡æœ‰ç”¨çš„å‡½æ•°ï¼Œè€Œæ˜¯ç ”ç©¶ä»£ç æ˜¯å¦‚ä½•ç³»ç»Ÿæ€§åœ°è®¾è®¡çš„ã€‚å…·ä½“æ¥è¯´ï¼Œæœ¬èŠ‚æ˜¯å…³äºè®¾è®¡è¿‡ç¨‹ä¸­çš„æ³›åŒ–æ€æƒ³ï¼›å…³äºè¿™ä¸ªæƒ³æ³•çš„æ›´å¤šå†…å®¹ï¼Œè¯·å‚é˜…[æŠ½è±¡](part_three.html)å’Œ[ç´¯åŠ å™¨](part_six.html)ã€‚
- en: '12Projects: Lists[ğŸ”—](#(part._ch~3aproj-lists) "Link to here")'
  id: totrans-2250
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 12é¡¹ç›®ï¼šåˆ—è¡¨[ğŸ”—](#(part._ch~3aproj-lists) "é“¾æ¥åˆ°è¿™é‡Œ")
- en: 'This chapter presents several extended exercises, all of which aim to solidify
    your understanding of the elements of design: the design of batchThis chapter
    relies on the 2htdp/batch-io teachpack. and interactive programs, design by composition,
    design wish lists, and the design recipe for functions. The first section covers
    problems involving real-world data: English dictionaries and iTunes libraries.
    A word-games problem requires two sections: one to illustrate design by composition,
    the other to tackle the heart of the problem. The remaining sections are about
    games and finite-state machines.'
  id: totrans-2251
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ç« ä»‹ç»äº†å‡ ä¸ªæ‰©å±•ç»ƒä¹ ï¼Œæ‰€æœ‰è¿™äº›ç»ƒä¹ çš„ç›®çš„æ˜¯å·©å›ºä½ å¯¹è®¾è®¡å…ƒç´ çš„ç†è§£ï¼šæ‰¹å¤„ç†å’Œäº¤äº’å¼ç¨‹åºçš„è®¾è®¡ã€ç»„åˆå¼è®¾è®¡ã€è®¾è®¡æ„¿æœ›æ¸…å•ä»¥åŠå‡½æ•°çš„è®¾è®¡é…æ–¹ã€‚ç¬¬ä¸€éƒ¨åˆ†æ¶µç›–äº†æ¶‰åŠç°å®ä¸–ç•Œæ•°æ®çš„é—®é¢˜ï¼šè‹±è¯­å­—å…¸å’ŒiTunesåº“ã€‚ä¸€ä¸ªå•è¯æ¸¸æˆé—®é¢˜éœ€è¦ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªéƒ¨åˆ†ç”¨äºè¯´æ˜ç»„åˆå¼è®¾è®¡ï¼Œå¦ä¸€ä¸ªéƒ¨åˆ†ç”¨äºè§£å†³é—®é¢˜çš„æ ¸å¿ƒã€‚å…¶ä½™éƒ¨åˆ†æ˜¯å…³äºæ¸¸æˆå’Œæœ‰é™çŠ¶æ€æœºã€‚
- en: '12.1Real-World Data: Dictionaries[ğŸ”—](#(part._sec~3adict) "Link to here")'
  id: totrans-2252
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 12.1ç°å®ä¸–ç•Œæ•°æ®ï¼šå­—å…¸[ğŸ”—](#(part._sec~3adict) "é“¾æ¥åˆ°è¿™é‡Œ")
- en: Information in the real world tends to come in large quantities, which is why
    it makes so much sense to use programs for processing it. For example, a dictionary
    does not just contain a dozen words, but hundreds of thousands. When you want
    to process such large pieces of information, you must carefully design the program
    using small examples. Once youFor performance concerns, see [Generative Recursion](part_five.html).
    From here to there, the focus is on designing programs systematically so that
    you can then explore performance problems properly. have convinced yourself that
    the programs work properly, you run them on the real-world data to get real results.
    If the program is too slow to process this large quantity of data, reflect on
    each function and how it works. Question whether you can eliminate any redundant
    computations.
  id: totrans-2253
  prefs: []
  type: TYPE_NORMAL
  zh: ç°å®ä¸–ç•Œä¸­çš„ä¿¡æ¯å¾€å¾€ä»¥å¤§é‡å‡ºç°ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨ç¨‹åºæ¥å¤„ç†å®ƒéå¸¸æœ‰æ„ä¹‰ã€‚ä¾‹å¦‚ï¼Œå­—å…¸ä¸ä»…ä»…åŒ…å«å‡ åä¸ªå•è¯ï¼Œè€Œæ˜¯åŒ…å«æ•°åä¸‡ä¸ªã€‚å½“ä½ æƒ³è¦å¤„ç†è¿™æ ·å¤§é‡çš„ä¿¡æ¯æ—¶ï¼Œä½ å¿…é¡»ä»”ç»†è®¾è®¡ç¨‹åºï¼Œä½¿ç”¨å°ä¾‹å­ã€‚ä¸€æ—¦ä½ ç¡®ä¿¡ç¨‹åºèƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä½ å°±å¯ä»¥åœ¨ç°å®ä¸–ç•Œçš„æ•°æ®ä¸Šè¿è¡Œå®ƒä»¬ä»¥è·å¾—çœŸå®çš„ç»“æœã€‚å¦‚æœç¨‹åºå¤„ç†è¿™æ ·å¤§é‡çš„æ•°æ®å¤ªæ…¢ï¼Œé‚£ä¹ˆåæ€æ¯ä¸ªå‡½æ•°åŠå…¶å·¥ä½œæ–¹å¼ã€‚è´¨ç–‘ä½ æ˜¯å¦å¯ä»¥æ¶ˆé™¤ä»»ä½•å†—ä½™çš„è®¡ç®—ã€‚
- en: '| ;Â On OS X: |'
  id: totrans-2254
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨OS Xä¸Šï¼š |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â LOCATIONÂ "/usr/share/dict/words")
    |'
  id: totrans-2255
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â LOCATIONÂ "/usr/share/dict/words")
    |'
- en: '| ;Â On LINUX: /usr/share/dict/words or /var/lib/dict/words |'
  id: totrans-2256
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨LINUXä¸Šï¼š/usr/share/dict/words æˆ– /var/lib/dict/words |'
- en: '| ;Â On WINDOWS: borrow the word file from your Linux friend |'
  id: totrans-2257
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åœ¨WINDOWSä¸Šï¼šä»ä½ çš„Linuxæœ‹å‹é‚£é‡Œå€Ÿå•è¯æ–‡ä»¶ |'
- en: '| Â  |'
  id: totrans-2258
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A Dictionary is a [List-of-strings](#%28tech._list._of._string%29). |'
  id: totrans-2259
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å­—å…¸æ˜¯ä¸€ä¸ª[å­—ç¬¦ä¸²åˆ—è¡¨](#%28tech._list._of._string%29). |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â AS-LISTÂ ([read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)Â LOCATION))
    |'
  id: totrans-2260
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â AS-LISTÂ ([read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)Â LOCATION))
    |'
- en: ''
  id: totrans-2261
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 74: Reading a dictionary'
  id: totrans-2262
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾74ï¼šè¯»å–å­—å…¸
- en: '[FigureÂ 74](#%28counter._%28figure._fig~3areading-a-dictionary%29%29) displays
    the one line of code needed to read in an entire dictionary of the English language.
    To get an idea of how large such dictionaries are, adapt the code from the figure
    for your particular computer and use [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)
    to determine how many words are in your dictionary. There are 235,886 words in
    ours today, July 25, 2017.'
  id: totrans-2263
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾ 74](#%28counter._%28figure._fig~3areading-a-dictionary%29%29) æ˜¾ç¤ºäº†è¯»å–æ•´ä¸ªè‹±è¯­å­—å…¸æ‰€éœ€çš„ä¸€è¡Œä»£ç ã€‚ä¸ºäº†äº†è§£è¿™æ ·çš„å­—å…¸æœ‰å¤šå¤§ï¼Œè¯·æ ¹æ®ä½ çš„è®¡ç®—æœºè°ƒæ•´å›¾ä¸­çš„ä»£ç ï¼Œå¹¶ä½¿ç”¨
    [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)
    ç¡®å®šä½ çš„å­—å…¸ä¸­æœ‰å¤šå°‘å•è¯ã€‚ä»Šå¤©ï¼Œ2017 å¹´ 7 æœˆ 25 æ—¥ï¼Œæˆ‘ä»¬çš„å­—å…¸ä¸­æœ‰ 235,886 ä¸ªå•è¯ã€‚'
- en: 'In the following exercises, letters play an important role. You may wish to
    add the following to the top of your program in addition to your adaptation of
    [figureÂ 74](#%28counter._%28figure._fig~3areading-a-dictionary%29%29):'
  id: totrans-2264
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä»¥ä¸‹ç»ƒä¹ ä¸­ï¼Œå­—æ¯æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ã€‚ä½ å¯èƒ½éœ€è¦åœ¨ç¨‹åºçš„é¡¶éƒ¨æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œé™¤äº†ä½ ä¸º [å›¾ 74](#%28counter._%28figure._fig~3areading-a-dictionary%29%29)
    çš„æ”¹ç¼–ä¹‹å¤–ï¼š
- en: '| ;Â A Letter is one of the following [1String](part_one.html#%28tech._1string%29)s:
    |'
  id: totrans-2265
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ª Letter æ˜¯ä»¥ä¸‹ [1String](part_one.html#%28tech._1string%29) ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“  "a" |'
  id: totrans-2266
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  "a" |'
- en: '| ;Â â€“ ... |'
  id: totrans-2267
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“ ... |'
- en: '| ;Â â€“  "z" |'
  id: totrans-2268
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  "z" |'
- en: '| ;Â or, equivalently, a [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    of this list: |'
  id: totrans-2269
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æˆ–ç­‰ä»·åœ°ï¼Œè¿™ä¸ªåˆ—è¡¨çš„ [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)ï¼š
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â LETTERS
    |'
  id: totrans-2270
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â LETTERS
    |'
- en: '| Â Â ([explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29)Â "abcdefghijklmnopqrstuvwxyz"))
    |'
  id: totrans-2271
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29)Â "abcdefghijklmnopqrstuvwxyz"))
    |'
- en: Hint Use [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    to formulate examples and tests for the exercises.
  id: totrans-2272
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼šä½¿ç”¨ [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    æ¥åˆ¶å®šç»ƒä¹ çš„ç¤ºä¾‹å’Œæµ‹è¯•ã€‚
- en: ExerciseÂ 195\. Design the function starts-with#, which consumes a [Letter](#%28tech._letter%29)
    and [Dictionary](#%28tech._dictionary%29) and then counts how many words in the
    given [Dictionary](#%28tech._dictionary%29) start with the given [Letter](#%28tech._letter%29).
    Once you know that your function works, determine how many words start with "e"
    in your computerâ€™s dictionary and how many with "z".
  id: totrans-2273
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  195\. è®¾è®¡ä¸€ä¸ªåä¸º starts-with# çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª [Letter](#%28tech._letter%29) å’Œ [Dictionary](#%28tech._dictionary%29)ï¼Œç„¶åè®¡ç®—ç»™å®š
    [Dictionary](#%28tech._dictionary%29) ä¸­æœ‰å¤šå°‘å•è¯ä»¥ç»™å®šçš„ [Letter](#%28tech._letter%29)
    å¼€å¤´ã€‚ä¸€æ—¦ä½ çŸ¥é“ä½ çš„å‡½æ•°å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œç¡®å®šåœ¨ä½ çš„è®¡ç®—æœºå­—å…¸ä¸­å¤šå°‘å•è¯ä»¥ "e" å¼€å¤´ï¼Œä»¥åŠå¤šå°‘ä»¥ "z" å¼€å¤´ã€‚
- en: ExerciseÂ 196\. Design count-by-letter. The function consumes a [Dictionary](#%28tech._dictionary%29)
    and counts how often each letter is used as the first one of a word in the given
    dictionary. Its result is a list of Letter-Counts, a piece of data that combines
    letters and counts.
  id: totrans-2274
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  196\. è®¾è®¡ count-by-letter å‡½æ•°ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ª [Dictionary](#%28tech._dictionary%29)ï¼Œå¹¶è®¡ç®—ç»™å®šå­—å…¸ä¸­æ¯ä¸ªå­—æ¯ä½œä¸ºå•è¯ç¬¬ä¸€ä¸ªå­—æ¯çš„ä½¿ç”¨é¢‘ç‡ã€‚å…¶ç»“æœæ˜¯
    Letter-Counts åˆ—è¡¨ï¼Œè¿™æ˜¯ä¸€ç§ç»“åˆå­—æ¯å’Œè®¡æ•°çš„ç»„åˆæ•°æ®ã€‚
- en: Once your function is designed, determine how many words appear for all letters
    in your computerâ€™s dictionary.
  id: totrans-2275
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ä½ çš„å‡½æ•°è®¾è®¡å®Œæˆï¼Œç¡®å®šåœ¨ä½ çš„è®¡ç®—æœºå­—å…¸ä¸­æ‰€æœ‰å­—æ¯å‡ºç°çš„å•è¯æ•°é‡ã€‚
- en: ExerciseÂ 197\. Design most-frequent. The function consumes a [Dictionary](#%28tech._dictionary%29).
    It produces the [Letter-Count](#%28tech._letter._count%29) for the letter that
    occurs most often as the first one in the given [Dictionary](#%28tech._dictionary%29).
  id: totrans-2276
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  197\. è®¾è®¡ most-frequent å‡½æ•°ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ª [Dictionary](#%28tech._dictionary%29)ï¼Œå¹¶äº§ç”Ÿæœ€å¸¸ä½œä¸ºç»™å®š
    [Dictionary](#%28tech._dictionary%29) ä¸­ç¬¬ä¸€ä¸ªå­—æ¯å‡ºç°çš„ [Letter-Count](#%28tech._letter._count%29)ã€‚
- en: What is the most frequently used letter in your computerâ€™s dictionary and how
    often is it used?
  id: totrans-2277
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä½ çš„è®¡ç®—æœºå­—å…¸ä¸­ï¼Œå“ªä¸ªå­—æ¯ä½¿ç”¨å¾—æœ€é¢‘ç¹ï¼Œä»¥åŠå®ƒä½¿ç”¨äº†å¤šå°‘æ¬¡ï¼Ÿ
- en: 'Note on Design Choices This exercise calls for the composition of the solution
    to the preceding exercise with a function that picks the correct pairing from
    a list of [Letter-Count](#%28tech._letter._count%29)s. There are two ways to design
    this latter function:'
  id: totrans-2278
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡é€‰æ‹©æ³¨æ„äº‹é¡¹ï¼šè¿™ä¸ªç»ƒä¹ è¦æ±‚å°†ä¸Šä¸€ä¸ªç»ƒä¹ çš„è§£å†³æ–¹æ¡ˆä¸ä¸€ä¸ªä» [Letter-Count](#%28tech._letter._count%29) åˆ—è¡¨ä¸­é€‰å–æ­£ç¡®é…å¯¹çš„å‡½æ•°ç»„åˆèµ·æ¥ã€‚è®¾è®¡è¿™ä¸ªåè€…çš„å‡½æ•°æœ‰ä¸¤ç§æ–¹å¼ï¼š
- en: Design a function that picks the pair with the maximum count.
  id: totrans-2279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œé€‰æ‹©è®¡æ•°æœ€å¤§çš„å¯¹ã€‚
- en: Design a function that selects the first from a sorted list of pairs.
  id: totrans-2280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œä»æ’åºåçš„å¯¹åˆ—è¡¨ä¸­é€‰å–ç¬¬ä¸€ä¸ªã€‚
- en: Consider designing both. Which one do you prefer? Why?
  id: totrans-2281
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘è®¾è®¡ä¸¤ä¸ªã€‚ä½ æ›´å–œæ¬¢å“ªä¸€ä¸ªï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
- en: ExerciseÂ 198\. Design words-by-first-letter. The function consumes a [Dictionary](#%28tech._dictionary%29)
    and produces a list of [Dictionary](#%28tech._dictionary%29)s, one per [Letter](#%28tech._letter%29).
  id: totrans-2282
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 198ã€‚è®¾è®¡words-by-first-letterå‡½æ•°ã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ª[å­—å…¸](#%28tech._dictionary%29)å¹¶äº§ç”Ÿä¸€ä¸ª[å­—å…¸](#%28tech._dictionary%29)åˆ—è¡¨ï¼Œæ¯ä¸ªå­—æ¯ä¸€ä¸ªã€‚
- en: 'Redesign most-frequent from [exerciseÂ 197](#%28counter._%28exercise._ex~3adictionary3%29%29)
    using this new function. Call the new function most-frequent.v2. Once you have
    completed the design, ensure that the two functions compute the same result on
    your computerâ€™s dictionary:'
  id: totrans-2283
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªæ–°å‡½æ•°é‡æ–°è®¾è®¡most-frequentï¼Œå‘½åä¸ºmost-frequent.v2ã€‚å®Œæˆè®¾è®¡åï¼Œç¡®ä¿ä¸¤ä¸ªå‡½æ•°åœ¨æ‚¨çš„è®¡ç®—æœºå­—å…¸ä¸Šè®¡ç®—ç›¸åŒçš„ç»“æœï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-2284
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (most-frequentÂ AS-LIST) |'
  id: totrans-2285
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (most-frequentÂ AS-LIST) |'
- en: '| Â Â (most-frequent.v2Â AS-LIST)) |'
  id: totrans-2286
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (most-frequent.v2Â AS-LIST)) |'
- en: 'Note on Design Choices For words-by-first-letter you have a choice for dealing
    with the situation when the given dictionary does not contain any words for some
    letter:'
  id: totrans-2287
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºè®¾è®¡é€‰æ‹©çš„è¯´æ˜ï¼šå¯¹äºwords-by-first-letterï¼Œä½ æœ‰ä¸€ä¸ªé€‰æ‹©æ¥å¤„ç†ç»™å®šå­—å…¸ä¸­æŸäº›å­—æ¯æ²¡æœ‰å•è¯çš„æƒ…å†µï¼š
- en: One alternative is to exclude the resulting empty dictionaries from the overall
    result. Doing so simplifies both the testing of the function and the design of
    most-frequent.v2, but it also requires the design of an auxiliary function.
  id: totrans-2288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ç§é€‰æ‹©æ˜¯æ’é™¤ç»“æœä¸­çš„ç©ºå­—å…¸ã€‚è¿™æ ·åšç®€åŒ–äº†å‡½æ•°çš„æµ‹è¯•å’Œmost-frequent.v2çš„è®¾è®¡ï¼Œä½†ä¹Ÿéœ€è¦è®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚
- en: The other one is to include '() as the result of looking for words of a certain
    letter, even if there arenâ€™t any. This alternative avoids the auxiliary function
    needed for the first alternative but adds complexity to the design of most-frequent.v2.
    End
  id: totrans-2289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦ä¸€ç§é€‰æ‹©æ˜¯åœ¨æŸ¥æ‰¾ç‰¹å®šå­—æ¯çš„å•è¯æ—¶ï¼Œå³ä½¿æ²¡æœ‰æ‰¾åˆ°ä»»ä½•å•è¯ï¼Œä¹Ÿå°†ç©ºåˆ—è¡¨'()'ä½œä¸ºç»“æœã€‚è¿™ç§é€‰æ‹©é¿å…äº†ç¬¬ä¸€ç§é€‰æ‹©æ‰€éœ€çš„è¾…åŠ©å‡½æ•°ï¼Œä½†å¢åŠ äº†most-frequent.v2çš„è®¾è®¡å¤æ‚æ€§ã€‚ç»“æŸ
- en: Note on Intermediate Data and Deforestation This second version of the word-counting
    function computes the desired result via the creation of a large intermediate
    data structure that serves no real purpose other than that its parts are counted.
    On occasion, the programming language eliminates them automatically by fusing
    the two functions into one, a transformation on programs that is also called deforestation.
    When you know that the language does not deforest programs, consider eliminating
    such data structures if the program does not process data fast enough.
  id: totrans-2290
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºä¸­é—´æ•°æ®å’Œå‰ªæçš„è¯´æ˜ï¼šè¿™ä¸ªå•è¯è®¡æ•°å‡½æ•°çš„ç¬¬äºŒç‰ˆé€šè¿‡åˆ›å»ºä¸€ä¸ªå¤§çš„ä¸­é—´æ•°æ®ç»“æ„æ¥è®¡ç®—æ‰€éœ€çš„ç»“æœï¼Œè¿™ä¸ªæ•°æ®ç»“æ„é™¤äº†å…¶éƒ¨åˆ†è¢«è®¡æ•°å¤–æ²¡æœ‰å…¶ä»–å®é™…ç”¨é€”ã€‚æœ‰æ—¶ï¼Œç¼–ç¨‹è¯­è¨€ä¼šè‡ªåŠ¨é€šè¿‡å°†ä¸¤ä¸ªå‡½æ•°èåˆä¸ºä¸€ä¸ªæ¥æ¶ˆé™¤è¿™äº›æ•°æ®ç»“æ„ï¼Œè¿™ç§å¯¹ç¨‹åºè¿›è¡Œçš„è½¬æ¢ä¹Ÿç§°ä¸ºå‰ªæã€‚å½“ä½ çŸ¥é“è¯­è¨€ä¸ä¼šå‰ªæç¨‹åºæ—¶ï¼Œå¦‚æœç¨‹åºå¤„ç†æ•°æ®ä¸å¤Ÿå¿«ï¼Œè€ƒè™‘æ¶ˆé™¤è¿™æ ·çš„æ•°æ®ç»“æ„ã€‚
- en: '12.2Real-World Data: iTunes[ğŸ”—](#(part._itunes-data._sec~3aitunes) "Link to
    here")'
  id: totrans-2291
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 12.2 çœŸå®ä¸–ç•Œæ•°æ®ï¼šiTunes[ğŸ”—](#(part._itunes-data._sec~3aitunes) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Appleâ€™s iTunes software is widely used to collect music, videos, TV shows,
    and so on. You may wish to analyze the information that your iTunes application
    gathers. It is actually quite easy to extract its database. Select the applicationâ€™s
    File menu, choose Library and then Exportâ€”<wbr>and voilÃ , you can export a so-called
    XML representation of the iTunes information.Since such proprietary formats change
    regularly, the book comes with two sample files: [itunes.xml](Https://felleisen.org/matthias/HtDP2e/Files/itunes.xml)
    and [itunes2.xml](Https://felleisen.org/matthias/HtDP2e/Files/itunes2.xml). You
    may wish to use those instead of your own. Processing XML is covered in some depth
    by [Project: The Commerce of XML](part_four.html#%28part._ch~3amoney-sexp%29);
    here we rely on the 2htdp/itunes teachpack to get hold of the information. Specifically,
    the teahpack enables you to retrieve the music tracks that your iTunes library
    contains.'
  id: totrans-2292
  prefs: []
  type: TYPE_NORMAL
  zh: è‹¹æœçš„iTunesè½¯ä»¶è¢«å¹¿æ³›ç”¨äºæ”¶é›†éŸ³ä¹ã€è§†é¢‘ã€ç”µè§†èŠ‚ç›®ç­‰å†…å®¹ã€‚æ‚¨å¯èƒ½å¸Œæœ›åˆ†ææ‚¨çš„iTunesåº”ç”¨ç¨‹åºæ”¶é›†çš„ä¿¡æ¯ã€‚å®é™…ä¸Šï¼Œæå–å…¶æ•°æ®åº“éå¸¸ç®€å•ã€‚é€‰æ‹©åº”ç”¨ç¨‹åºçš„æ–‡ä»¶èœå•ï¼Œé€‰æ‹©åº“ç„¶åå¯¼å‡ºâ€”<wbr>ç„¶åï¼Œæ‚¨å°±å¯ä»¥å¯¼å‡ºæ‰€è°“çš„iTunesä¿¡æ¯çš„XMLè¡¨ç¤ºã€‚ç”±äºè¿™æ ·çš„ä¸“æœ‰æ ¼å¼ç»å¸¸å˜åŒ–ï¼Œæœ¬ä¹¦é™„å¸¦ä¸¤ä¸ªç¤ºä¾‹æ–‡ä»¶ï¼š[itunes.xml](Https://felleisen.org/matthias/HtDP2e/Files/itunes.xml)
    å’Œ [itunes2.xml](Https://felleisen.org/matthias/HtDP2e/Files/itunes2.xml)ã€‚æ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨è¿™äº›æ–‡ä»¶è€Œä¸æ˜¯æ‚¨è‡ªå·±çš„ã€‚XMLå¤„ç†åœ¨[é¡¹ç›®ï¼šXMLçš„å•†ä¸š](part_four.html#%28part._ch~3amoney-sexp%29)ä¸­æœ‰è¯¦ç»†è¯´æ˜ï¼›åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¾èµ–äº2htdp/itunes
    teachpackæ¥è·å–ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™ä¸ªteahpackå…è®¸æ‚¨æ£€ç´¢iTunesåº“ä¸­åŒ…å«çš„éŸ³ä¹è½¨é“ã€‚
- en: 'While the details vary, an iTunes library maintains some of the following kinds
    of information for each music track, occasionally a bit less:'
  id: totrans-2293
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶ç»†èŠ‚æœ‰æ‰€ä¸åŒï¼Œä½†iTunesåº“ä¸ºæ¯ä¸ªéŸ³ä¹è½¨é“ç»´æŠ¤ä»¥ä¸‹ä¸€äº›ç±»å‹çš„ä¿¡æ¯ï¼Œå¶å°”ä¼šå°‘ä¸€äº›ï¼š
- en: 'Track ID, a unique identifier for the track with respect to your library, example:
    442'
  id: totrans-2294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è½¨é“IDï¼Œç›¸å¯¹äºæ‚¨åº“ä¸­è½¨é“çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚ï¼š442
- en: Name, the title of the track, Wild Child
  id: totrans-2295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åç§°ï¼Œè½¨é“çš„æ ‡é¢˜ï¼Œé‡å­©å­
- en: Artist, the producing artists, Enya
  id: totrans-2296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è‰ºæœ¯å®¶ï¼Œåˆ¶ä½œè‰ºæœ¯å®¶ï¼Œæ©é›…
- en: Album, the title of the album to which it belongs, A Day Without
  id: totrans-2297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸“è¾‘ï¼Œæ‰€å±ä¸“è¾‘çš„æ ‡é¢˜ï¼Œæ²¡æœ‰ä¸€å¤©
- en: Genre, the music genre to which the track is assigned, New Age
  id: totrans-2298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: éŸ³ä¹ç±»å‹ï¼Œè½¨é“æ‰€å±çš„éŸ³ä¹ç±»å‹ï¼Œæ–°ä¸–çºª
- en: Kind, the encoding of the music, MPEG audio file
  id: totrans-2299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç±»å‹ï¼ŒéŸ³ä¹çš„ç¼–ç ï¼ŒMPEGéŸ³é¢‘æ–‡ä»¶
- en: Size, the size of the file, 4562044
  id: totrans-2300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ–‡ä»¶å¤§å°ï¼Œæ–‡ä»¶å¤§å°ï¼Œ4562044
- en: Total Time, the length of the track in milliseconds, 227996
  id: totrans-2301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ€»æ—¶é•¿ï¼Œè½¨é“é•¿åº¦ï¼ˆæ¯«ç§’ï¼‰ï¼Œ227996
- en: Track Number, the position of the track within the album, 2
  id: totrans-2302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è½¨é“ç¼–å·ï¼Œè½¨é“åœ¨ä¸“è¾‘ä¸­çš„ä½ç½®ï¼Œ2
- en: Track Count, the number of tracks on the album, 11
  id: totrans-2303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è½¨é“æ•°é‡ï¼Œä¸“è¾‘ä¸­çš„è½¨é“æ•°é‡ï¼Œ11
- en: Year, the year of release, 2000
  id: totrans-2304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¹´ä»½ï¼Œå‘è¡Œå¹´ä»½ï¼Œ2000
- en: Date Added, when the track was added, 2002-7-17 3:55:14
  id: totrans-2305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ·»åŠ æ—¥æœŸï¼Œè½¨é“è¢«æ·»åŠ çš„æ—¶é—´ï¼Œ2002-7-17 3:55:14
- en: Play Count, how many times it was played, 20
  id: totrans-2306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ’­æ”¾æ¬¡æ•°ï¼Œæ’­æ”¾çš„æ¬¡æ•°ï¼Œ20
- en: Play Date, when the track was last played, 3388484113 Unix seconds
  id: totrans-2307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ’­æ”¾æ—¥æœŸï¼Œæœ€åä¸€æ¬¡æ’­æ”¾çš„æ—¶é—´ï¼Œ3388484113 Unixç§’
- en: Play Date UTC, when it was last played, 2011-5-17 17:35:13
  id: totrans-2308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ’­æ”¾æ—¥æœŸUTCï¼Œæœ€åä¸€æ¬¡æ’­æ”¾çš„æ—¶é—´ï¼Œ2011-5-17 17:35:13
- en: 'As always, the first task is to choose a BSL data representation for this information.
    In this section, we use two representations for music tracks: a structure-based
    one and another based on lists.In addition to the 2htdp/batch-io teachpack, this
    section relies on the 2htdp/itunes teachpack. While the former records a fixed
    number of attributes per track and only if all information is available, the latter
    comes with whatever information is available represented as data. Each serves
    particular uses well; for some uses, both representations are useful.'
  id: totrans-2309
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚åŒå¾€å¸¸ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯é€‰æ‹©ä¸€ä¸ªBSLæ•°æ®è¡¨ç¤ºæ¥è¡¨ç¤ºè¿™äº›ä¿¡æ¯ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ç§éŸ³ä¹è½¨é“çš„è¡¨ç¤ºï¼šåŸºäºç»“æ„çš„å¦ä¸€ç§åŸºäºåˆ—è¡¨ã€‚é™¤äº†2htdp/batch-io
    teachpackä¹‹å¤–ï¼Œæœ¬èŠ‚è¿˜ä¾èµ–äº2htdp/itunes teachpackã€‚å‰è€…ä¸ºæ¯ä¸ªè½¨é“è®°å½•å›ºå®šæ•°é‡çš„å±æ€§ï¼Œå¹¶ä¸”åªæœ‰å½“æ‰€æœ‰ä¿¡æ¯éƒ½å¯ç”¨æ—¶ï¼Œåè€…åˆ™å°†æ‰€æœ‰å¯ç”¨çš„ä¿¡æ¯è¡¨ç¤ºä¸ºæ•°æ®ã€‚æ¯ç§è¡¨ç¤ºéƒ½é€‚ç”¨äºç‰¹å®šçš„ç”¨é€”ï¼›å¯¹äºæŸäº›ç”¨é€”ï¼Œä¸¤ç§è¡¨ç¤ºéƒ½å¾ˆæœ‰ç”¨ã€‚
- en: '| ;Â the 2htdp/itunes teachpack documentation, part 1: |'
  id: totrans-2310
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â the 2htdp/itunes teachpack documentation, part 1: |'
- en: '| Â  |'
  id: totrans-2311
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â An LTracks is one of: |'
  id: totrans-2312
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An LTracks is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-2313
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Track](#%28tech._itunes-data._track%29)  [LTracks](#%28tech._itunes-data._ltrack%29))
    |'
  id: totrans-2314
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Track](#%28tech._itunes-data._track%29)  [LTracks](#%28tech._itunes-data._ltrack%29))
    |'
- en: '| Â  |'
  id: totrans-2315
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â track
    |'
  id: totrans-2316
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â track
    |'
- en: '| Â Â [nameÂ artistÂ albumÂ timeÂ track#Â addedÂ play#Â played]) |'
  id: totrans-2317
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [nameÂ artistÂ albumÂ timeÂ track#Â addedÂ play#Â played]) |'
- en: '| ;Â A Track is a structure: |'
  id: totrans-2318
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªè½¨é“æ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-track  [String](part_one.html#%28tech._string%29)  [String](part_one.html#%28tech._string%29)  [String](part_one.html#%28tech._string%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [Date](#%28tech._itunes-data._date%29)  [N](#%28tech._n%29)  [Date](#%28tech._itunes-data._date%29))
    |'
  id: totrans-2319
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-track  [String](part_one.html#%28tech._string%29)  [String](part_one.html#%28tech._string%29)  [String](part_one.html#%28tech._string%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [Date](#%28tech._itunes-data._date%29)  [N](#%28tech._n%29)  [Date](#%28tech._itunes-data._date%29))
    |'
- en: '| ;Â interpretation An instance records in order: the track''s |'
  id: totrans-2320
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è§£é‡Šï¼šä¸€ä¸ªå®ä¾‹æŒ‰é¡ºåºè®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š |'
- en: '| ;Â title, its producing artist, to which album it belongs, |'
  id: totrans-2321
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ ‡é¢˜ï¼Œåˆ¶ä½œè‰ºæœ¯å®¶ï¼Œæ‰€å±ä¸“è¾‘ï¼Œ |'
- en: '| ;Â its playing time in milliseconds, its position within the |'
  id: totrans-2322
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å…¶æ’­æ”¾æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œå…¶åœ¨åˆ—è¡¨ä¸­çš„ä½ç½® |'
- en: '| ;Â album, the date it was added, how often it has been |'
  id: totrans-2323
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸“è¾‘ï¼Œæ·»åŠ æ—¥æœŸï¼Œæ’­æ”¾æ¬¡æ•° |'
- en: '| ;Â played, and the date when it was last played |'
  id: totrans-2324
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ’­æ”¾æ¬¡æ•°ï¼Œä»¥åŠæœ€åä¸€æ¬¡æ’­æ”¾çš„æ—¥æœŸ |'
- en: '| Â  |'
  id: totrans-2325
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â dateÂ [yearÂ monthÂ dayÂ hourÂ minuteÂ [second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)])
    |'
  id: totrans-2326
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â dateÂ [yearÂ monthÂ dayÂ hourÂ minuteÂ [second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)])
    |'
- en: '| ;Â A Date is a structure: |'
  id: totrans-2327
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªæ—¥æœŸæ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-date  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29))
    |'
  id: totrans-2328
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-date  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29))
    |'
- en: '| ;Â interpretation An instance records six pieces of information: |'
  id: totrans-2329
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è§£é‡Šï¼šä¸€ä¸ªå®ä¾‹è®°å½•äº†å…­æ¡ä¿¡æ¯ï¼š |'
- en: '| ;Â the date''s year, month (between 1 and 12 inclusive), |'
  id: totrans-2330
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ—¥æœŸçš„å¹´ä»½ï¼Œæœˆä»½ï¼ˆä»‹äº1åˆ°12ä¹‹é—´ï¼ŒåŒ…æ‹¬12ï¼‰ï¼Œ |'
- en: '| ;Â day (between 1 and 31), hour (between 0 |'
  id: totrans-2331
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ—¥æœŸï¼ˆä»‹äº1åˆ°31ä¹‹é—´ï¼‰ï¼Œå°æ—¶ï¼ˆä»‹äº0 |'
- en: '| ;Â and 23), minute (between 0 and 59), and |'
  id: totrans-2332
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¹¶ä¸”23ï¼‰ï¼Œåˆ†é’Ÿï¼ˆä»‹äº0å’Œ59ä¹‹é—´ï¼‰ï¼Œä»¥åŠ |'
- en: '| ;Â second (also between 0 and 59). |'
  id: totrans-2333
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è½¨é“çš„ç¬¬äºŒç§’ï¼ˆä¹Ÿä»‹äº0åˆ°59ä¹‹é—´ï¼‰ã€‚ |'
- en: ''
  id: totrans-2334
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 75: Representing iTunes tracks as structures (the structures)'
  id: totrans-2335
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾75ï¼šå°†iTunesè½¨é“è¡¨ç¤ºä¸ºç»“æ„ï¼ˆç»“æ„ä½“ï¼‰
- en: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [Track](#%28tech._itunes-data._track%29) or #false |'
  id: totrans-2336
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [Track](#%28tech._itunes-data._track%29) or #false |'
- en: '| ;Â creates an instance of [Track](#%28tech._itunes-data._track%29) for legitimate
    inputs |'
  id: totrans-2337
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸ºåˆæ³•è¾“å…¥åˆ›å»º [Track](#%28tech._itunes-data._track%29) çš„å®ä¾‹ |'
- en: '| ;Â otherwise it produces #false |'
  id: totrans-2338
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦åˆ™å®ƒäº§ç”Ÿ #false |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (create-trackÂ nameÂ artistÂ albumÂ time
    |'
  id: totrans-2339
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (create-trackÂ nameÂ artistÂ albumÂ time
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â track#Â addedÂ play#Â played) |'
  id: totrans-2340
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â track#Â addedÂ play#Â played) |'
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2341
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-2342
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [Date](#%28tech._itunes-data._date%29) or #false |'
  id: totrans-2343
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [Date](#%28tech._itunes-data._date%29) or #false |'
- en: '| ;Â creates an instance of [Date](#%28tech._itunes-data._date%29) for legitimate
    inputs |'
  id: totrans-2344
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸ºåˆæ³•è¾“å…¥åˆ›å»º [Date](#%28tech._itunes-data._date%29) çš„å®ä¾‹ |'
- en: '| ;Â otherwise it produces #false |'
  id: totrans-2345
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¦åˆ™å®ƒäº§ç”Ÿ #false |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (create-dateÂ yÂ moÂ dayÂ hÂ mÂ s)
    |'
  id: totrans-2346
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (create-dateÂ yÂ moÂ dayÂ hÂ mÂ s)
    |'
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2347
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-2348
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [LTracks](#%28tech._itunes-data._ltrack%29)
    |'
  id: totrans-2349
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [String](part_one.html#%28tech._string%29) -> [LTracks](#%28tech._itunes-data._ltrack%29)
    |'
- en: '| ;Â creates a list-of-tracks representation from the |'
  id: totrans-2350
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ä» ITUNES-LOCATION åˆ›å»ºä¸€ä¸ªæ›²ç›®åˆ—è¡¨è¡¨ç¤º |'
- en: '| ;Â text in file-name (an XML export from iTunes) |'
  id: totrans-2351
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; æ–‡ä»¶åä¸­çš„æ–‡æœ¬ï¼ˆæ¥è‡ªiTunesçš„XMLå¯¼å‡ºï¼‰ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (read-itunes-as-tracksÂ file-name)
    |'
  id: totrans-2352
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (read-itunes-as-tracksÂ file-name)
    |'
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2353
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: ''
  id: totrans-2354
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 76: Representing iTunes tracks as structures (the functions)'
  id: totrans-2355
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾76ï¼šå°†iTunesæ›²ç›®è¡¨ç¤ºä¸ºç»“æ„ï¼ˆå‡½æ•°ï¼‰
- en: '[FiguresÂ 75](#%28counter._itunes-data._%28figure._fig~3aitunes-api-tracks%29%29)
    and [76](#%28counter._itunes-data._%28figure._fig~3aitunes-api-tracks-fun%29%29)
    introduce the structure-based representation of tracks as implemented by the 2htdp/itunes
    teachpack. The track structure type comes with eight fields, each representing
    a particular property of the track. Most fields contain atomic kinds of data,
    such as [String](part_one.html#%28tech._string%29)s and [N](#%28tech._n%29)s;
    others contain [Date](#%28tech._itunes-data._date%29)s, which is a structure type
    with six fields. The 2htdp/itunes teachpack exports all predicates and selectors
    for the track and date structure types, but in lieu of constructors it provides
    checked constructors.'
  id: totrans-2356
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾75](#%28counter._itunes-data._%28figure._fig~3aitunes-api-tracks%29%29) å’Œ
    [å›¾76](#%28counter._itunes-data._%28figure._fig~3aitunes-api-tracks-fun%29%29)
    ä»‹ç»äº†ç”±2htdp/itunes teachpackå®ç°çš„åŸºäºç»“æ„çš„æ›²ç›®è¡¨ç¤ºã€‚æ›²ç›®ç»“æ„ç±»å‹åŒ…å«å…«ä¸ªå­—æ®µï¼Œæ¯ä¸ªå­—æ®µä»£è¡¨æ›²ç›®çš„ä¸€ä¸ªç‰¹å®šå±æ€§ã€‚å¤§å¤šæ•°å­—æ®µåŒ…å«åŸå­ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚
    [String](part_one.html#%28tech._string%29)s å’Œ [N](#%28tech._n%29)sï¼›å…¶ä»–å­—æ®µåŒ…å« [Date](#%28tech._itunes-data._date%29)sï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ…å«å…­ä¸ªå­—æ®µçš„ç±»å‹ç»“æ„ã€‚2htdp/itunes
    teachpackå¯¼å‡ºäº†æ›²ç›®å’Œæ—¥æœŸç»“æ„ç±»å‹çš„æ‰€æœ‰è°“è¯å’Œé€‰æ‹©å™¨ï¼Œä½†æä¾›äº†æ£€æŸ¥æ„é€ å‡½æ•°è€Œä¸æ˜¯æ„é€ å‡½æ•°ã€‚'
- en: 'The last element of the description of the 2htdp/itunes teachpack is a function
    that reads an iTunes XML library description and delivers a list of tracks, [LTracks](#%28tech._itunes-data._ltrack%29).
    Once you have exported the XML library from some iTunes app, you can run the following
    code snippet to retrieve all the records:'
  id: totrans-2357
  prefs: []
  type: TYPE_NORMAL
  zh: 2htdp/itunes teachpackæè¿°çš„æœ€åä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¯»å–iTunes XMLåº“æè¿°å¹¶è¿”å›ä¸€ä¸ªæ›²ç›®åˆ—è¡¨ï¼Œ[LTracks](#%28tech._itunes-data._ltrack%29)ã€‚ä¸€æ—¦æ‚¨ä»æŸä¸ªiTunesåº”ç”¨ç¨‹åºä¸­å¯¼å‡ºXMLåº“ï¼Œæ‚¨å°±å¯ä»¥è¿è¡Œä»¥ä¸‹ä»£ç ç‰‡æ®µæ¥æ£€ç´¢æ‰€æœ‰è®°å½•ï¼š
- en: '| ;Â modify the following to use your chosen name |'
  id: totrans-2358
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; ä¿®æ”¹ä»¥ä¸‹å†…å®¹ä»¥ä½¿ç”¨æ‚¨é€‰æ‹©çš„åå­— |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ITUNES-LOCATIONÂ "itunes.xml")
    |'
  id: totrans-2359
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ITUNES-LOCATIONÂ "itunes.xml")
    |'
- en: '| Â  |'
  id: totrans-2360
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [LTracks](#%28tech._itunes-data._ltrack%29) |'
  id: totrans-2361
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; [LTracks](#%28tech._itunes-data._ltrack%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â itunes-tracks
    |'
  id: totrans-2362
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â itunes-tracks
    |'
- en: '| Â Â (read-itunes-as-tracksÂ ITUNES-LOCATION)) |'
  id: totrans-2363
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (read-itunes-as-tracksÂ ITUNES-LOCATION)) |'
- en: Save the snippet in the same folder as your iTunes XML export. Remember not
    to use itunes-tracks for examples; it is way too large for that. Indeed, it may
    be so large that reading the file every time you run your BSL program in DrRacket
    will take a lot of time. You may therefore wish to comment out this second line
    while you design functions. Uncomment it only when you wish to compute information
    about your iTunes collection.
  id: totrans-2364
  prefs: []
  type: TYPE_NORMAL
  zh: å°†ç‰‡æ®µä¿å­˜åœ¨ä¸æ‚¨çš„iTunes XMLå¯¼å‡ºç›¸åŒçš„æ–‡ä»¶å¤¹ä¸­ã€‚è¯·è®°ä½ä¸è¦ä½¿ç”¨ itunes-tracks ä½œä¸ºç¤ºä¾‹ï¼›å®ƒå¯¹äºè¿™ä¸ªç”¨é€”æ¥è¯´å¤ªå¤§ã€‚å®é™…ä¸Šï¼Œå®ƒå¯èƒ½å¦‚æ­¤ä¹‹å¤§ï¼Œä»¥è‡³äºæ¯æ¬¡æ‚¨åœ¨DrRacketä¸­è¿è¡ŒBSLç¨‹åºæ—¶è¯»å–æ–‡ä»¶éƒ½ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚å› æ­¤ï¼Œåœ¨è®¾è®¡å‡½æ•°æ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å–æ¶ˆæ³¨é‡Šæ­¤ç¬¬äºŒè¡Œã€‚åªæœ‰å½“æ‚¨å¸Œæœ›è®¡ç®—æœ‰å…³æ‚¨çš„iTunesæ”¶è—çš„ä¿¡æ¯æ—¶ï¼Œæ‰å–æ¶ˆæ³¨é‡Šå®ƒã€‚
- en: ExerciseÂ 199\. While the important data definitions are already provided, the
    first step of the design recipe is still incomplete. Make up examples of [Date](#%28tech._itunes-data._date%29)s,
    [Track](#%28tech._itunes-data._track%29)s, and [LTracks](#%28tech._itunes-data._ltrack%29).
    These examples come in handy for the following exercises as inputs.
  id: totrans-2365
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  199\. è™½ç„¶é‡è¦çš„æ•°æ®å®šä¹‰å·²ç»æä¾›ï¼Œä½†è®¾è®¡æ­¥éª¤çš„ç¬¬ä¸€æ­¥ä»ç„¶ä¸å®Œæ•´ã€‚è¯·ç¼–å†™[æ—¥æœŸ](#%28tech._itunes-data._date%29)ã€[æ›²ç›®](#%28tech._itunes-data._track%29)å’Œ[LTracks](#%28tech._itunes-data._ltrack%29)çš„ç¤ºä¾‹ã€‚è¿™äº›ç¤ºä¾‹åœ¨ä»¥ä¸‹ç»ƒä¹ ä¸­ä½œä¸ºè¾“å…¥å¾ˆæœ‰ç”¨ã€‚
- en: ExerciseÂ 200\. Design the function total-time, which consumes an element of
    [LTracks](#%28tech._itunes-data._ltrack%29) and produces the total amount of play
    time. Once the program is done, compute the total play time of your iTunes collection.
  id: totrans-2366
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  200\. è®¾è®¡å‡½æ•°total-timeï¼Œå®ƒæ¥å—[LTracks](#%28tech._itunes-data._ltrack%29)çš„ä¸€ä¸ªå…ƒç´ å¹¶ç”Ÿæˆæ€»æ’­æ”¾æ—¶é—´ã€‚ä¸€æ—¦ç¨‹åºå®Œæˆï¼Œè®¡ç®—iTunesæ”¶è—çš„æ€»æ’­æ”¾æ—¶é—´ã€‚
- en: ExerciseÂ 201\. Design select-all-album-titles. The function consumes an [LTracks](#%28tech._itunes-data._ltrack%29)
    and produces the list of album titles as a [List-of-strings](#%28tech._list._of._string%29).
  id: totrans-2367
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  201\. è®¾è®¡é€‰æ‹©æ‰€æœ‰ä¸“è¾‘æ ‡é¢˜çš„åŠŸèƒ½ã€‚è¯¥å‡½æ•°æ¥å—[LTracks](#%28tech._itunes-data._ltrack%29)å¹¶ç”Ÿæˆä¸€ä¸ª[å­—ç¬¦ä¸²åˆ—è¡¨](#%28tech._list._of._string%29)çš„ä¸“è¾‘æ ‡é¢˜åˆ—è¡¨ã€‚
- en: Also design the function create-set. It consumes a [List-of-strings](#%28tech._list._of._string%29)
    and constructs one that contains every [String](part_one.html#%28tech._string%29)
    from the given list exactly once. Hint If [String](part_one.html#%28tech._string%29)
    s is at the front of the given list and occurs in the rest of the list, too, create-set
    does not keep s.
  id: totrans-2368
  prefs: []
  type: TYPE_NORMAL
  zh: è¿˜è¦è®¾è®¡å‡½æ•°create-setã€‚å®ƒæ¥å—ä¸€ä¸ª[å­—ç¬¦ä¸²åˆ—è¡¨](#%28tech._list._of._string%29)å¹¶æ„é€ ä¸€ä¸ªåŒ…å«ç»™å®šåˆ—è¡¨ä¸­æ¯ä¸ª[å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)çš„é›†åˆï¼Œæ¯ä¸ªå­—ç¬¦ä¸²åªå‡ºç°ä¸€æ¬¡ã€‚æç¤ºï¼šå¦‚æœ[å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)
    såœ¨ç»™å®šåˆ—è¡¨çš„å‰é¢ï¼Œå¹¶ä¸”ä¹Ÿåœ¨åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†ä¸­å‡ºç°ï¼Œåˆ™create-setä¸ä¼šä¿ç•™sã€‚
- en: Finally design select-album-titles/unique, which consumes an [LTracks](#%28tech._itunes-data._ltrack%29)
    and produces a list of unique album titles. Use this function to determine all
    album titles in your iTunes collection and also find out how many distinct albums
    it contains.
  id: totrans-2369
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åè®¾è®¡select-album-titles/uniqueï¼Œå®ƒæ¥å—[LTracks](#%28tech._itunes-data._ltrack%29)å¹¶ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ä¸“è¾‘æ ‡é¢˜åˆ—è¡¨ã€‚ä½¿ç”¨æ­¤å‡½æ•°ç¡®å®šæ‚¨çš„iTunesæ”¶è—ä¸­çš„æ‰€æœ‰ä¸“è¾‘æ ‡é¢˜ï¼Œå¹¶æ‰¾å‡ºå®ƒåŒ…å«å¤šå°‘ä¸ªä¸åŒçš„ä¸“è¾‘ã€‚
- en: ExerciseÂ 202\. Design select-album. The function consumes the title of an album
    and an [LTracks](#%28tech._itunes-data._ltrack%29). It extracts from the latter
    the list of tracks that belong to the given album.
  id: totrans-2370
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  202\. è®¾è®¡é€‰æ‹©ä¸“è¾‘çš„åŠŸèƒ½ã€‚è¯¥å‡½æ•°æ¥å—ä¸“è¾‘æ ‡é¢˜å’Œ[LTracks](#%28tech._itunes-data._ltrack%29)ã€‚å®ƒä»åè€…ä¸­æå–å±äºç»™å®šä¸“è¾‘çš„æ›²ç›®åˆ—è¡¨ã€‚
- en: ExerciseÂ 203\. Design select-album-date. The function consumes the title of
    an album, a date, and an [LTracks](#%28tech._itunes-data._ltrack%29). It extracts
    from the latter the list of tracks that belong to the given album and have been
    played after the given date. Hint You must design a function that consumes two
    [Date](#%28tech._itunes-data._date%29)s and determines whether the first occurs
    before the second.
  id: totrans-2371
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  203\. è®¾è®¡é€‰æ‹©ä¸“è¾‘æ—¥æœŸçš„åŠŸèƒ½ã€‚è¯¥å‡½æ•°æ¥å—ä¸“è¾‘æ ‡é¢˜ã€æ—¥æœŸå’Œ[LTracks](#%28tech._itunes-data._ltrack%29)ã€‚å®ƒä»åè€…ä¸­æå–å±äºç»™å®šä¸“è¾‘ä¸”åœ¨ç»™å®šæ—¥æœŸä¹‹åæ’­æ”¾çš„æ›²ç›®åˆ—è¡¨ã€‚æç¤ºï¼šä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ª[æ—¥æœŸ](#%28tech._itunes-data._date%29)å¹¶ç¡®å®šç¬¬ä¸€ä¸ªæ˜¯å¦åœ¨ç¬¬äºŒä¸ªä¹‹å‰ã€‚
- en: 'ExerciseÂ 204\. Design select-albums. The function consumes an element of [LTracks](#%28tech._itunes-data._ltrack%29).
    It produces a list of LTracks, one per album. Each album is uniquely identified
    by its title and shows up in the result only once. Hints (1) You want to use some
    of the solutions of the preceding exercises. (2) The function that groups consumes
    two lists: the list of album titles and the list of tracks; it considers the latter
    as atomic until it is handed over to an auxiliary function. See [exerciseÂ 196](#%28counter._%28exercise._ex~3adictionary2%29%29).'
  id: totrans-2372
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  204\. è®¾è®¡é€‰æ‹©ä¸“è¾‘çš„åŠŸèƒ½ã€‚è¯¥å‡½æ•°æ¥å—[LTracks](#%28tech._itunes-data._ltrack%29)çš„ä¸€ä¸ªå…ƒç´ ã€‚å®ƒç”Ÿæˆä¸€ä¸ªLTracksåˆ—è¡¨ï¼Œæ¯ä¸ªä¸“è¾‘ä¸€ä¸ªã€‚æ¯ä¸ªä¸“è¾‘é€šè¿‡å…¶æ ‡é¢˜å”¯ä¸€æ ‡è¯†ï¼Œå¹¶åœ¨ç»“æœä¸­åªå‡ºç°ä¸€æ¬¡ã€‚æç¤ºï¼š(1)
    ä½ æƒ³ä½¿ç”¨å‰é¢ç»ƒä¹ çš„ä¸€äº›è§£å†³æ–¹æ¡ˆã€‚(2) åˆ†ç»„å‡½æ•°æ¥å—ä¸¤ä¸ªåˆ—è¡¨ï¼šä¸“è¾‘æ ‡é¢˜åˆ—è¡¨å’Œæ›²ç›®åˆ—è¡¨ï¼›å®ƒå°†åè€…è§†ä¸ºåŸå­ï¼Œç›´åˆ°å°†å…¶ä¼ é€’ç»™è¾…åŠ©å‡½æ•°ã€‚å‚è§[ç»ƒä¹  196](#%28counter._%28exercise._ex~3adictionary2%29%29)ã€‚
- en: 'Terminology The functions whose names start with select- are so-called database
    queries. See [Project: Database](part_four.html#%28part._db._sec~3aproj-db%29)
    for more details. End'
  id: totrans-2373
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¯è¯­ä»¥select-å¼€å¤´çš„å‡½æ•°è¢«ç§°ä¸ºæ•°æ®åº“æŸ¥è¯¢ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[é¡¹ç›®ï¼šæ•°æ®åº“](part_four.html#%28part._db._sec~3aproj-db%29)ã€‚ç»“æŸ
- en: '| ;Â the 2htdp/itunes teachpack documentation, part 2: |'
  id: totrans-2374
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â 2htdp/itunes æ•™å­¦åŒ…æ–‡æ¡£ï¼Œç¬¬ 2 éƒ¨åˆ†ï¼š |'
- en: '| Â  |'
  id: totrans-2375
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â An LLists is one of: |'
  id: totrans-2376
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An LLists is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-2377
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [LAssoc](#%28tech._itunes-data._lassoc%29)  [LLists](#%28tech._itunes-data._llist%29))
    |'
  id: totrans-2378
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [LAssoc](#%28tech._itunes-data._lassoc%29)  [LLists](#%28tech._itunes-data._llist%29))
    |'
- en: '| Â  |'
  id: totrans-2379
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â An LAssoc is one of: |'
  id: totrans-2380
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªLAssocå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“  ''() |'
  id: totrans-2381
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Association](#%28tech._itunes-data._association%29)  [LAssoc](#%28tech._itunes-data._lassoc%29))
    |'
  id: totrans-2382
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [å…³è”](#%28tech._itunes-data._association%29)  [LAssoc](#%28tech._itunes-data._lassoc%29))
    |'
- en: '| ;Â  |'
  id: totrans-2383
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â  |'
- en: '| ;Â An Association is a list of two items: |'
  id: totrans-2384
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªå…³è”æ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªé¡¹ç›®çš„åˆ—è¡¨ï¼š |'
- en: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [String](part_one.html#%28tech._string%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [BSDN](#%28tech._itunes-data._bsdn%29)  ''()))
    |'
  id: totrans-2385
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [BSDN](#%28tech._itunes-data._bsdn%29)  ''()))
    |'
- en: '| Â  |'
  id: totrans-2386
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A BSDN is one of: |'
  id: totrans-2387
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â BSDNå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“  [Boolean](part_one.html#%28tech._boolean%29) |'
  id: totrans-2388
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [å¸ƒå°”](part_one.html#%28tech._boolean%29) |'
- en: '| ;Â â€“  [Number](part_one.html#%28tech._number%29) |'
  id: totrans-2389
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [æ•°å­—](part_one.html#%28tech._number%29) |'
- en: '| ;Â â€“  [String](part_one.html#%28tech._string%29) |'
  id: totrans-2390
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) |'
- en: '| ;Â â€“  [Date](#%28tech._itunes-data._date%29) |'
  id: totrans-2391
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  [æ—¥æœŸ](#%28tech._itunes-data._date%29) |'
- en: '| Â  |'
  id: totrans-2392
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [LLists](#%28tech._itunes-data._llist%29)
    |'
  id: totrans-2393
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) -> [LLists](#%28tech._itunes-data._llist%29)
    |'
- en: '| ;Â creates a list of lists representation for all tracks in |'
  id: totrans-2394
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åˆ›å»ºæ‰€æœ‰è½¨é“çš„åˆ—è¡¨è¡¨ç¤ºå½¢å¼ |'
- en: '| ;Â file-name, which must be an XML export from iTunes |'
  id: totrans-2395
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ–‡ä»¶åï¼Œå¿…é¡»æ˜¯iTunesçš„XMLå¯¼å‡º |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (read-itunes-as-listsÂ file-name)
    |'
  id: totrans-2396
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (read-itunes-as-listsÂ æ–‡ä»¶å)
    |'
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2397
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: ''
  id: totrans-2398
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 77: Representing iTunes tracks as lists'
  id: totrans-2399
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾77ï¼šå°†iTunesè½¨é“è¡¨ç¤ºä¸ºåˆ—è¡¨
- en: '[FigureÂ 77](#%28counter._itunes-data._%28figure._fig~3aitunes-api-lists%29%29)
    shows how the 2htdp/itunes teachpack represents tracks with lists. An [LLists](#%28tech._itunes-data._llist%29)
    is a list of track representations, each of which is a list of lists pairing [String](part_one.html#%28tech._string%29)s
    with four kinds of values. The read-itunes-as-lists function reads an iTunes XML
    library and produces an element of [LLists](#%28tech._itunes-data._llist%29).
    Hence, you get access to all track information if you add the following definitions
    to your program:'
  id: totrans-2400
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾77](#%28counter._itunes-data._%28figure._fig~3aitunes-api-lists%29%29)å±•ç¤ºäº†2htdp/itunesæ•™å­¦åŒ…å¦‚ä½•ä½¿ç”¨åˆ—è¡¨è¡¨ç¤ºè½¨é“ã€‚ä¸€ä¸ª[LLists](#%28tech._itunes-data._llist%29)æ˜¯ä¸€ä¸ªè½¨é“è¡¨ç¤ºçš„åˆ—è¡¨ï¼Œæ¯ä¸ªè¡¨ç¤ºéƒ½æ˜¯ä¸€ä¸ªä¸å››ç§ç±»å‹çš„å€¼é…å¯¹çš„å­—ç¬¦ä¸²åˆ—è¡¨ã€‚read-itunes-as-listså‡½æ•°è¯»å–iTunes
    XMLåº“å¹¶ç”Ÿæˆä¸€ä¸ª[LLists](#%28tech._itunes-data._llist%29)å…ƒç´ ã€‚å› æ­¤ï¼Œå¦‚æœä½ å°†ä»¥ä¸‹å®šä¹‰æ·»åŠ åˆ°ä½ çš„ç¨‹åºä¸­ï¼Œä½ å°†èƒ½å¤Ÿè®¿é—®æ‰€æœ‰è½¨é“ä¿¡æ¯ï¼š'
- en: '| ;Â modify the following to use your chosen name |'
  id: totrans-2401
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¿®æ”¹ä»¥ä¸‹å†…å®¹ä»¥ä½¿ç”¨ä½ é€‰æ‹©çš„åç§° |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ITUNES-LOCATIONÂ "itunes.xml")
    |'
  id: totrans-2402
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ITUNES-LOCATIONÂ "itunes.xml")
    |'
- en: '| Â  |'
  id: totrans-2403
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [LLists](#%28tech._itunes-data._llist%29) |'
  id: totrans-2404
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [LLists](#%28tech._itunes-data._llist%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â list-tracks
    |'
  id: totrans-2405
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â list-tracks
    |'
- en: '| Â Â (read-itunes-as-listsÂ ITUNES-LOCATION)) |'
  id: totrans-2406
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (read-itunes-as-listsÂ ITUNES-LOCATION)) |'
- en: Then save it in the same folder where the iTunes library is stored.
  id: totrans-2407
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åå°†å®ƒä¿å­˜åœ¨iTunesåº“å­˜å‚¨çš„åŒä¸€æ–‡ä»¶å¤¹ä¸­ã€‚
- en: ExerciseÂ 205\. Develop examples of [LAssoc](#%28tech._itunes-data._lassoc%29)
    and [LLists](#%28tech._itunes-data._llist%29), that is, the list representation
    of tracks and lists of such tracks.
  id: totrans-2408
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  205ï¼šå¼€å‘ [LAssoc](#%28tech._itunes-data._lassoc%29) å’Œ [LLists](#%28tech._itunes-data._llist%29)
    çš„ç¤ºä¾‹ï¼Œå³æ›²ç›®å’Œæ­¤ç±»æ›²ç›®åˆ—è¡¨çš„åˆ—è¡¨è¡¨ç¤ºã€‚
- en: 'ExerciseÂ 206\. Design the function find-association. It consumes three arguments:
    a [String](part_one.html#%28tech._string%29) called key, an [LAssoc](#%28tech._itunes-data._lassoc%29),
    and an element of [Any](part_one.html#%28tech._any%29) called default. It produces
    the first [Association](#%28tech._itunes-data._association%29) whose first item
    is equal to key, or default if there is no such Association.'
  id: totrans-2409
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  206ï¼šè®¾è®¡ find-association å‡½æ•°ã€‚å®ƒæ¶ˆè€—ä¸‰ä¸ªå‚æ•°ï¼šä¸€ä¸ªåä¸º key çš„ [String](part_one.html#%28tech._string%29)ï¼Œä¸€ä¸ª
    [LAssoc](#%28tech._itunes-data._lassoc%29)ï¼Œä»¥åŠä¸€ä¸ªåä¸º default çš„ [Any](part_one.html#%28tech._any%29)
    å…ƒç´ ã€‚å®ƒäº§ç”Ÿç¬¬ä¸€ä¸ªç¬¬ä¸€ä¸ªå…ƒç´ ç­‰äº key çš„ [Association](#%28tech._itunes-data._association%29)ï¼Œå¦‚æœæ²¡æœ‰è¿™æ ·çš„å…³è”ï¼Œåˆ™è¿”å›
    defaultã€‚
- en: Note Read up on [assoc](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._assoc%29%29)
    after you have designed this function.
  id: totrans-2410
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼šåœ¨è®¾è®¡äº†æ­¤å‡½æ•°ä¹‹åï¼Œé˜…è¯»æœ‰å…³ [assoc](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._assoc%29%29)
    çš„å†…å®¹ã€‚
- en: ExerciseÂ 207\. Design total-time/list, which consumes an [LLists](#%28tech._itunes-data._llist%29)
    and produces the total amount of play time. Hint Solve [exerciseÂ 206](#%28counter._itunes-data._%28exercise._ex~3aitunes11%29%29)
    first.
  id: totrans-2411
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  207ï¼šè®¾è®¡ total-time/listï¼Œå®ƒæ¶ˆè€—ä¸€ä¸ª [LLists](#%28tech._itunes-data._llist%29) å¹¶äº§ç”Ÿæ’­æ”¾æ€»æ—¶é•¿ã€‚æç¤ºï¼šé¦–å…ˆè§£å†³
    [ç»ƒä¹  206](#%28counter._itunes-data._%28exercise._ex~3aitunes11%29%29)ã€‚
- en: Once you have completed the design, compute the total play time of your iTunes
    collection. Compare this result with the time that the total-time function from
    [exerciseÂ 200](#%28counter._itunes-data._%28exercise._ex~3aitunes2%29%29) computes.
    Why is there a difference?
  id: totrans-2412
  prefs: []
  type: TYPE_NORMAL
  zh: å®Œæˆè®¾è®¡åï¼Œè®¡ç®—ä½ çš„ iTunes æ”¶è—çš„æ€»æ’­æ”¾æ—¶é—´ã€‚å°†æ­¤ç»“æœä¸ [ç»ƒä¹  200](#%28counter._itunes-data._%28exercise._ex~3aitunes2%29%29)
    ä¸­çš„ total-time å‡½æ•°è®¡ç®—çš„æ—¶é—´è¿›è¡Œæ¯”è¾ƒã€‚ä¸ºä»€ä¹ˆä¼šæœ‰å·®å¼‚ï¼Ÿ
- en: ExerciseÂ 208\. Design boolean-attributes. The function consumes an [LLists](#%28tech._itunes-data._llist%29)
    and produces the [String](part_one.html#%28tech._string%29)s that are associated
    with a [Boolean](part_one.html#%28tech._boolean%29) attribute. Hint Use create-set
    from [exerciseÂ 201](#%28counter._itunes-data._%28exercise._ex~3aitunes3%29%29).
  id: totrans-2413
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  208ï¼šè®¾è®¡ boolean-attributesã€‚è¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ª [LLists](#%28tech._itunes-data._llist%29)
    å¹¶äº§ç”Ÿä¸ [Boolean](part_one.html#%28tech._boolean%29) å±æ€§å…³è”çš„ [String](part_one.html#%28tech._string%29)ã€‚æç¤ºï¼šä½¿ç”¨
    [ç»ƒä¹  201](#%28counter._itunes-data._%28exercise._ex~3aitunes3%29%29) ä¸­çš„ create-setã€‚
- en: Once you are done, determine how many Boolean-valued attributes your iTunes
    library employs for its tracks. Do they make sense?
  id: totrans-2414
  prefs: []
  type: TYPE_NORMAL
  zh: å®Œæˆåï¼Œç¡®å®šä½ çš„ iTunes åº“ä¸ºå…¶æ›²ç›®ä½¿ç”¨äº†å¤šå°‘å¸ƒå°”å€¼å±æ€§ã€‚å®ƒä»¬æœ‰æ„ä¹‰å—ï¼Ÿ
- en: Note A list-based representation is a bit less organized than a structure-based
    one. The word semi-structured is occasionally used in this context. Such list-representations
    accommodate properties that show up rarely and thus donâ€™t fit the structure type.
    People often use such representations to explore unknown information and later
    introduce structures when the format is well-known. Design a function track-as-struct,
    which converts an [LAssoc](#%28tech._itunes-data._lassoc%29) to a [Track](#%28tech._itunes-data._track%29)
    when possible. End
  id: totrans-2415
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼šåŸºäºåˆ—è¡¨çš„è¡¨ç¤ºæ¯”åŸºäºç»“æ„çš„è¡¨ç¤ºç¨å¾®å°‘ä¸€äº›ç»„ç»‡æ€§ã€‚åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­å¶å°”ä¼šä½¿ç”¨åŠç»“æ„åŒ–è¿™ä¸ªè¯ã€‚æ­¤ç±»åˆ—è¡¨è¡¨ç¤ºå¯ä»¥å®¹çº³å¾ˆå°‘å‡ºç°ä¸”ä¸é€‚åˆç»“æ„ç±»å‹çš„å±æ€§ã€‚äººä»¬ç»å¸¸ä½¿ç”¨æ­¤ç±»è¡¨ç¤ºæ¥æ¢ç´¢æœªçŸ¥ä¿¡æ¯ï¼Œå¹¶åœ¨æ ¼å¼å·²çŸ¥æ—¶å¼•å…¥ç»“æ„ã€‚è®¾è®¡ä¸€ä¸ªåä¸º
    track-as-struct çš„å‡½æ•°ï¼Œå½“å¯èƒ½æ—¶ï¼Œå°† [LAssoc](#%28tech._itunes-data._lassoc%29) è½¬æ¢ä¸º [Track](#%28tech._itunes-data._track%29)ã€‚ç»“æŸ
- en: 12.3Word Games, Composition Illustrated[ğŸ”—](#(part._sec~3apermute-composition)
    "Link to here")
  id: totrans-2416
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 12.3 å•è¯æ¸¸æˆï¼Œç»„åˆå›¾ç¤º[ğŸ”—](#(part._sec~3apermute-composition) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'Some of you solve word puzzles in newspapers and magazines. Try this:'
  id: totrans-2417
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€äº›äººåœ¨æŠ¥çº¸å’Œæ‚å¿—ä¸Šè§£å†³å•è¯è°œé¢˜ã€‚è¯•è¯•è¿™ä¸ªï¼š
- en: Sample Problem Given a word, find all words that are made up from the same letters.
    For example â€œcatâ€ also spells â€œact.â€
  id: totrans-2418
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·ä¾‹é—®é¢˜ï¼šç»™å®šä¸€ä¸ªå•è¯ï¼Œæ‰¾å‡ºç”±ç›¸åŒå­—æ¯ç»„æˆçš„æ‰€æœ‰å•è¯ã€‚ä¾‹å¦‚ï¼Œâ€œcatâ€ä¹Ÿå¯ä»¥æ‹¼æˆâ€œactâ€ã€‚
- en: 'Letâ€™s work through an example. Suppose you are given â€œdear.â€ There are twenty-four
    possible arrangements of the four letters:'
  id: totrans-2419
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æ“ä½œã€‚å‡è®¾ä½ è¢«ç»™å‡ºäº†â€œdearâ€ã€‚æœ‰ 24 ç§å¯èƒ½çš„å››ä¸ªå­—æ¯çš„æ’åˆ—æ–¹å¼ï¼š
- en: '| ader |  | aedr |  | aerd |  | adre |  | arde |  | ared |'
  id: totrans-2420
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ader |  | aedr |  | aerd |  | adre |  | arde |  | ared |'
- en: '| daer |  | eadr |  | eard |  | dare |  | rade |  | raed |'
  id: totrans-2421
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| daer |  | eadr |  | eard |  | dare |  | rade |  | raed |'
- en: '| dear |  | edar |  | erad |  | drae |  | rdae |  | read |'
  id: totrans-2422
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| dear |  | edar |  | erad |  | drae |  | rdae |  | read |'
- en: '| dera |  | edra |  | erda |  | drea |  | rdea |  | reda |'
  id: totrans-2423
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| dera |  | edra |  | erda |  | drea |  | rdea |  | reda |'
- en: 'In this list, there are three legitimate words: â€œread,â€ â€œdear,â€ and â€œdare.â€'
  id: totrans-2424
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­ï¼Œæœ‰ä¸‰ä¸ªåˆæ³•çš„å•è¯ï¼šâ€œreadâ€ï¼Œâ€œdearâ€å’Œâ€œdareâ€ã€‚
- en: Note If a word contains the same letter twice, the collection of all re-arrangements
    may contain several copies of the same string. For our purposes, this is acceptable.
    For a realistic program, you may wish to avoid duplicate entries by using sets
    instead of lists. See [A Note on Lists and Sets](#%28part._sec~3alist-set%29).
    End
  id: totrans-2425
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼šå¦‚æœä¸€ä¸ªå•è¯åŒ…å«ç›¸åŒçš„å­—æ¯ä¸¤æ¬¡ï¼Œæ‰€æœ‰é‡æ–°æ’åˆ—çš„é›†åˆå¯èƒ½åŒ…å«å‡ ä¸ªç›¸åŒçš„å­—ç¬¦ä¸²ã€‚å°±æˆ‘ä»¬çš„ç›®çš„è€Œè¨€ï¼Œè¿™æ˜¯å¯ä»¥æ¥å—çš„ã€‚å¯¹äºç°å®ä¸–ç•Œçš„ç¨‹åºï¼Œä½ å¯èƒ½å¸Œæœ›ä½¿ç”¨é›†åˆè€Œä¸æ˜¯åˆ—è¡¨æ¥é¿å…é‡å¤æ¡ç›®ã€‚å‚è§[å…³äºåˆ—è¡¨å’Œé›†åˆçš„è¯´æ˜](#%28part._sec~3alist-set%29)ã€‚ç»“æŸ
- en: 'A systematic enumeration of all possible arrangements is clearly a task for
    a program, as is the search in an English-language dictionary.See [Real-World
    Data: Dictionaries](#%28part._sec~3adict%29) for dealing with real-world dictionaries.
    This section covers the design of the search function, leaving the solution of
    the other problem to the next section. By separating the two, this first section
    can focus on the high-level ideas of systematic program design.'
  id: totrans-2426
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹æ‰€æœ‰å¯èƒ½æ’åˆ—çš„ç³»ç»Ÿåˆ—ä¸¾æ˜¾ç„¶æ˜¯ç¨‹åºçš„ä»»åŠ¡ï¼Œå°±åƒåœ¨è‹±è¯­è¯å…¸ä¸­è¿›è¡Œæœç´¢ä¸€æ ·ã€‚å‚è§[ç°å®ä¸–ç•Œæ•°æ®ï¼šè¯å…¸](#%28part._sec~3adict%29)ä»¥å¤„ç†ç°å®ä¸–ç•Œçš„è¯å…¸ã€‚æœ¬èŠ‚æ¶µç›–äº†æœç´¢å‡½æ•°çš„è®¾è®¡ï¼Œå°†å…¶ä»–é—®é¢˜çš„è§£å†³æ–¹æ¡ˆç•™åˆ°ä¸‹ä¸€èŠ‚ã€‚é€šè¿‡åˆ†ç¦»è¿™ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæœ¬èŠ‚å¯ä»¥ä¸“æ³¨äºç³»ç»Ÿç¨‹åºè®¾è®¡çš„æ•´ä½“æ€æƒ³ã€‚
- en: Letâ€™s imagine for a moment how we might solve the problem by hand. If you had
    enough time, you might enumerate all possible arrangements of all letters in a
    given word and then just pick those variants that also occur in a dictionary.
    Clearly, a program can proceed in this way too, and this suggests a natural design
    by composition, but, as always, we proceed systematically and start by choosing
    a data representation for our inputs and outputs.
  id: totrans-2427
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æš‚æ—¶æƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬å¦‚ä½•æ‰‹åŠ¨è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœä½ æœ‰è¶³å¤Ÿçš„æ—¶é—´ï¼Œä½ å¯èƒ½ä¼šåˆ—å‡ºç»™å®šå•è¯ä¸­æ‰€æœ‰å­—æ¯çš„æ‰€æœ‰å¯èƒ½æ’åˆ—ï¼Œç„¶ååªé€‰æ‹©é‚£äº›ä¹Ÿå‡ºç°åœ¨è¯å…¸ä¸­çš„å˜ä½“ã€‚æ˜¾ç„¶ï¼Œç¨‹åºä¹Ÿå¯ä»¥ä»¥è¿™ç§æ–¹å¼è¿›è¡Œï¼Œè¿™æš—ç¤ºäº†ä¸€ç§è‡ªç„¶çš„è®¾è®¡æ–¹æ³•ï¼Œä½†ï¼Œå°±åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬ç³»ç»Ÿåœ°å¼€å§‹ï¼Œé¦–å…ˆé€‰æ‹©è¾“å…¥å’Œè¾“å‡ºçš„æ•°æ®è¡¨ç¤ºã€‚
- en: 'At least at first glance, it is natural to represent words as [String](part_one.html#%28tech._string%29)s
    and the result as a list of words or [List-of-strings](#%28tech._list._of._string%29).
    Based on this choice, we can formulate a signature and purpose statement:'
  id: totrans-2428
  prefs: []
  type: TYPE_NORMAL
  zh: è‡³å°‘ä»ç¬¬ä¸€çœ¼çœ‹æ¥ï¼Œå°†å•è¯è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²ï¼Œå°†ç»“æœè¡¨ç¤ºä¸ºå•è¯åˆ—è¡¨æˆ–å­—ç¬¦ä¸²åˆ—è¡¨æ˜¯è‡ªç„¶çš„ã€‚åŸºäºè¿™ä¸ªé€‰æ‹©ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¶å®šç­¾åå’Œç›®çš„å£°æ˜ï¼š
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  id: totrans-2429
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
- en: '| ;Â finds all words that use the same letters as s |'
  id: totrans-2430
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æŸ¥æ‰¾ä¸sä½¿ç”¨ç›¸åŒå­—æ¯çš„æ‰€æœ‰å•è¯ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (alternative-wordsÂ s)
    |'
  id: totrans-2431
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (alternative-wordsÂ s)
    |'
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2432
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: 'Next, we need some examples. If the given word is â€œcat,â€ we are dealing with
    three letters: c, a, and t. Some playing around suggests six arrangements of these
    letters: cat, cta, tca, tac, act, and atc. Two of these are actual words: â€œcatâ€
    and â€œact.â€ Because alternative-words produces a list of [String](part_one.html#%28tech._string%29)s,
    there are two ways to represent the result: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "act"  "cat")
    and ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "cat"  "act").
    Fortunately, BSL comes with a way to say the function returns one of two possible
    results:'
  id: totrans-2433
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›ç¤ºä¾‹ã€‚å¦‚æœç»™å®šçš„å•è¯æ˜¯â€œcatâ€ï¼Œæˆ‘ä»¬æ­£åœ¨å¤„ç†ä¸‰ä¸ªå­—æ¯ï¼šcï¼Œaå’Œtã€‚ä¸€äº›å°è¯•è¡¨æ˜è¿™äº›å­—æ¯æœ‰å…­ç§æ’åˆ—æ–¹å¼ï¼šcatï¼Œctaï¼Œtcaï¼Œtacï¼Œactå’Œatcã€‚å…¶ä¸­ä¸¤ä¸ªæ˜¯å®é™…å•è¯ï¼šâ€œcatâ€å’Œâ€œactâ€ã€‚å› ä¸ºalternative-wordsäº§ç”Ÿä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ‰€ä»¥æœ‰ä¸¤ç§æ–¹å¼æ¥è¡¨ç¤ºç»“æœï¼š([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "act" "cat")å’Œ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "cat" "act")ã€‚å¹¸è¿çš„æ˜¯ï¼ŒBSLæä¾›äº†ä¸€ç§è¡¨ç¤ºå‡½æ•°è¿”å›ä¸¤ç§å¯èƒ½ç»“æœçš„æ–¹æ³•ï¼š
- en: '| ([check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)Â (alternative-wordsÂ "cat")
    |'
  id: totrans-2434
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)Â (alternative-wordsÂ "cat")
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "act"Â "cat")
    |'
  id: totrans-2435
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "act"Â "cat")
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "cat"Â "act"))
    |'
  id: totrans-2436
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "cat"Â "act"))
    |'
- en: 'Stop! Read up on [check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)
    in the documentation.Working through this example exposes two problems:'
  id: totrans-2437
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼åœ¨æ–‡æ¡£ä¸­æŸ¥é˜… [check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)ã€‚é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸¤ä¸ªé—®é¢˜ï¼š
- en: 'The first one is about testing. Suppose we had used the word â€œratâ€ for which
    there are three alternatives: â€œrat,â€ â€œtar,â€ and â€œart.â€ In this case, we would
    have to formulate six lists, each of which might be the result of the function.
    For a word like â€œdearâ€ with four possible alternatives, formulating a test would
    be even harder.'
  id: totrans-2438
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªé—®é¢˜å…³äºæµ‹è¯•ã€‚å‡è®¾æˆ‘ä»¬ä½¿ç”¨äº†å•è¯ "rat"ï¼Œå®ƒæœ‰ä¸‰ä¸ªæ›¿ä»£è¯ï¼š"rat"ã€"tar" å’Œ "art"ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»åˆ¶å®šå…­ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªåˆ—è¡¨å¯èƒ½æ˜¯å‡½æ•°çš„ç»“æœã€‚å¯¹äºä¸€ä¸ªæœ‰å››ä¸ªå¯èƒ½æ›¿ä»£è¯çš„å•è¯ï¼Œå¦‚
    "dear"ï¼Œåˆ¶å®šæµ‹è¯•ä¼šæ›´éš¾ã€‚
- en: The second problem concerns the choice of word representation. Although [String](part_one.html#%28tech._string%29)
    looks natural at first, the examples clarify that some of our functions must view
    words as sequences of letters, with the possibility of rearranging them at will.
    It is possible to rearrange the letters within a [String](part_one.html#%28tech._string%29),
    but lists of letters are obviously better suited for this purpose.
  id: totrans-2439
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬äºŒä¸ªé—®é¢˜æ¶‰åŠè¯è¡¨ç¤ºçš„é€‰æ‹©ã€‚è™½ç„¶ [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) åœ¨ä¸€å¼€å§‹çœ‹èµ·æ¥å¾ˆè‡ªç„¶ï¼Œä½†ä¾‹å­æ¾„æ¸…äº†ä¸€äº›æˆ‘ä»¬çš„å‡½æ•°å¿…é¡»å°†å•è¯è§†ä¸ºå­—æ¯çš„åºåˆ—ï¼Œå¹¶ä¸”å¯ä»¥éšæ„é‡æ–°æ’åˆ—å®ƒä»¬ã€‚å¯ä»¥åœ¨
    [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) å†…é‡æ–°æ’åˆ—å­—æ¯ï¼Œä½†å­—æ¯åˆ—è¡¨æ˜¾ç„¶æ›´é€‚åˆè¿™ä¸ªç›®çš„ã€‚
- en: Letâ€™s deal with these problems one at a time, starting with tests.
  id: totrans-2440
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä¸€æ¬¡è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œä»æµ‹è¯•å¼€å§‹ã€‚
- en: Assume we wish to formulate a test for alternative-words and "rat". From the
    above, we know that the result must contain "rat", "tar", and "art", but we cannot
    know in which order these words show up in the result.
  id: totrans-2441
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬å¸Œæœ›åˆ¶å®šä¸€ä¸ªé’ˆå¯¹æ›¿ä»£å•è¯ "rat" çš„æµ‹è¯•ã€‚ä»ä¸Šé¢ï¼Œæˆ‘ä»¬çŸ¥é“ç»“æœå¿…é¡»åŒ…å« "rat"ã€"tar" å’Œ "art"ï¼Œä½†æˆ‘ä»¬æ— æ³•çŸ¥é“è¿™äº›å•è¯åœ¨ç»“æœä¸­å‡ºç°çš„é¡ºåºã€‚
- en: 'In this situation, [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    comes in handy.See [Intermezzo 1: Beginning Student Language](i1-2.html). We can
    use it with a function that checks whether a list of [String](part_one.html#%28tech._string%29)s
    contains our three [String](part_one.html#%28tech._string%29)s:'
  id: totrans-2442
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ[check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    éå¸¸æœ‰ç”¨ã€‚å‚è§ [é—´å¥æ›² 1ï¼šåˆå­¦è€…è¯­è¨€å…¥é—¨](i1-2.html)ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å®ƒä¸ä¸€ä¸ªæ£€æŸ¥ [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)
    åˆ—è¡¨æ˜¯å¦åŒ…å«æˆ‘ä»¬çš„ä¸‰ä¸ª [å­—ç¬¦ä¸²](part_one.html#%28tech._string%29) çš„å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼š
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-2443
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [å­—ç¬¦ä¸²åˆ—è¡¨](#%28tech._list._of._string%29) -> [å¸ƒå°”å€¼](part_one.html#%28tech._boolean%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (all-words-from-rat?Â w)
    |'
  id: totrans-2444
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (all-words-from-rat?Â w)
    |'
- en: '| Â Â ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "rat"Â w)
    |'
  id: totrans-2445
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([å’Œ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([æˆå‘˜?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "rat"Â w)
    |'
- en: '| Â Â Â Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "art"Â w)
    |'
  id: totrans-2446
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â ([æˆå‘˜?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "art"Â w)
    |'
- en: '| Â Â Â Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "tar"Â w)))
    |'
  id: totrans-2447
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â ([æˆå‘˜?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "tar"Â w)))
    |'
- en: 'With this function, it is easy to formulate a test for alternative-words:'
  id: totrans-2448
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¾ˆå®¹æ˜“åˆ¶å®šä¸€ä¸ªé’ˆå¯¹æ›¿ä»£å•è¯çš„æµ‹è¯•ï¼š
- en: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)Â (alternative-wordsÂ "rat")
    |'
  id: totrans-2449
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    (alternative-words "rat"))'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â all-words-from-rat?) |'
  id: totrans-2450
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   all-words-from-rat? |'
- en: Note on Data versus Design What this discussion suggests is that the alternative-words
    function constructs a set, not a list. For a detailed discussion of the differences,
    see [A Note on Lists and Sets](#%28part._sec~3alist-set%29). Here it suffices
    to know that sets represent collections of values without regard to the ordering
    of the values or how often these values occur. When a language comes without support
    for data representations of sets, programmers tend to resort to a close alternative,
    such as the List-of-strings representation here. As programs grow, this choice
    may haunt programmers, but addressing this kind of problem is the subject of the
    second book. End
  id: totrans-2451
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºæ•°æ®ä¸è®¾è®¡çš„ç¬”è®° è¿™æ®µè®¨è®ºè¡¨æ˜ï¼Œæ›¿ä»£è¯å‡½æ•°æ„å»ºçš„æ˜¯ä¸€ä¸ªé›†åˆï¼Œè€Œä¸æ˜¯åˆ—è¡¨ã€‚å…³äºå·®å¼‚çš„è¯¦ç»†è®¨è®ºï¼Œè¯·å‚é˜…[A Note on Lists and Sets](#%28part._sec~3alist-set%29)ã€‚åœ¨è¿™é‡Œï¼Œåªéœ€çŸ¥é“é›†åˆè¡¨ç¤ºçš„æ˜¯ä¸€ç»„å€¼ï¼Œä¸è€ƒè™‘å€¼çš„é¡ºåºæˆ–è¿™äº›å€¼å‡ºç°çš„é¢‘ç‡ã€‚å½“ä¸€ä¸ªè¯­è¨€æ²¡æœ‰æ”¯æŒé›†åˆçš„æ•°æ®è¡¨ç¤ºæ—¶ï¼Œç¨‹åºå‘˜å¾€å¾€ä¼šæ±‚åŠ©äºä¸€ä¸ªæ¥è¿‘çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä¾‹å¦‚è¿™é‡Œä½¿ç”¨çš„å­—ç¬¦ä¸²åˆ—è¡¨è¡¨ç¤ºã€‚éšç€ç¨‹åºçš„å¢é•¿ï¼Œè¿™ä¸ªé€‰æ‹©å¯èƒ½ä¼šå›°æ‰°ç¨‹åºå‘˜ï¼Œä½†è§£å†³è¿™ç±»é—®é¢˜æ˜¯ç¬¬äºŒæœ¬ä¹¦çš„ä¸»é¢˜ã€‚ç»“æŸ
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-2452
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: ;   [List-of-strings](#%28tech._list._of._string%29) -> [Boolean](part_one.html#%28tech._boolean%29)
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (all-words-from-rat?Â w)
    |'
  id: totrans-2453
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (all-words-from-rat? w)'
- en: '| Â Â ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)
    |'
  id: totrans-2454
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)'
- en: '| Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "rat"Â w)Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "art"Â w)Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "tar"Â w)))
    |'
  id: totrans-2455
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    "rat" w) ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    "art" w) ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    "tar" w)))'
- en: '| Â  |'
  id: totrans-2456
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |'
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  id: totrans-2457
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: ;   [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
- en: '| ;Â finds all words that the letters of some given word spell |'
  id: totrans-2458
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: ;   finds all words that the letters of some given word spell
- en: '| Â  |'
  id: totrans-2459
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |'
- en: '| ([check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)Â (alternative-wordsÂ "cat")
    |'
  id: totrans-2460
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)
    (alternative-words "cat"))'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "act"Â "cat")
    |'
  id: totrans-2461
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "act" "cat") |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "cat"Â "act"))
    |'
  id: totrans-2462
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |   ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "cat" "act"))'
- en: '| Â  |'
  id: totrans-2463
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)Â (alternative-wordsÂ "rat")
    |'
  id: totrans-2464
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    (alternative-words "rat"))'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â all-words-from-rat?) |'
  id: totrans-2465
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |   all-words-from-rat?)'
- en: '| Â  |'
  id: totrans-2466
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (alternative-wordsÂ s)
    |'
  id: totrans-2467
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (alternative-words s)
- en: '| Â Â (in-dictionary |'
  id: totrans-2468
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   (in-dictionary'
- en: '| Â Â Â Â (words->stringsÂ (arrangementsÂ (string->wordÂ s))))) |'
  id: totrans-2469
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   (words->strings (arrangements (string->word s)))) |'
- en: '| Â  |'
  id: totrans-2470
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |'
- en: '| ;Â [List-of-words](#%28tech._list._of._word%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  id: totrans-2471
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-words](#%28tech._list._of._word%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
- en: '| ;Â turns all [Word](#%28tech._word%29)s in low into [String](part_one.html#%28tech._string%29)s
    |'
  id: totrans-2472
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†æ‰€æœ‰ä½çº§çš„[Word](#%28tech._word%29)è½¬æ¢ä¸º[String](part_one.html#%28tech._string%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words->stringsÂ low)Â ''())
    |'
  id: totrans-2473
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words->stringsÂ low)Â ''())
    |'
- en: '| Â  |'
  id: totrans-2474
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  id: totrans-2475
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
- en: '| ;Â picks out all those [String](part_one.html#%28tech._string%29)s that occur
    in the dictionary |'
  id: totrans-2476
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»å­—å…¸ä¸­æŒ‘é€‰å‡ºæ‰€æœ‰å‡ºç°çš„[String](part_one.html#%28tech._string%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (in-dictionaryÂ los)Â ''())
    |'
  id: totrans-2477
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (in-dictionaryÂ los)Â ''())
    |'
- en: ''
  id: totrans-2478
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 78: Finding alternative words'
  id: totrans-2479
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾78ï¼šå¯»æ‰¾æ›¿ä»£å•è¯
- en: 'For the problem with a word representation, we punt to the next section. Specifically,
    we say that the next section introduces (1) a data representation for [Word](#%28tech._word%29)s
    suitable for rearranging letters, (2) a data definition for [List-of-words](#%28tech._list._of._word%29),
    and (3) a function that maps a [Word](#%28tech._word%29) to a [List-of-words](#%28tech._list._of._word%29),
    meaning a list of all possible rearrangements:'
  id: totrans-2480
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºå•è¯è¡¨ç¤ºçš„é—®é¢˜ï¼Œæˆ‘ä»¬å°†å…¶æ¨è¿Ÿåˆ°ä¸‹ä¸€èŠ‚ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬è¯´ä¸‹ä¸€èŠ‚ä»‹ç»äº†ï¼ˆ1ï¼‰é€‚åˆé‡æ–°æ’åˆ—å­—æ¯çš„[Word](#%28tech._word%29)çš„æ•°æ®è¡¨ç¤ºï¼Œï¼ˆ2ï¼‰[List-of-words](#%28tech._list._of._word%29)çš„æ•°æ®å®šä¹‰ï¼Œä»¥åŠï¼ˆ3ï¼‰å°†[Word](#%28tech._word%29)æ˜ å°„åˆ°[List-of-words](#%28tech._list._of._word%29)çš„å‡½æ•°ï¼Œå³æ‰€æœ‰å¯èƒ½çš„æ’åˆ—åˆ—è¡¨ï¼š
- en: '| ;Â A Word is ... |'
  id: totrans-2481
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªå•è¯æ˜¯ ... |'
- en: '| Â  |'
  id: totrans-2482
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A List-of-words is ... |'
  id: totrans-2483
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªå•è¯åˆ—è¡¨æ˜¯ ... |'
- en: '| Â  |'
  id: totrans-2484
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Word](#%28tech._word%29) -> [List-of-words](#%28tech._list._of._word%29)
    |'
  id: totrans-2485
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Word](#%28tech._word%29) -> [List-of-words](#%28tech._list._of._word%29)
    |'
- en: '| ;Â finds all rearrangements of word |'
  id: totrans-2486
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ‰¾åˆ°å•è¯çš„æ‰€æœ‰æ’åˆ— |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (arrangementsÂ word)
    |'
  id: totrans-2487
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (arrangementsÂ word)
    |'
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â word))
    |'
  id: totrans-2488
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â å•è¯))
    |'
- en: 'ExerciseÂ 209\. The above leaves us with two additional wishes: a function that
    consumes a [String](part_one.html#%28tech._string%29) and produces its corresponding
    [Word](#%28tech._word%29), and a function for the opposite direction. Here are
    the wish-list entries:'
  id: totrans-2489
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 209. ä¸Šè¿°å†…å®¹ç»™æˆ‘ä»¬ç•™ä¸‹äº†ä¸¤ä¸ªé¢å¤–çš„æ„¿æœ›ï¼šä¸€ä¸ªå‡½æ•°æ¶ˆè€—ä¸€ä¸ª[String](part_one.html#%28tech._string%29)å¹¶äº§ç”Ÿå…¶å¯¹åº”çš„[Word](#%28tech._word%29)ï¼Œä»¥åŠä¸€ä¸ªç›¸åæ–¹å‘çš„å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯æ„¿æœ›æ¸…å•æ¡ç›®ï¼š
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [Word](#%28tech._word%29)
    |'
  id: totrans-2490
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [String](part_one.html#%28tech._string%29) -> [Word](#%28tech._word%29)
    |'
- en: '| ;Â converts s to the chosen word representation |'
  id: totrans-2491
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†sè½¬æ¢ä¸ºé€‰å®šçš„å•è¯è¡¨ç¤º |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (string->wordÂ s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2492
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (string->wordÂ s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| Â  |'
  id: totrans-2493
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Word](#%28tech._word%29) -> [String](part_one.html#%28tech._string%29)
    |'
  id: totrans-2494
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Word](#%28tech._word%29) -> [String](part_one.html#%28tech._string%29)
    |'
- en: '| ;Â converts w to a string |'
  id: totrans-2495
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†wè½¬æ¢ä¸ºå­—ç¬¦ä¸² |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (word->stringÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2496
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (word->stringÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: Look up the data definition for [Word](#%28tech._word%29) in the next section
    and complete the definitions of string->word and word->string. Hint You may wish
    to look in the list of functions that BSL provides.
  id: totrans-2497
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸‹ä¸€èŠ‚ä¸­æŸ¥æ‰¾[Word](#%28tech._word%29)çš„æ•°æ®å®šä¹‰ï¼Œå¹¶å®Œæˆstring->wordå’Œword->stringçš„å®šä¹‰ã€‚æç¤ºï¼šä½ å¯èƒ½éœ€è¦æŸ¥çœ‹BSLæä¾›çš„å‡½æ•°åˆ—è¡¨ã€‚
- en: 'With those two small problems out of the way, we return to the design of alternative-words.
    We now have: (1) a signature, (2) a purpose statement, (3) examples and test,
    (4) an insight concerning our choice of data representation, and (5) an idea of
    how to decompose the problem into two major steps.'
  id: totrans-2498
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è§£å†³è¿™ä¸¤ä¸ªå°é—®é¢˜ä¹‹åï¼Œæˆ‘ä»¬å›åˆ°æ›¿ä»£å•è¯çš„è®¾è®¡ã€‚æˆ‘ä»¬ç°åœ¨æœ‰ï¼š(1)ä¸€ä¸ªç­¾åï¼Œ(2)ä¸€ä¸ªç›®çš„å£°æ˜ï¼Œ(3)ç¤ºä¾‹å’Œæµ‹è¯•ï¼Œ(4)å…³äºæˆ‘ä»¬é€‰æ‹©æ•°æ®è¡¨ç¤ºçš„è§è§£ï¼Œä»¥åŠ(5)å¦‚ä½•å°†é—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªä¸»è¦æ­¥éª¤çš„æƒ³æ³•ã€‚
- en: 'So, instead of creating a template, we write down the composition we have in
    mind:'
  id: totrans-2499
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæˆ‘ä»¬ä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ï¼Œè€Œæ˜¯å†™ä¸‹æˆ‘ä»¬å¿ƒä¸­çš„ç»„åˆï¼š
- en: (in-dictionaryÂ (arrangementsÂ s))
  id: totrans-2500
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (in-dictionaryÂ (arrangementsÂ s))
- en: The expression says that, given a word s, we use arrangements to create a list
    of all possible rearrangements of the letters and in-dictionary to select those
    rearrangements that also occur in a dictionary.
  id: totrans-2501
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨è¾¾å¼è¡¨æ˜ï¼Œç»™å®šä¸€ä¸ªå•è¯sï¼Œæˆ‘ä»¬ä½¿ç”¨æ’åˆ—æ¥åˆ›å»ºæ‰€æœ‰å¯èƒ½çš„å­—æ¯æ’åˆ—åˆ—è¡¨ï¼Œå¹¶ä½¿ç”¨in-dictionaryæ¥é€‰æ‹©é‚£äº›ä¹Ÿå‡ºç°åœ¨å­—å…¸ä¸­çš„æ’åˆ—ã€‚
- en: Stop! Look up the signatures for the two functions to make sure the composition
    works out. What exactly do you need to check?
  id: totrans-2502
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼æŸ¥æ‰¾è¿™ä¸¤ä¸ªå‡½æ•°çš„ç­¾åï¼Œä»¥ç¡®ä¿ç»„åˆæœ‰æ•ˆã€‚ä½ éœ€è¦æ£€æŸ¥ä»€ä¹ˆï¼Ÿ
- en: 'What this expression fails to capture is the fourth point, the decision not
    to use plain strings to rearrange the letters. Before we hand s to arrangements,
    we need to convert it into a word. Fortunately, [exerciseÂ 209](#%28counter._%28exercise._ex~3astring2word%29%29)
    asks for just such a function:'
  id: totrans-2503
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè¡¨è¾¾å¼æœªèƒ½æ•æ‰åˆ°çš„ç¬¬å››ç‚¹æ˜¯ï¼Œå†³å®šä¸ä½¿ç”¨æ™®é€šå­—ç¬¦ä¸²æ¥æ’åˆ—å­—æ¯ã€‚åœ¨æˆ‘ä»¬å°†sä¼ é€’ç»™æ’åˆ—ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢ä¸ºå•è¯ã€‚å¹¸è¿çš„æ˜¯ï¼Œ[ç»ƒä¹ 209](#%28counter._%28exercise._ex~3astring2word%29%29)è¦æ±‚è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼š
- en: '| (in-dictionary |'
  id: totrans-2504
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (in-dictionary |'
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (arrangementsÂ (string->wordÂ s))))
    |'
  id: totrans-2505
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (arrangementsÂ (string->wordÂ s))))
    |'
- en: 'Similarly, we need to convert the resulting list of words to a list of strings.
    While [exerciseÂ 209](#%28counter._%28exercise._ex~3astring2word%29%29) asks for
    a function that converts a single word, here we need a function that deals with
    lists of them. Time to make another wish:'
  id: totrans-2506
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ ·ï¼Œæˆ‘ä»¬éœ€è¦å°†ç”Ÿæˆçš„å•è¯åˆ—è¡¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ã€‚è™½ç„¶[ç»ƒä¹ 209](#%28counter._%28exercise._ex~3astring2word%29%29)è¦æ±‚ä¸€ä¸ªè½¬æ¢å•ä¸ªå•è¯çš„å‡½æ•°ï¼Œä½†è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¤„ç†å•è¯åˆ—è¡¨çš„å‡½æ•°ã€‚æ˜¯æ—¶å€™å†è®¸ä¸€ä¸ªæ„¿äº†ï¼š
- en: '| (in-dictionary |'
  id: totrans-2507
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (in-dictionary |'
- en: '| Â Â (words->strings |'
  id: totrans-2508
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (words->strings |'
- en: '| Â Â Â Â (arrangementsÂ (string->wordÂ s)))) |'
  id: totrans-2509
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (arrangementsÂ (string->wordÂ s)))) |'
- en: Stop! What is the signature for words->strings and what is its purpose?
  id: totrans-2510
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼words->stringsçš„ç­¾åæ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ
- en: '[FigureÂ 78](#%28counter._%28figure._fig~3aalternative-words%29%29) collects
    all the pieces. The following exercises ask you to design the remaining functions.'
  id: totrans-2511
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾78](#%28counter._%28figure._fig~3aalternative-words%29%29)æ”¶é›†äº†æ‰€æœ‰è¿™äº›ç‰‡æ®µã€‚æ¥ä¸‹æ¥çš„ç»ƒä¹ è¦æ±‚ä½ è®¾è®¡å‰©ä½™çš„å‡½æ•°ã€‚'
- en: ExerciseÂ 210\. Complete the design of the words->strings function specified
    in [figureÂ 78](#%28counter._%28figure._fig~3aalternative-words%29%29). Hint Use
    your solution to [exerciseÂ 209](#%28counter._%28exercise._ex~3astring2word%29%29).
  id: totrans-2512
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 210ã€‚å®Œæˆ[å›¾78](#%28counter._%28figure._fig~3aalternative-words%29%29)ä¸­æŒ‡å®šçš„words->stringså‡½æ•°çš„è®¾è®¡ã€‚æç¤ºï¼šä½¿ç”¨[ç»ƒä¹ 209](#%28counter._%28exercise._ex~3astring2word%29%29)çš„è§£å†³æ–¹æ¡ˆã€‚
- en: 'ExerciseÂ 211\. Complete the design of in-dictionary, specified in [figureÂ 78](#%28counter._%28figure._fig~3aalternative-words%29%29).
    Hint See [Real-World Data: Dictionaries](#%28part._sec~3adict%29) for how to read
    a dictionary.'
  id: totrans-2513
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 211ã€‚å®Œæˆ[å›¾78](#%28counter._%28figure._fig~3aalternative-words%29%29)ä¸­æŒ‡å®šçš„in-dictionaryå‡½æ•°çš„è®¾è®¡ã€‚æç¤ºï¼šå‚è§[ç°å®ä¸–ç•Œæ•°æ®ï¼šå­—å…¸](#%28part._sec~3adict%29)äº†è§£å¦‚ä½•è¯»å–å­—å…¸ã€‚
- en: 12.4Word Games, the Heart of the Problem[ğŸ”—](#(part._sec~3apermute) "Link to
    here")
  id: totrans-2514
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 12.4 å•è¯æ¸¸æˆï¼Œé—®é¢˜çš„æ ¸å¿ƒ[ğŸ”—](#(part._sec~3apermute) "é“¾æ¥åˆ°è¿™é‡Œ")
- en: The goal is to design arrangements, a function that consumes a [Word](#%28tech._word%29)
    and produces a list of the wordâ€™s letter-by-letter rearrangements.The mathematical
    term is permutations. This extended exercise reinforces the need for deep wish
    lists, that is, a list of desired functions that seems to grow with every function
    you finish.
  id: totrans-2515
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®æ ‡æ˜¯è®¾è®¡ä¸€ç§æ’åˆ—æ–¹æ¡ˆï¼Œè¿™æ˜¯ä¸€ä¸ªæ¶ˆè€—ä¸€ä¸ª[å•è¯](#%28tech._word%29)å¹¶äº§ç”Ÿè¯¥å•è¯å­—æ¯é€ä¸ªæ’åˆ—åˆ—è¡¨çš„å‡½æ•°ã€‚æ•°å­¦æœ¯è¯­æ˜¯æ’åˆ—ã€‚è¿™ä¸ªæ‰©å±•ç»ƒä¹ å¼ºè°ƒäº†æ·±åº¦æ„¿æœ›æ¸…å•çš„éœ€æ±‚ï¼Œå³ï¼Œä¸€ä¸ªä¼¼ä¹éšç€ä½ å®Œæˆæ¯ä¸ªå‡½æ•°è€Œå¢é•¿çš„æ‰€éœ€å‡½æ•°åˆ—è¡¨ã€‚
- en: 'As mentioned, [String](part_one.html#%28tech._string%29)s could serve as a
    representation of words, but a [String](part_one.html#%28tech._string%29) is atomic
    and the very fact that arrangements needs to rearrange its letters calls for a
    different representation. Our chosen data representation of a word is therefore
    a list of [1String](part_one.html#%28tech._1string%29)s where each item in the
    input represents a letter:'
  id: totrans-2516
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å‰æ‰€è¿°ï¼Œ[å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)å¯ä»¥ä½œä¸ºå•è¯çš„è¡¨ç¤ºï¼Œä½†ä¸€ä¸ª[å­—ç¬¦ä¸²](part_one.html#%28tech._string%29)æ˜¯åŸå­çš„ï¼Œå¹¶ä¸”éœ€è¦é‡æ–°æ’åˆ—å…¶å­—æ¯çš„äº‹å®è¦æ±‚ä½¿ç”¨ä¸åŒçš„è¡¨ç¤ºã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€‰æ‹©çš„æ•°æ®è¡¨ç¤ºå•è¯æ˜¯ä¸€ä¸ª[1String](part_one.html#%28tech._1string%29)çš„åˆ—è¡¨ï¼Œå…¶ä¸­è¾“å…¥ä¸­çš„æ¯ä¸ªé¡¹ç›®ä»£è¡¨ä¸€ä¸ªå­—æ¯ï¼š
- en: '| ;Â A Word is one of: |'
  id: totrans-2517
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å•è¯å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“  ''() or |'
  id: totrans-2518
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() æˆ–'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [1String](part_one.html#%28tech._1string%29)  [Word](#%28tech._word%29))
    |'
  id: totrans-2519
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [1String](part_one.html#%28tech._1string%29)  [å•è¯](#%28tech._word%29))
    |'
- en: '| ;Â interpretation a [Word](#%28tech._word%29) is a list of [1String](part_one.html#%28tech._1string%29)s
    (letters) |'
  id: totrans-2520
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è§£é‡Šï¼šä¸€ä¸ª[å•è¯](#%28tech._word%29)æ˜¯ä¸€ä¸ª[1String](part_one.html#%28tech._1string%29)ï¼ˆå­—æ¯ï¼‰çš„åˆ—è¡¨
    |'
- en: ExerciseÂ 212\. Write down the data definition for List-of-words. Make up examples
    of [Word](#%28tech._word%29)s and [List-of-words](#%28tech._list._of._word%29).
    Finally, formulate the functional example from above with [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29).
    Instead of the full example, consider working with a word of just two letters,
    say "d" and "e".
  id: totrans-2521
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 212ã€‚å†™ä¸‹å•è¯åˆ—è¡¨çš„æ•°æ®å®šä¹‰ã€‚ä¸º[å•è¯](#%28tech._word%29)å’Œ[å•è¯åˆ—è¡¨](#%28tech._list._of._word%29)ç¼–å†™ç¤ºä¾‹ã€‚æœ€åï¼Œä½¿ç”¨[check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)ä»ä¸Šé¢çš„åŠŸèƒ½ç¤ºä¾‹ä¸­åˆ¶å®šä¸€ä¸ªã€‚è€ƒè™‘ä½¿ç”¨åªæœ‰ä¸¤ä¸ªå­—æ¯çš„å•è¯ï¼Œä¾‹å¦‚
    "d" å’Œ "e"ã€‚
- en: 'The template of arrangements is that of a list-processing function:'
  id: totrans-2522
  prefs: []
  type: TYPE_NORMAL
  zh: æ’åˆ—çš„æ¨¡æ¿æ˜¯ä¸€ä¸ªåˆ—è¡¨å¤„ç†å‡½æ•°ï¼š
- en: '| ;Â [Word](#%28tech._word%29) -> [List-of-words](#%28tech._list._of._word%29)
    |'
  id: totrans-2523
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [å•è¯](#%28tech._word%29) -> [å•è¯åˆ—è¡¨](#%28tech._list._of._word%29) |'
- en: '| ;Â creates all rearrangements of the letters in w |'
  id: totrans-2524
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åˆ›å»ºå•è¯ w ä¸­å­—æ¯çš„æ‰€æœ‰æ’åˆ— |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (arrangementsÂ w)
    |'
  id: totrans-2525
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (arrangementsÂ w)
    |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-2526
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-2527
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-2528
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (arrangementsÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  id: totrans-2529
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (arrangementsÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
- en: 'In preparation of the fifth step, letâ€™s look at the templateâ€™s [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines:'
  id: totrans-2530
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å‡†å¤‡ç¬¬äº”æ­¥ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ¨¡æ¿çš„ [æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    è¡Œï¼š
- en: 'If the input is ''(), there is only one possible rearrangement of the input:
    the ''() word. Hence the result is ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ''()),
    the list that contains the empty list as the only item.'
  id: totrans-2531
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœè¾“å…¥æ˜¯ '()ï¼Œåˆ™è¾“å…¥åªæœ‰ä¸€ä¸ªå¯èƒ½çš„æ’åˆ—ï¼š'() è¿™ä¸ªå•è¯ã€‚å› æ­¤ç»“æœæ˜¯ ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    '())ï¼ŒåŒ…å«ç©ºåˆ—è¡¨ä½œä¸ºå”¯ä¸€é¡¹çš„åˆ—è¡¨ã€‚
- en: Otherwise there is a first letter in the word, and ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  w)
    is that letter. Also, the recursion produces the list of all possible rearrangements
    for the rest of the word. For example, if the list is
  id: totrans-2532
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦åˆ™ï¼Œå•è¯ä¸­æœ‰ä¸€ä¸ªé¦–å­—æ¯ï¼Œå¹¶ä¸”([é¦–å­—æ¯](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    w) å°±æ˜¯é‚£ä¸ªå­—æ¯ã€‚æ­¤å¤–ï¼Œé€’å½’ä¼šäº§ç”Ÿå•è¯å…¶ä½™éƒ¨åˆ†æ‰€æœ‰å¯èƒ½çš„æ’åˆ—åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåˆ—è¡¨æ˜¯
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "d"Â "e"Â "r")
  id: totrans-2533
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "d"Â "e"Â "r")
- en: then the recursion is (arrangements  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "e"  "r")).
    It will produce the result
  id: totrans-2534
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œé€’å½’æ˜¯ (æ’åˆ— ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    "e" "r")). å®ƒå°†äº§ç”Ÿä»¥ä¸‹ç»“æœ
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "e"Â "r")
    |'
  id: totrans-2535
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "e"Â "r")
    |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "r"Â "e")
    |'
  id: totrans-2536
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([æ„é€ ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "r"Â "e")
    |'
- en: '| Â Â Â Â ''())) |'
  id: totrans-2537
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ''())) |'
- en: To obtain all possible rearrangements for the entire list, we must now insert
    the first item, "d" in our case, into all of these words between all possible
    letters and at the beginning and end.
  id: totrans-2538
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ä¸ºäº†è·å¾—æ•´ä¸ªåˆ—è¡¨çš„æ‰€æœ‰å¯èƒ½çš„æ’åˆ—ï¼Œæˆ‘ä»¬ç°åœ¨å¿…é¡»å°†ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Œâ€œdâ€åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæ’å…¥åˆ°æ‰€æœ‰è¿™äº›å•è¯ä¹‹é—´æ‰€æœ‰å¯èƒ½çš„å­—æ¯ä»¥åŠå¼€å§‹å’Œç»“æŸä½ç½®ã€‚
- en: 'Our analysis suggests that we can complete arrangements if we can somehow insert
    one letter into all positions of many different words. The last aspect of this
    task description implicitly mentions lists and, following the advice of this chapter,
    calls for an auxiliary function. Letâ€™s call this function insert-everywhere/in-all-words
    and letâ€™s use it to complete the definition of arrangements:'
  id: totrans-2539
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„åˆ†æè¡¨æ˜ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä»¥æŸç§æ–¹å¼å°†ä¸€ä¸ªå­—æ¯æ’å…¥åˆ°è®¸å¤šä¸åŒå•è¯çš„æ‰€æœ‰ä½ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®Œæˆæ’åˆ—ã€‚è¿™ä¸ªä»»åŠ¡æè¿°çš„æœ€åä¸€ä¸ªæ–¹é¢éšå¼åœ°æåˆ°äº†åˆ—è¡¨ï¼Œå¹¶éµå¾ªæœ¬ç« çš„å»ºè®®ï¼Œè¦æ±‚ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚è®©æˆ‘ä»¬ç§°è¿™ä¸ªå‡½æ•°ä¸º
    insert-everywhere/in-all-wordsï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å®Œæˆæ’åˆ—çš„å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (arrangementsÂ w)
    |'
  id: totrans-2540
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (æ’åˆ—
    w) |'
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  id: totrans-2541
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([æ¡ä»¶](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â ''())]
    |'
  id: totrans-2542
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [([ç©ºï¼Ÿ](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    w) ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    ''())] |'
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (insert-everywhere/in-all-wordsÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)
    |'
  id: totrans-2543
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|    Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (insert-everywhere/in-all-wordsÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (arrangementsÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))]))
    |'
  id: totrans-2544
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|    Â Â Â (arrangementsÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))]))
    |'
- en: ExerciseÂ 213\. Design insert-everywhere/in-all-words. It consumes a [1String](part_one.html#%28tech._1string%29)
    and a list of words. The result is a list of words like its second argument, but
    with the first argument inserted at the beginning, between all letters, and at
    the end of all words of the given list.
  id: totrans-2545
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  213\. è®¾è®¡ insert-everywhere/in-all-wordsã€‚å®ƒæ¶ˆè€—ä¸€ä¸ª [1String](part_one.html#%28tech._1string%29)
    å’Œä¸€ä¸ªå•è¯åˆ—è¡¨ã€‚ç»“æœæ˜¯åƒå…¶ç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·çš„å•è¯åˆ—è¡¨ï¼Œä½†ç¬¬ä¸€ä¸ªå‚æ•°è¢«æ’å…¥åˆ°æ‰€æœ‰å•è¯çš„å¼€å§‹ã€æ‰€æœ‰å­—æ¯ä¹‹é—´ä»¥åŠæ‰€æœ‰ç»™å®šå•è¯çš„æœ«å°¾ã€‚
- en: Start with a complete wish-list entry. Supplement it with tests for empty lists,
    a list with a one-letter word, and another list with a two-letter word, and the
    like. Before you continue, study the following three hints carefully.
  id: totrans-2546
  prefs: []
  type: TYPE_NORMAL
  zh: ä»ä¸€ä¸ªå®Œæ•´çš„æ„¿æœ›æ¸…å•æ¡ç›®å¼€å§‹ã€‚ç”¨æµ‹è¯•æ¥è¡¥å……ç©ºåˆ—è¡¨ã€åªæœ‰ä¸€ä¸ªå­—æ¯çš„å•è¯åˆ—è¡¨ä»¥åŠå¦ä¸€ä¸ªæœ‰ä¸¤ä¸ªå­—æ¯çš„å•è¯åˆ—è¡¨ç­‰ã€‚åœ¨ç»§ç»­ä¹‹å‰ï¼Œä»”ç»†ç ”ç©¶ä»¥ä¸‹ä¸‰ä¸ªæç¤ºã€‚
- en: 'Hints (1) Reconsider the example from above. It says that "d" needs to be inserted
    into the words ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "e"  "r")
    and ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "r"  "e").
    The following application is therefore one natural candidate for an example:'
  id: totrans-2547
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤º (1) é‡æ–°è€ƒè™‘ä¸Šé¢çš„ä¾‹å­ã€‚å®ƒè¯´ "d" éœ€è¦æ’å…¥åˆ°å•è¯ ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "e"  "r")
    å’Œ ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "r"  "e")
    ä¸­ã€‚å› æ­¤ï¼Œä»¥ä¸‹åº”ç”¨æ˜¯è‡ªç„¶çš„ä¸€ä¸ªä¾‹å­ï¼š
- en: '| (insert-everywhere/in-all-wordsÂ "d" |'
  id: totrans-2548
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (åœ¨æ‰€æœ‰ä½ç½®/æ‰€æœ‰å•è¯ä¸­æ’å…¥ "d" |'
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "e"Â "r")
    |'
  id: totrans-2549
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "e"Â "r")
    |'
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "r"Â "e")
    |'
  id: totrans-2550
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|  Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "r"Â "e")
    |'
- en: '| Â Â Â Â Â Â ''()))) |'
  id: totrans-2551
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|    Â Â Â Â Â ''()))) |'
- en: '(2) You want to use the BSL+ operation [append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._append%29%29),
    which consumes two lists and produces the concatenation of the two lists:'
  id: totrans-2552
  prefs: []
  type: TYPE_NORMAL
  zh: (2) ä½ æƒ³ä½¿ç”¨ BSL+ æ“ä½œ [append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._append%29%29)ï¼Œå®ƒæ¶ˆè€—ä¸¤ä¸ªåˆ—è¡¨å¹¶äº§ç”Ÿä¸¤ä¸ªåˆ—è¡¨çš„è¿æ¥ï¼š
- en: '| > ([append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._append%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "a"Â "b"Â "c")Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "d"Â "e"))
    |'
  id: totrans-2553
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| > ([append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._append%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "a"Â "b"Â "c")Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "d"Â "e"))
    |'
- en: '| (list "a" "b" "c" "d" "e") |'
  id: totrans-2554
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| (list "a" "b" "c" "d" "e") |'
- en: The development of functions like [append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._append%29%29)
    is the subject of [Simultaneous Processing](part_four.html#%28part._ch~3asimu%29).
  id: totrans-2555
  prefs: []
  type: TYPE_NORMAL
  zh: '[append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._append%29%29)
    ç­‰å‡½æ•°çš„å¼€å‘æ˜¯ [Simultaneous Processing](part_four.html#%28part._ch~3asimu%29) çš„ä¸»é¢˜ã€‚'
- en: (3) This solution of this exercise is a series of functions. Patiently stick
    to the design recipe and systematically work through your wish list.
  id: totrans-2556
  prefs: []
  type: TYPE_NORMAL
  zh: (3) è¿™ä¸ªç»ƒä¹ çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸€ç³»åˆ—å‡½æ•°ã€‚è€å¿ƒåœ°åšæŒè®¾è®¡é£Ÿè°±ï¼Œå¹¶ç³»ç»Ÿåœ°å®Œæˆä½ çš„æ„¿æœ›æ¸…å•ã€‚
- en: ExerciseÂ 214\. Integrate arrangements with the partial program from [Word Games,
    Composition Illustrated](#%28part._sec~3apermute-composition%29). After making
    sure that the entire suite of tests passes, run it on some of your favorite examples.
  id: totrans-2557
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ Â 214\. å°† [Word Games, Composition Illustrated](#%28part._sec~3apermute-composition%29)
    ä¸­çš„éƒ¨åˆ†ç¨‹åºä¸æ’åˆ—æ•´åˆã€‚ç¡®ä¿æ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡åï¼Œå†åœ¨ä½ çš„ favorite examples ä¸Šè¿è¡Œå®ƒã€‚
- en: 12.5Feeding Worms[ğŸ”—](#(part._sec~3aworms) "Link to here")
  id: totrans-2558
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 12.5 å–‚å…»è •è™«[ğŸ”—](#(part._sec~3aworms) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Wormâ€”<wbr>also known as Snakeâ€”<wbr>is one of the oldest computer games. When
    the game starts, a worm and a piece of food appear. The worm is moving toward
    a wall. Donâ€™t let it reach the wall; otherwise the game is over. Instead, use
    the arrow keys to control the wormâ€™s movements.
  id: totrans-2559
  prefs: []
  type: TYPE_NORMAL
  zh: è •è™«â€”<wbr>ä¹Ÿç§°ä¸ºè›‡â€”<wbr>æ˜¯æœ€å¤è€çš„ç”µè„‘æ¸¸æˆä¹‹ä¸€ã€‚å½“æ¸¸æˆå¼€å§‹æ—¶ï¼Œä¼šå‡ºç°ä¸€æ¡è •è™«å’Œä¸€å—é£Ÿç‰©ã€‚è •è™«æ­£æœç€å¢™å£ç§»åŠ¨ã€‚ä¸è¦è®©å®ƒç¢°åˆ°å¢™å£ï¼›å¦åˆ™æ¸¸æˆå°±ç»“æŸäº†ã€‚ç›¸åï¼Œä½¿ç”¨ç®­å¤´é”®æ¥æ§åˆ¶è •è™«çš„ç§»åŠ¨ã€‚
- en: The goal of the game is to have the worm eat as much food as possible. As the
    worm eats the food, it becomes longer; more and more segments appear. Once a piece
    of food is digested, another piece appears. The wormâ€™s growth endangers the worm
    itself, though. As it grows long enough, it can run into itself and, if it does,
    the game is over, too.
  id: totrans-2560
  prefs: []
  type: TYPE_NORMAL
  zh: æ¸¸æˆçš„ç›®æ ‡æ˜¯è®©è •è™«å°½å¯èƒ½å¤šåœ°åƒé£Ÿç‰©ã€‚éšç€è •è™«åƒé£Ÿç‰©ï¼Œå®ƒä¼šå˜å¾—æ›´é•¿ï¼›è¶Šæ¥è¶Šå¤šçš„æ®µå‡ºç°ã€‚ä¸€æ—¦é£Ÿç‰©è¢«æ¶ˆåŒ–ï¼Œå¦ä¸€å—é£Ÿç‰©å°±ä¼šå‡ºç°ã€‚ç„¶è€Œï¼Œè •è™«çš„ç”Ÿé•¿ä¹Ÿå±åŠåˆ°å®ƒè‡ªå·±ã€‚å½“å®ƒè¶³å¤Ÿé•¿æ—¶ï¼Œå®ƒå¯ä»¥æ’åˆ°è‡ªå·±ï¼Œå¦‚æœå®ƒåšåˆ°äº†ï¼Œæ¸¸æˆä¹Ÿå°±ç»“æŸäº†ã€‚
- en: '![image](../Images/810fad0f05dc89b29602cef3bea8efeb.png)Â Â ![image](../Images/27c4a040f6089ae6670aab60ca49de45.png)Â Â ![image](../Images/62c770751cd05d00443bbee026d53b24.png)'
  id: totrans-2561
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/810fad0f05dc89b29602cef3bea8efeb.png)Â Â ![image](../Images/27c4a040f6089ae6670aab60ca49de45.png)Â Â ![image](../Images/62c770751cd05d00443bbee026d53b24.png)'
- en: ''
  id: totrans-2562
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 79: Playing Worm'
  id: totrans-2563
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾Â 79ï¼šç©è •è™«
- en: '[FigureÂ 79](#%28counter._%28figure._fig~3aworm%29%29) displays a sequence of
    screen shots that illustrates how the game works in practice. On the left, you
    see the initial setting. The worm consists of a single red segment, its head.
    It is moving toward the food, which is displayed as a green disk. The screen shot
    in the center shows a situation when the worm is about to eat some food. In the
    right-most screen shot the worm has run into the right wall. The game is over;
    the player scored 11 points.'
  id: totrans-2564
  prefs: []
  type: TYPE_NORMAL
  zh: '[å›¾Â 79](#%28counter._%28figure._fig~3aworm%29%29) å±•ç¤ºäº†ä¸€ç³»åˆ—å±å¹•æˆªå›¾ï¼Œè¯´æ˜äº†æ¸¸æˆåœ¨å®é™…æ“ä½œä¸­çš„å·¥ä½œæ–¹å¼ã€‚åœ¨å·¦ä¾§ï¼Œä½ å¯ä»¥çœ‹åˆ°åˆå§‹è®¾ç½®ã€‚è •è™«ç”±ä¸€ä¸ªçº¢è‰²æ®µç»„æˆï¼Œå³å®ƒçš„å¤´éƒ¨ã€‚å®ƒæ­£æœç€é£Ÿç‰©ç§»åŠ¨ï¼Œé£Ÿç‰©æ˜¾ç¤ºä¸ºä¸€ä¸ªç»¿è‰²åœ†ç›˜ã€‚ä¸­é—´çš„å±å¹•æˆªå›¾æ˜¾ç¤ºäº†è •è™«å³å°†åƒé£Ÿç‰©çš„æƒ…å†µã€‚åœ¨æœ€å³ä¾§çš„å±å¹•æˆªå›¾ä¸­ï¼Œè •è™«æ’åˆ°äº†å³å¢™ã€‚æ¸¸æˆç»“æŸäº†ï¼›ç©å®¶å¾—åˆ°äº†11åˆ†ã€‚'
- en: The following exercises guide you through the design and implementation of a
    Worm game. Like [Structures in Lists](#%28part._sec~3asil%29), these exercises
    illustrate how to tackle a nontrivial problem via iterative refinement. That is,
    you donâ€™t design the entire interactive program all at once but in several stages,
    called iterations. Each iteration adds details and refines the programâ€”<wbr>until
    it satisfies you or your customer. If you arenâ€™t satisfied with the outcome of
    the exercises, feel free to create variations.
  id: totrans-2565
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹ç»ƒä¹ æŒ‡å¯¼ä½ è®¾è®¡å’Œå®ç°ä¸€ä¸ªè •è™«æ¸¸æˆã€‚åƒ [åˆ—è¡¨ä¸­çš„ç»“æ„](#%28part._sec~3asil%29) ä¸€æ ·ï¼Œè¿™äº›ç»ƒä¹ è¯´æ˜äº†å¦‚ä½•é€šè¿‡è¿­ä»£ç»†åŒ–æ¥å¤„ç†ä¸€ä¸ªéå¹³å‡¡é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸ä¼šä¸€æ¬¡æ€§è®¾è®¡æ•´ä¸ªäº¤äº’ç¨‹åºï¼Œè€Œæ˜¯åœ¨å‡ ä¸ªé˜¶æ®µï¼Œç§°ä¸ºè¿­ä»£ä¸­å®Œæˆã€‚æ¯ä¸ªè¿­ä»£éƒ½ä¼šæ·»åŠ ç»†èŠ‚å¹¶ç»†åŒ–ç¨‹åºâ€”<wbr>ç›´åˆ°ä½ æˆ–ä½ çš„å®¢æˆ·æ»¡æ„ã€‚å¦‚æœä½ å¯¹ç»ƒä¹ çš„ç»“æœä¸æ»¡æ„ï¼Œè¯·éšæ„åˆ›å»ºå˜ä½“ã€‚
- en: ExerciseÂ 215\. Design a world program that continually moves a one-segment worm
    and enables a player to control the movement of the worm with the four cardinal
    arrow keys. Your program should use a red disk to render the one-and-only segment
    of the worm. For each clock tick, the worm should move a diameter.
  id: totrans-2566
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ Â 215\. è®¾è®¡ä¸€ä¸ªä¸–ç•Œç¨‹åºï¼Œè¯¥ç¨‹åºæŒç»­ç§»åŠ¨ä¸€ä¸ªå•æ®µè •è™«ï¼Œå¹¶å…è®¸ç©å®¶ä½¿ç”¨å››ä¸ªåŸºæœ¬ç®­å¤´é”®æ§åˆ¶è •è™«çš„ç§»åŠ¨ã€‚ä½ çš„ç¨‹åºåº”ä½¿ç”¨çº¢è‰²åœ†ç›˜æ¥æ¸²æŸ“è •è™«çš„å”¯ä¸€ä¸€æ®µã€‚å¯¹äºæ¯ä¸ªæ—¶é’Ÿæ»´ç­”ï¼Œè •è™«åº”ç§»åŠ¨ä¸€ä¸ªç›´å¾„ã€‚
- en: 'Hints (1) Reread [Designing World Programs](part_one.html#%28part._.D.K._sec~3adesign-world%29)
    to recall how to design world programs. When you define the worm-main function,
    use the rate at which the clock ticks as its argument. See the documentation for
    [on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)
    on how to describe the rate. (2) When you develop a data representation for the
    worm, contemplate the use of two different kinds of representations: a physical
    representation and a logical one. The physical representation keeps track of the
    actual physical position of the worm on the canvas; the logical one counts how
    many (widths of) segments the worm is from the left and the top. For which of
    the two is it easier to change the physical appearances (size of worm segment,
    size of game box) of the â€œgameâ€?'
  id: totrans-2567
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼ˆ1ï¼‰é‡æ–°é˜…è¯»[è®¾è®¡ä¸–ç•Œç¨‹åº](part_one.html#%28part._.D.K._sec~3adesign-world%29)ä»¥å›å¿†å¦‚ä½•è®¾è®¡ä¸–ç•Œç¨‹åºã€‚å½“ä½ å®šä¹‰worm-mainå‡½æ•°æ—¶ï¼Œä½¿ç”¨æ—¶é’Ÿæ»´ç­”çš„é€Ÿç‡ä½œä¸ºå…¶å‚æ•°ã€‚è¯·å‚é˜…[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)çš„æ–‡æ¡£äº†è§£å¦‚ä½•æè¿°é€Ÿç‡ã€‚ï¼ˆ2ï¼‰å½“ä½ ä¸ºwormå¼€å‘æ•°æ®è¡¨ç¤ºæ—¶ï¼Œè€ƒè™‘ä½¿ç”¨ä¸¤ç§ä¸åŒçš„è¡¨ç¤ºï¼šä¸€ç§ç‰©ç†è¡¨ç¤ºå’Œä¸€ç§é€»è¾‘è¡¨ç¤ºã€‚ç‰©ç†è¡¨ç¤ºè·Ÿè¸ªwormåœ¨ç”»å¸ƒä¸Šçš„å®é™…ç‰©ç†ä½ç½®ï¼›é€»è¾‘è¡¨ç¤ºè®¡ç®—wormè·ç¦»å·¦ä¸Šè§’æœ‰å¤šå°‘ï¼ˆæ®µå®½ï¼‰ã€‚å¯¹äºå“ªä¸€ç§æ›´å®¹æ˜“æ”¹å˜â€œæ¸¸æˆâ€çš„ç‰©ç†å¤–è§‚ï¼ˆwormæ®µçš„å¤§å°ï¼Œæ¸¸æˆæ¡†çš„å¤§å°ï¼‰ï¼Ÿ
- en: ExerciseÂ 216\. Modify your program from [exerciseÂ 215](#%28counter._%28exercise._ex~3aworm1%29%29)
    so that it stops if the worm has reached the walls of the world. When the program
    stops because of this condition, it should render the final scene with the text
    "worm hit border" in the lower left of the world scene. Hint You can use the [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    clause in [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    to render the last world in a special way.
  id: totrans-2568
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 216ã€‚ä¿®æ”¹ä½ çš„ç¨‹åºï¼Œä»[ç»ƒä¹ 215](#%28counter._%28exercise._ex~3aworm1%29%29)å¼€å§‹ï¼Œä»¥ä¾¿å½“wormåˆ°è¾¾ä¸–ç•Œçš„å¢™å£æ—¶åœæ­¢ã€‚å½“ç¨‹åºå› ä¸ºè¿™ç§æ¡ä»¶è€Œåœæ­¢æ—¶ï¼Œå®ƒåº”è¯¥åœ¨ä¸–ç•Œçš„å·¦ä¸‹è§’æ¸²æŸ“å¸¦æœ‰æ–‡æœ¬â€œworm
    hit borderâ€çš„æœ€ç»ˆåœºæ™¯ã€‚æç¤ºï¼šä½ å¯ä»¥ä½¿ç”¨[big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)ä¸­çš„[stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)å­å¥ä»¥ç‰¹æ®Šæ–¹å¼æ¸²æŸ“æœ€åä¸€ä¸ªä¸–ç•Œã€‚
- en: ExerciseÂ 217\. Develop a data representation for worms with tails. A wormâ€™s
    tail is a possibly empty sequence of â€œconnectedâ€ segments. Here â€œconnectedâ€ means
    that the coordinates of a segment differ from those of its predecessor in at most
    one direction. To keep things simple, treat all segmentsâ€”<wbr>head and tail segmentsâ€”<wbr>the
    same.
  id: totrans-2569
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 217ã€‚ä¸ºå¸¦å°¾å·´çš„wormå¼€å‘æ•°æ®è¡¨ç¤ºã€‚wormçš„å°¾å·´æ˜¯å¯èƒ½ä¸ºç©ºçš„â€œè¿æ¥â€æ®µåºåˆ—ã€‚åœ¨è¿™é‡Œï¼Œâ€œè¿æ¥â€æ„å‘³ç€ä¸€ä¸ªæ®µçš„åæ ‡æœ€å¤šåœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¸å®ƒçš„å‰ä¸€ä¸ªæ®µä¸åŒã€‚ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œå°†æ‰€æœ‰æ®µï¼ˆå¤´éƒ¨å’Œå°¾éƒ¨æ®µï¼‰è§†ä¸ºç›¸åŒã€‚
- en: 'Now modify your program from [exerciseÂ 215](#%28counter._%28exercise._ex~3aworm1%29%29)
    to accommodate a multi-segment worm. Keep things simple: (1) your program may
    render all worm segments as red disks and (2) ignore that the worm may run into
    the wall or itself. Hint One way to realize the wormâ€™s movement is to add a segment
    in the direction in which it is moving and to delete the last one.'
  id: totrans-2570
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä¿®æ”¹ä½ çš„ç¨‹åºï¼Œä»[ç»ƒä¹ 215](#%28counter._%28exercise._ex~3aworm1%29%29)å¼€å§‹ï¼Œä»¥é€‚åº”å¤šæ®µwormã€‚ä¿æŒç®€å•ï¼šï¼ˆ1ï¼‰ä½ çš„ç¨‹åºå¯ä»¥å°†æ‰€æœ‰wormæ®µæ¸²æŸ“ä¸ºçº¢è‰²åœ†ç›˜ï¼›ï¼ˆ2ï¼‰å¿½ç•¥wormå¯èƒ½æ’åˆ°å¢™å£æˆ–è‡ªå·±çš„æƒ…å†µã€‚æç¤ºï¼šå®ç°wormç§»åŠ¨çš„ä¸€ç§æ–¹æ³•æ˜¯åœ¨å®ƒç§»åŠ¨çš„æ–¹å‘ä¸Šæ·»åŠ ä¸€ä¸ªæ®µï¼Œå¹¶åˆ é™¤æœ€åä¸€ä¸ªæ®µã€‚
- en: '| ;Â [Posn](part_one.html#%28tech._posn%29) -> [Posn](part_one.html#%28tech._posn%29)
    |'
  id: totrans-2571
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Posn](part_one.html#%28tech._posn%29) -> [Posn](part_one.html#%28tech._posn%29)
    |'
- en: '| ;Â ??? |'
  id: totrans-2572
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ??? |'
- en: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)Â (food-createÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 1Â 1))Â not=-1-1?)
    |'
  id: totrans-2573
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)Â (food-createÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 1Â 1))Â not=-1-1?)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (food-createÂ p)
    |'
  id: totrans-2574
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (food-createÂ p)
    |'
- en: '| Â Â (food-check-create |'
  id: totrans-2575
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (food-check-create |'
- en: '| Â Â Â Â Â pÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â ([random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)Â MAX)Â ([random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)Â MAX))))
    |'
  id: totrans-2576
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â pÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â ([random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)Â MAX)Â ([random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)Â MAX))))
    |'
- en: '| Â  |'
  id: totrans-2577
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Posn](part_one.html#%28tech._posn%29) |'
  id: totrans-2578
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Posn](part_one.html#%28tech._posn%29) |'
- en: '| ;Â generative recursion |'
  id: totrans-2579
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ç”Ÿæˆé€’å½’ |'
- en: '| ;Â ??? |'
  id: totrans-2580
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ??? |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (food-check-createÂ pÂ candidate)
    |'
  id: totrans-2581
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (food-check-createÂ pÂ candidate)
    |'
- en: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([equal?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._equal~3f%29%29)Â pÂ candidate)Â (food-createÂ p)Â candidate))
    |'
  id: totrans-2582
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([equal?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._equal~3f%29%29)Â pÂ candidate)Â (food-createÂ p)Â candidate))
    |'
- en: '| Â  |'
  id: totrans-2583
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [Posn](part_one.html#%28tech._posn%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  id: totrans-2584
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [Posn](part_one.html#%28tech._posn%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
- en: '| ;Â use for testing only |'
  id: totrans-2585
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»…ç”¨äºæµ‹è¯• |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (not=-1-1?Â p)
    |'
  id: totrans-2586
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (not=-1-1?Â p)
    |'
- en: '| Â Â ([not](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._not%29%29)Â ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â 1)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â 1))))
    |'
  id: totrans-2587
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([not](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._not%29%29)Â ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â 1)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â 1))))
    |'
- en: ''
  id: totrans-2588
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 80: Random placement of food'
  id: totrans-2589
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾ 80ï¼šé£Ÿç‰©çš„éšæœºæ”¾ç½®
- en: ExerciseÂ 218\. Redesign your program from [exerciseÂ 217](#%28counter._%28exercise._ex~3aworm3%29%29)
    so that it stops if the worm has run into the walls of the world or into itself.
    Display a message like the one in [exerciseÂ 216](#%28counter._%28exercise._ex~3aworm2%29%29)
    to explain whether the program stopped because the worm hit the wall or because
    it ran into itself.
  id: totrans-2590
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  218ã€‚é‡æ–°è®¾è®¡ä½ çš„ç¨‹åºï¼Œä» [ç»ƒä¹  217](#%28counter._%28exercise._ex~3aworm3%29%29) å¼€å§‹ï¼Œä½¿å…¶åœ¨è™«å­æ’åˆ°ä¸–ç•Œçš„å¢™å£æˆ–è‡ªå·±æ—¶åœæ­¢ã€‚æ˜¾ç¤ºç±»ä¼¼äº
    [ç»ƒä¹  216](#%28counter._%28exercise._ex~3aworm2%29%29) ä¸­çš„æ¶ˆæ¯ï¼Œè¯´æ˜ç¨‹åºåœæ­¢æ˜¯å› ä¸ºè™«å­æ’åˆ°å¢™å£è¿˜æ˜¯å› ä¸ºæ’åˆ°è‡ªå·±ã€‚
- en: Hints (1) To determine whether a worm is going to run into itself, check whether
    the position of the head would coincide with one of its old tail segments if it
    moved. (2) Read up on the [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    function.
  id: totrans-2591
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤º (1) è¦ç¡®å®šè™«å­æ˜¯å¦ä¼šæ’åˆ°è‡ªå·±ï¼Œæ£€æŸ¥è™«å­å¤´éƒ¨ç§»åŠ¨åæ˜¯å¦ä¼šä¸å®ƒçš„æ—§å°¾å·´æ®µé‡åˆã€‚ (2) æŸ¥é˜… [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    å‡½æ•°ã€‚
- en: ExerciseÂ 219\. Equip your program from [exerciseÂ 218](#%28counter._%28exercise._ex~3aworm4%29%29)
    with food. At any point in time, the box should contain one piece of food. To
    keep things simple, a piece of food is of the same size as a worm segment. When
    the wormâ€™s head is located at the same position as the food, the worm eats the
    food, meaning the wormâ€™s tail is extended by one segment. As the piece of food
    is eaten, another one shows up at a different location.
  id: totrans-2592
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  219\. å°†é£Ÿç‰©æ·»åŠ åˆ°ä½ çš„ç¨‹åºä¸­ï¼Œè¯¥ç¨‹åºåŸºäº [ç»ƒä¹  218](#%28counter._%28exercise._ex~3aworm4%29%29)ã€‚åœ¨ä»»ä½•æ—¶åˆ»ï¼Œç›’å­ä¸­åº”åŒ…å«ä¸€å—é£Ÿç‰©ã€‚ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œä¸€å—é£Ÿç‰©çš„å¤§å°ä¸è™«å­çš„ä¸€æ®µç›¸åŒã€‚å½“è™«å­çš„å¤´éƒ¨ä½äºé£Ÿç‰©æ‰€åœ¨çš„ä½ç½®æ—¶ï¼Œè™«å­ä¼šåƒæ‰é£Ÿç‰©ï¼Œè¿™æ„å‘³ç€è™«å­çš„å°¾éƒ¨ä¼šå»¶ä¼¸ä¸€æ®µã€‚éšç€é£Ÿç‰©è¢«åƒæ‰ï¼Œå¦ä¸€å—é£Ÿç‰©ä¼šåœ¨ä¸åŒçš„ä½ç½®å‡ºç°ã€‚
- en: Adding food to the game requires changes to the data representation of world
    states. In addition to the worm, the states now also include a representation
    of the food, especially its current location. A change to the game representation
    suggests new functions for dealing with events, though these functions can reuse
    the functions for the worm (from [exerciseÂ 218](#%28counter._%28exercise._ex~3aworm4%29%29))
    and their test cases. It also means that the tick handler must not only move the
    worm; in addition it must manage the eating process and the creation of new food.
  id: totrans-2593
  prefs: []
  type: TYPE_NORMAL
  zh: å°†é£Ÿç‰©æ·»åŠ åˆ°æ¸¸æˆä¸­éœ€è¦å¯¹ä¸–ç•ŒçŠ¶æ€çš„æ•°æ®è¡¨ç¤ºè¿›è¡Œä¿®æ”¹ã€‚é™¤äº†è™«å­ä¹‹å¤–ï¼ŒçŠ¶æ€ç°åœ¨è¿˜åŒ…æ‹¬é£Ÿç‰©çš„è¡¨ç¤ºï¼Œç‰¹åˆ«æ˜¯å…¶å½“å‰ä½ç½®ã€‚å¯¹æ¸¸æˆè¡¨ç¤ºçš„ä¿®æ”¹æ„å‘³ç€éœ€è¦ä¸ºå¤„ç†äº‹ä»¶æ·»åŠ æ–°çš„å‡½æ•°ï¼Œå°½ç®¡è¿™äº›å‡½æ•°å¯ä»¥é‡ç”¨æ¥è‡ª
    [ç»ƒä¹  218](#%28counter._%28exercise._ex~3aworm4%29%29) çš„è™«å­å‡½æ•°åŠå…¶æµ‹è¯•ç”¨ä¾‹ã€‚è¿™ä¹Ÿæ„å‘³ç€æ—¶é’Ÿå¤„ç†ç¨‹åºä¸ä»…éœ€è¦ç§»åŠ¨è™«å­ï¼›æ­¤å¤–ï¼Œå®ƒè¿˜å¿…é¡»ç®¡ç†è¿›é£Ÿè¿‡ç¨‹å’Œæ–°é£Ÿç‰©çš„åˆ›å»ºã€‚
- en: Your program should place the food randomly within the box. To do so properly,
    you need a design technique that you havenâ€™t seen beforeâ€”<wbr>so-called generative
    recursion, which is introduced in [Generative Recursion](part_five.html)â€”<wbr>so
    we provide these functions in [figureÂ 80](#%28counter._%28figure._fig~3arandom~3aplacement%29%29).For
    the workings of [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29),
    read the manual or [exerciseÂ 99](part_one.html#%28counter._mix._%28exercise._mix-ufo-move%29%29).
    Before you use them, however, explain how these functions workâ€”<wbr>assuming MAX
    is greater than 1â€”<wbr>and then formulate purpose statements.
  id: totrans-2594
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ çš„ç¨‹åºåº”åœ¨ç›’å­å†…éšæœºæ”¾ç½®é£Ÿç‰©ã€‚ä¸ºäº†æ­£ç¡®åœ°åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ éœ€è¦ä¸€ç§ä¹‹å‰æ²¡æœ‰è§è¿‡çš„è®¾è®¡æŠ€æœ¯â€”â€”æ‰€è°“çš„ç”Ÿæˆé€’å½’ï¼Œè¿™åœ¨ [ç”Ÿæˆé€’å½’](part_five.html)
    ä¸­ä»‹ç»â€”â€”å› æ­¤æˆ‘ä»¬æä¾›äº†è¿™äº›å‡½æ•°åœ¨ [å›¾ 80](#%28counter._%28figure._fig~3arandom~3aplacement%29%29)
    ä¸­ã€‚å…³äº [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    çš„å·¥ä½œåŸç†ï¼Œè¯·é˜…è¯»æ‰‹å†Œæˆ– [ç»ƒä¹  99](part_one.html#%28counter._mix._%28exercise._mix-ufo-move%29%29)ã€‚åœ¨ä½ ä½¿ç”¨å®ƒä»¬ä¹‹å‰ï¼Œè¯·è§£é‡Šè¿™äº›å‡½æ•°çš„å·¥ä½œåŸç†â€”â€”å‡è®¾
    MAX å¤§äº 1â€”â€”ç„¶ååˆ¶å®šç›®çš„å£°æ˜ã€‚
- en: Hints (1) One way to interpret â€œeatingâ€ is to say that the head moves where
    the food used to be located and the tail grows by one segment, inserted where
    the head used to be. Why is this interpretation easy to design as a function?
    (2) We found it useful to add a second parameter to the worm-main function for
    this last step, a Boolean that determines whether [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    displays the current state of the world in a separate window; see the documentation
    for [state](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._state%29%29)
    on how to ask for this information.
  id: totrans-2595
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼ˆ1ï¼‰è§£é‡Šâ€œè¿›é£Ÿâ€çš„ä¸€ç§æ–¹å¼æ˜¯ï¼Œè¯´è™«å­çš„å¤´éƒ¨ç§»åŠ¨åˆ°é£Ÿç‰©æ›¾ç»æ‰€åœ¨çš„ä½ç½®ï¼Œå°¾éƒ¨å¢é•¿ä¸€æ®µï¼Œæ’å…¥å¤´éƒ¨æ›¾ç»çš„ä½ç½®ã€‚ä¸ºä»€ä¹ˆè¿™ç§è§£é‡Šä½œä¸ºå‡½æ•°è®¾è®¡èµ·æ¥å®¹æ˜“ï¼Ÿï¼ˆ2ï¼‰æˆ‘ä»¬å‘ç°ä¸º
    worm-main å‡½æ•°æ·»åŠ ç¬¬äºŒä¸ªå‚æ•°å¯¹äºæœ€åä¸€æ­¥å¾ˆæœ‰ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºç¡®å®š [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    æ˜¯å¦åœ¨å•ç‹¬çš„çª—å£ä¸­æ˜¾ç¤ºå½“å‰ä¸–ç•ŒçŠ¶æ€ï¼›æœ‰å…³å¦‚ä½•è¯·æ±‚æ­¤ä¿¡æ¯çš„è¯´æ˜ï¼Œè¯·å‚é˜… [state](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._state%29%29)
    çš„æ–‡æ¡£ã€‚
- en: Once you have finished this last exercise, you have a complete worm game. Now
    modify your worm-main function so that it returns the length of the final worm.
    Then use Create Executable (under the Racket menu) in DrRacket to turn your program
    into something that anybody can launch, not just someone who knows about BSL+.
  id: totrans-2596
  prefs: []
  type: TYPE_NORMAL
  zh: å®Œæˆè¿™ä¸ªæœ€åçš„ç»ƒä¹ åï¼Œä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„è™«å­æ¸¸æˆã€‚ç°åœ¨ä¿®æ”¹ä½ çš„ worm-main å‡½æ•°ï¼Œä½¿å…¶è¿”å›æœ€ç»ˆè™«å­çš„é•¿åº¦ã€‚ç„¶åä½¿ç”¨ DrRacket ä¸­çš„â€œåˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶â€ï¼ˆä½äº
    Racket èœå•ä¸‹ï¼‰å°†ä½ çš„ç¨‹åºè½¬æ¢æˆä»»ä½•äººéƒ½å¯ä»¥å¯åŠ¨çš„æ–‡ä»¶ï¼Œè€Œä¸ä»…ä»…æ˜¯äº†è§£ BSL+ çš„äººã€‚
- en: You may also wish to add extra twists to the game, to make it really your game.
    We experimented with funny end-of-game messages, having several different pieces
    of food around, with placing extra obstacles in the room, and a few other ideas.
    What can you think of?
  id: totrans-2597
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ ä¹Ÿè®¸è¿˜å¸Œæœ›ç»™æ¸¸æˆæ·»åŠ ä¸€äº›é¢å¤–çš„å˜åŒ–ï¼Œä½¿å…¶çœŸæ­£æˆä¸ºä½ çš„æ¸¸æˆã€‚æˆ‘ä»¬å°è¯•äº†æœ‰è¶£çš„ç»“æŸæ¸¸æˆä¿¡æ¯ï¼Œå‘¨å›´æ”¾ç½®äº†å‡ ç§ä¸åŒçš„é£Ÿç‰©ï¼Œæ”¾ç½®é¢å¤–çš„éšœç¢ç‰©åœ¨æˆ¿é—´é‡Œï¼Œä»¥åŠä¸€äº›å…¶ä»–æƒ³æ³•ã€‚ä½ æœ‰ä»€ä¹ˆæƒ³æ³•å—ï¼Ÿ
- en: 12.6Simple Tetris[ğŸ”—](#(part._sec~3atetris) "Link to here")
  id: totrans-2598
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 12.6ç®€å•çš„ä¿„ç½—æ–¯æ–¹å—[ğŸ”—](#(part._sec~3atetris) "é“¾æ¥åˆ°æ­¤å¤„")
- en: Tetris is another game from the early days of software. Since the design of
    a full-fledged Tetris game demands a lot of labor with only marginal profit, this
    section focuses on a simplified version. If you feel ambitious, look up how Tetris
    really works and design a full-fledged version.
  id: totrans-2599
  prefs: []
  type: TYPE_NORMAL
  zh: ä¿„ç½—æ–¯æ–¹å—æ˜¯è½¯ä»¶æ—©æœŸçš„ä¸€æ¬¾æ¸¸æˆã€‚ç”±äºè®¾è®¡ä¸€ä¸ªå®Œæ•´çš„ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆéœ€è¦å¤§é‡çš„åŠ³åŠ¨ï¼Œè€Œåˆ©æ¶¦å´å¾®è–„ï¼Œæ‰€ä»¥è¿™ä¸€èŠ‚å°†é‡ç‚¹ä»‹ç»ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬ã€‚å¦‚æœä½ æœ‰é›„å¿ƒå£®å¿—ï¼Œå¯ä»¥æŸ¥æ‰¾ä¿„ç½—æ–¯æ–¹å—çœŸæ­£çš„å·¥ä½œåŸç†å¹¶è®¾è®¡ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬ã€‚
- en: '![image](../Images/8315523907da4f63214084ecc1437c8e.png) Â Â Â  ![image](../Images/801fe337991a9cfcaa467e674f02ff08.png)
    Â Â Â  ![image](../Images/8ccecf22218b1564967feb18e30dcdb5.png)'
  id: totrans-2600
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
  zh: '![image](../Images/8315523907da4f63214084ecc1437c8e.png) Â Â Â  ![image](../Images/801fe337991a9cfcaa467e674f02ff08.png)
    Â Â Â  ![image](../Images/8ccecf22218b1564967feb18e30dcdb5.png)'
- en: ''
  id: totrans-2601
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 81: Simple Tetris'
  id: totrans-2602
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾81ï¼šç®€å•çš„ä¿„ç½—æ–¯æ–¹å—
- en: In our simplified version, the game starts with individual blocks dropping from
    the top of the scene. Once one of them lands on the ground, it comes to a rest
    and another block starts dropping down from some random place. A player can control
    the dropping block with the â€œleftâ€ and â€œrightâ€ arrow keys. Once a block lands
    on the floor of the canvas or on top of some already resting block, it comes to
    rest and becomes immovable. In a short time, the blocks stack up; if a stack of
    blocks reaches the ceiling of the canvas, the game is over. Naturally the objective
    of this game is to land as many blocks as possible. See [figureÂ 81](#%28counter._%28figure._fig~3atetris%29%29)
    for an illustration of the idea.
  id: totrans-2603
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬çš„ç®€åŒ–ç‰ˆæœ¬ä¸­ï¼Œæ¸¸æˆå¼€å§‹æ—¶ï¼Œå•ä¸ªæ–¹å—ä»åœºæ™¯é¡¶éƒ¨è½ä¸‹ã€‚ä¸€æ—¦å…¶ä¸­ä¸€ä¸ªæ–¹å—è½åœ¨åœ°é¢ä¸Šï¼Œå®ƒå°±ä¼šåœä¸‹æ¥ï¼Œç„¶åå¦ä¸€ä¸ªæ–¹å—ä»æŸä¸ªéšæœºä½ç½®å¼€å§‹è½ä¸‹ã€‚ç©å®¶å¯ä»¥ä½¿ç”¨â€œå·¦â€å’Œâ€œå³â€ç®­å¤´é”®æ§åˆ¶ä¸‹è½çš„æ–¹å—ã€‚ä¸€æ—¦æ–¹å—è½åœ¨ç”»å¸ƒçš„åº•éƒ¨æˆ–æŸä¸ªå·²ç»åœä¸‹æ¥çš„æ–¹å—ä¸Šæ–¹ï¼Œå®ƒå°±ä¼šåœä¸‹æ¥å¹¶å˜å¾—ä¸å¯ç§»åŠ¨ã€‚åœ¨çŸ­æ—¶é—´å†…ï¼Œæ–¹å—ä¼šå †å èµ·æ¥ï¼›å¦‚æœæ–¹å—å †å åˆ°ç”»å¸ƒçš„é¡¶éƒ¨ï¼Œæ¸¸æˆå°±ç»“æŸäº†ã€‚å½“ç„¶ï¼Œè¿™ä¸ªæ¸¸æˆçš„ç›®æ ‡æ˜¯å°½å¯èƒ½å¤šåœ°è½ä¸‹æ–¹å—ã€‚å‚è§[å›¾81](#%28counter._%28figure._fig~3atetris%29%29)ä»¥äº†è§£è¿™ä¸ªæƒ³æ³•çš„è¯´æ˜ã€‚
- en: 'Given this description, we can turn to the design guidelines for interactive
    programs from [Designing World Programs](part_one.html#%28part._.D.K._sec~3adesign-world%29).
    They call for separating constant properties from variable ones. The former can
    be written down as â€œphysicalâ€ and graphical constants; the latter suggest the
    data that makes up all possible states of the simple Tetris game. So here are
    some examples:'
  id: totrans-2604
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®è¿™ä¸ªæè¿°ï¼Œæˆ‘ä»¬å¯ä»¥è½¬å‘[è®¾è®¡ä¸–ç•Œç¨‹åº](part_one.html#%28part._.D.K._sec~3adesign-world%29)ä¸­äº¤äº’ç¨‹åºçš„è®¾è®¡æŒ‡å—ã€‚ä»–ä»¬å»ºè®®å°†å¸¸é‡å±æ€§ä¸å˜é‡å±æ€§åˆ†å¼€ã€‚å‰è€…å¯ä»¥å†™æˆâ€œç‰©ç†â€å’Œå›¾å½¢å¸¸é‡ï¼›åè€…åˆ™å»ºè®®æ„æˆç®€å•ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆæ‰€æœ‰å¯èƒ½çŠ¶æ€çš„æ•°æ®ã€‚å› æ­¤ï¼Œè¿™é‡Œæœ‰ä¸€äº›ä¾‹å­ï¼š
- en: 'The width and the height of the game are fixed as are the blocks. In terms
    of BSL+, you want definitions like these:'
  id: totrans-2605
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ¸¸æˆçš„å®½åº¦å’Œé«˜åº¦ä»¥åŠæ–¹å—çš„å¤§å°éƒ½æ˜¯å›ºå®šçš„ã€‚åœ¨BSL+ä¸­ï¼Œä½ éœ€è¦åƒè¿™æ ·çš„å®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 10)Â ;Â #
    of blocks, horizontally |'
  id: totrans-2606
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 10)Â ;Â æ°´å¹³æ–¹å‘çš„æ–¹å—æ•°é‡
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â SIZEÂ 10)Â ;Â blocks
    are squares |'
  id: totrans-2607
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â SIZEÂ 10)Â ;Â æ–¹å—çš„å¤§å°ä¸º10
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â SCENE-SIZEÂ ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â WIDTHÂ SIZE))
    |'
  id: totrans-2608
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â SCENE-SIZEÂ ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â WIDTHÂ SIZE))
    |'
- en: '| Â  |'
  id: totrans-2609
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| Â  |'
  id: totrans-2610
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â BLOCKÂ ;Â red
    squares with black rims |'
  id: totrans-2611
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â BLOCKÂ ;Â çº¢è‰²æ–¹å—ï¼Œè¾¹ç¼˜ä¸ºé»‘è‰²
    |'
- en: '| Â Â ([overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)
    |'
  id: totrans-2612
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)
    |'
- en: '| Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â SIZEÂ 1)Â "solid"Â "red")
    |'
  id: totrans-2613
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â SIZEÂ 1)Â "solid"Â "red")
    |'
- en: '| Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â SIZEÂ "outline"Â "black")))
    |'
  id: totrans-2614
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â SIZEÂ "outline"Â "black")))
    |'
- en: Explain these definitions before you read on.
  id: totrans-2615
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œè¯·è§£é‡Šè¿™äº›å®šä¹‰ã€‚
- en: The â€œlandscapesâ€ of blocks differ from game to game and from clock tick to clock
    tick. Letâ€™s make this more precise. The appearance of the blocks remains the same;
    their positions differ.
  id: totrans-2616
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ–¹å—çš„â€œæ™¯è§‚â€å› æ¸¸æˆè€Œå¼‚ï¼Œä¹Ÿå› æ—¶é’Ÿæ»´ç­”å£°è€Œå¼‚ã€‚è®©æˆ‘ä»¬ä½¿è¿™ä¸€ç‚¹æ›´åŠ æ˜ç¡®ã€‚æ–¹å—çš„å¤–è§‚ä¿æŒä¸å˜ï¼›å®ƒä»¬çš„ä½ç½®ä¸åŒã€‚
- en: 'We are now left with the central problem of designing a data representation
    for the dropping blocks and the landscapes of blocks on the ground. When it comes
    to the dropping block, there are againSee [exerciseÂ 215](#%28counter._%28exercise._ex~3aworm1%29%29)
    for a related design decision. two possibilities: one is to choose a â€œphysicalâ€
    representation, another would be a â€œlogicalâ€ one. The physical representation
    keeps track of the actual physical position of the blocks on the canvas; the logical
    one counts how many block widths a block is from the left and the top. When it
    comes to the resting blocks, there are even more choices than for individual blocks:
    a list of physical positions, a list of logical positions, a list of stack heights,
    and so forth.'
  id: totrans-2617
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨é¢ä¸´è®¾è®¡æ•°æ®è¡¨ç¤ºä»¥å¤„ç†ä¸‹è½æ–¹å—å’Œåœ°é¢æ–¹å—æ™¯è§‚çš„æ ¸å¿ƒé—®é¢˜ã€‚å½“æ¶‰åŠåˆ°ä¸‹è½æ–¹å—æ—¶ï¼Œåˆæœ‰ä¸¤ç§å¯èƒ½æ€§ï¼šä¸€ç§æ˜¯é€‰æ‹©â€œç‰©ç†â€è¡¨ç¤ºï¼Œå¦ä¸€ç§æ˜¯â€œé€»è¾‘â€è¡¨ç¤ºã€‚ç‰©ç†è¡¨ç¤ºè·Ÿè¸ªæ–¹å—åœ¨ç”»å¸ƒä¸Šçš„å®é™…ç‰©ç†ä½ç½®ï¼›é€»è¾‘è¡¨ç¤ºè®¡ç®—æ–¹å—è·ç¦»å·¦è¾¹å’Œé¡¶éƒ¨çš„æ–¹å—å®½åº¦æ•°ã€‚å½“æ¶‰åŠåˆ°é™æ­¢çš„æ–¹å—æ—¶ï¼Œæ¯”å•ä¸ªæ–¹å—çš„é€‰æ‹©æ›´å¤šï¼šç‰©ç†ä½ç½®åˆ—è¡¨ã€é€»è¾‘ä½ç½®åˆ—è¡¨ã€å †å é«˜åº¦åˆ—è¡¨ç­‰ç­‰ã€‚
- en: 'In this section we choose the data representation for you:'
  id: totrans-2618
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸ºæ‚¨é€‰æ‹©äº†æ•°æ®è¡¨ç¤ºæ–¹å¼ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â tetrisÂ [blockÂ landscape])
    |'
  id: totrans-2619
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â tetrisÂ [blockÂ landscape])
    |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â blockÂ [xÂ y])
    |'
  id: totrans-2620
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â blockÂ [xÂ y])
    |'
- en: '| Â  |'
  id: totrans-2621
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â A Tetris is a structure: |'
  id: totrans-2622
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¿„ç½—æ–¯æ–¹å—æ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-tetris  [Block](#%28tech._block%29)  [Landscape](#%28tech._landscape%29))
    |'
  id: totrans-2623
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-tetris  [æ–¹å—](#%28tech._block%29)  [æ™¯è§‚](#%28tech._landscape%29))
    |'
- en: '| ;Â A Landscape is one of: |'
  id: totrans-2624
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ™¯è§‚å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â â€“  ''() |'
  id: totrans-2625
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Block](#%28tech._block%29)  [Landscape](#%28tech._landscape%29))
    |'
  id: totrans-2626
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [æ–¹å—](#%28tech._block%29)  [æ™¯è§‚](#%28tech._landscape%29))
    |'
- en: '| ;Â A Block is a structure: |'
  id: totrans-2627
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æ–¹å—æ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-block  [N](#%28tech._n%29)  [N](#%28tech._n%29)) |'
  id: totrans-2628
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-block  [N](#%28tech._n%29)  [N](#%28tech._n%29)) |'
- en: '| Â  |'
  id: totrans-2629
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â interpretations |'
  id: totrans-2630
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è§£é‡Š |'
- en: '| ;Â (make-block  x  y) depicts a block whose left |'
  id: totrans-2631
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â (make-block  x  y) æè¿°äº†ä¸€ä¸ªå·¦è¾¹çš„æ–¹å— |'
- en: '| ;Â corner is ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  x  SIZE)
    pixels from the left and |'
  id: totrans-2632
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è§’è½æ˜¯ ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  x  SIZE)
    åƒç´ ä»å·¦è¾¹å’Œ |'
- en: '| ;Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  y  SIZE)
    pixels from the top; |'
  id: totrans-2633
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  y  SIZE)
    åƒç´ ä»é¡¶éƒ¨ï¼› |'
- en: '| ;Â (make-tetris  b0  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  b1  b2  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    means b0 is the |'
  id: totrans-2634
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; (make-tetris b0 ([åˆ—è¡¨](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    b1 b2 [...]](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    è¡¨ç¤º b0 æ˜¯ |'
- en: '| ;Â dropping block, while b1, b2, and ... are resting |'
  id: totrans-2635
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ; æŠ•æ·æ–¹å—ï¼Œå½“ b1, b2, å’Œ ... æ­£åœ¨ä¼‘æ¯æ—¶ |'
- en: 'This is what we dubbed the logical representation, because the coordinates
    do not reflect the physical location of the blocks, just the number of block sizes
    they are from the origin. Our choice implies that x is always between 0 and WIDTH
    (exclusive) and that y is between 0 and HEIGHT (exclusive), but we ignore this
    knowledge.ExerciseÂ 220\. When you are presented with a complex data definitionâ€”<wbr>like
    the one for the state of a Tetris gameâ€”<wbr>you start by creating instances of
    the various data collections. Here are some suggestive names for examples you
    can later use for functional examples:'
  id: totrans-2636
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„é€»è¾‘è¡¨ç¤ºï¼Œå› ä¸ºåæ ‡å¹¶ä¸åæ˜ æ–¹å—çš„å®é™…ç‰©ç†ä½ç½®ï¼Œåªæ˜¯å®ƒä»¬ä¸åŸç‚¹çš„æ–¹å—å¤§å°çš„æ•°é‡ã€‚æˆ‘ä»¬çš„é€‰æ‹©æ„å‘³ç€ x æ€»æ˜¯åœ¨ 0 å’Œ WIDTHï¼ˆä¸åŒ…æ‹¬ï¼‰ä¹‹é—´ï¼Œè€Œ
    y åœ¨ 0 å’Œ HEIGHTï¼ˆä¸åŒ…æ‹¬ï¼‰ä¹‹é—´ï¼Œä½†æˆ‘ä»¬å¿½ç•¥äº†è¿™ä¸€çŸ¥è¯†ã€‚ç»ƒä¹  220ã€‚å½“ä½ é¢å¯¹ä¸€ä¸ªå¤æ‚çš„æ•°æ®å®šä¹‰â€”â€”<wbr>æ¯”å¦‚ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆçŠ¶æ€çš„å®šä¹‰â€”â€”<wbr>ä½ é¦–å…ˆåˆ›å»ºå„ç§æ•°æ®é›†åˆçš„å®ä¾‹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ‰å¯å‘æ€§çš„åç§°ï¼Œä½ å¯ä»¥ç¨åç”¨äºåŠŸèƒ½ç¤ºä¾‹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â landscape0Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2637
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    landscape0 [...]](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â block-droppingÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2638
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    block-dropping [...]](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â tetris0Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2639
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    tetris0 [...]](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â tetris0-dropÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  id: totrans-2640
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    tetris0-drop [...]](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-2641
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â block-landedÂ (make-blockÂ 0Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHTÂ 1)))
    |'
  id: totrans-2642
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    block-landed (make-block 0 ([å‡](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)
    HEIGHT 1))) |'
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-2643
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â block-on-blockÂ (make-blockÂ 0Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHTÂ 2)))
    |'
  id: totrans-2644
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([å®šä¹‰](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    block-on-block (make-block 0 ([å‡](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)
    HEIGHT 2))) |'
- en: Design the program tetris-render, which turns a given instance of [Tetris](#%28tech._tetri%29)
    into an [Image](part_one.html#%28tech._image%29). Use DrRacketâ€™s interactions
    area to develop the expression that renders some of your (extremely) simple data
    examples. Then formulate the functional examples as unit tests and the function
    itself.
  id: totrans-2645
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ç¨‹åº tetris-renderï¼Œå®ƒå°†ç»™å®šçš„ [Tetris](#%28tech._tetri%29) å®ä¾‹è½¬æ¢ä¸º [Image](part_one.html#%28tech._image%29)ã€‚ä½¿ç”¨
    DrRacket çš„äº¤äº’åŒºåŸŸå¼€å‘æ¸²æŸ“ä½ çš„ä¸€äº›ï¼ˆæå…¶ï¼‰ç®€å•æ•°æ®ç¤ºä¾‹çš„è¡¨è¾¾å¼ã€‚ç„¶åå°†åŠŸèƒ½ç¤ºä¾‹ä½œä¸ºå•å…ƒæµ‹è¯•å’Œå‡½æ•°æœ¬èº«ã€‚
- en: ExerciseÂ 221\. Design the interactive program tetris-main, which displays blocks
    dropping in a straight line from the top of the canvas and landing on the floor
    or on blocks that are already resting. The input to tetris-main should determine
    the rate at which the clock ticks. See the documentation of [on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)
    for how to specify the rate.
  id: totrans-2646
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  221ã€‚è®¾è®¡äº¤äº’ç¨‹åº tetris-mainï¼Œå®ƒæ˜¾ç¤ºä»ç”»å¸ƒé¡¶éƒ¨ç›´çº¿ä¸‹é™çš„æ–¹å—å¹¶è½åœ¨åœ°æ¿æˆ–å·²ç»æ”¾ç½®çš„æ–¹å—ä¸Šã€‚tetris-main çš„è¾“å…¥åº”ç¡®å®šæ—¶é’Ÿæ»´ç­”çš„é€Ÿåº¦ã€‚å‚è§
    [on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)
    çš„æ–‡æ¡£äº†è§£å¦‚ä½•æŒ‡å®šé€Ÿåº¦ã€‚
- en: To discover whether a block landed, we suggest you drop it and check whether
    it is on the floor or it overlaps with one of the blocks on the list of resting
    blocks. Hint Read up on the [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    primitive.
  id: totrans-2647
  prefs: []
  type: TYPE_NORMAL
  zh: è¦å‘ç°ä¸€ä¸ªæ–¹å—æ˜¯å¦è½ä¸‹ï¼Œæˆ‘ä»¬å»ºè®®ä½ å°†å…¶æ”¾ä¸‹å¹¶æ£€æŸ¥å®ƒæ˜¯å¦åœ¨åœ°æ¿ä¸Šæˆ–ä¸ä¼‘æ¯æ–¹å—åˆ—è¡¨ä¸­çš„ä¸€ä¸ªæ–¹å—é‡å ã€‚æç¤ºï¼šé˜…è¯»æœ‰å…³ [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    åŸå§‹å‡½æ•°çš„è¯´æ˜ã€‚
- en: When a block lands, your program should immediately create another block that
    descends on the column to the right of the current one. If the current block is
    already in the right-most column, the next block should use the left-most one.
    Alternatively, define the function block-generate, which randomly selects a column
    different from the current one; see [exerciseÂ 219](#%28counter._%28exercise._ex~3aworm5%29%29)
    for inspiration.
  id: totrans-2648
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä¸€ä¸ªæ–¹å—è½ä¸‹æ—¶ï¼Œä½ çš„ç¨‹åºåº”ç«‹å³åœ¨å½“å‰æ–¹å—å³ä¾§çš„åˆ—ä¸Šåˆ›å»ºå¦ä¸€ä¸ªä¸‹è½çš„æ–¹å—ã€‚å¦‚æœå½“å‰æ–¹å—å·²ç»åœ¨æœ€å³ä¾§çš„åˆ—ä¸­ï¼Œä¸‹ä¸€ä¸ªæ–¹å—åº”ä½¿ç”¨æœ€å·¦ä¾§çš„åˆ—ã€‚æˆ–è€…ï¼Œå®šä¹‰å‡½æ•° block-generateï¼Œå®ƒéšæœºé€‰æ‹©ä¸€ä¸ªä¸åŒäºå½“å‰åˆ—çš„åˆ—ï¼›å‚è§
    [ç»ƒä¹  219](#%28counter._%28exercise._ex~3aworm5%29%29) ä»¥è·å–çµæ„Ÿã€‚
- en: ExerciseÂ 222\. Modify the program from [exerciseÂ 221](#%28counter._%28exercise._ex~3atetris1%29%29)
    so that a player can control the horizontal movement of the dropping block. Each
    time the player presses the "left" arrow key, the dropping block should shift
    one column to the left unless it is in column 0 or there is already a stack of
    resting blocks to its left. Similarly, each time the player presses "right", the
    dropping block should move one column to the right if possible.
  id: totrans-2649
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  222ã€‚ä¿®æ”¹ [ç»ƒä¹  221](#%28counter._%28exercise._ex~3atetris1%29%29) ä¸­çš„ç¨‹åºï¼Œä»¥ä¾¿ç©å®¶å¯ä»¥æ§åˆ¶ä¸‹è½æ–¹å—çš„æ¨ªå‘ç§»åŠ¨ã€‚æ¯æ¬¡ç©å®¶æŒ‰ä¸‹â€œå·¦ç®­å¤´â€é”®æ—¶ï¼Œä¸‹è½æ–¹å—åº”å‘å·¦ç§»åŠ¨ä¸€åˆ—ï¼Œé™¤éå®ƒåœ¨åˆ—
    0 æˆ–å…¶å·¦ä¾§å·²ç»æœ‰ä¸€ä¸ªå †å çš„ä¼‘æ¯æ–¹å—ã€‚åŒæ ·ï¼Œæ¯æ¬¡ç©å®¶æŒ‰ä¸‹â€œå³ç®­å¤´â€é”®æ—¶ï¼Œå¦‚æœå¯èƒ½ï¼Œä¸‹è½æ–¹å—åº”å‘å³ç§»åŠ¨ä¸€åˆ—ã€‚
- en: ExerciseÂ 223\. Equip the program from [exerciseÂ 222](#%28counter._%28exercise._ex~3atetris2%29%29)
    with a [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    clause. The game ends when one of the columns contains enough blocks to â€œtouchâ€
    the top of the canvas.
  id: totrans-2650
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  223ã€‚ç»™ [ç»ƒä¹  222](#%28counter._%28exercise._ex~3atetris2%29%29) ä¸­çš„ç¨‹åºæ·»åŠ ä¸€ä¸ª [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    å­å¥ã€‚æ¸¸æˆç»“æŸçš„æ¡ä»¶æ˜¯æŸä¸€åˆ—ä¸­çš„æ–¹å—è¶³å¤Ÿå¤šä»¥è‡³äºâ€œè§¦åŠâ€ç”»å¸ƒçš„é¡¶éƒ¨ã€‚
- en: Once you have solved [exerciseÂ 223](#%28counter._%28exercise._ex~3atetris3%29%29),
    you have a bare-bones Tetris game. You may wish to polish it a bit before you
    show it to your friends. For example, the final canvas could display a text that
    says how many blocks the player was able to stack up. Or every canvas could contain
    such a text. The choice is yours.
  id: totrans-2651
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ä½ è§£å†³äº† [ç»ƒä¹  223](#%28counter._%28exercise._ex~3atetris3%29%29)ï¼Œä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªåŸºæœ¬çš„ Tetris
    æ¸¸æˆã€‚åœ¨ä½ å‘æœ‹å‹å±•ç¤ºä¹‹å‰ï¼Œä½ å¯èƒ½æƒ³å¯¹å…¶è¿›è¡Œä¸€äº›æ¶¦è‰²ã€‚ä¾‹å¦‚ï¼Œæœ€ç»ˆç”»å¸ƒå¯ä»¥æ˜¾ç¤ºç©å®¶èƒ½å¤Ÿå †å å¤šå°‘æ–¹å—ã€‚æˆ–è€…æ¯ä¸ªç”»å¸ƒéƒ½å¯ä»¥åŒ…å«è¿™æ ·çš„æ–‡æœ¬ã€‚é€‰æ‹©æƒåœ¨ä½ ã€‚
- en: 12.7Full Space War[ğŸ”—](#(part._sec~3aspace-war) "Link to here")
  id: totrans-2652
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 12.7 å…¨ç©ºé—´æˆ˜[ğŸ”—](#(part._sec~3aspace-war) "é“¾æ¥åˆ°æ­¤å¤„")
- en: '[Itemizations and Structures](part_one.html#%28part._ch~3amix%29) alludes to
    a space invader game with little action; the player can merely move the ground
    force back and forth. [Lists and World](#%28part._sec~3alist-world%29) enables
    the player to fire as many shots as desired. This section poses exercises that
    help you complete this game.'
  id: totrans-2653
  prefs: []
  type: TYPE_NORMAL
  zh: '[é¡¹ç›®åŒ–å’Œç»“æ„](part_one.html#%28part._ch~3amix%29)æåˆ°äº†ä¸€ä¸ªåŠ¨ä½œå¾ˆå°‘çš„å¤ªç©ºå…¥ä¾µè€…æ¸¸æˆï¼›ç©å®¶åªèƒ½æ¥å›ç§»åŠ¨åœ°é¢éƒ¨é˜Ÿã€‚[åˆ—è¡¨å’Œä¸–ç•Œ](#%28part._sec~3alist-world%29)ä½¿ç©å®¶èƒ½å¤Ÿå‘å°„ä»»æ„æ•°é‡çš„ç‚®å¼¹ã€‚æœ¬èŠ‚æå‡ºäº†å¸®åŠ©æ‚¨å®Œæˆè¿™ä¸ªæ¸¸æˆçš„ç»ƒä¹ ã€‚'
- en: As always, a UFO is trying to land on Earth. The playerâ€™s task is to prevent
    the UFO from landing. To this end, the game comes with a tank that may fire an
    arbitrary number of shots. When one of these shots comes close enough to the UFOâ€™s
    center of gravity, the game is over and the player won. If the UFO comes close
    enough to the ground, the player lost.
  id: totrans-2654
  prefs: []
  type: TYPE_NORMAL
  zh: å’Œå¾€å¸¸ä¸€æ ·ï¼Œä¸€ä¸ªä¸æ˜é£è¡Œç‰©ï¼ˆUFOï¼‰æ­£åœ¨è¯•å›¾é™è½åœ¨åœ°çƒä¸Šã€‚ç©å®¶çš„ä»»åŠ¡æ˜¯é˜»æ­¢UFOé™è½ã€‚ä¸ºæ­¤ï¼Œæ¸¸æˆæä¾›äº†ä¸€è¾†å¦å…‹ï¼Œå¯ä»¥å‘å°„ä»»æ„æ•°é‡çš„ç‚®å¼¹ã€‚å½“è¿™äº›ç‚®å¼¹ä¸­çš„ä»»ä½•ä¸€ä¸ªè¶³å¤Ÿæ¥è¿‘UFOçš„é‡å¿ƒæ—¶ï¼Œæ¸¸æˆç»“æŸï¼Œç©å®¶è·èƒœã€‚å¦‚æœUFOè¶³å¤Ÿæ¥è¿‘åœ°é¢ï¼Œç©å®¶åˆ™å¤±è´¥ã€‚
- en: 'ExerciseÂ 224\. Use the lessons learned from the preceding two sections and
    design the game extension slowly, adding one feature of the game after another.
    Always use the design recipe and rely on the guidelines for auxiliary functions.
    If you like the game, add other features: show a running text; equip the UFO with
    charges that can eliminate the tank; create an entire fleet of attacking UFOs;
    and above all, use your imagination.'
  id: totrans-2655
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 224ã€‚ä»å‰é¢ä¸¤ä¸ªéƒ¨åˆ†å­¦åˆ°çš„ç»éªŒï¼Œé€æ­¥è®¾è®¡æ¸¸æˆæ‰©å±•ï¼Œä¸€æ¬¡æ·»åŠ ä¸€ä¸ªæ¸¸æˆåŠŸèƒ½ã€‚å§‹ç»ˆä½¿ç”¨è®¾è®¡é…æ–¹å¹¶ä¾èµ–è¾…åŠ©å‡½æ•°çš„æŒ‡å—ã€‚å¦‚æœæ‚¨å–œæ¬¢è¿™ä¸ªæ¸¸æˆï¼Œå¯ä»¥æ·»åŠ å…¶ä»–åŠŸèƒ½ï¼šæ˜¾ç¤ºæ»šåŠ¨æ–‡æœ¬ï¼›ç»™UFOé…å¤‡å¯ä»¥æ¶ˆé™¤å¦å…‹çš„ç”µè·ï¼›åˆ›å»ºä¸€æ”¯å®Œæ•´çš„æ”»å‡»UFOèˆ°é˜Ÿï¼›æœ€é‡è¦çš„æ˜¯ï¼Œå‘æŒ¥æ‚¨çš„æƒ³è±¡åŠ›ã€‚
- en: If you donâ€™t like UFOs and tanks shooting at each other, use the same ideas
    to produce a similar, civilized game.
  id: totrans-2656
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ä¸å–œæ¬¢UFOå’Œå¦å…‹äº’ç›¸å°„å‡»ï¼Œå¯ä»¥ä½¿ç”¨åŒæ ·çš„æƒ³æ³•æ¥åˆ¶ä½œä¸€ä¸ªç±»ä¼¼çš„ã€æ–‡æ˜çš„æ¸¸æˆã€‚
- en: ExerciseÂ 225\. Design a fire-fighting game.
  id: totrans-2657
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 225ã€‚è®¾è®¡ä¸€ä¸ªç­ç«æ¸¸æˆã€‚
- en: The game is set in the western states where fires rage through vast forests.
    It simulates an airborne fire-fighting effort. Specifically, the player acts as
    the pilot of an airplane that drops loads of water on fires on the ground. The
    player controls the planeâ€™s horizontal movements and the release of water loads.
  id: totrans-2658
  prefs: []
  type: TYPE_NORMAL
  zh: æ¸¸æˆè®¾å®šåœ¨è¥¿éƒ¨å„å·ï¼Œé‚£é‡Œçš„å¤§æ£®æ—ä¸­ç«ç¾è‚†è™ã€‚å®ƒæ¨¡æ‹Ÿäº†ç©ºä¸­ç­ç«è¡ŒåŠ¨ã€‚å…·ä½“æ¥è¯´ï¼Œç©å®¶æ‰®æ¼”ä¸€æ¶é£æœºçš„é£è¡Œå‘˜ï¼Œå‘åœ°é¢ä¸Šçš„ç«ç¾æŠ•æ”¾å¤§é‡æ°´ã€‚ç©å®¶æ§åˆ¶é£æœºçš„æ°´å¹³ç§»åŠ¨å’Œé‡Šæ”¾æ°´è½½è·ã€‚
- en: Your game software starts fires at random places on the ground. You may wish
    to limit the number of fires, making them a function of how many fires are currently
    burning or other factors. The purpose of the game is to extinguish all fires in
    a limited amount of time. Hint Use an iterative design approach as illustrated
    in this chapter to create this game.
  id: totrans-2659
  prefs: []
  type: TYPE_NORMAL
  zh: æ‚¨çš„æ¸¸æˆè½¯ä»¶åœ¨åœ°é¢éšæœºä½ç½®å¼•å‘ç«ç¾ã€‚æ‚¨å¯èƒ½å¸Œæœ›é™åˆ¶ç«ç¾çš„æ•°é‡ï¼Œä½¿å®ƒä»¬æˆä¸ºå½“å‰ç‡ƒçƒ§çš„ç«ç¾æ•°é‡çš„å‡½æ•°æˆ–å…¶ä»–å› ç´ ã€‚æ¸¸æˆçš„ç›®çš„æ˜¯åœ¨æœ‰é™çš„æ—¶é—´å†…æ‰‘ç­æ‰€æœ‰ç«ç¾ã€‚æç¤ºï¼šä½¿ç”¨æœ¬ç« ä¸­å±•ç¤ºçš„è¿­ä»£è®¾è®¡æ–¹æ³•æ¥åˆ›å»ºè¿™ä¸ªæ¸¸æˆã€‚
- en: 12.8Finite State Machines[ğŸ”—](#(part._sec~3asec-fsm-list) "Link to here")
  id: totrans-2660
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 12.8æœ‰é™çŠ¶æ€æœº[ğŸ”—](#(part._sec~3asec-fsm-list) "é“¾æ¥åˆ°è¿™é‡Œ")
- en: Finite state machines (FSMs) and regular expressions are ubiquitous elements
    of programming. As [Finite State Worlds](part_one.html#%28part._sec~3aworlds-more%29)
    explains, state machines are one way to think about world programs. Conversely,
    [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29) shows how
    to design world programs that implement an FSM and check whether a player presses
    a specific series of keystrokes.
  id: totrans-2661
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰å’Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯ç¼–ç¨‹ä¸­çš„æ™®éå…ƒç´ ã€‚æ­£å¦‚[æœ‰é™çŠ¶æ€ä¸–ç•Œ](part_one.html#%28part._sec~3aworlds-more%29)æ‰€è§£é‡Šçš„ï¼ŒçŠ¶æ€æœºæ˜¯æ€è€ƒä¸–ç•Œç¨‹åºçš„ä¸€ç§æ–¹å¼ã€‚ç›¸åï¼Œ[ç»ƒä¹ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)å±•ç¤ºäº†å¦‚ä½•è®¾è®¡å®ç°FSMå¹¶æ£€æŸ¥ç©å®¶æ˜¯å¦æŒ‰ä¸‹ç‰¹å®šæŒ‰é”®åºåˆ—çš„ä¸–ç•Œç¨‹åºã€‚
- en: As you may also recall, a finite state machine is equivalent to a regular expression.
    Hence, computer scientists tend to say that an FSM accepts the keystrokes that
    match a particular regular expression, like this one
  id: totrans-2662
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æ‚¨å¯èƒ½ä¹Ÿè®°å¾—ï¼Œæœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰ä¸æ­£åˆ™è¡¨è¾¾å¼ç­‰ä»·ã€‚å› æ­¤ï¼Œè®¡ç®—æœºç§‘å­¦å®¶å€¾å‘äºè¯´FSMæ¥å—ä¸ç‰¹å®šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æŒ‰é”®ï¼Œå°±åƒè¿™æ ·
- en: a (b|c)* d
  id: totrans-2663
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: a (b|c)* d
- en: from [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29).
    If you wanted a program that recognizes a different pattern, say,
  id: totrans-2664
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥è‡ª[ç»ƒä¹ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)ã€‚å¦‚æœä½ æƒ³è¦ä¸€ä¸ªè¯†åˆ«ä¸åŒæ¨¡å¼çš„ç¨‹åºï¼Œæ¯”å¦‚è¯´ï¼Œ
- en: a (b|c)* a
  id: totrans-2665
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: a (b|c)* a
- en: you would just modify the existing program appropriately. The two programs would
    resemble each other, and if you were to repeat this exercise for several different
    regular expressions, you would end up with a whole bunch of similar-looking programs.
  id: totrans-2666
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ åªéœ€é€‚å½“åœ°ä¿®æ”¹ç°æœ‰çš„ç¨‹åºå³å¯ã€‚è¿™ä¸¤ä¸ªç¨‹åºå°†å½¼æ­¤ç›¸ä¼¼ï¼Œå¦‚æœä½ è¦å¯¹å‡ ä¸ªä¸åŒçš„æ­£åˆ™è¡¨è¾¾å¼é‡å¤è¿™ä¸ªç»ƒä¹ ï¼Œä½ æœ€ç»ˆä¼šå¾—åˆ°ä¸€å¤§å †çœ‹èµ·æ¥ç›¸ä¼¼çš„ç¨‹åºã€‚
- en: A natural idea is to look for a general solution, that is, a world program that
    consumes a data representation of an FSM and recognizes whether a player presses
    a matching sequence of keys. This section presents the design of just such a world
    program, though a greatly simplified one. In particular, the FSMs come without
    initial or final states, and the matching ignores the actual keystrokes; instead
    the transition from one state to another takes place whenever any key is pressed.
    Furthermore, we require that the states are color strings. That way, the FSM-interpreting
    program can simply display the current state as a color.
  id: totrans-2667
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªè‡ªç„¶çš„æƒ³æ³•æ˜¯å¯»æ‰¾ä¸€ä¸ªé€šç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œå³ä¸€ä¸ªä¸–ç•Œç¨‹åºï¼Œå®ƒæ¶ˆè€—ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰çš„æ•°æ®è¡¨ç¤ºï¼Œå¹¶è¯†åˆ«ç©å®¶æ˜¯å¦æŒ‰ä¸‹äº†åŒ¹é…çš„é”®åºåˆ—ã€‚æœ¬èŠ‚å°†ä»‹ç»è¿™æ ·ä¸€ä¸ªä¸–ç•Œç¨‹åºçš„è®¾è®¡ï¼Œå°½ç®¡å®ƒè¢«å¤§å¤§ç®€åŒ–äº†ã€‚ç‰¹åˆ«æ˜¯ï¼ŒFSMæ²¡æœ‰åˆå§‹æˆ–æœ€ç»ˆçŠ¶æ€ï¼ŒåŒ¹é…å¿½ç•¥äº†å®é™…çš„æŒ‰é”®ï¼›ç›¸åï¼Œæ¯å½“æŒ‰ä¸‹ä»»ä½•é”®æ—¶ï¼Œä»ä¸€ä¸ªçŠ¶æ€åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„è½¬æ¢å°±ä¼šå‘ç”Ÿã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¦æ±‚çŠ¶æ€æ˜¯é¢œè‰²å­—ç¬¦ä¸²ã€‚è¿™æ ·ï¼ŒFSMè§£é‡Šç¨‹åºå°±å¯ä»¥ç®€å•åœ°æ˜¾ç¤ºå½“å‰çŠ¶æ€çš„é¢œè‰²ã€‚
- en: 'Note on Design Choices Here is another attempt to generalize:'
  id: totrans-2668
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡é€‰æ‹©æ³¨æ„äº‹é¡¹è¿™é‡Œæ˜¯å¯¹é€šç”¨åŒ–å°è¯•çš„å¦ä¸€ç§å°è¯•ï¼š
- en: 'Sample Problem Design a program that interprets a given FSM on a specific list
    of [KeyEvent](part_one.html#%28tech._keyevent%29)s. That is, the program consumes
    a data representation of an FSM and a string. Its result is #true if the string
    matches the regular expression that corresponds to the FSM; otherwise it is #false.'
  id: totrans-2669
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ ·æœ¬é—®é¢˜è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œè¯¥ç¨‹åºåœ¨ç‰¹å®šçš„[KeyEvent](part_one.html#%28tech._keyevent%29)åˆ—è¡¨ä¸Šè§£é‡Šç»™å®šçš„FSMã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥ç¨‹åºæ¶ˆè€—ä¸€ä¸ªFSMçš„æ•°æ®è¡¨ç¤ºå’Œå­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²ä¸FSMå¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œåˆ™å…¶ç»“æœä¸º#trueï¼›å¦åˆ™ä¸º#falseã€‚
- en: As it turns out, however, you cannot design this program with the principles
    of the first two parts. Indeed, solving this problem has to wait until [Algorithms
    that Backtrack](part_five.html#%28part._ch~3abacktrack%29); see [exerciseÂ 476](part_five.html#%28counter._fsm._%28exercise._ex~3afsm-match%29%29).
    End
  id: totrans-2670
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œç»“æœå´æ˜¯ï¼Œä½ ä¸èƒ½ç”¨å‰ä¸¤éƒ¨åˆ†çš„åŸç†æ¥è®¾è®¡è¿™ä¸ªç¨‹åºã€‚å®é™…ä¸Šï¼Œè§£å†³è¿™ä¸ªé—®é¢˜å¿…é¡»ç­‰åˆ°[å›æº¯ç®—æ³•](part_five.html#%28part._ch~3abacktrack%29)ï¼›å‚è§[ç»ƒä¹ 476](part_five.html#%28counter._fsm._%28exercise._ex~3afsm-match%29%29)ã€‚ç»“æŸ
- en: '| ;Â An FSM is one of: |'
  id: totrans-2671
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªFSMå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š |'
- en: '| ;Â Â Â â€“  ''() |'
  id: totrans-2672
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â â€“  ''() |'
- en: '| ;Â Â Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Transition](#%28tech._transition%29)  [FSM](#%28tech._fsm%29))
    |'
  id: totrans-2673
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Transition](#%28tech._transition%29)  [FSM](#%28tech._fsm%29))
    |'
- en: '| Â  |'
  id: totrans-2674
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â transitionÂ [currentÂ next])
    |'
  id: totrans-2675
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â transitionÂ [currentÂ next])
    |'
- en: '| ;Â A Transition is a structure: |'
  id: totrans-2676
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä¸€ä¸ªè½¬æ¢æ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-transition  [FSM-State](#%28tech._fsm._state%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
  id: totrans-2677
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-transition  [FSM-State](#%28tech._fsm._state%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
- en: '| Â  |'
  id: totrans-2678
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â FSM-State is a [Color](part_one.html#%28tech._data-uni._color%29). |'
  id: totrans-2679
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â FSM-State æ˜¯ä¸€ä¸ª [Color](part_one.html#%28tech._data-uni._color%29)ã€‚ |'
- en: '| Â  |'
  id: totrans-2680
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â interpretation An [FSM](#%28tech._fsm%29) represents the transitions that
    a |'
  id: totrans-2681
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â è§£é‡Šä¸€ä¸ª[FSM](#%28tech._fsm%29)è¡¨ç¤ºä¸€ä¸ª |'
- en: '| ;Â finite state machine can take from one state to another |'
  id: totrans-2682
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æœ‰é™çŠ¶æ€æœºå¯ä»¥ä»ä¸€ä¸ªçŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªçŠ¶æ€ |'
- en: '| ;Â in reaction to keystrokes |'
  id: totrans-2683
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¯¹æŒ‰é”®çš„ååº” |'
- en: ''
  id: totrans-2684
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 82: Representing and interpreting finite state machines in general'
  id: totrans-2685
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å›¾82ï¼šä¸€èˆ¬è¡¨ç¤ºå’Œè§£é‡Šæœ‰é™çŠ¶æ€æœº
- en: 'The simplified problem statement dictates a number of points, including the
    need for a data definition for the representation of FSMs, the nature of its states,
    and their appearance as an image. [FigureÂ 82](#%28counter._%28figure._fig~3afsm1%29%29)
    collects this information. It starts with a data definition for [FSM](#%28tech._fsm%29)s.
    As you can see, an [FSM](#%28tech._fsm%29) is just a list of [Transition](#%28tech._transition%29)s.
    We must use a list because we want our world program to work with any FSM and
    that means a finite, but arbitrarily large, number of states. Each [Transition](#%28tech._transition%29)
    combines two states in a structure: the current state and the next state, that
    is, the one that the machine transitions to when the player presses a key. The
    final part of the data definition says that a state is just the name of a color.'
  id: totrans-2686
  prefs: []
  type: TYPE_NORMAL
  zh: ç®€åŒ–çš„é—®é¢˜é™ˆè¿°æŒ‡å‡ºäº†å‡ ä¸ªè¦ç‚¹ï¼ŒåŒ…æ‹¬å¯¹æœ‰é™çŠ¶æ€æœºè¡¨ç¤ºçš„æ•°æ®å®šä¹‰çš„éœ€æ±‚ï¼Œå…¶çŠ¶æ€çš„æ€§è´¨ä»¥åŠå®ƒä»¬ä½œä¸ºå›¾åƒçš„è¡¨ç¤ºã€‚[å›¾82](#%28counter._%28figure._fig~3afsm1%29%29)æ”¶é›†äº†è¿™äº›ä¿¡æ¯ã€‚å®ƒä»ä¸€ä¸ª[æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29)çš„æ•°æ®å®šä¹‰å¼€å§‹ã€‚æ­£å¦‚ä½ æ‰€è§ï¼Œä¸€ä¸ª[æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29)åªæ˜¯ä¸€ä¸ª[è½¬æ¢](#%28tech._transition%29)çš„åˆ—è¡¨ã€‚æˆ‘ä»¬å¿…é¡»ä½¿ç”¨åˆ—è¡¨ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ä¸–ç•Œç¨‹åºèƒ½å¤Ÿä¸ä»»ä½•æœ‰é™çŠ¶æ€æœºä¸€èµ·å·¥ä½œï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªæœ‰é™ä½†ä»»æ„å¤§çš„çŠ¶æ€æ•°é‡ã€‚æ¯ä¸ª[è½¬æ¢](#%28tech._transition%29)åœ¨ç»“æ„ä¸­å°†ä¸¤ä¸ªçŠ¶æ€ç»“åˆèµ·æ¥ï¼šå½“å‰çŠ¶æ€å’Œä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œå³å½“ç©å®¶æŒ‰ä¸‹é”®æ—¶æœºå™¨è½¬æ¢åˆ°çš„çŠ¶æ€ã€‚æ•°æ®å®šä¹‰çš„æœ€åéƒ¨åˆ†è¯´æ˜çŠ¶æ€åªæ˜¯é¢œè‰²çš„åç§°ã€‚
- en: ExerciseÂ 226\. Design state=?, an equality predicate for states.
  id: totrans-2687
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 226ã€‚è®¾è®¡çŠ¶æ€=ï¼Œä¸€ä¸ªç”¨äºçŠ¶æ€çš„ç­‰ä»·è°“è¯ã€‚
- en: 'Since this definition is complex, we follow the design recipe and create an
    example:'
  id: totrans-2688
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºè¿™ä¸ªå®šä¹‰å¾ˆå¤æ‚ï¼Œæˆ‘ä»¬éµå¾ªè®¾è®¡é£Ÿè°±å¹¶åˆ›å»ºä¸€ä¸ªç¤ºä¾‹ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â fsm-traffic
    |'
  id: totrans-2689
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â fsm-traffic
    |'
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â (make-transitionÂ "red"Â "green")
    |'
  id: totrans-2690
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â (make-transitionÂ "red"Â "green"))
    |'
- en: '| Â Â Â Â Â Â Â Â (make-transitionÂ "green"Â "yellow") |'
  id: totrans-2691
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â (make-transitionÂ "green"Â "yellow") |'
- en: '| Â Â Â Â Â Â Â Â (make-transitionÂ "yellow"Â "red"))) |'
  id: totrans-2692
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â Â Â Â Â Â Â (make-transitionÂ "yellow"Â "red"))) |'
- en: You probably guessed that this transition table describes a traffic light. Its
    first transition tells us that the traffic light jumps from "red" to "green",
    the second one represents the transition from "green" to "yellow", and the last
    one is for "yellow" to "red".
  id: totrans-2693
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½å·²ç»çŒœåˆ°ï¼Œè¿™ä¸ªè½¬æ¢è¡¨æè¿°äº†ä¸€ä¸ªäº¤é€šç¯ã€‚å®ƒçš„ç¬¬ä¸€ä¸ªè½¬æ¢å‘Šè¯‰æˆ‘ä»¬äº¤é€šç¯ä»â€œçº¢è‰²â€è·³è½¬åˆ°â€œç»¿è‰²â€ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºä»â€œç»¿è‰²â€è½¬æ¢åˆ°â€œé»„è‰²â€ï¼Œæœ€åä¸€ä¸ªæ˜¯ä»â€œé»„è‰²â€è½¬æ¢åˆ°â€œçº¢è‰²â€ã€‚
- en: ExerciseÂ 227\. The BW Machine is an FSM that flips from black to white and back
    to black for every key event. Formulate a data representation for the BW Machine.
  id: totrans-2694
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 227ã€‚BWæœºå™¨æ˜¯ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºï¼Œæ¯æ¬¡æŒ‰é”®äº‹ä»¶éƒ½ä¼šä»é»‘è‰²ç¿»è½¬åˆ°ç™½è‰²ï¼Œç„¶åå†ç¿»è½¬åˆ°é»‘è‰²ã€‚ä¸ºBWæœºå™¨åˆ¶å®šæ•°æ®è¡¨ç¤ºã€‚
- en: 'Clearly, the solution to our problem is a world program:'
  id: totrans-2695
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç„¶ï¼Œæˆ‘ä»¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸€ä¸ªä¸–ç•Œç¨‹åºï¼š
- en: '| ;Â [FSM](#%28tech._fsm%29) -> ??? |'
  id: totrans-2696
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29) -> ??? |'
- en: '| ;Â match the keys pressed with the given [FSM](#%28tech._fsm%29) |'
  id: totrans-2697
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â åŒ¹é…æŒ‰ä¸‹çš„é”®ä¸ç»™å®šçš„[æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29) |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (simulateÂ an-fsm)
    |'
  id: totrans-2698
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (simulateÂ an-fsm)
    |'
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  id: totrans-2699
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  id: totrans-2700
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [[ç»˜åˆ¶](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)
    [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  id: totrans-2701
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|Â Â Â [[åœ¨é”®ä¸Š](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)
    [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
- en: It is supposed to consume a [FSM](#%28tech._fsm%29), but we have no clue what
    the program is to produce. We call the program simulate because it acts like the
    given [FSM](#%28tech._fsm%29) in response to a playerâ€™s keystrokes.
  id: totrans-2702
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒåº”è¯¥æ¶ˆè€—ä¸€ä¸ª[FSM](#%28tech._fsm%29)ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰çº¿ç´¢çŸ¥é“ç¨‹åºå°†äº§ç”Ÿä»€ä¹ˆã€‚æˆ‘ä»¬ç§°è¿™ä¸ªç¨‹åºä¸ºsimulateï¼Œå› ä¸ºå®ƒåœ¨å“åº”ç©å®¶çš„æŒ‰é”®æ—¶è¡¨ç°å¾—åƒç»™å®šçš„[FSM](#%28tech._fsm%29)ã€‚
- en: Letâ€™s follow the design recipe for world programs anyway to see how far it takes
    us. It tells us to differentiate between those things in the â€œreal worldâ€ that
    change and those that remain the same. While the simulate function consumes an
    instance of [FSM](#%28tech._fsm%29), we also know that this [FSM](#%28tech._fsm%29)
    does not change. What changes is the current state of the machine.
  id: totrans-2703
  prefs: []
  type: TYPE_NORMAL
  zh: æ— è®ºå¦‚ä½•ï¼Œè®©æˆ‘ä»¬éµå¾ªä¸–ç•Œç¨‹åºçš„é…æ–¹æ¥æŸ¥çœ‹å®ƒèƒ½å¸¦æˆ‘ä»¬èµ°å¤šè¿œã€‚å®ƒå‘Šè¯‰æˆ‘ä»¬åŒºåˆ†â€œç°å®ä¸–ç•Œâ€ä¸­é‚£äº›å˜åŒ–å’Œé‚£äº›ä¿æŒä¸å˜çš„äº‹ç‰©ã€‚å½“æ¨¡æ‹Ÿå‡½æ•°æ¶ˆè€—ä¸€ä¸ª[FSM](#%28tech._fsm%29)å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬ä¹ŸçŸ¥é“è¿™ä¸ª[FSM](#%28tech._fsm%29)ä¸ä¼šæ”¹å˜ã€‚æ”¹å˜çš„æ˜¯æœºå™¨çš„å½“å‰çŠ¶æ€ã€‚
- en: This analysis suggests the following data definition
  id: totrans-2704
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§åˆ†æè¡¨æ˜ä»¥ä¸‹æ•°æ®å®šä¹‰
- en: ;Â A SimulationState.v1 is an [FSM-State](#%28tech._fsm._state%29).
  id: totrans-2705
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ;Â ä¸€ä¸ªSimulationState.v1æ˜¯ä¸€ä¸ªFSM-Stateã€‚
- en: According to the design recipe for world programs, this data definition completes
    the main function:The [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)
    constant represents an â€œinvisibleâ€ image. It is a good default value for writing
    down the headers of rendering functions.
  id: totrans-2706
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®ä¸–ç•Œç¨‹åºçš„é…æ–¹è®¾è®¡ï¼Œè¿™ä¸ªæ•°æ®å®šä¹‰å®Œæˆäº†ä¸»å‡½æ•°ï¼š[empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)å¸¸é‡ä»£è¡¨ä¸€ä¸ªâ€œä¸å¯è§â€çš„å›¾åƒã€‚å®ƒæ˜¯ç¼–å†™æ¸²æŸ“å‡½æ•°æ ‡é¢˜çš„å¥½é»˜è®¤å€¼ã€‚
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (simulate.v1Â fsm0)
    |'
  id: totrans-2707
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (simulate.v1Â fsm0)
    |'
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â initial-state
    |'
  id: totrans-2708
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â initial-state
    |'
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render-state.v1]
    |'
  id: totrans-2709
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render-state.v1]
    |'
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â find-next-state.v1]))
    |'
  id: totrans-2710
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â find-next-state.v1]]
    |'
- en: 'and implies a wish list with two entries:'
  id: totrans-2711
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¶ä¸”æš—ç¤ºäº†ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªæ¡ç›®çš„æ„¿æœ›æ¸…å•ï¼š
- en: '| ;Â [SimulationState.v1](#%28tech._simulationstate..v1%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-2712
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [SimulationState.v1](#%28tech._simulationstate..v1%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â renders a world state as an image |'
  id: totrans-2713
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†ä¸–ç•ŒçŠ¶æ€æ¸²æŸ“ä¸ºå›¾åƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-state.v1Â s)
    |'
  id: totrans-2714
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-state.v1Â s)
    |'
- en: '| Â Â [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29))
    |'
  id: totrans-2715
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29))
    |'
- en: '| Â  |'
  id: totrans-2716
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [SimulationState.v1](#%28tech._simulationstate..v1%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [SimulationState.v1](#%28tech._simulationstate..v1%29) |'
  id: totrans-2717
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [SimulationState.v1](#%28tech._simulationstate..v1%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [SimulationState.v1](#%28tech._simulationstate..v1%29) |'
- en: '| ;Â finds the next state from ke and cs |'
  id: totrans-2718
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»keå’Œcsä¸­æ‰¾åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-state.v1Â csÂ ke)
    |'
  id: totrans-2719
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-state.v1Â csÂ ke)
    |'
- en: '| Â Â Â cs) |'
  id: totrans-2720
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â cs) |'
- en: 'The sketch raises two questions. First, there is the issue of how the very
    first [SimulationState.v1](#%28tech._simulationstate..v1%29) is determined. Currently,
    the chosen state, initial-state, is marked in grey to warn you about the issue.
    Second, the second entry on the wish list must cause some consternation:'
  id: totrans-2721
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè‰å›¾æå‡ºäº†ä¸¤ä¸ªé—®é¢˜ã€‚é¦–å…ˆï¼Œæœ‰å…³äºå¦‚ä½•ç¡®å®šç¬¬ä¸€ä¸ª[SimulationState.v1](#%28tech._simulationstate..v1%29)çš„é—®é¢˜ã€‚ç›®å‰ï¼Œæ‰€é€‰çš„çŠ¶æ€ï¼Œinitial-stateï¼Œè¢«æ ‡è®°ä¸ºç°è‰²ä»¥è­¦å‘Šæ‚¨è¿™ä¸ªé—®é¢˜ã€‚å…¶æ¬¡ï¼Œæ„¿æœ›æ¸…å•ä¸Šçš„ç¬¬äºŒä¸ªæ¡ç›®å¿…é¡»å¼•èµ·ä¸€äº›å›°æƒ‘ï¼š
- en: How can find-next-state possibly find the next state when all it is given is
    the current state and a keystroke?
  id: totrans-2722
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å½“find-next-stateåªç»™å‡ºå½“å‰çŠ¶æ€å’ŒæŒ‰é”®æ—¶ï¼Œå®ƒå¦‚ä½•æ‰¾åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€å‘¢ï¼Ÿ
- en: 'This question rings especially true because, according to the simplified problem
    statement, the exact nature of the keystroke is irrelevant; the FSM transitions
    to the next state regardless of which key is pressed.What this second issue exposes
    is a fundamental limitation of BSL+. To appreciate this limitation, we start with
    a work-around. Basically, the analysis demands that the find-next-state function
    receives not only the current state but also the [FSM](#%28tech._fsm%29) so that
    it can search the list of transitions and pick the next state. In other words,
    the state of the world must include bothAlonzo Church and Alan Turing, the first
    two computer scientists, proved in the 1930s that all programming languages can
    compute certain functions on numbers. Hence, they argued that all programming
    languages were equal. The first author of this book [disagrees](Https://felleisen.org/matthias/papers.html#scp91-felleisen).
    He distinguishes languages according to how they allow programmers to express
    solutions. the current state of the [FSM](#%28tech._fsm%29) and the [FSM](#%28tech._fsm%29)
    itself:'
  id: totrans-2723
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªé—®é¢˜å°¤å…¶çœŸå®ï¼Œå› ä¸ºæ ¹æ®ç®€åŒ–çš„é—®é¢˜é™ˆè¿°ï¼ŒæŒ‰é”®çš„ç¡®åˆ‡æ€§è´¨æ— å…³ç´§è¦ï¼›FSMæ— è®ºæŒ‰ä¸‹å“ªä¸ªé”®éƒ½ä¼šè½¬æ¢åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚è¿™ä¸ªé—®é¢˜æš´éœ²çš„æ˜¯BSL+çš„ä¸€ä¸ªåŸºæœ¬é™åˆ¶ã€‚ä¸ºäº†ç†è§£è¿™ä¸ªé™åˆ¶ï¼Œæˆ‘ä»¬é¦–å…ˆä»ä¸€ç§æƒå®œä¹‹è®¡å¼€å§‹ã€‚åŸºæœ¬ä¸Šï¼Œåˆ†æè¦æ±‚find-next-stateå‡½æ•°ä¸ä»…æ¥æ”¶å½“å‰çŠ¶æ€ï¼Œè¿˜è¦æ¥æ”¶[FSM](#%28tech._fsm%29)ï¼Œä»¥ä¾¿å®ƒå¯ä»¥æœç´¢è½¬æ¢åˆ—è¡¨å¹¶é€‰æ‹©ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚æ¢å¥è¯è¯´ï¼Œä¸–ç•ŒçŠ¶æ€å¿…é¡»åŒ…æ‹¬å½“å‰çŠ¶æ€ã€[FSM](#%28tech._fsm%29)çš„çŠ¶æ€ä»¥åŠ[FSM](#%28tech._fsm%29)æœ¬èº«ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â fsÂ [fsmÂ current])
    |'
  id: totrans-2724
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â fsÂ [fsmÂ current])
    |'
- en: '| ;Â A SimulationState.v2 is a structure: |'
  id: totrans-2725
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â SimulationState.v2æ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-fs  [FSM](#%28tech._fsm%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
  id: totrans-2726
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-fs  [FSM](#%28tech._fsm%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
- en: 'According to the world design recipe, this change also means that the key-event
    handler must return this combination:'
  id: totrans-2727
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®[ä¸–ç•Œè®¾è®¡é…æ–¹](#%28tech._world_design_recipe%29)ï¼Œè¿™ç§å˜åŒ–ä¹Ÿæ„å‘³ç€é”®äº‹ä»¶å¤„ç†å™¨å¿…é¡»è¿”å›è¿™ä¸ªç»„åˆï¼š
- en: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-2728
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â renders a world state as an image |'
  id: totrans-2729
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†ä¸–ç•ŒçŠ¶æ€æ¸²æŸ“ä¸ºå›¾åƒ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-state.v2Â s)
    |'
  id: totrans-2730
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-state.v2Â s)
    |'
- en: '| Â Â [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29))
    |'
  id: totrans-2731
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29))
    |'
- en: '| Â  |'
  id: totrans-2732
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â  |'
- en: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [SimulationState.v2](#%28tech._simulationstate..v2%29) |'
  id: totrans-2733
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [SimulationState.v2](#%28tech._simulationstate..v2%29) |'
- en: '| ;Â finds the next state from ke and cs |'
  id: totrans-2734
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»keå’Œcsä¸­æ‰¾åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-state.v2Â csÂ ke)
    |'
  id: totrans-2735
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-state.v2Â csÂ ke)
    |'
- en: '| Â Â Â cs) |'
  id: totrans-2736
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| cs) |'
- en: 'Finally, the main function must now consume two arguments: the [FSM](#%28tech._fsm%29)
    and its first state. After all, the various [FSM](#%28tech._fsm%29)s that simulate
    consumes come with all kinds of states; we cannot assume that all of them have
    the same initial state. Here is the revised function header:'
  id: totrans-2737
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œä¸»å‡½æ•°ç°åœ¨å¿…é¡»æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š[FSM](#%28tech._fsm%29)åŠå…¶ç¬¬ä¸€ä¸ªçŠ¶æ€ã€‚æ¯•ç«Ÿï¼Œæ¨¡æ‹Ÿæ¶ˆè€—çš„å„ç§[FSM](#%28tech._fsm%29)éƒ½å¸¦æœ‰å„ç§çŠ¶æ€ï¼›æˆ‘ä»¬ä¸èƒ½å‡è®¾å®ƒä»¬éƒ½æœ‰ç›¸åŒçš„åˆå§‹çŠ¶æ€ã€‚ä»¥ä¸‹æ˜¯ä¿®æ”¹åçš„å‡½æ•°å¤´ï¼š
- en: '| ;Â [FSM](#%28tech._fsm%29)  [FSM-State](#%28tech._fsm._state%29) -> [SimulationState.v2](#%28tech._simulationstate..v2%29)
    |'
  id: totrans-2738
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [FSM](#%28tech._fsm%29)  [FSM-State](#%28tech._fsm._state%29) -> [SimulationState.v2](#%28tech._simulationstate..v2%29)
    |'
- en: '| ;Â match the keys pressed with the given [FSM](#%28tech._fsm%29) |'
  id: totrans-2739
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å°†æŒ‰ä¸‹çš„é”®ä¸ç»™å®šçš„ [FSM](#%28tech._fsm%29) åŒ¹é… |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (simulate.v2Â an-fsmÂ s0)
    |'
  id: totrans-2740
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (simulate.v2Â an-fsmÂ s0)
    |'
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â (make-fsÂ an-fsmÂ s0)
    |'
  id: totrans-2741
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â (make-fsÂ an-fsmÂ s0)
    |'
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â state-as-colored-square]
    |'
  id: totrans-2742
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â state-as-colored-square]
    |'
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â find-next-state]))
    |'
  id: totrans-2743
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â find-next-state]))
    |'
- en: 'Letâ€™s return to the example of the traffic-light [FSM](#%28tech._fsm%29). For
    this machine, it would be best to apply simulate to the machine and "red":'
  id: totrans-2744
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å›åˆ°äº¤é€šç¯[æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29)çš„ä¾‹å­ã€‚å¯¹äºè¿™ä¸ªæœºå™¨ï¼Œæœ€å¥½æ˜¯å°†æ¨¡æ‹Ÿåº”ç”¨äºæœºå™¨å’Œâ€œçº¢è‰²â€ï¼š
- en: (simulate.v2Â fsm-trafficÂ "red")
  id: totrans-2745
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: (simulate.v2Â fsm-trafficÂ "red")
- en: Stop! Why do you think "red" is good for traffic lights?Engineers call "red"
    the safe state.
  id: totrans-2746
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼ä½ è®¤ä¸ºä¸ºä»€ä¹ˆâ€œçº¢è‰²â€å¯¹äº¤é€šç¯æ¥è¯´å¾ˆå¥½ï¼Ÿå·¥ç¨‹å¸ˆç§°ä¹‹ä¸ºå®‰å…¨çŠ¶æ€ã€‚
- en: Note on Expressive Power Given the work-around, we can now explain the limitation
    of BSL. Even though the given [FSM](#%28tech._fsm%29) does not change during the
    course of the simulation, its description must become a part of the worldâ€™s state.
    Ideally, the program should express that the description of the [FSM](#%28tech._fsm%29)
    remains constant, but instead the program must treat the [FSM](#%28tech._fsm%29)
    as part of the ever-changing state. The reader of a program cannot deduce this
    fact from the first piece of [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    alone.
  id: totrans-2747
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºè¡¨è¾¾èƒ½åŠ›çš„è¯´æ˜ ç»™å®šè§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è§£é‡ŠBSLçš„é™åˆ¶ã€‚å°½ç®¡ç»™å®šçš„[æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29)åœ¨æ¨¡æ‹Ÿè¿‡ç¨‹ä¸­ä¸ä¼šæ”¹å˜ï¼Œä½†å…¶æè¿°å¿…é¡»æˆä¸ºä¸–ç•ŒçŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œç¨‹åºåº”è¯¥è¡¨è¾¾[æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29)çš„æè¿°ä¿æŒä¸å˜ï¼Œä½†ç›¸åï¼Œç¨‹åºå¿…é¡»å°†[æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29)è§†ä¸ºä¸æ–­å˜åŒ–çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚ç¨‹åºè¯»è€…ä¸èƒ½ä»…ä»ç¬¬ä¸€å—[å¤§çˆ†ç‚¸](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)ä¸­æ¨æ–­å‡ºè¿™ä¸€äº‹å®ã€‚
- en: 'The next part of the book resolves this conundrum with the introduction of
    a new programming language and a specific linguistic construct: ISL and local
    definitions. For details, see [Local Definitions Add Expressive Power](part_three.html#%28part._sec~3alocal-is-power%29).
    End'
  id: totrans-2748
  prefs: []
  type: TYPE_NORMAL
  zh: ä¹¦çš„ä¸‹ä¸€éƒ¨åˆ†é€šè¿‡å¼•å…¥ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€å’Œç‰¹å®šçš„è¯­è¨€ç»“æ„æ¥è§£å†³è¿™ä¸ªéš¾é¢˜ï¼šISLå’Œå±€éƒ¨å®šä¹‰ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[å±€éƒ¨å®šä¹‰å¢åŠ è¡¨è¾¾èƒ½åŠ›](part_three.html#%28part._sec~3alocal-is-power%29)ã€‚ç»“æŸ
- en: 'At this point, we can turn to the wish list and work through its entries, one
    at a time. The first one, the design of state-as-colored-square, is so straightforward
    that we simply provide the complete definition:'
  id: totrans-2749
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è½¬å‘æ„¿æœ›æ¸…å•ï¼Œå¹¶é€ä¸ªå¤„ç†å…¶æ¡ç›®ã€‚ç¬¬ä¸€ä¸ªï¼Œå³çŠ¶æ€ä»¥å½©è‰²æ–¹å—çš„å½¢å¼è®¾è®¡ï¼Œéå¸¸ç›´æ¥ï¼Œæˆ‘ä»¬åªéœ€æä¾›å®Œæ•´çš„å®šä¹‰ï¼š
- en: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  id: totrans-2750
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29) -> [Image](part_one.html#%28tech._image%29)
    |'
- en: '| ;Â renders current world state as a colored square |'
  id: totrans-2751
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â å°†å½“å‰ä¸–ç•ŒçŠ¶æ€ä»¥å½©è‰²æ–¹å—çš„å½¢å¼å‘ˆç° |'
- en: '| Â  |'
  id: totrans-2752
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (state-as-colored-square
    |'
  id: totrans-2753
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (state-as-colored-square
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (make-fsÂ fsm-trafficÂ "red")) |'
  id: totrans-2754
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â Â Â (make-fsÂ fsm-trafficÂ "red")) |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 100Â "solid"Â "red"))
    |'
  id: totrans-2755
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 100Â "solid"Â "red"))
    |'
- en: '| Â  |'
  id: totrans-2756
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   |   |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (state-as-colored-squareÂ an-fsm)
    |'
  id: totrans-2757
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (state-as-colored-squareÂ an-fsm)
    |'
- en: '| Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 100Â "solid"Â (fs-currentÂ an-fsm)))
    |'
  id: totrans-2758
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '|   ;Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 100Â "solid"Â (fs-currentÂ an-fsm)))
    |'
- en: 'In contrast, the design of the key-event handler deserves some discussion.
    Recall the header material:'
  id: totrans-2759
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸æ­¤ç›¸åï¼Œé”®äº‹ä»¶å¤„ç†å™¨çš„è®¾è®¡å€¼å¾—è®¨è®ºã€‚å›æƒ³ä¸€ä¸‹å‰é¢çš„å¤´éƒ¨ææ–™ï¼š
- en: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [SimulationState.v2](#%28tech._simulationstate..v2%29) |'
  id: totrans-2760
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [SimulationState.v2](#%28tech._simulationstate..v2%29) |'
- en: '| ;Â finds the next state from an-fsm and ke |'
  id: totrans-2761
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â ä»an-fsmå’Œkeä¸­æ‰¾åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
  id: totrans-2762
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
- en: '| Â Â an-fsm) |'
  id: totrans-2763
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â an-fsm) |'
- en: 'According to the design recipe, the handler must consume a state of the world
    and a [KeyEvent](part_one.html#%28tech._keyevent%29), and it must produce the
    next state of the world. This articulation of the signature in plain words also
    guides the design of examples. Here are the first two:'
  id: totrans-2764
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®è®¾è®¡é…æ–¹ï¼Œå¤„ç†å™¨å¿…é¡»æ¶ˆè€—ä¸€ä¸ªä¸–ç•ŒçŠ¶æ€å’Œä¸€ä¸ª[KeyEvent](part_one.html#%28tech._keyevent%29)ï¼Œå¹¶ä¸”å®ƒå¿…é¡»äº§ç”Ÿä¸‹ä¸€ä¸ªä¸–ç•ŒçŠ¶æ€ã€‚è¿™ç§ç”¨æ™®é€šè¯­è¨€å¯¹ç­¾åçš„é˜è¿°ä¹ŸæŒ‡å¯¼äº†ç¤ºä¾‹çš„è®¾è®¡ã€‚ä»¥ä¸‹æ˜¯å‰ä¸¤ä¸ªç¤ºä¾‹ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-2765
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (find-next-stateÂ (make-fsÂ fsm-trafficÂ "red")Â "n") |'
  id: totrans-2766
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (find-next-stateÂ (make-fsÂ fsm-trafficÂ "red")Â "n") |'
- en: '| Â Â (make-fsÂ fsm-trafficÂ "green")) |'
  id: totrans-2767
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-fsÂ fsm-trafficÂ "green")) |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-2768
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (find-next-stateÂ (make-fsÂ fsm-trafficÂ "red")Â "a") |'
  id: totrans-2769
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (find-next-stateÂ (make-fsÂ fsm-trafficÂ "red")Â "a") |'
- en: '| Â Â (make-fsÂ fsm-trafficÂ "green")) |'
  id: totrans-2770
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-fsÂ fsm-trafficÂ "green")) |'
- en: 'The examples say that when the current state combines the fsm-traffic machine
    and its "red" state, the result combines the same [FSM](#%28tech._fsm%29) with
    "green", regardless of whether the player hit "n" or "a" on the keyboard. Here
    is one more example:'
  id: totrans-2771
  prefs: []
  type: TYPE_NORMAL
  zh: åŸæ–‡ç¤ºä¾‹è¯´æ˜ï¼Œå½“å½“å‰çŠ¶æ€ç»“åˆfsm-trafficæœºå™¨åŠå…¶"red"çŠ¶æ€æ—¶ï¼Œç»“æœå°†ç»“åˆç›¸åŒçš„[FSM](#%28tech._fsm%29)å’Œ"green"çŠ¶æ€ï¼Œæ— è®ºç©å®¶åœ¨é”®ç›˜ä¸ŠæŒ‰ä¸‹çš„æ˜¯"n"è¿˜æ˜¯"a"ã€‚ä¸‹é¢æ˜¯å¦ä¸€ä¸ªç¤ºä¾‹ï¼š
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  id: totrans-2772
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
- en: '| Â Â (find-next-stateÂ (make-fsÂ fsm-trafficÂ "green")Â "q") |'
  id: totrans-2773
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (find-next-stateÂ (make-fsÂ fsm-trafficÂ "green")Â "q") |'
- en: '| Â Â (make-fsÂ fsm-trafficÂ "yellow")) |'
  id: totrans-2774
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-fsÂ fsm-trafficÂ "yellow")) |'
- en: 'Interpret the example before reading on. Can you think of another one?Since
    the function consumes a structure, we write down a template for structures processing:'
  id: totrans-2775
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œå…ˆç†è§£ä¸€ä¸‹å‰é¢çš„ç¤ºä¾‹ã€‚ä½ èƒ½æƒ³åˆ°å¦ä¸€ä¸ªç¤ºä¾‹å—ï¼Ÿç”±äºè¯¥å‡½æ•°æ¶ˆè€—ä¸€ä¸ªç»“æ„ï¼Œæˆ‘ä»¬ä¸ºç»“æ„å¤„ç†å†™ä¸‹äº†ä¸€ä¸ªæ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
  id: totrans-2776
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fs-fsmÂ an-fsm)Â [..](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._....%29%29)Â (fs-currentÂ an-fsm)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  id: totrans-2777
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fs-fsmÂ an-fsm)Â [..](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._....%29%29)Â (fs-currentÂ an-fsm)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
- en: 'Furthermore, because the desired result is a [SimulationState.v2](#%28tech._simulationstate..v2%29),
    we can refine the template with the addition of an appropriate constructor:'
  id: totrans-2778
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œå› ä¸ºæœŸæœ›çš„ç»“æœæ˜¯[SimulationState.v2](#%28tech._simulationstate..v2%29)ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ é€‚å½“çš„æ„é€ å‡½æ•°æ¥ç»†åŒ–æ¨¡æ¿ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
  id: totrans-2779
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
- en: '| Â Â (make-fs |'
  id: totrans-2780
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-fs |'
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fs-fsmÂ an-fsm)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fs-currentÂ an-fsm)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  id: totrans-2781
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| [...]([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fs-fsmÂ an-fsm)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fs-currentÂ an-fsm)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
- en: 'The examples suggest that the extracted [FSM](#%28tech._fsm%29) becomes the
    first component of the new [SimulationState.v2](#%28tech._simulationstate..v2%29)
    and that the function really just needs to compute the next state from the current
    one and the list of [Transition](#%28tech._transition%29)s that make up the given
    [FSM](#%28tech._fsm%29). Because the latter is arbitrarily long, we make up a
    wishâ€”<wbr>a find function that traverses the list to look for a [Transition](#%28tech._transition%29)
    whose current state is (fs-current  an-fsm)â€”<wbr>and finish the definition:'
  id: totrans-2782
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›ç¤ºä¾‹è¡¨æ˜ï¼Œæå–çš„[æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29)æˆä¸ºæ–°[SimulationState.v2](#%28tech._simulationstate..v2%29)çš„ç¬¬ä¸€ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”å‡½æ•°å®é™…ä¸Šåªéœ€è¦ä»å½“å‰çŠ¶æ€å’Œç»„æˆç»™å®š[æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29)çš„[è½¬æ¢](#%28tech._transition%29)åˆ—è¡¨ä¸­è®¡ç®—å‡ºä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚å› ä¸ºåè€…æ˜¯ä»»æ„é•¿çš„ï¼Œæˆ‘ä»¬æå‡ºä¸€ä¸ªæ„¿æœ›â€”â€”ä¸€ä¸ªæŸ¥æ‰¾å‡½æ•°ï¼Œéå†åˆ—è¡¨ä»¥æŸ¥æ‰¾å½“å‰çŠ¶æ€ä¸º(fs-current
    an-fsm)çš„[è½¬æ¢](#%28tech._transition%29)â€”â€”å¹¶å®Œæˆå®šä¹‰ï¼š
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
  id: totrans-2783
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
- en: '| Â Â (make-fs |'
  id: totrans-2784
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â (make-fs |'
- en: '| Â Â Â Â (fs-fsmÂ an-fsm) |'
  id: totrans-2785
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (fs-fsmÂ an-fsm) |'
- en: '| Â Â Â Â (findÂ (fs-fsmÂ an-fsm)Â (fs-currentÂ an-fsm)))) |'
  id: totrans-2786
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â (findÂ (fs-fsmÂ an-fsm)Â (fs-currentÂ an-fsm)))) |'
- en: 'Here is the formulation of the new wish:'
  id: totrans-2787
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™é‡Œæ˜¯æ–°æ„¿æœ›çš„è¡¨è¿°ï¼š
- en: '| ;Â [FSM](#%28tech._fsm%29)  [FSM-State](#%28tech._fsm._state%29) -> [FSM-State](#%28tech._fsm._state%29)
    |'
  id: totrans-2788
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â [FSM](#%28tech._fsm%29)  [FSM-State](#%28tech._fsm._state%29) -> [FSM-State](#%28tech._fsm._state%29)
    |'
- en: '| ;Â finds the state representing current in transitions |'
  id: totrans-2789
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â æŸ¥æ‰¾è¡¨ç¤ºå½“å‰çŠ¶æ€çš„è½¬æ¢ |'
- en: '| ;Â and retrieves the next field |'
  id: totrans-2790
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â å¹¶æ£€ç´¢ä¸‹ä¸€ä¸ªå­—æ®µ |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (findÂ fsm-trafficÂ "red")Â "green")
    |'
  id: totrans-2791
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (findÂ fsm-trafficÂ "red")Â "green")
    |'
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (findÂ fsm-trafficÂ "green")Â "yellow")
    |'
  id: totrans-2792
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (findÂ fsm-trafficÂ "green")Â "yellow")
    |'
- en: '| ([check-error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-error%29%29)Â (findÂ fsm-trafficÂ "black")
    |'
  id: totrans-2793
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([check-error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-error%29%29)Â (findÂ fsm-trafficÂ "black")
    |'
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â "not found: black") |'
  id: totrans-2794
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â Â Â Â Â Â Â Â Â Â Â Â "æœªæ‰¾åˆ°ï¼šé»‘è‰²") |'
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (findÂ transitionsÂ current)
    |'
  id: totrans-2795
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (findÂ transitionsÂ current)
    |'
- en: '| Â Â current) |'
  id: totrans-2796
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| Â Â current) |'
- en: The examples are derived from the examples for find-next-state.
  id: totrans-2797
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›ç¤ºä¾‹æ˜¯ä» find-next-state çš„ç¤ºä¾‹ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ã€‚
- en: Stop! Develop some additional examples, then tackle the exercises.
  id: totrans-2798
  prefs: []
  type: TYPE_NORMAL
  zh: åœæ­¢ï¼å…ˆå¼€å‘ä¸€äº›é¢å¤–çš„ç¤ºä¾‹ï¼Œç„¶åå†åšç»ƒä¹ ã€‚
- en: ExerciseÂ 228\. Complete the design of find.
  id: totrans-2799
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  228ã€‚å®Œæˆ find çš„è®¾è®¡ã€‚
- en: Once the auxiliary functions are tested, use simulate to play with fsm-traffic
    and the BW Machine from [exerciseÂ 227](#%28counter._%28exercise._ex~3afsm-design2%29%29).
  id: totrans-2800
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æµ‹è¯•äº†è¾…åŠ©å‡½æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨ simulate æ¥ç© fsm-traffic å’Œæ¥è‡ª[ç»ƒä¹  227](#%28counter._%28exercise._ex~3afsm-design2%29%29)çš„
    BW Machineã€‚
- en: Our simulation program is intentionally quite restrictive. In particular, you
    cannot use it to represent [FSM](#%28tech._fsm%29)s that transition from one state
    to another depending on which key a player presses. Given the systematic design,
    though, you can extend the program with such capabilities.
  id: totrans-2801
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„æ¨¡æ‹Ÿç¨‹åºæ•…æ„ç›¸å½“æœ‰é™ã€‚ç‰¹åˆ«æ˜¯ï¼Œä½ ä¸èƒ½ç”¨å®ƒæ¥è¡¨ç¤ºç©å®¶æŒ‰ä¸‹å“ªä¸ªé”®ä»ä¸€ç§çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ç§çŠ¶æ€çš„[æœ‰é™çŠ¶æ€æœº](#%28tech._fsm%29)ã€‚å°½ç®¡å¦‚æ­¤ï¼Œç”±äºç³»ç»Ÿæ€§çš„è®¾è®¡ï¼Œä½ å¯ä»¥æ‰©å±•ç¨‹åºä»¥å…·å¤‡è¿™äº›åŠŸèƒ½ã€‚
- en: 'ExerciseÂ 229\. Here is a revised data definition for [Transition](#%28tech._transition%29):'
  id: totrans-2802
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  229ã€‚è¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹[è½¬æ¢](#%28tech._transition%29)çš„ä¿®è®¢ç‰ˆæ•°æ®å®šä¹‰ï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â ktransitionÂ [currentÂ keyÂ next])
    |'
  id: totrans-2803
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â ktransitionÂ [currentÂ keyÂ next])
    |'
- en: '| ;Â A Transition.v2 is a structure: |'
  id: totrans-2804
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Transition.v2 is a structure: |'
- en: '| ;Â Â Â (make-ktransition  [FSM-State](#%28tech._fsm._state%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
  id: totrans-2805
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-ktransition  [FSM-State](#%28tech._fsm._state%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
- en: Represent the FSM from [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)
    using lists of [Transition.v2](#%28tech._transition..v2%29)s; ignore errors and
    final states.
  id: totrans-2806
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ [Transition.v2](#%28tech._transition..v2%29) çš„åˆ—è¡¨è¡¨ç¤º [ç»ƒä¹  109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)
    çš„ FSMï¼›å¿½ç•¥é”™è¯¯å’Œæœ€ç»ˆçŠ¶æ€ã€‚
- en: Modify the design of simulate so that it deals with keystrokes in the appropriate
    manner now. Follow the design recipe, starting with the adaptation of the data
    examples.
  id: totrans-2807
  prefs: []
  type: TYPE_NORMAL
  zh: ä¿®æ”¹ simulate çš„è®¾è®¡ï¼Œä½¿å…¶ç°åœ¨èƒ½å¤Ÿä»¥é€‚å½“çš„æ–¹å¼å¤„ç†æŒ‰é”®ã€‚æŒ‰ç…§è®¾è®¡é…æ–¹è¿›è¡Œï¼Œä»æ•°æ®ç¤ºä¾‹çš„æ”¹ç¼–å¼€å§‹ã€‚
- en: 'Use the revised program to simulate a run of the FSM from [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)
    on the following sequence of keystrokes: "a", "b", "b", "c", and "d".'
  id: totrans-2808
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ä¿®è®¢åçš„ç¨‹åºæ¨¡æ‹Ÿä»¥ä¸‹æŒ‰é”®åºåˆ— "a", "b", "b", "c", å’Œ "d" ä¸Š [ç»ƒä¹  109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)
    çš„ FSM è¿è¡Œã€‚
- en: Finite state machines do come with initial and final states. When a program
    that â€œrunsâ€ an [FSM](#%28tech._fsm%29) reaches a final state, it should stop.
    The final exercise revises the data representation of [FSM](#%28tech._fsm%29)s
    one more time to introduce these ideas.
  id: totrans-2809
  prefs: []
  type: TYPE_NORMAL
  zh: çŠ¶æ€æœºç¡®å®åŒ…å«åˆå§‹çŠ¶æ€å’Œæœ€ç»ˆçŠ¶æ€ã€‚å½“ä¸€ä¸ªâ€œè¿è¡Œâ€çŠ¶æ€æœºçš„ç¨‹åºè¾¾åˆ°æœ€ç»ˆçŠ¶æ€æ—¶ï¼Œå®ƒåº”è¯¥åœæ­¢ã€‚æœ€åçš„ç»ƒä¹ å†æ¬¡ä¿®æ”¹äº†çŠ¶æ€æœºçš„æ•°æ®è¡¨ç¤ºï¼Œä»¥å¼•å…¥è¿™äº›æ¦‚å¿µã€‚
- en: 'ExerciseÂ 230\. Consider the following data representation for FSMs:'
  id: totrans-2810
  prefs: []
  type: TYPE_NORMAL
  zh: ç»ƒä¹  230ã€‚è€ƒè™‘ä»¥ä¸‹çŠ¶æ€æœºçš„æ•°æ®è¡¨ç¤ºï¼š
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â fsmÂ [initialÂ transitionsÂ final])
    |'
  id: totrans-2811
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â fsmÂ [initialÂ transitionsÂ final])
    |'
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â transitionÂ [currentÂ keyÂ next])
    |'
  id: totrans-2812
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â transitionÂ [currentÂ keyÂ next])
    |'
- en: '| ;Â An FSM.v2 is a structure: |'
  id: totrans-2813
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â An FSM.v2 æ˜¯ä¸€ä¸ªç»“æ„ï¼š |'
- en: '| ;Â Â Â (make-fsm  [FSM-State](#%28tech._fsm._state%29)  [LOT](#%28tech._lot%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
  id: totrans-2814
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-fsm  [FSM-State](#%28tech._fsm._state%29)  [LOT](#%28tech._lot%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
- en: '| ;Â A LOT is one of: |'
  id: totrans-2815
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A LOT is one of: |'
- en: '| ;Â â€“  ''() |'
  id: totrans-2816
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ''() |'
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Transition.v3](#%28tech._transition..v3%29)  [LOT](#%28tech._lot%29))
    |'
  id: totrans-2817
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Transition.v3](#%28tech._transition..v3%29)  [LOT](#%28tech._lot%29))
    |'
- en: '| ;Â A Transition.v3 is a structure: |'
  id: totrans-2818
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â A Transition.v3 is a structure: |'
- en: '| ;Â Â Â (make-transition  [FSM-State](#%28tech._fsm._state%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
  id: totrans-2819
  prefs:
  - PREF_BQ
  type: TYPE_TB
  zh: '| ;Â Â Â (make-transition  [FSM-State](#%28tech._fsm._state%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
- en: Represent the FSM from [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)
    in this context.
  id: totrans-2820
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­è¡¨ç¤º [ç»ƒä¹  109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29) çš„ FSMã€‚
- en: Design the function fsm-simulate, which accepts an [FSM.v2](#%28tech._fsm..v2%29)
    and runs it on a playerâ€™s keystrokes. If the sequence of keystrokes forces the
    [FSM.v2](#%28tech._fsm..v2%29) to reach a final state, fsm-simulate stops. Hint
    The function uses the initial field of the given fsm structure to track the current
    state.
  id: totrans-2821
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªåä¸º fsm-simulate çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª [FSM.v2](#%28tech._fsm..v2%29) å¹¶åœ¨ç©å®¶çš„æŒ‰é”®æ“ä½œä¸Šè¿è¡Œå®ƒã€‚å¦‚æœæŒ‰é”®åºåˆ—è¿«ä½¿
    [FSM.v2](#%28tech._fsm..v2%29) è¾¾åˆ°æœ€ç»ˆçŠ¶æ€ï¼Œfsm-simulate å°†åœæ­¢ã€‚æç¤ºï¼šè¯¥å‡½æ•°ä½¿ç”¨ç»™å®š fsm ç»“æ„çš„åˆå§‹å­—æ®µæ¥è·Ÿè¸ªå½“å‰çŠ¶æ€ã€‚
- en: Note on Iterative Refinement These last two projects introduce the notion of
    â€œdesign by iterative refinement.â€ The basic idea is that the first program implements
    only a fraction of the desired behavior, the next one a bit more, and so on. Eventually
    you end up with a program that exhibits all of the desired behavior, or at least
    enough of it to satisfy a customer. For more details, see [Iterative Refinement](part_four.html#%28part._ch~3afiles%29).
    End
  id: totrans-2822
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºè¿­ä»£ç²¾ç‚¼çš„æ³¨æ„äº‹é¡¹ï¼šè¿™ä¸¤ä¸ªæœ€åçš„é¡¹ç›®å¼•å…¥äº†â€œé€šè¿‡è¿­ä»£ç²¾ç‚¼è®¾è®¡â€çš„æ¦‚å¿µã€‚åŸºæœ¬æ€æƒ³æ˜¯ç¬¬ä¸€ä¸ªç¨‹åºåªå®ç°äº†æ‰€éœ€è¡Œä¸ºçš„ä¸€éƒ¨åˆ†ï¼Œä¸‹ä¸€ä¸ªç¨‹åºå®ç°å¾—æ›´å¤šä¸€äº›ï¼Œä¾æ­¤ç±»æ¨ã€‚æœ€ç»ˆï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªå±•ç¤ºæ‰€æœ‰æ‰€éœ€è¡Œä¸ºçš„ç¨‹åºï¼Œæˆ–è€…è‡³å°‘è¶³å¤Ÿæ»¡è¶³å®¢æˆ·éœ€æ±‚çš„ç¨‹åº¦ã€‚æ›´å¤šç»†èŠ‚ï¼Œè¯·å‚é˜…[è¿­ä»£ç²¾ç‚¼](part_four.html#%28part._ch~3afiles%29)ã€‚ç»“æŸ
- en: 13Summary[ğŸ”—](#(part._ch~3asummary2) "Link to here")
  id: totrans-2823
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 13æ€»ç»“[ğŸ”—](#(part._ch~3asummary2) "é“¾æ¥åˆ°æ­¤å¤„")
- en: 'This second part of the book is about the design of programs that deal with
    arbitrarily large data. As you can easily imagine, software is particularly useful
    when it is used on information that comes without prespecified size limits, meaning
    â€œarbitrarily large dataâ€ is a critical step on your way to becoming a real programmer.
    In this spirit, we suggest that you take away three lessons:'
  id: totrans-2824
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ä¹¦ç¬¬äºŒéƒ¨åˆ†æ˜¯å…³äºè®¾è®¡å¤„ç†ä»»æ„å¤§é‡æ•°æ®çš„ç¨‹åºã€‚æ­£å¦‚ä½ å¾ˆå®¹æ˜“æƒ³è±¡çš„é‚£æ ·ï¼Œè½¯ä»¶åœ¨ç”¨äºæ²¡æœ‰é¢„å®šä¹‰å¤§å°é™åˆ¶çš„ä¿¡æ¯æ—¶å°¤å…¶æœ‰ç”¨ï¼Œè¿™æ„å‘³ç€â€œä»»æ„å¤§é‡æ•°æ®â€æ˜¯æˆä¸ºçœŸæ­£çš„ç¨‹åºå‘˜é“è·¯ä¸Šçš„å…³é”®ä¸€æ­¥ã€‚æœ¬ç€è¿™ä¸ªç²¾ç¥ï¼Œæˆ‘ä»¬å»ºè®®ä½ è®°ä½ä»¥ä¸‹ä¸‰ä¸ªæ•™è®­ï¼š
- en: This part refines the design recipe to deal with self-references and cross-references
    in data definitions. The occurrence of the former calls for the design of recursive
    functions, and the occurrence of the latter calls for auxiliary functions.
  id: totrans-2825
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æœ¬éƒ¨åˆ†å°†è®¾è®¡é…æ–¹ç²¾ç‚¼ä»¥å¤„ç†æ•°æ®å®šä¹‰ä¸­çš„è‡ªå¼•ç”¨å’Œäº¤å‰å¼•ç”¨ã€‚å‰è€…çš„å‡ºç°éœ€è¦è®¾è®¡é€’å½’å‡½æ•°ï¼Œè€Œåè€…çš„å‡ºç°éœ€è¦è¾…åŠ©å‡½æ•°ã€‚
- en: 'Complex problems call for a decomposition into separate problems. When you
    decompose a problem, you need two pieces: functions that solve the separate problems
    and data definitions that compose these separate solutions into a single one.
    To ensure that the composition works after you have spent time on the separate
    programs, you need to formulate your â€œwishesâ€ together with the required data
    definitions.'
  id: totrans-2826
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¤æ‚é—®é¢˜éœ€è¦åˆ†è§£æˆå•ç‹¬çš„é—®é¢˜ã€‚å½“ä½ åˆ†è§£ä¸€ä¸ªé—®é¢˜ï¼Œä½ éœ€è¦ä¸¤ä¸ªéƒ¨åˆ†ï¼šè§£å†³å•ç‹¬é—®é¢˜çš„å‡½æ•°å’Œæ•°æ®å®šä¹‰ï¼Œè¿™äº›æ•°æ®å®šä¹‰å°†è¿™äº›å•ç‹¬çš„è§£å†³æ–¹æ¡ˆç»„åˆæˆä¸€ä¸ªæ•´ä½“ã€‚ä¸ºäº†ç¡®ä¿åœ¨èŠ±è´¹æ—¶é—´åœ¨å•ç‹¬çš„ç¨‹åºåï¼Œç»„åˆä»ç„¶æœ‰æ•ˆï¼Œä½ éœ€è¦å°†ä½ çš„â€œæ„¿æœ›â€ä¸æ‰€éœ€çš„æ•°æ®å®šä¹‰ä¸€èµ·åˆ¶å®šã€‚
- en: A decomposition-composition design is especially useful when the problem statement
    implicitly or explicitly mentions auxiliary tasks, when the coding step for a
    function calls for a traversal of an(other) arbitrarily large piece of data, andâ€”<wbr>perhaps
    surprisinglyâ€”<wbr>when a general problem is somewhat easier to solve than the
    specific one described in the problem statement.
  id: totrans-2827
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: åˆ†è§£-ç»„åˆè®¾è®¡åœ¨é—®é¢˜é™ˆè¿°éšå¼æˆ–æ˜¾å¼æåˆ°è¾…åŠ©ä»»åŠ¡ã€å‡½æ•°çš„ç¼–ç æ­¥éª¤éœ€è¦éå†ä»»æ„å¤§é‡æ•°æ®æ—¶ç‰¹åˆ«æœ‰ç”¨â€”â€”ä¹Ÿè®¸ä»¤äººæƒŠè®¶çš„æ˜¯â€”â€”å½“ä¸€èˆ¬é—®é¢˜æ¯”é—®é¢˜é™ˆè¿°ä¸­æè¿°çš„å…·ä½“é—®é¢˜æ›´å®¹æ˜“è§£å†³æ—¶ã€‚
- en: Pragmatics matter. If you wish to design [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    programs, you need to understand its various clauses and what they accomplish.
    Or, if your task is to design programs that solve mathematical problems, you had
    better make sure you know which mathematical operations the chosen language and
    its libraries offer.
  id: totrans-2828
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å®ç”¨ä¸»ä¹‰å¾ˆé‡è¦ã€‚å¦‚æœä½ å¸Œæœ›è®¾è®¡[å¤§çˆ†ç‚¸](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)ç¨‹åºï¼Œä½ éœ€è¦ç†è§£å…¶å„ç§å­å¥ä»¥åŠå®ƒä»¬èƒ½å®Œæˆä»€ä¹ˆã€‚æˆ–è€…ï¼Œå¦‚æœä½ çš„ä»»åŠ¡æ˜¯è®¾è®¡è§£å†³æ•°å­¦é—®é¢˜çš„ç¨‹åºï¼Œä½ æœ€å¥½ç¡®ä¿ä½ çŸ¥é“æ‰€é€‰è¯­è¨€åŠå…¶åº“æä¾›çš„æ•°å­¦è¿ç®—ã€‚
- en: 'While this part mostly focuses on lists as a good example of arbitrarily large
    dataâ€”<wbr>because they are practically useful in languages such as Haskell, Lisp,
    ML, Racket, and Schemeâ€”<wbr>the ideas apply to all kinds of such data: files,
    file folders, databases, and the like.'
  id: totrans-2829
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶æœ¬éƒ¨åˆ†ä¸»è¦å…³æ³¨åˆ—è¡¨ä½œä¸ºä»»æ„å¤§é‡æ•°æ®çš„å¥½ä¾‹å­â€”â€”å› ä¸ºå®ƒä»¬åœ¨Haskellã€Lispã€MLã€Racketå’ŒSchemeç­‰è¯­è¨€ä¸­å®é™…ä¸Šå¾ˆæœ‰ç”¨â€”â€”ä½†è¿™äº›æƒ³æ³•é€‚ç”¨äºæ‰€æœ‰è¿™ç±»æ•°æ®ï¼šæ–‡ä»¶ã€æ–‡ä»¶å¤¹ã€æ•°æ®åº“ç­‰ç­‰ã€‚
- en: '[Intertwined Data](part_four.html) continues the exploration of â€œlargeâ€ structured
    data and demonstrates how the design recipe scales to the most complex kind of
    data. In the meantime, the next part takes care of an important worry you should
    have at this point, namely, that a programmerâ€™s work is all about creating the
    same kind of programs over and over and over again.'
  id: totrans-2830
  prefs: []
  type: TYPE_NORMAL
  zh: '[äº¤ç»‡æ•°æ®](part_four.html) ç»§ç»­æ¢ç´¢â€œå¤§å‹â€ç»“æ„åŒ–æ•°æ®ï¼Œå¹¶å±•ç¤ºäº†è®¾è®¡é…æ–¹å¦‚ä½•æ‰©å±•åˆ°æœ€å¤æ‚ç±»å‹çš„æ•°æ®ã€‚ä¸æ­¤åŒæ—¶ï¼Œä¸‹ä¸€éƒ¨åˆ†å°†å…³æ³¨ä½ æ­¤åˆ»åº”è¯¥æœ‰çš„ä¸€ä¸ªé‡è¦æ‹…å¿§ï¼Œå³ç¨‹åºå‘˜çš„æ—¥å¸¸å·¥ä½œå°±æ˜¯ä¸€éåˆä¸€éåœ°åˆ›å»ºåŒä¸€ç§ç±»çš„ç¨‹åºã€‚'
