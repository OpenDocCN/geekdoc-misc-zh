- en: IIÂ Arbitrarily Large DatağŸ”—
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/part_two.html](https://htdp.org/2024-11-6/Book/part_two.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| Â Â Â Â [8Â Lists](#%28part._ch~3alists1%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [8.1Â Creating Lists](#%28part._sec~3alists-records%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [8.2Â What Is ''(), What Is cons](#%28part._sec~3alists-cons%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [8.3Â Programming with Lists](#%28part._sec~3alists-programming%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [8.4Â Computing with Lists](#%28part._sec~3aeval-list%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [9Â Designing with Self-Referential Data Definitions](#%28part._ch~3adesign-lists%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [9.1Â Finger Exercises: Lists](#%28part._sec~3afinger-lists%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [9.2Â Non-empty Lists](#%28part._sec~3alists~3ane%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [9.3Â Natural Numbers](#%28part._sec~3anats%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [9.4Â Russian Dolls](#%28part._rd._sec~3ard%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [9.5Â Lists and World](#%28part._sec~3alist-world%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [9.6Â A Note on Lists and Sets](#%28part._sec~3alist-set%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [10Â More on Lists](#%28part._ch~3alists2%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [10.1Â Functions that Produce Lists](#%28part._sec~3alist-produce%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [10.2Â Structures in Lists](#%28part._sec~3asil%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [10.3Â Lists in Lists, Files](#%28part._sec~3alis-lis%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [10.4Â A Graphical Editor, Revisited](#%28part._list-edit2._sec~3aedit2%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [11Â Design by Composition](#%28part._ch~3alist-sort%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [11.1Â The list Function](#%28part._sec~3aabbrev%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [11.2Â Composing Functions](#%28part._sec~3acompounding2%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [11.3Â Auxiliary Functions that Recur](#%28part._sec~3asort.I%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [11.4Â Auxiliary Functions that Generalize](#%28part._sec~3agen-funcs%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [12Â Projects: Lists](#%28part._ch~3aproj-lists%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [12.1Â Real-World Data: Dictionaries](#%28part._sec~3adict%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [12.2Â Real-World Data: iTunes](#%28part._itunes-data._sec~3aitunes%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [12.3Â Word Games, Composition Illustrated](#%28part._sec~3apermute-composition%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [12.4Â Word Games, the Heart of the Problem](#%28part._sec~3apermute%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [12.5Â Feeding Worms](#%28part._sec~3aworms%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [12.6Â Simple Tetris](#%28part._sec~3atetris%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [12.7Â Full Space War](#%28part._sec~3aspace-war%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [12.8Â Finite State Machines](#%28part._sec~3asec-fsm-list%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [13Â Summary](#%28part._ch~3asummary2%29) |'
  prefs: []
  type: TYPE_TB
- en: Every data definition in [Fixed-Size Data](part_one.html) describes data of
    a fixed size. To us, Boolean values, numbers, strings, and images are atomic;
    computer scientists say they have a size of one unit. With a structure, you compose
    a fixed number of pieces of data. Even if you use the language of data definitions
    to create deeply nested structures, you always know the exact number of atomic
    pieces of data in any specific instance. Many programming problems, however, deal
    with an undetermined number of pieces of information that must be processed as
    one piece of data. For example, one program may have to compute the average of
    a bunch of numbers and another may have to keep track of an arbitrary number of
    objects in an interactive game. Regardless, it is impossible with your knowledge
    to formulate a data definition that can represent this kind of information as
    data.
  prefs: []
  type: TYPE_NORMAL
- en: This part revises the language of data definitions so that it becomes possible
    to describe data of (finite but) arbitrary size. For a concrete illustration,
    the first half of this part deals with lists, a form of data that appears in most
    modern programming languages. In parallel with the extended language of data definitions,
    this part also revises the design recipe to cope with such data definitions. The
    latter chapters demonstrate how these data definitions and the revised design
    recipe work in a variety of contexts.
  prefs: []
  type: TYPE_NORMAL
- en: 8Lists[ğŸ”—](#(part._ch~3alists1) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: You have probably not encountered self-referential definitions before. Your
    English teachers certainly stay away from these, and many mathematics courses
    are vague when it comes to such definitions. Programmers cannot afford to be vague.
    Their work requires precision. While a definition may in general contain several
    references to itself, this chapter presents useful examples that need just one,
    starting with the one for lists.
  prefs: []
  type: TYPE_NORMAL
- en: The introduction of lists also spices up the kind of applications we can study.
    While this chapter carefully builds up your intuition with examples, it also motivates
    the revision of the design recipe in the next chapter, which explains how to systematically
    create functions that deal with self-referential data definitions.
  prefs: []
  type: TYPE_NORMAL
- en: 8.1Creating Lists[ğŸ”—](#(part._sec~3alists-records) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: All of us make lists all the time. Before we go grocery shopping, we write down
    a list of items we wish to purchase. Some people write down a to-do list every
    morning. During December, many children prepare Christmas wish lists. To plan
    a party, we make a list of invitees. Arranging information in the form of lists
    is an ubiquitous part of our life.
  prefs: []
  type: TYPE_NORMAL
- en: Given that information comes in the shape of lists, we must clearly learn how
    to represent such lists as BSL data. Indeed, because lists are so important, BSL
    comes with built-in support for creating and manipulating lists, similar to the
    support for Cartesian points (posn). In contrast to points, the data definition
    for lists is always left to you. But first things first. We start with the creation
    of lists.
  prefs: []
  type: TYPE_NORMAL
- en: When we form a list, we always start out with the empty list. In BSL, we represent
    the empty list with
  prefs: []
  type: TYPE_NORMAL
- en: '''()'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'which is pronounced â€œempty,â€ short for â€œempty list.â€ Like #true or 5, ''()
    is just a constant. When we add something to a list, we construct another list;
    in BSL, the [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    operation serves this purpose. For example,'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"Â '())
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'constructs a list from the ''() list and the string "Mercury". [FigureÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29)
    presents this list in the same pictorial manner we used for structures. The box
    for [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    has two fields: [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    and [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29).
    In this specific example the [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    field contains "Mercury" and the [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field contains ''().'
  prefs: []
  type: TYPE_NORMAL
- en: '| list |  | diagram |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ''()) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![image](../Images/311cded75d1c569c7480d0feadaf6f69.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ''())) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![image](../Images/ed10f73b490a83365e1da5a718fc09dd.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Earth"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![image](../Images/09f01afd930b1f49077e603170472689.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 44: Building a list'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Once we have a list with one item in it, we can construct lists with two items
    by using [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    again. Here is one:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"Â '()))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'And here is another:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Earth"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"Â '()))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The middle row of [figureÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29)
    shows how you can imagine lists that contain two items. It is also a box of two
    fields, but this time the [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field contains a box. Indeed, it contains the box from the top row of the same
    figure.Finally, we construct a list with three items:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Earth"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"Â '())))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The last row of [figureÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29)
    illustrates the list with three items. Its [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field contains a box that contains a box again. So, as we create lists we put
    boxes into boxes into boxes, and so on. While this may appear strange at first
    glance, it is just like a set of Chinese gift boxes or a set of nested drinking
    cups, which we sometimes get for birthdays. The only difference is that BSL programs
    can nest lists much deeper than any artist could nest physical boxes.
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Earth"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Venus"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Mercury"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ![image](../Images/cce69ee0beca715458478575c40e07c9.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|  | ![image](../Images/f398e0609a1146725f847d1efbb1d5ad.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 45: Drawing a list'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Because even good artists would have problems with drawing deeply nested structures,
    computer scientists resort to box-and-arrow diagrams instead. [FigureÂ 45](#%28counter._%28figure._fig~3alist-box%29%29)
    illustrates how to rearrange the last row of [figureÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29).
    Each [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    structure becomes a separate box. If the rest field is too complex to be drawn
    inside of the box, we draw a bullet instead and a line with an arrow to the box
    that it contains. Depending on how the boxes are arranged, you get two kinds of
    diagrams. The first, displayed in the top row of [figureÂ 45](#%28counter._%28figure._fig~3alist-box%29%29),
    lists the boxes in the order in which they are created. The second, displayed
    in the bottom row, lists the boxes in the order in which they are [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    together. Hence the second diagram immediately tells you what [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    would have produced when applied to the list, no matter how long the list is.
    For this reason, programmers prefer the second arrangement.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 129\. Create BSL lists that represent
  prefs: []
  type: TYPE_NORMAL
- en: a list of celestial bodies, say, at least all the planets in our solar system;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: a list of items for a meal, for example, steak, french fries, beans, bread,
    water, Brie cheese, and ice cream; and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: a list of colors.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Sketch some box representations of these lists, similar to those in [figuresÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29)
    and [45](#%28counter._%28figure._fig~3alist-box%29%29). Which of the sketches
    do you like better?You can also make lists of numbers. Here is a list with the
    10 digits:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 4
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 5
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 6
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 7
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 8
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 9Â ''()))))))))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: To build this list requires 10 list constructions and one '(). For a list of
    three arbitrary numbers, for example,
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â e
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â -22.3Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'we need three [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)es.In
    general a list does not have to contain values of one kind, but may contain arbitrary
    values:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Robbie
    Round" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â #true
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ''()))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The firstThen again, if this list is supposed to represent a record with a
    fixed number of pieces, use a structure type instead. item of this list is a string,
    the second one is a number, and the last one a Boolean. You may consider this
    list as the representation of a personnel record with three pieces of data: the
    name of the employee, the number of years spent at the company, and whether the
    employee has health insurance through the company. Or, you could think of it as
    representing a virtual player in some game. Without a data definition, you just
    canâ€™t know what data is all about.Here is a first data definition that involves
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A 3LON is a list of three numbers: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation a point in 3-dimensional space |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Of course, this data definition uses [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    like others use constructors for structure instances, and in a sense, [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    is just a special constructor. What this data definition fails to demonstrate
    is how to form lists of arbitrary length: lists that contain nothing, one item,
    two items, ten items, or perhaps 1,438,901 items.So letâ€™s try again:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A List-of-names is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [String](part_one.html#%28tech._string%29)  [List-of-names](#%28tech._list._of._name%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation a list of invitees, by last name |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Take a deep breath, read it again. This data definition is one of the most
    unusual definitions you have ever encounteredâ€”<wbr>you have never before seen
    a definition that refers to itself. It isnâ€™t even clear whether it makes sense.
    After all, if you had told your English teacher that â€œa table is a tableâ€ defines
    the word â€œtable,â€ the most likely response would have been â€œNonsense!â€ because
    a self-referential definition doesnâ€™t explain what a word means.In computer science
    and in programming, though, self-referential definitions play a central role,
    and with some care, such definitions actually do make sense. Here â€œmaking senseâ€
    means that we can use the data definition for what it is intended for, namely,
    to generate examples of data that belong to the class that is being defined or
    to check whether some given piece of data belongs to the defined class of data.
    From this perspective, the definition of [List-of-names](#%28tech._list._of._name%29)
    makes complete sense. At a minimum, we can generate ''() as one example, using
    the first clause in the itemization. Given ''() as an element of [List-of-names](#%28tech._list._of._name%29),
    it is easy to make a second one:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Findler"Â '())
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Here we are using a [String](part_one.html#%28tech._string%29) and the only
    list from [List-of-names](#%28tech._list._of._name%29) to generate a piece of
    data according to the second clause in the itemization. With the same rule, we
    can generate many more lists of this kind:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Felleisen"Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Krishnamurthi"Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'And while these lists all contain one name (represented as a [String](part_one.html#%28tech._string%29)),
    it is actually possible to use the second line of the data definition to create
    lists with more names in them:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Felleisen"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Findler"Â '()))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This piece of data belongs to [List-of-names](#%28tech._list._of._name%29) because
    "Felleisen" is a [String](part_one.html#%28tech._string%29) and ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Findler"  '())
    is a confirmed [List-of-names](#%28tech._list._of._name%29).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 130\. Create an element of [List-of-names](#%28tech._list._of._name%29)
    that contains five [String](part_one.html#%28tech._string%29)s. Sketch a box representation
    of the list similar to those found in [figureÂ 44](#%28counter._%28figure._fig~3abuild-a-list%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: Explain why
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "1"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "2"Â '()))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: is an element of [List-of-names](#%28tech._list._of._name%29) and why ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  '())
    isnâ€™t.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 131\. Provide a data definition for representing lists of [Boolean](part_one.html#%28tech._boolean%29)
    values. The class contains all arbitrarily long lists of [Boolean](part_one.html#%28tech._boolean%29)s.
  prefs: []
  type: TYPE_NORMAL
- en: 8.2What Is '(), What Is [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)[ğŸ”—](#(part._sec~3alists-cons)
    "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Letâ€™s step back for a moment and take a close look at ''() and [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29).
    As mentioned, ''() is just a constant. When compared to constants such as 5 or
    "this is a string", it looks more like a function name or a variable; but when
    compared with #true and #false, it should be easy to see that it really is just
    BSLâ€™s representation for empty lists.'
  prefs: []
  type: TYPE_NORMAL
- en: 'As for our evaluation rules, ''() is a new kind of atomic value, distinct from
    any other kind: numbers, Booleans, strings, and so on. It also isnâ€™t a compound
    value, like [Posn](part_one.html#%28tech._posn%29)s. Indeed, ''() is so unique
    it belongs in a class of values all by itself. As such, this class of values comes
    with a predicate that recognizes only ''() and nothing else:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Any](part_one.html#%28tech._any%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â is the given value ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â x)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Like all predicates, [empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    can be applied to any value from the universe of BSL values. It produces #true
    precisely when it is applied to ''():'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â 5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â "hello
    world") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 0Â 0))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Next we turn to [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29).
    Everything we have seen so far suggests that [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    is a constructor just like those introduced by structure type definitions. More
    precisely, [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    appears to be the constructor for a two-field structure: the first one for any
    kind of value and the second one for any list-like value. The following definitions
    translate this idea into BSL:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â pairÂ [[left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)Â [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A ConsPair is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-pair  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)).
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [ConsPair](#%28tech._conspair%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (our-consÂ a-valueÂ a-list)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-pairÂ a-valueÂ a-list)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The only catch is that our-cons accepts all possible BSL values for its second
    argument and [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    doesnâ€™t, as the following experiment validates:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| cons:second argument must be a list, but received 1 and 2 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Put differently, [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    is really a checked function, the kind discussed in [Itemizations and Structures](part_one.html#%28part._ch~3amix%29),
    which suggests the following refinement:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A ConsOrEmpty is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  (make-pair  [Any](part_one.html#%28tech._any%29)  [ConsOrEmpty](#%28tech._consorempty%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  [ConsOrEmpty](#%28tech._consorempty%29) is the class of
    all lists |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [ConsOrEmpty](#%28tech._consorempty%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (our-consÂ a-valueÂ a-list)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â a-list)Â (make-pairÂ a-valueÂ a-list)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(pair?Â a-list)Â (make-pairÂ a-valueÂ a-list)] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â "cons:
    second argument ...")])) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'If [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    is a checked constructor function, you may be wondering how to extract the pieces
    from the resulting structure. After all, [Adding Structure](part_one.html#%28part._ch~3astructure%29)
    says that programming with structures requires selectors. Since a [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    structure has two fields, there are two selectors: [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    and [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29).
    They are also easily defined in terms of our pair structure:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [ConsOrEmpty](#%28tech._consorempty%29) -> [Any](part_one.html#%28tech._any%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â extracts the [left](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._left%29%29)
    part of the given pair |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (our-firstÂ a-list)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â a-list)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â ''our-firstÂ "...")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â (pair-leftÂ a-list))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Stop! Define our-rest.
  prefs: []
  type: TYPE_NORMAL
- en: If your program can access the structure type definition for pair, it is easy
    to create pairs that donâ€™t contain '() or another pair in the [right](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._right%29%29)
    field. Whether such bad instances are created intentionally or accidentally, they
    tend to break functions and programs in strange ways. BSL therefore hides the
    actual structure type definition for [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    to avoid these problems. [Local Definitions](part_three.html#%28part._sec~3alocal-definitions%29)
    demonstrates one way that your programs can hide such definitions, too, but for
    now, you donâ€™t need this power.
  prefs: []
  type: TYPE_NORMAL
- en: '| ''() |  | a special value, mostly to represent the empty list |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| [empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)
    |  | a predicate to recognize ''() and nothing else |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    |  | a checked constructor to create two-field instances |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    |  | the selector to extract the last item added |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    |  | the selector to extract the extended list |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| [cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    |  | a predicate to recognize instances of [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 46: List primitives'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 46](#%28counter._%28figure._fig~3acons%29%29) summarizes this section.
    The key insight is that ''() is a unique value and that [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    is a checked constructor that produces list values. Furthermore, [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29),
    [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29),
    and [cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    are merely distinct names for the usual predicate and selectors. What this chapter
    teaches, then, is not a new way of creating data but a new way of formulating
    data definitions.'
  prefs: []
  type: TYPE_NORMAL
- en: 8.3Programming with Lists[ğŸ”—](#(part._sec~3alists-programming) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Say youâ€™re keeping track of your friends with some list, and say the list has
    grown so large that you need a program to determine whether someHere we use the
    word â€œfriendâ€ in the sense of social networks, not the real world. name is on
    the list. To make this idea concrete, letâ€™s state it as an exercise:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem You are working on the contact list for some new cell phone.
    The phoneâ€™s owner updates and consults this list on various occasions. For now,
    you are assigned the task of designing a function that consumes this list of contacts
    and determines whether it contains the name â€œFlatt.â€
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Once we have a solution to this sample problem, we will generalize it to a
    function that finds any name on a list.The data definition for [List-of-names](#%28tech._list._of._name%29)
    from the preceding is appropriate for representing the list of names that the
    function is to search. Next we turn to the header material:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-names](#%28tech._list._of._name%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â determines whether "Flatt" is on a-list-of-names |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â a-list-of-names)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â #false) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'While a-list-of-names is a good name for the list of names that the function
    consumes, it is a mouthful and we therefore shorten it to alon.Following the general
    design recipe, we next make up some examples that illustrate the purpose of the
    function. First, we determine the output for the simplest input: ''(). Since this
    list does not contain any strings, it certainly does not contain "Flatt":'
  prefs: []
  type: TYPE_NORMAL
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (contains-flatt?Â '())Â #false)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Then we consider lists with a single item. Here are two examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Find"Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â #false) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â #true) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In the first case, the answer is #false because the single item on the list
    is not "Flatt"; in the second case, the single item is "Flatt", so the answer
    is #true. Finally, here is a more general example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (contains-flatt? |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â #true) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Again, the answer case must be #true because the list contains "Flatt". Stop!
    Make a general example for which the answer must be #false.'
  prefs: []
  type: TYPE_NORMAL
- en: Take a breath. Run the program. The header is a â€œdummyâ€ definition for the function;
    you have some examples; they have been turned into tests; and best of all, some
    of them actually succeed. They succeed for the wrong reason but succeed they do.
    If things make sense now, read on.
  prefs: []
  type: TYPE_NORMAL
- en: 'The fourth step is to design a function template that matches the data definition.
    Since the data definition for lists of strings has two clauses, the functionâ€™s
    body must be a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with two clauses. The two conditions determine which of the two kinds
    of lists the function received:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Instead of ([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  alon),
    we could use [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    in the second clause.We can add one more hint to the template by studying each
    clause of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression in turn. Specifically, recall that the design recipe suggests annotating
    each clause with selector expressions if the corresponding class of inputs consists
    of compounds. In our case, we know that ''() does not have compounds, so there
    are no components. Otherwise the list is constructed from a string and another
    list of strings, and we remind ourselves of this fact by adding ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    and ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    to the template:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Now it is time to switch to the programming task proper, the fifth step of
    our design recipe. It starts from a template and deals with each [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause separately. If ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  alon)
    is true, the input is the empty list, in which case the function must produce
    the result #false. In the second case, ([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  alon)
    is true. The annotations in the template remind us that there is a first string
    and then the rest of the list. So letâ€™s consider an example that falls into this
    category:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The function, like a person, must compare the first item with "Flatt". In this
    example, the first one is "A" and not "Flatt", so the comparison yields #false.
    If we had considered some other example instead, say,'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'the function would determine that the first item on the input is "Flatt", and
    would therefore respond with #true. This implies that the second line in the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression should contain an expression that compares the first name on the list
    with "Flatt":'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Furthermore, if the comparison yields #true, the function must produce #true.
    If the comparison yields #false, we are left with another list of strings: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon).
    Clearly, the function canâ€™t know the final answer in this case, because the answer
    depends on what â€œ...â€ represents. Put differently, if the first item is not "Flatt",
    we need some way to check whether the rest of the list contains "Flatt".'
  prefs: []
  type: TYPE_NORMAL
- en: Fortunately, we have contains-flatt? and it fits the bill. According to its
    purpose statement, it determines whether a list contains "Flatt". The statement
    implies that (contains-flatt?  l) tells us whether the list of strings l contains
    "Flatt". And, in the same vein, (contains-flatt?  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    determines whether "Flatt" is a member of ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon),
    which is precisely what we need to know.
  prefs: []
  type: TYPE_NORMAL
- en: 'In short, the last line should be (contains-flatt?  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-names](#%28tech._list._of._name%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The trick is now to combine the values of the two expressions in the appropriate
    manner. As mentioned, if the first expression yields #true, there is no need to
    search the rest of the list; if it is #false, though, the second expression may
    still yield #true, meaning the name "Flatt" is on the rest of the list. All of
    this suggests that the result of (contains-flatt?  alon) is #true if either the
    first expression in the last line or the second expression yields #true.'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-names](#%28tech._list._of._name%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â determines whether "Flatt" occurs on alon |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "X"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Y"Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Z"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â #false) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â #true) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (contains-flatt?Â alon)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alon)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 47: Searching a list'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 47](#%28counter._%28figure._fig~3acontains-flatt~3f%29%29) then shows
    the complete definition. Overall it doesnâ€™t look too different from the definitions
    in the first chapter of the book. It consists of a signature, a purpose statement,
    two examples, and a definition. The only way in which this function definition
    differs from anything you have seen before is the self-reference, that is, the
    reference to contains-flatt? in the body of the [define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29).
    Then again, the data definition is self-referential, too, so in some sense the
    self-reference in the function shouldnâ€™t be too surprising.'
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 132\. Use DrRacket to run contains-flatt? in this example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Fagan"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Findler"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Fisler"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flanagan"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Felleisen"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Friedman"Â ''())))))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'What answer do you expect?ExerciseÂ 133\. Here is another way of formulating
    the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause in contains-flatt?:'
  prefs: []
  type: TYPE_NORMAL
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â "Flatt")Â #true]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))])Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Explain why this expression produces the same answers as the [or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    expression in the version of [figureÂ 47](#%28counter._%28figure._fig~3acontains-flatt~3f%29%29).
    Which version is clearer to you? Explain.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 134\. Develop the contains? function, which determines whether some
    given string occurs on a given list of strings.
  prefs: []
  type: TYPE_NORMAL
- en: 'Note BSL actually comes with [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29),
    a function that consumes two values and checks whether the first occurs in the
    second, a list:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Donâ€™t use [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    to define the contains? function.
  prefs: []
  type: TYPE_NORMAL
- en: '| (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Flatt"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "C"  ''())))Â #false]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))Â "Flatt")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))])
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 48: Computing with lists, step 1'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 8.4Computing with Lists[ğŸ”—](#(part._sec~3aeval-list) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Since we are still using BSL, the rules of algebraâ€”<wbr>see intermezzo 1â€”<wbr>tell
    us how to determine the value of expressions such as
  prefs: []
  type: TYPE_NORMAL
- en: (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â '())))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: without DrRacket. Programmers must have an intuitive understanding of how this
    kind of calculation works, so we step through the one for this simple example.
  prefs: []
  type: TYPE_NORMAL
- en: '[FigureÂ 48](#%28counter._%28figure._fig~3acomp-cons1%29%29) displays the first
    step, which uses the usual substitution rule to determine the value of an application.
    The result is a conditional expression because, as an algebra teacher would say,
    the function is defined in a step-wise fashion.'
  prefs: []
  type: TYPE_NORMAL
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â [#falseÂ #false] |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))Â "Flatt")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))])
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Flatt"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "C"  ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))Â "Flatt")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))])
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â [#true |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))Â "Flatt")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))])
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Flatt"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "C"  ''())))Â "Flatt")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 49: Computing with lists, step 2'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The calculation is continued in [figureÂ 49](#%28counter._%28figure._fig~3acomp-cons2%29%29).
    To find the correct clause of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression, we must determine the value of the conditions, one by one. Since a
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    list isnâ€™t empty, the first conditionâ€™s result is #false, and we therefore eliminate
    the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause. Finally the condition in the second clause evaluates to #true because
    [cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)
    of a [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    list holds.'
  prefs: []
  type: TYPE_NORMAL
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)  "Flatt"  "Flatt")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (contains-flatt?Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''())))))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)  #true  (contains-flatt?  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â #true |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 50: Computing with lists, step 3'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'From here, it is just three more steps of arithmetic to get the final result.
    [FigureÂ 50](#%28counter._%28figure._fig~3acomp-cons3%29%29) displays the three
    steps. The first evaluates ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "Flatt"  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    to "Flatt" due to the laws for [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29).
    The second discovers that "Flatt" is a string and equal to "Flatt". The third
    says ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)  #true  X)
    is #true regardless of what X is.'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 135\. Use DrRacketâ€™s stepper to check the calculation for
  prefs: []
  type: TYPE_NORMAL
- en: (contains-flatt?Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â '())))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Also use the stepper to determine the value of
  prefs: []
  type: TYPE_NORMAL
- en: '| (contains-flatt? |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "A"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Flatt"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "C"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: What happens when "Flatt" is replaced with "B"?ExerciseÂ 136\. Validate with
    DrRacketâ€™s stepper
  prefs: []
  type: TYPE_NORMAL
- en: '| (our-firstÂ (our-consÂ "a"Â ''()))Â ==Â "a" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (our-restÂ (our-consÂ "a"Â ''()))Â ==Â ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: See [What Is '(), What Is cons](#%28part._sec~3alists-cons%29) for the definitions
    of these functions.
  prefs: []
  type: TYPE_NORMAL
- en: '| ![image](../Images/21fc4536ef697bc86d2ec0299ded590f.png) |  | ![image](../Images/244e82bccaa4b3a16cf5fd0c1882bdfe.png)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 51: Arrows for self-references in data definitions and templates'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 9Designing with Self-Referential Data Definitions[ğŸ”—](#(part._ch~3adesign-lists)
    "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'At first glance, self-referential data definitions seem to be far more complex
    than those for mixed data. But, as the example of contains-flatt? shows, the six
    steps of the design recipe still work. Nevertheless, in this section we generalize
    the design recipe so that it works even better for self-referential data definitions.
    The new parts concern the process of discovering when a self-referential data
    definition is needed, deriving a template, and defining the function body:'
  prefs: []
  type: TYPE_NORMAL
- en: If a problem statement is about information of arbitrary size, you need a self-referential
    data definition to represent it. At this point, you have seen only one such class,
    [List-of-names](#%28tech._list._of._name%29). The left side of [figureÂ 51](#%28counter._%28figure._fig~3adata-def-arrows%29%29)
    shows how to define List-of-strings in the same way. Other lists of atomic data
    work the same way.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Numbers also seem to be arbitrarily large. For inexact numbers, this is an illusion.
    For precise integers, this is indeed the case. Dealing with integers is therefore
    a part of this chapter.
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: For a self-referential data definition to be valid, it must satisfy two conditions.
    First, it must contain at least two clauses. Second, at least one of the clauses
    must not refer back to the class of data that is being defined. It is good practice
    to identify the self-references explicitly with arrows from the references in
    the data definition back to the term being defined; see [figureÂ 51](#%28counter._%28figure._fig~3adata-def-arrows%29%29)
    for an example of such an annotation.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'You must check the validity of self-referential data definitions with the creation
    of data examples. Start with the clause that does not refer to the data definition;
    continue with the other one, using the first example where the clause refers to
    the definition itself. For the data definition in [figureÂ 51](#%28counter._%28figure._fig~3adata-def-arrows%29%29),
    you thus get lists like the following three:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ''() |  | by the first clause |'
  prefs:
  - PREF_IND
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''())
    |  | by the second clause, previous example |'
  prefs:
  - PREF_IND
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ''())) &#124;'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '|  | by the second clause, previous example |'
  prefs:
  - PREF_IND
  type: TYPE_TB
- en: If it is impossible to generate examples from the data definition, it is invalid.
    If you can generate examples but you canâ€™t see how to generate increasingly larger
    examples, the definition may not live up to its interpretation.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Nothing changes about the header material: the signature, the purpose statement,
    and the dummy definition. When you do formulate the purpose statement, focus on
    what the function computes not how it goes about it, especially not how it goes
    through instances of the given data.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Here is an example to make this design recipe concrete:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â counts how many strings alos contains |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alos)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â 0) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: The purpose statement clearly states that the function just counts the strings
    on the given input; there is no need to think ahead about how you might formulate
    this idea as a BSL function.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: When it comes to functional examples, be sure to work through inputs that use
    the self-referential clause of the data definition several times. It is the best
    way to formulate tests that cover the entire function definition later.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'For our running example, the purpose statement almost generates functional
    examples by itself from the data examples:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| given |  | wanted |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ''() |  | 0 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ''())
    |  | 1 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ''()))
    |  | 2 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: The first row is about the empty list, and we know that empty list contains
    nothing. The second row is a list of one string, so 1 is the desired answer. The
    last row is about a list of two strings.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: At the core, a self-referential data definition looks like a data definition
    for mixed data. The development of the template can therefore proceed according
    to the recipe in [Itemizations and Structures](part_one.html#%28part._ch~3amix%29).
    Specifically, we formulate a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with as many [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses as there are clauses in the data definition, match each recognizing condition
    to the corresponding clause in the data definition, and write down appropriate
    selector expressions in all [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines that process compound values.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| Question |  | Answer |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Does the data definition distinguish among different sub-classes of data?
    |  | Your template needs as many [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses as sub-classes that the data definition distinguishes. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| How do the sub-classes differ from each other? |  | Use the differences to
    formulate a condition per clause. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Do any of the clauses deal with structured values? |  | If so, add appropriate
    selector expressions to the clause. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Does the data definition use self-references? |  | Formulate â€œnatural recursionsâ€
    for the template to represent the self-references of the data definition. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| If the data definition refers to some other data definition, where is this
    cross-reference to another data definition? |  | Specialize the template for the
    other data definition. Refer to this template. See [Designing with Itemizations,
    Again](part_one.html#%28part._mix._sec~3aitemization-design2%29), steps 4 and
    5 of the design recipe. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 52: How to translate a data definition into a template'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29) expresses this
    idea as a question-and-answer game. In the left column it states questions about
    the data definition for the argument, and in the right column it explains what
    the answer means for the construction of the template.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'If you ignore the last row and apply the first three questions to any function
    that consumes a [List-of-strings](#%28tech._list._of._string%29), you arrive at
    this shape:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (fun-for-losÂ alos)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Recall, though, that the purpose of a template is to express the data definition
    as a function layout. That is, a template expresses as code what the data definition
    for the input expresses as a mix of English and BSL. Hence all important pieces
    of the data definition must find a counterpart in the template, and this guideline
    should also hold when a data definition is self-referentialâ€”<wbr>contains an arrow
    from inside the definition to the term being defined. In particular, when a data
    definition is self-referential in the ith clause and the kth field of the structure
    mentioned there, the template should be self-referential in the ith [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause and the selector expression for the kth field. For each such selector expression,
    add an arrow back to the function parameter. At the end, your template must have
    as many arrows as we have in the data definition.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[FigureÂ 51](#%28counter._%28figure._fig~3adata-def-arrows%29%29) illustrates
    this idea with the template for functions that consume [List-of-strings](#%28tech._list._of._string%29)
    shown side by side with the data definition. Both contain one arrow that originates
    in the second clauseâ€”<wbr>the [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field and selector, respectivelyâ€”<wbr>and points back to the top of the respective
    definitions.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Since BSL and most programming languages are text-oriented, you must use an
    alternative to the arrow, namely, a self-application of the function to the appropriate
    selector expression:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (fun-for-losÂ alos)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fun-for-losÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: We refer to a self-use of a function as recursion and in the first four parts
    of the book as natural recursion.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: For the function body we start with thoseFor the curious among our readers,
    the design recipe for arbitrarily large data corresponds to so-called â€œproofs
    by inductionâ€ in mathematics, and the â€œleap of faithâ€ represents the use of the
    induction hypothesis for the inductive step of such a proof. Logic proves the
    validity of this proof technique with an Induction Theorem. [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines without recursive function calls, known as base cases.The corresponding
    answers are typically easy to formulate or already given as examples.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Then we deal with the self-referential cases. We start by reminding ourselves
    what each of the expressions in the template line computes. For the natural recursion
    we assume that the function already works as specified in our purpose statement.
    This last step is a leap of faith, but as you will see, it always works.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The rest is then a matter of combining the various values.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| Question |  | Answer |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| What are the answers for the non-recursive [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses? |  | The examples should tell you which values you need here. If not,
    formulate appropriate examples and tests. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| What do the selector expressions in the recursive clauses compute? |  | The
    data definitions tell you what kind of data these expressions extract, and the
    interpretations of the data definitions tell you what this data represents. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| What do the natural recursions compute? |  | Use the purpose statement of
    the function to determine what the value of the recursion means, not how it computes
    this answer. If the purpose statement doesnâ€™t tell you the answer, improve the
    purpose statement. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| How can the function combine these values to get the desired answer? |  |
    Find a function in BSL that combines the values. Or, if that doesnâ€™t work, make
    a wish for a helper function. For many functions, this last step is straightforward.
    The purpose, the examples, and the template together tell you which function or
    expression combines the available values into the proper result. We refer to this
    function or expression as a combinator, slightly abusing existing terminology.
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 53: How to turn a template into a function definition'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| Question |  | Answer |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| So, if you are stuck here, ... |  | ... arrange the examples from the third
    step in a table. Place the given input in the first column and the desired output
    in the last column. In the intermediate columns enter the values of the selector
    expressions and the natural recursion(s). Add examples until you see a pattern
    emerge that suggests a combinator. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| If the template refers to some other template, what does the auxiliary function
    compute? |  | Consult the other functionâ€™s purpose statement and examples to determine
    what it computes, and assume you may use the result even if you havenâ€™t finished
    the design of this helper function. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 54: Turning a template into a function, the table method'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29) formulates the
    first four questions and answers for this step. Letâ€™s use this game to complete
    the definition of how-many. Renaming the fun-for-los template to how-many gives
    us this much:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â determines how many strings are on alos |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alos)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alos)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (how-manyÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: 'As the functional examples already suggest, the answer for the base case is
    0. The two expressions in the second clause compute the [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    item and the number of strings in ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alos).
    To compute how many strings there are on all of alos, the function just needs
    to add 1 to the value of the latter expression:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alos)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alos)Â 0]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (how-manyÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))Â 1)]))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Felix Klock suggested this table-based approach to guessing the combinator.
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Finding the correct way to combine the values into the desired answer isnâ€™t
    always as easy. Novice programmers often get stuck with this step. As [figureÂ 54](#%28counter._%28figure._fig~3adefinition-qb%29%29)
    suggests, it is a good idea to arrange the functional examples into a table that
    also spells out the values of the expressions in the template. [FigureÂ 55](#%28counter._%28figure._fig~3afelix-table1%29%29)
    shows what this table looks like for our how-many example. The left-most column
    lists the sample inputs, while the right-most column contains the desired answers
    for these inputs. The three columns in between show the values of the template
    expressions: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alos),
    ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alos),
    and (how-many  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alos)),
    which is the natural recursion. If you stare at this table long enough, you recognize
    that the result column is always one more than the values in the natural recursion
    column. You may thus guess that'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (how-manyÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))Â 1)
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: is the expression that computes the desired result. Since DrRacket is fast at
    checking these kinds of guesses, plug it in and click RUN. If the examples-turned-into-tests
    pass, think through the expression to convince yourself it works for all lists;
    otherwise add more example rows to the table until you have a different idea.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The table also points out that some selector expressions in the template are
    possibly irrelevant for the actual definition. Here ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alos)
    is not needed to compute the final answerâ€”<wbr>which is quite a contrast to contains-flatt?,
    which uses both expressions from the template.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: As you work your way through the rest of this book, keep in mind that, in many
    cases, the combination step can be expressed with BSLâ€™s primitives, say, [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29),
    [and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29),
    or [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29).
    In some cases, though, you may have to make a wish, that is, design an auxiliary
    function. Finally, in yet other cases, you may need nested conditions.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Finally, make sure to turn all examples into tests, that these tests pass, and
    that running them covers all the pieces of the function.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Here are our examples for how-many turned into tests:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (how-manyÂ ''())Â 0)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (how-manyÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))Â 1)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (how-manyÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''())))Â 2)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Remember, it is best to formulate examples directly as tests, and BSL allows
    this. Doing so also helps if you need to resort to the table-based guessing approach
    of the preceding step.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| alos |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â alos) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â alos) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (how-many &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alos))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (how-many &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â alos) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ''()) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | "a" |  | ''() |  | 0 |  | 1 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ''())) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | "b" |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ''()) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | 1 |  | 2 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "x"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | "x" |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ''())) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | 2 |  | 3 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 55: Tabulating arguments, intermediate values, and results'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 56](#%28counter._%28figure._fig~3adesign5%29%29) summarizes the design
    recipe of this section in a tabular format. The first column names the steps of
    the design recipe, and the second the expected results of each step. In the third
    column, we describe the activities that get you there.You may want to copy [figureÂ 56](#%28counter._%28figure._fig~3adesign5%29%29)
    onto one side of an index card and write down your favorite versions of the questions
    and answers for this design recipe onto the back of it. Then carry it with you
    for future reference. The figure is tailored to the kind of self-referential list
    definitions we use in this chapter. As always, practice helps you master the process,
    so we strongly recommend that you tackle the following exercises, which ask you
    to apply the recipe to several kinds of examples.'
  prefs: []
  type: TYPE_NORMAL
- en: '| steps |  | outcome |  | activity |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| problem analysis |  | data definition |  | Develop a data representation
    for the information; create examples for specific items of information and interpret
    data as information; identify self-references. |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| header |  | signature; purpose; dummy definition |  | Write down a signature
    using defined names; formulate a concise purpose statement; create a dummy function
    that produces a constant value from the specified range. |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| examples |  | examples and tests |  | Work through several examples, at least
    one per clause in the data definition. |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| template |  | function template |  | Translate the data definition into a
    template: one [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause per data clause; selectors where the condition identifies a structure;
    one natural recursion per self-reference. |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| definition |  | full-fledged definition |  | Find a function that combines
    the values of the expressions in the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses into the expected answer. |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| test |  | validated tests |  | Turn them into [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    tests and run them. |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 56: Designing a function for self-referential data'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '9.1Finger Exercises: Lists[ğŸ”—](#(part._sec~3afinger-lists) "Link to here")'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: ExerciseÂ 137\. Compare the template for contains-flatt? with the one for how-many.
    Ignoring the function name, they are the same. Explain the similarity.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 138\. Here is a data definition for representing sequences of amounts
    of money:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A List-of-amounts is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [PositiveNumber](part_one.html#%28tech._positivenumber%29)  [List-of-amounts](#%28tech._list._of._amount%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Create some examples to make sure you understand the data definition. Also add
    an arrow for the self-reference.
  prefs: []
  type: TYPE_NORMAL
- en: Design the sum function, which consumes a [List-of-amounts](#%28tech._list._of._amount%29)
    and computes the sum of the amounts. Use DrRacketâ€™s stepper to see how (sum  l)
    works for a short list l in [List-of-amounts](#%28tech._list._of._amount%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 139\. Now take a look at this data definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A List-of-numbers is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  [List-of-numbers](#%28tech._list._of._number%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Some elements of this class of data are appropriate inputs for sum from [exerciseÂ 138](#%28counter._%28exercise._list-sum1%29%29)
    and some arenâ€™t.
  prefs: []
  type: TYPE_NORMAL
- en: 'Design the function pos?, which consumes a [List-of-numbers](#%28tech._list._of._number%29)
    and determines whether all numbers are positive numbers. In other words, if (pos?  l)
    yields #true, then l is an element of [List-of-amounts](#%28tech._list._of._amount%29).
    Use DrRacketâ€™s stepper to understand how pos? works for ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  5  ''())
    and ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  -1  ''()).'
  prefs: []
  type: TYPE_NORMAL
- en: Also design checked-sum. The function consumes a [List-of-numbers](#%28tech._list._of._number%29).
    It produces their sum if the input also belongs to [List-of-amounts](#%28tech._list._of._amount%29);
    otherwise it signals an error. Hint Recall to use check-error.
  prefs: []
  type: TYPE_NORMAL
- en: What does sum compute for an element of [List-of-numbers](#%28tech._list._of._number%29)?
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 140\. Design the function all-true, which consumes a list of [Boolean](part_one.html#%28tech._boolean%29)
    values and determines whether all of them are #true. In other words, if there
    is any #false on the list, the function produces #false.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Now design one-true, a function that consumes a list of Boolean values and
    determines whether at least one item on the list is #true.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Employ the table-based approach to coding. It may help with the base case.
    Use DrRacketâ€™s stepper to see how these functions process the lists ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #true  ''()),
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #false  ''()),
    and ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #true  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #false  ''())).'
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 141\. If you are asked to design the function cat, which consumes
    a list of strings and appends them all into one long string, you are guaranteed
    to end up with this partial definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-string](#%28tech._list._of._string%29) -> [String](part_one.html#%28tech._string%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â concatenates all strings in l into one long string |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (catÂ ''())Â "")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (catÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ''())))Â "ab")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (catÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "ab"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "cd"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "ef"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â "abcdef") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (catÂ l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ""]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (catÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| l |  | ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)
    |  | ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)
    |  | (catÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))
    |  | (catÂ l) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ''())) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ??? |  | ??? |  | ??? |  | "ab" |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â "ab" &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "cd"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "ef"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â ''()))) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ??? |  | ??? |  | ??? |  | "abcdef" |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 57: A table for cat'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Fill in the table in [figureÂ 57](#%28counter._%28figure._fig~3aex~3atable%29%29).
    Guess a function that can create the desired result from the values computed by
    the sub-expressions.
  prefs: []
  type: TYPE_NORMAL
- en: Use DrRacketâ€™s stepper to evaluate (cat  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  '())).
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 142\. Design the ill-sized? function, which consumes a list of images
    loi and a positive number n. It produces the first image on loi that is not an
    n by n square; if it cannot find such an image, it produces #false.'
  prefs: []
  type: TYPE_NORMAL
- en: Hint Use
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â ImageOrFalse is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ Image |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: for the result part of the signature.
  prefs: []
  type: TYPE_NORMAL
- en: 9.2Non-empty Lists[ğŸ”—](#(part._sec~3alists~3ane) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Now you know enough to use [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and to create data definitions for lists. If you solved (some of) the exercises
    at the end of the preceding section, you can deal with lists of various flavors
    of numbers, lists of Boolean values, lists of images, and so on. In this section
    we continue to explore what lists are and how to process them.
  prefs: []
  type: TYPE_NORMAL
- en: 'Letâ€™s start with the simple-looking problem of computing the average of a list
    of temperatures. To simplify, we provide the data definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A List-of-temperatures is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  [List-of-temperatures](#%28tech._list._of._temperature%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ABSOLUTE0Â -272)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A CTemperature is a [Number](part_one.html#%28tech._number%29) greater
    than ABSOLUTE0. |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'For our intentions, you should think of temperatures as plain numbers, but
    the second data definition reminds you that in reality not all numbers are temperatures
    and you should keep this in mind.The header material is straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the average temperature |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (averageÂ alot)Â 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Making up examples for this problem is also easy, and so we just formulate
    one test:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (averageÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''()))))Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The expected result is of course the sum of the temperatures divided by the
    number of temperatures.A momentâ€™s thought tells you that the template for average
    should be similar to the ones we have seen so far:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (averageÂ alot)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alot)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â alot)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alot)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (averageÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alot))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The two [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses mirror the two clauses of the data definition; the questions distinguish
    empty lists from non-empty lists; and the natural recursion is needed because
    of the self-reference in the data definition.
  prefs: []
  type: TYPE_NORMAL
- en: It is way too difficult, however, to turn this template into a function definition.
    The first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause needs a number that represents the average of an empty collection of temperatures,
    but there is no such number. Similarly, the second clause demands a function that
    combines a temperature and an average for the remaining temperatures into a new
    average. Although possible, computing the average in this way is highly unnatural.
  prefs: []
  type: TYPE_NORMAL
- en: 'When we compute the average of temperatures, we divide their sum by their number.
    We said so when we formulated our trivial little example. This sentence suggests
    that average is a function of three tasks: summing, counting, and dividing. Our
    guideline from [Fixed-Size Data](part_one.html) tells us to write one function
    per task, and if we do so the design of average is obvious:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the average temperature |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (averageÂ alot)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â (sumÂ alot)Â (how-manyÂ alot)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds up the temperatures on the given list |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ alot)Â 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â counts the temperatures on the given list |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (how-manyÂ alot)Â 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The last two function definitions are wishes, of course, for which we need
    to design complete definitions. Doing so is easy because how-many from above works
    for [List-of-strings](#%28tech._list._of._string%29) and [List-of-temperatures](#%28tech._list._of._temperature%29)
    (why?) and because the design of sum follows the same old routine:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-temperatures](#%28tech._list._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds up the temperatures on the given list |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ alot)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alot)Â 0]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alot)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alot)))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Stop! Use the example for average to create one for sum and ensure that the
    test runs properly. Then run the tests for average.
  prefs: []
  type: TYPE_NORMAL
- en: When you read this definition of average now, it is obviously correct simply
    because it directly corresponds to what everyone learns about averaging in school.
    Still, programs run not just for us but for others. In particular, others should
    be able to read the signature and use the function and expect an informative answer.
    But, our definition of average does not work for empty lists of temperatures.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 143\. Determine how average behaves in DrRacket when applied to the
    empty list. Then design checked-average, a function that produces an informative
    error message when it is applied to '().
  prefs: []
  type: TYPE_NORMAL
- en: In mathematics, we would say [exerciseÂ 143](#%28counter._%28exercise._average-0%29%29)
    shows that average is a partial function because it raises an error for '().
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'An alternative solution is to inform future readers through the signature that
    average doesnâ€™t work for empty lists. For that, we need a data representation
    for lists that excludes ''(), something like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An NEList-of-temperatures is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ ??? |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  [NEList-of-temperatures](#%28tech._nelist._of._temperature%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The question is with what we should replace â€œ???â€ so that the ''() list is
    excluded but all other lists of temperatures are still constructable. One hint
    is that while the empty list is the shortest list, any list of one temperature
    is the next shortest list. In turn, this suggests that the first clause should
    describe all possible lists of one temperature:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An NEList-of-temperatures is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [CTemperature](#%28tech._ctemperature%29)  [NEList-of-temperatures](#%28tech._nelist._of._temperature%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation non-empty lists of Celsius temperatures |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'While this definition differs from the preceding list definitions, it shares
    the critical elements: a self-reference and a clause that does not use a self-reference.
    Strict adherence to the design recipe demands that you make up some examples of
    [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) to ensure that
    the definition makes sense. As always, you should start with the base clause,
    meaning the example must look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â cÂ '())
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'where c stands for a CTemperature, like thus: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ABSOLUTE0  ''()).
    Also, it is clear that all non-empty elements of [List-of-temperatures](#%28tech._list._of._temperature%29)
    are also elements of the new class of data: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''())))
    fits the bill if ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''()))
    does, and ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''()))
    belongs to [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) because
    ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''())
    is an element of [NEList-of-temperatures](#%28tech._nelist._of._temperature%29),
    as confirmed before. Check for yourself that there is no limit on the size of
    NEList-of-temperatures.Letâ€™s now return to the problem of designing average so
    that everyone knows it is for non-empty lists only. With the definition of [NEList-of-temperatures](#%28tech._nelist._of._temperature%29),
    we now have the means to say what we want in the signature:This alternative development
    explains that, in this case, we can narrow down the domain of average and create
    a total function.'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the average temperature |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (averageÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â 2) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (averageÂ ne-l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â (sumÂ ne-l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â (how-manyÂ ne-l))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Naturally the rest remains the same: the purpose statement, the example-test,
    and the function definition. After all, the very idea of computing the average
    assumes a non-empty collection of numbers, and that was the entire point of our
    discussion.'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 144\. Will sum and how-many work for [NEList-of-temperatures](#%28tech._nelist._of._temperature%29)
    even though they are designed for inputs from [List-of-temperatures](#%28tech._list._of._temperature%29)?
    If you think they donâ€™t work, provide counter-examples. If you think they would,
    explain why.
  prefs: []
  type: TYPE_NORMAL
- en: 'Nevertheless, the definition also raises the question how to design sum and
    how-many because they consume instances of [NEList-of-temperatures](#%28tech._nelist._of._temperature%29)
    now. Here is the obvious result of the first three steps of the design recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the sum of the given temperatures |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (sumÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''()))))Â 6)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)Â 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The example is adapted from the example for average; the dummy definition produces
    a number, but the wrong one for the given test.The fourth step is the most interesting
    part of the design of sum for NEList-of-temperatures. All preceding examples of
    design demand a template that distinguishes empty lists from non-empty, that is,
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed,
    lists because the data definitions have an appropriate shape. This is not true
    for NEList-of-temperatures. Here both clauses add [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    lists. The two clauses differ, however, in the [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field of these lists. In particular, the first clause always uses ''() in the
    [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field and the second one uses [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    instead. Hence the proper condition to distinguish the first kind of data from
    the second extracts the [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    field and then uses [empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [NEList-of-temperatures](#%28tech._nelist._of._temperature%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Here [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    replaces ([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l)).Next
    you should inspect both clauses and determine whether one or both of them deal
    with ne-l as if it were a structure. This is of course the case, which the unconditional
    use of [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    on ne-l demonstrates. Put differently, add appropriate selector expressions to
    the two clauses:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Before you read on, explain why the first clause does not contain the selector
    expression ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l).The
    final question of the template design concerns self-references in the data definition.
    As you know, NEList-of-temperatures contains one, and therefore the template for
    sum demands one recursive use:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Specifically, sum is called on ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l)
    in the second clause because the data definition is self-referential at the analogous
    point.For the fifth design step, letâ€™s understand how much we already have. Since
    the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause looks significantly simpler than the second one with its recursive function
    call, you should start with that one. In this particular case, the condition says
    that sum is applied to a list with exactly one temperature, ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ne-l).
    Clearly, this one temperature is the sum of all temperatures on the given list:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The second clause says that the list consists of a temperature and at least
    one more; ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ne-l)
    extracts the first position and ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l)
    the remaining ones. Furthermore, the template suggests to use the result of (sum  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l)).
    But sum is the function that you are defining, and you canâ€™t possibly know how
    it uses ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l).
    All you do know is what the purpose statement says, namely, that sum adds all
    the temperatures on the given list, which is ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l).
    If this statement is true, then (sum  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ne-l))
    adds up all but one of the numbers of ne-l. To get the total, the function just
    has to add the first temperature:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sumÂ ne-l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ne-l)Â (sumÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ne-l)))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: If you now run the test for this function, you will see that the leap of faith
    is justified. Indeed, for reasons beyond the scope of this book, this leap is
    always justified, which is why it is an inherent part of the design recipe.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 145\. Design the sorted>? predicate, which consumes a [NEList-of-temperatures](#%28tech._nelist._of._temperature%29)
    and produces #true if the temperatures are sorted in descending order. That is,
    if the second is smaller than the first, the third smaller than the second, and
    so on. Otherwise it produces #false.'
  prefs: []
  type: TYPE_NORMAL
- en: Hint This problem is another one where the table-based method for guessing the
    combinator works well. Here is a partial table for a number of examples in [figureÂ 58](#%28counter._%28figure._fig~3asorted%29%29).
    Fill in the rest of the table. Then try to create an expression that computes
    the result from the pieces.
  prefs: []
  type: TYPE_NORMAL
- en: '| l |  | ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)
    |  | ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)
    |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (sorted>? &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (sorted>? &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â l) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ''())) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | 1 |  | ??? |  | #true |  | #false |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ''())) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | 3 |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''())
    |  | ??? |  | #true |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | 0 |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â ''())) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ??? |  | ??? |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 58: A table for sorted>?'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 146\. Design how-many for [NEList-of-temperatures](#%28tech._nelist._of._temperature%29).
    Doing so completes average, so ensure that average passes all of its tests, too.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 147\. Develop a data definition for NEList-of-Booleans, a representation
    of non-empty lists of Boolean values. Then redesign the functions all-true and
    one-true from [exerciseÂ 140](#%28counter._%28exercise._list-and%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 148\. Compare the function definitions from this section (sum, how-many,
    all-true, one-true) with the corresponding function definitions from the preceding
    sections. Is it better to work with data definitions that accommodate empty lists
    as opposed to definitions for non-empty lists? Why? Why not?
  prefs: []
  type: TYPE_NORMAL
- en: 9.3Natural Numbers[ğŸ”—](#(part._sec~3anats) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'The BSL programming language supplies many functions that consume lists and
    a few that produce them, too. Among those is [make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29),
    which consumes a number n together with some other value v and produces a list
    that contains v n times. Here are some examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)Â 2Â "hello")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (cons "hello" (cons "hello" ''())) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)Â 3Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (cons #true (cons #true (cons #true ''()))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)Â 0Â 17)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In short, even though this function consumes atomic data, it produces arbitrarily
    large pieces of data. Your question should be how this is possible.Our answer
    is that [make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29)â€™s
    input isnâ€™t just a number, it is a special kind of number. In kindergarten you
    called these numbers â€œcounting numbersâ€, that is, these numbers are used to count
    objects. In computer science, these numbers are dubbed natural numbers. Unlike
    regular numbers, natural numbers come with a data definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An N is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)  [N](#%28tech._n%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents the counting numbers |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The first clause says that 0 is a natural number; it is used to say that there
    is no object to be counted. The second clause tells you that if n is a natural
    number, then n+1 is one too, because [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)
    is a function that adds 1 to whatever number it is given. We could write this
    second clause as ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  n  1),
    but the use of [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)
    is supposed to signal that this addition is special.
  prefs: []
  type: TYPE_NORMAL
- en: What is special about this use of [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)
    is that it acts more like a constructor from some structure-type definition than
    a regular function. For that reason, BSL also comes with the function [sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29),
    which is the â€œselectorâ€ corresponding to [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29).
    Given any natural number m not equal to 0, you can use [sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)
    to find out the number that went into the construction of m. Put differently,
    [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29)
    is like [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and [sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)
    is like [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    and [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'At this point you may wonder what the predicates are that distinguish 0 from
    those natural numbers that are not 0. There are two, just as for lists: [zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29),
    which determines whether some given number is 0, and [positive?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._positive~3f%29%29),
    which determines whether some number is larger than 0.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Now you are in a position to design functions on natural numbers, such as [make-list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-list%29%29),
    yourself. The data definition is already available, so letâ€™s add the header material:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [N](#%28tech._n%29)  [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates a list of n copies of s |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 0Â "hello")Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 2Â "hello")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copierÂ nÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Developing the template is the next step. The questions for the template suggest
    that copierâ€™s body is a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with two clauses: one for 0 and one for positive numbers. Furthermore,
    0 is considered atomic and positive numbers are considered structured values,
    meaning the template needs a selector expression in the second clause. Last but
    not least, the data definition for [N](#%28tech._n%29) is self-referential in
    the second clause. Hence the template needs a recursive application to the corresponding
    selector expression in the second clause:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copierÂ nÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([positive?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._positive~3f%29%29)Â n)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (copierÂ ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â n)Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [N](#%28tech._n%29)  [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates a list of n copies of s |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 0Â "hello")Â ''())
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (copierÂ 2Â "hello")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copierÂ nÂ s)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)Â n)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([positive?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._positive~3f%29%29)Â n)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â sÂ (copierÂ ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â n)Â s))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 59: Creating a list of copies'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 59](#%28counter._%28figure._fig~3acopier%29%29) contains a complete
    definition of the copier function, as obtained from its template. Letâ€™s reconstruct
    this step carefully. As always, we start with the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause that has no recursive calls. Here the condition tells us that the (important)
    input is 0, and that means the function must produce a list with 0 items, that
    is, none. Of course, working through the second example has already clarified
    this case. Next we turn to the other [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause and remind ourselves what its expressions compute:'
  prefs: []
  type: TYPE_NORMAL
- en: ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)
    extracts the natural number that went into the construction of n, which we know
    is larger than 0;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: (copier  ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)  s)
    produces a list of ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)
    strings s according to the purpose statement of copier.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: But the function is given n and must therefore produce a list with n strings
    s. Given a list with one too few strings, it is easy to see that the function
    must simply [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    one s onto the result of (copier  ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)  n)  s).
    And that is precisely what the second clause specifies.
  prefs: []
  type: TYPE_NORMAL
- en: At this point, you should run the tests to ensure that this function works at
    least for the two worked examples. In addition, you may wish to use the function
    on some additional inputs.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 149\. Does copier function properly when you apply it to a natural
    number and a Boolean or an image? Or do you have to design another function? Read
    [Abstraction](part_three.html) for an answer.
  prefs: []
  type: TYPE_NORMAL
- en: 'An alternative definition of copier might use [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (copier.v2Â nÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)Â n)Â ''()]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â sÂ (copier.v2Â ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â n)Â s))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'How do copier and copier.v2 behave when you apply them to 0.1 and "x"? Explain.
    Use DrRacketâ€™s stepper to confirm your explanation.ExerciseÂ 150\. Design the function
    add-to-pi. It consumes a natural number n and adds it to [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29)
    without using the primitive [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    operation. Here is a start:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [N](#%28tech._n%29) -> [Number](part_one.html#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  n  [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))
    without using [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-within](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-within%29%29)Â (add-to-piÂ 3)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 3Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))Â 0.001)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-to-piÂ n)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Once you have a complete definition, generalize the function to add, which adds
    a natural number n to some arbitrary number x without using [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29).
    Why does the skeleton use [check-within](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-within%29%29)?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 151\. Design the function multiply. It consumes a natural number n
    and multiplies it with a number x without using [*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: Use DrRacketâ€™s stepper to evaluate (multiply  3  x) for any x you like. How
    does multiply relate to what you know from grade school?
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 152\. Design two functions: col and row.'
  prefs: []
  type: TYPE_NORMAL
- en: The function col consumes a natural number n and an image img. It produces a
    columnâ€”<wbr>a vertical arrangementâ€”<wbr>of n copies of img.
  prefs: []
  type: TYPE_NORMAL
- en: The function row consumes a natural number n and an image img. It produces a
    rowâ€”<wbr>a horizontal arrangementâ€”<wbr>of n copies of img.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/22f2b400f2886255d337e960c6f00be4.png)Â Â Â Â Â ![image](../Images/8cbe75cb9c9e4c849428502005000815.png)Â Â Â Â Â ![image](../Images/741636214abd48e079ab1203d85cebe3.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 60: Random attacks'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 153\. The goal of this exercise is to visualize the result of a 1968-style
    European student riot. Here is the rough idea. A small group of students meets
    to make paint-filled balloons, enters some lecture hall, and randomly throws the
    balloons at the attendees. Your program displays how the balloons color the seats
    in the lecture hall.
  prefs: []
  type: TYPE_NORMAL
- en: Use the two functions from [exerciseÂ 152](#%28counter._%28exercise._ex~3acol-row%29%29)
    to create a rectangle of COLUMNS by ROWS squares, each of which has size 10 by
    10\. Place it in an [empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)
    of the same size. This image is your lecture hall.
  prefs: []
  type: TYPE_NORMAL
- en: Design add-balloons. The function consumes a list of [Posn](part_one.html#%28tech._posn%29)
    whose coordinates fit into the dimensions of the lecture hall. It produces an
    image of the lecture hall with red dots added as specified by the [Posn](part_one.html#%28tech._posn%29)s.
  prefs: []
  type: TYPE_NORMAL
- en: '[FigureÂ 60](#%28counter._%28figure._fig~3aex~3arandom1%29%29) shows the output
    of our solution for 10 COLUMNS columns and 20 ROWS when given some list of [Posn](part_one.html#%28tech._posn%29)s.
    The left-most is the clean lecture hall, the second one is after two balloons
    have hit, and the last one is a highly unlikely distribution of 10 hits. Where
    is the 10th?'
  prefs: []
  type: TYPE_NORMAL
- en: 9.4Russian Dolls[ğŸ”—](#(part._rd._sec~3ard) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Wikipedia defines a Russian doll as â€œa set of dolls of decreasing sizes placed
    one inside the otherâ€ and illustrates it with this picture:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/4e434e9538acf13bb4b1e8e7bd32519c.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: In this picture, the dolls are taken apart so that the viewer can see them all.
  prefs: []
  type: TYPE_NORMAL
- en: The problem may strike you as abstract or even absurd; it isnâ€™t clear why you
    would want to represent Russian dolls or what you would do with such a representation.
    Just play along for now.
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: Now consider the problem of representing such Russian dolls with BSL data. With
    a little bit of imagination, it is easy to see that an artist can create a nest
    of Russian dolls that consists of an arbitrary number of dolls. After all, it
    is always possible to wrap another layer around some given Russian doll. Then
    again, you also know that deep inside there is a solid doll without anything inside.
  prefs: []
  type: TYPE_NORMAL
- en: 'For each layer of a Russian doll, we could care about many different things:
    its size, though it is related to the nesting level; its color; the image that
    is painted on the surface; and so on. Here we just pick one, namely the color
    of the doll, which we represent with a string. Given that, we know that each layer
    of the Russian doll has two properties: its color and the doll that is inside.
    To represent pieces of information with two properties, we always define a structure
    type:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â layerÂ [[color](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._color%29%29)Â doll])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'And then we add a data definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An RD (short for Russian doll) is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [String](part_one.html#%28tech._string%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  (make-layer  [String](part_one.html#%28tech._string%29)  [RD](#%28tech._rd._rd%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Naturally, the first clause of this data definition represents the innermost
    doll, or, to be precise, its color. The second clause is for adding a layer around
    some given Russian doll. We represent this with an instance of layer, which obviously
    contains the color of the doll and one other field: the doll that is nested immediately
    inside of this doll.Take a look at this doll:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/9d595ae0642a527dfb64a6bf293657b5.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: It consists of three dolls. The red one is the innermost one, the green one
    sits in the middle, and the yellow is the current outermost wrapper. To represent
    this doll with an element of [RD](#%28tech._rd._rd%29), you start on either end.
    We proceed from the inside out. The red doll is easy to represent as an [RD](#%28tech._rd._rd%29).
    Since nothing is inside and since it is red, the string "red" will do fine. For
    the second layer, we use
  prefs: []
  type: TYPE_NORMAL
- en: (make-layerÂ "green"Â "red")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'which says that a green (hollow) doll contains a red doll. Finally, to get
    the outside we just wrap another layer around this last doll:'
  prefs: []
  type: TYPE_NORMAL
- en: (make-layerÂ "yellow"Â (make-layerÂ "green"Â "red"))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This process should give you a good idea of how to go from any set of colored
    Russian dolls to a data representation. But keep in mind that a programmer must
    also be able to do the converse, that is, go from a piece of data to concrete
    information. In this spirit, draw a schematic Russian doll for the following element
    of [RD](#%28tech._rd._rd%29):'
  prefs: []
  type: TYPE_NORMAL
- en: (make-layerÂ "pink"Â (make-layerÂ "black"Â "white"))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'You might even try this in BSL.Now that we have a data definition and understand
    how to represent actual dolls and how to interpret elements of [RD](#%28tech._rd._rd%29)
    as dolls, we are ready to design functions that consume [RD](#%28tech._rd._rd%29)s.
    Specifically, letâ€™s design the function that counts how many dolls a Russian doll
    set contains. This sentence is a fine purpose statement and determines the signature,
    too:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [RD](#%28tech._rd._rd%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â how many dolls are part of an-rd |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As for data examples, letâ€™s start with (make-layer  "yellow"  (make-layer  "green"  "red")).
    The image above tells us that 3 is the expected answer because there are three
    dolls: the red one, the green one, and the yellow one. Just working through this
    one example also tells us that when the input is a representation of this doll'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/ebd15aaf5fbc5859f8a5a3b276ce105b.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'then the answer is 1.Step four demands the development of a template. Using
    the standard questions for this step produces this template:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [RD](#%28tech._rd._rd%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â how many dolls are a part of an-rd |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (depthÂ an-rd)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â an-rd)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(layer?Â an-rd) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (layer-colorÂ an-rd)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (depthÂ (layer-dollÂ an-rd))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The number of [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses is determined by the number of clauses in the definition of [RD](#%28tech._rd._rd%29).
    Each of the clauses specifically spells out what kind of data it is about, and
    that tells us to use the [string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)
    and layer? predicates. While strings arenâ€™t compound data, instances of layer
    contain two values. If the function needs these values, it uses the selector expressions
    (layer-color  an-rd) and (layer-doll  an-rd). Finally, the second clause of the
    data definition contains a self-reference from the doll field of the layer structure
    to the definition itself. Hence we need a recursive function call for the second
    selector expression.The examples and the template almost dictate the function
    definition. For the non-recursive [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause, the answer is obviously 1. For the recursive clause, the template expressions
    compute the following results:'
  prefs: []
  type: TYPE_NORMAL
- en: (layer-color  an-rd) extracts the string that describes the color of the current
    layer;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (layer-doll  an-rd) extracts the doll contained within the current layer; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (depth  (layer-doll  an-rd)) determines how many dolls are part of (layer-doll  an-rd),
    according to the purpose statement of depth.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'This last number is almost the desired answer but not quite because the difference
    between an-rd and (layer-doll  an-rd) is one layer, meaning one extra doll. Put
    differently, the function must add 1 to the recursive result to obtain the actual
    answer:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [RD](#%28tech._rd._rd%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â how many dolls are a part of an-rd |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (depthÂ an-rd)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â an-rd)Â 1]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (depthÂ (layer-dollÂ an-rd))Â 1)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Note how the function definition does not use (layer-color  an-rd) in the second
    clause. Once again, we see that the template is an organization schema for everything
    we know about the data definition, but we may not need all of these pieces for
    the actual definition.Letâ€™s finally translate the examples into tests:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (depthÂ "red")Â 1)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (depth |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â (make-layerÂ "yellow"Â (make-layerÂ "green"Â "red"))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â 3) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: If you run these in DrRacket, you will see that their evaluation touches all
    pieces of the definition of depth.ExerciseÂ 154\. Design the function colors. It
    consumes a Russian doll and produces a string of all colors, separated by a comma
    and a space. Thus our example should produce
  prefs: []
  type: TYPE_NORMAL
- en: '"yellow, green, red"'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 155\. Design the function inner, which consumes an [RD](#%28tech._rd._rd%29)
    and produces the (color of the) innermost doll. Use DrRacketâ€™s stepper to evaluate
    (inner  rd) for your favorite rd.
  prefs: []
  type: TYPE_NORMAL
- en: 9.5Lists and World[ğŸ”—](#(part._sec~3alist-world) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: With lists and self-referential data definitions in general, you can design
    and run many more interesting world programs than with finite data. Just imagine
    you can now create a version of the space invader program from [Itemizations and
    Structures](part_one.html#%28part._ch~3amix%29) that allows the player to fire
    as many shots from the tank as desired. Letâ€™s start with a simplistic version
    of this problem:If you havenâ€™t designed a world program in a while, reread [Designing
    World Programs](part_one.html#%28part._.D.K._sec~3adesign-world%29).
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a world program that simulates firing shots. Every time
    the â€œplayerâ€ hits the space bar, the program adds a shot to the bottom of the
    canvas. These shots rise vertically at the rate of one pixel per tick.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Designing a world program starts with a separation of information into constants
    and elements of the ever-changing state of the world. For the former we introduce
    physical and graphical constants; for the latter we need to develop a data representation
    for world states. While the sample problem is relatively vague about the specifics,
    it clearly assumes a rectangular scenery with shots painted along a vertical line.
    Obviously the locations of the shots change with every clock tick, but the size
    of the scenery and x-coordinate of the line of shots remain the same:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ 80)Â ;Â distances
    in terms of pixels |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 100)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â XSHOTSÂ ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â WIDTHÂ 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â graphical constants |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â BACKGROUNDÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHT))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â SHOTÂ ([triangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._triangle%29%29)Â 3Â "solid"Â "red"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Nothing in the problem statement demands these particular choices, but as long
    as they are easy to changeâ€”<wbr>meaning changing by editing a single definitionâ€”<wbr>we
    have achieved our goal.As for those aspects of the â€œworldâ€ that change, the problem
    statement mentions two. First, hitting the space bar adds a shot. Second, all
    the shots move straight up by one pixel per clock tick. Given that we cannot predict
    how many shots the player will â€œfire,â€ we use a list to represent them:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A List-of-shots is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Shot](#%28tech._shot%29)  [List-of-shots](#%28tech._list._of._shot%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation the collection of shots fired |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The one remaining question is how to represent each individual shot. We already
    know that all of them have the same x-coordinate and that this coordinate stays
    the same throughout. Furthermore, all shots look alike. Hence, their y-coordinates
    are the only property in which they differ from each other. It therefore suffices
    to represent each shot as a number:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Shot is a [Number](part_one.html#%28tech._number%29). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents the shot''s y-coordinate |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'We could restrict the representation of shots to the interval of numbers below
    HEIGHT because we know that all shots are launched from the bottom of the canvas
    and that they then move up, meaning their y-coordinate continuously decreases.You
    can also use a data definition like this to represent this world:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A ShotWorld is [List-of-numbers](#%28tech._list._of._number%29). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation each number on such a list |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â represents the y-coordinate of a shot |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'After all, the above two definitions describe all list of numbers; we already
    have a definition for lists of numbers, and the name [ShotWorld](#%28tech._shotworld%29)
    tells everyone what this class of data is about.Once you have defined constants
    and developed a data representation for the states of the world, the key task
    is to pick which event handlers you wish to employ and to adapt their signatures
    to the given problem. The running example mentions clock ticks and the space bar,
    all of which translates into a wish list of three functions:'
  prefs: []
  type: TYPE_NORMAL
- en: 'the function that turns a world state into an image:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds the image of a shot for eachÂ Â y on w |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â at (MID,y) to the background image |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (to-imageÂ w)Â BACKGROUND)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: because the problem demands a visual rendering;
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'one for dealing with tick events:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [ShotWorld](#%28tech._shotworld%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â moves each shot on w up by one pixel |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tockÂ w)Â w)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: 'and one function for dealing with key events:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [ShotWorld](#%28tech._shotworld%29) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds a shot to the world |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if the player presses the space bar |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (keyhÂ wÂ ke)Â w)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: 'Donâ€™t forget that in addition to the initial wish list, you also need to define
    a main function that actually sets up the world and installs the handlers. [FigureÂ 61](#%28counter._%28figure._fig~3ashots%29%29)
    includes this one function that is not designed but defined as a modification
    of standard schema.Letâ€™s start with the design of to-image. We have its signature,
    purpose statement, and header, so we need examples next. Since the data definition
    has two clauses, there should be at least two examples: ''() and a [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    list, say, ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  9  ''()).
    The expected result for ''() is obviously BACKGROUND; if there is a y-coordinate,
    though, the function must place the image of a shot at MID and the specified coordinate:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (to-imageÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 9Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â SHOTÂ XSHOTSÂ 9Â BACKGROUND))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Before you read on, work through an example that applies to-image to a list
    of two [Shot](#%28tech._shot%29)s. Doing so helps understand how the function
    works.The fourth step is about translating the data definition into a template:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (to-imageÂ w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (to-imageÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The template for data definitions for lists is so familiar now that it doesnâ€™t
    need much explanation. If you have any doubts, read over the questions in [figureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29)
    and design the template on your own.From here it is straightforward to define
    the function. The key is to combine the examples with the template and to answer
    the questions from [figureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29).
    Following those, you start with the base case of an empty list of shots, and,
    from the examples, you know that the expected answer is BACKGROUND. Next you formulate
    what the template expressions in the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    compute:'
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  w)
    extracts the first coordinate from the list;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  w)
    is the rest of the coordinates; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (to-image  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  w))
    adds each shot on ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  w)
    to the background image, according to the purpose statement of to-image.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In other words, (to-image  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  w))
    renders the rest of the list as an image and thus performs almost all the work.
    What is missing is the first shot, ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  w).
    If you now apply the purpose statement to these two expressions, you get the desired
    expression for the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â SHOTÂ XSHOTSÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â (to-imageÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The added icon is the standard image for a shot; the two coordinates are spelled
    out in the purpose statement; and the last argument to [place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)
    is the image constructed from the rest of the list.
  prefs: []
  type: TYPE_NORMAL
- en: '[FigureÂ 61](#%28counter._%28figure._fig~3ashots%29%29) displays the complete
    function definition for to-image and indeed the rest of the program, too. The
    design of tock is just like the design of to-image, and you should work through
    it for yourself. The signature of the keyh handler, though, poses one interesting
    question. It specifies that the handler consumes two inputs with nontrivial data
    definitions. On the one hand, the [ShotWorld](#%28tech._shotworld%29) is a self-referential
    data definition. On the other hand, the definition for [KeyEvent](part_one.html#%28tech._keyevent%29)s
    is a large enumeration. For now, we have you â€œguessâ€ which of the two arguments
    should drive the development of the template; later we will study such cases in
    depth.'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [ShotWorld](#%28tech._shotworld%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ w0)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â w0
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â tock]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â keyh]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â to-image]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [ShotWorld](#%28tech._shotworld%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â moves each shot up by one pixel |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tockÂ w)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w))Â (tockÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [ShotWorld](#%28tech._shotworld%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds a shot to the world if the space bar is hit |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (keyhÂ wÂ ke)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "
    ")Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â HEIGHTÂ w)Â w))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [ShotWorld](#%28tech._shotworld%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds each shot y on w at (XSHOTS,y} to BACKGROUND |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (to-imageÂ w)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â BACKGROUND]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â SHOTÂ XSHOTSÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (to-imageÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 61: A list-based world program'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'As far as a world program is concerned, a key handler such as keyh is about
    the key event that it consumes. Hence, we consider it the main argument and use
    its data definition to derive the template. Specifically, following the data definition
    for [KeyEvent](part_one.html#%28tech._keyevent%29) from [Enumerations](part_one.html#%28part._sec~3aenums%29),
    it dictates that the function needs a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with numerous clauses like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (keyhÂ wÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "left")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "right")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "
    ")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "a")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â keÂ "z")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Of course, just like for functions that consume all possible BSL values, a key
    handler usually does not need to inspect all possible cases. For our running problem,
    you specifically know that the key handler reacts only to the space bar and all
    others are ignored. So it is natural to collapse all of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses into an [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    clause except for the clause for " ".
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 156\. Equip the program in [figureÂ 61](#%28counter._%28figure._fig~3ashots%29%29)
    with tests and make sure it passes those. Explain what main does. Then run the
    program via main.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 157\. Experiment to determine whether the arbitrary decisions concerning
    constants are easy to change. For example, determine whether changing a single
    constant definition achieves the desired outcome:'
  prefs: []
  type: TYPE_NORMAL
- en: change the height of the canvas to 220 pixels;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: change the width of the canvas to 30 pixels;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: change the x location of the line of shots to â€œsomewhere to the left of the
    middleâ€;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: change the background to a green rectangle; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: change the rendering of shots to a red elongated rectangle.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Also check whether it is possible to double the size of the shot without changing
    anything else or to change its color to black.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 158\. If you run main, press the space bar (fire a shot), and wait
    for a goodly amount of time, the shot disappears from the canvas. When you shut
    down the world canvas, however, the result is a world that still contains this
    invisible shot.
  prefs: []
  type: TYPE_NORMAL
- en: Design an alternative tock function that doesnâ€™t just move shots one pixel per
    clock tick but also eliminates those whose coordinates place them above the canvas.
    Hint You may wish to consider the design of an auxiliary function for the recursive
    [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 159\. Turn the solution of [exerciseÂ 153](#%28counter._%28exercise._ex~3arandom1%29%29)
    into a world program. Its main function, dubbed riot, consumes how many balloons
    the students want to throw; its visualization shows one balloon dropping after
    another at a rate of one per second. The function produces the list of [Posn](part_one.html#%28tech._posn%29)s
    where the balloons hit.
  prefs: []
  type: TYPE_NORMAL
- en: 'Hints (1) Here is one possible data representation:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â pairÂ [balloon#Â lob])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Pair is a structure (make-pair  [N](#%28tech._n%29)  [List-of-posns](#%28tech._list._of._posn%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A List-of-posns is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [List-of-posns](#%28tech._list._of._posn%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  (make-pair  n  lob) means n balloons |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â must yet be thrown and added to lob |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: (2) A [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression is really just an expression. It is legitimate to nest it within another
    expression.
  prefs: []
  type: TYPE_NORMAL
- en: (3) Recall that [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    creates random numbers.
  prefs: []
  type: TYPE_NORMAL
- en: 9.6A Note on Lists and Sets[ğŸ”—](#(part._sec~3alist-set) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: This book relies on your intuitive understanding of sets as collections of BSL
    values. [The Universe of Data](part_one.html#%28part._data-uni._sec~3adata-uni%29)
    specifically says that a data definition introduces a name for a set of BSL values.
    There is one question that this book consistently asks about sets, and it is whether
    some element is in some given set. For example, 4 is in [Number](part_one.html#%28tech._number%29),
    while "four" is not. The book also shows how to use a data definition to check
    whether some value is a member of some named set and how to use some of the data
    definitions to generate sample elements of sets, but these two procedures are
    about data definitions, not sets per se.
  prefs: []
  type: TYPE_NORMAL
- en: At the same time, lists represent collections of values. Hence you might be
    wondering what the difference between a list and a set is or whether this is a
    needless distinction. If so, this section is for you.
  prefs: []
  type: TYPE_NORMAL
- en: Right now the primary difference between sets and lists is that the former is
    a concept we use to discuss steps in the design of code and the latter is one
    of many forms of data in BSL, our chosen programming language. The two ideas live
    at rather different levels in our conversations. However, given that a data definition
    introduces a data representation of actual information inside of BSL and given
    that sets are collections of information, you may now ask yourself how sets are
    represented inside of BSL as data.
  prefs: []
  type: TYPE_NORMAL
- en: Most full-fledged languages directly support data representations of both lists
    and sets.
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: While lists have a special status in BSL, sets donâ€™t, but at the same time sets
    somewhat resemble lists. The key difference is the kind of functions a program
    normally uses with either form of data. BSL provides several basic constants and
    functions for listsâ€”<wbr>say, [empty](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty%29%29),
    [empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29),
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29),
    [cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29),
    [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29),
    [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)â€”<wbr>and
    some functions that you could define yourselfâ€”<wbr>for example, [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29),
    [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29),
    [remove](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove%29%29),
    [reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29),
    and so on. Here is an example of a function you can define but does not come with
    BSL
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-string](#%28tech._list._of._string%29)  [String](part_one.html#%28tech._string%29)
    -> [N](#%28tech._n%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â determines how often s occurs in los |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (countÂ losÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â 0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Stop! Finish the design of this function.
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s proceed in a straightforward and possibly naive manner and say sets are
    basically lists. And, to simplify further, letâ€™s focus on lists of numbers in
    this section. If we now accept that it merely matters whether a number is a part
    of a set or not, it is almost immediately clear that we can use lists in two different
    ways to represent sets.
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â A Son.L is one of: &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  [empty](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  [Son.L](#%28tech._son..l%29))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â  &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â Son is used when it &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â applies to [Son.L](#%28tech._son..l%29) and [Son.R](#%28tech._son..r%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â A Son.R is one of: &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  [empty](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  [Son.R](#%28tech._son..r%29))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â  &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â Constraint If s is a [Son.R](#%28tech._son..r%29), &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â no number occurs twice in s &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 62: Two data representations for sets'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 62](#%28counter._%28figure._fig~3asets-vs-lists%29%29) displays the
    two data definitions. Both basically say that a set is represented as a list of
    numbers. The difference is that the definition on the right comes with the constraint
    that no number may occur more than once on the list. After all, the key question
    we ask about a set is whether some number is in the set or not, and whether it
    is in a set once, twice, or three times makes no difference.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Regardless of which definition you choose, you can already define two important
    notions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Son](#%28tech._son%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â esÂ ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [Son](#%28tech._son%29) ->
    [Boolean](part_one.html#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â is x in s |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (in?Â xÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â xÂ s))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The first one is the empty set, which in both cases is represented by the empty
    list. The second one is a membership test.One way to build larger sets is to use
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and the above definitions. Say we wish to build a representation of the set that
    contains 1, 2, and 3. Here is one such representation:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â '())))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: And it works for both data representations. But, is
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â '())))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: really not a representation of the same set? Or how about
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â '()))))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The answer has to be affirmative as long as the primary concern is whether a
    number is in a set or not. Still, while the order of [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    cannot matter, the constraint in the right-hand data definition rules out the
    last list as a [Son.R](#%28tech._son..r%29) because it contains 1 twice.
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â [Number](part_one.html#%28tech._number%29)  [Son.L](#%28tech._son..l%29)
    -> [Son.L](#%28tech._son..l%29) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â removes x from s &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â s1.L
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ''())))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â  &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â (set-.LÂ 1Â s1.L)Â es) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â  &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (set-.LÂ xÂ s)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([remove-all](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove-all%29%29)Â xÂ s))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â [Number](part_one.html#%28tech._number%29)  [Son.R](#%28tech._son..r%29)
    -> [Son.R](#%28tech._son..r%29) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â removes x from s &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â s1.R
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ''()))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â  &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â (set-.RÂ 1Â s1.R)Â es) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â  &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (set-.RÂ xÂ s)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([remove](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove%29%29)Â xÂ s))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 63: Functions for the two data representations of sets'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The difference between the two data definitions shows up when we design functions.
    Say we want a function that removes a number from a set. Here is a wish-list entry
    that applies to both representations:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [Son](#%28tech._son%29) ->
    [Son](#%28tech._son%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â subtracts x from s |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (set-Â xÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â s) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The purpose statement uses the word â€œsubtractâ€ because this is what logicians
    and mathematicians use when they work with sets.[FigureÂ 63](#%28counter._%28figure._fig~3asets-vs-lists-ops%29%29)
    shows the results. The two columns differ in two points:'
  prefs: []
  type: TYPE_NORMAL
- en: The test on the left uses a list that contains 1 twice, while the one on the
    right represents the same set with a single [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Because of these differences, the set- on the left must use [remove-all](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove-all%29%29),
    while the one on the right gets away with [remove](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remove%29%29).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Stop! Copy the code into the DrRacket definitions area and make sure the tests
    pass. Then read on and experiment with the code as you do.An unappealing aspect
    of [figureÂ 63](#%28counter._%28figure._fig~3asets-vs-lists-ops%29%29) is that
    the tests use es, a plain list, as the expected result. This problem may seem
    minor at first glance. Consider the following example, however:'
  prefs: []
  type: TYPE_NORMAL
- en: (set-Â 1Â set123)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'where set123 represents the set containing 1, 2, and 3 in one of two ways:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â set123-version1
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â set123-version2
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Regardless of which representation we choose, (set-  1  set123) evaluates to
    one of these two lists:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â set23-version1
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â set23-version2
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 3Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'But we cannot predict which of those two set- produces.For the simple case
    of two alternatives, it is possible to use the [check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)
    testing facility as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)Â (set-.v1Â 1Â set123.v1)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â set23-version1 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â set23-version2) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: If the expected set contains three elements, there are six possible variations,
    not including representations with repetitions, which the left-hand data definition
    allows.
  prefs: []
  type: TYPE_NORMAL
- en: Fixing this problem calls for the combination of two ideas. First, recall that
    set- is really about ensuring that the given element does not occur in the result.
    It is an idea that our way of turning the examples into tests does not bring across.
    Second, with BSLâ€™s [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    testing facility, it is possible to state precisely this idea.
  prefs: []
  type: TYPE_NORMAL
- en: '[Intermezzo 1: Beginning Student Language](i1-2.html) briefly mentions [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29),
    but, in a nutshell, the facility determines whether an expression satisfies a
    certain property. A property is a function from values to [Boolean](part_one.html#%28tech._boolean%29).
    In our specific case, we wish to state that 1 is not a member of some set:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Son](#%28tech._son%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â #true if 1 is not a member of s;Â Â #false otherwise |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (not-member-1?Â s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([not](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._not%29%29)Â (in?Â 1Â s)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Using not-member-1?, we can formulate the test case as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)Â (set-Â 1Â set123)Â not-member-1?)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'and this variant clearly states what the function is supposed to accomplish.
    Better yet, this formulation simply does not depend on how the input or output
    set is represented.In sum, lists and sets are related in that both are about collections
    of values, but they also differ strongly:'
  prefs: []
  type: TYPE_NORMAL
- en: '| property |  | lists |  | sets |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| membership |  | one among many |  | critical |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ordering |  | critical |  | irrelevant |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| # of occurrences |  | sensible |  | irrelevant |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| size |  | finite but arbitrary |  | finite or infinite |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The last row in this table presents a new idea, though an obvious one, too.
    Many of the sets mentioned in this book are infinitely large, for example, [Number](part_one.html#%28tech._number%29),
    [String](part_one.html#%28tech._string%29), and also [List-of-strings](#%28tech._list._of._string%29).
    In contrast, a list is always finite though it may contain an arbitrarily large
    number of items.
  prefs: []
  type: TYPE_NORMAL
- en: In sum, this section explains the essential differences between sets and lists
    and how to represent finite sets with finite lists in two different ways. BSL
    is not expressive enough to represent infinite sets; [exerciseÂ 299](part_three.html#%28counter._%28exercise._ex~3ainfinite-set%29%29)
    introduces a completely different representation of sets, a representation that
    can cope with infinite sets, too. The question of how actual programming languages
    represent sets is beyond the scope of this book, however.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 160\. Design the functions set+.L and set+.R, which create a set by
    adding a number x to some given set s for the left-hand and right-hand data definition,
    respectively.
  prefs: []
  type: TYPE_NORMAL
- en: 10More on Lists[ğŸ”—](#(part._ch~3alists2) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Lists are a versatile form of data that come with almost all languages now.
    Programmers have used them to build large applications, artificial intelligences,
    distributed systems, and more. This chapter illustrates some ideas from this world,
    including functions that create lists, data representations that call for structures
    inside of lists, and representing text files as lists.
  prefs: []
  type: TYPE_NORMAL
- en: 10.1Functions that Produce Lists[ğŸ”—](#(part._sec~3alist-produce) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Here is a function for determining the wage of an hourly employee:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the wage for h hours of work |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wageÂ h)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 12Â h))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: It consumes the number of hours worked and produces the wage. A company that
    wishes to use payroll software isnâ€™t interested in this function, however. It
    wants one that computes the wages for all its employees.
  prefs: []
  type: TYPE_NORMAL
- en: Call this new function wage*. Its task is to process all employee work hours
    and to determine the wages due to each of them. For simplicity, letâ€™s assume that
    the input is a list of numbers, each representing the number of hours that one
    employee worked, and that the expected result is a list of the weekly wages earned,
    also represented with a list of numbers.
  prefs: []
  type: TYPE_NORMAL
- en: 'Since we already have a data definition for the inputs and outputs, we can
    immediately move to the second design step:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the weekly wages for the weekly hours |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*Â whrs)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Next you need some examples of inputs and the corresponding outputs. So you
    make up some short lists of numbers that represent weekly hours:'
  prefs: []
  type: TYPE_NORMAL
- en: '| given |  | expected |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ''() |  | ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  28  ''())
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  336  ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  4  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ''()))
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  48  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  24  ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: In order to compute the output, you determine the weekly wage for each number
    on the given input list. For the first example, there are no numbers on the input
    list so the output is '(). Make sure you understand why the second and third expected
    outputs are what you want.
  prefs: []
  type: TYPE_NORMAL
- en: 'Given that wage* consumes the same kind of data as several other functions
    from [Lists](#%28part._ch~3alists1%29) and given that a template depends only
    on the shape of the data definition, you can reuse this template:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*Â whrs)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â whrs)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â whrs)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (wage*Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â whrs))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: In case you want to practice the development of templates, use the questions
    from [figureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: It is now time for the most creative design step. Following the design recipe,
    we consider each [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line of the template in isolation. For the non-recursive case, ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  whrs)
    is true, meaning the input is '(). The examples from above specify the desired
    answer, '(), and so we are done.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the second case, the design questions tell us to state what each expression
    of the template computes:'
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  whrs)
    yields the first number on whrs, which is the first number of hours worked;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  whrs)
    is the rest of the given list; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (wage*  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  whrs))
    says that the rest is processed by the very function we are defining. As always,
    we use its signature and its purpose statement to figure out the result of this
    expression. The signature tells us that it is a list of numbers, and the purpose
    statement explains that this list represents the list of wages for its input,
    which is the rest of the list of hours.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The key is to rely on these facts when you formulate the expression that computes
    the result in this case, even if the function is not yet defined.Since we already
    have the list of wages for all but the first item of whrs, the function must perform
    two computations to produce the expected output for the entire whrs: compute the
    weekly wage for ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  whrs)
    and construct the list that represents all weekly wages for whrs. For the first
    part, we reuse wage. For the second, we [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    the two pieces of information together into one list:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (wageÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â whrs))Â (wage*Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â whrs)))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'And with that, the definition is complete: see [figureÂ 64](#%28counter._%28figure._fig~3awage%2A%29%29).'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the weekly wages for all given weekly hours |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*Â whrs)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â whrs)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (wageÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â whrs))Â (wage*Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â whrs)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the wage for h hours of work |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wageÂ h)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 12Â h))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 64: Computing the wages of all employees'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 161\. Translate the examples into tests and make sure they all succeed.
    Then change the function in [figureÂ 64](#%28counter._%28figure._fig~3awage%2A%29%29)
    so that everyone gets $14 per hour. Now revise the entire program so that changing
    the wage for everyone is a single change to the entire program and not several.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 162\. No employee could possibly work more than 100 hours per week.
    To protect the company against fraud, the function should check that no item of
    the input list of wage* exceeds 100\. If one of them does, the function should
    immediately signal an error. How do we have to change the function in [figureÂ 64](#%28counter._%28figure._fig~3awage%2A%29%29)
    if we want to perform this basic reality check?
  prefs: []
  type: TYPE_NORMAL
- en: Show the products of the various steps in the design recipe. If you are stuck,
    show someone how far you got according to the design recipe. The recipe isnâ€™t
    just a design tool for you to use; it is also a diagnosis system so that others
    can help you help yourself.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 163\. Design convertFC. The function converts a list of measurements
    in Fahrenheit to a list of Celsius measurements.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 164\. Design the function convert-euro, which converts a list of US$
    amounts into a list of â‚¬ amounts. Look up the current exchange rate on the web.
  prefs: []
  type: TYPE_NORMAL
- en: Generalize convert-euro to the function convert-euro*, which consumes an exchange
    rate and a list of US$ amounts and converts the latter into a list of â‚¬ amounts.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 165\. Design the function subst-robot, which consumes a list of toy
    descriptions (one-word strings) and replaces all occurrences of "robot" with "r2d2";
    all other descriptions remain the same.
  prefs: []
  type: TYPE_NORMAL
- en: Generalize subst-robot to substitute. The latter consumes two strings, called
    new and old, and a list of strings. It produces a new list of strings by substituting
    all occurrences of old with new.
  prefs: []
  type: TYPE_NORMAL
- en: 10.2Structures in Lists[ğŸ”—](#(part._sec~3asil) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Representing a work week as a number is a bad choice because the printing of
    a paycheck requires more information than hours worked per week. Also, not all
    employees earn the same amount per hour. Fortunately a list may contain items
    other than atomic values; indeed, lists may contain whatever values we want, especially
    structures.
  prefs: []
  type: TYPE_NORMAL
- en: 'Our running example calls for just such a data representation. Instead of numbers,
    we use structures that represent employees plus their work hours and pay rates:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â workÂ [employeeÂ rateÂ hours])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A (piece of) Work is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-work  [String](part_one.html#%28tech._string%29)  [Number](part_one.html#%28tech._number%29)  [Number](part_one.html#%28tech._number%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  (make-work  n  r  h) combines the name |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â with the pay rate r and the number of hours h |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'While this representation is still simplistic, it is just enough of an additional
    challenge because it forces us to formulate a data definition for lists that contain
    structures:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â Low (short for list of works) is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  Work  Low)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation an instance of Low represents the |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â hours worked for a number of employees |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Here are three elements of [Low](#%28tech._low%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Matthew"Â 12.95Â 45)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ''())) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Use the data definition to explain why these pieces of data belong to [Low](#%28tech._low%29).
  prefs: []
  type: TYPE_NORMAL
- en: Stop! Also use the data definition to generate two more examples.
  prefs: []
  type: TYPE_NORMAL
- en: When you work on real-world projects, you wonâ€™t use such suffixes; instead you
    will use a tool for managing different versions of code.
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Now that you know that the definition of [Low](#%28tech._low%29) makes sense,
    it is time to redesign the function wage* so that it consumes elements of [Low](#%28tech._low%29),
    not just lists of numbers:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Low](#%28tech._low%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the weekly wages for the given records |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The suffix â€œ.v2â€ at the end of the function name informs every reader of the
    code that this is a second, revised version of the function. In this case, the
    revision starts with a new signature and an adapted purpose statement. The header
    is the same as above.
  prefs: []
  type: TYPE_NORMAL
- en: The third step of the design recipe is to work through an example. Letâ€™s start
    with the second list above. It contains one work record, namely, (make-work  "Robby"  11.95  39).
    Its interpretation is that "Robby" worked for 39 hours and that he is paid at
    the rate of $11.95 per hour. Hence his wage for the week is $466.05, that is,
    ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  11.95  39).
    The desired result for wage*.v2 is therefore ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  466.05  '()).
    Naturally, if the input list contained two work records, we would perform this
    kind of computation twice, and the result would be a list of two numbers. Stop!
    Determine the expected result for the third data example above.
  prefs: []
  type: TYPE_NORMAL
- en: Note on Numbers Keep in mind that BSLâ€”<wbr>unlike most other programming languagesâ€”<wbr>understands
    decimal numbers just like you do, namely, as exact fractions. A language such
    as Java, for example, would produce 466.04999999999995 for the expected wage of
    the first work record. Since you cannot predict when operations on decimal numbers
    behave in this strange way, you are better off writing down such examples as
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (wage*.v2 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 11.95Â 39)Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'just to prepare yourself for other programming languages. Then again, writing
    down the example in this style also means you have really figured out how to compute
    the wage. EndFrom here we move on to the development of the template. If you use
    the template questions, you quickly get this much:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'because the data definition consists of two clauses, because it introduces
    ''() in the first clause and [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    structures in the second, and so on. But you also realize that you know even more
    about the input than this template expresses. For example, you know that ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  an-low)
    extracts a structure of three fields from the given list. This seems to suggest
    the addition of three more expressions to the template:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-employeeÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-rateÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-hoursÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'This template lists all potentially interesting data.We use a different strategy
    here. Specifically, we suggest that you create and refer to a separate function
    template whenever you are developing a template for a data definition that refers
    to other data definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (for-workÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Work](#%28tech._work%29) -> ??? |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â a template for processing elements of [Work](#%28tech._work%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (for-workÂ w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-employeeÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-rateÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (work-hoursÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Splitting the templates leads to a natural partition of work into functions
    and among functions; none of them grows too large, and all of them relate to a
    specific data definition.Finally, you are ready to program. As always you start
    with the simple-looking case, which is the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line here. If wage*.v2 is applied to ''(), you expect ''() back and that settles
    it. Next you move on to the second line and remind yourself of what these expressions
    compute:'
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  an-low)
    extracts the first work structure from the list;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: (for-work  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    says that you wish to design a function that processes work structures;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  an-low)
    extracts the rest of the given list; and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: (wage*.v2  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  an-low))
    determines the list of wages for all the work records other than the first one,
    according to the purpose statement of the function.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'If you are stuck here, use the table method from [figureÂ 54](#%28counter._%28figure._fig~3adefinition-qb%29%29).If
    you understand it all, you see that it is enough to [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    the two expressions together:'
  prefs: []
  type: TYPE_NORMAL
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (for-workÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low)))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'assuming that for-work computes the wage for the first work record. In short,
    you have finished the function by adding another entry to your wish list of functions.Since
    for-work is a name that just serves as a stand-in and since it is a bad name for
    this function, letâ€™s call the function wage.v2 and write down its complete wish-list
    entry:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Work](#%28tech._work%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the wage for the given work record w |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage.v2Â w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â 0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The design of this kind of function is extensively covered in [Fixed-Size Data](part_one.html)
    and thus doesnâ€™t need any additional explanation here. [FigureÂ 65](#%28counter._%28figure._fig~3awage..v2%29%29)
    shows the final result of developing wage.v2 and wage*.v2.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Low](#%28tech._low%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the weekly wages for all weekly work records |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (wage*.v2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (make-workÂ "Robby"Â 11.95Â 39)Â ''()))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 11.95Â 39)Â ''()))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage*.v2Â an-low)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â an-low)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â an-low)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (wage.v2Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â an-low))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (wage*.v2Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â an-low)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Work](#%28tech._work%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the wage for the given work record w |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (wage.v2Â w)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â (work-rateÂ w)Â (work-hoursÂ w)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 65: Computing the wages from work records'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 166\. The wage*.v2 function consumes a list of work records and produces
    a list of numbers. Of course, functions may also produce lists of structures.
  prefs: []
  type: TYPE_NORMAL
- en: 'Develop a data representation for paychecks. Assume that a paycheck contains
    two distinctive pieces of information: the employeeâ€™s name and an amount. Then
    design the function wage*.v3. It consumes a list of work records and computes
    a list of paychecks from it, one per record.'
  prefs: []
  type: TYPE_NORMAL
- en: In reality, a paycheck also contains an employee number. Develop a data representation
    for employee information and change the data definition for work records so that
    it uses employee information and not just a string for the employeeâ€™s name. Also
    change your data representation of paychecks so that it contains an employeeâ€™s
    name and number, too. Finally, design wage*.v4, a function that maps lists of
    revised work records to lists of revised paychecks.
  prefs: []
  type: TYPE_NORMAL
- en: Note on Iterative Refinement This exercise demonstrates the iterative refinement
    of a task. Instead of using data representations that include all relevant information,
    we started from simplistic representation of paychecks and gradually made the
    representation realistic. For this simple program, refinement is overkill; later
    we will encounter situations where iterative refinement is not just an option
    but a necessity.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 167\. Design the function sum, which consumes a list of Posns and produces
    the sum of all of its x-coordinates.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 168\. Design the function translate. It consumes and produces lists
    of [Posn](part_one.html#%28tech._posn%29)s. For each ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  x  y)
    in the former, the latter contains ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â xÂ ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â yÂ 1)).
    We borrow the word â€œtranslateâ€ from geometry, where the movement of a point by
    a constant distance along a straight line is called a translation.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 169\. Design the function legal. Like translate from [exerciseÂ 168](#%28counter._%28exercise._work2%29%29),
    the function consumes and produces a list of [Posn](part_one.html#%28tech._posn%29)s.
    The result contains all those [Posn](part_one.html#%28tech._posn%29)s whose x-coordinates
    are between 0 and 100 and whose y-coordinates are between 0 and 200\.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 170\. Here is one way to represent a phone number:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â phoneÂ [areaÂ switchÂ four])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Phone is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-phone  [Three](#%28tech._three%29)  [Three](#%28tech._three%29)  [Four](#%28tech._four%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Three is a [Number](part_one.html#%28tech._number%29) between 100 and
    999. |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Four is a [Number](part_one.html#%28tech._number%29) between 1000 and
    9999. |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Design the function replace. It consumes and produces a list of [Phone](#%28tech._phone%29)s.
    It replaces all occurrence of area code 713 with 281.
  prefs: []
  type: TYPE_NORMAL
- en: 10.3Lists in Lists, Files[ğŸ”—](#(part._sec~3alis-lis) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[Functions and Programs](part_one.html#%28part._ch~3afuncs-progs%29) introduces
    [read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29),
    a function for readingAdd ([require](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._require%29%29)  2htdp/batch-io)
    to your definitions area. an entire text file as a string. In other words, the
    creator of [read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)
    chose to represent text files as strings, and the function creates the data representation
    for specific files (specified by a name). Text files arenâ€™t plain long texts or
    strings, however. They are organized into lines and words, rows and cells, and
    many other ways. In short, representing the content of a file as a plain string
    might work on rare occasions but is usually a bad choice.'
  prefs: []
  type: TYPE_NORMAL
- en: ttt.txt
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â TTT |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Put up in a place |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â where it''s easy to see |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â the cryptic admonishment |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â T.T.T. |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â When you feel how depressingly |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â slowly you climb, |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â it''s well to remember that |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Things Take Time. |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Piet Hein |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 66: Things take time'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: For concreteness, take a look at the sample file in [figureÂ 66](#%28counter._%28figure._fig~3attt..txt%29%29).
    It contains a poem by Piet Hein, and it consists of many lines and words. When
    you use the program
  prefs: []
  type: TYPE_NORMAL
- en: ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â "ttt.txt")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: to turn this file into a BSL string, you get this:The dots arenâ€™t really a part
    of the result, as you probably guessed.
  prefs: []
  type: TYPE_NORMAL
- en: '"TTT\n \nPut up in a place\nwhere ...."'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'where the "\n" inside the string indicates line breaks.While it is indeed possible
    to break apart this string with primitive operations on strings, for example,
    [explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29),
    most programming languagesâ€”<wbr>including BSLâ€”<wbr>support many different representations
    of files and functions that create such representations from existing files:'
  prefs: []
  type: TYPE_NORMAL
- en: 'One way to represent this file is as a list of lines, where each line is represented
    as one string:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "TTT"
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ""
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Put
    up in a place" |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ''())))) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Here the second item of the list is the empty string because the file contains
    an empty line.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Another way is to use a list of words, again each word represented as a string:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "TTT"
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Put"
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "up"
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "in"
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ''()))))) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Note how the empty second line disappears with this representation. After all,
    there are no words on the empty line.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'And a third representation relies on lists of lists of words:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "TTT"Â ''())
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ''()
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "Put"
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "up"
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ''())))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ''())))) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: This representation has an advantage over the second one in that it preserves
    the organization of the file, including the emptiness of the second line. The
    price is that all of a sudden lists contain lists.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: While the idea of list-containing lists may sound frightening at first, you
    need not worry. The design recipe helps even with such complications.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [String](part_one.html#%28tech._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces the content of file f as a string |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-string](#%28tech._list._of._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces the content of file f as a list of strings, |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â one per line |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-string](#%28tech._list._of._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces the content of file f as a list of strings, |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â one per word |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-words](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-list-of-string](#%28tech._list._of._list._of._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces the content of file f as a list of list of |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â strings, one list per line and one string per word |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)Â f)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â The above functions consume the name of a file as a [String](part_one.html#%28tech._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â argument. If the specified file does not exist in the |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â same folder as the program, they signal an error. |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 67: Reading files'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Before we get started, take a look at [figureÂ 67](#%28counter._%28figure._fig~3aread%29%29).
    It introduces a number of useful file reading functions. They are not comprehensive:
    there are many other ways of dealing with text from files, and you will need to
    know a lot more to deal with all possible text files. For our purposes hereâ€”<wbr>teaching
    and learning the principles of systematic program designâ€”<wbr>they suffice, and
    they empower you to design reasonably interesting programs.'
  prefs: []
  type: TYPE_NORMAL
- en: '[FigureÂ 67](#%28counter._%28figure._fig~3aread%29%29) uses the names of two
    data definitions that do not exist yet, including one involving list-containing
    lists. As always, we start with a data definition, but this time we leave this
    task to you. Hence, before you read on, solve the following exercises. The solutions
    are needed to make complete sense out of the figure, and without working through
    the solutions, you cannot really understand the rest of this section.'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 171\. You know what the data definition for [List-of-strings](#%28tech._list._of._string%29)
    looks like. Spell it out. Make sure that you can represent Piet Heinâ€™s poem as
    an instance of the definition where each line is represented as a string and another
    instance where each word is a string. Use [read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)
    and [read-words](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%29%29)
    to confirm your representation choices.
  prefs: []
  type: TYPE_NORMAL
- en: Next develop the data definition for List-of-list-of-strings. Again, represent
    Piet Heinâ€™s poem as an instance of the definition where each line is represented
    as a list of strings, one per word, and the entire poem is a list of such line
    representations. You may use [read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)
    to confirm your choice.
  prefs: []
  type: TYPE_NORMAL
- en: As you probably know, operating systems come with programs that measure files.
    One counts the number of lines, another determines how many words appear per line.
    Let us start with the latter to illustrate how the design recipe helps with the
    design of complex functions.
  prefs: []
  type: TYPE_NORMAL
- en: 'The first step is to ensure that we have all the necessary data definitions.
    If you solved the above exercise, you have a data definition for all possible
    inputs of the desired function, and the preceding section defines [List-of-numbers](#%28tech._list._of._number%29),
    which describes all possible outputs. To keep things short, we use [LN](#%28tech._ln%29)
    to refer to the class of lists of lists of strings, and use it to write down the
    header material for the desired function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [LN](#%28tech._ln%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â determines the number of words on each line |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words-on-lineÂ lls)Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'We name the functions words-on-line because it is appropriate and captures
    the purpose statement in one phrase.What is really needed, though, is a set of
    data examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "world"Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line1Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â lls0Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â lls1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line1Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The first two definitions introduce two examples of lines: one contains two
    words, the other contains none. The last two definitions show how to construct
    instances of [LN](#%28tech._ln%29) from these line examples. Determine what the
    expected result is when the function is given these two examples.'
  prefs: []
  type: TYPE_NORMAL
- en: Once you have data examples, it is easy to formulate functional examples; just
    imagine applying the function to each of the data examples. When you apply words-on-line
    to lls0, you should get the empty list back because there are no lines. When you
    apply words-on-line to lls1, you should get a list of two numbers back because
    there are two lines. The two numbers are 2 and 0, respectively, given that the
    two lines in lls1 contain two and no words each.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is how you translate all this into test cases:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ lls0)Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ lls1)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'By doing it at the end of the second step, you have a complete program, though
    running it just fails some of the test cases.The development of the template is
    the interesting step for this sample problem. By answering the template questions
    from [figureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29), you get the
    usual list-processing template immediately:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words-on-lineÂ lls)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â lls)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  lls)Â ;Â a
    list of strings |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (words-on-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â lls))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As in the preceding section, we know that the expression ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  lls)
    extracts a [List-of-strings](#%28tech._list._of._string%29), which has a complex
    organization, too. The temptation is to insert a nested template to express this
    knowledge, but as you should recall, the better idea is to develop a second auxiliary
    template and to change the first line in the second condition so that it refers
    to this auxiliary template.Since this auxiliary template is for a function that
    consumes a list, the template looks nearly identical to the previous one:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (line-processorÂ ln)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ln)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln)Â ;Â a
    string |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (line-processorÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ln))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The important differences are that ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln)
    extracts a string from the list, and we consider strings as atomic values. With
    this template in hand, we can change the first line of the second case in words-on-line
    to
  prefs: []
  type: TYPE_NORMAL
- en: '[...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (line-processorÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â lls))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'which reminds us for the fifth step that the definition for words-on-line may
    demand the design of an auxiliary function.Now it is time to program. As always,
    we use the questions from [figureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29)
    to guide this step. The first case, concerning empty lists of lines, is the easy
    case. Our examples tell us that the answer in this case is ''(), that is, the
    empty list of numbers. The second case, concerning [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29),
    contains several expressions, and we start with a reminder of what they compute:'
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln)
    extracts the first line from the non-empty list of (represented) lines;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (line-processor  ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ln))
    suggests that we may wish to design an auxiliary function to process this line;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ln)
    is the rest of the list of line; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (words-on-line  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ln))
    computes a list of words per line for the rest of the list. How do we know this?
    We promised just that with the signature and the purpose statement for words-on-line.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Assuming we can design an auxiliary function that consumes a line and counts
    the words on one lineâ€”<wbr>letâ€™s call it words#â€”<wbr>it is easy to complete the
    second condition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (words#Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ln))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â (words-on-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ln)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'This expression [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)es
    the number of words on the first line of ln onto a list of numbers that represents
    the number of words on the remainder of the lines of ln.It remains to design the
    words# function. Its template is dubbed line-processor and its purpose is to count
    the number of words on a line, which is just a list of strings. So here is the
    wish-list entry:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â counts the number of words on los |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words#Â los)Â 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: At this point, you may recall the example used to illustrate the design recipe
    for self-referential data in [Designing with Self-Referential Data Definitions](#%28part._ch~3adesign-lists%29).
    The function is called how-many, and it too counts the number of strings on a
    list of strings. Even though the input for how-many is supposed to represent a
    list of names, this difference simply doesnâ€™t matter; as long as it correctly
    counts the number of strings on a list of strings, how-many solves our problem.Since
    it is good to reuse existing functions, you may define words# as
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words#Â los)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (how-manyÂ los)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: In reality, however, programming languages come with functions that solve such
    problems already. BSL calls this function [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29),
    and it counts the number of values on any list of values, no matter what the values
    are.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An LN is one of: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Los](part_three.html#%28tech._sim-dd._lo%29)  [LN](#%28tech._ln%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation a list of lines, each is a list of [String](part_one.html#%28tech._string%29)s
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "hello"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "world"Â ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â line1Â ''())
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ln0Â ''())
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ln1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line0Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â line1Â ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [LN](#%28tech._ln%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â determines the number of words on each line |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ ln0)Â ''())
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (words-on-lineÂ ln1)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 0Â ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words-on-lineÂ ln)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ln)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â ln))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (words-on-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ln)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 68: Counting the words on a line'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: You may wish to look over the list of functions that come with BSL. Some may
    look obscure but may become useful in one of the upcoming problems. Using such
    functions saves your time, not ours.
  prefs: []
  type: TYPE_NORMAL
- en: '[FigureÂ 68](#%28counter._%28figure._fig~3awords-on-line%29%29) summarizes the
    full design for our sample problem. The figure includes two test cases. Also,
    instead of using the separate function words#, the definition of words-on-line
    simply calls the [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)
    function that comes with BSL. Experiment with the definition in DrRacket and make
    sure that the two test cases cover the entire function definition.'
  prefs: []
  type: TYPE_NORMAL
- en: 'With one small step, you can now design your first file utility:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â counts the words on each line in the given file |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (file-statisticÂ file-name)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (words-on-line |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)Â file-name)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: It merely composes a teachpack function with words-on-line. The former reads
    a file as a [List-of-list-of-strings](#%28tech._list._of._list._of._string%29)
    and hands this value to the latter.
  prefs: []
  type: TYPE_NORMAL
- en: This idea of composing a built-in function with a newly designed function is
    common. Naturally, people donâ€™t design functions randomly and expect to find something
    in the chosen programming language to complement their design. Instead, program
    designers plan ahead and design the function to the output that available functions
    deliver. More generally still and as mentioned above, it is common to think about
    a solution as a composition of two computations and to develop an appropriate
    data collection with which to communicate the result of one computation to the
    second one, where each computation is implemented with a function.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [1String](part_one.html#%28tech._1string%29) -> [String](part_one.html#%28tech._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â converts the given [1String](part_one.html#%28tech._1string%29) to a 3-letter
    numeric [String](part_one.html#%28tech._string%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (encode-letterÂ "z")Â (code1Â "z"))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (encode-letterÂ "\t")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "00"Â (code1Â "\t")))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (encode-letterÂ "a")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "0"Â (code1Â "a")))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (encode-letterÂ s)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â s)Â 100)Â (code1Â s)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â s)Â 10)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "00"Â (code1Â s))]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â s)Â 100)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "0"Â (code1Â s))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [1String](part_one.html#%28tech._1string%29) -> [String](part_one.html#%28tech._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â converts the given [1String](part_one.html#%28tech._1string%29) into a
    [String](part_one.html#%28tech._string%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (code1Â "z")Â "122")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (code1Â c)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([number->string](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number-~3estring%29%29)Â ([string->int](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3eint%29%29)Â c)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 69: Encoding strings'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 172\. Design the function collapse, which converts a list of lines
    into a string. The strings should be separated by blank spaces (" "). The lines
    should be separated with a newline ("\n").
  prefs: []
  type: TYPE_NORMAL
- en: 'Challenge When you are finished, use the program like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)Â "ttt.dat"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (collapseÂ ([read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)Â "ttt.txt")))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: To make sure the two files "ttt.dat" and "ttt.txt" are identical, remove all
    extraneous white spaces in your version of the T.T.T. poem.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 173\. Design a program that removes all articles from a text file.
    The program consumes the name n of a file, reads the file, removes the articles,
    and writes the result out to a file whose name is the result of concatenating
    "no-articles-" with n. For this exercise, an article is one of the following three
    words: "a", "an", and "the".'
  prefs: []
  type: TYPE_NORMAL
- en: Use [read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)
    so that the transformation retains the organization of the original text into
    lines and words. When the program is designed, run it on the Piet Hein poem.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 174\. Design a program that encodes text files numerically. Each letter
    in a word should be encoded as a numeric three-letter string with a value between
    0 and 256\. [FigureÂ 69](#%28counter._%28figure._fig~3aex~3aencode%29%29) shows
    our encoding function for single letters. Before you start, explain these functions.
  prefs: []
  type: TYPE_NORMAL
- en: Hints (1) Use [read-words/line](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-words%2Fline%29%29)
    to preserve the organization of the file into lines and words. (2) Read up on
    [explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29)
    again.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 175\. Design a BSL program that simulates the UnixUnix is an old operating
    system, which is emulated by Linux, macOS, and to some extent modern Windows.
    command wc. The purpose of the command is to count the number of [1String](part_one.html#%28tech._1string%29)s,
    words, and lines in a given file. That is, the command consumes the name of a
    file and produces a value that consists of three numbers. (Why might your computerâ€™s
    wc give a slightly different result from your code?)
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Matrix](#%28tech._matrix%29) -> [Matrix](#%28tech._matrix%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â transposes the given matrix along the diagonal |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â wor1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 11Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 21Â ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â wor2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 12Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 22Â ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â tam1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â wor1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â wor2Â ''())))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (transposeÂ mat1)Â tam1)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (transposeÂ lln)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â lln))Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â (first*Â lln)Â (transposeÂ (rest*Â lln)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 70: Transpose a matrix'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'ExerciseÂ 176\. Mathematics teachers may have introduced you to matrix calculations
    by now. In principle, matrix just means rectangle of numbers. Here is one possible
    data representation for matrices:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Matrix is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Row](#%28tech._row%29)  ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Row](#%28tech._row%29)  [Matrix](#%28tech._matrix%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â constraint all rows in matrix are of the same length |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Row is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â   â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â   â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Number](part_one.html#%28tech._number%29)  [Row](#%28tech._row%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Note the constraints on matrices. Study the data definition and translate the
    two-by-two matrix consisting of the numbers 11, 12, 21, and 22 into this data
    representation. Stop, donâ€™t read on until you have figured out the data examples.Here
    is the solution for the five-second puzzle:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â row1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 11Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 12Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â row2Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 21Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 22Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â mat1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â row1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â row2Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: If you didnâ€™t create it yourself, study it now.
  prefs: []
  type: TYPE_NORMAL
- en: The function in [figureÂ 70](#%28counter._%28figure._fig~3aex~3atranspose%29%29)
    implements the important mathematical operation of transposing the entries in
    a matrix. To transpose means to mirror the entries along the diagonal, that is,
    the line from the top-left to the bottom-right.
  prefs: []
  type: TYPE_NORMAL
- en: Stop! Transpose mat1 by hand, then read [figureÂ 70](#%28counter._%28figure._fig~3aex~3atranspose%29%29).
    Why does transpose ask ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)  ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  lln))?
  prefs: []
  type: TYPE_NORMAL
- en: 'The definition assumes two auxiliary functions:'
  prefs: []
  type: TYPE_NORMAL
- en: first*, which consumes a matrix and produces the first column as a list of numbers;
    and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: rest*, which consumes a matrix and removes the first column. The result is a
    matrix.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Even though you lack definitions for these functions, you should be able to
    understand how transpose works. You should also understand that you cannot design
    this function with the design recipes you have seen so far. Explain why.
  prefs: []
  type: TYPE_NORMAL
- en: Design the two wish-list functions. Then complete the design of transpose with
    some test cases.
  prefs: []
  type: TYPE_NORMAL
- en: 10.4A Graphical Editor, Revisited[ğŸ”—](#(part._list-edit2._sec~3aedit2) "Link
    to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[A Graphical Editor](part_one.html#%28part._sec~3aedit1%29) is about the design
    of an interactive graphical one-line editor. It suggests two different ways to
    represent the state of the editor and urges you to explore both: a structure that
    contains a pair of strings or a structure that combines a string with an index
    to a current position (see [exerciseÂ 87](part_one.html#%28counter._%28exercise._struct-edit4%29%29)).'
  prefs: []
  type: TYPE_NORMAL
- en: 'A third alternative is to use structures that combine two lists of [1String](part_one.html#%28tech._1string%29)s:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â editorÂ [preÂ post])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An Editor is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-editor  [Lo1S](#%28tech._list-edit2._lo1%29)  [Lo1S](#%28tech._list-edit2._lo1%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An Lo1S is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [1String](part_one.html#%28tech._1string%29)  [Lo1S](#%28tech._list-edit2._lo1%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Before you wonder why, letâ€™s make up two data examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â good
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "g"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "d"Â ''())))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â all
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â lla
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "l"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â data example 1: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (make-editorÂ allÂ good) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â data example 2: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (make-editorÂ llaÂ good) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The two examples demonstrate how important it is to write down an interpretation.
    While the two fields of an editor clearly represent the letters to the left and
    right of the cursor, the two examples demonstrate that there are at least two
    ways to interpret the structure types:'
  prefs: []
  type: TYPE_NORMAL
- en: (make-editor  pre  post) could mean the letters in pre precede the cursor and
    those in post succeed it and that the combined text is
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â pre)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â post))
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: Recall that [implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)
    turns a list of [1String](part_one.html#%28tech._1string%29)s into a [String](part_one.html#%28tech._string%29).
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '(make-editor  pre  post) could equally well mean that the letters in pre precede
    the cursor in reverse order. If so, we obtain the text in the displayed editor
    like this:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â (revÂ pre))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â post))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: The function rev must consume a list of [1String](part_one.html#%28tech._1string%29)s
    and reverse it.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Even without a complete definition for rev, you can imagine how it works. Use
    this understanding to make sure you understand that translating the first data
    example into information according to the first interpretation and treating the
    second data example according to the second interpretation yields the same editor
    display:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/46a6dc94bf699eacf19c45329bc5ae3b.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: Both interpretations are fine choices, but it turns out that using the second
    one greatly simplifies the design of the program. The rest of this section demonstrates
    this point, illustrating the use of lists inside of structures at the same time.
    To appreciate the lesson properly, you should have solved the exercises in [A
    Graphical Editor](part_one.html#%28part._sec~3aedit1%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'Letâ€™s start with rev because we clearly need this function to make sense out
    of the data definition. Its header material is straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Lo1s](#%28tech._list-edit2._lo1%29) -> [Lo1s](#%28tech._list-edit2._lo1%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces a reverse version of the given list |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (revÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (revÂ l)Â l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'For good measure, we have added one â€œobviousâ€ example as a test case. You may
    want to add some extra examples just to make sure you understand what is needed.The
    template for rev is the usual list template:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (revÂ l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (revÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'There are two cases, and the second case comes with several selector expressions
    and a self-referential one.Filling in the template is easy for the first clause:
    the reverse version of the empty list is the empty list. For the second clause,
    we once again use the coding questions:'
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  l)
    is the first item on the list of [1String](part_one.html#%28tech._1string%29)s;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l)
    is the rest of the list; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (rev  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l))
    is the reverse of the rest of the list.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Stop! Try to finish the design of rev with these hints.
  prefs: []
  type: TYPE_NORMAL
- en: '| l |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â l) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â l) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (rev &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | (rev  l) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ''()) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | "a" |  | ''() |  | ''() |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ''()) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | "a" |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ''())) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ''())) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â ''()))) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 71: Tabulating for rev'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'If these hints leave you stuck, remember to create a table from the examples.
    [FigureÂ 71](#%28counter._list-edit2._%28figure._fig~3afk-for-rev%29%29) shows
    the table for two examples: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ''())
    and ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "c"  ''()))).
    The second example is particularly illustrative. A look at the next to last column
    shows that (rev  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l))
    accomplishes most of the work by producing ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "c"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ''())).
    Since the desired result is ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "c"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ''()))),
    rev must somehow add "a" to the end of the result of the recursion. Indeed, because
    (rev  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l))
    is always the reverse of the rest of the list, it clearly suffices to add ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  l)
    to its end. While we donâ€™t have a function that adds items to the end of a list,
    we can wish for it and use it to complete the function definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (revÂ l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (add-at-endÂ (revÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Here is the extended wish-list entry for add-at-end:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Lo1s](#%28tech._list-edit2._lo1%29)  [1String](part_one.html#%28tech._1string%29)
    -> [Lo1s](#%28tech._list-edit2._lo1%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates a new list by adding s to the end of l |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (add-at-endÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ''()))Â "a")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "c"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "b"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "a"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-at-endÂ lÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â l) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'It is â€œextendedâ€ because it comes with an example formulated as a test case.
    The example is derived from the example for rev, and indeed, it is precisely the
    example that motivates the wish-list entry. Make up an example where add-at-end
    consumes an empty list before you read on.Since add-at-end is also a list-processing
    function, the template is just a renaming of the one you know so well now:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-at-endÂ lÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (add-at-endÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: To complete it into a function definition, we proceed according to the recipe
    questions for step 5\. Our first question is to formulate an answer for the â€œbasicâ€
    case, that is, the first case here. If you worked through the suggested exercise,
    you know that the result of
  prefs: []
  type: TYPE_NORMAL
- en: (add-at-endÂ '()Â s)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'is always ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  s  ''()).
    After all, the result must be a list and the list must contain the given 1String.The
    next two questions concern the â€œcomplexâ€ or â€œself-referentialâ€ case. We know what
    the expressions in the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line compute: the first expression extracts the first [1String](part_one.html#%28tech._1string%29)
    from the given list and the second expression â€œcreates a new list by adding s
    to the end of ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  l).â€
    That is, the purpose statement dictates what the function must produce here. From
    here, it is clear that the function must add ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  l)
    back to the result of the recursion:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-at-endÂ lÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â sÂ ''())]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â (add-at-endÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)Â s))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Run the tests-as-examples to reassure yourself that this function works and
    that therefore rev works, too. Of course, you shouldnâ€™t be surprised to find out
    that BSL already provides a function that reverses any given list, including lists
    of [1String](part_one.html#%28tech._1string%29)s. And naturally, it is called
    [reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 177\. Design the function create-editor. The function consumes two
    strings and produces an [Editor](#%28tech._list-edit2._editor%29). The first string
    is the text to the left of the cursor and the second string is the text to the
    right of the cursor. The rest of the section relies on this function.
  prefs: []
  type: TYPE_NORMAL
- en: 'At this point, you should have a complete understanding of our data representation
    for the graphical one-line editor. Following the design strategy for interactive
    programs from [Designing World Programs](part_one.html#%28part._.D.K._sec~3adesign-world%29),
    you should define physical constantsâ€”<wbr>the width and height of the editor,
    for exampleâ€”<wbr>and graphical constantsâ€”<wbr>for example, the cursor. Here are
    ours:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ 20)Â ;Â the
    height of the editor |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 200)Â ;Â its
    width |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â FONT-SIZEÂ 16)Â ;Â the
    font size |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â FONT-COLORÂ "black")Â ;Â the
    font color |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MTÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHT))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â CURSORÂ ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â 1Â HEIGHTÂ "solid"Â "red"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The important point, however, is to write down the wish list for your event
    handler(s) and your function that draws the state of the editor. Recall that the
    2htdp/universe teachpack dictates the header material for these functions :'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders an editor as an image of the two texts |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â separated by the cursor |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ e)Â MT)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [Editor](#%28tech._list-edit2._editor%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â deals with a key event, given some editor |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-khÂ edÂ ke)Â ed)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In addition, [Designing World Programs](part_one.html#%28part._.D.K._sec~3adesign-world%29)
    demands that you write down a main function for your program:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â main : [String](part_one.html#%28tech._string%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â launches the editor given some initial string |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â (create-editorÂ sÂ "")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â editor-kh]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â editor-render]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Reread [exerciseÂ 177](#%28counter._list-edit2._%28exercise._create-editor%29%29)
    to determine the initial editor for this program.While it does not matter which
    wish you tackle next, we choose to design editor-kh first and editor-render second.
    Since we have the header material, letâ€™s explain the functioning of the key-event
    handler with two examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (editor-khÂ (create-editorÂ ""Â "")Â "e")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (create-editorÂ "e"Â "")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (editor-khÂ (create-editorÂ "cd"Â "fgh")Â "e") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (create-editorÂ "cde"Â "fgh")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Both of these examples demonstrate what happens when you press the letter â€œeâ€
    on your keyboard. The computer runs the function editor-kh on the current state
    of the editor and "e". In the first example, the editor is empty, which means
    that the result is an editor with just the letter "e" in it followed by the cursor.
    In the second example, the cursor is between the strings "cd" and "fgh", and therefore
    the result is an editor with the cursor between "cde" and "fgh". In short, the
    function always inserts any normal letter at the cursor position.
  prefs: []
  type: TYPE_NORMAL
- en: Before you read on, you should make up examples that illustrate how editor-kh
    works when you press the backspace ("\b") key to delete some letter, the "left"
    and "right" arrow keys to move the cursor, or some other arrow keys. In all cases,
    consider what should happen when the editor is empty, when the cursor is at the
    left end or right end of the non-empty string in the editor, and when it is in
    the middle. Even though you are not working with intervals here, it is still a
    good idea to develop examples for the â€œextremeâ€ cases.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once you have test cases, it is time to develop the template. In the case of
    editor-kh you are working with a function that consumes two complex forms of data:
    one is a structure containing lists, the other one is a large enumeration of strings.
    Generally speaking, this design case calls for an improved design recipe; but
    in cases like these, it is also clear that you should deal with one of the inputs
    first, namely, the keystroke.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Having said that, the template is just a large [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression for checking which [KeyEvent](part_one.html#%28tech._keyevent%29) the
    function received:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-khÂ edÂ k)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "left")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "right")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\b")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\t")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\r")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â k)Â 1)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression doesnâ€™t quite match the data definition for [KeyEvent](part_one.html#%28tech._keyevent%29)
    because some [KeyEvent](part_one.html#%28tech._keyevent%29)s need special attention
    ("left", "\b", and so on), some need to be ignored because they are special ("\t"
    and "\r"), and some should be classified into one large group (ordinary keys).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 178\. Explain why the template for editor-kh deals with "\t" and "\r"
    before it checks for strings of length 1.
  prefs: []
  type: TYPE_NORMAL
- en: 'For the fifth stepâ€”<wbr>the definition of the functionâ€”<wbr>we tackle each
    clause in the conditional separately. The first clause demands a result that moves
    the cursor and leaves the string content of the editor alone. So does the second
    clause. The third clause, however, demands the deletion of a letter from the editorâ€™s
    contentâ€”<wbr>if there is a letter. Last, the sixth [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause concerns the addition of letters at the cursor position. Following the
    first basic guideline, we make extensive use of a wish-list and imagine one function
    per task:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-khÂ edÂ k)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "left")Â (editor-lftÂ ed)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "right")Â (editor-rgtÂ ed)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\b")Â (editor-delÂ ed)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\t")Â ed]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)Â kÂ "\r")Â ed]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â k)Â 1)Â (editor-insÂ edÂ k)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ed]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As you can tell from the definition of editor-kh, three of the four wish-list
    functions have the same signature:'
  prefs: []
  type: TYPE_NORMAL
- en: ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The last one takes two arguments instead of one:'
  prefs: []
  type: TYPE_NORMAL
- en: ;Â [Editor](#%28tech._list-edit2._editor%29)  [1String](part_one.html#%28tech._1string%29)
    -> [Editor](#%28tech._list-edit2._editor%29)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'We leave the proper formulation of wishes for the first three functions to
    you and focus on the fourth one.Letâ€™s start with a purpose statement and a function
    header:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â insert the [1String](part_one.html#%28tech._1string%29)  k between pre
    and post |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-insÂ edÂ k)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ed) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The purpose is straight out of the problem statement. For the construction
    of a function header, we need an instance of [Editor](#%28tech._list-edit2._editor%29).
    Since pre and post are the pieces of the current one, we just put them back together.Next
    we derive examples for editor-ins from those for editor-kh:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (editor-insÂ (make-editorÂ ''()Â ''())Â "e") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "e"Â ''())Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (editor-ins |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "d"Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "f"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "g"Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â "e") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "e"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "d"Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "f"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "g"Â ''()))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'You should work through these examples using the interpretation of [Editor](#%28tech._list-edit2._editor%29).
    That is, make sure you understand what the given editor means in terms of information
    and what the function call is supposed to achieve in those terms. In this particular
    case, it is best to draw the visual representation of the editor because it represents
    the information well.The fourth step demands the development of the template.
    The first argument is guaranteed to be a structure, and the second one is a string,
    an atomic piece of data. In other words, the template just pulls out the pieces
    from the given editor representation:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-insÂ edÂ k)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â edÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â kÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-preÂ ed)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-postÂ ed)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Remember a template lists parameters because they are available, too.From the
    template and the examples, it is relatively easy to conclude that editor-ins is
    supposed to create an editor from the given editorâ€™s pre and post fields with
    k added to the front of the former:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-insÂ edÂ k)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-editorÂ ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â kÂ (editor-preÂ ed))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (editor-postÂ ed))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Even though both (editor-pre  ed) and (editor-post  ed) are lists of [1String](part_one.html#%28tech._1string%29)s,
    there is no need to design auxiliary functions. To get the desired result, it
    suffices to use [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29),
    which creates lists.
  prefs: []
  type: TYPE_NORMAL
- en: At this point, you should do two things. First, run the tests for this function.
    Second, use the interpretation of Editor and explain abstractly why this function
    performs the insertion. And as if this isnâ€™t enough, you may wish to compare this
    simple definition with the one from [exerciseÂ 84](part_one.html#%28counter._%28exercise._struct-edit1%29%29)
    and figure out why the other one needs an auxiliary function while our definition
    here doesnâ€™t.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 179\. Design the functions
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â moves the cursor position one [1String](part_one.html#%28tech._1string%29)
    left, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if possible |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-lftÂ ed)Â ed)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â moves the cursor position one [1String](part_one.html#%28tech._1string%29)
    right, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if possible |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-rgtÂ ed)Â ed)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Editor](#%28tech._list-edit2._editor%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â deletes a [1String](part_one.html#%28tech._1string%29) to the left of the
    cursor, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if possible |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-delÂ ed)Â ed)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Again, it is critical that you work through a good range of examples.Designing
    the rendering function for [Editor](#%28tech._list-edit2._editor%29)s poses some
    new but small challenges. The first one is to develop a sufficiently large number
    of test cases. On the one hand, it demands coverage of the possible combinations:
    an empty string to the left of the cursor, an empty one on the right, and both
    strings empty. On the other hand, it also requires some experimenting with the
    functions that the 2htdp/image teachpack teachpack provides. Specifically, it
    needs a way to compose the two pieces of strings rendered as text images, and
    it needs a way of placing the text image into the empty image frame (MT). Here
    is what we do to create an image for the result of (create-editor  "pre"  "post"):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([place-image/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%2Falign%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "pre"Â FONT-SIZEÂ FONT-COLOR)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â CURSOR |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "post"Â FONT-SIZEÂ FONT-COLOR))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â 1Â 1 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â "left"Â "top" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â MT) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'If you compare this with the editor image above, you notice some differences,
    which is fine because the exact layout isnâ€™t essential to the purpose of this
    exercise, and because the revised layout doesnâ€™t trivialize the problem. In any
    case, do experiment in the interactions area of DrRacket to find your favorite
    editor display.You are now ready to develop the template, and you should come
    up with this much:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ e)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-preÂ e)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-postÂ e)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The given argument is just a structure type with two fields. Their values,
    however, are lists of [1String](part_one.html#%28tech._1string%29)s, and you might
    be tempted to refine the template even more. Donâ€™t! Instead, keep in mind that
    when one data definition refers to another complex data definition, you are better
    off using the wish list.If you have worked through a sufficient number of examples,
    you also know what you want on your wish list: one function that turns a string
    into a text of the right size and color. Letâ€™s call this function editor-text.
    Then the definition of editor-render just uses editor-text twice and then composes
    the result with [beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)
    and [place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Editor](#%28tech._list-edit2._editor%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ e)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([place-image/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%2Falign%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â (editor-textÂ (editor-preÂ e))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â CURSOR |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (editor-textÂ (editor-postÂ e))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â 1Â 1 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â "left"Â "top" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â MT)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Although this definition nests expressions three levels deep, the use of the
    imaginary editor-text function renders it quite readable.What remains is to design
    editor-text. From the design of editor-render, we know that editor-text consumes
    a list of [1String](part_one.html#%28tech._1string%29)s and produces a text image:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Lo1s](#%28tech._list-edit2._lo1%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders a list of [1String](part_one.html#%28tech._1string%29)s as a text
    image |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ""Â FONT-SIZEÂ FONT-COLOR))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: This dummy definition produces an empty text image.To demonstrate what editor-text
    is supposed to compute, we work through an example. The example input is
  prefs: []
  type: TYPE_NORMAL
- en: (create-editorÂ "pre"Â "post")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: which was also used to explain editor-render and is equivalent to
  prefs: []
  type: TYPE_NORMAL
- en: '| (make-editor |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "e"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "r"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "s"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "t"Â ''())))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'We pick the second list as our sample input for editor-text, and we know the
    expected result from the example for editor-render:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (editor-text |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "s"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "t"Â ''())))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "post"Â FONT-SIZEÂ FONT-COLOR))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'You may wish to make up a second example before reading on.Given that editor-text
    consumes a list of [1String](part_one.html#%28tech._1string%29)s, we can write
    down the template without much ado:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (editor-textÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â s))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: After all, the template is dictated by the data definition that describes the
    function input. But you donâ€™t need the template if you understand and keep in
    mind the interpretation for [Editor](#%28tech._list-edit2._editor%29). It uses
    [explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29)
    to turn a string into a list of [1String](part_one.html#%28tech._1string%29)s.
    Naturally, there is a function [implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)
    that performs the inverse computation, that is,
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "p"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "o"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "s"Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â "t"Â ''())))))
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| "post" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Using this function, the definition of editor-text is just a small step from
    the example to the function body:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-textÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29)Â s)Â FONT-SIZEÂ FONT-COLOR))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ExerciseÂ 180\. Design editor-text without using [implode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._implode%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'The true surprise comes when you test the two functions. While our test for
    editor-text succeeds, the test for editor-render fails. An inspection of the failure
    shows that the string to the left of the cursorâ€”<wbr> "pre"â€”<wbr>is typeset backward.
    We forgot that this part of the editorâ€™s state is represented in reverse. Fortunately,
    the unit tests for the two functions pinpoint which function is wrong and even
    tell us what is wrong with the function and suggest how to fix the problem:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (editor-renderÂ ed)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([place-image/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%2Falign%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â (editor-textÂ ([reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29)Â (editor-preÂ ed)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â CURSOR |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (editor-textÂ (editor-postÂ ed))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â 1Â 1 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â "left"Â "top" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â MT)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: This definition uses the [reverse](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._reverse%29%29)
    function on the pre field of ed.
  prefs: []
  type: TYPE_NORMAL
- en: Note Modern applications allow users to position the cursor with the mouse (or
    other gesture-based devices). While it is in principle possible to add this capability
    to your editor, we wait with doing so until [A Graphical Editor, with Mouse](part_six.html#%28part._accu-edit._sec~3aedit3%29).
  prefs: []
  type: TYPE_NORMAL
- en: 11Design by Composition[ğŸ”—](#(part._ch~3alist-sort) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: By now you know that programs are complex products and that their production
    requires the design of many collaborating functions. This collaboration works
    well if the designer knows when to design several functions and how to compose
    these functions into one program.
  prefs: []
  type: TYPE_NORMAL
- en: You have encountered this need to design interrelated functions several times.
    Sometimes a problem statement implies several different tasks, and each task is
    best realized with a function. At other times, a data definition may refer to
    another one, and in that case, a function processing the former kind of data relies
    on a function processing the latter.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we present several scenarios that call for the design of programs
    that compose many functions. To support this kind of design, the chapter presents
    some informal guidelines on divvying up functions and composing them. Since these
    examples demand complex forms of lists, however, this chapter starts with a section
    on concise list notation.
  prefs: []
  type: TYPE_NORMAL
- en: 11.1The [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    Function[ğŸ”—](#(part._sec~3aabbrev) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: At this point, you should have tired of writing so many [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)es
    just to create a list, especially for lists that contain a bunch of values. Fortunately,
    we have an additional teaching language for you thatYou have graduated from BSL.
    It is time to use the â€œLanguageâ€ menu and to select â€œBeginning Student with List
    Abbreviationsâ€ for your studies. provides mechanisms for simplifying this part
    of a programmerâ€™s life. BSL+ does so, too.
  prefs: []
  type: TYPE_NORMAL
- en: The key innovation is [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29),
    which consumes an arbitrary number of values and creates a list. The simplest
    way to understand [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    is to think of it as an abbreviation. Specifically, every expression of the shape
  prefs: []
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â exp-1Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â exp-n)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'stands for a series of n [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    expressions:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â exp-1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â exp-nÂ '())))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Keep in mind that ''() is not an item of the list here, but actually the rest
    of the list. Here is a table with three examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| short-hand |  | long-hand |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "ABC")
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "ABC"  ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  #false  #true)
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #false  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #true  ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3)
    |  | ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  3  ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'They introduce lists with one, two, and three items, respectively.Of course,
    we can apply [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    not only to values but also to expressions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 0Â 1)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (list 1 2) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 1Â 0)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| /:division by zero |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Before the list is constructed, the expressions must be evaluated. If during
    the evaluation of an expression an error occurs, the list is never formed. In
    short, [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    behaves just like any other primitive operation that consumes an arbitrary number
    of arguments; its result just happens to be a list constructed with [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)es.The
    use of [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    greatly simplifies the notation for lists with many items and lists that contain
    lists or structures. Here is an example:'
  prefs: []
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 0Â 1Â 2Â 3Â 4Â 5Â 6Â 7Â 8Â 9)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This list contains 10 items and its formation with [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    would require 10 uses of [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and one instance of '(). Similarly, the list
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "bob"Â 0Â "a")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "carl"Â 1Â "a")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "dana"Â 2Â "b")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "erik"Â 3Â "c")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "frank"Â 4Â "a")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "grant"Â 5Â "b")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "hank"Â 6Â "c")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "ian"Â 7Â "a")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "john"Â 8Â "d")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "karel"Â 9Â "e"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'requires 11 uses of [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29),
    which sharply contrasts with 40 [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and 11 additional uses of ''().ExerciseÂ 181\. Use [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    to construct the equivalent of these lists:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "b"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "c"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "d"  '()))))
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  '()))  '())
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ''())  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  #false  ''())))'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  2  '()))  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "hello"  '()))
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Also try your hand at this one:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 1Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''()))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 2Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ''())) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Start by determining how many items each list and each nested list contains.
    Use [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    to express your answers; this ensures that your abbreviations are really the same
    as the long-hand.ExerciseÂ 182\. Use [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and ''() to form the equivalent of these lists:'
  prefs: []
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  0  1  2  3  4  5)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "he"  0)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "it"  1)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "lui"  14))
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3))
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Use [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    to express your answers.ExerciseÂ 183\. On some occasions lists are formed with
    [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    and [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: '([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  0  #false))'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  13  '())))
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  13  '()))  '())
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  '()  '()  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  1  '()))
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  "a"  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  #false  ''())))'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Reformulate each of the following expressions using only [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    or only [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29).
    Use [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    to check your answers.ExerciseÂ 184\. Determine the values of the following expressions:'
  prefs: []
  type: TYPE_NORMAL
- en: '([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)  "a"  "b")  #false)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  10  20)  ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  10  20)  ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)  10  20))
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "dana"  "jane"  "mary"  "laura")
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Use [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    to express your answers.ExerciseÂ 185\. You know about [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    and [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    from BSL, but BSL+ comes with even more selectors than that. Determine the values
    of the following expressions:'
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3))
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3))
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  1  2  3))
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Find out from the documentation whether [third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)
    and [fourth](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._fourth%29%29)
    exist.
  prefs: []
  type: TYPE_NORMAL
- en: 11.2Composing Functions[ğŸ”—](#(part._sec~3acompounding2) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[How to Design Programs](part_one.html#%28part._ch~3ahtdp%29) explains that
    programs are collections of definitions: structure type definitions, data definitions,
    constant definitions, and function definitions.And donâ€™t forget tests. To guide
    the division of labor among functions, the section also suggests a rough guideline:'
  prefs: []
  type: TYPE_NORMAL
- en: Design one function per task. Formulate auxiliary function definitions for every
    dependency between quantities in the problem.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This part of the book introduces another guideline on auxiliary functions:'
  prefs: []
  type: TYPE_NORMAL
- en: Design one template per data definition. Formulate auxiliary function definitions
    when one data definition points to a second data definition.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'In this section, we take a look at one specific place in the design process
    that may call for additional auxiliary functions: the definition step, which creates
    a full-fledged definition from a template. Turning a template into a complete
    function definition means combining the values of the templateâ€™s sub-expressions
    into the final answer. As you do so, you might encounter several situations that
    suggest the need for auxiliary functions:'
  prefs: []
  type: TYPE_NORMAL
- en: If the composition of values requires knowledge of a particular domain of applicationâ€”<wbr>for
    example, composing two (computer) images, accounting, music, or scienceâ€”<wbr>design
    an auxiliary function.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If the composition of values requires a case analysis of the available valuesâ€”<wbr>for
    example, depends on a number being positive, zero, or negativeâ€”<wbr> use a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression. If the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    looks complex, design an auxiliary function whose arguments are the templateâ€™s
    expressions and whose body is the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If the composition of values must process an element from a self-referential
    data definitionâ€”<wbr>a list, a natural number, or something like thoseâ€”<wbr>design
    an auxiliary function.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If everything fails, you may need to design a more general function and define
    the main function as a specific use of the general function. This suggestion sounds
    counterintuitive, but it is called for in a remarkably large number of cases.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The last two criteria are situations that we havenâ€™t discussed in any detail,
    though examples have come up before. The next two sections illustrate these principles
    with additional examples.
  prefs: []
  type: TYPE_NORMAL
- en: Before we continue, though, remember that the key to managing the design of
    programs is to maintain the often-mentioned
  prefs: []
  type: TYPE_NORMAL
- en: Wish List
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Maintain a list of function headers that must be designed to complete a program.
    Writing down complete function headers ensures that you can test those portions
    of the programs that you have finished, which is useful even though many tests
    will fail. Of course, when the wish list is empty, all tests should pass and all
    functions should be covered by tests.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Before you put a function on the wish list, you should check whether something
    like the function already exists in your languageâ€™s teachpack or whether something
    similar is already on the wish list. BSL, BSL+, and indeed all programming languages
    provide many built-in operations and many teachpack functions. You should explore
    your chosen language when you have time and when you have a need, so that you
    know what it provides.
  prefs: []
  type: TYPE_NORMAL
- en: 11.3Auxiliary Functions that Recur[ğŸ”—](#(part._sec~3asort.I) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: People need to sort things all the time, and so do programs. Investment advisors
    sort portfolios by the profit each holding generates. Game programs sort lists
    of players according to scores. And mail programs sort messages according to date
    or sender or some other criterion.
  prefs: []
  type: TYPE_NORMAL
- en: 'In general, you can sort a bunch of items if you can compare and order each
    pair of data items. Although not every kind of data comes with a comparison primitive,
    we all know one that does: numbers. Hence, we use a simplistic but highly representative
    sample problem in this section:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a function that sorts a list of reals.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The exercises below clarify how to adapt this function to other data.Since
    the problem statement does not mention any other task and since sorting does not
    seem to suggest other tasks, we just follow the design recipe. Sorting means rearranging
    a bunch of numbers. This restatement implies a natural data definition for the
    inputs and outputs of the function and thus its signature. Given that we have
    a definition for [List-of-numbers](#%28tech._list._of._number%29), the first step
    is easy:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces a sorted version of alon |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â alon) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Returning alon ensures that the result is appropriate as far as the function
    signature is concerned, but in general, the given list isnâ€™t sorted and this result
    is wrong.When it comes to making up examples, it quickly becomes clear that the
    problem statement is quite imprecise. As before, we use the data definition of
    [List-of-numbers](#%28tech._list._of._number%29) to organize the development of
    examples. Since the data definition consists of two clauses, we need two examples.
    Clearly, when sort> is applied to '(), the result must be '(). The question is
    what the result for
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 12Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â 20Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â -5Â '())))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'should be. The list isnâ€™t sorted, but there are two ways to sort it:'
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  20  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  12  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  -5  '()))),
    that is, a list with the numbers arranged in descending order; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  -5  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  12  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  20  '()))),
    that is, a list with the numbers arranged in ascending order.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In a real-world situation, you would now have to ask the person who posed the
    problem for clarification. Here we go for the descending alternative; designing
    the ascending alternative doesnâ€™t pose any different obstacles.The decision calls
    for a revision of the header material:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â rearranges alon in descending order |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ''())Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 3Â 2Â 1))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 3Â 2Â 1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 1Â 2Â 3))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 3Â 2Â 1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sort>Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 12Â 20Â -5))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 20Â 12Â -5))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â alon) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The header material now includes the examples reformulated as unit tests and
    using [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29).
    If the latter makes you uncomfortable, reformulate the test with [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    to exercise translating back and forth. As for the additional two examples, they
    demand that sort> works on lists already sorted in ascending and descending order.Next
    we must translate the data definition into a function template. We have dealt
    with lists of numbers before, so this step is easy:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (sort>Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Using this template, we can finally turn to the interesting part of the program
    development. We consider each case of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression separately, starting with the simple case. If sort>â€™s input is ''(),
    the answer is ''(), as specified by the example. If sort>â€™s input is a [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ed
    list, the template suggests two expressions that might help:'
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    extracts the first number from the input; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (sort>  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    rearranges ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    in descending order, according to the purpose statement of the function.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: To clarify these abstract answers, letâ€™s use the second example to explain these
    pieces in detail. When sort> consumes ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  12  20  -5),
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    is 12,
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    is ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  20  -5),
    and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: (sort>  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    produces ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  20  -5)
    because this list is already sorted.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To produce the desired answer, sort> must insert 12 between the two numbers
    of the last list. More generally, we must find an expression that inserts ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    in its proper place into the result of (sort>  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)).
    If we can do so, sorting is an easily solved problem.
  prefs: []
  type: TYPE_NORMAL
- en: Inserting a number into a sorted list clearly isnâ€™t a simple task. It demands
    searching through the sorted list to find the proper place of the item. Searching
    through any list demands an auxiliary function because lists are of arbitrary
    size and, by item 3 of the preceding section, processing values of arbitrary size
    calls for the design of an auxiliary function.
  prefs: []
  type: TYPE_NORMAL
- en: 'So here is the new wish-list entry:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [List-of-numbers](#%28tech._list._of._number%29)
    -> [List-of-numbers](#%28tech._list._of._number%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â inserts n into the sorted list of numbers alon |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (insertÂ nÂ alon)Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'That is, insert consumes a number and a list sorted in descending order and
    produces a sorted list by inserting the former into the latter.With insert, it
    is easy to complete the definition of sort>:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â ''()]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â (insertÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â (sort>Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: In order to produce the final result, sort> extracts the first item of a non-empty
    list, computes the sorted version of the rest, and uses insert to produce the
    completely sorted list from the two pieces.
  prefs: []
  type: TYPE_NORMAL
- en: Stop! Test the program as is. Some test cases pass, and some fail. Thatâ€™s progress.
    The next step in its design is the creation of functional examples. Since the
    first input of insert is any number, we use 5 and use the data definition for
    [List-of-numbers](#%28tech._list._of._number%29) to make up examples for the second
    input.
  prefs: []
  type: TYPE_NORMAL
- en: 'First we consider what insert should produce when given a number and ''().
    According to insertâ€™s purpose statement, the output must be a list, it must contain
    all numbers from the second input, and it must contain the first argument. This
    suggests the following:'
  prefs: []
  type: TYPE_NORMAL
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 5Â '())Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 5))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Second, we use a non-empty list of just one item:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 5Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6Â 5))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 5Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 4))Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 5Â 4))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The reasoning of why these are the expected results is just like before. For
    one, the result must contain all numbers from the second list and the extra number.
    For two, the result must be sorted.Finally, letâ€™s create an example with a list
    that contains more than one item. Indeed, we can derive such an example from the
    examples for sort> and especially from our analysis of the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause. From there, we know that sort> works only if 12 is inserted into ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  20  -5)
    at its proper place:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (insertÂ 12Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 20Â -5))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 20Â 12Â -5))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: That is, insert is given a second list and it is sorted in descending order.
  prefs: []
  type: TYPE_NORMAL
- en: Note what the development of examples teaches us. The insert function has to
    find the first number that is smaller than the given n. When there is no such
    number, the function eventually reaches the end of the list and it must add n
    to the end. Now, before we move on to the template, you should work out some additional
    examples. To do so, you may wish to use the supplementary examples for sort>.
  prefs: []
  type: TYPE_NORMAL
- en: 'In contrast to sort>, the function insert consumes two inputs. Since we know
    that the first one is a number and atomic, we can focus on the second argumentâ€”<wbr>the
    list of numbersâ€”<wbr>for the template development:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (insertÂ nÂ alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (insertÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The only difference between this template and the one for sort> is that this
    one needs to take into account the additional argument n.
  prefs: []
  type: TYPE_NORMAL
- en: To fill the gaps in the template of insert, we again proceed on a case-by-case
    basis. The first case concerns the empty list. According to the first example,
    ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  n)
    is the expression needed in the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause because it constructs a sorted list from n and alon.
  prefs: []
  type: TYPE_NORMAL
- en: 'The second case is more complicated than the first, and so we follow the questions
    from [figureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    is the first number on alon;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    is the rest of alon and, like alon, it is sorted in descending order; and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: (insert  n  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    produces a sorted list from n and the numbers on ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The problem is how to combine these pieces of data to get the final answer.Letâ€™s
    work through some examples to make all this concrete:'
  prefs: []
  type: TYPE_NORMAL
- en: (insertÂ 7Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6Â 5Â 4))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Here n is 7 and larger than any of the numbers in the second input. We know
    so by just looking at the first item of the list. It is 6, but because the list
    is sorted all other numbers on the list are even smaller than 6. Hence it suffices
    if we just [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    7 onto ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  6  5  4).In
    contrast, when the application is something like
  prefs: []
  type: TYPE_NORMAL
- en: (insertÂ 0Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 6Â 2Â 1Â -1))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'n must indeed be inserted into the rest of the list. More concretely, ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    is 6; ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon)
    is ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  2  1  -1);
    and (insert  n  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon))
    produces ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  2  1  0  -1)
    according to the purpose statement. By adding 6 back onto that last list, we get
    the desired answer for (insert  0  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  6  2  1  -1)).To
    get a complete function definition, we must generalize these examples. The case
    analysis suggests a nested conditional that determines whether n is larger than
    (or equal to) ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon):'
  prefs: []
  type: TYPE_NORMAL
- en: If so, all the items in alon are smaller than n because alon is already sorted.
    The answer in that case is ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  n  alon).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If, however, n is smaller than ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon),
    then the function has not yet found the proper place to insert n into alon. The
    first item of the result must be ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)
    and n must be inserted into ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  alon).
    The final result in this case is
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â (insertÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: because this list contains n and all items of alon in sorted orderâ€”<wbr>which
    is what we need.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The translation of this discussion into BSL+ calls for an [if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    expression for such cases. The condition is ([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)  n  ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  alon)),
    and the expressions for the two branches have been formulated.
  prefs: []
  type: TYPE_NORMAL
- en: '[FigureÂ 72](#%28counter._%28figure._fig~3asort%29%29) contains the complete
    sort program. Copy it into the definitions area of DrRacket, add the test cases
    back in, and test the program. All tests should pass now, and they should cover
    all expressions.'
  prefs: []
  type: TYPE_NORMAL
- en: Terminology This particular program for sorting is known as insertion sort in
    the programming literature. Later we will study alternative ways to sort lists,
    using an entirely different design strategy.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces a sorted version of l |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>Â l)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons~3f%29%29)Â l)Â (insertÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â (sort>Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [List-of-numbers](#%28tech._list._of._number%29)
    -> [List-of-numbers](#%28tech._list._of._number%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â inserts n into the sorted list of numbers l |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (insertÂ nÂ l)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â l)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â nÂ ''())]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â nÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â nÂ l)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â l)Â (insertÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â l))))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 72: Sorting lists of numbers'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'ExerciseÂ 186\. Take a second look at [Intermezzo 1: Beginning Student Language](i1-2.html),
    the intermezzo that presents BSL and its ways of formulating tests. One of the
    latter is [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29),
    which determines whether an expression satisfies a certain property. Use sorted>?
    from [exerciseÂ 145](#%28counter._%28exercise._nelist4%29%29) to reformulate the
    tests for sort> with [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Now consider this function definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-numbers](#%28tech._list._of._number%29) -> [List-of-numbers](#%28tech._list._of._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces a sorted version of l |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sort>/badÂ l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â 9Â 8Â 7Â 6Â 5Â 4Â 3Â 2Â 1Â 0))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Can you formulate a test case that shows that sort>/bad is not a sorting function?
    Can you use [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    to formulate this test case?
  prefs: []
  type: TYPE_NORMAL
- en: Notes (1) What may surprise you here is that we define a function to create
    a test. In the real world, this step is common, and, on occasion, you really need
    to design functions for testsâ€”<wbr>with their own tests and all. (2) Formulating
    tests with [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    is occasionally easier than using [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    (or other forms), and it is also a bit more general. When the predicate completely
    describes the relationship between all possible inputs and outputs of a function,
    computer scientists speak of a specification. [Specifying with lambda](part_three.html#%28part._sec~3aspecification%29)
    explains how to specify sort> completely.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 187\. Design a program that sorts lists of game players by score:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â gpÂ [nameÂ score])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A GamePlayer is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â Â (make-gp  [String](part_one.html#%28tech._string%29)  [Number](part_one.html#%28tech._number%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  (make-gp  p  s) represents player p who |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â scored a maximum of s points |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Hint Formulate a function that compares two elements of [GamePlayer](#%28tech._gameplayer%29).ExerciseÂ 188\.
    Design a program that sorts lists of emails by date:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â emailÂ [fromÂ dateÂ message])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An Email Message is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-email  [String](part_one.html#%28tech._string%29)  [Number](part_one.html#%28tech._number%29)  [String](part_one.html#%28tech._string%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  (make-email  f  d  m) represents text m |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â sent by f, d seconds after the beginning of time |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Also develop a program that sorts lists of email messages by name. To compare
    two strings alphabetically, use the [string<?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3c~3f%29%29)
    primitive.ExerciseÂ 189\. Here is the function search:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](part_one.html#%28tech._number%29)  [List-of-numbers](#%28tech._list._of._number%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (searchÂ nÂ alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â alon)Â #false]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â alon)Â n)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (searchÂ nÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â alon)))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: It determines whether some number occurs in a list of numbers. The function
    may have to traverse the entire list to find out that the number of interest isnâ€™t
    contained in the list.
  prefs: []
  type: TYPE_NORMAL
- en: Develop the function search-sorted, which determines whether a number occurs
    in a sorted list of numbers. The function must take advantage of the fact that
    the list is sorted.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 190\. Design the prefixes function, which consumes a list of [1String](part_one.html#%28tech._1string%29)s
    and produces the list of all prefixes. A list p is a prefix of l if p and l are
    the same up through all items in p. For example, ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "a"  "b"  "c")
    is a prefix of itself and ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "a"  "b"  "c"  "d").
  prefs: []
  type: TYPE_NORMAL
- en: Design the function suffixes, which consumes a list of [1String](part_one.html#%28tech._1string%29)s
    and produces all suffixes. A list s is a suffix of l if s and l are the same from
    the end, up through all items in s. For example, ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "b"  "c"  "d")
    is a suffix of itself and ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "a"  "b"  "c"  "d").
  prefs: []
  type: TYPE_NORMAL
- en: 11.4Auxiliary Functions that Generalize[ğŸ”—](#(part._sec~3agen-funcs) "Link to
    here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: On occasion an auxiliary function is not just a small helper function but a
    solution to a more general problem. Such auxiliaries are needed when a problem
    statement is too narrow. As programmers work through the steps of the design recipe,
    they may discover that the â€œnaturalâ€ solution is wrong. An analysis of this broken
    solution may suggest a slightly different, but more general, problem statement,
    as well as a simple way of using the solution to the general problem for the original
    one.
  prefs: []
  type: TYPE_NORMAL
- en: We illustrate this idea with a solution to the following problem:Paul C. Fisher
    suggested this problem.
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a function that adds a polygon to a given scene.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Just in case you donâ€™t recall your basic geometry (domain) knowledge, we add
    a (simplistic) definition of polygon:'
  prefs: []
  type: TYPE_NORMAL
- en: A polygon is a planar figure with at least three points (not on a straight line)
    connected by three straight sides.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: One natural data representation for a polygon is thus a list of [Posn](part_one.html#%28tech._posn%29)s.
    For example, the following two definitions
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â triangle-p
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 10)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 20)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 30Â 20)))
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â square-p
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 10)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 10)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 20)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 20)))
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'introduce a triangle and a square, just as the names say. Now you may wonder
    how to interpret ''() or ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  30  40))
    as polygons, and the answer is that they do not describe polygons. Because a polygon
    consists of at least three points, a good data representation of polygons is the
    collection of lists with at least three [Posn](part_one.html#%28tech._posn%29)s.Following
    the development of the data definition for non-empty lists of temperatures ([NEList-of-temperatures](#%28tech._nelist._of._temperature%29),
    in [Non-empty Lists](#%28part._sec~3alists~3ane%29)), formulating a data representation
    for polygons is straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Polygon is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [Polygon](#%28tech._polygon%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The first clause says that a list of three [Posn](part_one.html#%28tech._posn%29)s
    is a [Polygon](#%28tech._polygon%29), and the second clause says that [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)ing
    a [Posn](part_one.html#%28tech._posn%29) onto some existing [Polygon](#%28tech._polygon%29)
    creates another one. Since this data definition is the very first to use [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    in one of its clauses, we spell it out with [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    just to make sure you see this conversion from an abbreviation to long-hand in
    this context:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â a Polygon is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ''())))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [Polygon](#%28tech._polygon%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The point is that a naively chosen data representationâ€”<wbr>plain lists of [Posn](part_one.html#%28tech._posn%29)sâ€”<wbr>may
    not properly represent the intended information. Revising the data definition
    during an initial exploration is normal; indeed, on occasion such revisions become
    necessary during the rest of the design process. As long as you stick to a systematic
    approach, though, changes to the data definition can naturally be propagated through
    the rest of the design.
  prefs: []
  type: TYPE_NORMAL
- en: 'The second step calls for the signature, purpose statement, and header of the
    function. Since the problem statement mentions just one task and no other task
    is implied, we start with one function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â a plain background image |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MTÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 50Â 50))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Polygon](#%28tech._polygon%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders the given polygon p into img |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â img) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The additional definition of MT is called for because it simplifies the formulation
    of examples.For the first example, we use the above-mentioned triangle. A quick
    look in the 2htdp/image teachpack suggests [scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    is the function needed to render the three lines for a triangle:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (render-polyÂ MTÂ triangle-p) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)Â MTÂ 20Â 10Â 20Â 20Â "red")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â 20Â 20Â 30Â 20Â "red") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â 30Â 20Â 20Â 10Â "red")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The innermostOf course, we experimented in DrRacketâ€™s interactions area to
    get this expression right. [scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    renders the line from the first to the second [Posn](part_one.html#%28tech._posn%29);
    the middle one uses the second and third [Posn](part_one.html#%28tech._posn%29);
    and the outermost [scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    connects the third and the first [Posn](part_one.html#%28tech._posn%29).Given
    that the first and smallest polygon is a triangle, then a rectangle or a square
    suggests itself as the second example. We use square-p:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (render-polyÂ MTÂ square-p) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)Â MTÂ 10Â 10Â 20Â 10Â "red")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â 20Â 10Â 20Â 20Â "red") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â 20Â 20Â 10Â 20Â "red") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â 10Â 20Â 10Â 10Â "red")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'A square is just one more point than a triangle, and it is easy to render.
    You may also wish to draw these shapes on a piece of graph paper.The construction
    of the template poses a challenge. Specifically, the first and the second questions
    of [figureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29) ask whether the
    data definition differentiates distinct subsets and how to distinguish among them.
    While the data definition clearly sets apart triangles from all other polygons
    in the first clause, it is not immediately clear how to differentiate the two.
    Both clauses describe lists of [Posn](part_one.html#%28tech._posn%29)s. The first
    describes lists of three [Posn](part_one.html#%28tech._posn%29)s, while the second
    one describes lists of [Posn](part_one.html#%28tech._posn%29)s that have at least
    four items. Thus one alternative is to ask whether the given polygon is three
    items long:'
  prefs: []
  type: TYPE_NORMAL
- en: ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)Â p)Â 3)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Using the long-hand version of the first clause, that is,
  prefs: []
  type: TYPE_NORMAL
- en: ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [Posn](part_one.html#%28tech._posn%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [Posn](part_one.html#%28tech._posn%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â [Posn](part_one.html#%28tech._posn%29)Â '())))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'suggests a second way to formulate the first condition, namely, checking whether
    the given [Polygon](#%28tech._polygon%29) is empty after using three [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    functions:'
  prefs: []
  type: TYPE_NORMAL
- en: ([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Since all [Polygon](#%28tech._polygon%29)s consist of at least three [Posn](part_one.html#%28tech._posn%29)s,
    using [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    three times is legal. Unlike [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29),
    [rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)
    is a primitive, easy-to-understand operation with a clear operational meaning.
    It selects the second field in a [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    structure and that is all it does.
  prefs: []
  type: TYPE_NORMAL
- en: 'It is truly better to formulate conditions in terms of built-in predicates
    and selectors than your own (recursive) functions. See [Intermezzo 5: The Cost
    of Computation](i5-6.html) for an explanation.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The rest of the questions in [figureÂ 52](#%28counter._%28figure._fig~3atemplate-q%29%29)
    have direct answers, and thus we get this template:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â imgÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (render-polyÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Because p describes a triangle in the first clause, it must consist of exactly
    three [Posn](part_one.html#%28tech._posn%29)s, which are extracted via [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29),
    [second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29),
    and [third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29).
    In the second clause, p consists of a [Posn](part_one.html#%28tech._posn%29) and
    a Polygon, justifying ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    and ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p).
    The former extracts a [Posn](part_one.html#%28tech._posn%29) from p, the latter
    a Polygon. We therefore add a self-referential function call around it; we must
    also keep in mind that dealing with ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    in this clause and the three [Posn](part_one.html#%28tech._posn%29)s in the first
    clause may demand the design of an auxiliary function.Now we are ready to focus
    on the function definition, dealing with one clause at a time. The first clause
    concerns triangles, which suggests a straightforward answer. Specifically, there
    are three [Posn](part_one.html#%28tech._posn%29)s and render-poly should connect
    the three in an empty scene of 50 by 50 pixels. Given that [Posn](part_one.html#%28tech._posn%29)
    is a separate data definition, we get an obvious wish-list entry:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â draws a red line from [Posn](part_one.html#%28tech._posn%29)  p to [Posn](part_one.html#%28tech._posn%29)  q
    into im |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-lineÂ imÂ pÂ q)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â im) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Using this function, the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause in render-poly is this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (render-line |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (render-line |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (render-lineÂ MTÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p)Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'This expression obviously renders the given [Polygon](#%28tech._polygon%29)
    p as a triangle by drawing a line from the first to the second, the second to
    the third, and the third to the first [Posn](part_one.html#%28tech._posn%29).The
    second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause is about [Polygon](#%28tech._polygon%29)s that have been extended with
    one [Posn](part_one.html#%28tech._posn%29). In the template, we find two expressions,
    and, following [figureÂ 53](#%28counter._%28figure._fig~3adefinition-q%29%29),
    we remind ourselves of what these expressions compute:'
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    extracts the first [Posn](part_one.html#%28tech._posn%29);
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    extracts the [Polygon](#%28tech._polygon%29) from p; and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: (render-poly  img  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p))
    renders ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p),
    which is what the purpose statement of the function says.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The question is how to use these pieces to render the given [Polygon](#%28tech._polygon%29)
    p.One idea that may come to mind is that ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    consists of at least three [Posn](part_one.html#%28tech._posn%29)s. It is therefore
    possible to extract at least one [Posn](part_one.html#%28tech._posn%29) from this
    embedded Polygon and to connect ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    with this additional point. Here is what this idea looks like with BSL+ code:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (render-lineÂ (render-poly  MT  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p))Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As mentioned, the highlighted sub-expression renders the embedded [Polygon](#%28tech._polygon%29)
    in an empty 50 by 50 scene. The use of render-line adds one line to this scene,
    from the first to the second [Posn](part_one.html#%28tech._posn%29) of p.Our analysis
    suggests a rather natural, complete function definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â (render-line |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â (render-line |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â (render-lineÂ MTÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p)Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â (render-lineÂ (render-polyÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Designing render-line is the kind of problem that you solved in the first part
    of the book. Hence we just provide the final definition so that you can test the
    above function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders a line from p to q into img |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-lineÂ imgÂ pÂ q)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â img |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â q)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â q)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â "red")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Stop! Develop a test for render-line.
  prefs: []
  type: TYPE_NORMAL
- en: Lastly, we must test the functions. The tests for render-poly fail. On the one
    hand, the test failure is fortunate because it is the purpose of tests to find
    problems before they affect regular consumers. On the other hand, the flaw is
    unfortunate because we followed the design recipe, we made fairly natural choices,
    and yet the function doesnâ€™t work.
  prefs: []
  type: TYPE_NORMAL
- en: 'Stop! Why do you think the tests fail? Draw an image of the pieces in the template
    of render-poly. Then draw the line that combines them. Alternatively, experiment
    in DrRacketâ€™s interactions area:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (render-polyÂ MTÂ square-p) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/3f715fd3eb4b6d48ead9b4db496da2a1.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The image shows that render-poly connects the three dots of ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    and then connects ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    to the first point of ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p),
    that is, ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)  p).
    You can easily validate this claim with an interaction that uses ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  square-p)
    directly as input for render-poly:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (render-polyÂ MTÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â square-p))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/0c97250f4c55f16eacfa00feb2342065.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In addition, you may wonder what render-poly would draw if we added another
    point, say, ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  40  30),
    to the original square:'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > (render-poly &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â MT &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 40Â 30)Â square-p))
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ![image](../Images/cf6c756a889653e779e961ec7128e70e.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Instead of the desired pentagon, render-poly always draws the triangle at the
    end of the given [Polygon](#%28tech._polygon%29) and otherwise connects the [Posn](part_one.html#%28tech._posn%29)s
    that precede the triangle.
  prefs: []
  type: TYPE_NORMAL
- en: While the experiments confirm the problems of our design, they also suggest
    that the function is â€œalmost correct.â€ It connects the successive dots specified
    by a list of [Posn](part_one.html#%28tech._posn%29)s, and then it draws a line
    from the first to the last [Posn](part_one.html#%28tech._posn%29) of the trailing
    triangle. If it skipped this last step, the function would just â€œconnect the dotsâ€
    and thus draw an â€œopenâ€ polygon. By connecting the first and the last point, it
    could then complete its task.
  prefs: []
  type: TYPE_NORMAL
- en: 'Put differently, the analysis of our failure suggests a two-step solution:'
  prefs: []
  type: TYPE_NORMAL
- en: Solve a more general problem.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Use the solution to this general problem to solve the original one.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'We start with the statement for the general problem:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a function that draws connections between a given bunch
    of dots and into a given scene.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Although the design of render-poly almost solves this problem, we design this
    function mostly from scratch. First, we need a data definition. Connecting the
    dots makes no sense unless we have at least a couple of dots. To keep things simple,
    we go with at least one dot:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An NELoP is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Posn](part_one.html#%28tech._posn%29)  [NELoP](#%28tech._nelop%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Second, we formulate a signature, a purpose statement, and a header for a â€œconnect
    the dotsâ€ function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [NELoP](#%28tech._nelop%29) ->
    [Image](part_one.html#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â connects the dots in p by rendering lines in img |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â MT) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Third, we adapt the examples for render-poly for this new function. As our
    failure analysis says, the function connects the first [Posn](part_one.html#%28tech._posn%29)
    on p to the second one, the second one to the third, the third to the fourth,
    and so on, all the way to the last one, which isnâ€™t connected to anything. Here
    is the adaptation of the first example, a list of three [Posn](part_one.html#%28tech._posn%29)s:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (connect-dotsÂ MTÂ triangle-p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)Â MTÂ 20Â 20Â 30Â 20Â "red")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 20Â 10Â 20Â 20Â "red")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The expected value is an image with two lines: one from the first [Posn](part_one.html#%28tech._posn%29)
    to the second one, and another one from the second to the third [Posn](part_one.html#%28tech._posn%29).'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 191\. Adapt the second example for the render-poly function to connect-dots.
  prefs: []
  type: TYPE_NORMAL
- en: 'Fourth, we use the template for functions that process non-empty lists:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (connect-dotsÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The template has two clauses: one for lists of one [Posn](part_one.html#%28tech._posn%29)
    and the second one for lists with more than one. Since there is at least one [Posn](part_one.html#%28tech._posn%29)
    in both cases, the template contains ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    in both clauses; the second one also contains (connect-dots  img  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p))
    to remind us of the self-reference in the second clause of the data definition.The
    fifth and central step is to turn the template into a function definition. Since
    the first clause is the simplest one, we start with it. As we have already said,
    it is impossible to connect anything when the given list contains only one [Posn](part_one.html#%28tech._posn%29).
    Hence, the function just returns MT from the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause. For the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause, let us remind ourselves of what the template expressions compute:'
  prefs: []
  type: TYPE_NORMAL
- en: ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    extracts the first [Posn](part_one.html#%28tech._posn%29);
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    extracts the [NELoP](#%28tech._nelop%29) from p; and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: (connect-dots  img  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p))
    connects the dots in ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)
    by rendering lines in img.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'From our first attempt to design render-poly, we know connect-dots needs to
    add one line to the result of (connect-dots  img  ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)  p)),
    namely, from ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  p)
    to ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)  p).
    We know that p contains a second [Posn](part_one.html#%28tech._posn%29) because
    otherwise the evaluation of [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    would have picked the first clause.Putting everything together, we get the following
    definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â img]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â (render-line |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â (connect-dotsÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: This definition looks simpler than the faulty version of render-poly, even though
    it copes with two more lists of [Posn](part_one.html#%28tech._posn%29)s than render-poly.This
    argument is informal. If you ever need a formal argument for such claims about
    the relationship between sets or functions, you will need to study logic. Indeed,
    this bookâ€™s design process is deeply informed by logic, and a course on logic
    in computation is a natural complement. In general, logic is to computing what
    analysis is to engineering.
  prefs: []
  type: TYPE_NORMAL
- en: Conversely, we say that connect-dots generalizes render-poly. Every input for
    the latter is also an input for the former. Or in terms of data definitions, every
    [Polygon](#%28tech._polygon%29) is also an [NELoP](#%28tech._nelop%29). But, there
    are many [NELoP](#%28tech._nelop%29)s that are not [Polygon](#%28tech._polygon%29)s.
    To be precise, all lists of [Posn](part_one.html#%28tech._posn%29)s that contain
    two items or one belong to [NELoP](#%28tech._nelop%29) but not to [Polygon](#%28tech._polygon%29).
    The key insight for you is, however, that just because a function has to deal
    with more inputs than another function does not mean that the former is more complex
    than the latter; generalizations often simplify function definitions.
  prefs: []
  type: TYPE_NORMAL
- en: 'As spelled out above, render-poly can use connect-dots to connect all successive
    [Posn](part_one.html#%28tech._posn%29)s of the given [Polygon](#%28tech._polygon%29);
    to complete its task, it must then add a line from the first to the last [Posn](part_one.html#%28tech._posn%29)
    of the given [Polygon](#%28tech._polygon%29). In terms of code, this just means
    composing two functions: connect-dots and render-line, but we also need a function
    to extract the last [Posn](part_one.html#%28tech._posn%29) from the [Polygon](#%28tech._polygon%29).
    Once we are granted this wish, the definition of render-poly is a one-liner:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Polygon](#%28tech._polygon%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds an image of p to img |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (render-lineÂ (connect-dotsÂ imgÂ p) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (lastÂ p))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Formulating the wish-list entry for last is straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Polygon](#%28tech._polygon%29) -> [Posn](part_one.html#%28tech._posn%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â extracts the last item from p |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Then again, it is clear that last could be a generally useful function and
    we might be better off designing it for inputs from [NELoP](#%28tech._nelop%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [NELoP](#%28tech._nelop%29) -> [Posn](part_one.html#%28tech._posn%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â extracts the last item from p |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (lastÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Stop! Why is it acceptable to use [first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)
    for the stub definition of last?ExerciseÂ 192\. Argue why it is acceptable to use
    last on [Polygon](#%28tech._polygon%29)s. Also argue why you may adapt the template
    for connect-dots to last:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (lastÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (lastÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Finally, develop examples for last, turn them into tests, and ensure that the
    definition of last in [figureÂ 73](#%28counter._%28figure._fig~3adraw-poly%29%29)
    works on your examples.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Polygon](#%28tech._polygon%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds a corner of p to img |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-polyÂ imgÂ p)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (render-lineÂ (connect-dotsÂ imgÂ p)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)Â (lastÂ p)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [NELoP](#%28tech._nelop%29) ->
    [Image](part_one.html#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â connects the [Posn](part_one.html#%28tech._posn%29)s in p in an image |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (connect-dotsÂ imgÂ p)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))Â img]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (render-lineÂ (connect-dotsÂ imgÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â p)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)Â p))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Image](part_one.html#%28tech._image%29)  [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Image](part_one.html#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â draws a red line from [Posn](part_one.html#%28tech._posn%29)  p to [Posn](part_one.html#%28tech._posn%29)  q
    into im |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-lineÂ imÂ pÂ q)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â imÂ ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â q)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â q)Â "red"))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Polygon](#%28tech._polygon%29) -> [Posn](part_one.html#%28tech._posn%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â extracts the last item from p |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (lastÂ p)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))))Â ([third](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._third%29%29)Â p)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (lastÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â p))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 73: Drawing a polygon'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In summary, the development of render-poly naturally points us to consider the
    general problem of connecting a list of successive dots. We can then solve the
    original problem by defining a function that composes the general function with
    other auxiliary functions. The program therefore consists of a relatively straightforward
    main functionâ€”<wbr>render-polyâ€”<wbr>and complex auxiliary functions that perform
    most of the work. You will see time and again that this kind of design approach
    is common and a good method for designing and organizing programs.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 193\. Here are two more ideas for defining render-poly:'
  prefs: []
  type: TYPE_NORMAL
- en: render-poly could [cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)
    the last item of p onto p and then call connect-dots.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: render-poly could add the first item of p to the end of p via a version of add-at-end
    that works on [Polygon](#%28tech._polygon%29)s.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use both ideas to define render-poly; make sure both definitions pass the test
    cases.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 194\. Modify connect-dots so that it consumes an additional [Posn](part_one.html#%28tech._posn%29)
    to which the last [Posn](part_one.html#%28tech._posn%29) is connected. Then modify
    render-poly to use this new version of connect-dots.
  prefs: []
  type: TYPE_NORMAL
- en: Naturally, functions such as last are available in a full-fledged programming
    language, and something like render-poly is available in the 2htdp/image teachpack.
    If you are wondering why we just designed these functions, consider the titles
    of both the book and this section. The goal is not (just) to design useful functions
    but to study how code is designed systematically. Specifically, this section is
    about the idea of generalization in the design process; for more on this idea
    see [Abstraction](part_three.html) and [Accumulators](part_six.html).
  prefs: []
  type: TYPE_NORMAL
- en: '12Projects: Lists[ğŸ”—](#(part._ch~3aproj-lists) "Link to here")'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'This chapter presents several extended exercises, all of which aim to solidify
    your understanding of the elements of design: the design of batchThis chapter
    relies on the 2htdp/batch-io teachpack. and interactive programs, design by composition,
    design wish lists, and the design recipe for functions. The first section covers
    problems involving real-world data: English dictionaries and iTunes libraries.
    A word-games problem requires two sections: one to illustrate design by composition,
    the other to tackle the heart of the problem. The remaining sections are about
    games and finite-state machines.'
  prefs: []
  type: TYPE_NORMAL
- en: '12.1Real-World Data: Dictionaries[ğŸ”—](#(part._sec~3adict) "Link to here")'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Information in the real world tends to come in large quantities, which is why
    it makes so much sense to use programs for processing it. For example, a dictionary
    does not just contain a dozen words, but hundreds of thousands. When you want
    to process such large pieces of information, you must carefully design the program
    using small examples. Once youFor performance concerns, see [Generative Recursion](part_five.html).
    From here to there, the focus is on designing programs systematically so that
    you can then explore performance problems properly. have convinced yourself that
    the programs work properly, you run them on the real-world data to get real results.
    If the program is too slow to process this large quantity of data, reflect on
    each function and how it works. Question whether you can eliminate any redundant
    computations.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â On OS X: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â LOCATIONÂ "/usr/share/dict/words")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â On LINUX: /usr/share/dict/words or /var/lib/dict/words |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â On WINDOWS: borrow the word file from your Linux friend |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Dictionary is a [List-of-strings](#%28tech._list._of._string%29). |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â AS-LISTÂ ([read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)Â LOCATION))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 74: Reading a dictionary'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 74](#%28counter._%28figure._fig~3areading-a-dictionary%29%29) displays
    the one line of code needed to read in an entire dictionary of the English language.
    To get an idea of how large such dictionaries are, adapt the code from the figure
    for your particular computer and use [length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._length%29%29)
    to determine how many words are in your dictionary. There are 235,886 words in
    ours today, July 25, 2017.'
  prefs: []
  type: TYPE_NORMAL
- en: 'In the following exercises, letters play an important role. You may wish to
    add the following to the top of your program in addition to your adaptation of
    [figureÂ 74](#%28counter._%28figure._fig~3areading-a-dictionary%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Letter is one of the following [1String](part_one.html#%28tech._1string%29)s:
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "a" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "z" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â or, equivalently, a [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    of this list: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â LETTERS
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([explode](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._explode%29%29)Â "abcdefghijklmnopqrstuvwxyz"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Hint Use [list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)
    to formulate examples and tests for the exercises.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 195\. Design the function starts-with#, which consumes a [Letter](#%28tech._letter%29)
    and [Dictionary](#%28tech._dictionary%29) and then counts how many words in the
    given [Dictionary](#%28tech._dictionary%29) start with the given [Letter](#%28tech._letter%29).
    Once you know that your function works, determine how many words start with "e"
    in your computerâ€™s dictionary and how many with "z".
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 196\. Design count-by-letter. The function consumes a [Dictionary](#%28tech._dictionary%29)
    and counts how often each letter is used as the first one of a word in the given
    dictionary. Its result is a list of Letter-Counts, a piece of data that combines
    letters and counts.
  prefs: []
  type: TYPE_NORMAL
- en: Once your function is designed, determine how many words appear for all letters
    in your computerâ€™s dictionary.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 197\. Design most-frequent. The function consumes a [Dictionary](#%28tech._dictionary%29).
    It produces the [Letter-Count](#%28tech._letter._count%29) for the letter that
    occurs most often as the first one in the given [Dictionary](#%28tech._dictionary%29).
  prefs: []
  type: TYPE_NORMAL
- en: What is the most frequently used letter in your computerâ€™s dictionary and how
    often is it used?
  prefs: []
  type: TYPE_NORMAL
- en: 'Note on Design Choices This exercise calls for the composition of the solution
    to the preceding exercise with a function that picks the correct pairing from
    a list of [Letter-Count](#%28tech._letter._count%29)s. There are two ways to design
    this latter function:'
  prefs: []
  type: TYPE_NORMAL
- en: Design a function that picks the pair with the maximum count.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Design a function that selects the first from a sorted list of pairs.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Consider designing both. Which one do you prefer? Why?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 198\. Design words-by-first-letter. The function consumes a [Dictionary](#%28tech._dictionary%29)
    and produces a list of [Dictionary](#%28tech._dictionary%29)s, one per [Letter](#%28tech._letter%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'Redesign most-frequent from [exerciseÂ 197](#%28counter._%28exercise._ex~3adictionary3%29%29)
    using this new function. Call the new function most-frequent.v2. Once you have
    completed the design, ensure that the two functions compute the same result on
    your computerâ€™s dictionary:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (most-frequentÂ AS-LIST) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (most-frequent.v2Â AS-LIST)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Note on Design Choices For words-by-first-letter you have a choice for dealing
    with the situation when the given dictionary does not contain any words for some
    letter:'
  prefs: []
  type: TYPE_NORMAL
- en: One alternative is to exclude the resulting empty dictionaries from the overall
    result. Doing so simplifies both the testing of the function and the design of
    most-frequent.v2, but it also requires the design of an auxiliary function.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The other one is to include '() as the result of looking for words of a certain
    letter, even if there arenâ€™t any. This alternative avoids the auxiliary function
    needed for the first alternative but adds complexity to the design of most-frequent.v2.
    End
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Note on Intermediate Data and Deforestation This second version of the word-counting
    function computes the desired result via the creation of a large intermediate
    data structure that serves no real purpose other than that its parts are counted.
    On occasion, the programming language eliminates them automatically by fusing
    the two functions into one, a transformation on programs that is also called deforestation.
    When you know that the language does not deforest programs, consider eliminating
    such data structures if the program does not process data fast enough.
  prefs: []
  type: TYPE_NORMAL
- en: '12.2Real-World Data: iTunes[ğŸ”—](#(part._itunes-data._sec~3aitunes) "Link to
    here")'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Appleâ€™s iTunes software is widely used to collect music, videos, TV shows,
    and so on. You may wish to analyze the information that your iTunes application
    gathers. It is actually quite easy to extract its database. Select the applicationâ€™s
    File menu, choose Library and then Exportâ€”<wbr>and voilÃ , you can export a so-called
    XML representation of the iTunes information.Since such proprietary formats change
    regularly, the book comes with two sample files: [itunes.xml](Https://felleisen.org/matthias/HtDP2e/Files/itunes.xml)
    and [itunes2.xml](Https://felleisen.org/matthias/HtDP2e/Files/itunes2.xml). You
    may wish to use those instead of your own. Processing XML is covered in some depth
    by [Project: The Commerce of XML](part_four.html#%28part._ch~3amoney-sexp%29);
    here we rely on the 2htdp/itunes teachpack to get hold of the information. Specifically,
    the teahpack enables you to retrieve the music tracks that your iTunes library
    contains.'
  prefs: []
  type: TYPE_NORMAL
- en: 'While the details vary, an iTunes library maintains some of the following kinds
    of information for each music track, occasionally a bit less:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Track ID, a unique identifier for the track with respect to your library, example:
    442'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Name, the title of the track, Wild Child
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Artist, the producing artists, Enya
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Album, the title of the album to which it belongs, A Day Without
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Genre, the music genre to which the track is assigned, New Age
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Kind, the encoding of the music, MPEG audio file
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Size, the size of the file, 4562044
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Total Time, the length of the track in milliseconds, 227996
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Track Number, the position of the track within the album, 2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Track Count, the number of tracks on the album, 11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Year, the year of release, 2000
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Date Added, when the track was added, 2002-7-17 3:55:14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Play Count, how many times it was played, 20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Play Date, when the track was last played, 3388484113 Unix seconds
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Play Date UTC, when it was last played, 2011-5-17 17:35:13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'As always, the first task is to choose a BSL data representation for this information.
    In this section, we use two representations for music tracks: a structure-based
    one and another based on lists.In addition to the 2htdp/batch-io teachpack, this
    section relies on the 2htdp/itunes teachpack. While the former records a fixed
    number of attributes per track and only if all information is available, the latter
    comes with whatever information is available represented as data. Each serves
    particular uses well; for some uses, both representations are useful.'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â the 2htdp/itunes teachpack documentation, part 1: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An LTracks is one of: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Track](#%28tech._itunes-data._track%29)  [LTracks](#%28tech._itunes-data._ltrack%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â track
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [nameÂ artistÂ albumÂ timeÂ track#Â addedÂ play#Â played]) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Track is a structure: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-track  [String](part_one.html#%28tech._string%29)  [String](part_one.html#%28tech._string%29)  [String](part_one.html#%28tech._string%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [Date](#%28tech._itunes-data._date%29)  [N](#%28tech._n%29)  [Date](#%28tech._itunes-data._date%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation An instance records in order: the track''s |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â title, its producing artist, to which album it belongs, |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â its playing time in milliseconds, its position within the |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â album, the date it was added, how often it has been |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â played, and the date when it was last played |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â dateÂ [yearÂ monthÂ dayÂ hourÂ minuteÂ [second](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._second%29%29)])
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Date is a structure: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-date  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29)  [N](#%28tech._n%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation An instance records six pieces of information: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â the date''s year, month (between 1 and 12 inclusive), |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â day (between 1 and 31), hour (between 0 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â and 23), minute (between 0 and 59), and |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â second (also between 0 and 59). |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 75: Representing iTunes tracks as structures (the structures)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [Track](#%28tech._itunes-data._track%29) or #false |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates an instance of [Track](#%28tech._itunes-data._track%29) for legitimate
    inputs |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â otherwise it produces #false |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (create-trackÂ nameÂ artistÂ albumÂ time
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â track#Â addedÂ play#Â played) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)  [Any](part_one.html#%28tech._any%29)
    -> [Date](#%28tech._itunes-data._date%29) or #false |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates an instance of [Date](#%28tech._itunes-data._date%29) for legitimate
    inputs |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â otherwise it produces #false |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (create-dateÂ yÂ moÂ dayÂ hÂ mÂ s)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [LTracks](#%28tech._itunes-data._ltrack%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates a list-of-tracks representation from the |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â text in file-name (an XML export from iTunes) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (read-itunes-as-tracksÂ file-name)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 76: Representing iTunes tracks as structures (the functions)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FiguresÂ 75](#%28counter._itunes-data._%28figure._fig~3aitunes-api-tracks%29%29)
    and [76](#%28counter._itunes-data._%28figure._fig~3aitunes-api-tracks-fun%29%29)
    introduce the structure-based representation of tracks as implemented by the 2htdp/itunes
    teachpack. The track structure type comes with eight fields, each representing
    a particular property of the track. Most fields contain atomic kinds of data,
    such as [String](part_one.html#%28tech._string%29)s and [N](#%28tech._n%29)s;
    others contain [Date](#%28tech._itunes-data._date%29)s, which is a structure type
    with six fields. The 2htdp/itunes teachpack exports all predicates and selectors
    for the track and date structure types, but in lieu of constructors it provides
    checked constructors.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The last element of the description of the 2htdp/itunes teachpack is a function
    that reads an iTunes XML library description and delivers a list of tracks, [LTracks](#%28tech._itunes-data._ltrack%29).
    Once you have exported the XML library from some iTunes app, you can run the following
    code snippet to retrieve all the records:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â modify the following to use your chosen name |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ITUNES-LOCATIONÂ "itunes.xml")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [LTracks](#%28tech._itunes-data._ltrack%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â itunes-tracks
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (read-itunes-as-tracksÂ ITUNES-LOCATION)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Save the snippet in the same folder as your iTunes XML export. Remember not
    to use itunes-tracks for examples; it is way too large for that. Indeed, it may
    be so large that reading the file every time you run your BSL program in DrRacket
    will take a lot of time. You may therefore wish to comment out this second line
    while you design functions. Uncomment it only when you wish to compute information
    about your iTunes collection.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 199\. While the important data definitions are already provided, the
    first step of the design recipe is still incomplete. Make up examples of [Date](#%28tech._itunes-data._date%29)s,
    [Track](#%28tech._itunes-data._track%29)s, and [LTracks](#%28tech._itunes-data._ltrack%29).
    These examples come in handy for the following exercises as inputs.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 200\. Design the function total-time, which consumes an element of
    [LTracks](#%28tech._itunes-data._ltrack%29) and produces the total amount of play
    time. Once the program is done, compute the total play time of your iTunes collection.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 201\. Design select-all-album-titles. The function consumes an [LTracks](#%28tech._itunes-data._ltrack%29)
    and produces the list of album titles as a [List-of-strings](#%28tech._list._of._string%29).
  prefs: []
  type: TYPE_NORMAL
- en: Also design the function create-set. It consumes a [List-of-strings](#%28tech._list._of._string%29)
    and constructs one that contains every [String](part_one.html#%28tech._string%29)
    from the given list exactly once. Hint If [String](part_one.html#%28tech._string%29)
    s is at the front of the given list and occurs in the rest of the list, too, create-set
    does not keep s.
  prefs: []
  type: TYPE_NORMAL
- en: Finally design select-album-titles/unique, which consumes an [LTracks](#%28tech._itunes-data._ltrack%29)
    and produces a list of unique album titles. Use this function to determine all
    album titles in your iTunes collection and also find out how many distinct albums
    it contains.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 202\. Design select-album. The function consumes the title of an album
    and an [LTracks](#%28tech._itunes-data._ltrack%29). It extracts from the latter
    the list of tracks that belong to the given album.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 203\. Design select-album-date. The function consumes the title of
    an album, a date, and an [LTracks](#%28tech._itunes-data._ltrack%29). It extracts
    from the latter the list of tracks that belong to the given album and have been
    played after the given date. Hint You must design a function that consumes two
    [Date](#%28tech._itunes-data._date%29)s and determines whether the first occurs
    before the second.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 204\. Design select-albums. The function consumes an element of [LTracks](#%28tech._itunes-data._ltrack%29).
    It produces a list of LTracks, one per album. Each album is uniquely identified
    by its title and shows up in the result only once. Hints (1) You want to use some
    of the solutions of the preceding exercises. (2) The function that groups consumes
    two lists: the list of album titles and the list of tracks; it considers the latter
    as atomic until it is handed over to an auxiliary function. See [exerciseÂ 196](#%28counter._%28exercise._ex~3adictionary2%29%29).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Terminology The functions whose names start with select- are so-called database
    queries. See [Project: Database](part_four.html#%28part._db._sec~3aproj-db%29)
    for more details. End'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â the 2htdp/itunes teachpack documentation, part 2: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An LLists is one of: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [LAssoc](#%28tech._itunes-data._lassoc%29)  [LLists](#%28tech._itunes-data._llist%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An LAssoc is one of: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Association](#%28tech._itunes-data._association%29)  [LAssoc](#%28tech._itunes-data._lassoc%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An Association is a list of two items: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [String](part_one.html#%28tech._string%29)  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [BSDN](#%28tech._itunes-data._bsdn%29)  ''()))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A BSDN is one of: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [Boolean](part_one.html#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [Number](part_one.html#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [String](part_one.html#%28tech._string%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [Date](#%28tech._itunes-data._date%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [LLists](#%28tech._itunes-data._llist%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates a list of lists representation for all tracks in |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â file-name, which must be an XML export from iTunes |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (read-itunes-as-listsÂ file-name)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 77: Representing iTunes tracks as lists'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 77](#%28counter._itunes-data._%28figure._fig~3aitunes-api-lists%29%29)
    shows how the 2htdp/itunes teachpack represents tracks with lists. An [LLists](#%28tech._itunes-data._llist%29)
    is a list of track representations, each of which is a list of lists pairing [String](part_one.html#%28tech._string%29)s
    with four kinds of values. The read-itunes-as-lists function reads an iTunes XML
    library and produces an element of [LLists](#%28tech._itunes-data._llist%29).
    Hence, you get access to all track information if you add the following definitions
    to your program:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â modify the following to use your chosen name |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ITUNES-LOCATIONÂ "itunes.xml")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [LLists](#%28tech._itunes-data._llist%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â list-tracks
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (read-itunes-as-listsÂ ITUNES-LOCATION)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Then save it in the same folder where the iTunes library is stored.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 205\. Develop examples of [LAssoc](#%28tech._itunes-data._lassoc%29)
    and [LLists](#%28tech._itunes-data._llist%29), that is, the list representation
    of tracks and lists of such tracks.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 206\. Design the function find-association. It consumes three arguments:
    a [String](part_one.html#%28tech._string%29) called key, an [LAssoc](#%28tech._itunes-data._lassoc%29),
    and an element of [Any](part_one.html#%28tech._any%29) called default. It produces
    the first [Association](#%28tech._itunes-data._association%29) whose first item
    is equal to key, or default if there is no such Association.'
  prefs: []
  type: TYPE_NORMAL
- en: Note Read up on [assoc](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._assoc%29%29)
    after you have designed this function.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 207\. Design total-time/list, which consumes an [LLists](#%28tech._itunes-data._llist%29)
    and produces the total amount of play time. Hint Solve [exerciseÂ 206](#%28counter._itunes-data._%28exercise._ex~3aitunes11%29%29)
    first.
  prefs: []
  type: TYPE_NORMAL
- en: Once you have completed the design, compute the total play time of your iTunes
    collection. Compare this result with the time that the total-time function from
    [exerciseÂ 200](#%28counter._itunes-data._%28exercise._ex~3aitunes2%29%29) computes.
    Why is there a difference?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 208\. Design boolean-attributes. The function consumes an [LLists](#%28tech._itunes-data._llist%29)
    and produces the [String](part_one.html#%28tech._string%29)s that are associated
    with a [Boolean](part_one.html#%28tech._boolean%29) attribute. Hint Use create-set
    from [exerciseÂ 201](#%28counter._itunes-data._%28exercise._ex~3aitunes3%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: Once you are done, determine how many Boolean-valued attributes your iTunes
    library employs for its tracks. Do they make sense?
  prefs: []
  type: TYPE_NORMAL
- en: Note A list-based representation is a bit less organized than a structure-based
    one. The word semi-structured is occasionally used in this context. Such list-representations
    accommodate properties that show up rarely and thus donâ€™t fit the structure type.
    People often use such representations to explore unknown information and later
    introduce structures when the format is well-known. Design a function track-as-struct,
    which converts an [LAssoc](#%28tech._itunes-data._lassoc%29) to a [Track](#%28tech._itunes-data._track%29)
    when possible. End
  prefs: []
  type: TYPE_NORMAL
- en: 12.3Word Games, Composition Illustrated[ğŸ”—](#(part._sec~3apermute-composition)
    "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Some of you solve word puzzles in newspapers and magazines. Try this:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Given a word, find all words that are made up from the same letters.
    For example â€œcatâ€ also spells â€œact.â€
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Letâ€™s work through an example. Suppose you are given â€œdear.â€ There are twenty-four
    possible arrangements of the four letters:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ader |  | aedr |  | aerd |  | adre |  | arde |  | ared |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| daer |  | eadr |  | eard |  | dare |  | rade |  | raed |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| dear |  | edar |  | erad |  | drae |  | rdae |  | read |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| dera |  | edra |  | erda |  | drea |  | rdea |  | reda |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In this list, there are three legitimate words: â€œread,â€ â€œdear,â€ and â€œdare.â€'
  prefs: []
  type: TYPE_NORMAL
- en: Note If a word contains the same letter twice, the collection of all re-arrangements
    may contain several copies of the same string. For our purposes, this is acceptable.
    For a realistic program, you may wish to avoid duplicate entries by using sets
    instead of lists. See [A Note on Lists and Sets](#%28part._sec~3alist-set%29).
    End
  prefs: []
  type: TYPE_NORMAL
- en: 'A systematic enumeration of all possible arrangements is clearly a task for
    a program, as is the search in an English-language dictionary.See [Real-World
    Data: Dictionaries](#%28part._sec~3adict%29) for dealing with real-world dictionaries.
    This section covers the design of the search function, leaving the solution of
    the other problem to the next section. By separating the two, this first section
    can focus on the high-level ideas of systematic program design.'
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s imagine for a moment how we might solve the problem by hand. If you had
    enough time, you might enumerate all possible arrangements of all letters in a
    given word and then just pick those variants that also occur in a dictionary.
    Clearly, a program can proceed in this way too, and this suggests a natural design
    by composition, but, as always, we proceed systematically and start by choosing
    a data representation for our inputs and outputs.
  prefs: []
  type: TYPE_NORMAL
- en: 'At least at first glance, it is natural to represent words as [String](part_one.html#%28tech._string%29)s
    and the result as a list of words or [List-of-strings](#%28tech._list._of._string%29).
    Based on this choice, we can formulate a signature and purpose statement:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds all words that use the same letters as s |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (alternative-wordsÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Next, we need some examples. If the given word is â€œcat,â€ we are dealing with
    three letters: c, a, and t. Some playing around suggests six arrangements of these
    letters: cat, cta, tca, tac, act, and atc. Two of these are actual words: â€œcatâ€
    and â€œact.â€ Because alternative-words produces a list of [String](part_one.html#%28tech._string%29)s,
    there are two ways to represent the result: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "act"  "cat")
    and ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "cat"  "act").
    Fortunately, BSL comes with a way to say the function returns one of two possible
    results:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)Â (alternative-wordsÂ "cat")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "act"Â "cat")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "cat"Â "act"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Stop! Read up on [check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)
    in the documentation.Working through this example exposes two problems:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The first one is about testing. Suppose we had used the word â€œratâ€ for which
    there are three alternatives: â€œrat,â€ â€œtar,â€ and â€œart.â€ In this case, we would
    have to formulate six lists, each of which might be the result of the function.
    For a word like â€œdearâ€ with four possible alternatives, formulating a test would
    be even harder.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The second problem concerns the choice of word representation. Although [String](part_one.html#%28tech._string%29)
    looks natural at first, the examples clarify that some of our functions must view
    words as sequences of letters, with the possibility of rearranging them at will.
    It is possible to rearrange the letters within a [String](part_one.html#%28tech._string%29),
    but lists of letters are obviously better suited for this purpose.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Letâ€™s deal with these problems one at a time, starting with tests.
  prefs: []
  type: TYPE_NORMAL
- en: Assume we wish to formulate a test for alternative-words and "rat". From the
    above, we know that the result must contain "rat", "tar", and "art", but we cannot
    know in which order these words show up in the result.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this situation, [check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)
    comes in handy.See [Intermezzo 1: Beginning Student Language](i1-2.html). We can
    use it with a function that checks whether a list of [String](part_one.html#%28tech._string%29)s
    contains our three [String](part_one.html#%28tech._string%29)s:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (all-words-from-rat?Â w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "rat"Â w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "art"Â w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "tar"Â w)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'With this function, it is easy to formulate a test for alternative-words:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)Â (alternative-wordsÂ "rat")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â all-words-from-rat?) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Note on Data versus Design What this discussion suggests is that the alternative-words
    function constructs a set, not a list. For a detailed discussion of the differences,
    see [A Note on Lists and Sets](#%28part._sec~3alist-set%29). Here it suffices
    to know that sets represent collections of values without regard to the ordering
    of the values or how often these values occur. When a language comes without support
    for data representations of sets, programmers tend to resort to a close alternative,
    such as the List-of-strings representation here. As programs grow, this choice
    may haunt programmers, but addressing this kind of problem is the subject of the
    second book. End
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (all-words-from-rat?Â w)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "rat"Â w)Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "art"Â w)Â ([member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)Â "tar"Â w)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds all words that the letters of some given word spell |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-member-of](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-member-of%29%29)Â (alternative-wordsÂ "cat")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "act"Â "cat")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "cat"Â "act"))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)Â (alternative-wordsÂ "rat")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â all-words-from-rat?) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (alternative-wordsÂ s)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (in-dictionary |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (words->stringsÂ (arrangementsÂ (string->wordÂ s))))) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [List-of-words](#%28tech._list._of._word%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â turns all [Word](#%28tech._word%29)s in low into [String](part_one.html#%28tech._string%29)s
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (words->stringsÂ low)Â ''())
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [List-of-strings](#%28tech._list._of._string%29) -> [List-of-strings](#%28tech._list._of._string%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â picks out all those [String](part_one.html#%28tech._string%29)s that occur
    in the dictionary |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (in-dictionaryÂ los)Â ''())
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 78: Finding alternative words'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'For the problem with a word representation, we punt to the next section. Specifically,
    we say that the next section introduces (1) a data representation for [Word](#%28tech._word%29)s
    suitable for rearranging letters, (2) a data definition for [List-of-words](#%28tech._list._of._word%29),
    and (3) a function that maps a [Word](#%28tech._word%29) to a [List-of-words](#%28tech._list._of._word%29),
    meaning a list of all possible rearrangements:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Word is ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A List-of-words is ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Word](#%28tech._word%29) -> [List-of-words](#%28tech._list._of._word%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds all rearrangements of word |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (arrangementsÂ word)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â word))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'ExerciseÂ 209\. The above leaves us with two additional wishes: a function that
    consumes a [String](part_one.html#%28tech._string%29) and produces its corresponding
    [Word](#%28tech._word%29), and a function for the opposite direction. Here are
    the wish-list entries:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [String](part_one.html#%28tech._string%29) -> [Word](#%28tech._word%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â converts s to the chosen word representation |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (string->wordÂ s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Word](#%28tech._word%29) -> [String](part_one.html#%28tech._string%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â converts w to a string |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (word->stringÂ w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Look up the data definition for [Word](#%28tech._word%29) in the next section
    and complete the definitions of string->word and word->string. Hint You may wish
    to look in the list of functions that BSL provides.
  prefs: []
  type: TYPE_NORMAL
- en: 'With those two small problems out of the way, we return to the design of alternative-words.
    We now have: (1) a signature, (2) a purpose statement, (3) examples and test,
    (4) an insight concerning our choice of data representation, and (5) an idea of
    how to decompose the problem into two major steps.'
  prefs: []
  type: TYPE_NORMAL
- en: 'So, instead of creating a template, we write down the composition we have in
    mind:'
  prefs: []
  type: TYPE_NORMAL
- en: (in-dictionaryÂ (arrangementsÂ s))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The expression says that, given a word s, we use arrangements to create a list
    of all possible rearrangements of the letters and in-dictionary to select those
    rearrangements that also occur in a dictionary.
  prefs: []
  type: TYPE_NORMAL
- en: Stop! Look up the signatures for the two functions to make sure the composition
    works out. What exactly do you need to check?
  prefs: []
  type: TYPE_NORMAL
- en: 'What this expression fails to capture is the fourth point, the decision not
    to use plain strings to rearrange the letters. Before we hand s to arrangements,
    we need to convert it into a word. Fortunately, [exerciseÂ 209](#%28counter._%28exercise._ex~3astring2word%29%29)
    asks for just such a function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (in-dictionary |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (arrangementsÂ (string->wordÂ s))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Similarly, we need to convert the resulting list of words to a list of strings.
    While [exerciseÂ 209](#%28counter._%28exercise._ex~3astring2word%29%29) asks for
    a function that converts a single word, here we need a function that deals with
    lists of them. Time to make another wish:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (in-dictionary |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (words->strings |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (arrangementsÂ (string->wordÂ s)))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Stop! What is the signature for words->strings and what is its purpose?
  prefs: []
  type: TYPE_NORMAL
- en: '[FigureÂ 78](#%28counter._%28figure._fig~3aalternative-words%29%29) collects
    all the pieces. The following exercises ask you to design the remaining functions.'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 210\. Complete the design of the words->strings function specified
    in [figureÂ 78](#%28counter._%28figure._fig~3aalternative-words%29%29). Hint Use
    your solution to [exerciseÂ 209](#%28counter._%28exercise._ex~3astring2word%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 211\. Complete the design of in-dictionary, specified in [figureÂ 78](#%28counter._%28figure._fig~3aalternative-words%29%29).
    Hint See [Real-World Data: Dictionaries](#%28part._sec~3adict%29) for how to read
    a dictionary.'
  prefs: []
  type: TYPE_NORMAL
- en: 12.4Word Games, the Heart of the Problem[ğŸ”—](#(part._sec~3apermute) "Link to
    here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The goal is to design arrangements, a function that consumes a [Word](#%28tech._word%29)
    and produces a list of the wordâ€™s letter-by-letter rearrangements.The mathematical
    term is permutations. This extended exercise reinforces the need for deep wish
    lists, that is, a list of desired functions that seems to grow with every function
    you finish.
  prefs: []
  type: TYPE_NORMAL
- en: 'As mentioned, [String](part_one.html#%28tech._string%29)s could serve as a
    representation of words, but a [String](part_one.html#%28tech._string%29) is atomic
    and the very fact that arrangements needs to rearrange its letters calls for a
    different representation. Our chosen data representation of a word is therefore
    a list of [1String](part_one.html#%28tech._1string%29)s where each item in the
    input represents a letter:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Word is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() or |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [1String](part_one.html#%28tech._1string%29)  [Word](#%28tech._word%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation a [Word](#%28tech._word%29) is a list of [1String](part_one.html#%28tech._1string%29)s
    (letters) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ExerciseÂ 212\. Write down the data definition for List-of-words. Make up examples
    of [Word](#%28tech._word%29)s and [List-of-words](#%28tech._list._of._word%29).
    Finally, formulate the functional example from above with [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29).
    Instead of the full example, consider working with a word of just two letters,
    say "d" and "e".
  prefs: []
  type: TYPE_NORMAL
- en: 'The template of arrangements is that of a list-processing function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Word](#%28tech._word%29) -> [List-of-words](#%28tech._list._of._word%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates all rearrangements of the letters in w |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (arrangementsÂ w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (arrangementsÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In preparation of the fifth step, letâ€™s look at the templateâ€™s [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines:'
  prefs: []
  type: TYPE_NORMAL
- en: 'If the input is ''(), there is only one possible rearrangement of the input:
    the ''() word. Hence the result is ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  ''()),
    the list that contains the empty list as the only item.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Otherwise there is a first letter in the word, and ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)  w)
    is that letter. Also, the recursion produces the list of all possible rearrangements
    for the rest of the word. For example, if the list is
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "d"Â "e"Â "r")
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: then the recursion is (arrangements  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "e"  "r")).
    It will produce the result
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "e"Â "r")
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "r"Â "e")
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ''())) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: To obtain all possible rearrangements for the entire list, we must now insert
    the first item, "d" in our case, into all of these words between all possible
    letters and at the beginning and end.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Our analysis suggests that we can complete arrangements if we can somehow insert
    one letter into all positions of many different words. The last aspect of this
    task description implicitly mentions lists and, following the advice of this chapter,
    calls for an auxiliary function. Letâ€™s call this function insert-everywhere/in-all-words
    and letâ€™s use it to complete the definition of arrangements:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (arrangementsÂ w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._empty~3f%29%29)Â w)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â ''())]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â (insert-everywhere/in-all-wordsÂ ([first](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._first%29%29)Â w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (arrangementsÂ ([rest](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rest%29%29)Â w)))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ExerciseÂ 213\. Design insert-everywhere/in-all-words. It consumes a [1String](part_one.html#%28tech._1string%29)
    and a list of words. The result is a list of words like its second argument, but
    with the first argument inserted at the beginning, between all letters, and at
    the end of all words of the given list.
  prefs: []
  type: TYPE_NORMAL
- en: Start with a complete wish-list entry. Supplement it with tests for empty lists,
    a list with a one-letter word, and another list with a two-letter word, and the
    like. Before you continue, study the following three hints carefully.
  prefs: []
  type: TYPE_NORMAL
- en: 'Hints (1) Reconsider the example from above. It says that "d" needs to be inserted
    into the words ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "e"  "r")
    and ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  "r"  "e").
    The following application is therefore one natural candidate for an example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (insert-everywhere/in-all-wordsÂ "d" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "e"Â "r")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "r"Â "e")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ''()))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '(2) You want to use the BSL+ operation [append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._append%29%29),
    which consumes two lists and produces the concatenation of the two lists:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._append%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "a"Â "b"Â "c")Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â "d"Â "e"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (list "a" "b" "c" "d" "e") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The development of functions like [append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._append%29%29)
    is the subject of [Simultaneous Processing](part_four.html#%28part._ch~3asimu%29).
  prefs: []
  type: TYPE_NORMAL
- en: (3) This solution of this exercise is a series of functions. Patiently stick
    to the design recipe and systematically work through your wish list.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 214\. Integrate arrangements with the partial program from [Word Games,
    Composition Illustrated](#%28part._sec~3apermute-composition%29). After making
    sure that the entire suite of tests passes, run it on some of your favorite examples.
  prefs: []
  type: TYPE_NORMAL
- en: 12.5Feeding Worms[ğŸ”—](#(part._sec~3aworms) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Wormâ€”<wbr>also known as Snakeâ€”<wbr>is one of the oldest computer games. When
    the game starts, a worm and a piece of food appear. The worm is moving toward
    a wall. Donâ€™t let it reach the wall; otherwise the game is over. Instead, use
    the arrow keys to control the wormâ€™s movements.
  prefs: []
  type: TYPE_NORMAL
- en: The goal of the game is to have the worm eat as much food as possible. As the
    worm eats the food, it becomes longer; more and more segments appear. Once a piece
    of food is digested, another piece appears. The wormâ€™s growth endangers the worm
    itself, though. As it grows long enough, it can run into itself and, if it does,
    the game is over, too.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/810fad0f05dc89b29602cef3bea8efeb.png)Â Â ![image](../Images/27c4a040f6089ae6670aab60ca49de45.png)Â Â ![image](../Images/62c770751cd05d00443bbee026d53b24.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 79: Playing Worm'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 79](#%28counter._%28figure._fig~3aworm%29%29) displays a sequence of
    screen shots that illustrates how the game works in practice. On the left, you
    see the initial setting. The worm consists of a single red segment, its head.
    It is moving toward the food, which is displayed as a green disk. The screen shot
    in the center shows a situation when the worm is about to eat some food. In the
    right-most screen shot the worm has run into the right wall. The game is over;
    the player scored 11 points.'
  prefs: []
  type: TYPE_NORMAL
- en: The following exercises guide you through the design and implementation of a
    Worm game. Like [Structures in Lists](#%28part._sec~3asil%29), these exercises
    illustrate how to tackle a nontrivial problem via iterative refinement. That is,
    you donâ€™t design the entire interactive program all at once but in several stages,
    called iterations. Each iteration adds details and refines the programâ€”<wbr>until
    it satisfies you or your customer. If you arenâ€™t satisfied with the outcome of
    the exercises, feel free to create variations.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 215\. Design a world program that continually moves a one-segment worm
    and enables a player to control the movement of the worm with the four cardinal
    arrow keys. Your program should use a red disk to render the one-and-only segment
    of the worm. For each clock tick, the worm should move a diameter.
  prefs: []
  type: TYPE_NORMAL
- en: 'Hints (1) Reread [Designing World Programs](part_one.html#%28part._.D.K._sec~3adesign-world%29)
    to recall how to design world programs. When you define the worm-main function,
    use the rate at which the clock ticks as its argument. See the documentation for
    [on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)
    on how to describe the rate. (2) When you develop a data representation for the
    worm, contemplate the use of two different kinds of representations: a physical
    representation and a logical one. The physical representation keeps track of the
    actual physical position of the worm on the canvas; the logical one counts how
    many (widths of) segments the worm is from the left and the top. For which of
    the two is it easier to change the physical appearances (size of worm segment,
    size of game box) of the â€œgameâ€?'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 216\. Modify your program from [exerciseÂ 215](#%28counter._%28exercise._ex~3aworm1%29%29)
    so that it stops if the worm has reached the walls of the world. When the program
    stops because of this condition, it should render the final scene with the text
    "worm hit border" in the lower left of the world scene. Hint You can use the [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    clause in [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    to render the last world in a special way.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 217\. Develop a data representation for worms with tails. A wormâ€™s
    tail is a possibly empty sequence of â€œconnectedâ€ segments. Here â€œconnectedâ€ means
    that the coordinates of a segment differ from those of its predecessor in at most
    one direction. To keep things simple, treat all segmentsâ€”<wbr>head and tail segmentsâ€”<wbr>the
    same.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now modify your program from [exerciseÂ 215](#%28counter._%28exercise._ex~3aworm1%29%29)
    to accommodate a multi-segment worm. Keep things simple: (1) your program may
    render all worm segments as red disks and (2) ignore that the worm may run into
    the wall or itself. Hint One way to realize the wormâ€™s movement is to add a segment
    in the direction in which it is moving and to delete the last one.'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Posn](part_one.html#%28tech._posn%29) -> [Posn](part_one.html#%28tech._posn%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â ??? |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-satisfied%29%29)Â (food-createÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 1Â 1))Â not=-1-1?)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (food-createÂ p)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (food-check-create |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â pÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â ([random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)Â MAX)Â ([random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)Â MAX))))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Posn](part_one.html#%28tech._posn%29)  [Posn](part_one.html#%28tech._posn%29)
    -> [Posn](part_one.html#%28tech._posn%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â generative recursion |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â ??? |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (food-check-createÂ pÂ candidate)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([equal?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._equal~3f%29%29)Â pÂ candidate)Â (food-createÂ p)Â candidate))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Posn](part_one.html#%28tech._posn%29) -> [Boolean](part_one.html#%28tech._boolean%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â use for testing only |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (not=-1-1?Â p)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([not](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._not%29%29)Â ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â 1)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â 1))))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 80: Random placement of food'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 218\. Redesign your program from [exerciseÂ 217](#%28counter._%28exercise._ex~3aworm3%29%29)
    so that it stops if the worm has run into the walls of the world or into itself.
    Display a message like the one in [exerciseÂ 216](#%28counter._%28exercise._ex~3aworm2%29%29)
    to explain whether the program stopped because the worm hit the wall or because
    it ran into itself.
  prefs: []
  type: TYPE_NORMAL
- en: Hints (1) To determine whether a worm is going to run into itself, check whether
    the position of the head would coincide with one of its old tail segments if it
    moved. (2) Read up on the [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    function.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 219\. Equip your program from [exerciseÂ 218](#%28counter._%28exercise._ex~3aworm4%29%29)
    with food. At any point in time, the box should contain one piece of food. To
    keep things simple, a piece of food is of the same size as a worm segment. When
    the wormâ€™s head is located at the same position as the food, the worm eats the
    food, meaning the wormâ€™s tail is extended by one segment. As the piece of food
    is eaten, another one shows up at a different location.
  prefs: []
  type: TYPE_NORMAL
- en: Adding food to the game requires changes to the data representation of world
    states. In addition to the worm, the states now also include a representation
    of the food, especially its current location. A change to the game representation
    suggests new functions for dealing with events, though these functions can reuse
    the functions for the worm (from [exerciseÂ 218](#%28counter._%28exercise._ex~3aworm4%29%29))
    and their test cases. It also means that the tick handler must not only move the
    worm; in addition it must manage the eating process and the creation of new food.
  prefs: []
  type: TYPE_NORMAL
- en: Your program should place the food randomly within the box. To do so properly,
    you need a design technique that you havenâ€™t seen beforeâ€”<wbr>so-called generative
    recursion, which is introduced in [Generative Recursion](part_five.html)â€”<wbr>so
    we provide these functions in [figureÂ 80](#%28counter._%28figure._fig~3arandom~3aplacement%29%29).For
    the workings of [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29),
    read the manual or [exerciseÂ 99](part_one.html#%28counter._mix._%28exercise._mix-ufo-move%29%29).
    Before you use them, however, explain how these functions workâ€”<wbr>assuming MAX
    is greater than 1â€”<wbr>and then formulate purpose statements.
  prefs: []
  type: TYPE_NORMAL
- en: Hints (1) One way to interpret â€œeatingâ€ is to say that the head moves where
    the food used to be located and the tail grows by one segment, inserted where
    the head used to be. Why is this interpretation easy to design as a function?
    (2) We found it useful to add a second parameter to the worm-main function for
    this last step, a Boolean that determines whether [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    displays the current state of the world in a separate window; see the documentation
    for [state](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._state%29%29)
    on how to ask for this information.
  prefs: []
  type: TYPE_NORMAL
- en: Once you have finished this last exercise, you have a complete worm game. Now
    modify your worm-main function so that it returns the length of the final worm.
    Then use Create Executable (under the Racket menu) in DrRacket to turn your program
    into something that anybody can launch, not just someone who knows about BSL+.
  prefs: []
  type: TYPE_NORMAL
- en: You may also wish to add extra twists to the game, to make it really your game.
    We experimented with funny end-of-game messages, having several different pieces
    of food around, with placing extra obstacles in the room, and a few other ideas.
    What can you think of?
  prefs: []
  type: TYPE_NORMAL
- en: 12.6Simple Tetris[ğŸ”—](#(part._sec~3atetris) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Tetris is another game from the early days of software. Since the design of
    a full-fledged Tetris game demands a lot of labor with only marginal profit, this
    section focuses on a simplified version. If you feel ambitious, look up how Tetris
    really works and design a full-fledged version.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/8315523907da4f63214084ecc1437c8e.png) Â Â Â  ![image](../Images/801fe337991a9cfcaa467e674f02ff08.png)
    Â Â Â  ![image](../Images/8ccecf22218b1564967feb18e30dcdb5.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 81: Simple Tetris'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In our simplified version, the game starts with individual blocks dropping from
    the top of the scene. Once one of them lands on the ground, it comes to a rest
    and another block starts dropping down from some random place. A player can control
    the dropping block with the â€œleftâ€ and â€œrightâ€ arrow keys. Once a block lands
    on the floor of the canvas or on top of some already resting block, it comes to
    rest and becomes immovable. In a short time, the blocks stack up; if a stack of
    blocks reaches the ceiling of the canvas, the game is over. Naturally the objective
    of this game is to land as many blocks as possible. See [figureÂ 81](#%28counter._%28figure._fig~3atetris%29%29)
    for an illustration of the idea.
  prefs: []
  type: TYPE_NORMAL
- en: 'Given this description, we can turn to the design guidelines for interactive
    programs from [Designing World Programs](part_one.html#%28part._.D.K._sec~3adesign-world%29).
    They call for separating constant properties from variable ones. The former can
    be written down as â€œphysicalâ€ and graphical constants; the latter suggest the
    data that makes up all possible states of the simple Tetris game. So here are
    some examples:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The width and the height of the game are fixed as are the blocks. In terms
    of BSL+, you want definitions like these:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 10)Â ;Â #
    of blocks, horizontally |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â SIZEÂ 10)Â ;Â blocks
    are squares |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â SCENE-SIZEÂ ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â WIDTHÂ SIZE))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â BLOCKÂ ;Â red
    squares with black rims |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â SIZEÂ 1)Â "solid"Â "red")
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â SIZEÂ "outline"Â "black")))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Explain these definitions before you read on.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The â€œlandscapesâ€ of blocks differ from game to game and from clock tick to clock
    tick. Letâ€™s make this more precise. The appearance of the blocks remains the same;
    their positions differ.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We are now left with the central problem of designing a data representation
    for the dropping blocks and the landscapes of blocks on the ground. When it comes
    to the dropping block, there are againSee [exerciseÂ 215](#%28counter._%28exercise._ex~3aworm1%29%29)
    for a related design decision. two possibilities: one is to choose a â€œphysicalâ€
    representation, another would be a â€œlogicalâ€ one. The physical representation
    keeps track of the actual physical position of the blocks on the canvas; the logical
    one counts how many block widths a block is from the left and the top. When it
    comes to the resting blocks, there are even more choices than for individual blocks:
    a list of physical positions, a list of logical positions, a list of stack heights,
    and so forth.'
  prefs: []
  type: TYPE_NORMAL
- en: 'In this section we choose the data representation for you:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â tetrisÂ [blockÂ landscape])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â blockÂ [xÂ y])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Tetris is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-tetris  [Block](#%28tech._block%29)  [Landscape](#%28tech._landscape%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Landscape is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Block](#%28tech._block%29)  [Landscape](#%28tech._landscape%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Block is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-block  [N](#%28tech._n%29)  [N](#%28tech._n%29)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretations |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â (make-block  x  y) depicts a block whose left |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â corner is ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  x  SIZE)
    pixels from the left and |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  y  SIZE)
    pixels from the top; |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â (make-tetris  b0  ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)  b1  b2  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    means b0 is the |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â dropping block, while b1, b2, and ... are resting |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'This is what we dubbed the logical representation, because the coordinates
    do not reflect the physical location of the blocks, just the number of block sizes
    they are from the origin. Our choice implies that x is always between 0 and WIDTH
    (exclusive) and that y is between 0 and HEIGHT (exclusive), but we ignore this
    knowledge.ExerciseÂ 220\. When you are presented with a complex data definitionâ€”<wbr>like
    the one for the state of a Tetris gameâ€”<wbr>you start by creating instances of
    the various data collections. Here are some suggestive names for examples you
    can later use for functional examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â landscape0Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â block-droppingÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â tetris0Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â tetris0-dropÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â block-landedÂ (make-blockÂ 0Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHTÂ 1)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â block-on-blockÂ (make-blockÂ 0Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHTÂ 2)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Design the program tetris-render, which turns a given instance of [Tetris](#%28tech._tetri%29)
    into an [Image](part_one.html#%28tech._image%29). Use DrRacketâ€™s interactions
    area to develop the expression that renders some of your (extremely) simple data
    examples. Then formulate the functional examples as unit tests and the function
    itself.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 221\. Design the interactive program tetris-main, which displays blocks
    dropping in a straight line from the top of the canvas and landing on the floor
    or on blocks that are already resting. The input to tetris-main should determine
    the rate at which the clock ticks. See the documentation of [on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)
    for how to specify the rate.
  prefs: []
  type: TYPE_NORMAL
- en: To discover whether a block landed, we suggest you drop it and check whether
    it is on the floor or it overlaps with one of the blocks on the list of resting
    blocks. Hint Read up on the [member?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._member~3f%29%29)
    primitive.
  prefs: []
  type: TYPE_NORMAL
- en: When a block lands, your program should immediately create another block that
    descends on the column to the right of the current one. If the current block is
    already in the right-most column, the next block should use the left-most one.
    Alternatively, define the function block-generate, which randomly selects a column
    different from the current one; see [exerciseÂ 219](#%28counter._%28exercise._ex~3aworm5%29%29)
    for inspiration.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 222\. Modify the program from [exerciseÂ 221](#%28counter._%28exercise._ex~3atetris1%29%29)
    so that a player can control the horizontal movement of the dropping block. Each
    time the player presses the "left" arrow key, the dropping block should shift
    one column to the left unless it is in column 0 or there is already a stack of
    resting blocks to its left. Similarly, each time the player presses "right", the
    dropping block should move one column to the right if possible.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 223\. Equip the program from [exerciseÂ 222](#%28counter._%28exercise._ex~3atetris2%29%29)
    with a [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    clause. The game ends when one of the columns contains enough blocks to â€œtouchâ€
    the top of the canvas.
  prefs: []
  type: TYPE_NORMAL
- en: Once you have solved [exerciseÂ 223](#%28counter._%28exercise._ex~3atetris3%29%29),
    you have a bare-bones Tetris game. You may wish to polish it a bit before you
    show it to your friends. For example, the final canvas could display a text that
    says how many blocks the player was able to stack up. Or every canvas could contain
    such a text. The choice is yours.
  prefs: []
  type: TYPE_NORMAL
- en: 12.7Full Space War[ğŸ”—](#(part._sec~3aspace-war) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[Itemizations and Structures](part_one.html#%28part._ch~3amix%29) alludes to
    a space invader game with little action; the player can merely move the ground
    force back and forth. [Lists and World](#%28part._sec~3alist-world%29) enables
    the player to fire as many shots as desired. This section poses exercises that
    help you complete this game.'
  prefs: []
  type: TYPE_NORMAL
- en: As always, a UFO is trying to land on Earth. The playerâ€™s task is to prevent
    the UFO from landing. To this end, the game comes with a tank that may fire an
    arbitrary number of shots. When one of these shots comes close enough to the UFOâ€™s
    center of gravity, the game is over and the player won. If the UFO comes close
    enough to the ground, the player lost.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 224\. Use the lessons learned from the preceding two sections and
    design the game extension slowly, adding one feature of the game after another.
    Always use the design recipe and rely on the guidelines for auxiliary functions.
    If you like the game, add other features: show a running text; equip the UFO with
    charges that can eliminate the tank; create an entire fleet of attacking UFOs;
    and above all, use your imagination.'
  prefs: []
  type: TYPE_NORMAL
- en: If you donâ€™t like UFOs and tanks shooting at each other, use the same ideas
    to produce a similar, civilized game.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 225\. Design a fire-fighting game.
  prefs: []
  type: TYPE_NORMAL
- en: The game is set in the western states where fires rage through vast forests.
    It simulates an airborne fire-fighting effort. Specifically, the player acts as
    the pilot of an airplane that drops loads of water on fires on the ground. The
    player controls the planeâ€™s horizontal movements and the release of water loads.
  prefs: []
  type: TYPE_NORMAL
- en: Your game software starts fires at random places on the ground. You may wish
    to limit the number of fires, making them a function of how many fires are currently
    burning or other factors. The purpose of the game is to extinguish all fires in
    a limited amount of time. Hint Use an iterative design approach as illustrated
    in this chapter to create this game.
  prefs: []
  type: TYPE_NORMAL
- en: 12.8Finite State Machines[ğŸ”—](#(part._sec~3asec-fsm-list) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Finite state machines (FSMs) and regular expressions are ubiquitous elements
    of programming. As [Finite State Worlds](part_one.html#%28part._sec~3aworlds-more%29)
    explains, state machines are one way to think about world programs. Conversely,
    [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29) shows how
    to design world programs that implement an FSM and check whether a player presses
    a specific series of keystrokes.
  prefs: []
  type: TYPE_NORMAL
- en: As you may also recall, a finite state machine is equivalent to a regular expression.
    Hence, computer scientists tend to say that an FSM accepts the keystrokes that
    match a particular regular expression, like this one
  prefs: []
  type: TYPE_NORMAL
- en: a (b|c)* d
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: from [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29).
    If you wanted a program that recognizes a different pattern, say,
  prefs: []
  type: TYPE_NORMAL
- en: a (b|c)* a
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: you would just modify the existing program appropriately. The two programs would
    resemble each other, and if you were to repeat this exercise for several different
    regular expressions, you would end up with a whole bunch of similar-looking programs.
  prefs: []
  type: TYPE_NORMAL
- en: A natural idea is to look for a general solution, that is, a world program that
    consumes a data representation of an FSM and recognizes whether a player presses
    a matching sequence of keys. This section presents the design of just such a world
    program, though a greatly simplified one. In particular, the FSMs come without
    initial or final states, and the matching ignores the actual keystrokes; instead
    the transition from one state to another takes place whenever any key is pressed.
    Furthermore, we require that the states are color strings. That way, the FSM-interpreting
    program can simply display the current state as a color.
  prefs: []
  type: TYPE_NORMAL
- en: 'Note on Design Choices Here is another attempt to generalize:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Sample Problem Design a program that interprets a given FSM on a specific list
    of [KeyEvent](part_one.html#%28tech._keyevent%29)s. That is, the program consumes
    a data representation of an FSM and a string. Its result is #true if the string
    matches the regular expression that corresponds to the FSM; otherwise it is #false.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: As it turns out, however, you cannot design this program with the principles
    of the first two parts. Indeed, solving this problem has to wait until [Algorithms
    that Backtrack](part_five.html#%28part._ch~3abacktrack%29); see [exerciseÂ 476](part_five.html#%28counter._fsm._%28exercise._ex~3afsm-match%29%29).
    End
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An FSM is one of: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â â€“  ''() |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Transition](#%28tech._transition%29)  [FSM](#%28tech._fsm%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â transitionÂ [currentÂ next])
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Transition is a structure: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-transition  [FSM-State](#%28tech._fsm._state%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â FSM-State is a [Color](part_one.html#%28tech._data-uni._color%29). |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation An [FSM](#%28tech._fsm%29) represents the transitions that
    a |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finite state machine can take from one state to another |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â in reaction to keystrokes |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 82: Representing and interpreting finite state machines in general'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The simplified problem statement dictates a number of points, including the
    need for a data definition for the representation of FSMs, the nature of its states,
    and their appearance as an image. [FigureÂ 82](#%28counter._%28figure._fig~3afsm1%29%29)
    collects this information. It starts with a data definition for [FSM](#%28tech._fsm%29)s.
    As you can see, an [FSM](#%28tech._fsm%29) is just a list of [Transition](#%28tech._transition%29)s.
    We must use a list because we want our world program to work with any FSM and
    that means a finite, but arbitrarily large, number of states. Each [Transition](#%28tech._transition%29)
    combines two states in a structure: the current state and the next state, that
    is, the one that the machine transitions to when the player presses a key. The
    final part of the data definition says that a state is just the name of a color.'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 226\. Design state=?, an equality predicate for states.
  prefs: []
  type: TYPE_NORMAL
- en: 'Since this definition is complex, we follow the design recipe and create an
    example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â fsm-traffic
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._list%29%29)Â (make-transitionÂ "red"Â "green")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â (make-transitionÂ "green"Â "yellow") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â (make-transitionÂ "yellow"Â "red"))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: You probably guessed that this transition table describes a traffic light. Its
    first transition tells us that the traffic light jumps from "red" to "green",
    the second one represents the transition from "green" to "yellow", and the last
    one is for "yellow" to "red".
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 227\. The BW Machine is an FSM that flips from black to white and back
    to black for every key event. Formulate a data representation for the BW Machine.
  prefs: []
  type: TYPE_NORMAL
- en: 'Clearly, the solution to our problem is a world program:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [FSM](#%28tech._fsm%29) -> ??? |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â match the keys pressed with the given [FSM](#%28tech._fsm%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (simulateÂ an-fsm)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: It is supposed to consume a [FSM](#%28tech._fsm%29), but we have no clue what
    the program is to produce. We call the program simulate because it acts like the
    given [FSM](#%28tech._fsm%29) in response to a playerâ€™s keystrokes.
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s follow the design recipe for world programs anyway to see how far it takes
    us. It tells us to differentiate between those things in the â€œreal worldâ€ that
    change and those that remain the same. While the simulate function consumes an
    instance of [FSM](#%28tech._fsm%29), we also know that this [FSM](#%28tech._fsm%29)
    does not change. What changes is the current state of the machine.
  prefs: []
  type: TYPE_NORMAL
- en: This analysis suggests the following data definition
  prefs: []
  type: TYPE_NORMAL
- en: ;Â A SimulationState.v1 is an [FSM-State](#%28tech._fsm._state%29).
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: According to the design recipe for world programs, this data definition completes
    the main function:The [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29)
    constant represents an â€œinvisibleâ€ image. It is a good default value for writing
    down the headers of rendering functions.
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (simulate.v1Â fsm0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â initial-state
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render-state.v1]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â find-next-state.v1]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'and implies a wish list with two entries:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [SimulationState.v1](#%28tech._simulationstate..v1%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders a world state as an image |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-state.v1Â s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [SimulationState.v1](#%28tech._simulationstate..v1%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [SimulationState.v1](#%28tech._simulationstate..v1%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds the next state from ke and cs |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-state.v1Â csÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â cs) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The sketch raises two questions. First, there is the issue of how the very
    first [SimulationState.v1](#%28tech._simulationstate..v1%29) is determined. Currently,
    the chosen state, initial-state, is marked in grey to warn you about the issue.
    Second, the second entry on the wish list must cause some consternation:'
  prefs: []
  type: TYPE_NORMAL
- en: How can find-next-state possibly find the next state when all it is given is
    the current state and a keystroke?
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This question rings especially true because, according to the simplified problem
    statement, the exact nature of the keystroke is irrelevant; the FSM transitions
    to the next state regardless of which key is pressed.What this second issue exposes
    is a fundamental limitation of BSL+. To appreciate this limitation, we start with
    a work-around. Basically, the analysis demands that the find-next-state function
    receives not only the current state but also the [FSM](#%28tech._fsm%29) so that
    it can search the list of transitions and pick the next state. In other words,
    the state of the world must include bothAlonzo Church and Alan Turing, the first
    two computer scientists, proved in the 1930s that all programming languages can
    compute certain functions on numbers. Hence, they argued that all programming
    languages were equal. The first author of this book [disagrees](Https://felleisen.org/matthias/papers.html#scp91-felleisen).
    He distinguishes languages according to how they allow programmers to express
    solutions. the current state of the [FSM](#%28tech._fsm%29) and the [FSM](#%28tech._fsm%29)
    itself:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â fsÂ [fsmÂ current])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A SimulationState.v2 is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-fs  [FSM](#%28tech._fsm%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'According to the world design recipe, this change also means that the key-event
    handler must return this combination:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders a world state as an image |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render-state.v2Â s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [SimulationState.v2](#%28tech._simulationstate..v2%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds the next state from ke and cs |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-state.v2Â csÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â cs) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Finally, the main function must now consume two arguments: the [FSM](#%28tech._fsm%29)
    and its first state. After all, the various [FSM](#%28tech._fsm%29)s that simulate
    consumes come with all kinds of states; we cannot assume that all of them have
    the same initial state. Here is the revised function header:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [FSM](#%28tech._fsm%29)  [FSM-State](#%28tech._fsm._state%29) -> [SimulationState.v2](#%28tech._simulationstate..v2%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â match the keys pressed with the given [FSM](#%28tech._fsm%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (simulate.v2Â an-fsmÂ s0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â (make-fsÂ an-fsmÂ s0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â state-as-colored-square]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â find-next-state]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Letâ€™s return to the example of the traffic-light [FSM](#%28tech._fsm%29). For
    this machine, it would be best to apply simulate to the machine and "red":'
  prefs: []
  type: TYPE_NORMAL
- en: (simulate.v2Â fsm-trafficÂ "red")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Stop! Why do you think "red" is good for traffic lights?Engineers call "red"
    the safe state.
  prefs: []
  type: TYPE_NORMAL
- en: Note on Expressive Power Given the work-around, we can now explain the limitation
    of BSL. Even though the given [FSM](#%28tech._fsm%29) does not change during the
    course of the simulation, its description must become a part of the worldâ€™s state.
    Ideally, the program should express that the description of the [FSM](#%28tech._fsm%29)
    remains constant, but instead the program must treat the [FSM](#%28tech._fsm%29)
    as part of the ever-changing state. The reader of a program cannot deduce this
    fact from the first piece of [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    alone.
  prefs: []
  type: TYPE_NORMAL
- en: 'The next part of the book resolves this conundrum with the introduction of
    a new programming language and a specific linguistic construct: ISL and local
    definitions. For details, see [Local Definitions Add Expressive Power](part_three.html#%28part._sec~3alocal-is-power%29).
    End'
  prefs: []
  type: TYPE_NORMAL
- en: 'At this point, we can turn to the wish list and work through its entries, one
    at a time. The first one, the design of state-as-colored-square, is so straightforward
    that we simply provide the complete definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders current world state as a colored square |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (state-as-colored-square
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (make-fsÂ fsm-trafficÂ "red")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 100Â "solid"Â "red"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (state-as-colored-squareÂ an-fsm)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 100Â "solid"Â (fs-currentÂ an-fsm)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In contrast, the design of the key-event handler deserves some discussion.
    Recall the header material:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [SimulationState.v2](#%28tech._simulationstate..v2%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)
    -> [SimulationState.v2](#%28tech._simulationstate..v2%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds the next state from an-fsm and ke |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â an-fsm) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'According to the design recipe, the handler must consume a state of the world
    and a [KeyEvent](part_one.html#%28tech._keyevent%29), and it must produce the
    next state of the world. This articulation of the signature in plain words also
    guides the design of examples. Here are the first two:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (find-next-stateÂ (make-fsÂ fsm-trafficÂ "red")Â "n") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-fsÂ fsm-trafficÂ "green")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (find-next-stateÂ (make-fsÂ fsm-trafficÂ "red")Â "a") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-fsÂ fsm-trafficÂ "green")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The examples say that when the current state combines the fsm-traffic machine
    and its "red" state, the result combines the same [FSM](#%28tech._fsm%29) with
    "green", regardless of whether the player hit "n" or "a" on the keyboard. Here
    is one more example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (find-next-stateÂ (make-fsÂ fsm-trafficÂ "green")Â "q") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-fsÂ fsm-trafficÂ "yellow")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Interpret the example before reading on. Can you think of another one?Since
    the function consumes a structure, we write down a template for structures processing:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fs-fsmÂ an-fsm)Â [..](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._....%29%29)Â (fs-currentÂ an-fsm)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Furthermore, because the desired result is a [SimulationState.v2](#%28tech._simulationstate..v2%29),
    we can refine the template with the addition of an appropriate constructor:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-fs |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fs-fsmÂ an-fsm)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fs-currentÂ an-fsm)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The examples suggest that the extracted [FSM](#%28tech._fsm%29) becomes the
    first component of the new [SimulationState.v2](#%28tech._simulationstate..v2%29)
    and that the function really just needs to compute the next state from the current
    one and the list of [Transition](#%28tech._transition%29)s that make up the given
    [FSM](#%28tech._fsm%29). Because the latter is arbitrarily long, we make up a
    wishâ€”<wbr>a find function that traverses the list to look for a [Transition](#%28tech._transition%29)
    whose current state is (fs-current  an-fsm)â€”<wbr>and finish the definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (find-next-stateÂ an-fsmÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-fs |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (fs-fsmÂ an-fsm) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (findÂ (fs-fsmÂ an-fsm)Â (fs-currentÂ an-fsm)))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Here is the formulation of the new wish:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [FSM](#%28tech._fsm%29)  [FSM-State](#%28tech._fsm._state%29) -> [FSM-State](#%28tech._fsm._state%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds the state representing current in transitions |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â and retrieves the next field |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (findÂ fsm-trafficÂ "red")Â "green")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (findÂ fsm-trafficÂ "green")Â "yellow")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-error%29%29)Â (findÂ fsm-trafficÂ "black")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â "not found: black") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (findÂ transitionsÂ current)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â current) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The examples are derived from the examples for find-next-state.
  prefs: []
  type: TYPE_NORMAL
- en: Stop! Develop some additional examples, then tackle the exercises.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 228\. Complete the design of find.
  prefs: []
  type: TYPE_NORMAL
- en: Once the auxiliary functions are tested, use simulate to play with fsm-traffic
    and the BW Machine from [exerciseÂ 227](#%28counter._%28exercise._ex~3afsm-design2%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: Our simulation program is intentionally quite restrictive. In particular, you
    cannot use it to represent [FSM](#%28tech._fsm%29)s that transition from one state
    to another depending on which key a player presses. Given the systematic design,
    though, you can extend the program with such capabilities.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 229\. Here is a revised data definition for [Transition](#%28tech._transition%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â ktransitionÂ [currentÂ keyÂ next])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Transition.v2 is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-ktransition  [FSM-State](#%28tech._fsm._state%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Represent the FSM from [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)
    using lists of [Transition.v2](#%28tech._transition..v2%29)s; ignore errors and
    final states.
  prefs: []
  type: TYPE_NORMAL
- en: Modify the design of simulate so that it deals with keystrokes in the appropriate
    manner now. Follow the design recipe, starting with the adaptation of the data
    examples.
  prefs: []
  type: TYPE_NORMAL
- en: 'Use the revised program to simulate a run of the FSM from [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)
    on the following sequence of keystrokes: "a", "b", "b", "c", and "d".'
  prefs: []
  type: TYPE_NORMAL
- en: Finite state machines do come with initial and final states. When a program
    that â€œrunsâ€ an [FSM](#%28tech._fsm%29) reaches a final state, it should stop.
    The final exercise revises the data representation of [FSM](#%28tech._fsm%29)s
    one more time to introduce these ideas.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 230\. Consider the following data representation for FSMs:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â fsmÂ [initialÂ transitionsÂ final])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â transitionÂ [currentÂ keyÂ next])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An FSM.v2 is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-fsm  [FSM-State](#%28tech._fsm._state%29)  [LOT](#%28tech._lot%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A LOT is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cons%29%29)  [Transition.v3](#%28tech._transition..v3%29)  [LOT](#%28tech._lot%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Transition.v3 is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-transition  [FSM-State](#%28tech._fsm._state%29)  [KeyEvent](part_one.html#%28tech._keyevent%29)  [FSM-State](#%28tech._fsm._state%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Represent the FSM from [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)
    in this context.
  prefs: []
  type: TYPE_NORMAL
- en: Design the function fsm-simulate, which accepts an [FSM.v2](#%28tech._fsm..v2%29)
    and runs it on a playerâ€™s keystrokes. If the sequence of keystrokes forces the
    [FSM.v2](#%28tech._fsm..v2%29) to reach a final state, fsm-simulate stops. Hint
    The function uses the initial field of the given fsm structure to track the current
    state.
  prefs: []
  type: TYPE_NORMAL
- en: Note on Iterative Refinement These last two projects introduce the notion of
    â€œdesign by iterative refinement.â€ The basic idea is that the first program implements
    only a fraction of the desired behavior, the next one a bit more, and so on. Eventually
    you end up with a program that exhibits all of the desired behavior, or at least
    enough of it to satisfy a customer. For more details, see [Iterative Refinement](part_four.html#%28part._ch~3afiles%29).
    End
  prefs: []
  type: TYPE_NORMAL
- en: 13Summary[ğŸ”—](#(part._ch~3asummary2) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'This second part of the book is about the design of programs that deal with
    arbitrarily large data. As you can easily imagine, software is particularly useful
    when it is used on information that comes without prespecified size limits, meaning
    â€œarbitrarily large dataâ€ is a critical step on your way to becoming a real programmer.
    In this spirit, we suggest that you take away three lessons:'
  prefs: []
  type: TYPE_NORMAL
- en: This part refines the design recipe to deal with self-references and cross-references
    in data definitions. The occurrence of the former calls for the design of recursive
    functions, and the occurrence of the latter calls for auxiliary functions.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Complex problems call for a decomposition into separate problems. When you
    decompose a problem, you need two pieces: functions that solve the separate problems
    and data definitions that compose these separate solutions into a single one.
    To ensure that the composition works after you have spent time on the separate
    programs, you need to formulate your â€œwishesâ€ together with the required data
    definitions.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A decomposition-composition design is especially useful when the problem statement
    implicitly or explicitly mentions auxiliary tasks, when the coding step for a
    function calls for a traversal of an(other) arbitrarily large piece of data, andâ€”<wbr>perhaps
    surprisinglyâ€”<wbr>when a general problem is somewhat easier to solve than the
    specific one described in the problem statement.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Pragmatics matter. If you wish to design [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    programs, you need to understand its various clauses and what they accomplish.
    Or, if your task is to design programs that solve mathematical problems, you had
    better make sure you know which mathematical operations the chosen language and
    its libraries offer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'While this part mostly focuses on lists as a good example of arbitrarily large
    dataâ€”<wbr>because they are practically useful in languages such as Haskell, Lisp,
    ML, Racket, and Schemeâ€”<wbr>the ideas apply to all kinds of such data: files,
    file folders, databases, and the like.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Intertwined Data](part_four.html) continues the exploration of â€œlargeâ€ structured
    data and demonstrates how the design recipe scales to the most complex kind of
    data. In the meantime, the next part takes care of an important worry you should
    have at this point, namely, that a programmerâ€™s work is all about creating the
    same kind of programs over and over and over again.'
  prefs: []
  type: TYPE_NORMAL
