- en: Dependencies
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 依赖项
- en: 原文：[https://rust-exercises.com/100-exercises/05_ticket_v2/11_dependencies.html](https://rust-exercises.com/100-exercises/05_ticket_v2/11_dependencies.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://rust-exercises.com/100-exercises/05_ticket_v2/11_dependencies.html](https://rust-exercises.com/100-exercises/05_ticket_v2/11_dependencies.html)
- en: A package can depend on other packages by listing them in the `[dependencies]`
    section of its `Cargo.toml` file.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 一个包可以通过在其 `Cargo.toml` 文件的 `[dependencies]` 部分中列出其他包来依赖于其他包。
- en: 'The most common way to specify a dependency is by providing its name and version:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 指定依赖项最常见的方式是提供其名称和版本：
- en: '[PRE0]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'This will add `thiserror` as a dependency to your package, with a **minimum**
    version of `1.0.0`. `thiserror` will be pulled from [crates.io](https://crates.io),
    Rust''s official package registry. When you run `cargo build`, `cargo` will go
    through a few stages:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 这将为您的包添加 `thiserror` 作为依赖项，其 **最小** 版本为 `1.0.0`。`thiserror` 将从 [crates.io](https://crates.io)，Rust
    的官方包注册处获取。当您运行 `cargo build` 时，`cargo` 将经过几个阶段：
- en: Dependency resolution
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 依赖项解析
- en: Downloading the dependencies
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载依赖项
- en: Compiling your project (your own code and the dependencies)
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编译您的项目（您的代码和依赖项）
- en: 'Dependency resolution is skipped if your project has a `Cargo.lock` file and
    your manifest files are unchanged. A lockfile is automatically generated by `cargo`
    after a successful round of dependency resolution: it contains the exact versions
    of all dependencies used in your project, and is used to ensure that the same
    versions are consistently used across different builds (e.g. in CI). If you''re
    working on a project with multiple developers, you should commit the `Cargo.lock`
    file to your version control system.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的项目有一个 `Cargo.lock` 文件且您的清单文件未更改，则将跳过依赖项解析。`cargo` 在成功的一轮依赖项解析后自动生成锁文件：它包含项目中使用的所有依赖项的确切版本，并用于确保在不同构建（例如在
    CI 中）中始终使用相同的版本。如果您在一个有多个开发者的项目上工作，您应该将 `Cargo.lock` 文件提交到您的版本控制系统。
- en: You can use `cargo update` to update the `Cargo.lock` file with the latest (compatible)
    versions of all your dependencies.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用 `cargo update` 来更新 `Cargo.lock` 文件，使其包含所有依赖项的最新（兼容）版本。
- en: '[Path dependencies](#path-dependencies)'
  id: totrans-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[路径依赖](#path-dependencies)'
- en: You can also specify a dependency using a **path**. This is useful when you're
    working on multiple local packages.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以使用 **路径** 来指定依赖项。当您在多个本地包上工作时，这很有用。
- en: '[PRE1]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The path is relative to the `Cargo.toml` file of the package that's declaring
    the dependency.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 路径相对于声明依赖项的包的 `Cargo.toml` 文件是相对的。
- en: '[Other sources](#other-sources)'
  id: totrans-15
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[其他来源](#other-sources)'
- en: Check out the [Cargo documentation](https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html)
    for more details on where you can get dependencies from and how to specify them
    in your `Cargo.toml` file.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 查阅 [Cargo 文档](https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html)，了解更多关于您可以从哪里获取依赖项以及如何在您的
    `Cargo.toml` 文件中指定它们的信息。
- en: '[Dev dependencies](#dev-dependencies)'
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[开发依赖](#dev-dependencies)'
- en: You can also specify dependencies that are only needed for development—i.e.
    they only get pulled in when you're running `cargo test`.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以指定仅用于开发的依赖项——即只有在您运行 `cargo test` 时才会被拉入。
- en: 'They go in the `[dev-dependencies]` section of your `Cargo.toml` file:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 它们位于您的 `Cargo.toml` 文件的 `[dev-dependencies]` 部分：
- en: '[PRE2]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: We've been using a few of these throughout the book to shorten our tests.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在整本书中使用了其中的一些来缩短我们的测试。
- en: '[Exercise](#exercise)'
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[练习](#exercise)'
- en: The exercise for this section is located in [`05_ticket_v2/11_dependencies`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/05_ticket_v2/11_dependencies)
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 本节练习位于 [05_ticket_v2/11_dependencies](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/05_ticket_v2/11_dependencies)
