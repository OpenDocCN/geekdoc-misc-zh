- en: VÂ Generative RecursionğŸ”—
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: åŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/part_five.html](https://htdp.org/2024-11-6/Book/part_five.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| Â Â Â Â [25Â Non-standard Recursion](#%28part._ch~3astrange-recursions%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [25.1Â Recursion without Structure](#%28part._sec~3abundle%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [25.2Â Recursion that Ignores Structure](#%28part._sec~3aquick-sort%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [26Â Designing Algorithms](#%28part._ch~3adesign-algo%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [26.1Â Adapting the Design Recipe](#%28part._.Adapting_the_.Design_.Recipe%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [26.2Â Termination](#%28part._.Termination%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [26.3Â Structural versus Generative Recursion](#%28part._sec~3astruct-gen-rec%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [26.4Â Making Choices](#%28part._sec~3achoice%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [27Â Variations on the Theme](#%28part._ch~3agen-rec-samples%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [27.1Â Fractals, a First Taste](#%28part._sec~3afractal%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [27.2Â Binary Search](#%28part._sec~3abinary-search%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [27.3Â A Glimpse at Parsing](#%28part._sec~3afiles-lines%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [28Â Mathematical Examples](#%28part._ch~3agen-rec-math%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [28.1Â Newtonâ€™s Method](#%28part._sec~3anewton%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [28.2Â Numeric Integration](#%28part._sec~3aintegrate%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [28.3Â Project: Gaussian Elimination](#%28part._sec~3aproj-gauss%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [29Â Algorithms that Backtrack](#%28part._ch~3abacktrack%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [29.1Â Traversing Graphs](#%28part._fsm._sec~3atraverse-graph1%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [29.2Â Project: Backtracking](#%28part._sec~3aproj-backtrack%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [30Â Summary](#%28part._ch~3asummary5%29) |'
  prefs: []
  type: TYPE_TB
- en: If you follow the design recipe of the first four parts, either you turn domain
    knowledge into code or you exploit the structure of the data definition to organize
    your code.Some functions merely compose such functions; we group those with the
    â€œstructuralâ€ group. The latter functions typically decompose their arguments into
    their immediate structural components and then process those components. If one
    of these immediate components belongs to the same class of data as the input,
    the function is structurally recursive. While structurally designed functions
    make up the vast majority of code in the world, some problems cannot be solved
    with a structural approach to design.
  prefs: []
  type: TYPE_NORMAL
- en: To solve such complicated problems, programmers use generative recursion, a
    form of recursion that is strictly more powerful than structural recursion. The
    study of generative recursion is as old as mathematics and is often called the
    study of algorithms. The inputs of an algorithm represent a problem. An algorithm
    tends to rearrange a problem into a set of several problems, solve those, and
    combine their solutions into one overall solution. Often some of these newly generated
    problems are the same kind of problem as the given one, in which case the algorithm
    can be reused to solve them. In these cases, the algorithm is recursive, but its
    recursion uses newly generated data not immediate parts of the input data.
  prefs: []
  type: TYPE_NORMAL
- en: From the very description of generative recursion, you can tell that designing
    a generative recursive function is more of an ad hoc activity than designing a
    structurally recursive function. Still, many elements of the general design recipe
    apply to the design of algorithms, too, and this part of the book illustrates
    how and how much the design recipe helps. The key to designing algorithms is the
    â€œgenerationâ€ step, which often means dividing up the problem. And figuring out
    a novel way of dividing a problem requires insight.In Greek, itâ€™s â€œeureka!â€ Sometimes
    very little insight is required. For example, it might just require a bit of commonsense
    knowledge about breaking up sequences of letters. At other times, it may rely
    on deep mathematical theorems about numbers. In practice, programmers design simple
    algorithms on their own and rely on domain specialists for their complex brethren.
    For either kind, programmers must thoroughly understand the underlying ideas so
    that they can code up algorithms and have the program communicate with future
    readers. The best way to get acquainted with the idea is to study a wide range
    of examples and to develop a sense for the kinds of generative recursions that
    may show up in the real world.
  prefs: []
  type: TYPE_NORMAL
- en: 25Non-standard Recursion[ğŸ”—](#(part._ch~3astrange-recursions) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: At this point you have designed numerous functions that employ structural recursion.
    When you design a function, you know you need to look at the data definition for
    its major input. If this input is described by a self-referential data definition,
    you end up with a function that refers to itself basically where the data definition
    refers to itself.
  prefs: []
  type: TYPE_NORMAL
- en: This chapter presents two sample programs that use recursion differently. They
    are illustrative of the problems that require some â€œeureka,â€ ranging from the
    obvious idea to the sophisticated insight.
  prefs: []
  type: TYPE_NORMAL
- en: 25.1Recursion without Structure[ğŸ”—](#(part._sec~3abundle) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Imagine you have joined the DrRacket team. The team is working on a sharing
    service to support collaborations among programmers. Concretely, the next revision
    of DrRacket is going to enable ISL programmers to share the content of their DrRacketâ€™s
    definitions area across several computers. Each time one programmer modifies the
    buffer, the revised DrRacket broadcasts the content of the definitions area to
    the instances of DrRacket that participate in the sharing session.
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Your task is to design the function bundle, which prepares the
    content of the definitions area for broadcasting. DrRacket hands over the content
    as a list of [1String](part_one.html#%28tech._1string%29)s. The functionâ€™s task
    is to bundle up chunks of individual â€œlettersâ€ into chunks and to thus produce
    a list of stringsâ€”<wbr>called chunksâ€”<wbr>of a given length, called chunk size.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'As you can see, the problem basically spells out the signature and there is
    no need for any problem-specific data definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)]
    [N](part_two.html#%28tech._n%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â bundles chunks of s into strings of length n |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (bundleÂ sÂ n)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The purpose statement reformulates a sentence fragment from the problem statement
    and uses the parameters from the dummy function header.The third step calls for
    function examples. Here is a list of [1String](part_one.html#%28tech._1string%29)s:'
  prefs: []
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "b"Â "c"Â "d"Â "e"Â "f"Â "g"Â "h")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'If we tell bundle to bundle this list into pairsâ€”<wbr>that is, n is 2â€”<wbr>then
    the following list is the expected result:'
  prefs: []
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "ab"Â "cd"Â "ef"Â "gh")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Now if n is 3 instead, there is a left-over â€œletter.â€ Since the problem statement
    does not tell us which of the characters is left over, we can imagine at least
    two valid scenarios:'
  prefs: []
  type: TYPE_NORMAL
- en: The function produces ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  "abc"  "def"  "g");
    that is, it considers the last letter as the left-over one.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Or, it produces ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  "a"  "bcd"  "efg"),
    which packs the lead character into a string by itself.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Stop! Come up with at least one other choice.To make things simple, we pick
    the first choice as the desired result and say so by writing down a corresponding
    test:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (bundleÂ ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "abcdefg")Â 3)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "abc"Â "def"Â "g"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Note the use of [explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29);
    it makes the test readable.Examples and tests must also describe what happens
    at the boundary of data definitions. In this context, boundary clearly means bundle
    is given a list that is too short for the given chunk size:'
  prefs: []
  type: TYPE_NORMAL
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (bundleÂ '("a"Â "b")Â 3)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "ab"))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'It also means we must consider what happens when bundle is given ''(). For
    simplicity, we choose ''() as the desired result:'
  prefs: []
  type: TYPE_NORMAL
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (bundleÂ '()Â 3)Â '())
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: One natural alternative is to ask for '(""). Can you see others?
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [N](part_two.html#%28tech._n%29) as compound, s considered atomic ; ([Processing
    Two Lists Simultaneously: Case 1](part_four.html#%28part._sec~3atwo-inputs~3acase1%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (bundleÂ sÂ n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â sÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â nÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (bundleÂ sÂ ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)]
    as compound, n atomic ; ([Processing Two Lists Simultaneously: Case 1](part_four.html#%28part._sec~3atwo-inputs~3acase1%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (bundleÂ sÂ n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â s)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â sÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â nÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (bundleÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â s)Â n))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)]
    and [N](part_two.html#%28tech._n%29) are on equal footing ; ([Processing Two Lists
    Simultaneously: Case 2](part_four.html#%28part._sec~3atwo-inputs~3acase2%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (bundleÂ sÂ n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â s)Â ([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n))Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â sÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â nÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (bundleÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â s)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â consider all possibilities ; ([Processing Two Lists Simultaneously: Case
    3](part_four.html#%28part._sec~3atwo-inputs~3acase3%29)) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (bundleÂ sÂ n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â s)Â ([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n))Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â s)Â ([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n))Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â s)Â ([positive?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._positive~3f%29%29)Â n))Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (bundleÂ sÂ ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (bundleÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â s)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 146: Useless templates for breaking up strings into chunks'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The template step reveals that a structural approach cannot work. [FigureÂ 146](#%28counter._%28figure._fig~3abundle-template-bad%29%29)
    shows four possible templates. Since both arguments to bundle are complex, the
    first two consider one of the arguments atomic. That clearly cannot be the case
    because the function has to take apart each argument. The third template is based
    on the assumption that the two arguments are processed in lockstep, which is closeâ€”<wbr>except
    that bundle clearly has to reset the chunk size to its original value at regular
    intervals. The final template says that the two arguments are processed independently,
    meaning there are four possibilities to proceed at each stage. This final design
    decouples the arguments too much because the list and the counting number must
    be processed together. In short, we must admit that the structural templates appear
    to be useless for this design problem.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)]
    [N](part_two.html#%28tech._n%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â bundles chunks of s into strings of length n |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â idea take n items and drop n at a time |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (bundleÂ sÂ n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â s)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29)Â (takeÂ sÂ n))Â (bundleÂ (dropÂ sÂ n)Â n))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] [N](part_two.html#%28tech._n%29)
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â keeps the first n items from l if possible or everything |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (takeÂ lÂ n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â (takeÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] [N](part_two.html#%28tech._n%29)
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â removes the first n items from l if possible or everything |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (dropÂ lÂ n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([zero?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29)Â n)Â l]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â l]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (dropÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 147: Generative recursion'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 147](#%28counter._%28figure._fig~3abundle%29%29) shows a complete definition
    for bundle. The definition uses the drop and take functions requested in [exerciseÂ 395](part_four.html#%28counter._%28exercise._ex~3adrop-take%29%29);
    these functions are also available in standard libraries. For completeness, the
    figure comes with their definitions: drop eliminates up to n items from the front
    of the list, take returns up to that many items. Using these functions, it is
    quite straightforward to define bundle:'
  prefs: []
  type: TYPE_NORMAL
- en: if the given list is '(), the result is '() as decided upon;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: otherwise bundle uses take to grab the first n [1String](part_one.html#%28tech._1string%29)s
    from s and [implode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29)s
    them into a plain [String](part_one.html#%28tech._string%29);
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: it then recurs with a list that is shortened by n items, which is accomplished
    with drop; and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: finally, [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    combines the string from 2 with the list of strings from 3 to create the result
    for the complete list.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: List item 3 highlights the key difference between bundle and any function in
    the first four parts of this book. Because the definition of [List-of](part_three.html#%28tech._sim-dd._list._of%29)
    [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)es
    an item onto a list to create another one, all functions in the first four parts
    use [first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    and [rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)
    to deconstruct a non-empty list. In contrast, bundle uses drop, which removes
    not just one but n items at once.
  prefs: []
  type: TYPE_NORMAL
- en: While the definition of bundle is unusual, the underlying ideas are intuitive
    and not too different from the functions seen so far. Indeed, if the chunk size
    n is 1, bundle specializes to a structurally recursive definition. Also, drop
    is guaranteed to produce an integral part of the given list, not some arbitrarily
    rearranged version. And this idea is precisely what the next section presents.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 421\. Is (bundle  '("a"  "b"  "c")  0) a proper use of the bundle function?
    What does it produce? Why?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 422\. Define the function list->chunks. It consumes a list l of arbitrary
    data and a natural number n. The functionâ€™s result is a list of list chunks of
    size n. Each chunk represents a sub-sequence of items in l.
  prefs: []
  type: TYPE_NORMAL
- en: Use list->chunks to define bundle via function composition.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 423\. Define partition. It consumes a [String](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._.String%29%29)
    s and a natural number n. The function produces a list of string chunks of size
    n.
  prefs: []
  type: TYPE_NORMAL
- en: For non-empty strings s and positive natural numbers n,
  prefs: []
  type: TYPE_NORMAL
- en: ([equal?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29)Â (partitionÂ sÂ n)Â (bundleÂ ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â s)Â n))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'is #true. But donâ€™t use this equality as the definition for partition; use
    [substring](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._substring%29%29)
    instead.'
  prefs: []
  type: TYPE_NORMAL
- en: Hint Have partition produce its natural result for the empty string. For the
    case where n is 0, see [exerciseÂ 421](#%28counter._%28exercise._ex~3abundle-loops%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: Note The partition function is somewhat closer to what a cooperative DrRacket
    environment would need than bundle.
  prefs: []
  type: TYPE_NORMAL
- en: 25.2Recursion that Ignores Structure[ğŸ”—](#(part._sec~3aquick-sort) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Recall that the sort> function from [Design by Composition](part_two.html#%28part._ch~3alist-sort%29)
    consumes a list of numbers and rearranges it in some order, typically ascending
    or descending. It proceeds by inserting the first number into the appropriate
    position of the sorted rest of the list. Put differently, it is a structurally
    recursive function that reprocesses the result of the natural recursions.
  prefs: []
  type: TYPE_NORMAL
- en: 'Hoareâ€™s quick-sort algorithm goes about sorting lists in a radically different
    manner and has become the classic example of generative recursion. The underlying
    generative step uses the time-honored strategy of divide-and-conquer. That is,
    it divides the nontrivial instances of the problem into two smaller, related problems;
    solves those smaller problems; and combines their solutions into a solution for
    the original problem. In the case of the quick-sort algorithm, the intermediate
    goal is to divide the list of numbers into two lists:'
  prefs: []
  type: TYPE_NORMAL
- en: one that contains all the numbers that are strictly smaller than the first
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: and another one with all those items that are strictly larger.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Then the two smaller lists are sorted via the quick-sort algorithm. Once the
    two lists are sorted, the results are composed with the first item placed in the
    middle. Owing to its special role, the first item on the list is called the pivot
    item.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/00cc8d6c64e1b8df2847d8a6950b4c4e.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 148: A graphical illustration of the quick-sort algorithm'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: To develop an understanding of how the quick-sort algorithm works, letâ€™s walk
    through an example, quick-sorting ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  11  8  14  7).
    [FigureÂ 148](#%28counter._%28figure._fig~3asort-ill%29%29) illustrates the process
    in a graphical way. The figure consists of a top half, the divide phase, and the
    bottom half, the conquer phase.
  prefs: []
  type: TYPE_NORMAL
- en: 'The partition phase is represented with boxes and solid arrows. Three arrows
    emerge from each boxed list and go to a box with three pieces: the circled pivot
    element in the middle, to its left the boxed list of numbers smaller than the
    pivot, and to its right the boxed list of those numbers that are larger than the
    pivot. Each of these steps isolates at least one number as the pivot, meaning
    the two neighboring lists are shorter than the given list. Consequently, the overall
    process terminates too.'
  prefs: []
  type: TYPE_NORMAL
- en: Consider the first step where the input is ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  11  8  14  7).
    The pivot item is 11. Partitioning the list into items larger and smaller than
    11 produces ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  8  7)
    and ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  14).
    The remaining steps of the partitioning phase work in an analogous way. Partitioning
    ends when all numbers have been isolated as pivot elements. At this point, you
    can already read off the final result by reading the pivots from left to right.
  prefs: []
  type: TYPE_NORMAL
- en: 'The conquering phase is represented with dashed arrows and boxed lists. Three
    arrows enter each result box: the middle one from a pivot, the left one from the
    boxed result of sorting the smaller numbers, and the right one from the boxed
    result of sorting the larger ones. Each step adds at least one number to the result
    list, the pivot, meaning the lists grow toward the bottom of the diagram. The
    box at the bottom is a sorted variant of the given list at the top.'
  prefs: []
  type: TYPE_NORMAL
- en: Take a look at the left-most, upper-most conquer step. It combines the pivot
    7 with two empty lists, resulting in '(7). The next one down corresponds to the
    partitioning step that isolated 8 and thus yields '(7  8). Each level in the conquering
    phase mirrors a corresponding level from the partitioning phase. After all, the
    overall process is recursive.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 424\. Draw a quick-sort diagram like the one in [figureÂ 148](#%28counter._%28figure._fig~3asort-ill%29%29)
    for ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  11  9  2  18  12  14  4  1).
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that we have a good understanding of the quick-sort idea, we can translate
    it into ISL+. Clearly, quick-sort< distinguishes two cases. If the input is ''(),
    it produces ''() because this list is sorted already; otherwise, it performs a
    generative recursion. This case split suggests the following [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces a sorted version of alon |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (quick-sort<Â alon)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â ''()]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The answer for the first case is given. For the second case, when quick-sort<â€™s
    input is a non-empty list, the algorithm uses the first item to partition the
    rest of the list into two sublists: a list with all items smaller than the pivot
    item and another one with those larger than the pivot item.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Since the rest of the list is of unknown size, we leave the task of partitioning
    the list to two auxiliary functions: smallers and largers. They process the list
    and filter out those items that are smaller and larger, respectively, than the
    pivot. Hence each auxiliary function accepts two arguments, namely, a list of
    numbers and a number. Designing these two functions is an exercise in structural
    recursion. Try on your own or read the definitions shown in [figureÂ 149](#%28counter._%28figure._fig~3aquick-sort%29%29).'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces a sorted version of alon |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â assume the numbers are all distinct |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (quick-sort<Â alon)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â pivotÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â (quick-sort<Â (smallersÂ alonÂ pivot))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â pivot)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (quick-sort<Â (largersÂ alonÂ pivot))))])) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (largersÂ alonÂ n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)Â n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)Â (largersÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)Â n))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (largersÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)Â n))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (smallersÂ alonÂ n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â alon)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)Â n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon)Â (smallersÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)Â n))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (smallersÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â alon)Â n))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 149: The quick-sort algorithm'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Each of these lists is sorted separately, using quick-sort<, which implies
    the use of recursion, specifically the following two expressions:'
  prefs: []
  type: TYPE_NORMAL
- en: (quick-sort<  (smallers  alon  pivot)), which sorts the list of items smaller
    than the pivot; and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: (quick-sort<  (largers  alon  pivot)), which sorts the list of items larger
    than the pivot.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once quick-sort< has the sorted versions of the two lists, it must combine
    the two lists and the pivot in the proper order: first all those items smaller
    than pivot, then pivot, and finally all those that are larger. Since the first
    and last list are already sorted, quick-sort< can simply use [append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â (quick-sort<Â (smallersÂ alonÂ pivot))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â alon))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â (quick-sort<Â (largersÂ alonÂ pivot))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '[FigureÂ 149](#%28counter._%28figure._fig~3aquick-sort%29%29) contains the full
    program; read it before proceeding.Now that we have an actual function definition,
    we can evaluate the example from above by hand:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (quick-sort<Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 11Â 8Â 14Â 7))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â (quick-sort<Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 8Â 7))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 11)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â (quick-sort<Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 14)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â (quick-sort<Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 7))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 8)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (quick-sort<Â ''())) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 11)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â (quick-sort<Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 14)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â (quick-sort<Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 7)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (quick-sort<Â ''())) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 8)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (quick-sort<Â ''())) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 11)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â (quick-sort<Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 14)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ''()
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 7)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 8)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 11)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â (quick-sort<Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 14)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 7)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 8)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 11)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â (quick-sort<Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 14)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The calculation shows the essential steps of the sorting process, that is, the
    partitioning steps, the recursive sorting steps, and the concatenation of the
    three parts. From this calculation, it is easy to see how quick-sort< implements
    the process illustrated in [figureÂ 148](#%28counter._%28figure._fig~3asort-ill%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: Both [figureÂ 148](#%28counter._%28figure._fig~3asort-ill%29%29) and the calculation
    also show how quick-sort< completely ignores the structure of the given list.
    The first recursion works on two distant numbers from the originally given list
    and the second one on the listâ€™s third item. These recursions arenâ€™t random, but
    they are certainly not relying on the structure of the data definition.
  prefs: []
  type: TYPE_NORMAL
- en: Contrast quick-sort<â€™s organization with that of the sort> function from [Design
    by Composition](part_two.html#%28part._ch~3alist-sort%29). The design of the latter
    follows the structural design recipe, yielding a program that processes a list
    item by item. By splitting the list, quick-sort< can speed up the process of sorting
    the list, though at the cost of not using plain [first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)
    and [rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 425\. Articulate purpose statements for smallers and largers in [figureÂ 149](#%28counter._%28figure._fig~3aquick-sort%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 426\. Complete the hand-evaluation from above. A close inspection of
    the evaluation suggests an additional trivial case for quick-sort<. Every time
    quick-sort< consumes a list of one item, it returns it as is. After all, the sorted
    version of a list of one item is the list itself.
  prefs: []
  type: TYPE_NORMAL
- en: Modify quick-sort< to take advantage of this observation. Evaluate the example
    again. How many steps does the revised algorithm save?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 427\. While quick-sort< quickly reduces the size of the problem in
    many cases, it is inappropriately slow for small problems. Hence people use quick-sort<
    to reduce the size of the problem and switch to a different sort function when
    the list is small enough.
  prefs: []
  type: TYPE_NORMAL
- en: Develop a version of quick-sort< that uses sort< (an appropriately adapted variant
    of sort> from [Auxiliary Functions that Recur](part_two.html#%28part._sec~3asort.I%29))
    if the length of the input is below some threshold.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 428\. If the input to quick-sort< contains the same number several
    times, the algorithm returns a list that is strictly shorter than the input. Why?
    Fix the problem so that the output is as long as the input.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 429\. Use [filter](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29)
    to define smallers and largers.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 430\. Develop a variant of quick-sort< that uses only one comparison
    function, say, [<](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c%29%29).
    Its partitioning step divides the given list alon into a list that contains the
    items of alon smaller than the pivot and another one with those that are not smaller.
  prefs: []
  type: TYPE_NORMAL
- en: Use [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    to package up the program as a single function. Abstract this function so that
    it consumes a list and a comparison function.
  prefs: []
  type: TYPE_NORMAL
- en: 26Designing Algorithms[ğŸ”—](#(part._ch~3adesign-algo) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The overview for this part already explains that the design of generative recursion
    functions is more ad hoc than structural design. As the first chapter shows, two
    generative recursions can radically differ in how they process functions. Both
    bundle and quick-sort< process lists, but while the former at least respects the
    sequencing in the given list, the latter rearranges its given list at will. The
    question is whether a single design recipe can help with the creation of such
    widely differing functions.
  prefs: []
  type: TYPE_NORMAL
- en: 'The first section shows how to adapt the process dimension of the design recipe
    to generative recursion. The second section homes in on another new phenomenon:
    an algorithm may fail to produce an answer for some of its inputs. Programmers
    must therefore analyze their programs and supplement the design information with
    a comment on termination. The remaining sections contrast structural and generative
    recursion.'
  prefs: []
  type: TYPE_NORMAL
- en: 26.1Adapting the Design Recipe[ğŸ”—](#(part._.Adapting_the_.Design_.Recipe) "Link
    to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Letâ€™s examine the six general steps of our structural design recipe in light
    of the examples in the preceding chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: As before, we must represent the problem information as data in our chosen programming
    language. The choice of a data representation for a problem affects our thinking
    about the computational process, so some planning ahead is necessary. Alternatively,
    be prepared to backtrack and to explore different data representations. Regardless,
    we must analyze the problem information and define data collections.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We also need a signature, a function header, and a purpose statement. Since
    the generative step has no connection to the structure of the data definition,
    the purpose statement must go beyond what the function is to compute and also
    explain how the function computes its result.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It is useful to explain the â€œhowâ€ with function examples, the way we explained
    bundle and quick-sort< in the previous chapter. That is, while function examples
    in the structural world merely specify which output the function is to produce
    for which input, the purpose of examples in the world of generative recursion
    is to explain the underlying idea behind the computational process.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For bundle, the examples specify how the function acts in general and in certain
    boundary cases. For quick-sort<, the example in [figureÂ 148](#%28counter._%28figure._fig~3asort-ill%29%29)
    illustrates how the function partitions the given list with respect to the pivot
    item. By adding such worked examples to the purpose statement, weâ€”<wbr>the designersâ€”<wbr>gain
    an improved understanding of the desired process, and we communicate this understanding
    to future readers of this code.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Our discussion suggests a general template for algorithms. Roughly speaking,
    the design of an algorithm distinguishes two kinds of problems: those that are
    trivially solvable and those that are not.For this part of the book, â€œtrivialâ€
    is a technical term. If a given problem is trivially solvable, an algorithm produces
    the matching solution. For example, the problems of sorting an empty list or a
    one-item list are trivially solvable. A list with many items is a nontrivial problem.
    For these nontrivial problems, algorithms commonly generate new problems of the
    same kind as the given one, solve those recursively, and combine the solutions
    into an overall solution.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Based on this sketch, all algorithms have roughly this organization:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (generative-recursive-funÂ problem)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(trivially-solvable?Â problem) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â (determine-solutionÂ problem)] |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â (combine-solutions |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â problemÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â (generative-recursive-fun |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â (generate-problem-1Â problem)) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â (generative-recursive-fun |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â (generate-problem-nÂ problem)))])) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: The original problem is occasionally needed to combine the solutions for the
    newly generated problems, which is why it is handed over to combine-solutions.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'This template is only a suggestive blueprint, not a definitive shape. Each
    piece of the template is to remind us to think about the following four questions:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What is a trivially solvable problem?
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: How are trivial problems solved?
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: How does the algorithm generate new problems that are more easily solvable than
    the original one? Is there one new problem that we generate or are there several?
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Is the solution of the given problem the same as the solution of (one of) the
    new problems? Or, do we need to combine the solutions to create a solution for
    the original problem? And, if so, do we need anything from the original problem
    data?
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: To define the algorithm as a function, we must express the answers to these
    four questions as functions and expressions in terms of the chosen data representation.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: For this step, the table-driven attempt from [Designing with Self-Referential
    Data Definitions](part_two.html#%28part._ch~3adesign-lists%29) might help again.
    Reconsider the quick-sort< example from [Recursion that Ignores Structure](#%28part._sec~3aquick-sort%29).
    The central idea behind quick-sort< is to divide a given list into a list of smaller
    items and larger items and to sort those separately. [FigureÂ 150](#%28counter._%28figure._fig~3aquick-sort-table%29%29)
    spells out how some simple numeric examples work out for the nontrivial cases.
    From these examples it is straightforward to guess that the answer to the fourth
    question is to append the sorted list of smaller numbers, the pivot number, and
    the sorted list of larger numbers, which can easily be translated into code.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Once the function is complete, it is time to test it. As before, the goal of
    testing is to discover and eliminate bugs.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| alon |  | pivot |  | sorted, smaller |  | sorted, larger |  | expected |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ''(2  3  1  4) |  | 2 |  | ''(1) |  | ''(3  4) |  | ''(1  2  3  4) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ''(2  0  1  4) |  | 2 |  | ''(0  1) |  | ''(4) |  | ''(0  1  2  4) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ''(3  0  1  4) |  | 3 |  | ''(0  1) |  | ''(4) |  | ''(0  1  3  4) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 150: The table-based guessing approach for combining solutions'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 431\. Answer the four key questions for the bundle problem and the
    first three questions for the quick-sort< problem. How many instances of generate-problem
    are needed?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 432\. [ExerciseÂ 219](part_two.html#%28counter._%28exercise._ex~3aworm5%29%29)
    introduces the function food-create, which consumes a [Posn](part_one.html#%28tech._posn%29)
    and produces a randomly chosen [Posn](part_one.html#%28tech._posn%29) that is
    guaranteed to be distinct from the given one. First reformulate the two functions
    as a single definition, using [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29);
    then justify the design of food-create.
  prefs: []
  type: TYPE_NORMAL
- en: 26.2Termination[ğŸ”—](#(part._.Termination) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Generative recursion adds an entirely new aspect to computations: non-termination.
    A function such as bundle may never produce a value or signal an error for certain
    inputs. [ExerciseÂ 421](#%28counter._%28exercise._ex~3abundle-loops%29%29) asks
    what the result of (bundle  ''("a"  "b"  "c")  0) is, and here is an explanation
    of why it does not have a result:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (bundleÂ ''("a"Â "b"Â "c")Â 0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29)Â (takeÂ Â ''("a"Â "b"Â "c")Â 0))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â (bundleÂ (dropÂ Â ''("a"Â "b"Â "c")Â 0)Â 0)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([implode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29)Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â (bundleÂ (dropÂ Â ''("a"Â "b"Â "c")Â 0)Â 0)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ""Â (bundleÂ (dropÂ Â ''("a"Â "b"Â "c")Â 0)Â 0))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ""Â (bundle  ''("a"  "b"  "c")  0))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The calculation shows how evaluating (bundle  '("a"  "b"  "c")  0) requires
    having a result for the very same expression. In the context of ISL+ this means
    the evaluation does not stop. Computer scientists say that bundle does not terminate
    when the second argument is 0; they also say that the function loops or that the
    computation is stuck in an infinite loop.
  prefs: []
  type: TYPE_NORMAL
- en: Contrast this insight with the designs presented in the first four parts. Every
    function designed according to the recipe either produces an answer or raises
    an error signal for every input. After all, the recipe dictates that each natural
    recursion consumes an immediate piece of the input, not the input itself. Because
    data is constructed in a hierarchical manner, input shrinks at every stage. Eventually
    the function is applied to an atomic piece of data, and the recursion stops.
  prefs: []
  type: TYPE_NORMAL
- en: This reminder also explains why generative recursive functions may diverge.
    According to the design recipe for generative recursion, an algorithm may generate
    new problems without any limitations. If the design recipe required a guarantee
    that the new problems were â€œsmallerâ€ than the given one, it would terminate.The
    theory of computation actually shows that we must lift these restrictions eventually.
    But, imposing such a restriction would needlessly complicate the design of functions
    such as bundle.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this book, we therefore keep the first six steps of the design recipe mostly
    intact and supplement them with a seventh step: the termination argument. [FigureÂ 151](#%28counter._%28figure._fig~3adesign7%29%29)
    presents the first part of the design recipe for generative recursion, and [figureÂ 152](#%28counter._%28figure._fig~3adesign7b%29%29)
    the second one. They show the design recipe in the conventional tabular form.
    The unmodified steps come with a dash in the activity column. Others come with
    comments on how the design recipe for generative recursion differs from the one
    for structural recursion. The last row in [figureÂ 152](#%28counter._%28figure._fig~3adesign7b%29%29)
    is completely new.'
  prefs: []
  type: TYPE_NORMAL
- en: A termination argument comes in one of two forms. The first one argues why each
    recursive call works on a problem that is smaller than the given one. Often this
    argument is straightforward; on rare occasions, you will need to work with a mathematician
    to prove a theorem for such arguments. The second kind illustrates with an example
    that the function may not terminate.You cannot define a predicate for this class;
    otherwise you could modify the function and ensure that it always terminates.
    Ideally it should also describe the class of data for which the function may loop.
    In rare cases, you may not be able to make either argument because computer science
    does not know enough yet.
  prefs: []
  type: TYPE_NORMAL
- en: '| steps |  | outcome |  | activity |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| problem analysis |  | data representation and definition |  | â€”<wbr> |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| header |  | a purpose statement concerning the â€œhowâ€ of the function |  |
    supplement the explanation of what the function computes with a one-liner on how
    it computes the result |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| examples |  | examples and tests |  | work through the â€œhowâ€ with several
    examples |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| template |  | fixed template |  | â€”<wbr> |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 151: Designing algorithms (part 1)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| steps |  | outcome |  | activity |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| definition |  | full-fledged function definition |  | formulate conditions
    for trivially solvable problems; formulate answers for these trivial cases; determine
    how to generate new problems for nontrivial problems, possibly using auxiliary
    functions; determine how to combine the solutions of the generated problems into
    a solution for the given problem |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| tests |  | discover mistakes |  | â€”<wbr> |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| termination |  | (1) a size argument for each recursive call or (2) examples
    of exceptions to termination |  | investigate whether the problem data for each
    recursive data is smaller than the given data; find examples that cause the function
    to loop |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 152: Designing algorithms (part 2)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Letâ€™s illustrate the two kinds of termination arguments with examples. For
    the bundle function, it suffices to warn readers about chunk size 0:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)]
    [N](part_two.html#%28tech._n%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [String](part_one.html#%28tech._string%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â bundles sub-sequences of s into strings of length n |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â termination  (bundle  s  0) loops unless s is ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (bundleÂ sÂ n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In this case, it is possible to define a predicate that precisely describes
    when bundle terminates. For quick-sort<, the key observation is that each recursive
    use of quick-sort< receives a list that is shorter than alon:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates a sorted variant of alon |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â termination both recursive calls to quick-sort< |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â receive list that miss the pivot item |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (quick-sort<Â alon)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: In one case, the list consists of the numbers that are strictly smaller than
    the pivot; the other one is for numbers strictly larger.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 433\. Develop a checked version of bundle that is guaranteed to terminate
    for all inputs. It may signal an error for those cases where the original version
    loops.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 434\. Consider the following definition of smallers, one of the two
    â€œproblem generatorsâ€ for quick-sort<:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (smallersÂ lÂ n)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â l)Â ''()]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â n)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â l)Â (smallersÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â n))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (smallersÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â l)Â n))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: What can go wrong when this version is used with the quick-sort< definition
    from [Recursion that Ignores Structure](#%28part._sec~3aquick-sort%29)?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 435\. When you worked on [exerciseÂ 430](#%28counter._%28exercise._ex~3aquick-sort-abstract%29%29)
    or [exerciseÂ 428](#%28counter._%28exercise._ex~3aquick-sort-drop%29%29), you may
    have produced looping solutions. Similarly, [exerciseÂ 434](#%28counter._%28exercise._ex~3aquick-sort-non-terminate%29%29)
    actually reveals how brittle the termination argument is for quick-sort<. In all
    cases, the argument relies on the idea that smallers and largers produce lists
    that are maximally as long as the given list, and on our understanding that neither
    includes the given pivot in the result.
  prefs: []
  type: TYPE_NORMAL
- en: Based on this explanation, modify the definition of quick-sort< so that both
    functions receive lists that are shorter than the given one.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 436\. Formulate a termination argument for food-create from [exerciseÂ 432](#%28counter._%28exercise._ex~3aworm5-explained%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: 26.3Structural versus Generative Recursion[ğŸ”—](#(part._sec~3astruct-gen-rec)
    "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The template for algorithms is so general that it includes structurally recursive
    functions. Consider the left side of [figureÂ 153](#%28counter._%28figure._fig~3agenerative-vs-structural%29%29).
    This template is specialized to deal with one trivial clause and one generative
    step. If we replace trivial? with [empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)
    and generate with [rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29),
    we get a template for list-processing functions; see the right side of [figureÂ 153](#%28counter._%28figure._fig~3agenerative-vs-structural%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (generalÂ P)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [(trivial?Â P)Â (solveÂ P)] &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â (combine-solutions &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â P &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â (general &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â Â Â (generateÂ P)))])) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (specialÂ P)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â P)Â (solveÂ P)]
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â (combine-solutions &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â P &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â (specialÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â P)))]))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 153: From generative to structural recursion'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 437\. Define solve and combine-solutions so that
  prefs: []
  type: TYPE_NORMAL
- en: special computes the length of its input,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: special negates each number on the given list of numbers, and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: special uppercases the given list of strings.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What do you conclude from these exercises?
  prefs: []
  type: TYPE_NORMAL
- en: Now you may wonder whether there is a real difference between structural recursive
    design and the one for generative recursion. Our answer is â€œit depends.â€ Of course,
    we could say that all functions using structural recursion are just special cases
    of generative recursion. This â€œeverything is equalâ€ attitude, however, is of no
    help if we wish to understand the process of designing functions. It confuses
    two kinds of design that require different forms of knowledge and that have different
    consequences. One relies on a systematic data analysis and not much more; the
    other requires a deep, often mathematical, insight into the problem-solving process
    itself. One leads programmers to naturally terminating functions; the other requires
    a termination argument. Conflating these two approaches is unhelpful.
  prefs: []
  type: TYPE_NORMAL
- en: 26.4Making Choices[ğŸ”—](#(part._sec~3achoice) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: When you interact with a function f that sorts lists of numbers, it is impossible
    for you to know whether f is sort< or quick-sort<. The two functions behave in
    an observably equivalent way.Observable equivalence is a central concept from
    the study of programming languages. This raises the question of which of the two
    a programming language should provide. More generally, when we can design a function
    using structural recursion and generative recursion, we must figure out which
    one to pick.
  prefs: []
  type: TYPE_NORMAL
- en: 'To illustrate the consequences of this choice, we discuss a classical example
    from mathematics: the problem of finding the greatest common divisor (gcd) of
    two positive natural numbers.John Stone suggested the greatest common divisor
    as a suitable example. All such numbers have 1 as divisor in common. On occasionâ€”<wbr>say,
    2 and 3â€”<wbr>this is also the only common divisor. Both 6 and 25 are numbers with
    several divisors:'
  prefs: []
  type: TYPE_NORMAL
- en: 6 is evenly divisible by 1, 2, 3, and 6;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 25 is evenly divisible by 1, 5, and 25.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'And yet, their greatest common divisor is 1\. In contrast, 18 and 24 have many
    common divisors and their greatest common divisor is 6:'
  prefs: []
  type: TYPE_NORMAL
- en: 18 is evenly divisible by 1, 2, 3, 6, 9, and 18;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 24 is evenly divisible by 1, 2, 3, 4, 6, 8, 12, and 24.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Completing the first three steps of the design recipe is straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [N](part_two.html#%28tech._n%29)[>= 1] [N](part_two.html#%28tech._n%29)[>=
    1] -> [N](part_two.html#%28tech._n%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds the greatest common divisor of n and m |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â ([gcd](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29)Â 6Â 25)Â 1)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â ([gcd](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29)Â 18Â 24)Â 6)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([gcd](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29)Â nÂ m)Â 42)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The signature specifies the inputs as natural numbers greater than or equal
    to 1.
  prefs: []
  type: TYPE_NORMAL
- en: From here we design both a structural and a generative recursive solution. Since
    this part of the book is about generative recursion, we merely present a structural
    solution in [figureÂ 154](#%28counter._%28figure._fig~3astructural-gcd%29%29) and
    leave the design ideas to exercises. Just note that ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)  ([remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)  n  i)  ([remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)  m  i)  0)
    encodes the idea that both n and m are â€œevenly divisibleâ€ by i.
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gcd-structuralÂ nÂ m)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [N](part_two.html#%28tech._n%29)
    -> [N](part_two.html#%28tech._n%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â determines the gcd of n and m less than i |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (greatest-divisor-<=Â i)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â iÂ 1)Â 1]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â ([remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)Â nÂ i)Â ([remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)Â mÂ i)Â 0)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â i |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (greatest-divisor-<=Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â iÂ 1)))])))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (greatest-divisor-<=Â ([min](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._min%29%29)Â nÂ m))))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 154: Finding the greatest common divisor via structural recursion'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'ExerciseÂ 438\. In your words: how does greatest-divisor-<= work? Use the design
    recipe to find the right words. Why does the locally defined greatest-divisor-<=
    recur on ([min](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._min%29%29)  n  m)?'
  prefs: []
  type: TYPE_NORMAL
- en: 'Although the design of gcd-structural is rather straightforward, it is also
    naive. It simply tests for every number between the smaller of n and m and 1 whether
    it divides both n and m evenly and returns the first such number. For small n
    and m, this works just fine. Consider the following example, however:'
  prefs: []
  type: TYPE_NORMAL
- en: (gcd-structuralÂ 101135853Â 45014640)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The result is 177. To get there, gcd-structural checks the â€œevenly divisibleâ€
    condition for 45014640, that is, it checks 45014640 - 177 remainders. Checking
    that many [remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)sâ€”<wbr>twice!â€”<wbr>is
    a large effort, and even reasonably fast computers need time to complete this
    task.ExerciseÂ 439\. Copy gcd-structural into DrRacket and evaluate
  prefs: []
  type: TYPE_NORMAL
- en: ([time](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._time%29%29)Â (gcd-structuralÂ 101135853Â 45014640))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: in the interactions area.Since mathematicians recognized the inefficiency of
    this structural function a long time ago, they studied the problem of finding
    divisors in depth. The essential insight is that
  prefs: []
  type: TYPE_NORMAL
- en: for two natural numbers, L for large and S for small, the greatest common divisor
    is equal to the greatest common divisor of S and the remainder of L divided by
    S.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Here is how we can articulate this insight as an equation:'
  prefs: []
  type: TYPE_NORMAL
- en: ([gcd](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29)Â LÂ S)Â ==Â ([gcd](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29)Â SÂ ([remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)Â LÂ S))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Since ([remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)  L  S)
    is smaller than both L and S, the right-hand side use of [gcd](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29)
    consumes S first.Here is how this insight applies to our small example:'
  prefs: []
  type: TYPE_NORMAL
- en: The given numbers are 18 and 24.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: According to the insight, they have the same gcd as 18 and 6.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: And these two have the same greatest common divisor as 6 and 0.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Now we seem stuck because 0 is unexpected. But, 0 can be evenly divided by
    every number, meaning we have found our answer: 6.Working through the example
    not only validates the basic insight but also suggests how to turn the insight
    into an algorithm:'
  prefs: []
  type: TYPE_NORMAL
- en: when the smaller of the numbers is 0, we face a trivial case;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: the larger of the two numbers is the solution in the trivial case;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: generating a new problem requires one [remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)
    operation; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: the above equation tells us that the answer to the newly generated problem is
    also the answer to the originally given problem.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In short, the answers for the four design-recipe questions fall out.
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gcd-generativeÂ nÂ m)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (;Â [N](part_two.html#%28tech._n%29)[>=
    1] [N](part_two.html#%28tech._n%29) -> [N](part_two.html#%28tech._n%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â generative recursion |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ;Â ([gcd](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29)  L  S)  ==  ([gcd](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29)  S  ([remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)  L  S))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (clever-gcdÂ LÂ S)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â SÂ 0)Â L]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (clever-gcdÂ SÂ ([remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)Â LÂ S))])))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (clever-gcdÂ ([max](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._max%29%29)Â mÂ n)Â ([min](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._min%29%29)Â mÂ n))))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 155: Finding the greatest common divisor via generative recursion'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 155](#%28counter._%28figure._fig~3agenerative-gcd%29%29) presents the
    definition of the algorithm. The [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    definition introduces the workhorse of the function: clever-gcd. Its first [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    line discovers the trivial case by comparing smaller to 0 and produces the matching
    solution. The generative step uses smaller as the new first argument and ([remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)  large  small)
    as the new second argument to clever-gcd.'
  prefs: []
  type: TYPE_NORMAL
- en: If we now use gcd-generative with our above example,
  prefs: []
  type: TYPE_NORMAL
- en: (gcd-generativeÂ 101135853Â 45014640)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'we see that the response is nearly instantaneous. A hand-evaluation shows that
    clever-gcd recurs only nine times before it produces the solution:'
  prefs: []
  type: TYPE_NORMAL
- en: '| [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â (clever-gcdÂ 101135853Â 45014640) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â (clever-gcdÂ 45014640Â 11106573) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â (clever-gcdÂ 11106573Â 588348) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â (clever-gcdÂ 588348Â 516309) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â (clever-gcdÂ 516309Â 72039) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â (clever-gcdÂ 72039Â 12036) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â (clever-gcdÂ 12036Â 11859) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â (clever-gcdÂ 11859Â 177) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â (clever-gcdÂ 177Â 0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: This also means that it checks only nine [remainder](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29)
    conditions, clearly a much smaller effort than gcd-structural expends.ExerciseÂ 440\.
    Copy gcd-generative into the definitions area of DrRacket and evaluate
  prefs: []
  type: TYPE_NORMAL
- en: ([time](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._time%29%29)Â (gcd-generativeÂ 101135853Â 45014640))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: in the interactions area.
  prefs: []
  type: TYPE_NORMAL
- en: You may now think that generative recursion design has discovered a much faster
    solution to the [gcd](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29)
    problem, and you may conclude that generative recursion is always the right way
    to go. This judgment is too rash for three reasons. First, even a well-designed
    algorithm isnâ€™t always faster than an equivalent structurally recursive function.
    For example, quick-sort< wins only for large lists; for small ones, the standard
    sort< function is faster. Worse, a badly designed algorithm can wreak havoc on
    the performance of a program. Second, it is typically easier to design a function
    using the recipe for structural recursion. Conversely, designing an algorithm
    requires an idea of how to generate new problems, a step that often requires some
    deep insight. Finally, programmers who read functions can easily understand structurally
    recursive functions, even without much documentation. The generative step of an
    algorithm, though, is based on a â€œeureka!â€ and, without a good explanation, is
    difficult to understand for future readersâ€”<wbr>and that includes older versions
    of yourself.
  prefs: []
  type: TYPE_NORMAL
- en: Experience shows that most functions in a program employ structural design;
    only a few exploit generative recursion. When we encounter a situation where a
    design could use the recipe for either structural or generative recursion, the
    best approach is to start with a structural version. If the result turns out to
    be too slow for the task at handâ€”<wbr>and only thenâ€”<wbr>it is time to explore
    the use of generative recursion.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 441\. Evaluate
  prefs: []
  type: TYPE_NORMAL
- en: (quick-sort<Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 10Â 6Â 8Â 9Â 14Â 12Â 3Â 11Â 14Â 16Â 2))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: by hand. Show only those lines that introduce a new recursive call to quick-sort<.
    How many recursive applications of quick-sort< are required? How many recursive
    applications of the [append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)
    function? Suggest a general rule for a list of length n.Evaluate
  prefs: []
  type: TYPE_NORMAL
- en: (quick-sort<Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 1Â 2Â 3Â 4Â 5Â 6Â 7Â 8Â 9Â 10Â 11Â 12Â 13Â 14))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: by hand. How many recursive applications of quick-sort< are required? How many
    recursive applications of [append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)?
    Does this contradict the first part of the exercise?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 442\. Add sort< and quick-sort< to the definitions area. Run tests
    on the functions to ensure that they work on basic examples. Also develop create-tests,
    a function that creates large test cases randomly. Then explore how fast each
    works on various lists.
  prefs: []
  type: TYPE_NORMAL
- en: Does the experiment confirm the claim that the plain sort< function often wins
    over quick-sort< for short lists and vice versa?
  prefs: []
  type: TYPE_NORMAL
- en: Determine the cross-over point. Use it to build a clever-sort function that
    behaves like quick-sort< for large lists and like sort< for lists below this cross-over
    point. Compare with [exerciseÂ 427](#%28counter._%28exercise._ex~3aquick-sort-switch%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 443\. Given the header material for gcd-structural, a naive use of
    the design recipe might use the following template or some variant:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gcd-structuralÂ nÂ m)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 1)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â mÂ 1))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â nÂ 1)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â mÂ 1))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â nÂ 1)Â ([>](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29)Â mÂ 1))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (gcd-structuralÂ ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)Â ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â m))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (gcd-structuralÂ ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â n)Â m)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (gcd-structuralÂ nÂ ([sub1](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29)Â m))Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Why is it impossible to find a divisor with this strategy?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 444\. [ExerciseÂ 443](#%28counter._%28exercise._ex~3agcd-structural1%29%29)
    means that the design for gcd-structural calls for some planning and a design-by-composition
    approach.
  prefs: []
  type: TYPE_NORMAL
- en: 'The very explanation of â€œgreatest common denominatorâ€ suggests a two-stage
    approach. First design a function that can compute the listIdeally, you should
    use sets not lists. of divisors of a natural number. Second, design a function
    that picks the largest common number in the list of divisors of n and the list
    of divisors of m. The overall function would look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (gcd-structuralÂ SÂ L)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (largest-commonÂ (divisorsÂ SÂ S)Â (divisorsÂ SÂ L))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [N](part_two.html#%28tech._n%29)[>= 1] [N](part_two.html#%28tech._n%29)[>=
    1] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [N](part_two.html#%28tech._n%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the divisors of l smaller or equal to k |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (divisorsÂ kÂ l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [N](part_two.html#%28tech._n%29)]
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [N](part_two.html#%28tech._n%29)]
    -> [N](part_two.html#%28tech._n%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds the largest number common to both k and l |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (largest-commonÂ kÂ l)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â 1) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Why do you think divisors consumes two numbers? Why does it consume S as the
    first argument in both uses?
  prefs: []
  type: TYPE_NORMAL
- en: 27Variations on the Theme[ğŸ”—](#(part._ch~3agen-rec-samples) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The design of an algorithm starts with an informal description of a process
    of how to create a problem that is more easily solvable than the given one and
    whose solution contributes to the solution of the given problem. Coming up with
    this kind of idea requires inspiration, immersion in an application domain, and
    experience with many different kinds of examples.
  prefs: []
  type: TYPE_NORMAL
- en: 'This chapter presents several illustrative examples of algorithms. Some are
    directly drawn from mathematics, which is the source of many ideas; others come
    from computational settings. The first example is a graphical illustration of
    our principle: the Sierpinski triangle. The second one explains the divide-and-conquer
    principle with the simple mathematical example of finding the root of a function.
    It then shows how to turn this idea into a fast algorithm for searching sequences,
    a widely used application. The third section concerns â€œparsingâ€ of sequences of
    [1String](part_one.html#%28tech._1string%29)s, also a common problem in real-world
    programming.'
  prefs: []
  type: TYPE_NORMAL
- en: 27.1Fractals, a First Taste[ğŸ”—](#(part._sec~3afractal) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Fractals play an important role in computational geometry. Flake writes in The
    Computational Beauty of Nature (The MIT Press, 1998) that â€œgeometry can be extended
    to account for objects with a fractional dimension. Such objects, known as fractals,
    come very close to capturing the richness and variety of forms found in nature.
    Fractals possess structural self-similarity on multiple ... scales, meaning that
    a piece of a fractal will often look like the whole.â€
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/f368a845d56e8533ebc6def472a52842.png)Â Â Â Â Â ![image](../Images/6bbae7d7653c237b5c07a8fdc515c6f4.png)Â Â Â Â Â ![image](../Images/fcdd7d22418fe7ccd19b5e17fcc53c87.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 156: The Sierpinski triangle'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 156](#%28counter._%28figure._fig~3asiepic%29%29) displays an example
    of a fractal shape, known as the Sierpinski triangle. The basic shape is an (equilateral)
    triangle, like the one in the center. When this triangle is composed sufficiently
    many times in a triangular fashion, we get the left-most shape.'
  prefs: []
  type: TYPE_NORMAL
- en: The right-most image in [figureÂ 156](#%28counter._%28figure._fig~3asiepic%29%29)
    explains the generative step. When taken by itself, it says that, given a triangle,
    find the midpoint of each side and connect them to each other. This step yields
    four triangles; repeat the process for each of the outer of these three triangles
    unless these triangles are too small.
  prefs: []
  type: TYPE_NORMAL
- en: 'An alternative explanation, well suited for the shape composition functions
    in the 2htdp/image teachpack,We owe this solution to Marc Smith. is based on the
    transition from the image in the center to the image on the right. By juxtaposing
    two of the center triangles and then placing one copy above these two, we also
    get the shape on the right:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (s-triangleÂ 3) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/63ca48523bb7356b25b574627364b470.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â (s-triangleÂ 3)Â (s-triangleÂ 3))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/b2b4e57cf1e5128c121ad4266964a367.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([above](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29)Â (s-triangleÂ 3)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â (s-triangleÂ 3)Â (s-triangleÂ 3)))
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ![image](../Images/241eac471c2ba525d5d500a8c6831402.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'This section uses the alternative description to design the Sierpinski algorithm;
    [Accumulators as Results](part_six.html#%28part._sec~3afractal-acc%29) deals with
    the first description. Given that the goal is to generate the image of an equilateral
    triangle, we encode the problem with a (positive) number, the length of the triangleâ€™s
    side. This decision yields a signature, a purpose statement, and a header:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates Sierpinski triangle of size side |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (sierpinskiÂ side)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([triangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._triangle%29%29)Â sideÂ ''outlineÂ ''red))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Now it is time to address the four questions of generative recursion:'
  prefs: []
  type: TYPE_NORMAL
- en: When the given number is so small that drawing triangles inside of it is pointless,
    the problem is trivial.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In that case, it suffices to generate a triangle.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Otherwise, the algorithm must generate a Sierpinski triangle of size side /
    2 because juxtaposing two such triangles in either direction yields one of size
    side.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If half-sized is the Sierpinski triangle of size side / 2, then
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| ([above](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29)Â half-sized
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â half-sizedÂ half-sized))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: is a Sierpinski triangle of size side.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â SMALLÂ 4)Â ;Â a
    size measure in terms of pixels |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â small-triangleÂ ([triangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._triangle%29%29)Â SMALLÂ ''outlineÂ ''red))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Image](part_one.html#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â generative creates Sierpinski Î” of size side by generating |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â one for ([/](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29)Â sideÂ 2)
    and placing one copy above two copies |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (sierpinskiÂ SMALL)Â small-triangle)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (sierpinskiÂ ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 2Â SMALL))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([above](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29)Â small-triangle
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â small-triangleÂ small-triangle)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (sierpinskiÂ side)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â sideÂ SMALL)Â ([triangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._triangle%29%29)Â sideÂ ''outlineÂ ''red)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â half-sizedÂ (sierpinskiÂ ([/](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29)Â sideÂ 2))))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([above](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29)Â half-sizedÂ ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â half-sizedÂ half-sized)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 157: The Sierpinski algorithm'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: With these answers, it is straightforward to define the function. [FigureÂ 157](#%28counter._%28figure._fig~3asierpinski-code%29%29)
    spells out the details. The â€œtriviality conditionâ€ translates to ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)  side  SMALL)
    for some constant SMALL. For the trivial answer, the function returns a triangle
    of the given size. In the recursive case, a [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    expression introduces the name half-sized for the Sierpinski triangle that is
    half as big as the specified size. Once the recursive call has generated the small
    Sierpinski triangle, it composes this image via [above](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29)
    and [beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: The figure highlights two other points. First, the purpose statement is articulated
    as an explanation of what the function accomplishes
  prefs: []
  type: TYPE_NORMAL
- en: ;Â creates Sierpinski triangle of size side by ...
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'and how it accomplishes this goal:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â ... generating one of size ([/](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29)Â sideÂ 2)
    and |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â placing one copy above two composed copies |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Second, the examples illustrate the two possible cases: one if the given size
    is small enough, and one for a size that is too large still. In the latter case,
    the expression that computes the expected value explains exactly the meaning of
    the purpose statement.'
  prefs: []
  type: TYPE_NORMAL
- en: Since sierpinski is based on generative recursion, defining the function and
    testing it is not the last step. We must also consider why the algorithm terminates
    for any given legal input. The input of sierpinski is a single positive number.
    If the number is smaller than SMALL, the algorithm terminates. Otherwise, the
    recursive call uses a number that is half as large as the given one. Hence, the
    algorithm must terminate for all positive sides, assuming SMALL is positive, too.
  prefs: []
  type: TYPE_NORMAL
- en: One view of the Sierpinski process is that it divides its problem in half until
    it is immediately solvable. With a little imagination, you can see that the process
    can be used to search for numbers with certain properties. The next section explains
    this idea in detail.
  prefs: []
  type: TYPE_NORMAL
- en: 27.2Binary Search[ğŸ”—](#(part._sec~3abinary-search) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Applied mathematicians model the real world with nonlinear equations and then
    try to solve them. Specifically, they translate problems into a function f from
    numbers to numbers and look for some number r such that
  prefs: []
  type: TYPE_NORMAL
- en: f(r) = 0.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The value r is called the root of f.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/a2c05a3b0d8a9fe504efd1e3a2398b45.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 158: A numeric function f with root in interval [a,b] (stage 1)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Here is a problem from the physical domain:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem A rocket is flying at the constant speed of v miles per hour
    on a straight line toward some target, d0 miles away. It then accelerates at the
    rate of a miles per hour squared for t hours. When will it hit its target?
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Physics tells us that the distance covered is the following function of time:'
  prefs: []
  type: TYPE_NORMAL
- en: d(t) = (v * t + 1/2 * a * t2)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The question of when it hits the target asks us to find the time t0 such that
    the object reaches the desired goal:'
  prefs: []
  type: TYPE_NORMAL
- en: d0 = (v * t0 + 1/2 * a * t02)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: From algebra we know that this is a quadratic equation and that it is possible
    to solve such equations if d0, a, and v satisfy certain conditions.
  prefs: []
  type: TYPE_NORMAL
- en: Generally such problems call for more complexity than quadratic equations. In
    response, mathematicians have spent the last few centuries developing root-finding
    methods for different types of functions. In this section, we study a solution
    that is based on the Intermediate Value Theorem (IVT), an early result of analysis.
    The resulting algorithm is a primary example of generative recursion based on
    a mathematical theorem. Computer scientists have generalized it to the binary
    search algorithm.
  prefs: []
  type: TYPE_NORMAL
- en: The Intermediate Value Theorem says that a continuous function f has a root
    in an interval [a,b] if f(a) and f(b) are on opposite sides of the x-axis. By
    continuous we mean a function that doesnâ€™t â€œjump,â€ that doesnâ€™t have gaps, and
    that proceeds on a â€œsmoothâ€ path.
  prefs: []
  type: TYPE_NORMAL
- en: '[FigureÂ 158](#%28counter._%28figure._fig~3aroot%29%29) illustrates the Intermediate
    Value Theorem. The function f is a continuous function, as suggested by the uninterrupted,
    smooth graph. It is below the x-axis at a and above at b, and indeed, it intersects
    the x-axis somewhere in this interval, labeled â€œrange 1â€ in the figure.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Now take a look at the midpoint between a and b:'
  prefs: []
  type: TYPE_NORMAL
- en: m = (a+b) / 2
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'It partitions the interval [a,b] into two smaller, equally sized intervals.
    We can now compute the value of f at m and see whether it is below 0 or above.
    Here f(m) > 0, so, according to the Intermediate Value Theorem, the root is in
    the left interval: [a,m]. Our picture confirms this because the root is in the
    left half of the interval, labeled â€œrange 2â€ in [figureÂ 158](#%28counter._%28figure._fig~3aroot%29%29).We
    now have a description of the key step in the root-finding process. Next, we translate
    this description into an ISL+ algorithm. Our first task is to state its purpose.
    Clearly the algorithm consumes a function and the boundaries of the interval in
    which we expect to find a root:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29)  [Number](part_one.html#%28tech._number%29)
    -> ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-rootÂ fÂ leftÂ right)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The three parameters canâ€™t be just any function and numbers. For find-root
    to work, we must assume that the following holds:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â (fÂ left)Â 0Â (fÂ right))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â (fÂ right)Â 0Â (fÂ left)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'that is, (f  left) and (f  right) must be on opposite sides of the x-axis.Next
    we need to fix the functionâ€™s result and formulate a purpose statement. Simply
    put, find-root finds an interval that contains a root. The search divides the
    interval until its size, ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  right  left),
    is tolerably small, say, smaller than some constant Îµ.DrRacket allows the use
    of Greek symbols such as Îµ. But you can also write EPSILON instead. At that point,
    the function could produce one of three results: the left boundary, the right
    one, or a representation of the interval. Any one of them completely identifies
    the interval, and since it is simpler to return numbers, we pick the left boundary.
    Here is the complete header material:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29)  [Number](part_one.html#%28tech._number%29)
    -> [Number](part_one.html#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â determines R such that f has a root in [R,([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  R  Îµ)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â assume  f is continuous |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â (2) ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)  ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)  (f  left)  0  (f  right))  ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)  (f  right)  0  (f  left)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â generative divides interval in half, the root is in |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â one of the two halves, picks according to (2) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-rootÂ fÂ leftÂ right)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â 0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'ExerciseÂ 445\. Consider the following function definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (polyÂ x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â xÂ 2)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â xÂ 4)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'It defines a binomial for which we can determine its roots by hand:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (polyÂ 2) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (polyÂ 4) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Use poly to formulate a [check-satisfied](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29)
    or [check-within](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29)
    test for find-root.Also use poly to illustrate the root-finding process. Start
    with the interval [3,6] and tabulate the information as follows for Îµ = 0:'
  prefs: []
  type: TYPE_NORMAL
- en: '| step |  | left |  | f left |  | right |  | f right |  | mid |  | f mid |  |  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| n=1 |  | 3 |  | -1 |  | 6.00 |  | 8.00 |  | 4.50 |  | 1.25 |  |  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| n=2 |  | 3 |  | -1 |  | 4.50 |  | 1.25 |  | ? |  | ? |  |  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Our next task is to address the four questions of algorithm design:'
  prefs: []
  type: TYPE_NORMAL
- en: 'We need a condition that describes when the problem is solved and a matching
    answer. Given our discussion so far, this is straightforward:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â rightÂ left)Â Îµ)
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: The matching result in the trivial case is left.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'For the generative case, we need an expression that generates new problems
    for find-root. According to our informal description, this step requires determining
    the midpoint and its function value:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â midÂ ([/](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â leftÂ right)Â 2))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â f@mÂ (fÂ mid)))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: The midpoint is then used to pick the next interval. Following IVT, the interval
    [left,mid] is the next candidate if
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â (fÂ left)Â 0Â f@m)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â f@mÂ 0Â (fÂ left)))
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: while [mid,right] is used for the recursive call if
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â f@mÂ 0Â (fÂ right))Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â (fÂ right)Â 0Â f@m))
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Translated into code, the body of [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    must be a conditional:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â (fÂ left)Â 0Â f@m)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â f@mÂ 0Â (fÂ left)))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (find-rootÂ fÂ leftÂ mid)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â f@mÂ 0Â (fÂ right))Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â (fÂ right)Â 0Â f@m))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â (find-rootÂ fÂ midÂ right)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))])
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: In both clauses, we use find-root to continue the search.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The answer to the final question is obvious. Since the recursive call to find-root
    finds the root of f, there is nothing else to do.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The completed function is displayed in [figureÂ 159](#%28counter._%28figure._fig~3aroot-of-f%29%29);
    the following exercises elaborate on its design.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29)  [Number](part_one.html#%28tech._number%29)
    -> [Number](part_one.html#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â determines R such that f has a root in [R,([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  R  Îµ)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â assume  f is continuous |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â assume  ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)  ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)  (f  left)  0  (f  right))  ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)  (f  right)  0  (f  left)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â generative divides interval in half, the root is in one of the two |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â halves, picks according to assumption |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-rootÂ fÂ leftÂ right)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â rightÂ left)Â Îµ)Â left]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â midÂ ([/](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)Â leftÂ right)Â 2))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â f@midÂ (fÂ mid)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â [([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â (fÂ left)Â 0Â f@mid)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â f@midÂ 0Â (fÂ left)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â (find-rootÂ fÂ leftÂ mid)] |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â [([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â f@midÂ 0Â (fÂ right))Â ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â (fÂ right)Â 0Â f@mid))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â (find-rootÂ fÂ midÂ right)]))])) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 159: The find-root algorithm'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 446\. Add the test from [exerciseÂ 445](#%28counter._%28exercise._ex~3afind-root-example%29%29)
    to the program in [figureÂ 159](#%28counter._%28figure._fig~3aroot-of-f%29%29).
    Experiment with different values for Îµ.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 447\. The poly function has two roots. Use find-root with poly and
    an interval that contains both roots.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 448\. The find-root algorithm terminates for all (continuous) f, left,
    and right for which the assumption holds. Why? Formulate a termination argument.
  prefs: []
  type: TYPE_NORMAL
- en: Hint Suppose the arguments of find-root describe an interval of size S1. How
    large is the distance between left and right for the first and second recursive
    call to find-root? After how many steps is ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)  right  left)
    smaller than or equal to Îµ?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 449\. As presented in [figureÂ 159](#%28counter._%28figure._fig~3aroot-of-f%29%29),
    find-root computes the value of f for each boundary value twice to generate the
    next interval. Use [local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)
    to avoid this recomputation.
  prefs: []
  type: TYPE_NORMAL
- en: In addition, find-root recomputes the value of a boundary across recursive calls.
    For example, (find-root  f  left  right) computes (f  left) and, if [left,mid]
    is chosen as the next interval, find-root computes (f  left) again. Introduce
    a helper function that is like find-root but consumes not only left and right
    but also (f  left) and (f  right) at each recursive stage.
  prefs: []
  type: TYPE_NORMAL
- en: How many recomputations of (f  left) does this design maximally avoid? Note
    The two additional arguments to this helper function change at each recursive
    stage, but the change is related to the change in the numeric arguments. These
    arguments are so-called accumulators, which are the topic of [Accumulators](part_six.html).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 450\. A function f is monotonically increasing if ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)  (f  a)  (f  b))
    holds whenever ([<](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c%29%29)  a  b)
    holds. Simplify find-root assuming the given function is not only continuous but
    also monotonically increasing.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 451\. A table is a structure of two fields: the natural number length
    and a function array,Many programming languages, including Racket, support arrays
    and vectors, which are similar to tables. which consumes natural numbers and,
    for those between 0 and length (exclusive), produces answers:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â tableÂ [lengthÂ array])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Table is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-table  [N](part_two.html#%28tech._n%29)  [[N](part_two.html#%28tech._n%29)  [->](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-~3e%29%29)  [Number](part_one.html#%28tech._number%29)])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Since this data structure is somewhat unusual, it is critical to illustrate
    it with examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â table1Â (make-tableÂ 3Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (i)Â i)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [N](part_two.html#%28tech._n%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (a2Â i)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29)Â iÂ 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [pi](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._pi%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29)Â "table2
    is not defined for i =!= 0"))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â table2Â (make-tableÂ 1Â a2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Here table1â€™s array function is defined for more inputs than its length field
    allows; table2 is defined for just one input, namely 0. Finally, we also define
    a useful function for looking up values in tables:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Table](#%28tech._table%29)  [N](part_two.html#%28tech._n%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â looks up the ith value in array of t |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (table-refÂ tÂ i)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ((table-arrayÂ t)Â i)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The root of a table t is a number in (table-array  t) that is close to 0. A
    root index is a natural number i such that (table-ref  t  i) is a root of table
    t. A table t is monotonically increasing if (table-ref  t  0) is less than (table-ref  t  1),
    (table-ref  t  1) is less than (table-ref  t  2), and so on.
  prefs: []
  type: TYPE_NORMAL
- en: Design find-linear. The function consumes a monotonically increasing table and
    finds the smallest index for a root of the table. Use the structural recipe for
    [N](part_two.html#%28tech._n%29), proceeding from 0 through 1, 2, and so on to
    the array-length of the given table. This kind of root-finding process is often
    called a linear search.
  prefs: []
  type: TYPE_NORMAL
- en: Design find-binary, which also finds the smallest index for the root of a monotonically
    increasing table but uses generative recursion to do so. Like ordinary binary
    search, the algorithm narrows an interval down to the smallest possible size and
    then chooses the index. Donâ€™t forget to formulate a termination argument.
  prefs: []
  type: TYPE_NORMAL
- en: Hint The key problem is that a table index is a natural number, not a plain
    number. Hence the interval boundary arguments for find must be natural numbers.
    Consider how this observation changes (1) the nature of trivially solvable problem
    instances, (2) the midpoint computation, (3) and the decision as to which interval
    to generate next. To make this concrete, imagine a table with 1024 slots and the
    root at 1023\. How many calls to find are needed in find-linear and find-binary,
    respectively?
  prefs: []
  type: TYPE_NORMAL
- en: 27.3A Glimpse at Parsing[ğŸ”—](#(part._sec~3afiles-lines) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'As mentioned in [Iterative Refinement](part_four.html#%28part._ch~3afiles%29),
    computers come with files, which provide a form of permanent memory. From our
    perspective a file is just a list of [1String](part_one.html#%28tech._1string%29)s,The
    exact convention differs from one operating system to another, but for our purposes
    this is irrelevant. though interrupted by a special string:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A File is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ''() |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  "\n"  [File](#%28tech._file%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)  [1String](part_one.html#%28tech._1string%29)  [File](#%28tech._file%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents the content of a file |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â "\n" is the newline character |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The idea is that [File](#%28tech._file%29)s are broken into lines, where "\n"
    represents the so-called newline character, which indicates the end of a line.
    Letâ€™s also introduce lines before we move on:'
  prefs: []
  type: TYPE_NORMAL
- en: ;Â A Line is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)].
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Many functions need to process files as list of lines. The [read-lines](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29)
    from the 2htdp/batch-io teachpack is one of them. Concretely, the function turns
    the file
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â "h"Â "o"Â "w"Â " "Â "a"Â "r"Â "e"Â " "Â "y"Â "o"Â "u"Â "\n" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â "d"Â "o"Â "i"Â "n"Â "g"Â "?"Â "\n" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â "a"Â "n"Â "y"Â " "Â "p"Â "r"Â "o"Â "g"Â "r"Â "e"Â "s"Â "s"Â "?") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'into a list of three lines:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "h"Â "o"Â "w"Â "
    "Â "a"Â "r"Â "e"Â " "Â "y"Â "o"Â "u") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "d"Â "o"Â "i"Â "n"Â "g"Â "?")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "n"Â "y"Â "
    "Â "p"Â "r"Â "o"Â "g"Â "r"Â "e" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â "s"Â "s"Â "?")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Similarly, the file
  prefs: []
  type: TYPE_NORMAL
- en: ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "b"Â "c"Â "\n"Â "d"Â "e"Â "\n"Â "f"Â "g"Â "h"Â "\n")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'also corresponds to a list of three lines:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "b"Â "c")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "d"Â "e")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "f"Â "g"Â "h"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Stop! What are the list-of-lines representations for these three cases: ''(),
    ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  "\n"),
    and ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  "\n"  "\n")?
    Why are these examples important test cases?'
  prefs: []
  type: TYPE_NORMAL
- en: The problem of turning a sequence of [1String](part_one.html#%28tech._1string%29)s
    into a list of lines is called the parsing problem. Many programming languages
    provide functions that retrieve lines, words, numbers, and other kinds of so-called
    tokens from files. But even if they do, it is common that programs need to parse
    these tokens even further. This section provides a glimpse at a parsing technique.
    Parsing is so complex and so central to the creation of full-fledged software
    applications, however, that most undergraduate curricula come with at least one
    course on parsing. So do not think you can tackle real parsing problems properly
    even after mastering this section.
  prefs: []
  type: TYPE_NORMAL
- en: 'We start by stating the obviousâ€”<wbr>a signature, a purpose statement, one
    of the above examples, and a headerâ€”<wbr>for a function that turns a [File](#%28tech._file%29)
    into a list of [Line](#%28tech._line%29)s:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [File](#%28tech._file%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Line](#%28tech._line%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â converts a file into a list of lines |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (file->list-of-lines
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "b"Â "c"Â "\n"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "d"Â "e"Â "\n" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "f"Â "g"Â "h"Â "\n")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "b"Â "c")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "d"Â "e")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "f"Â "g"Â "h")))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (file->list-of-linesÂ afile)Â ''())
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'It is also easy to describe the parsing process, given our experience with
    [Recursion without Structure](#%28part._sec~3abundle%29):'
  prefs: []
  type: TYPE_NORMAL
- en: The problem is trivially solvable if the file is '().
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In that case, the file doesnâ€™t contain a line.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Otherwise, the file contains at least one "\n" or some other [1String](part_one.html#%28tech._1string%29).
    These itemsâ€”<wbr>up to and including the first "\n", if anyâ€”<wbr>must be separated
    from the rest of the [File](#%28tech._file%29). The remainder is a new problem
    of the same kind that file->list-of-lines can solve.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It then suffices to [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    the initial segment as a single line to the list of [Line](#%28tech._line%29)s
    that result from the rest of the [File](#%28tech._file%29).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The four questions suggest a straightforward instantiation of the template
    for generative recursive functions. Because the separation of the initial segment
    from the rest of the file requires a scan of an arbitrarily long list of [1String](part_one.html#%28tech._1string%29)s,
    we put two auxiliary functions on our wish list: first-line, which collects all
    [1String](part_one.html#%28tech._1string%29)s up to, but excluding, the first
    occurrence of "\n" or the end of the list; and remove-first-line, which removes
    the very same items that first-line collects.'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [File](#%28tech._file%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Line](#%28tech._line%29)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â converts a file into a list of lines |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (file->list-of-linesÂ afile)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â afile)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â (first-lineÂ afile)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â (file->list-of-linesÂ (remove-first-lineÂ afile)))])) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [File](#%28tech._file%29) -> [Line](#%28tech._line%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â retrieves the prefix of afile up to the first occurrence of NEWLINE |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (first-lineÂ afile)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â afile)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â afile)Â NEWLINE)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â afile)Â (first-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â afile)))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [File](#%28tech._file%29) -> [File](#%28tech._file%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â drops the prefix of afile up to the first occurrence of NEWLINE |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (remove-first-lineÂ afile)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â afile)Â ''()]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â afile)Â NEWLINE)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â afile)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (remove-first-lineÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â afile))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â NEWLINEÂ "\n")Â ;Â the
    [1String](part_one.html#%28tech._1string%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 160: Translating a file into a list of lines'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: From here, it is easy to create the rest of the program. In file->list-of-lines,
    the answer in the first clause must be '() because an empty file does not contain
    any lines. The answer in the second clause must [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    the value of (first-line  afile) onto the value (file->list-of-lines  (remove-first-line  afile)),
    because the first expression computes the first line and the second one computes
    the rest of the lines. Finally, the auxiliary functions traverse their inputs
    in a structurally recursive manner; their development is a straightforward exercise.
    [FigureÂ 160](#%28counter._%28figure._fig~3afile2list%29%29) presents the complete
    program code.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is how file->list-of-lines processes the second test:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (file->list-of-lines |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "b"Â "c"Â "\n"Â "d"Â "e"Â "\n"Â "f"Â "g"Â "h"Â "\n"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "b"Â "c")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (file->list-of-lines |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "d"Â "e"Â "\n"Â "f"Â "g"Â "h"Â "\n")))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "b"Â "c")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "d"Â "e")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â (file->list-of-lines |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "f"Â "g"Â "h"Â "\n"))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "b"Â "c")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "d"Â "e")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "f"Â "g"Â "h")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (file->list-of-linesÂ ''())))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "a"Â "b"Â "c")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "d"Â "e")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â "f"Â "g"Â "h")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''()))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: This evaluation is another reminder that the argument of the recursive application
    of file->list-of-lines is almost never the rest of the given file. It also shows
    why this generative recursion is guaranteed to terminate for every given [File](#%28tech._file%29).
    Every recursive application consumes a list that is shorter than the given one,
    meaning the recursive process stops when the process reaches '().
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 452\. Both first-line and remove-first-line are missing purpose statements.
    Articulate proper statements.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 453\. Design the function tokenize. It turns a [Line](#%28tech._line%29)
    into a list of tokens. Here a token is either a [1String](part_one.html#%28tech._1string%29)
    or a [String](part_one.html#%28tech._string%29) that consists of lower-case letters
    and nothing else. That is, all white-space [1String](part_one.html#%28tech._1string%29)s
    are dropped; all other non-letters remain as is; and all consecutive letters are
    bundled into â€œwords.â€ Hint Read up on the [string-whitespace?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-whitespace~3f%29%29)
    function.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 454\. Design create-matrix. The function consumes a number n and a
    list of n2 numbers. It produces an ![image](../Images/80af2ae13788ea66e71a8e4cd0cedb24.png)
    matrix, for example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (create-matrixÂ 2Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 1Â 2Â 3Â 4))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 1Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 3Â 4)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Make up a second example.
  prefs: []
  type: TYPE_NORMAL
- en: 28Mathematical Examples[ğŸ”—](#(part._ch~3agen-rec-math) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Many solutions to mathematical problems employ generative recursion. A future
    programmer must get to know such solutions for two reasons. On the one hand, a
    fair number of programming tasks are essentially about turning these kinds of
    mathematical ideas into programs. On the other hand, practicing with such mathematical
    problems often proves inspirational for the design of algorithms. This chapter
    deals with three such problems.
  prefs: []
  type: TYPE_NORMAL
- en: 28.1Newtonâ€™s Method[ğŸ”—](#(part._sec~3anewton) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[Binary Search](#%28part._sec~3abinary-search%29) introduces one method for
    finding the root of a mathematical function. As the exercises in the same section
    sketch, the method naturally generalizes to computational problems, such as finding
    certain values in tables, vectors, and arrays. In mathematical applications, programmers
    tend to employ methods that originate from analytical mathematics. A prominent
    one is due to Newton. Like binary search, the so-called Newton method repeatedly
    improves an approximation to the root until it is â€œclose enough.â€ Starting from
    a guess, say, r1, the essence of the process is to construct the tangent of f
    at r1 and to determine its root. While the tangent approximates the function,
    it is also straightforward to determine its root. By repeating this process sufficiently
    often,Newton proved this fact. an algorithm can find a root r for which (f r)
    is close enough to 0.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Clearly, this process relies on two pieces of domain knowledge about tangents:
    their slopes and roots. Informally, a tangent of f at some point r1 is the line
    that goes through the point (r1, f(r1)) and has the same slope as f. One mathematical
    way to obtain the tangentâ€™s slope is to pick two close points on the x-axis that
    are equidistant from r1 and to use the slope of the line determined by f at those
    two points. The convention is to choose a small number Îµ and to work with r1 +
    Îµ and r1 - Îµ. That is, the points are (r1 - Îµ, f(r1 - Îµ)) and (r1 + Îµ, f(r1 +
    Îµ)), which determine a line and a slope:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/8d906916eed4811a36a8445fa57d69f1.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: ExerciseÂ 455\. Translate this mathematical formula into the ISL+ function slope,
    which maps function f and a number r1 to the slope of f at r1. Assume that Îµ is
    a global constant. For your examples, use functions whose exact slope you can
    figure out, say, horizontal lines, linear functions, and perhaps polynomials if
    you know some calculus.
  prefs: []
  type: TYPE_NORMAL
- en: The second piece of domain knowledge concerns the root of a tangent, which is
    just a line or a linear function. The tangent goes through (r1, f(r1)) and has
    the above slope. Mathematically, it is defined as
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/0886147f262ed0327f1c06ff7b448cd5.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'Finding the root of tangent means finding a value root-of-tangent so that tangent(root-of-tangent)
    equals 0:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/246a53eb0f5e88102c94bd00a1e3f23e.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'We can solve this equation in a straightforward manner:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/c6817d5157a2184bbeccf51d91cd6284.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: ExerciseÂ 456\. Design root-of-tangent, a function that maps f and r1 to the
    root of the tangent through (r1,(f  r1)).
  prefs: []
  type: TYPE_NORMAL
- en: 'Now we can use the design recipe to translate the description of Newtonâ€™s process
    into an ISL+ program. The functionâ€”<wbr>letâ€™s call it newton in honor of its inventorâ€”<wbr>consumes
    a function f and a number r1:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds a number r such that (f  r) is small |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â generative repeatedly generates improved guesses |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (newtonÂ fÂ r1)Â 1.0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'For the template of newton, we turn to the central four questions of the design
    recipe for generative recursion:'
  prefs: []
  type: TYPE_NORMAL
- en: 'If (f  r1) is close enough to 0, the problem is solved. Close to 0 could mean
    (f  r1) is a small positive number or a small negative number. Hence we check
    its absolute value:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â ([abs](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._abs%29%29)Â (fÂ r1))Â Îµ)
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: The solution is r1.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The generative step of the algorithm consists of finding the root of the tangent
    of f at r1, which generates the next guess. By applying newton to f and this new
    guess, we resume the process.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The answer of the recursion is also the answer of the original problem.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| ;Â [[Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds a number r such that ([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)  ([abs](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._abs%29%29)  (f  r))  Îµ)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-within](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29)Â (newtonÂ polyÂ 1)Â 2Â Îµ)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-within](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29)Â (newtonÂ polyÂ 3.5)Â 4Â Îµ)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (newtonÂ fÂ r1)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29)Â ([abs](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._abs%29%29)Â (fÂ r1))Â Îµ)Â r1]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â (newtonÂ fÂ (root-of-tangentÂ fÂ r1))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â see [exerciseÂ 455](#%28counter._%28exercise._ex~3aslope%29%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (slopeÂ fÂ r)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â see [exerciseÂ 456](#%28counter._%28exercise._ex~3aroot-of-tangent%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (root-of-tangentÂ fÂ r)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 161: The Newton process'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 161](#%28counter._%28figure._fig~3anewton%29%29) displays newton. It
    includes two tests that are derived from the tests in [Binary Search](#%28part._sec~3abinary-search%29)
    for find-root. After all, both functions search for the root of a function, and
    poly has two known roots.'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/f42dab22450baf9f10388f4a8e93e5b0.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 162: The graph of poly on the interval [-1,5]'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'We are not finished with the design of newton. The new, seventh step of the
    design recipe calls for an investigation into the termination behavior of the
    function. For newton, the problem shows up with poly:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (polyÂ x)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â xÂ 2)Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â xÂ 4)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As mentioned, its roots are 2 and 4. The graph of poly in [figureÂ 162](#%28counter._%28figure._fig~3apoly-root%29%29)
    confirms these roots and also shows that between the two roots the function flattens
    out. For a mathematically inclined person, this shape raises the question of what
    newton computes for an initial guess of 3:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (polyÂ 3) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| -1 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (newtonÂ polyÂ 3) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| /:division by zero |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The explanation is that slope produces a â€œbadâ€ value and the root-of-tangent
    function turns it into an error:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (slopeÂ polyÂ 3) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (root-of-tangentÂ polyÂ 3) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| /:division by zero |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In addition to this run-time error, newton exhibits two other problems with
    respect to termination. Fortunately, we can demonstrate both with poly. The first
    one concerns the nature of numbers, which we briefly touched on in [The Arithmetic
    of Numbers](part_one.html#%28part._sec~3aarith-num%29). It is safe to ignore the
    distinction between exact and inexact numbers for many beginner exercises in programming,
    but when it comes to translating mathematics into programs, you need to proceed
    with extreme caution. Consider the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (newtonÂ polyÂ 2.9999) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'An ISL+ program treats 2.9999 as an exact number, and the computations in newton
    process it as such, though because the numbers arenâ€™t integers, the computation
    uses exact rational fractions. Since the arithmetic for fractions can get much
    slower than the arithmetic for inexact numbers, the above function call takes
    a significant amount of time in DrRacket. Depending on your computer, it may take
    between a few seconds and a minute or more. If you happen to choose other numbers
    that trigger this form of computation, it may seem as if the call to newton does
    not terminate at all.The second problem concerns non-termination. Here is the
    example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (newtonÂ polyÂ #i3.0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'It uses the inexact number #i3.0 as the initial guess, which unlike 3 causes
    a different kind of problem. Specifically, the slope function now produces an
    inexact 0 for poly while root-of-tangent jumps to infinity:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (slopeÂ polyÂ #i3.0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #i0.0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (root-of-tangentÂ polyÂ #i3.0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #i+inf.0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As a result, the evaluation immediately falls into an infinite loop.The calculation
    in newton turns #i+inf.0 into +nan.0, a piece of data that says â€œnot a number.â€
    Most arithmetic operations propagate this value, which explains the behavior of
    newton.'
  prefs: []
  type: TYPE_NORMAL
- en: In short, newton exhibits the full range of problems when it comes to complex
    termination behavior. For some inputs, the function produces a correct result.
    For some others, it signals errors. And for yet others, it goes into infinite
    loop or appears to go into one. The header for newtonâ€”<wbr>or some other piece
    of writingâ€”<wbr>must warn others who wish to use the function and future readers
    of these complexities, and good math libraries in common programming languages
    do so.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 457\. Design the function double-amount,This exercise was suggested
    by Adrian German. which computes how many months it takes to double a given amount
    of money when a savings account pays interest at a fixed rate on a monthly basis.
  prefs: []
  type: TYPE_NORMAL
- en: Domain Knowledge With a minor algebraic manipulation, you can show that the
    given amount is irrelevant. Only the interest rate matters. Also domain experts
    know that doubling occurs after roughly 72/r month as long as the interest rate
    r is â€œsmall.â€
  prefs: []
  type: TYPE_NORMAL
- en: 28.2Numeric Integration[ğŸ”—](#(part._sec~3aintegrate) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Many physics problems boil down to determining the area under a curve:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem A car drives at a constant speed of v meters per second. How
    far does it travel in 5, 10, 15 seconds?
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: A rocket lifts off at the constant rate of acceleration of ![image](../Images/2b4ffc49abc295bcc6dec9b30c17b233.png).
    What height does it reach after 5, 10, 15 seconds?
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Physics tells us that a vehicle travels ![image](../Images/038e3a0712806375958dcfa83ac3afba.png)
    meters if it moves at a constant speed v for t seconds. For vehicles that accelerate,
    the distance traveled depends on the square of the time t passed:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/70b80163005713a810495cfb2a01f115.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: In general, the law tells us that the distance corresponds to the area under
    the graph of speed v(t) over time t.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/92c4712c141c5f0c31e06803b38781b2.png) Â Â  ![image](../Images/224cfeeee35e3095cf245d40185bde6e.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 163: Distance traveled with constant vs accelerating speed'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 163](#%28counter._%28figure._fig~3adistance%29%29) illustrates the
    idea in a graphical manner. On the left, we see an overlay of two graphs: the
    solid flat line is the speed of the vehicle and the rising dashed line is the
    distance traveled. A quick check shows that the latter is indeed the area determined
    by the former and the x-axis at every point in time. Similarly, the graphs on
    the right show the relationship between a rocket moving at constantly increasing
    speed and the height it reaches. Determining this area under the graph of a function
    for some specific interval is called (function) integration.'
  prefs: []
  type: TYPE_NORMAL
- en: While mathematicians know formulas for the two sample problems that give precise
    answers, the general problem calls for computational solutions. The problem is
    that curves often come with complex shapes, more like those in [figureÂ 164](#%28counter._%28figure._fig~3afunc-int%29%29),
    which suggests that someone needs to know the area between the x-axis, the vertical
    lines labeled a and b, and the graph of f. Applied mathematicians determine such
    areas in an approximate manner, summing the areas of many small geometric shapes.
    It is therefore natural to develop algorithms that deal with these calculations.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/e5e04b2b4cfd50b0f0c83d766c2e5746.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 164: Integrating a function f between a and b'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'An integration algorithm consumes three inputs: the function f and two borders,
    a and b. The fourth part, the x-axis, is implied. This suggests the following
    signature:'
  prefs: []
  type: TYPE_NORMAL
- en: ;Â [[Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29)  [Number](part_one.html#%28tech._number%29)
    -> [Number](part_one.html#%28tech._number%29)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In order to understand the idea behind integration, it is best to study simple
    examples such as a constant function or a linear one. Thus, consider
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (constantÂ x)Â 20)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Passing constant to integrate, together with 12 and 22, describes a rectangle
    of width 10 and height 20. The area of this rectangle is 200, meaning we get this
    test:'
  prefs: []
  type: TYPE_NORMAL
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (integrateÂ constantÂ 12Â 22)Â 200)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Similarly, letâ€™s use linear to create a second test:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (linearÂ x)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 2Â x))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'If we use linear, 0, and 10 with integrate, the area is a triangle with a base
    width of 10 and a height of 20. Here is the example as a test:'
  prefs: []
  type: TYPE_NORMAL
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (integrateÂ linearÂ 0Â 10)Â 100)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: After all, a triangleâ€™s area is half of the product of its base width and height.For
    a third example, we exploit some domain-specific knowledge. As mentioned, mathematicians
    know how to determine the area under some functions in a precise manner. For example,
    the area under the function
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/2c2e206d15c6987ee584207950735378.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: on the interval [a,b] can be calculated with the following formula
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/ac354e5df5ecd7fdba3f8a4450073a27.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'Here is how to turn this idea into a concrete test:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â x)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â ([sqr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sqr%29%29)Â x)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (integrateÂ [square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 0Â 10)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([-](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29)Â ([expt](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._expt%29%29)Â 10Â 3)Â ([expt](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._expt%29%29)Â 0Â 3)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â ÎµÂ 0.1)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [[Number](part_one.html#%28tech._number%29) -> [Number](part_one.html#%28tech._number%29)]
    [Number](part_one.html#%28tech._number%29)  [Number](part_one.html#%28tech._number%29)
    -> [Number](part_one.html#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the area under the graph of f between a and b |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â assume  ([<](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c%29%29)  a  b)
    holds |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-within](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29)Â (integrateÂ ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (x)Â 20)Â 12Â 22)Â 200Â Îµ)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-within](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29)Â (integrateÂ ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (x)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 2Â x))Â 0Â 10)Â 100Â Îµ)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-within](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29)Â (integrateÂ ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (x)Â ([*](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29)Â 3Â ([sqr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sqr%29%29)Â x)))Â 0Â 10)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â 1000 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Îµ) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (integrateÂ fÂ aÂ b)Â #i0.0)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 165: A generic integration function'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 165](#%28counter._%28figure._fig~3aintegrate-test%29%29) collects the
    result of the first three steps of the design recipe. The figure adds a purpose
    statement and an obvious assumption concerning the two interval boundaries. Instead
    of [check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)
    it uses [check-within](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29),
    which anticipates the numerical inaccuracies that come with computational approximations
    in such calculations. Analogously, the header of integrate specifies #i0.0 as
    the return result, signaling that the function is expected to return an inexact
    number.'
  prefs: []
  type: TYPE_NORMAL
- en: The following two exercises show how to turn domain knowledge into integration
    functions. Both functions compute rather crude approximations. While the design
    of the first uses only mathematical formulas, the second also exploits a bit of
    structural design ideas. Solving these exercises creates the necessary appreciation
    for the core of this section, which presents a generative-recursive integration
    algorithm.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 458\. Kepler suggested a simple integration method. To compute an
    estimateThe method is known as Keplerâ€™s rule. of the area under f between a and
    b, proceed as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: divide the interval into half at mid = (a + b) / 2;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'compute the areas of these two trapezoids:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[(a,0),(a,f(a)),(mid,0),(mid,f(mid))]'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[(mid,0),(mid,f(mid)),(b,0),(b,f(b))];'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: then add the two areas.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Domain Knowledge Letâ€™s take a look at these trapezoids. Here are the two possible
    shapes, with minimal annotations to reduce clutter:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/448a5a896ad80c1f4a48608cceec1cca.png) Â Â Â Â  ![image](../Images/945c6d877f4a1a7c0dcf41f5a6aeeb57.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'The left shape assumes f(L) > f(R) while the right one shows the case where
    f(L) < f (R). Despite the asymmetry, it is still possible to calculate the area
    of these trapezoids with a single formula:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/7b16bc327a708d1bba7d1f45a1ab2da5.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: Stop! Convince yourself that this formula adds the area of the triangle to the
    area of the lower rectangle for the left trapezoid, while it subtracts the triangle
    from the area of the large rectangle for the right one.Also show that the above
    formula is equal to
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/41525a7fa522abb6a60bd0820eec851f.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: This is a mathematical validation of the asymmetry of the formula.
  prefs: []
  type: TYPE_NORMAL
- en: Design the function integrate-kepler. That is, turn the mathematical knowledge
    into an ISL+ function. Adapt the test cases from [figureÂ 165](#%28counter._%28figure._fig~3aintegrate-test%29%29)
    to this use. Which of the three tests fails and by how much?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 459\. Another simple integration method divides the area into many
    small rectangles. Each rectangle has a fixed width and is as tall as the function
    graph in the middle of the rectangle. Adding up the areas of the rectangles produces
    an estimate of the area under the functionâ€™s graph.
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s use
  prefs: []
  type: TYPE_NORMAL
- en: R = 10
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: to stand for the number of rectangles to be considered. Hence the width of each
    rectangle is
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/9da0a08d6045788fdd1cf4e0690ee57e.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: The height of one of these rectangles is the value of f at its midpoint. The
    first midpoint is clearly at a plus half of the width of the rectangle,
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/88f434bb077dd6149abf1bf91a46e145.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: which means its area is
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/d84ae566829ba1c227c0ad6ff1cb52c3.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'To compute the area of the second rectangle, we must add the width of one rectangle
    to the first midpoint:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/b09059b4273269ab12568b48ac43e5c5.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: For the third one, we get
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/a54ba3fa6fbc3ddd744b9290f8d8fa99.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'In general, we can use the following formula for the ith rectangle:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/f753efb3ddc0f70a8ad4ebb93e92ac00.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'The first rectangle has index 0, the last one R - 1.Using these rectangles,
    we can now determine the area under the graph:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/a0d55823c3db4ed6c7f36fd396fcd903.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: Turn the description of the process into an ISL+ function and call it integrate-rectangles.
    Adapt the test cases from [figureÂ 165](#%28counter._%28figure._fig~3aintegrate-test%29%29)
    to this case.
  prefs: []
  type: TYPE_NORMAL
- en: The more rectangles the algorithm uses, the closer its estimate is to the actual
    area. Make R a top-level constant and increase it by factors of 10 until the algorithmâ€™s
    accuracy eliminates problems with an Îµ value of 0.1.
  prefs: []
  type: TYPE_NORMAL
- en: Decrease Îµ to 0.01 and increase R enough to eliminate any failing test cases
    again. Compare the result to [exerciseÂ 458](#%28counter._%28exercise._ex~3aintegral-kepler%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: The Kepler method of [exerciseÂ 458](#%28counter._%28exercise._ex~3aintegral-kepler%29%29)
    immediately suggests a divide-and-conquer strategy like binary search introduced
    in [Binary Search](#%28part._sec~3abinary-search%29). Roughly speaking, the algorithm
    would split the interval into two pieces, recursively compute the area of each
    piece, and add the two results.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 460\. Develop the algorithm integrate-dc, which integrates a function
    f between the boundaries a and b using a divide-and-conquer strategy. Use Keplerâ€™s
    method when the interval is sufficiently small.
  prefs: []
  type: TYPE_NORMAL
- en: The divide-and-conquer approach of [exerciseÂ 460](#%28counter._%28exercise._ex~3aintegral-dc%29%29)
    is wasteful. Consider a function whose graph is level in one part and rapidly
    changes in another; see [figureÂ 166](#%28counter._%28figure._fig~3awave-y-function%29%29)
    for a concrete example. For the level part on the graph, it is pointless to keep
    splitting the interval. It is just as easy to compute the trapezoid for the complete
    interval as for the two halves. For the â€œwavyâ€ part, however, the algorithm must
    continue dividing the interval until the irregularities of the graph are reasonably
    small.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/45bdb5a3eeb47516f4a35ad80cc9e013.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 166: A candidate for adaptive integration'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'To discover when f is level, we can change the algorithm as follows. Instead
    of just testing how large the interval is, the new algorithm computes the area
    of three trapezoids: the given one and the two halves. If the difference between
    the two is less than the area of a small rectangle of height Îµ and width ![image](../Images/a13c58002b8aa926bb1523fb69a92b49.png),'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/7fcc79d6366a66190749ac2a4b5ab999.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: it is safe to assume that the overall area is a good approximation. In other
    words, the algorithm determines whether f changes so much that it affects the
    error margin. If so, it continues with the divide-and-conquer approach; otherwise
    it stops and uses the Kepler approximation.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 461\. Design integrate-adaptive. That is, turn the recursive process
    description into an ISL+ algorithm. Make sure to adapt the test cases from [figureÂ 165](#%28counter._%28figure._fig~3aintegrate-test%29%29)
    to this use.
  prefs: []
  type: TYPE_NORMAL
- en: Do not discuss the termination of integrate-adaptive.
  prefs: []
  type: TYPE_NORMAL
- en: Does integrate-adaptive always compute a better answer than either integrate-kepler
    or integrate-rectangles from [exerciseÂ 459](#%28counter._%28exercise._ex~3aintegral-rectangle%29%29)?
    Which aspect is integrate-adaptive guaranteed to improve?
  prefs: []
  type: TYPE_NORMAL
- en: Terminology The algorithm is called adaptive integration because it automatically
    allocates time to those parts of the graph that need it and spends little time
    on the others. Specifically, for those parts of f that are level, it performs
    just a few calculations; for the other parts, it inspects small intervals to decrease
    the error margin. Computer science knows many adaptive algorithms, and integrate-adaptive
    is just one of them.
  prefs: []
  type: TYPE_NORMAL
- en: '28.3Project: Gaussian Elimination[ğŸ”—](#(part._sec~3aproj-gauss) "Link to here")'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Mathematicians not only search for solutions of equations in one variable;
    they also study whole systems of linear equations:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Sample Problem In a bartering world, the values of coal (x), oil (y), and gas
    (z) are determined by these exchange equations:'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![image](../Images/bb199275831170b5fcf2b8160676179a.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: A solution to such a system of equations consists of a collection of numbers,
    one per variable, such that if we replace the variable with its corresponding
    number, the two sides of each equation evaluate to the same number. In our running
    example, the solution is
  prefs: []
  type: TYPE_NORMAL
- en: x = 1, y = 1, and z = 2.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'We can easily check this claim:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/0e8a8f9ea488f612e2d9dff27b0cd951.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: The three equations reduce to
  prefs: []
  type: TYPE_NORMAL
- en: 10 = 10, 31 = 31, and 1 =1.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ;Â An SOE is a non-empty [Matrix](part_two.html#%28tech._matrix%29). |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â constraint for ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  r1
    [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  rn),
    (length  ri) is ([+](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29)  n  1)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents a system of linear equations |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An Equation is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)].
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â constraint an [Equation](#%28tech._equation%29) contains at least two numbers.
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation if ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  a1
    [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)  an
    b) is an [Equation](#%28tech._equation%29), |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â a1, ..., an are the left-hand-side variable coefficients |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â and b is the right-hand side |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Solution is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â MÂ ;Â an
    [SOE](#%28tech._soe%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â 2Â Â 3Â 10)Â ;Â an
    [Equation](#%28tech._equation%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â 5Â 12Â 31)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 4Â 1Â -2Â Â 1)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â SÂ ''(1Â 1Â 2))Â ;Â a
    [Solution](#%28tech._solution%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 167: A data representation for systems of equations'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 167](#%28counter._%28figure._fig~3amatrix%29%29) introduces a data
    representation for our problem domain. It includes an example of a system of equations
    and its solution. This representation captures the essence of a system of equations,
    namely, the numeric coefficients of the variables on the left-hand side and the
    right-hand-side values. The names of the variables donâ€™t play any role because
    they are like parameters of functions; meaning, as long as they are consistently
    renamed the equations have the same solutions.'
  prefs: []
  type: TYPE_NORMAL
- en: 'For the rest of this section, it is convenient to use these functions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Equation](#%28tech._equation%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Number](part_one.html#%28tech._number%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â extracts the left-hand side from a row in a matrix |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (lhsÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â M))Â ''(2Â 2Â 3))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (lhsÂ e)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â e))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Equation](#%28tech._equation%29) -> [Number](part_one.html#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â extracts the right-hand side from a row in a matrix |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (rhsÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â M))Â 10)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (rhsÂ e)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â ([reverse](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29)Â e)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'ExerciseÂ 462\. Design the function check-solution. It consumes an [SOE](#%28tech._soe%29)
    and a [Solution](#%28tech._solution%29). Its result is #true if plugging in the
    numbers from the [Solution](#%28tech._solution%29) for the variables in the [Equation](#%28tech._equation%29)s
    of the [SOE](#%28tech._soe%29) produces equal left-hand-side values and right-hand-side
    values; otherwise the function produces #false. Use check-solution to formulate
    tests with [check-satisfied](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29).'
  prefs: []
  type: TYPE_NORMAL
- en: Hint Design the function plug-in first. It consumes the left-hand side of an
    [Equation](#%28tech._equation%29) and a [Solution](#%28tech._solution%29) and
    calculates out the value of the left-hand side when the numbers from the solution
    are plugged in for the variables.
  prefs: []
  type: TYPE_NORMAL
- en: Gaussian elimination is a standard method for finding solutions to systems of
    linear equations. It consists of two steps. The first step is to transform the
    system of equations into a system of different shape but with the same solution.
    The second step is to find solutions to one equation at a time. Here we focus
    on the first step because it is another interesting instance of generative recursion.
  prefs: []
  type: TYPE_NORMAL
- en: 'The first step of the Gaussian elimination algorithm is called â€œtriangulationâ€
    because the result is a system of equations in the shape of a triangle. In contrast,
    the original system is a rectangle. To understand this terminology, take a look
    at this list, which represents the original system:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â 2Â Â 3Â 10)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â 5Â 12Â 31)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 4Â 1Â -2Â 1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Triangulation transforms this matrix into the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â 2Â Â 3Â 10)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â 3Â Â 9Â 21)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â Â Â Â 1Â Â 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: As promised, the shape of this system of equations is (roughly) a triangle.ExerciseÂ 463\.
    Check that the following system of equations
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/a561dcc0f110c4c0c9a4ba15d977dc8a.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'has the same solution as the one labeled with (![image](../Images/0b76de6a3894b6b766bc6df0bf7746a7.png)).
    Do so by hand and with check-solution from [exerciseÂ 462](#%28counter._%28exercise._ex~3agauss-data%29%29).The
    key idea of triangulation is to subtract the first [Equation](#%28tech._equation%29)
    from the remaining ones. To subtract one [Equation](#%28tech._equation%29) from
    another means to subtract the corresponding coefficients in the two [Equation](#%28tech._equation%29)s.
    With our running example, subtracting the first equation from the second yields
    the following matrix:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â 2Â Â 3Â 10)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0Â 3Â Â 9Â 21)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 4Â 1Â -2Â Â 1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The goal of these subtractions is to put a 0 into the first column of all but
    the first equation. For the third equation, getting a 0 into the first position
    means subtracting the first equation twice from the third one:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â Â 2Â Â 3Â Â 10)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0Â Â 3Â Â 9Â Â 21)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0Â -3Â -8Â -19))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Following convention, we drop the leading 0â€™s from the last two equations:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â Â 2Â Â 3Â Â Â 10)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â Â 3Â Â 9Â Â Â 21)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â -3Â -8Â Â -19))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: That is, we first multiply each item in the first row with 2 and then subtract
    the result from the last row.Mathematics teaches how to prove such facts. We use
    them. As mentioned, these subtractions do not change the solution; that is, the
    solution of the original system is also the solution of the transformed one.ExerciseÂ 464\.
    Check that the following system of equations
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/cc05fe8a6b523170ea3f94d0e477418c.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: has the same solution as the one labeled with (![image](../Images/e4439750f1cc7c4f63b30b1ceb5be292.png)).
    Again do so by hand and with check-solution from [exerciseÂ 462](#%28counter._%28exercise._ex~3agauss-data%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 465\. Design subtract. The function consumes two [Equation](#%28tech._equation%29)s
    of equal length. It â€œsubtractsâ€ a multiple of the second equation from the first,
    item by item, so that the resulting [Equation](#%28tech._equation%29) has a 0
    in the first position. Since the leading coefficient is known to be 0, subtract
    returns the rest of the list that results from the subtractions.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now consider the rest of the [SOE](#%28tech._soe%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â 3Â Â 9Â Â Â 21)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â -3Â -8Â Â -19))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: It is also an [SOE](#%28tech._soe%29), so we can apply the same algorithm again.
    For our running example, this next subtraction step calls for subtracting the
    first [Equation](#%28tech._equation%29) -1 times from the second one. Doing so
    yields
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 3Â Â 9Â 21)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â Â 1Â Â 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The rest of this SOE is a single equation and cannot be simplified.ExerciseÂ 466\.
    Here is a representation for triangular SOEs:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A TM is an [[NEList-of](part_three.html#%28tech._sim-dd._nelist._of%29)  [Equation](#%28tech._equation%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â such that the [Equation](#%28tech._equation%29)s are of decreasing length:
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â n + 1, n, n - 1, ..., 2. |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents a triangular matrix |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Design the triangulate algorithm:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [SOE](#%28tech._soe%29) -> [TM](#%28tech._tm%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â triangulates the given system of equations |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (triangulateÂ M)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ''(1Â 2)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Turn the above example into a test and spell out explicit answers for the four
    questions based on our loose description.
  prefs: []
  type: TYPE_NORMAL
- en: Do not yet deal with the termination step of the design recipe.
  prefs: []
  type: TYPE_NORMAL
- en: 'Unfortunately, the solution to [exerciseÂ 466](#%28counter._%28exercise._ex~3atriangulate1%29%29)
    occasionally fails to produce the desired triangular system. Consider the following
    representation of a system of equations:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â Â 3Â Â 3Â 8)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â Â 3Â -2Â 3)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 4Â -2Â Â 2Â 4))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Its solution is x = 1, y = 1, and z = 1.The first step is to subtract the first
    row from the second and to subtract it twice from the last one, which yields the
    following matrix:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â 2Â Â 3Â Â 3Â Â Â 8)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â Â Â 0Â -5Â Â -5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â Â -8Â -4Â -12))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Next, triangulation would focus on the rest of the matrix:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â 0Â -5Â Â -5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â -8Â -4Â -12))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'but the first item of this matrix is 0. Since it is impossible to divide by
    0, the algorithm signals an error via subtract.To overcome this problem, we need
    to use another piece of knowledge from our problem domain. Mathematics tells us
    that switching equations in a system of equations does not affect the solution.
    Of course, as we switch equations, we must eventually find an equation whose leading
    coefficient is not 0. Here we can simply swap the first two:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â -8Â -4Â -12)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â 0Â -5Â Â -5))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'From here we may continue as before, subtracting the first equation from the
    remaining one 0 times. The final triangular matrix is:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 2Â Â 3Â Â 3Â Â Â 8)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â -8Â -4Â -12)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â Â Â Â Â -5Â Â -5))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Stop! Show that x = 1, y = 1, and z = 1 is still a solution for these equations.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 467\. Revise the algorithm triangulate from [exerciseÂ 466](#%28counter._%28exercise._ex~3atriangulate1%29%29)
    so that it rotates the equations first to find one with a leading coefficient
    that is not 0 before it subtracts the first equation from the remaining ones.
  prefs: []
  type: TYPE_NORMAL
- en: Does this algorithm terminate for all possible systems of equations?
  prefs: []
  type: TYPE_NORMAL
- en: 'Hint The following expression rotates a non-empty list L:'
  prefs: []
  type: TYPE_NORMAL
- en: ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â L)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â L)))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Explain why.Some [SOE](#%28tech._soe%29)s donâ€™t have a solution. Consider this
    one:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/552f7e7428765d3d32b9e430fb80ff59.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'If you try to triangulate this SOEâ€”<wbr>by hand or with your solution from
    [exerciseÂ 467](#%28counter._%28exercise._ex~3atriangulate2%29%29)â€”<wbr>you arrive
    at an intermediate matrix all of whose equations start with 0:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/b1f4118077222e5fad78ea744b267947.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: ExerciseÂ 468\. Modify triangulate from [exerciseÂ 467](#%28counter._%28exercise._ex~3atriangulate2%29%29)
    so that it signals an error if it encounters an [SOE](#%28tech._soe%29) whose
    leading coefficients are all 0.
  prefs: []
  type: TYPE_NORMAL
- en: 'After we obtain a triangular system of equations such as (*) in [exerciseÂ 463](#%28counter._%28exercise._ex~3agauss-equiv2%29%29),
    we can solve the equations, one at a time. In our specific example, the last equation
    says that z is 2. Equipped with this knowledge, we can eliminate z from the second
    equation through a substitution:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/903a2558767ba621aa12391d511a1b79.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'Doing so, in turn, determines the value for y:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/173c90ddd1870a4c8292816430bc50b6.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'Now that we have z = 2 and y = 1, we can plug these values into the first equation:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/d6037c5163e3fe364d6aed655eb5406d.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'This yields another equation in a single variable, which we solve like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/9b61f7f4ff010b73c5fad3b0e6950e59.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: This finally yields a value for x and thus the complete solution for the entire
    [SOE](#%28tech._soe%29).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 469\. Design the solve function. It consumes triangular [SOE](#%28tech._soe%29)s
    and produces a solution.
  prefs: []
  type: TYPE_NORMAL
- en: Hint Use structural recursion for the design. Start with the design of a function
    that solves a single linear equation in n+1 variables, given a solution for the
    last n variables. In general, this function plugs in the values for the rest of
    the left-hand side, subtracts the result from the right-hand side, and divides
    by the first coefficient. Experiment with this suggestion and the above examples.
  prefs: []
  type: TYPE_NORMAL
- en: Challenge Use an existing abstraction and [lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)
    to design solve.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 470\. Define gauss, which combines the triangulate function from [exerciseÂ 468](#%28counter._%28exercise._ex~3atriangulate3%29%29)
    and the solve function from [exerciseÂ 469](#%28counter._%28exercise._ex~3agauss-solve%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: 29Algorithms that Backtrack[ğŸ”—](#(part._ch~3abacktrack) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Problem solving doesnâ€™t always progress along some straight line. Sometimes
    we may follow one approach and discover that we are stuck because we took a wrong
    turn. One obvious option is to backtrack to the place where we made the fateful
    decision and to take a different turn. Some algorithms work just like that. This
    chapter presents two instances. The first section deals with an algorithm for
    traversing graphs. The second one is an extended exercise that uses backtracking
    in the context of a chess puzzle.
  prefs: []
  type: TYPE_NORMAL
- en: 29.1Traversing Graphs[ğŸ”—](#(part._fsm._sec~3atraverse-graph1) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Graphs are ubiquitous in our world and the world of computing. Imagine a group
    of people, say, the students in your school. Write down all the names, and connect
    the names of those people who know each other. You have just created your first
    undirected graph.
  prefs: []
  type: TYPE_NORMAL
- en: Now take a look at [figureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29),
    which displays a small directed graph. It consists of seven nodesâ€”<wbr>the circled
    lettersâ€”<wbr>and nine edgesâ€”<wbr>the arrows. The graph may represent a small version
    of an email network. Imagine a company and all the emails that go back and forth.
    Write down the email addresses of all employees. Then, address by address, draw
    an arrow from the address to all those addresses to whom the owner sends emails
    during a week. This is how you would create the directed graph in [figureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29),
    though it might end up looking much more complex, almost impenetrable.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/ee7c403a9d51874449adfeaaa41a8a72.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 168: A directed graph'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In general, a graph consists of a collection of nodes and a collection of edges,
    which connect nodes. In a directed graph, the edges represent one-way connections
    between the nodes; in an undirected graph, the edges represent two-way connections
    between the nodes. In this context, the following is a common type of problem:Social
    scientists use such algorithms to figure out the power structure in a company.
    Similarly they use such graphs to predict the probable activities of people, even
    without knowledge of the content of their emails.
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design an algorithm that proposes a way to introduce one person
    to another in a directed email graph for a large company. The program consumes
    a directed graph representing established email connections and two email addresses.
    It returns a sequence of email addresses that connect the first email with the
    second.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Mathematical scientists call the desired sequence a path.[FigureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29)
    makes the sample problem concrete. For example, you may wish to test whether the
    program can find a path from C to D. This particular path consists of the origination
    node C and the destination node D. In contrast, if you wish to connect E with
    D, there are two paths:'
  prefs: []
  type: TYPE_NORMAL
- en: send email from E to F and then to D.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: send it from E to C and then to D.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Sometimes it is impossible to connect two nodes with a path. In the graph of
    [figureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29), you cannot move
    from C to G by following the arrows.
  prefs: []
  type: TYPE_NORMAL
- en: Looking at [figureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29) you
    can easily figure out how to get from one node to another without thinking much
    about how you did it. So imagine for a moment that the graph in [figureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29)
    is a large park. Also imagine someone says you are located at E and you need to
    get to G. You can clearly see two paths, one leading to C and another one leading
    to F. Follow the first one and make sure to remember that it is also possible
    to get from E to F. Now you have a new problem, namely, how to get from C to G.
    The key insight is that this new problem is just like the original problem; it
    asks you to find a path from one node to another. Furthermore, if you can solve
    the problem, you know how to get from E to Gâ€”<wbr>just add the step from E to
    C. But there is no path from C to G. Fortunately, you remember that it is also
    possible to go from E to F, meaning you can backtrack to some point where you
    have a choice to make and restart the search from there.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now letâ€™s design this algorithm in a systematic manner. Following the general
    design recipe, we start with a data analysis. Here are two compact list-based
    representations of the graph in [figureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â sample-graph
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ''((AÂ (BÂ E)) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (BÂ (EÂ F)) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (CÂ (D)) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (DÂ ()) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (EÂ (CÂ F)) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (FÂ (DÂ G)) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (GÂ ()))) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â sample-graph
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ''((AÂ BÂ E) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (BÂ EÂ F) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (CÂ D) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (D) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (EÂ CÂ F) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (FÂ DÂ G) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (G))) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Both contain one list per node. Each of these lists starts with the name of
    a node followed by its (immediate) neighbors, that is, nodes reachable by following
    a single arrow. The two differ in how they connect the (name of the) node and
    its neighbors: the left one uses [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    while the right one uses [cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29).
    For example, the second list represents node B with its two outgoing edges to
    E and F in [figureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29). On the
    left ''B is the first name on a two-element list; on the right it is the first
    name on a three-element list.'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 471\. Translate one of the above definitions into proper list form
    using [list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)
    and proper symbols.
  prefs: []
  type: TYPE_NORMAL
- en: 'The data representation for nodes is straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: ;Â A Node is a [Symbol](i2-3.html#%28tech._symbol%29).
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Formulate a data definition to describe the class of all Graph representations,
    allowing an arbitrary number of nodes and edges. Only one of the above representations
    has to belong to [Graph](#%28tech._fsm._graph%29).
  prefs: []
  type: TYPE_NORMAL
- en: Design the function neighbors. It consumes a [Node](#%28tech._fsm._node%29)
    n and a [Graph](#%28tech._fsm._graph%29) g and produces the list of immediate
    neighbors of n in g.
  prefs: []
  type: TYPE_NORMAL
- en: 'Using your data definitions for [Node](#%28tech._fsm._node%29) and [Graph](#%28tech._fsm._graph%29)â€”<wbr>regardless
    of which one you chose, as long as you also designed neighborsâ€”<wbr>we can now
    formulate a signature and a purpose statement for find-path, the function that
    searches a path in a graph:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Node](#%28tech._fsm._node%29)  [Node](#%28tech._fsm._node%29)  [Graph](#%28tech._fsm._graph%29)
    -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Node](#%28tech._fsm._node%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds a path from origination to destination in G |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-pathÂ originationÂ destinationÂ G)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'What this header leaves open is the exact shape of the result. It implies that
    the result is a list of nodes, but it does not say which nodes it contains.To
    appreciate this ambiguity and why it matters, letâ€™s study the examples from above.
    In ISL+, we can now formulate them like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (find-pathÂ ''CÂ ''DÂ sample-graph) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (find-pathÂ ''EÂ ''DÂ sample-graph) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (find-pathÂ ''CÂ ''GÂ sample-graph) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The first call to find-path must return a unique path, the second one must
    choose one from two, and the third one must signal that there is no path from
    ''C to ''G in sample-graph. Here are two possibilities, then, on how to construct
    the return value:'
  prefs: []
  type: TYPE_NORMAL
- en: The result of the function consists of all nodes leading from the origination
    node to the destination node, including those two.It is easy to imagine others,
    such as skipping either of the two given nodes. In this case, an empty path could
    be used to express the lack of a path between two nodes.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Alternatively, since the call itself already lists two of the nodes, the output
    could mention only the â€œinteriorâ€ nodes of the path. Then the answer for the first
    call would be '() because 'D is an immediate neighbor of 'C. Of course, '() could
    then no longer signal failure.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Concerning the lack-of-a-path issue, we must choose a distinct value for signaling
    this notion. Because #false is distinct, is meaningful, and works in either case,
    we opt for it. As for the multiple-paths issue, we postpone making a choice for
    now and list both possibilities in the example section:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Path is a [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Node](#%28tech._fsm._node%29)].
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation The list of nodes specifies a sequence |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â of immediate neighbors that leads from the first |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Node](#%28tech._fsm._node%29) on the list to the last one. |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Node](#%28tech._fsm._node%29)  [Node](#%28tech._fsm._node%29)  [Graph](#%28tech._fsm._graph%29)
    -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)  [Path](#%28tech._fsm._path%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds a path from origination to destination in G |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if there is no path, the function produces #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (find-pathÂ ''CÂ ''DÂ sample-graph)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''(CÂ D)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-member-of](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-member-of%29%29)Â (find-pathÂ ''EÂ ''DÂ sample-graph)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ''(EÂ FÂ D)Â ''(EÂ CÂ D)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29)Â (find-pathÂ ''CÂ ''GÂ sample-graph)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â #false) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-pathÂ originationÂ destinationÂ G)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â #false) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Our next design step is to understand the four essential pieces of the function:
    the â€œtrivial problemâ€ condition, a matching solution, the generation of a new
    problem, and the combination step. The above discussion of the search process
    and the analysis of the three examples suggest answers:'
  prefs: []
  type: TYPE_NORMAL
- en: If the two given nodes are directly connected with an arrow in the given graph,
    the path consists of just these two nodes. But there is an even simpler case,
    namely, when the origination argument of find-path is equal to its destination.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In that second case, the problem is truly trivial and the matching answer is
    ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)  destination).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If the arguments are different, the algorithm must inspect all immediate neighbors
    of origination and determine whether there is a path from any one of those to
    destination. In other words, picking one of those neighbors generates a new instance
    of the â€œfind a pathâ€ problem.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, once the algorithm has a path from a neighbor of origination to destination,
    it is easy to construct a complete path from the former to the latterâ€”<wbr>just
    add the origination node to the list.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'From a programming perspective, the third point is critical. Since a node can
    have an arbitrary number of neighbors, the â€œinspect all neighborsâ€ task is too
    complex for a single primitive. We need an auxiliary function that consumes a
    list of nodes and generates a new path problem for each of them. Put differently,
    the function is a list-oriented version of find-path.Letâ€™s call this auxiliary
    function find-path/list and letâ€™s formulate a wish for it:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Node](#%28tech._fsm._node%29)]
    [Node](#%28tech._fsm._node%29)  [Graph](#%28tech._fsm._graph%29) -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)  [Path](#%28tech._fsm._path%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds a path from some node on lo-originations to |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â destination; otherwise, it produces #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-path/listÂ lo-originationsÂ destinationÂ G)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â #false) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Using this wish, we can fill in the generic template for generative-recursive
    functions to get a first draft of find-path:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-pathÂ originationÂ destinationÂ G)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â originationÂ destination)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â destination)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)Â originationÂ [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)(find-path/listÂ (neighborsÂ originationÂ G)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â destinationÂ G)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'It uses the neighbors from [exerciseÂ 471](#%28counter._fsm._%28exercise._ex~3arepresent-graph%29%29)
    and the wish-list function find-path/list and otherwise uses the answers to the
    four questions about generative recursive functions.The rest of the design process
    is about details of composing these functions properly. Consider the signature
    of find-path/list. Like find-path, it produces [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)
    [Path](#%28tech._fsm._path%29)]. That is, if it finds a path from any of the neighbors,
    it produces this path; otherwise, if none of the neighbors is connected to destination,
    the function produces #false. Hence the answer of find-path depends on the kind
    of result that find-path/list produces, meaning the code must distinguish the
    two possible answers with a [cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-pathÂ originationÂ destinationÂ G)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â originationÂ destination)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â destination)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â nextÂ (neighborsÂ originationÂ G))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â candidate
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (find-path/listÂ nextÂ destinationÂ G))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â [([boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)Â candidate)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â [([cons?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29)Â candidate)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)]))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The two cases reflect the two kinds of answers we might receive: a [Boolean](part_one.html#%28tech._boolean%29)
    or a list. In the first case, find-path/list cannot find a path from any neighbor
    to destination, meaning find-path itself cannot construct such a path either.
    In the second case, the auxiliary function found a path, but find-path must still
    add origination to the front of this path because candidate starts with one of
    originationâ€™s neighbors, not origination itself as agreed upon above.'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Node](#%28tech._fsm._node%29)  [Node](#%28tech._fsm._node%29)  [Graph](#%28tech._fsm._graph%29)
    -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)  [Path](#%28tech._fsm._path%29)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds a path from origination to destination in G |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if there is no path, the function produces #false |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-pathÂ originationÂ destinationÂ G)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([symbol=?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29)Â originationÂ destination)Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â destination)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â nextÂ (neighborsÂ originationÂ G))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â candidate
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (find-path/listÂ nextÂ destinationÂ G))) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)Â candidate)Â #false]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â originationÂ candidate)]))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [Node](#%28tech._fsm._node%29)]
    [Node](#%28tech._fsm._node%29)  [Graph](#%28tech._fsm._graph%29) -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)  [Path](#%28tech._fsm._path%29)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds a path from some node on lo-Os to D |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if there is no path, the function produces #false |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-path/listÂ lo-OsÂ DÂ G)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â lo-Os)Â #false]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â candidate
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (find-pathÂ ([first](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29)Â lo-Os)Â DÂ G)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [([boolean?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29)Â candidate)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (find-path/listÂ ([rest](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29)Â lo-Os)Â DÂ G)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)Â candidate]))]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 169: Finding a path in a graph'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 169](#%28counter._fsm._%28figure._fig~3afind-path-code%29%29) contains
    the complete definition of find-path. It also contains a definition of find-path/list,
    which processes its first argument via structural recursion. For each node in
    the list, find-path/list uses find-path to check for a path. If find-path indeed
    produces a path, that path is its answer. Otherwise, find-path/list backtracks.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Note [Trees](part_four.html#%28part._sec~3abtrees%29) discusses backtracking
    in the structural world. A particularly good example is the function that searches
    blue-eyed ancestors in a family tree. When the function encounters a node, it
    first searches one branch of the family tree, say the fatherâ€™s, and if this search
    produces #false, it searches the other half. Since graphs generalize trees, comparing
    this function with find-path is an instructive exercise. End'
  prefs: []
  type: TYPE_NORMAL
- en: Lastly, we need to check whether find-path produces an answer for all possible
    inputs. It is relatively easy to check that, when given the graph in [figureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29)
    and any two nodes in this graph, find-path always produces some answer. Stop!
    Solve the next exercise before you read on.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 472\. Develop a test for find-path on the inputs 'A, 'G, and sample-graph.
  prefs: []
  type: TYPE_NORMAL
- en: Take a look at [figureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29).
    Which path will the function find? Why?
  prefs: []
  type: TYPE_NORMAL
- en: Design test-on-all-nodes, a function that consumes a graph g and determines
    whether there is a path between every pair of nodes.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/d2aa8714394a67061198c78840960071.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 170: A directed graph with cycle'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: For other graphs, however, find-path may not terminate for certain pairs of
    nodes. Consider the graph in [figureÂ 170](#%28counter._fsm._%28figure._fig~3acyclic-graph%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: Stop! Define cyclic-graph to represent the graph in this figure.
  prefs: []
  type: TYPE_NORMAL
- en: 'Compared to [figureÂ 168](#%28counter._fsm._%28figure._fig~3agraph%29%29), this
    new graph contains only one extra edge, from C to B. This seemingly small addition,
    though, allows us to start a search in a node and to return to the same node.
    Specifically, it is possible to move from B to E to C and back to B. Indeed, when
    find-path is applied to ''B, ''D, and this graph, it fails to stop, as a hand-evaluation
    confirms:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (find-pathÂ ''BÂ ''DÂ cyclic-graph) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)Â (find-pathÂ ''BÂ ''DÂ cyclic-graph)Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)Â (find-path/listÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ''EÂ ''F)Â ''DÂ cyclic-graph)Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)Â (find-pathÂ ''EÂ ''DÂ cyclic-graph)Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)Â (find-path/listÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ''CÂ ''F)Â ''DÂ cyclic-graph)Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)Â (find-pathÂ ''CÂ ''DÂ cyclic-graph)Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)Â (find-path/listÂ ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â ''BÂ ''D)Â ''DÂ cyclic-graph)Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)Â (find-pathÂ ''BÂ ''DÂ cyclic-graph)Â [..](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The hand-evaluation shows that after seven applications of find-path and find-path/list,
    ISL+ must evaluate the exact same expression that it started with.You know only
    one exception to this rule: [random](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._random%29%29).
    Since the same input triggers the same evaluation for any function, find-path
    does not terminate for these inputs.'
  prefs: []
  type: TYPE_NORMAL
- en: In summary, the termination argument goes like this. If some given graph is
    free of cycles, find-path produces some output for any given inputs. After all,
    every path can only contain a finite number of nodes, and the number of paths
    is finite, too. The function therefore either exhaustively inspects all solutions
    starting from some given node or finds a path from the origination to the destination
    node. If, however, a graph contains a cycle, that is, a path from some node back
    to itself, find-path may not produce a result for some inputs.
  prefs: []
  type: TYPE_NORMAL
- en: The next part presents a program design technique that addresses just this kind
    of problem. In particular, it presents a variant of find-path that can deal with
    cycles in a graph.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 473\. Test find-path on 'B, 'C, and the graph in [figureÂ 170](#%28counter._fsm._%28figure._fig~3acyclic-graph%29%29).
    Also use test-on-all-nodes from [exerciseÂ 472](#%28counter._fsm._%28exercise._ex~3afind-path2%29%29)
    on this graph.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 474\. Redesign the find-path program as a single function.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 475\. Redesign find-path/list so that it uses an existing list abstraction
    from [figuresÂ 95](part_three.html#%28counter._%28figure._fig~3aisl-ho-list%29%29)
    and [96](part_three.html#%28counter._%28figure._fig~3aisl-ho-list2%29%29) instead
    of explicit structural recursion. Hint Read the documentation for Racketâ€™s [ormap](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Fmap..rkt%29._ormap%29%29).
    How does it differ from ISL+â€™s [ormap](http://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._ormap%29%29)
    function? Would the former be helpful here?
  prefs: []
  type: TYPE_NORMAL
- en: Note on Data Abstraction You may have noticed that the find-path function does
    not need to know how [Graph](#%28tech._fsm._graph%29) is defined. As long as you
    provide a correct neighbors function for [Graph](#%28tech._fsm._graph%29), find-path
    works perfectly fine. In short, the find-path program uses data abstraction.
  prefs: []
  type: TYPE_NORMAL
- en: 'As [Abstraction](part_three.html) says, data abstraction works just like function
    abstraction. Here you could create a function abstract-find-path, which would
    consume one more parameter than find-path: neighbors. As long as you always handed
    abstract-find-path a graph G from [Graph](#%28tech._fsm._graph%29) and the matching
    neighbors function, it would process the graph properly. While the extra parameter
    suggests abstraction in the conventional sense, the required relationship between
    two of the parametersâ€”<wbr>G and neighborsâ€”<wbr>really means that abstract-find-path
    is also abstracted over the definition of [Graph](#%28tech._fsm._graph%29). Since
    the latter is a data definition, the idea is dubbed data abstraction.'
  prefs: []
  type: TYPE_NORMAL
- en: When programs grow large, data abstraction becomes a critical tool for the construction
    of a programâ€™s components. The next volume in the How to Design series addresses
    this idea in depth; the next section illustrates the idea with another example.
    End
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 476\. [Finite State Machines](part_two.html#%28part._sec~3asec-fsm-list%29)
    poses a problem concerning finite state machines and strings but immediately defers
    to this chapter because the solution calls for generative recursion. You have
    now acquired the design knowledge needed to tackle the problem.
  prefs: []
  type: TYPE_NORMAL
- en: 'Design the function fsm-match. It consumes the data representation of a finite
    state machine and a string. It produces #true if the sequence of characters in
    the string causes the finite state machine to transition from an initial state
    to a final state.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Since this problem is about the design of generative recursive functions, we
    provide the essential data definition and a data example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â transitionÂ [currentÂ keyÂ next])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29)Â fsmÂ [initialÂ transitionsÂ final])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An FSM is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-fsm  [FSM-State](#%28tech._fsm._fsm._state%29)  [List-of  [1Transition](#%28tech._fsm._1transition%29)]  [FSM-State](#%28tech._fsm._fsm._state%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A 1Transition is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-transition  [FSM-State](#%28tech._fsm._fsm._state%29)  [1String](part_one.html#%28tech._1string%29)  [FSM-State](#%28tech._fsm._fsm._state%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An FSM-State is [String](part_one.html#%28tech._string%29). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â data example: see [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â fsm-a-bc*-d
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-fsm |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â "AA" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â (make-transitionÂ "AA"Â "a"Â "BC")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â (make-transitionÂ "BC"Â "b"Â "BC") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â (make-transitionÂ "BC"Â "c"Â "BC") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â (make-transitionÂ "BC"Â "d"Â "DD")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â "DD")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The data example corresponds to the regular expression a (b|c)* d. As mentioned
    in [exerciseÂ 109](part_one.html#%28counter._%28exercise._ex~3afsm%29%29), "acbd",
    "ad", and "abcd" are examples of acceptable strings; "da", "aa", or "d" do not
    match.In this context, you are designing the following function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [FSM](#%28tech._fsm._fsm%29)  [String](part_one.html#%28tech._string%29)
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â does an-fsm recognize the given string |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (fsm-match?Â an-fsmÂ a-string)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â #false) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Hint Design the necessary auxiliary function locally to the fsm-match? function.
    In this context, represent the problem as a pair of parameters: the current state
    of the finite state machine and the remaining list of [1String](part_one.html#%28tech._1string%29)s.'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X] -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29) X]] |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates a list of all rearrangements of the items in w |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (arrangementsÂ w)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([empty?](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29)Â w)Â ''(())]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (itemÂ others)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([local](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29)Â (([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â without-item
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (arrangementsÂ ([remove](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remove%29%29)Â itemÂ w)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â add-item-to-front
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)Â ([lambda](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29)Â (a)Â ([cons](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29)Â itemÂ a))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â without-item))) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([append](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29)Â add-item-to-frontÂ others)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ''() |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â w)])) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29) [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [1String](part_one.html#%28tech._1string%29)]]
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â are the words "rat", "art", and "tar" members of the given list? |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (all-words-from-rat?Â w)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([and](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29)Â ([member](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member%29%29)Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "rat")Â w)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([member](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member%29%29)Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "art")Â w)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([member](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member%29%29)Â ([explode](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29)Â "tar")Â w)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-satisfied](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29)Â (arrangementsÂ ''("r"Â "a"Â "t"))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â all-words-from-rat?) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 171: A definition of arrangements using generative recursion'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 477\. Inspect the function definition of arrangements in [figureÂ 171](#%28counter._fsm._%28figure._fig~3apermutation-gen%29%29).
    The figure displays a generative-recursive solution of the extended design problem
    covered by [Word Games, the Heart of the Problem](part_two.html#%28part._sec~3apermute%29),
    namelyWe thank Mark Engelberg for suggesting this exercise.
  prefs: []
  type: TYPE_NORMAL
- en: given a word, create all possible rearrangements of the letters.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The extended exercise is a direct guide to the structurally recursive design
    of the main function and two auxiliaries, where the design of the latter requires
    the creation of two more helper functions. In contrast, [figureÂ 171](#%28counter._fsm._%28figure._fig~3apermutation-gen%29%29)
    uses the power of generative recursionâ€”<wbr>plus [foldr](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29)
    and [map](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29)â€”<wbr>to
    define the same program as a single function definition.
  prefs: []
  type: TYPE_NORMAL
- en: Explain the design of the generative-recursive version of arrangements. Answer
    all questions that the design recipe for generative recursion poses, including
    the question of termination.
  prefs: []
  type: TYPE_NORMAL
- en: Does arrangements in [figureÂ 171](#%28counter._fsm._%28figure._fig~3apermutation-gen%29%29)
    create the same lists as the solution of [Word Games, the Heart of the Problem](part_two.html#%28part._sec~3apermute%29)?
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/7fc3ecbf300591a72d49fc1880acaa6a.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 172: A chess board with a single queen and the positions it threatens'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '29.2Project: Backtracking[ğŸ”—](#(part._sec~3aproj-backtrack) "Link to here")'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The n queens puzzle is a famous problem from the world of chess that also illustrates
    the applicability of backtracking in a natural way. For our purposes, a chess
    board is a grid of n by n squares. The queen is a game piece that can move in
    a horizontal, vertical,We thank Mark Engelberg for his reformulation of this section.
    or diagonal direction arbitrarily far without â€œjumpingâ€ over another piece. We
    say that a queen threatens a square if it is on the square or can move to it.
    [FigureÂ 172](#%28counter._fsm._%28figure._fig~3aqueens%29%29) illustrates the
    notion in a graphical manner. The queen is in the second column and sixth row.
    The solid lines radiating out from the queen go through all those squares that
    are threatened by the queen.
  prefs: []
  type: TYPE_NORMAL
- en: The classical queens problem is to place 8 queens on an 8 by 8 chess board such
    that the queens on the board donâ€™t threaten each other. Computer scientists generalize
    the problem and ask whether it is possible to place n queens on a n by n, chess
    board such that the queens donâ€™t pose a threat to each other.
  prefs: []
  type: TYPE_NORMAL
- en: For n = 2, the complete puzzle obviously has no solution. A queen placed on
    any of the four squares threatens all remaining squares.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/d1974c8ddcef351f3ed95e558af9674e.png) Â Â Â Â Â Â Â Â Â Â  ![image](../Images/ab4bfb3cd48212cc8b8cbb3fa5f7694a.png)
    Â Â Â Â Â Â Â Â Â Â  ![image](../Images/e22cfd1d5ab3b25da26932317be9d403.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 173: Three queen configurations for a 3 by 3 chess board'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: There is also no solution for n = 3. [FigureÂ 173](#%28counter._%28figure._fig~3aqueens-non-solutions%29%29)
    presents all different placements of two queens, that is, solutions for k = 3
    and n = 2. In each case, the left queen occupies a square in the left column while
    a second queen is placed in one of two squares that the first one does not threaten.
    The placement of a second queen threatens all remaining, unoccupied squares, meaning
    it is impossible to place a third queen.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 478\. You can also place the first queen in all squares of the top-most
    row, the right-most column, and the bottom-most row. Explain why all of these
    solutions are just like the three scenarios depicted in [figureÂ 173](#%28counter._%28figure._fig~3aqueens-non-solutions%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: This leaves the central square. Is it possible to place even a second queen
    after you place one on the central square of a 3 by 3 board?
  prefs: []
  type: TYPE_NORMAL
- en: '| ![image](../Images/cd4c8385afa238d2a0efc46ef03c3585.png) |  | ![image](../Images/6fe558b1a4d1727a2ddfd51f67b9f545.png)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 174: Solutions for the n queens puzzle for 4 by 4 and 5 by 5 boards'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 174](#%28counter._%28figure._fig~3aqueens-solutions%29%29) displays
    two solutions for the n queens puzzle: the left one is for n = 4, the right one
    for n  = 5. The figure shows how in each case a solution has one queen in each
    row and column, which makes sense because a queen threatens the entire row and
    column that radiate out from its square.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that we have conducted a sufficiently detailed analysis, we can proceed
    to the solution phase. The analysis suggests several ideas:'
  prefs: []
  type: TYPE_NORMAL
- en: The problem is about placing one queen at a time. When we place a queen on a
    board, we can mark the corresponding rows, columns, and diagonals as unusable
    for other queens.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For another queen, we consider only nonthreatened spots.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Just in case this first choice of a spot leads to problems later, we remember
    what other squares are feasible for placing this queen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If we are supposed to place a queen on a board but no safe squares are left,
    we backtrack to a previous point in the process where we chose one square over
    another and try one of the remaining squares.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In short, this solution process is like the â€œfind a pathâ€ algorithm.Moving
    from the process description to a designed algorithm clearly calls for two data
    representations: one for the chess boards and one for positions on the board.
    Letâ€™s start with the latter:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â QUEENSÂ 8)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A QP is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)  [CI](#%28tech._ci%29)  [CI](#%28tech._ci%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A CI is an [N](part_two.html#%28tech._n%29) in [0,QUEENS). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)  r  c)
    denotes the square at |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â the r-th row and c-th column |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: After all, the chess board basically dictates the choice.
  prefs: []
  type: TYPE_NORMAL
- en: The definition for [CI](#%28tech._ci%29) could use [1,QUEENS] instead of [0,
    QUEENS), but the two definitions are basically equivalent and counting up from
    0 is what programmers do. Similarly, the so-called algebraic notation for chess
    positions uses the letters 'a through 'h for one of the boardâ€™s dimensions, meaning
    [QP](#%28tech._qp%29) could have used [CI](#%28tech._ci%29)s and such letters.
    Again, the two are roughly equivalent and with natural numbers it is easier in
    ISL+ to create many positions than with letters.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 479\. Design the threatening? function. It consumes two [QP](#%28tech._qp%29)s
    and determines whether queens placed on the two respective squares would threaten
    each other.
  prefs: []
  type: TYPE_NORMAL
- en: Domain Knowledge (1) Study [figureÂ 172](#%28counter._fsm._%28figure._fig~3aqueens%29%29).
    The queen in this figure threatens all squares on the horizontal, the vertical,
    and the diagonal lines. Conversely, a queen on any square on these lines threatens
    the queen.
  prefs: []
  type: TYPE_NORMAL
- en: (2) Translate your insights into mathematical conditions that relate the squaresâ€™
    coordinates to each other. For example, all squares on a horizontal have the same
    y-coordinate. Similarly, all squares on one diagonal have coordinates whose sums
    are the same. Which diagonal is that? For the other diagonal, the differences
    between the two coordinates remain the same. Which diagonal does this idea describe?
  prefs: []
  type: TYPE_NORMAL
- en: 'Hint Once you have figured out the domain knowledge, formulate a test suite
    that covers horizontals, verticals, and diagonals. Donâ€™t forget to include arguments
    for which threatening? must produce #false.'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 480\. Design render-queens. The function consumes a natural number
    n, a list of [QP](#%28tech._qp%29)s, and an [Image](part_one.html#%28tech._image%29).
    It produces an image of an n by n chess board with the given image placed according
    to the given [QP](#%28tech._qp%29)s.
  prefs: []
  type: TYPE_NORMAL
- en: You may wish to look for an image for a chess queen on-line or create a simplistic
    one with the available image functions.
  prefs: []
  type: TYPE_NORMAL
- en: 'As for a data representation for Boards, we postpone this step until we know
    how the algorithm implements the process. Doing so is another exercise in data
    abstraction. Indeed, a data definition for [Board](#%28tech._board%29) isnâ€™t even
    necessary to state the signature for the algorithm proper:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [N](part_two.html#%28tech._n%29) -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [QP](#%28tech._qp%29)]]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds a solution to the n queens problem |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â data example: [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [QP](#%28tech._qp%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â 4QUEEN-SOLUTION-2
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 0Â 2)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 1Â 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 2Â 3)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 3Â 1)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (n-queensÂ n)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â #false) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The complete puzzle is about finding a placement for n queens on an n by n chess
    board. So clearly, the algorithm consumes nothing else but a natural number, and
    it produces a representation for the n queen placementsâ€”<wbr>if a solution exists.
    The latter can be represented with a list of [QP](#%28tech._qp%29)s, which is
    why we choose
  prefs: []
  type: TYPE_NORMAL
- en: ';Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [QP](#%28tech._qp%29)]
    or #false'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'as the result. Naturally, #false represents the failure to find a solution.The
    next step is to develop examples and to formulate them as tests. We know that
    n-queens must fail when given 2 or 3. For 4, there are two solutions with real
    boards and four identical queens. [FigureÂ 174](#%28counter._%28figure._fig~3aqueens-solutions%29%29)
    shows one of them, on the left, and the other one is this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/9f9b4eb3a186b0af933cff95a7c8ccbf.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: In terms of data representations, however, there are many different ways to
    represent these two images. [FigureÂ 175](#%28counter._%28figure._fig~3asolutions-for-4%29%29)
    sketches some. Fill in the rest.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [N](part_two.html#%28tech._n%29) -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [QP](#%28tech._qp%29)]]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds a solution to the n queens problem |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â 0-1Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 0Â 1))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â 1-3Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 1Â 3))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â 2-0Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 2Â 0))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â 3-2Â ([make-posn](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29)Â 3Â 2))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-member-of](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-member-of%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â (n-queensÂ 4) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0-1Â 1-3Â 2-0Â 3-2)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0-1Â 1-3Â 3-2Â 2-0)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0-1Â 2-0Â 1-3Â 3-2)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0-1Â 2-0Â 3-2Â 1-3)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0-1Â 3-2Â 1-3Â 2-0)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 0-1Â 3-2Â 2-0Â 1-3)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([list](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29)Â 3-2Â 2-0Â 1-3Â 0-1))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (n-queensÂ n)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (place-queensÂ (board0Â n)Â n)) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 175: Solutions for the 4 queens puzzle'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 481\. The tests in [figureÂ 175](#%28counter._%28figure._fig~3asolutions-for-4%29%29)
    are awful. No real-world programmer ever spells out all these possible outcomes.
  prefs: []
  type: TYPE_NORMAL
- en: 'One solution is to use property testing again. Design the n-queens-solution?
    function, which consumes a natural number n and produces a predicate on queen
    placements that determines whether a given placement is a solution to an n queens
    puzzle:'
  prefs: []
  type: TYPE_NORMAL
- en: A solution for an n queens puzzle must have length n.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A [QP](#%28tech._qp%29) on such a list may not threaten any other, distinct
    [QP](#%28tech._qp%29).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Once you have tested this predicate, use it and [check-satisfied](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29)
    to formulate the tests for n-queens.An alternative solution is to understand the
    lists of [QP](#%28tech._qp%29)s as sets. If two lists contain the same [QP](#%28tech._qp%29)s
    in different order, they are equivalent as the figure suggests. Hence you could
    formulate the test for n-queens as
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [QP](#%28tech._qp%29)]
    -> [Boolean](part_one.html#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â is the result equal [as a set] to one of two lists |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (is-queens-result?Â x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([or](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29)Â (set=?Â 4QUEEN-SOLUTION-1Â x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â (set=?Â 4QUEEN-SOLUTION-2Â x))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Design the function set=?. It consumes two lists and determines whether they
    contain the same itemsâ€”<wbr>regardless of order.ExerciseÂ 482\. The key idea to
    is to design a function that places n queens on a chess board that may already
    contain some queens:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Board](#%28tech._board%29)  [N](part_two.html#%28tech._n%29) -> [[Maybe](part_three.html#%28tech._sim-dd._maybe%29)
    [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [QP](#%28tech._qp%29)]]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â places n queens on board; otherwise, returns #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (place-queensÂ a-boardÂ n)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â #false) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '[FigureÂ 175](#%28counter._%28figure._fig~3asolutions-for-4%29%29) already refers
    to this function in the definition of n-queens.Design the place-queens algorithm.
    Assume you have the following functions to deal with [Board](#%28tech._board%29)s:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [N](part_two.html#%28tech._n%29) -> [Board](#%28tech._board%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â creates the initial n by n board |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (board0Â n)Â [...](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Board](#%28tech._board%29)  [QP](#%28tech._qp%29) -> [Board](#%28tech._board%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â places a queen at qp on a-board |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (add-queenÂ a-boardÂ qp)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â a-board) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Board](#%28tech._board%29) -> [[List-of](part_three.html#%28tech._sim-dd._list._of%29)  [QP](#%28tech._qp%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â finds spots where it is still safe to place a queen |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29)Â (find-open-spotsÂ a-board)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ''()) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The first function is used in [figureÂ 175](#%28counter._%28figure._fig~3asolutions-for-4%29%29)
    to create the initial board representation for place-queens. You will need the
    other two to describe the generative steps for the algorithm.
  prefs: []
  type: TYPE_NORMAL
- en: You cannot confirm yet that your solution to the preceding exercise works because
    it relies on an extensive wish list. It calls for a data representation of [Board](#%28tech._board%29)s
    that supports the three functions on the wish list. This, then, is your remaining
    problem.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 483\. Develop a data definition for [Board](#%28tech._board%29) and
    design the three functions specified in [exerciseÂ 482](#%28counter._%28exercise._ex~3aqueens-solve%29%29).
    Consider the following ideas:'
  prefs: []
  type: TYPE_NORMAL
- en: a [Board](#%28tech._board%29) collects those positions where a queen can still
    be placed;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: a [Board](#%28tech._board%29) contains the list of positions where a queen has
    been placed;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'a [Board](#%28tech._board%29) is a grid of n by n squares, each possibly occupied
    by a queen. Use a structure with three fields to represent a square: one for x,
    one for y, and a third one saying whether the square is threatened.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use one of the above ideas to solve this exercise.
  prefs: []
  type: TYPE_NORMAL
- en: Challenge Use all three ideas to come up with three different data representations
    of [Board](#%28tech._board%29). Abstract your solution to [exerciseÂ 482](#%28counter._%28exercise._ex~3aqueens-solve%29%29)
    and confirm that it works with any of your data representations of [Board](#%28tech._board%29).
  prefs: []
  type: TYPE_NORMAL
- en: 30Summary[ğŸ”—](#(part._ch~3asummary5) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: This fifth part of the book introduces the idea of eureka! into program design.
    Unlike the structural design of the first four parts, eureka! design starts from
    an idea of how the program should solve a problem or process data that represents
    a problem. Designing here means coming up with a clever way to call a recursive
    function on a new kind of problem that is like the given one but simpler.
  prefs: []
  type: TYPE_NORMAL
- en: Keep in mind that while we have dubbed it generative recursion, most computer
    scientists refer to these functions as algorithms.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once you have completed this part of the book, you will understand the following
    about the design of generative recursion:'
  prefs: []
  type: TYPE_NORMAL
- en: The standard outline of the design recipe remains valid.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The major change concerns the coding step. It introduces four new questions
    on going from the completely generic template for generative recursion to a complete
    function. With two of these questions, you work out the â€œtrivialâ€ parts of the
    solution process; and with the other two you work out the generative solution
    step.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The minor change is about the termination behavior of generative recursive functions.
    Unlike structurally designed functions, algorithms may not terminate for some
    inputs. This problem might be due to inherent limitations in the idea or the translation
    of the idea into code. Regardless, the future reader of your program deserves
    a warning about potentially â€œbadâ€ inputs.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will encounter some simple or well-known algorithms in your real-world programming
    tasks, and you will be expected to cope. For truly clever algorithms, software
    companies employ highly paid specialists, domain experts, and mathematicians to
    work out the conceptual details before they ask programmers to turn the concepts
    into programs. You must also be prepared for this kind of task, and the best preparation
    is practice.
  prefs: []
  type: TYPE_NORMAL
