- en: IÂ Fixed-Size DataðŸ”—
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: åŽŸæ–‡ï¼š[https://htdp.org/2024-11-6/Book/part_one.html](https://htdp.org/2024-11-6/Book/part_one.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| Â Â Â Â [1Â Arithmetic](#%28part._ch~3abasic-arithmetic%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [1.1Â The Arithmetic of Numbers](#%28part._sec~3aarith-num%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [1.2Â The Arithmetic of Strings](#%28part._sec~3aarith-str%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [1.3Â Mixing It Up](#%28part._sec~3aarith-mix%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [1.4Â The Arithmetic of Images](#%28part._sec~3aarith-images%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [1.5Â The Arithmetic of Booleans](#%28part._sec~3aarith-bools%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [1.6Â Mixing It Up with Booleans](#%28part._sec~3aboolean-if%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [1.7Â Predicates: Know Thy Data](#%28part._sec~3apredicates%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [2Â Functions and Programs](#%28part._ch~3afuncs-progs%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [2.1Â Functions](#%28part._sec~3afuncs%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [2.2Â Computing](#%28part._sec~3acomputing%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [2.3Â Composing Functions](#%28part._sec~3acomposing%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [2.4Â Global Constants](#%28part._sec~3aglobal%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [2.5Â Programs](#%28part._sec~3aprogs%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [3Â How to Design Programs](#%28part._ch~3ahtdp%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [3.1Â Designing Functions](#%28part._sec~3adesign-func%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [3.2Â Finger Exercises: Functions](#%28part._sec~3afinger-design%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [3.3Â Domain Knowledge](#%28part._sec~3adomain%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [3.4Â From Functions to Programs](#%28part._sec~3adesign%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [3.5Â On Testing](#%28part._sec~3atesting%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [3.6Â Designing World Programs](#%28part._.D.K._sec~3adesign-world%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [3.7Â Virtual Pet Worlds](#%28part._sec~3azoo1%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [4Â Intervals, Enumerations, and Itemizations](#%28part._ch~3aintervals-enums%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [4.1Â Programming with Conditionals](#%28part._sec~3acond%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [4.2Â Computing Conditionally](#%28part._sec~3aworks%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [4.3Â Enumerations](#%28part._sec~3aenums%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [4.4Â Intervals](#%28part._sec~3aintervals%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [4.5Â Itemizations](#%28part._itemization._sec~3aitemization%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [4.6Â Designing with Itemizations](#%28part._sec~3adesign-itemization%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [4.7Â Finite State Worlds](#%28part._sec~3aworlds-more%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [5Â Adding Structure](#%28part._ch~3astructure%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.1Â From Positions to posn Structures](#%28part._sec~3aposn-structures%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.2Â Computing with posns](#%28part._sec~3aeval-posns%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.3Â Programming with posn](#%28part._sec~3aprogramming-posn%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.4Â Defining Structure Types](#%28part._sec~3astructures%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.5Â Computing with Structures](#%28part._sec~3aeval-structs%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.6Â Programming with Structures](#%28part._sec~3aprogstructs%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.7Â The Universe of Data](#%28part._data-uni._sec~3adata-uni%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.8Â Designing with Structures](#%28part._sec~3adesignstructs%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.9Â Structure in the World](#%28part._sec~3aworld-structs%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.10Â A Graphical Editor](#%28part._sec~3aedit1%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [5.11Â More Virtual Pets](#%28part._sec~3azoo2%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [6Â Itemizations and Structures](#%28part._ch~3amix%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [6.1Â Designing with Itemizations, Again](#%28part._mix._sec~3aitemization-design2%29)
    |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [6.2Â Mixing Up Worlds](#%28part._sec~3aworlds-mix%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [6.3Â Input Errors](#%28part._sec~3ainput-errors%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [6.4Â Checking the World](#%28part._sec~3aworld-checking%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [6.5Â Equality Predicates](#%28part._sec~3aequality1%29) |'
  prefs: []
  type: TYPE_TB
- en: '| Â Â Â Â [7Â Summary](#%28part._ch~3asummary1%29) |'
  prefs: []
  type: TYPE_TB
- en: Every programming language comes with a language of data and a language of operations
    on data. The first language always provides some forms of atomic data; to represent
    the variety of information in the real world as data, a programmer must learn
    to compose basic data and to describe such compositions. Similarly, the second
    language provides some basic operations on atomic data; it is the programmerâ€™s
    task to compose these operations into programs that perform the desired computations.
    We use arithmetic for the combination of these two parts of a programming language
    because it generalizes what you know from grade school.
  prefs: []
  type: TYPE_NORMAL
- en: This first part of the book (I) introduces the arithmetic of BSL, the programming
    language used in the Prologue. From arithmetic, it is a short step to your first
    simple programs, which you may know as functions from mathematics. Before you
    know it, though, the process of writing programs looks confusing, and you will
    long for a way to organize your thoughts. We equate â€œorganizing thoughtsâ€ with
    design, and this first part of the book introduces you to a systematic way of
    designing programs.
  prefs: []
  type: TYPE_NORMAL
- en: 1Arithmetic[ðŸ”—](#(part._ch~3abasic-arithmetic) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'From [Prologue: How to Program](part_prologue.html), you know how to write
    down the kind of expression you know from first grade in BSL notation:'
  prefs: []
  type: TYPE_NORMAL
- en: write â€œ(â€,Scan this first chapter quickly, skip ahead to the second one, and
    return here, when you encounter â€œarithmeticâ€ that you donâ€™t recognize.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: write down the name of a primitive operation op,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: write down the arguments, separated by some space, and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: write down â€œ)â€.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Just as a reminder, here is a primitive expression:'
  prefs: []
  type: TYPE_NORMAL
- en: ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 2)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'It uses [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29),
    the operation for adding two numbers, followed by two arguments, which are plain
    numbers. But here is another example:'
  prefs: []
  type: TYPE_NORMAL
- en: ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 1)Â 2)Â 3Â 4Â 5)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This second example exploits two points in the above description that are open
    to interpretation. First, primitive operations may consume more than two arguments.
    Second, the arguments donâ€™t have to be numbers per se; they can be expressions,
    too.Evaluating expressions is also straightforward. First, BSL evaluates all the
    arguments of a primitive operation. Second, it â€œfeedsâ€ the resulting pieces of
    data to the operation, which produces a result. Thus,
  prefs: []
  type: TYPE_NORMAL
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 3 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: We use == to mean â€œis equal to according to the laws of computation.â€ and
  prefs: []
  type: TYPE_NORMAL
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 1)Â 2)Â 3Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 2Â 2)Â 5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 2Â 2)Â 3Â 4Â 5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 5Â 3Â 4Â 5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 18 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: These calculations should look familiar because they are the same kind of calculations
    that you performed in mathematics classes. You may have written down the steps
    in a different way; you may have never been taught how to write down a sequence
    of calculation steps. Yet, BSL performs calculations just like you do, and this
    should be a relief. It guarantees that you understand what it does with primitive
    operations and primitive data, so there is some hope that you can predict what
    your programs will compute. Generally speaking, it is critical for a programmer
    to know how the chosen language calculates because otherwise a programâ€™s computation
    may harm the people who use them or on whose behalf the programs calculate.
  prefs: []
  type: TYPE_NORMAL
- en: 'The rest of this chapter introduces four forms of atomic data of BSL: numbers,
    strings, images, and Boolean values.The next volume, How to Design Components,
    will explain how to design atomic data. We use the word â€œatomicâ€ here in analogy
    to physics. You cannot peek inside atomic pieces of data, but you do have functions
    that combine several pieces of atomic data into another one, retrieve â€œpropertiesâ€
    of them, also in terms of atomic data, and so on. The sections of this chapter
    introduce some of these functions, also called primitive operations or pre-defined
    operations. You can find others in the documentation of BSL that comes with DrRacket.'
  prefs: []
  type: TYPE_NORMAL
- en: 1.1The Arithmetic of Numbers[ðŸ”—](#(part._sec~3aarith-num) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Most people think â€œnumbersâ€ and â€œoperations on numbersâ€ when they hear â€œarithmetic.â€
    â€œOperations on numbersâ€ means adding two numbers to yield a third, subtracting
    one number from another, determining the greatest common divisor of two numbers,
    and many more such things. If we donâ€™t take arithmetic too literally, we may even
    include the sine of an angle, rounding a real number to the closest integer, and
    so on.
  prefs: []
  type: TYPE_NORMAL
- en: 'The BSL language supports Numbers and arithmetic on them. As discussed in the
    Prologue, an arithmetic operation such as [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    is used like this:'
  prefs: []
  type: TYPE_NORMAL
- en: ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 3Â 4)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'that is, in prefix notation form. Here are some of the operations on numbers
    that our language provides: [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29),
    [-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29),
    [*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29),
    [/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29),
    [abs](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._abs%29%29),
    [add1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._add1%29%29),
    [ceiling](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._ceiling%29%29),
    [denominator](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._denominator%29%29),
    [exact->inexact](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._exact-~3einexact%29%29),
    [expt](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._expt%29%29),
    [floor](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._floor%29%29),
    [gcd](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._gcd%29%29),
    [log](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._log%29%29),
    [max](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._max%29%29),
    [numerator](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._numerator%29%29),
    [quotient](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._quotient%29%29),
    [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29),
    [remainder](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._remainder%29%29),
    [sqr](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqr%29%29),
    and [tan](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._tan%29%29).
    We picked our way through the alphabet just to show the variety of operations.
    Explore what they compute, and then find out how many more there are.If you need
    an operation on numbers that you know from your mathematics courses, chances are
    that BSL knows about it, too. Guess its name and experiment in the interactions
    area. Say you need to compute the sin of some angle; try'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([sin](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sin%29%29)Â 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: and use it happily ever after. Or look in the HelpDesk.You might know [e](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._e%29%29)
    from calculus. Itâ€™s a real number, close to 2.718, called â€œEulerâ€™s constant.â€
    You will find there that in addition to operations BSL also recognizes the names
    of some widely used numbers, for example, [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29)
    and [e](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._e%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: When it comes to numbers, BSL programs may use natural numbers, integers, rational
    numbers, real numbers, and complex numbers. We assume that you have heard of all
    but the last one. The last one may have been mentioned in your high school class.
    If not, donâ€™t worry; while complex numbers are useful for all kinds of calculations,
    a novice doesnâ€™t have to know about them.
  prefs: []
  type: TYPE_NORMAL
- en: A truly important distinction concerns the precision of numbers. For now, it
    is important to understand that BSL distinguishes exact numbers and inexact numbers.
    When it calculates with exact numbers, BSL preserves this precision whenever possible.
    For example, ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)  4  6)
    produces the precise fraction 2/3, which DrRacket can render as a proper fraction,
    an improper fraction, or a mixed decimal. Play with your computerâ€™s mouse to find
    the menu that changes the fraction into decimal expansion.
  prefs: []
  type: TYPE_NORMAL
- en: 'Some of BSLâ€™s numeric operations cannot produce an exact result. For example,
    using the [sqrt](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqrt%29%29)
    operation on 2 produces an irrational number that cannot be described with a finite
    number of digits. Because computers are of finite size and BSL must somehow fit
    such numbers into the computer, it chooses an approximation: 1.4142135623730951.
    As mentioned in the Prologue, the #i prefix warns novice programmers of this lack
    of precision. While most programming languages choose to reduce precision in this
    manner, few advertise it and even fewer warn programmers.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Note on Numbers The word â€œ[Number](#%28tech._number%29)â€ refers to a wide variety
    of numbers, including counting numbers, integers, rational numbers, real numbers,
    and even complex numbers. For most uses, you can safely equate [Number](#%28tech._number%29)
    with the number line from elementary school, though on occasion this translation
    is too imprecise. If we wish to be precise, we use appropriate words: Integer,
    Rational, and so on. We may even refine these notions using such standard terms
    as PositiveInteger, NonnegativeNumber, NegativeNumber, and so on. End'
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 1\. Add the following definitions for x and y to DrRacketâ€™s definitions
    area:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â xÂ 3)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â yÂ 4)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Now imagine that x and y are the coordinates of a Cartesian point. Write down
    an expression that computes the distance of this point to the origin, that is,
    a point with the coordinates (0,0).
  prefs: []
  type: TYPE_NORMAL
- en: The expected result for these values is 5, but your expression should produce
    the correct result even after you change these definitions.
  prefs: []
  type: TYPE_NORMAL
- en: Just in case you have not taken geometry courses or in case you forgot the formula
    that you encountered there, the point (x,y) has the distance
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/2077a7d831a75922c4d318f2d8365c3e.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'from the origin. After all, we are teaching you how to design programs, not
    how to be a geometer.To develop the desired expression, it is best to click RUN
    and to experiment in the interactions area. The RUN action tells DrRacket what
    the current values of x and y are so that you can experiment with expressions
    that involve x and y:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > x |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 3 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > y |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 4 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â xÂ 10)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 13 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â xÂ y)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 12 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Once you have the expression that produces the correct result, copy it from
    the interactions area to the definitions area.
  prefs: []
  type: TYPE_NORMAL
- en: To confirm that the expression works properly, change x to 12 and y to 5, then
    click RUN. The result should be 13.
  prefs: []
  type: TYPE_NORMAL
- en: Your mathematics teacher would say that you computed the distance formula. To
    use the formula on alternative inputs, you need to open DrRacket, edit the definitions
    of x and y so they represent the desired coordinates, and click RUN. But this
    way of reusing the distance formula is cumbersome and naive. We will soon show
    you a way to define functions, which makes reusing formulas straightforward. For
    now, we use this kind of exercise to call attention to the idea of functions and
    to prepare you for programming with them.
  prefs: []
  type: TYPE_NORMAL
- en: 1.2The Arithmetic of Strings[ðŸ”—](#(part._sec~3aarith-str) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: A widespread prejudice about computers concerns their innards. Many believe
    that it is all about bits and bytesâ€”<wbr>whatever those areâ€”<wbr>and possibly
    numbers because everyone knows that computers can calculate. While it is true
    that electrical engineers must understand and study the computer as just such
    an object, beginning programmers and everyone else need never (ever) succumb to
    this thinking.
  prefs: []
  type: TYPE_NORMAL
- en: Programming languages are about computing with information, and information
    comes in all shapes and forms. For example, a program may deal with colors, names,
    business letters, or conversations between people. Even though we could encode
    this kind of information as numbers, it would be a horrible idea. Just imagine
    remembering large tables of codes, such as 0 means â€œredâ€ and 1 means â€œhello,â€
    and the like.
  prefs: []
  type: TYPE_NORMAL
- en: 'Instead, most programming languages provide at least one kind of data that
    deals with such symbolic information. For now, we use BSLâ€™s strings. Generally
    speaking, a String is a sequence of the characters that you can enter on the keyboard,
    plus a few others, about which we arenâ€™t concerned just yet, enclosed in double
    quotes. In [Prologue: How to Program](part_prologue.html), we have seen a number
    of BSL strings: "hello", "world", "blue", "red", and others. The first two are
    words that may show up in a conversation or in a letter; the others are names
    of colors that we may wish to use.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Note We use 1String to refer to the keyboard characters that make up a [String](#%28tech._string%29).
    For example, "red" consists of three such [1String](#%28tech._1string%29)s: "r",
    "e", "d". As it turns out, there is a bit more to the definition of [1String](#%28tech._1string%29),
    but for now thinking of them as [String](#%28tech._string%29)s of length 1 is
    fine. End'
  prefs: []
  type: TYPE_NORMAL
- en: 'BSL includes only one operation that exclusively consumes and produces strings:
    [string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29),
    which, as we have seen in [Prologue: How to Program](part_prologue.html), concatenates
    two given strings into one. Think of [string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)
    as an operation that is just like [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29).
    While the latter consumes two (or more) numbers and produces a new number, the
    former consumes two or more strings and produces a new string:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "what
    a "Â "lovely "Â "day"Â " 4 BSL") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "what a lovely day 4 BSL" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Nothing about the given numbers changes when [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    adds them up, and nothing about the given strings changes when [string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)
    concatenates them into one big string. If you wish to evaluate such expressions,
    you just need to think that the obvious laws hold for [string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29),
    similar to those for [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  1  1)  ==  2
    |  | ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)  "a"  "b")  ==  "ab"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  1  2)  ==  3
    |  | ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)  "ab"  "c")  ==  "abc"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  2  2)  ==  4
    |  | ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)  "a"  "
    ")  ==  "a " |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ... |  | ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'ExerciseÂ 2\. Add the following two lines to the definitions area:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â prefixÂ "hello")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â suffixÂ "world")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Then use string primitives to create an expression that concatenates prefix
    and suffix and adds "_" between them. When you run this program, you will see
    "hello_world" in the interactions area.
  prefs: []
  type: TYPE_NORMAL
- en: See [exerciseÂ 1](#%28counter._%28exercise._arith-n%29%29) for how to create
    expressions using DrRacket.
  prefs: []
  type: TYPE_NORMAL
- en: 1.3Mixing It Up[ðŸ”—](#(part._sec~3aarith-mix) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'All other operations (in BSL) concerning strings consume or produce data other
    than strings. Here are some examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '[string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)
    consumes a string and produces a number;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[string-ith](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-ith%29%29)
    consumes a string s together with a number i and extracts the [1String](#%28tech._1string%29)
    located at the ith position (counting from 0); and'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[number->string](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number-~3estring%29%29)
    consumes a number and produces a string.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Also look up [substring](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._substring%29%29)
    and find out what it does.If the documentation in HelpDesk appears confusing,
    experiment with the functions in the interactions area. Give them appropriate
    arguments, and find out what they compute. Also use inappropriate arguments for
    some operations just to find out how BSL reacts:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â 42)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| string-length:expects a string, given 42 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As you can see, BSL reports an error. The first part â€œstring-lengthâ€ informs
    you about the operation that is misapplied; the second half states what is wrong
    with the arguments. In this specific example, [string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)
    is supposed to be applied to a string but is given a number, specifically 42.Naturally,
    it is possible to nest operations that consume and produce different kinds of
    data as long as you keep track of what is proper and what is not. Consider this
    expression from the [Prologue: How to Program](part_prologue.html):'
  prefs: []
  type: TYPE_NORMAL
- en: ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â "hello
    world")Â 20)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The inner expression applies [string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)
    to "hello world", our favorite string. The outer expression has [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)
    consume the result of the inner expression and 20.Letâ€™s determine the result of
    this expression in a step-by-step fashion:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â "hello
    world")Â 20) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 11Â 20)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 31 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Not surprisingly, computing with such nested expressions that deal with a mix
    of data is no different from computing with numeric expressions. Here is another
    example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â ([number->string](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number-~3estring%29%29)Â 42))Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â "42")Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 2Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 4 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Before you go on, construct some nested expressions that mix data in the wrong
    way, say,
  prefs: []
  type: TYPE_NORMAL
- en: ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â 42)Â 1)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Run them in DrRacket. Study the red error message but also watch what DrRacket
    highlights in the definitions area.ExerciseÂ 3\. Add the following two lines to
    the definitions area:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â strÂ "helloworld")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â iÂ 5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Then create an expression using string primitives that adds "_" at position
    i. In general this means the resulting string is longer than the original one;
    here the expected result is "hello_world".Position means i characters from the
    left of the string, but programmers start counting at 0. Thus, the 5th letter
    in this example is "w", because the 0th letter is "h". Hint When you encounter
    such â€œcounting problemsâ€ you may wish to add a string of digits below str to help
    with counting:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â strÂ "helloworld")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â indÂ "0123456789")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â iÂ 5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: See [exerciseÂ 1](#%28counter._%28exercise._arith-n%29%29) for how to create
    expressions in DrRacket.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 4\. Use the same setup as in [exerciseÂ 3](#%28counter._%28exercise._arith-s1%29%29)
    to create an expression that deletes the ith position from str. Clearly this expression
    creates a shorter string than the given one. Which values for i are legitimate?
  prefs: []
  type: TYPE_NORMAL
- en: 1.4The Arithmetic of Images[ðŸ”—](#(part._sec~3aarith-images) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: An Image is a visual, rectangular piece of data, for example, a photo or a geometric
    figure and its frame.Remember to require the 2htdp/image teachpack in a new tab.
    You can insert images in DrRacket wherever you can write down an expression because
    images are values, just like numbers and strings.
  prefs: []
  type: TYPE_NORMAL
- en: 'Your programs can also manipulate images with primitive operations. These primitive
    operations come in three flavors. The first kind concerns the creation of basic
    images:'
  prefs: []
  type: TYPE_NORMAL
- en: '[circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)
    produces a circle image from a radius, a mode string, and a color string;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[ellipse](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._ellipse%29%29)
    produces an ellipse from two diameters, a mode string, and a color string;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._line%29%29)
    produces a line from two points and a color string;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)
    produces a rectangle from a width, a height, a mode string, and a color string;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)
    produces a text image from a string, a font size, and a color string; and'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[triangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._triangle%29%29)
    produces an upward-pointing equilateral triangle from a size, a mode string, and
    a color string.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The names of these operations mostly explain what kind of image they create.
    All you must know is that mode strings means "solid" or "outline", and color strings
    are strings such as "orange", "black", and so on.Play with these operations in
    the interactions window:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 10Â "solid"Â "green")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/3b1c7bb5aff4b3ad1ab585c484a7202f.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â 10Â 20Â "solid"Â "blue")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/abd6c58ad375d3f1c964992a4c03249f.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([star](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._star%29%29)Â 12Â "solid"Â "gray")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/89e9de5002721559d7f9e2399020f03c.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Stop! The above uses a previously unmentioned operation. Look up its documentation
    and find out how many more such operations the 2htdp/image teachpack comes with.
    Experiment with the operations you find.The second kind of functions on images
    concern image properties:'
  prefs: []
  type: TYPE_NORMAL
- en: '[image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)
    determines the width of an image in terms of pixels;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[image-height](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-height%29%29)
    determines the height of an image;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'They extract the kind of values from images that you expect:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)Â ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 10Â "solid"Â "red"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 20 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([image-height](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-height%29%29)Â ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â 10Â 20Â "solid"Â "blue"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 20 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Stop! Explain how DrRacket determines the value of this expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)Â ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 10Â "solid"Â "red"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([image-height](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-height%29%29)Â ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â 10Â 20Â "solid"Â "blue")))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'A proper understanding of the third kind of image-composing primitives requires
    the introduction of one new idea: the anchor point. An image isnâ€™t just a single
    pixel, it consists of many pixels. Specifically, each image is like a photograph,
    that is, a rectangle of pixels. One of these pixels is an implicit anchor point.
    When you use an image primitive to compose two images, the composition happens
    with respect to the anchor points, unless you specify some other point explicitly:'
  prefs: []
  type: TYPE_NORMAL
- en: '[overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)
    places all the images to which it is applied on top of each other, using the center
    as anchor point;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[overlay/xy](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%2Fxy%29%29)
    is like [overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)
    but accepts two numbersâ€”<wbr>x and yâ€”<wbr>between two image arguments. It shifts
    the second image by x pixels to the right and y pixels downâ€”<wbr>all with respect
    to the first imageâ€™s top-left corner; unsurprisingly, a negative x shifts the
    image to the left and a negative y up; and'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[overlay/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%2Falign%29%29)
    is like [overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)
    but accepts two strings that shift the anchor point(s) to other parts of the rectangles.
    There are nine different positions overall; experiment with all possibilities!'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The 2htdp/image teachpack comes with many other primitive functions for combining
    images. As you get familiar with image processing, you will want to read up on
    those. For now, we introduce three more because they are important for creating
    animated scenes and images for games:'
  prefs: []
  type: TYPE_NORMAL
- en: '[empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)
    creates a rectangle of some given width and height;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)
    places an image into a scene at a specified position. If the image doesnâ€™t fit
    into the given scene, it is appropriately cropped;'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[scene+line](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._scene%2Bline%29%29)
    consumes a scene, four numbers, and a color to draw a line into the given image.
    Experiment with it to see how it works.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| arithmetic of numbers |  | arithmetic of images |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  1  1)  ==  2
    |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 4Â "solid"Â "orange")
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â Â Â ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 6Â "solid"Â "yellow"))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; == &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ![image](../Images/6fce39c922c05928fca29f093ee22c99.png) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |  |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  1  2)  ==  3
    |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([underlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._underlay%29%29)Â ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 6Â "solid"Â "yellow")
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â Â Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â 4Â "solid"Â "orange"))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; == &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ![image](../Images/6c44c0ca19228ae0cc58b599fb69b375.png) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |  |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  2  2)  ==  4
    |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 6Â "solid"Â "yellow")
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â 10 &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â Â Â Â Â Â Â ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 20Â 20))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; == &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ![image](../Images/3144280e20fcde5a5c2cdf1023265e55.png) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ... |  | ... |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 10: Laws of image creation'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The laws of arithmetic for images are analogous to those for numbers; see [figureÂ 10](#%28counter._%28figure._fig~3alaws-of-images%29%29)
    for some examples and a comparison with numeric arithmetic. Again, no image gets
    destroyed or changed. Like [+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29),
    these primitives just make up new images that combine the given ones in some manner.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 5\. Use the 2htdp/image teachpack to create the image of a simple boat
    or tree. Make sure you can easily change the scale of the entire image.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 6\. Add the following line to the definitions area:Copy and paste the
    image into your DrRacket.
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â catÂ ![](../Images/2c441c7aba78a31d425a55678b9d4027.png))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Create an expression that counts the number of pixels in the image.
  prefs: []
  type: TYPE_NORMAL
- en: 1.5The Arithmetic of Booleans[ðŸ”—](#(part._sec~3aarith-bools) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'We need one last kind of primitive data before we can design programs: Boolean
    values. There are only two kinds of Boolean values: #true and #false. Programs
    use Boolean values for representing decisions or the status of switches.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Computing with Boolean values is simple, too. In particular, BSL programs get
    away with three operations: [or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29),
    [and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29),
    and [not](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._not%29%29).
    These operations are kind of like addition, multiplication, and negation for numbers.
    Of course, because there are only two Boolean values, it is actually possible
    to demonstrate how these functions work in all possible situations:'
  prefs: []
  type: TYPE_NORMAL
- en: '[or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    checks whether any of the given Boolean values is #true:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| > ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â #trueÂ #true)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â #trueÂ #false)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â #falseÂ #true)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â #falseÂ #false)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '[and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)
    checks whether all of the given Boolean values are #true:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| > ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â #trueÂ #true)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â #trueÂ #false)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â #falseÂ #true)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â #falseÂ #false)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: 'and [not](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._not%29%29)
    always picks the Boolean that isnâ€™t given:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| > ([not](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._not%29%29)Â #true)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Unsurprisingly, [or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    and [and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)
    may be used with more than two expressions. Finally, there is more to [or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    and [and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)
    than these explanations suggest, but to explain the extra bit requires a second
    look at nested expressions.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 7\. Boolean expressions can express some everyday problems. Suppose
    you want to decide whether today is an appropriate day to go to the mall. You
    go to the mall either if it is not sunny or ifNadeem Hamid suggested this formulation
    of the exercise. today is Friday (because that is when stores post new sales items).
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is how you could go about it using your new knowledge about Booleans.
    First add these two lines to the definitions area of DrRacket:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â sunnyÂ #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â fridayÂ #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Now create an expression that computes whether sunny is false or friday is
    true. So in this particular case, the answer is #false. (Why?)'
  prefs: []
  type: TYPE_NORMAL
- en: See [exerciseÂ 1](#%28counter._%28exercise._arith-n%29%29) for how to create
    expressions in DrRacket. How many combinations of Booleans can you associate with
    sunny and friday?
  prefs: []
  type: TYPE_NORMAL
- en: 1.6Mixing It Up with Booleans[ðŸ”—](#(part._sec~3aboolean-if) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: One important use of Boolean values concerns calculations with different kinds
    of data. We know from the Prologue that BSL programs may name values via definitions.
    For example, we could start a program with
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â xÂ 2)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'and then compute its inverse:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â inverse-of-xÂ ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 1Â x))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This works fine, as long as we donâ€™t edit the program and change x to 0.This
    is where Boolean values come in, in particular conditional calculations. First,
    the primitive function [=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)
    determines whether two (or more) numbers are equal. If so, it produces #true,
    otherwise #false. Second, there is a kind of BSL expression that we havenâ€™t mentioned
    so far: the [if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    expression. It uses the word â€œifâ€ as if it were a primitive function; it isnâ€™t.
    The word â€œifâ€ is followed by three expressions, separated by blank spaces (that
    includes tabs, line breaks, etc.). Naturally the entire expression is enclosed
    in parentheses. Here is an example:'
  prefs: []
  type: TYPE_NORMAL
- en: ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â xÂ 0)Â 0Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 1Â x))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This [if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    expression contains ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)  x  0),
    0, and ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)  1  x),
    three sub-expressions. The evaluation of this expression proceeds in two steps:'
  prefs: []
  type: TYPE_NORMAL
- en: The first expression is always evaluated. Its result must be a Boolean.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'If the result of the first expression is #true, then the second expression
    is evaluated; otherwise the third one is. Whatever their results are, they are
    also the result of the entire [if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    expression.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Right-click on the result and choose a different representation.
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Given the definition of x above, you can experiment with [if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    expressions in the interactions area:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â xÂ 0)Â 0Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 1Â x))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 0.5 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Using the laws of arithmetic, you can figure out the result yourself:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â xÂ 0)Â 0Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 1Â x))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â because x stands for 2 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â 2Â 0)Â 0Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 1Â 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â 2 is not equal to 0, ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)  2  0)
    is #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â #falseÂ 0Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 1Â 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 1Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â normalize this to its decimal representation |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 0.5 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In other words, DrRacket knows that x stands for 2 and that the latter is not
    equal to 0. Hence, ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)  x  0)
    produces the result #false, meaning [if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    picks its third sub-expression to be evaluated.Stop! Imagine you edit the definition
    so that it looks like this:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â xÂ 0)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: What do you think
  prefs: []
  type: TYPE_NORMAL
- en: ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â xÂ 0)Â 0Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 1Â x))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: evaluates to in this context? Why? Show your calculation.
  prefs: []
  type: TYPE_NORMAL
- en: 'In addition to [=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29),
    BSL provides a host of other comparison primitives. Explain what the following
    four comparison primitives determine about numbers: [<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29),
    [<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29),
    [>](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e%29%29),
    [>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29).'
  prefs: []
  type: TYPE_NORMAL
- en: Strings arenâ€™t compared with [=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)
    and its relatives. Instead, you must use [string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)
    or [string<=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3c~3d~3f%29%29)
    or [string>=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3e~3d~3f%29%29)
    if you ever need to compare strings. While it is obvious that [string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)
    checks whether the two given strings are equal, the other two primitives are open
    to interpretation. Look up their documentation. Or, experiment, guess a general
    law, and then check in the documentation whether you guessed right.
  prefs: []
  type: TYPE_NORMAL
- en: 'You may wonder why it is ever necessary to compare strings with each other.
    So imagine a program that deals with traffic lights. It may use the strings "green",
    "yellow", and "red". This kind of program may contain a fragment such as this:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â current-colorÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The dots in the definition of current-color arenâ€™t a part of the program, of
    course. Replace them with a string that refers to a color.
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â next-color
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "green"Â current-color)Â "yellow"Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: It should be easy to imagine that this fragment deals with the computation that
    determines which light bulb is to be turned on next and which one should be turned
    off.
  prefs: []
  type: TYPE_NORMAL
- en: The next few chapters introduce better expressions than [if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    to express conditional computations and, most importantly, systematic ways for
    designing them.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 8\. Add the following line to the definitions area:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â catÂ ![](../Images/2c441c7aba78a31d425a55678b9d4027.png))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Create a conditional expression that computes whether the image is tall or wide.
    An image should be labeled "tall" if its height is larger than or equal to its
    width; otherwise it is "wide". See [exerciseÂ 1](#%28counter._%28exercise._arith-n%29%29)
    for how to create such expressions in DrRacket; as you experiment, replace the
    cat with a rectangle of your choice to ensure that you know the expected answer.
  prefs: []
  type: TYPE_NORMAL
- en: Now try the following modification. Create an expression that computes whether
    a picture is "tall", "wide", or "square".
  prefs: []
  type: TYPE_NORMAL
- en: '1.7Predicates: Know Thy Data[ðŸ”—](#(part._sec~3apredicates) "Link to here")'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Remember the expression ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)  42)
    and its result. Actually, the expression doesnâ€™t have a result, it signals an
    error. DrRacket lets you know about errors via red text in the interactions area
    and highlighting of the faulty expression (in the definitions area). This way
    of marking errors is particularly helpful when you use this expression (or its
    relatives) deeply nested within some other expression:'
  prefs: []
  type: TYPE_NORMAL
- en: ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â 42)Â 1)Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Experiment with this expression by entering it both into DrRacketâ€™s interactions
    area and in the definitions area (and then click on RUN).Of course, you really
    donâ€™t want such error-signaling expressions in your program. And usually, you
    donâ€™t make such obvious mistakes as using 42 as a string. It is quite common,
    however, that programs deal with variables that may stand for either a number
    or a string:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â inÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â in)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'A variable such as in can be a placeholder for any value, including a number,
    and this value then shows up in the [string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)
    expression.One way to prevent such accidents is to use a predicate, which is a
    function that consumes a value and determines whether or not it belongs to some
    class of data. For example, the predicate [number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)
    determines whether the given value is a number or not:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)Â 4)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)Â "fortytwo")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As you see, the predicates produce Boolean values. Hence, when predicates are
    combined with conditional expressions, programs can protect expressions from misuse:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â inÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â in)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â in)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Every class of data that we introduced in this chapter comes with a predicate.
    Experiment with [number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29),
    [string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29),
    [image?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._image~3f%29%29),
    and [boolean?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3f%29%29)
    to ensure that you understand how they work.
  prefs: []
  type: TYPE_NORMAL
- en: 'In addition to predicates that distinguish different forms of data, programming
    languages also come with predicates that distinguish different kinds of numbers.
    In BSL, numbers are classified in two ways: by construction and by their exactness.
    Construction refers to the familiar sets of numbers: [integer?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._integer~3f%29%29),
    [rational?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rational~3f%29%29),
    [real?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._real~3f%29%29),
    and [complex?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._complex~3f%29%29),Put
    ([sqrt](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqrt%29%29)  -1)
    at the prompt in the interactions area and hit the â€œenterâ€ key. Take a close look
    at the result. The result you see is the first so-called complex number anyone
    encounters. While your teacher may have told you that one doesnâ€™t compute the
    square root of negative numbers, the truth is that mathematicians and some programmers
    find it acceptable and useful to do so anyway. But donâ€™t worry: understanding
    complex numbers is not essential to being a program designer. but many programming
    languages, including BSL, also choose to use finite approximations to well-known
    constants, which leads to somewhat surprising results with the [rational?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rational~3f%29%29)
    predicate:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([rational?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._rational~3f%29%29)Â [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As for exactness, we have mentioned the idea before. For now, experiment with
    [exact?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._exact~3f%29%29)
    and [inexact?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._inexact~3f%29%29)
    to make sure they perform the checks that their names suggest. Later we are going
    to discuss the nature of numbers in some detail.ExerciseÂ 9\. Add the following
    line to the definitions area of DrRacket:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â inÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Then create an expression that converts the value of in to a non-negative number.
    For a [String](#%28tech._string%29), it determines how long the [String](#%28tech._string%29)
    is; for an [Image](#%28tech._image%29), it uses the area; for a [Number](#%28tech._number%29),
    it uses the absolute value; for #true it uses 10 and for #false 20. Hint Check
    out [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    from the [Prologue: How to Program](part_prologue.html) (again).'
  prefs: []
  type: TYPE_NORMAL
- en: See [exerciseÂ 1](#%28counter._%28exercise._arith-n%29%29) for how to create
    expressions in DrRacket.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 10\. Now relax, eat, sleep, and then tackle the next chapter.
  prefs: []
  type: TYPE_NORMAL
- en: 2Functions and Programs[ðŸ”—](#(part._ch~3afuncs-progs) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: As far as programming is concerned, â€œarithmeticâ€ is half the game; the other
    half is â€œalgebra.â€ Of course, â€œalgebraâ€ relates to the school notion of algebra
    as little/much as the notion of â€œarithmeticâ€ from the preceding chapter relates
    to arithmetic taught in grade-school arithmetic. Specifically, the algebra notions
    needed are variable, function definition, function application, and function composition.
    This chapter reacquaints you with these notions in a fun and accessible manner.
  prefs: []
  type: TYPE_NORMAL
- en: 2.1Functions[ðŸ”—](#(part._sec~3afuncs) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Programs are functions. Like functions, programs consume inputs and produce
    outputs. Unlike the functions you may know, programs work with a variety of data:
    numbers, strings, images, mixtures of all these, and so on. Furthermore, programs
    are triggered by events in the real world, and the outputs of programs affect
    the real world. For example, a spreadsheet program may react to an accountantâ€™s
    key presses by filling some cells with numbers, or the calendar program on a computer
    may launch a monthly payroll program on the last day of every month. Lastly, a
    program may not consume all of its input data at once, instead it may decide to
    process data in an incremental manner.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Definitions While many programming languages obscure the relationship between
    programs and functions, BSL brings it to the fore. Every BSL program consists
    of several definitions, usually followed by an expression that involves those
    definitions. There are two kinds of definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: constant definitions, of the shape ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)  Variable  Expression),
    which we encountered in the preceding chapter; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: function definitions, which come in many flavors, one of which we used in the
    Prologue.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Like expressions, function definitions in BSL come in a uniform shape:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (FunctionNameÂ VariableÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â Variable)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Expression) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: That is, to define a function, we write down
  prefs: []
  type: TYPE_NORMAL
- en: â€œ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    (â€,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: the name of the function,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: followed by several variables, separated by space and ending in â€œ)â€,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: and an expression followed by â€œ)â€.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'And that is all there is to it. Here are some small examples:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)  (f  x)  1)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)  (g  x  y)  ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  1  1))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)  (h  x  y  z)  ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  2  2)  3))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Before we explain why these examples are silly, we need to explain what function
    definitions mean. Roughly speaking, a function definition introduces a new operation
    on data; put differently, it adds an operation to our vocabulary if we think of
    the primitive operations as the ones that are always available. Like a primitive
    function, a defined function consumes inputs. The number of variables determines
    how many inputsâ€”<wbr>also called arguments or parametersâ€”<wbr>a function consumes.
    Thus, f is a one-argument function, sometimes called a unary function. In contrast,
    g is a two-argument function, also dubbed binary, and h is a ternary or three-argument
    function. The expressionâ€”<wbr>often referred to as the function bodyâ€”<wbr>determines
    the output.
  prefs: []
  type: TYPE_NORMAL
- en: The examples are silly because the expressions inside the functions do not involve
    the variables. Since variables are about inputs, not mentioning them in the expressions
    means that the functionâ€™s output is independent of its input and therefore always
    the same. We donâ€™t need to write functions or programs if the output is always
    the same.
  prefs: []
  type: TYPE_NORMAL
- en: Variables arenâ€™t data; they represent data. For example, a constant definition
    such as
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â xÂ 3)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'says that x always stands for 3. The variables in a function header, that is,
    the variables that follow the function name, are placeholders for unknown pieces
    of data, the inputs of the function. Mentioning a variable in the function body
    is the way to use these pieces of data when the function is applied and the values
    of the variables become known.Consider the following fragment, a stub function
    definition:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (ffÂ a)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: (ff  a) is the function header. It means ff consumes one piece of input, and
    the variable a is a placeholder for this input. Of course, at the time we define
    a function, we donâ€™t know what its input(s) will be. Indeed, the whole point of
    defining a function is that we can use the function many times on many different
    inputs.Useful function bodies refer to the function parameters. A reference to
    a function parameter is really a reference to the piece of data that is the input
    to the function. If we complete the definition of ff like this
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (ffÂ a)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 10Â a))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: we are saying that the output of a function is ten times its input. Presumably
    this function is going to be supplied with numbers as inputs because it makes
    no sense to multiply images or Boolean values or strings by 10.
  prefs: []
  type: TYPE_NORMAL
- en: For now, the only remaining question is how a function obtains its inputs. And
    to this end, we turn to the notion of applying a function.
  prefs: []
  type: TYPE_NORMAL
- en: 'Applications A function application puts [define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)d
    functions to work, and it looks just like the applications of a pre-defined operation:'
  prefs: []
  type: TYPE_NORMAL
- en: write â€œ(â€,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: write down the name of a defined function f,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: write down as many arguments as f consumes, separated by space,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: and add â€œ)â€ at the end.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'With this bit of explanation, you can now experiment with functions in the
    interactions area just as we suggested you experiment with primitives to find
    out what they compute. The following three experiments, for example, confirm that
    f from above produces the same value no matter what input it is applied to:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (fÂ 1) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 1 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (fÂ "hello world") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 1 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (fÂ #true) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 1 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'What does (f  ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)  3  "solid"  "red"))
    yield?Remember to add ([require](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._require%29%29)  2htdp/image)
    to the definitions area.See, even images as inputs donâ€™t change fâ€™s behavior.
    But here is what happens when the function is applied to too few or too many arguments:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (f) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| f:expects 1 argument, found none |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (fÂ 1Â 2Â 3Â 4Â 5) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| f:expects only 1 argument, found 5 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'DrRacket signals an error that is just like those you see when you apply a
    primitive to the wrong number of arguments:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| +:expects at least 2 arguments, found none |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Functions donâ€™t have to be applied at the prompt in the interactions area.
    It is perfectly acceptable to use function applications nested within other function
    applications:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (ffÂ 3)Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 32 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â (ffÂ 4)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (ffÂ 3)Â 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 1280 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (ffÂ (ffÂ 1)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 100 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ExerciseÂ 11\. Define a function that consumes two numbers, x and y, and that
    computes the distance of point (x,y) to the origin.
  prefs: []
  type: TYPE_NORMAL
- en: In [exerciseÂ 1](#%28counter._%28exercise._arith-n%29%29) you developed the right-hand
    side of this function for concrete values of x and y. Now add a header.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 12\. Define the function cvolume, which accepts the length of a side
    of an equilateral cube and computes its volume. If you have time, consider defining
    csurface, too.
  prefs: []
  type: TYPE_NORMAL
- en: Hint An equilateral cube is a three-dimensional container bounded by six squares.
    You can determine the surface of a cube if you know that the squareâ€™s area is
    its length multiplied by itself. Its volume is the length multiplied with the
    area of one of its squares. (Why?)
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 13\. Define the function string-first, which extracts the first [1String](#%28tech._1string%29)
    from a non-empty string.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 14\. Define the function string-last, which extracts the last [1String](#%28tech._1string%29)
    from a non-empty string.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 15\. Define ==>. The function consumes two Boolean values, call them
    sunny and friday. Its answer is #true if sunny is false or friday is true. Note
    Logicians call this Boolean operation implication, and they use the notation sunny
    => friday for this purpose.'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 16\. Define the function image-area, which counts the number of pixels
    in a given image. See [exerciseÂ 6](#%28counter._%28exercise._arith-i1%29%29) for
    ideas.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 17\. Define the function image-classify, which consumes an image and
    conditionally produces "tall" if the image is taller than wide, "wide" if it is
    wider than tall, or "square" if its width and height are the same. See [exerciseÂ 8](#%28counter._%28exercise._arith-b2%29%29)
    for ideas.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 18\. Define the function string-join, which consumes two strings and
    appends them with "_" in between. See [exerciseÂ 2](#%28counter._%28exercise._arith-s0%29%29)
    for ideas.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 19\. Define the function string-insert, which consumes a string str
    plus a number i and inserts "_" at the ith position of str. Assume i is a number
    between 0 and the length of the given string (inclusive). See [exerciseÂ 3](#%28counter._%28exercise._arith-s1%29%29)
    for ideas. Ponder how string-insert copes with "".
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 20\. Define the function string-delete, which consumes a string plus
    a number i and deletes the ith position from str. Assume i is a number between
    0 (inclusive) and the length of the given string (exclusive). See [exerciseÂ 4](#%28counter._%28exercise._arith-s2%29%29)
    for ideas. Can string-delete deal with empty strings?
  prefs: []
  type: TYPE_NORMAL
- en: 2.2Computing[ðŸ”—](#(part._sec~3acomputing) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Function definitions and applications work in tandem. If you want to design
    programs, you must understand this collaboration because you need to imagine how
    DrRacket runs your programs and because you need to figure out what goes wrong
    when things go wrongâ€”<wbr>and they will go wrong.
  prefs: []
  type: TYPE_NORMAL
- en: 'While you may have seen this idea in an algebra course, we prefer to explain
    it our way. So here we go. Evaluating a function application proceeds in three
    steps: DrRacket determines the values of the argument expressions; it checks that
    the number of arguments and the number of function parameters are the same; if
    so, DrRacket computes the value of the body of the function, with all parameters
    replaced by the corresponding argument values. This last value is the value of
    the function application. This is a mouthful, so we need examples.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is a sample calculation for f from the previous section:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (fÂ ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket knows that ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  1  1)  ==  2
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (fÂ 2) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket replaced all occurrences of x with 2 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 1 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'That last equation is weird because x does not occur in the body of f. Therefore,
    replacing the occurrences of x with 2 in the function body produces 1, which is
    the function body itself.For ff, DrRacket performs a different kind of computation:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (ffÂ ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket again knows that ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  1  1)  ==  2
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (ffÂ 2) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket replaces a with 2 in ff''s body |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 10Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â and from here, DrRacket uses plain arithmetic |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 20 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The best point is that when you combine these laws of computation with those
    of arithmetic, you can pretty much predict the outcome of any program in BSL:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (ffÂ ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 1Â 2))Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket knows that ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  1  2)  ==  3
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (ffÂ 3)Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket replaces a with 3 in ff''s body |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 10Â 3)Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â now DrRacket uses the laws of arithmetic |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 30Â 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 32 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Naturally, we can reuse the result of this computation in others:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â (ffÂ 4)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (ffÂ 3)Â 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket substitutes 4 for a in ff''s body |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 10Â 4)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (ffÂ 3)Â 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket knows that ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  10  4)  ==  40
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 40Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â (ffÂ 3)Â 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â now it uses the result of the above calculation |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 40Â 32)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 1280Â ;Â because it is really just math |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: In sum, DrRacket is an incredibly fast algebra student; it knows all the laws
    of arithmetic and it is great at substitution. Even better, DrRacket cannot only
    determine the value of an expression; it can also show you how it does it. That
    is, it can show you step-by-step how to solve these algebra problems that ask
    you to determine the value of an expression.
  prefs: []
  type: TYPE_NORMAL
- en: Take a second look at the buttons that come with DrRacket. One of them looks
    like an â€œadvance to next trackâ€ button on an audio player. If you click this button,
    the stepper window pops up and you can step through the evaluation of the program
    in the definitions area.
  prefs: []
  type: TYPE_NORMAL
- en: Enter the definition of ff into the definitions area. Add (ff  ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  1  1))
    at the bottom. Now click the STEP. The stepper window will show up; [figureÂ 11](#%28counter._%28figure._fig~3astepper%29%29)
    shows what it looks like in version 6.2 of the software. At this point, you can
    use the forward and backward arrows to see all the computation steps that DrRacket
    uses to determine the value of an expression. Watch how the stepper performs the
    same calculations as we do.
  prefs: []
  type: TYPE_NORMAL
- en: Stop! Yes, you could have used DrRacket to solve some of your algebra homework.
    Experiment with the various options that the stepper offers.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/db2ace6bfe8e7019873c3fdda70573bf.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 11: The DrRacket stepper'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 21\. Use DrRacketâ€™s stepper to evaluate (ff  (ff  1)) step-by-step.
    Also try ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  (ff  1)  (ff  1)).
    Does DrRacketâ€™s stepper reuse the results of computations?
  prefs: []
  type: TYPE_NORMAL
- en: At this point, you might think that you are back in an algebra course with all
    these computations involving uninteresting functions and numbers. Fortunately,
    this approach generalizes to all programs, including the interesting ones, in
    this book.
  prefs: []
  type: TYPE_NORMAL
- en: 'Letâ€™s start by looking at functions that process strings. Recall some of the
    laws of string arithmetic:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "hello"Â "
    "Â "world")Â ==Â "hello world" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "bye"Â ",
    "Â "world")Â ==Â "bye, world" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Now suppose we define a function that creates the opening of a letter:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (openingÂ first-nameÂ last-name)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "Dear
    "Â first-nameÂ ",")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'When you apply this function to two strings, you get a letter opening:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (openingÂ "Matthew"Â "Fisler") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "Dear Matthew," |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'More importantly, though, the laws of computing explain how DrRacket determines
    this result and how you can anticipate what DrRacket does:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (openingÂ "Matthew"Â "Fisler") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â Â ;Â DrRacket substitutes "Matthew" for first-name |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "Dear
    "Â "Matthew"Â ",") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "Dear Matthew," |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Since last-name does not occur in the definition of opening, replacing it with
    "Fisler" has no effect.
  prefs: []
  type: TYPE_NORMAL
- en: The rest of the book introduces more forms of data.Eventually you will encounter
    imperative operations, which do not combine or extract values but modify them.
    To calculate with such operations, you will need to add some laws to those of
    arithmetic and substitution. To explain operations on data, we always use laws
    like those of arithmetic in this book.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 22\. Use DrRacketâ€™s stepper on this program fragment:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (distance-to-originÂ xÂ y)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([sqrt](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqrt%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([sqr](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqr%29%29)Â x)Â ([sqr](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqr%29%29)Â y))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (distance-to-originÂ 3Â 4) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Does the explanation match your intuition?ExerciseÂ 23\. The first [1String](#%28tech._1string%29)
    in "hello world" is "h". How does the following function compute this result?
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (string-firstÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([substring](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._substring%29%29)Â sÂ 0Â 1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Use the stepper to confirm your ideas.ExerciseÂ 24\. Here is the definition
    of ==>:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (==>Â xÂ y)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([not](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._not%29%29)Â x)Â y))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Use the stepper to determine the value of (==>  #true  #false).ExerciseÂ 25\.
    Take a look at this attempt to solve [exerciseÂ 17](#%28counter._%28exercise._fun10%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (image-classifyÂ img)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â ([image-height](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-height%29%29)Â img)Â ([image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)Â img))Â "tall"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([image-height](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-height%29%29)Â img)Â ([image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)Â img))Â "square"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â ([image-height](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-height%29%29)Â img)Â ([image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)Â img))Â "wide"]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Does stepping through an application suggest a fix?ExerciseÂ 26\. What do you
    expect as the value of this program:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (string-insertÂ sÂ i)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â ([substring](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._substring%29%29)Â sÂ 0Â i)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "_" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([substring](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._substring%29%29)Â sÂ i)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (string-insertÂ "helloworld"Â 6) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Confirm your expectation with DrRacket and its stepper.
  prefs: []
  type: TYPE_NORMAL
- en: 2.3Composing Functions[ðŸ”—](#(part._sec~3acomposing) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: A program rarely consists of a single function definition. Typically, programs
    consist of a main definition and several other functions and turn the result of
    one function application into the input for another. In analogy to algebra, we
    call this way of defining functions composition, and we call these additional
    functions auxiliary functions or helper functions.
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (letterÂ first-nameÂ last-nameÂ signature-name)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (openingÂ first-name) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â "\n\n" |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (bodyÂ first-nameÂ last-name) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â "\n\n" |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (closingÂ signature-name))) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (openingÂ first-name)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â "Dear
    "Â first-nameÂ ",")) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (bodyÂ first-nameÂ last-name)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â "We have discovered that all people with the"Â "\n" |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â "last name "Â last-nameÂ " have won our lottery. So, "Â "\n" |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â first-nameÂ ", "Â "hurry and pick up your prize.")) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (closingÂ signature-name)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â "Sincerely," |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â "\n\n" |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â signature-name |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â "\n")) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 12: A batch program'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Consider the program of [figureÂ 12](#%28counter._%28figure._fig~3aletter-template%29%29)
    for filling in letter templates. It consists of four functions. The first one
    is the main function, which produces a complete letter from the first and last
    name of the addressee plus a signature. The main function refers to three auxiliary
    functions to produce the three pieces of the letterâ€”<wbr>the opening, body, and
    signatureâ€”<wbr>and composes the results in the correct order with [string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'Stop! Enter these definitions into DrRacketâ€™s definitions area, click RUN,
    and evaluate these expressions in the interactions area:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (letterÂ "Matthew"Â "Fisler"Â "Felleisen") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "Dear Matthew,\n\nWe have discovered that ...\n" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (letterÂ "Kathi"Â "Felleisen"Â "Findler") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "Dear Kathi,\n\nWe have discovered that ...\n" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Aside The result is a long string that contains "\n", which represents a new
    line when the string is printed. Once your program has access to functions that
    write to files or the console, this part of the string will make sense. Read on.Think
    of 'stdout as a [String](#%28tech._string%29) for now.
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)Â ''stdoutÂ (letterÂ "Matt"Â "Fiss"Â "Fell"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Dear Matt, &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124;  &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; We have discovered that all people with the &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; last name Fiss have won our lottery. So, &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Matt, hurry and pick up your prize. &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124;  &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Sincerely, &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124;  &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Fell &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ''stdout |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '[Programs](#%28part._sec~3aprogs%29) explains such batch programs in some depth.
    End'
  prefs: []
  type: TYPE_NORMAL
- en: 'In general, when a problem refers to distinct tasks of computation, a program
    should consist of one function per task and a main function that puts it all together.
    We formulate this idea as a simple slogan:'
  prefs: []
  type: TYPE_NORMAL
- en: Define one function per task.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The advantage of following this slogan is that you get reasonably small functions,
    each of which is easy to comprehend and whose composition is easy to understand.
    Once you learn to design functions, you will recognize that getting small functions
    to work correctly is much easier than doing so with large ones. Better yet, if
    you ever need to change a part of the program due to some change to the problem
    statement, it tends to be much easier to find the relevant parts when it is organized
    as a collection of small functions as opposed to a large, monolithic block.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is a small illustration of this point with a sample problem:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem The owner of a monopolistic movie theater in a small town has
    complete freedom in setting ticket prices. The more he charges, the fewer people
    can afford tickets. The less he charges, the more it costs to run a show because
    attendance goes up. In a recent experiment the owner determined a relationship
    between the price of a ticket and average attendance.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'At a price of $5.00 per ticket, 120 people attend a performance. For each 10-cent
    change in the ticket price, the average attendance changes by 15 people. That
    is, if the owner charges $5.10, some 105 people attend on the average; if the
    price goes down to $4.90, average attendance increases to 135\. Letâ€™s translate
    this idea into a mathematical formula:'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![image](../Images/8d8ffec293c4779453fedb649dc3742e.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Stop! Explain the minus sign before you proceed.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Unfortunately, the increased attendance also comes at an increased cost. Every
    performance comes at a fixed cost of $180 to the owner plus a variable cost of
    $0.04 per attendee.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The owner would like to know the exact relationship between profit and ticket
    price in order to maximize the profit.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'While the task is clear, how to go about it is not. All we can say at this
    point is that several quantities depend on each other.When we are confronted with
    such a situation, it is best to tease out the various dependencies, one by one:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The problem statement specifies how the number of attendees depends on the
    ticket price. Computing this number is clearly a separate task and thus deserves
    its own function definition:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (attendeesÂ ticket-price)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â 120Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â ticket-priceÂ 5.0)Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 15Â 0.1))))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: 'The revenue is exclusively generated by the sale of tickets, meaning it is
    exactly the product of ticket price and number of attendees:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (revenueÂ ticket-price)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â ticket-priceÂ (attendeesÂ ticket-price)))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: 'The cost consists of two parts: a fixed part ($180) and a variable part that
    depends on the number of attendees. Given that the number of attendees is a function
    of the ticket price, a function for computing the cost of a show must also consume
    the ticket price so that it can reuse the attendees function:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (costÂ ticket-price)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 180Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 0.04Â (attendeesÂ ticket-price))))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: 'Finally, profit is the difference between revenue and costs for some given
    ticket price:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (profitÂ ticket-price)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â (revenueÂ ticket-price)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â (costÂ ticket-price))) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: The BSL definition of profit directly follows the suggestion of the informal
    problem description.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: These four functions are all there is to the computation of the profit, and
    we can now use the profit function to determine a good ticket price.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 27\. Our solution to the sample problem contains several constants
    in the middle of functions. As [One Program, Many Definitions](part_prologue.html#%28part._pro-many-def%29)
    already points out, it is best to give names to such constants so that future
    readers understand where these numbers come from. Collect all definitions in DrRacketâ€™s
    definitions area and change them so that all magic numbers are refactored into
    constant definitions.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 28\. Determine the potential profit for these ticket prices: $1, $2,
    $3, $4, and $5\. Which price maximizes the profit of the movie theater? Determine
    the best ticket price to a dime.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is an alternative version of the same program, given as a single function
    definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (profitÂ price)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 120
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 15Â 0.1)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â 5.0Â price)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â price) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 180
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 0.04
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â 120
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â 15Â 0.1)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â 5.0Â price)))))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Enter this definition into DrRacket and ensure that it produces the same results
    as the original version for $1, $2, $3, $4, and $5\. A single look should suffice
    to show how much more difficult it is to comprehend this one function compared
    to the above four.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 29\. After studying the costs of a show, the owner discovered several
    ways of lowering the cost. As a result of these improvements, there is no longer
    a fixed cost; a variable cost of $1.50 per attendee remains.
  prefs: []
  type: TYPE_NORMAL
- en: Modify both programs to reflect this change. When the programs are modified,
    test them again with ticket prices of $3, $4, and $5 and compare the results.
  prefs: []
  type: TYPE_NORMAL
- en: 2.4Global Constants[ðŸ”—](#(part._sec~3aglobal) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'As the Prologue already says, functions such as profit benefit from the use
    of global constants. Every programming language allows programmers to define constants.
    In BSL, such a definition has the following shape:'
  prefs: []
  type: TYPE_NORMAL
- en: write â€œ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)
    â€,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: write down the name,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: followed by a space and an expression, and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: write down â€œ)â€.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The name of a constant is a global variable while the definition is called
    a constant definition. We tend to call the expression in a constant definition
    the right-hand side of the definition.Constant definitions introduce names for
    all forms of data: numbers, images, strings, and so on. Here are some simple examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â the current price of a movie ticket: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â CURRENT-PRICEÂ 5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â useful to compute the area of a disk: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ALMOST-PIÂ 3.14)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â a blank line: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â NLÂ "\n")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â an empty scene: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MTÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 100Â 100))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The first two are numeric constants, the last two are a string and an image.
    By convention, we use uppercase letters for global constants because it ensures
    that no matter how large the program is, the readers of our programs can easily
    distinguish such variables from others.All functions in a program may refer to
    these global variables. A reference to a variable is just like using the corresponding
    constants. The advantage of using variable names instead of constants is that
    a single edit of a constant definition affects all uses. For example, we may wish
    to add digits to ALMOST-PI or enlarge an empty scene:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ALMOST-PIÂ 3.14159)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â an empty scene: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MTÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 200Â 800))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Most of our sample definitions employ literal constants on the right-hand side,
    but the last one uses an expression. And indeed, a programmer can use arbitrary
    expressions to compute constants. Suppose a program needs to deal with an image
    of some size and its center:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 100)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ 200)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MID-WIDTHÂ ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â WIDTHÂ 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MID-HEIGHTÂ ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â HEIGHTÂ 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: It can use two definitions with literal constants on the right-hand side and
    two computed constants, that is, variables whose values are not just literal constants
    but the results of computing the value of an expression.
  prefs: []
  type: TYPE_NORMAL
- en: 'Again, we state an imperative slogan:'
  prefs: []
  type: TYPE_NORMAL
- en: For every constant mentioned in a problem statement, introduce one constant
    definition.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 30\. Define constants for the price optimization program at the movie
    theater so that the price sensitivity of attendance (15 people for every 10 cents)
    becomes a computed constant.
  prefs: []
  type: TYPE_NORMAL
- en: 2.5Programs[ðŸ”—](#(part._sec~3aprogs) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'You are ready to create simple programs. From a coding perspective, a program
    is just a bunch of function and constant definitions. Usually one function is
    singled out as the â€œmainâ€ function, and this main function tends to compose others.
    From the perspective of launching a program, however, there are two distinct kinds:'
  prefs: []
  type: TYPE_NORMAL
- en: a batch program consumes all of its inputs at once and computes its result.
    Its main function is the composition of auxiliary functions, which may refer to
    additional auxiliary functions, and so on. When we launch a batch program, the
    operating system calls the main function on its inputs and waits for the programâ€™s
    output.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: an interactive program consumes some of its inputs, computes, produces some
    output, consumes more input, and so on. When an input shows up, we speak of an
    event, and we create interactive programs as event-driven programs. The main function
    of such an event-driven program uses an expression to describe which functions
    to call for which kinds of events. These functions are called event handlers.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: When we launch an interactive program, the main function informs the operating
    system of this description. As soon as input events happen, the operating system
    calls the matching event handler. Similarly, the operating system knows from the
    description when and how to present the results of these function calls as output.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: This book focuses mostly on programs that interact via graphical user interfaces
    (GUI); there are other kinds of interactive programs, and you will get to know
    those as you continue to study computer science.
  prefs: []
  type: TYPE_NORMAL
- en: Batch Programs As mentioned, a batch program consumes all of its inputs at once
    and computes the result from these inputs. Its main function expects some arguments,
    hands them to auxiliary functions, receives results from those, and composes these
    results into its own final answer.
  prefs: []
  type: TYPE_NORMAL
- en: Once programs are created, we want to use them. In DrRacket, we launch batch
    programs in the interactions area so that we can watch the program at work.
  prefs: []
  type: TYPE_NORMAL
- en: Programs are even more useful if they can retrieve the input from some file
    and deliver the output to some other file. Indeed, the name â€œbatch programâ€ dates
    to the early days of computing when a program read a file (or several files) from
    a batch of punch cards and placed the result in some other file(s), also a batch
    of cards. Conceptually, a batch program reads the input file(s) at once and also
    produces the result file(s) all at once.
  prefs: []
  type: TYPE_NORMAL
- en: Add ([require](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._require%29%29)  2htdp/batch-io)
    to the definitions area, or select Add Teachpack from the Language menu and choose
    batch-io from the Preinstalled HtDP/2e Teachpack menu.
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'We create such file-based batch programs with the 2htdp/batch-io teachpack,
    which adds two functions to our vocabulary (among others):'
  prefs: []
  type: TYPE_NORMAL
- en: '[read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29),
    which reads the content of an entire file as a string, and'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29),
    which creates a file from a given string.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'These functionsBefore you evaluate these expressions, save the definitions
    area in a file. write strings to files and read strings from them:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)Â "sample.dat"Â "212")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "sample.dat" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â "sample.dat")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "212" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: After the first interaction the file named "sample.dat" contains
  prefs: []
  type: TYPE_NORMAL
- en: '| Â Â Â Â Â Â Â Â 212 |'
  prefs: []
  type: TYPE_TB
- en: The result of [write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)
    is an acknowledgment that it has placed the string in the file. If the file already
    exists, it replaces its content with the given string; otherwise, it creates a
    file and makes the given string its content. The second interaction, ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)  "sample.dat"),
    produces "212" because it turns the content of "sample.dat" into a [String](#%28tech._string%29).For
    pragmatic reasons, [write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)
    also accepts 'stdout, a special kind of token, as the first argument. It then
    displays the resulting file content in the current interactions area, for example:The
    names 'stdout and 'stdin are short for standard output device and standard input
    device, respectively.
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)Â ''stdoutÂ "212\n")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 212 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ''stdout |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: By analogy, [read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)
    accepts 'stdin in lieu of a file name and then reads input from the current interactions
    area.
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s illustrate the creation of a batch program with a simple example. Suppose
    we wish to create a program that converts a temperature measured on a Fahrenheit
    thermometer into a Celsius temperature. Donâ€™t worry, this question isnâ€™t a test
    about your physics knowledge; here is the conversion formula:This book is not
    about memorizing facts, but we do expect you to know where to find them. Do you
    know where to find out how temperatures are converted?
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/aea4323ca885d7ef328eede960605947.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: Naturally, in this formula f is the Fahrenheit temperature and C is the Celsius
    temperature. While this formula might be good enough for a pre-algebra textbook,
    a mathematician or a programmer would write C(f) on the left side of the equation
    to remind readers that f is a given value and C is computed from f.
  prefs: []
  type: TYPE_NORMAL
- en: 'Translating this formula into BSL is straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (CÂ f)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 5/9Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â fÂ 32)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Recall that 5/9 is a number, a rational fraction to be precise, and that C
    depends on the given f, which is what the function notation expresses.Launching
    this batch program in the interactions area works as usual:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (CÂ 32) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (CÂ 212) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 100 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (CÂ -40) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| -40 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'But suppose we wish to use this function as part of a program that reads the
    Fahrenheit temperature from a file, converts this number into a Celsius temperature,
    and then creates another file that contains the result.Once we have the conversion
    formula in BSL, creating the main function means composing C with existing primitive
    functions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (convertÂ inÂ out)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)Â out
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([number->string](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number-~3estring%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â (C |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ([string->number](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3enumber%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â in))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â "\n"))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'We call the main function convert. It consumes two file names: in for the file
    where the Fahrenheit temperature is found and out for where we want the Celsius
    result. A composition of five functions computes convertâ€™s result. Letâ€™s step
    through convertâ€™s body carefully:'
  prefs: []
  type: TYPE_NORMAL
- en: ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)  in)
    retrieves the content of the named file as a string;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[string->number](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3enumber%29%29)
    turns this string into a number;'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: C interprets the number as a Fahrenheit temperature and converts it into a Celsius
    temperature;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[number->string](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number-~3estring%29%29)
    consumes this Celsius temperature and turns it into a string; and'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)  out  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    places this string into the file named out.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This long list of steps might look overwhelming, and it doesnâ€™t even include
    the [string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)
    part. Stop! Explain
  prefs: []
  type: TYPE_NORMAL
- en: ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â "\n")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In contrast, the average function composition in a pre-algebra course involves
    two functions, possibly three. Keep in mind, though, that programs accomplish
    a real-world purpose while exercises in algebra merely illustrate the idea of
    function composition.
  prefs: []
  type: TYPE_NORMAL
- en: At this point, we can experiment with convert. To start with, we use [write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)
    to create an input file for convert:You can also create "sample.dat" with a file
    editor.
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)Â "sample.dat"Â "212")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "sample.dat" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (convertÂ "sample.dat"Â ''stdout) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 100 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ''stdout |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (convertÂ "sample.dat"Â "out.dat") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "out.dat" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â "out.dat")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "100" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: For the first interaction, we use 'stdout so that we can view what convert outputs
    in DrRacketâ€™s interactions area. For the second one, convert is given the name
    "out.dat". As expected, the call to convert returns this string; from the description
    of [write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)
    we also know that it deposited a Fahrenheit temperature in the file. Here we read
    the content of this file with [read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29),
    but you could also view it with a text editor.
  prefs: []
  type: TYPE_NORMAL
- en: In addition to running the batch program, it is also instructive to step through
    the computation. Make sure that the file "sample.dat" exists and contains just
    a number, then click the STEP button in DrRacket. Doing so opens another window
    in which you can peruse the computational process that the call to the main function
    of a batch program triggers. You will see that the process follows the above outline.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 31\. Recall the letter program from [Composing Functions](#%28part._sec~3acomposing%29).
    Here is how to launch the program and have it write its output to the interactions
    area:'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â ''stdout &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â (letterÂ "Matthew"Â "Fisler"Â "Felleisen")) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Dear Matthew, &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124;  &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; We have discovered that all people with the &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; last name Fisler have won our lottery. So, &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Matthew, hurry and pick up your prize. &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124;  &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Sincerely, &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124;  &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Felleisen &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ''stdout |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Of course, programs are useful because you can launch them for many different
    inputs. Run letter on three inputs of your choice.Here is a letter-writing batch
    program that reads names from three files and writes a letter to one:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ in-fstÂ in-lstÂ in-signatureÂ out)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([write-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._write-file%29%29)Â out
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (letterÂ ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â in-fst)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â in-lst)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([read-file](http://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-file%29%29)Â in-signature))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The function consumes four strings: the first three are the names of input
    files and the last one serves as an output file. It uses the first three to read
    one string each from the three named files, hands these strings to letter, and
    eventually writes the result of this function call into the file named by out,
    the fourth argument to main.'
  prefs: []
  type: TYPE_NORMAL
- en: Create appropriate files, launch main, and check whether it delivers the expected
    letter in a given file.
  prefs: []
  type: TYPE_NORMAL
- en: Interactive Programs Batch programs are a staple of business uses of computers,
    but the programs people encounter now are interactive. In this day and age, people
    mostly interact with desktop applications via a keyboard and a mouse. Furthermore,
    interactive programs can also react to computer-generated events, for example,
    clock ticks or the arrival of a message from some other computer.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 32\. Most people no longer use desktop computers just to run applications
    but also employ cell phones, tablets, and their carsâ€™ information control screen.
    Soon people will use wearable computers in the form of intelligent glasses, clothes,
    and sports gear. In the somewhat more distant future, people may come with built-in
    bio computers that directly interact with body functions. Think of ten different
    forms of events that software applications on such computers will have to deal
    with.
  prefs: []
  type: TYPE_NORMAL
- en: The purpose of this section is to introduce the mechanics of writing interactive
    BSL programs. Because many of the project-style examples in this book are interactive
    programs, we introduce the ideas slowly and carefully. You may wish to return
    to this section when you tackle some of the interactive programming projects;
    a second or third reading may clarify some of the advanced aspects of the mechanics.
  prefs: []
  type: TYPE_NORMAL
- en: By itself, a raw computer is a useless piece of physical equipment. It is called
    hardware because you can touch it. This equipment becomes useful once you install
    software, that is, a suite of programs. Usually the first piece of software to
    be installed on a computer is an operating system. It has the task of managing
    the computer for you, including connected devices such as the monitor, the keyboard,
    the mouse, the speakers, and so on. The way it works is that when a user presses
    a key on the keyboard, the operating system runs a function that processes keystrokes.
    We say that the keystroke is a key event, and the function is an event handler.
    In the same vein, the operating system runs an event handler for clock ticks,
    for mouse actions, and so on. Conversely, after an event handler is done with
    its work, the operating system may have to change the image on the screen, ring
    a bell, print a document, or perform a similar action. To accomplish these tasks,
    it also runs functions that translate the operating systemâ€™s data into sounds,
    images, actions on the printer, and so on.
  prefs: []
  type: TYPE_NORMAL
- en: Naturally, different programs have different needs. One program may interpret
    keystrokes as signals to control a nuclear reactor; another passes them to a word
    processor. To make a general-purpose computer work on these radically different
    tasks, different programs install different event handlers. That is, a rocket-launching
    program uses one kind of function to deal with clock ticks while an ovenâ€™s software
    uses a different kind.
  prefs: []
  type: TYPE_NORMAL
- en: Designing an interactive program requires a way to designate some function as
    the one that takes care of keyboard events, another function for dealing with
    clock ticks, a third one for presenting some data as an image, and so forth. It
    is the task of an interactive programâ€™s main function to communicate these designations
    to the operating system, that is, the software platform on which the program is
    launched.
  prefs: []
  type: TYPE_NORMAL
- en: DrRacket is a small operating system, and BSL is one of its programming languages.
    The latter comes with the 2htdp/universe teachpack, which provides [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29),
    a mechanism for telling the operating system which function deals with which event.
    In addition, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    keeps track of the state of the program. To this end, it comes with one required
    sub-expression, whose value becomes the initial state of the program. Otherwise
    [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    consists of one required clause and many optional clauses. The required [to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)
    clause tells DrRacket how to render the state of the program, including the initial
    one. Each of the other, optional clauses tells the operating system that a certain
    function takes care of a certain event. Taking care of an event in BSL means that
    the function consumes the state of the program and a description of the event,
    and that it produces the next state of the program. We therefore speak of the
    current state of the program.
  prefs: []
  type: TYPE_NORMAL
- en: 'Terminology In a sense, a [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression describes how a program connects with a small segment of the world.
    This world might be a game that the programâ€™s users play, an animation that the
    user watches, or a text editor that the user employs to manipulate some notes.
    Programming language researchers therefore often say that [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    is a description of a small world: its initial state, how states are transformed,
    how states are rendered, and how [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    may determine other attributes of the current state. In this spirit, we also speak
    of the state of the world and even call [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    programs world programs. End'
  prefs: []
  type: TYPE_NORMAL
- en: 'Letâ€™s study this idea step-by-step, starting with this definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (number->squareÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([square](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29)Â sÂ "solid"Â "red"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The function consumes a positive number and produces a solid red square of
    that size. After clicking RUN, experiment with the function, like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (number->squareÂ 5) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/a04d71c2c1129c5495f80c3726ad2bed.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (number->squareÂ 10) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/f0eb4bf39f91871e2e1b033c189e565f.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (number->squareÂ 20) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/7320d5a8a6e529bd17ac208f4523381e.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'It behaves like a batch program, consuming a number and producing an image,
    which DrRacket renders for you.Now try the following [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression in the interactions area:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â 100Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â number->square])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'A separate window appears, and it displays a ![image](../Images/e5703f146c381c71c4c52d055c6681a9.png)
    red square. In addition, the DrRacket interactions area does not display another
    prompt; it is as if the program keeps running, and this is indeed the case. To
    stop the program, click on DrRacketâ€™s STOP button or the windowâ€™s CLOSE button:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â 100Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â number->square])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 100 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'When DrRacket stops the evaluation of a [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression, it returns the current state, which in this case is just the initial
    state: 100.Here is a more interesting [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â 100
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â number->square]
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â [sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)]
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)Â [zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)])
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression adds two optional clauses to the previous one: the [on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)
    clause tells DrRacket how to deal with clock ticks and the [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    clause says when to stop the program. We read it as follows, starting with 100
    as the initial state:'
  prefs: []
  type: TYPE_NORMAL
- en: every time the clock ticks, subtract 1 from the current state;
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: then check whether [zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)
    is true of the new state and if so, stop; and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: every time an event handler returns a value, use number->square to render it
    as an image.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now hit the â€œreturnâ€ key and observe what happens. Eventually the evaluation
    of the expressions terminates and DrRacket displays 0.The [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression keeps track of the current state. Initially this state is 100. Every
    time the clock ticks, it calls the clock-tick handler and gets a new state. Hence,
    the state of [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    changes as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: 100, 99, 98, ..., 2, 1, 0
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'When the stateâ€™s value becomes 0, the evaluation is done. For every other stateâ€”<wbr>from
    100 to 1â€”<wbr>[big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    translates the state into an image, using number->square as the [to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)
    clause tells it to. Hence, the window displays a red square that shrinks from
    ![image](../Images/7a3c55df7d2b484b68e39ec283e7a9e0.png) pixels to ![image](../Images/57cb130b8e8a7984c8a3a169f6ba3225.png)
    pixel over 100 clock ticks.Letâ€™s add a clause for dealing with key events. First,
    we need a function that consumes the current state and a string that describes
    the key event and then returns a new state:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (resetÂ sÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â 100) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'This function throws away its arguments and returns 100, which is the initial
    state of the [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression we wish to modify. Second, we add an [on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)
    clause to the [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â 100
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â number->square]
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â [sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)]
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)Â [zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)]
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â reset])
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Stop! Explain what happens when you hit â€œreturnâ€, count to 10, and finally press
    "a".
  prefs: []
  type: TYPE_NORMAL
- en: What you will see is that the red square shrinks at the rate of one pixel per
    clock tick. As soon as you press the "a" key, though, the red square reinflates
    to full size because reset is called on the current length of the square and "a"
    and returns 100. This number becomes [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)â€™s
    new state and number->square renders it as a full-sized red square.
  prefs: []
  type: TYPE_NORMAL
- en: 'In order to understand the evaluation of [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expressions in general, letâ€™s look at a schematic version:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â cw0
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â tock]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â ke-h]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[on-mouse](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-mouse%29%29)Â me-h]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)Â end?]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: This [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression specifies three event handlersâ€”<wbr>tock, ke-h, and me-hâ€”<wbr>and a
    [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    clause.
  prefs: []
  type: TYPE_NORMAL
- en: The evaluation of this [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression starts with cw0, which is usually an expression. DrRacket, our operating
    system, installs the value of cw0 as the current state. It uses render to translate
    the current state into an image, which is then displayed in a separate window.
    Indeed, render is the only means for a [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression to present data to the world.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is how events are processed:'
  prefs: []
  type: TYPE_NORMAL
- en: Every time the clock ticks, DrRacket applies tock to [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)â€™s
    current state and receives a value in response; [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    treats this return value as the next current state.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Every time a key is pressed, DrRacket applies ke-h to [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)â€™s
    current state and a string that represents the key; for example, pressing the
    â€œaâ€ key is represented with "a" and the left arrow key with "left". When ke-h
    returns a value, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    treats it as the next current state.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Every time a mouse enters the window, leaves it, moves, or is clicked, DrRacket
    applies me-h to [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)â€™s
    current state, the eventâ€™s x- and y-coordinates, and a string that represents
    the kind of mouse event that happened; for example, clicking a mouseâ€™s button
    is represented with "button-down". When me-h returns a value, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    treats it as the next current state.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'All events are processed in order; if two events seem to happen at the same
    time, DrRacket acts as a tie-breaker and arranges them in some order.After an
    event is processed, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    uses both end? and render to check the current state:'
  prefs: []
  type: TYPE_NORMAL
- en: '(end?  cw) produces a Boolean value. If it is ##true, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    stops the computation immediately. Otherwise it proceeds.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (render  cw) is expected to produce an image and [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    displays this image in a separate window.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| current state |  | cw0 |  | cw1 |  | ... |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| event |  | e0 |  | e1 |  | ... |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| on clock tick |  | (tock  cw0) |  | (tock  cw1) |  | ... |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| on keystroke |  | (ke-h  cw0 e0) |  | (ke-h  cw1 e1) |  | ... |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| on mouse event |  | (me-h  cw0 e0 [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |  | (me-h  cw1 e1 [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |  | ... |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| its image |  | (render  cw0) |  | (render  cw1) |  | ... |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 13: How [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    works'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The table in [figureÂ 13](#%28counter._%28figure._world-process%29%29) concisely
    summarizes this process. In the first row, it lists names for the current states.
    The second row enumerates names for the events that DrRacket encounters: e0, e1,
    and so on. Each ei might be a clock tick, a key press, or a mouse event. The next
    three rows specify the result of dealing with the event:'
  prefs: []
  type: TYPE_NORMAL
- en: If e0 is a clock tick, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    evaluates (tock  cw0) to produce cw1.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If e0 is a key event, (ke-h  cw0 e0) is evaluated and yields cw1. The handler
    must be applied to the event itself because, in general, programs are going to
    react to each key differently.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If e0 is a mouse event, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    runs (me-h  cw0 e0 [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    to get cw1. The call is a sketch because a mouse event e0 is really associated
    with several pieces of dataâ€”<wbr>its nature and its coordinatesâ€”<wbr>and we just
    wish to indicate that much.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Finally, render turns the current state into an image, which is indicated by
    the last row. DrRacket displays these images in the separate window.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The column below cw1 shows how cw2 is generated, depending on what kind of
    event e1 takes place.Letâ€™s interpret this table with the specific sequence of
    events: the user presses the â€œaâ€ key, then the clock ticks, and finally the user
    clicks the mouse to trigger a â€œbutton downâ€ event at position (90,100). Then,
    in Racket notation,'
  prefs: []
  type: TYPE_NORMAL
- en: cw1 is the result of (ke-h  cw0  "a");
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: cw2 is the result of (tock  cw1); and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: cw3 is the result of (me-h  cw2  90  100  "button-down").
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'We can actually express these three steps as a sequence of three definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â cw1Â (ke-hÂ cw0Â "a"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â cw2Â (tockÂ cw1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â cw3Â (me-hÂ cw2Â 90Â 100Â "button-down"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Stop! How does [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    display each of these three states?Now letâ€™s consider a sequence of three clock
    ticks. In that case,
  prefs: []
  type: TYPE_NORMAL
- en: cw1 is the result of (tock  cw0);
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: cw2 is the result of (tock  cw1); and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: cw3 is the result of (tock  cw2).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Or, reformulated in BSL:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â cw1Â (tockÂ cw0))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â cw2Â (tockÂ cw1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â cw3Â (tockÂ cw2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Indeed, we can also determine cw3 via a single expression:'
  prefs: []
  type: TYPE_NORMAL
- en: (tockÂ (tockÂ (tockÂ cw0)))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This determines the state that [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    computes after three clock ticks. Stop! Reformulate the first sequence of events
    as an expression.
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â BACKGROUNDÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 100Â 100))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â DOTÂ ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 3Â "solid"Â "red"))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ y)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â y
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â [sub1](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sub1%29%29)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)Â [zero?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._zero~3f%29%29)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â place-dot-at]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â stop]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (place-dot-atÂ y)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â DOTÂ 50Â yÂ BACKGROUND))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (stopÂ yÂ ke)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â 0) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 14: A first interactive program'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In short, the sequence of events determines in which order [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    conceptually traverses the above table of possible states to arrive at the current
    state for each time slot. Of course, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    does not touch the current state; it merely safeguards it and passes it to event
    handlers and other functions when needed.
  prefs: []
  type: TYPE_NORMAL
- en: 'From here, it is straightforward to define a first interactive program. See
    [figureÂ 14](#%28counter._%28figure._fig~3ainteractive%29%29). The program consists
    of two constant definitions followed by three function definitions: main, which
    launches a [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    interactive program; place-dot-at, which translates the current state into an
    image; and stop, which throws away its inputs and produces 0.'
  prefs: []
  type: TYPE_NORMAL
- en: 'After clicking RUN, we can ask DrRacket to evaluate applications of these handler
    functions. This is one way to confirm their workings:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (place-dot-atÂ 89) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ![image](../Images/cc6ed263a694fe050583a3cc42bc994f.png) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (stopÂ 89Â "q") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Stop! Try now to understand how main reacts when you press a key.One way to
    find out whether your conjecture is correct is to launch the main function on
    some reasonable number:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (mainÂ 90) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '|  |'
  prefs: []
  type: TYPE_TB
- en: '| Relax. |'
  prefs: []
  type: TYPE_TB
- en: '|  |'
  prefs: []
  type: TYPE_TB
- en: By now, you may feel that these first two chapters are overwhelming. They introduce
    many new concepts, including a new language, its vocabulary, its meaning, its
    idioms, a tool for writing down texts in this vocabulary, and a way of running
    these programs. Confronted with this plethora of ideas, you may wonder how one
    creates a program when presented with a problem statement. To answer this central
    question, the next chapter takes a step back and explicitly addresses the systematic
    design of programs. So take a breather and continue when ready.
  prefs: []
  type: TYPE_NORMAL
- en: 3How to Design Programs[ðŸ”—](#(part._ch~3ahtdp) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The first few chapters of this book show that learning to program requires some
    mastery of many concepts. On the one hand, programming needs a language, a notation
    for communicating what we wish to compute. The languages for formulating programs
    are artificial constructions, though acquiring a programming language shares some
    elements with acquiring a natural language. Both come with vocabulary, grammar,
    and an understanding of what â€œphrasesâ€ mean.
  prefs: []
  type: TYPE_NORMAL
- en: On the other hand, it is critical to learn how to get from a problem statement
    to a program. We need to determine what is relevant in the problem statement and
    what can be ignored. We need to tease out what the program consumes, what it produces,
    and how it relates inputs to outputs. We have to know, or find out, whether the
    chosen language and its teachpacks provide certain basic operations for the data
    that our program is to process. If not, we might have to develop auxiliary functions
    that implement these operations. Finally, once we have a program, we must check
    whether it actually performs the intended computation. And this might reveal all
    kinds of errors, which we need to be able to understand and fix.
  prefs: []
  type: TYPE_NORMAL
- en: All this sounds rather complex, and you might wonder why we donâ€™t just muddle
    our way through, experimenting here and there, leaving well enough alone when
    the results look decent. This approach to programming, often dubbed â€œgarage programming,â€
    is common and succeeds on many occasions; sometimes it is the launching pad for
    a start-up company. Nevertheless, the start-up cannot sell the results of the
    â€œgarage effortâ€ because only the original programmers and their friends can use
    them.
  prefs: []
  type: TYPE_NORMAL
- en: A good program comes with a short write-up that explains what it does, what
    inputs it expects, and what it produces. Ideally, it also comes with some assurance
    that it actually works. In the best circumstances, the programâ€™s connection to
    the problem statement is evident so that a small change to the problem statement
    is easy to translate into a small change to the program. Software engineers call
    this a â€œprogramming product.â€
  prefs: []
  type: TYPE_NORMAL
- en: All this extra work is necessary because programmers donâ€™t create programs for
    themselves. Programmers write programs for other programmers to read, and on occasion,
    people run these programs to get work done.The word â€œotherâ€ also includes older
    versions of the programmer who usually cannot recall all the thinking that the
    younger version put into the production of the program. Most programs are large,
    complex collections of collaborating functions, and nobody can write all these
    functions in a day. Programmers join projects, write code, leave projects; others
    take over their programs and work on them. Another difficulty is that the programmerâ€™s
    clients tend to change their mind about what problem they really want solved.
    They usually have it almost right, but more often than not, they get some details
    wrong. Worse, complex logical constructions such as programs almost always suffer
    from human errors; in short, programmers make mistakes. Eventually someone discovers
    these errors and programmers must fix them. They need to reread the programs from
    a month ago, a year ago, or twenty years ago and change them.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 33\. Research the â€œyear 2000â€ problem.
  prefs: []
  type: TYPE_NORMAL
- en: Here we present a design recipe that integrates a step-by-step process with
    a way of organizing programs around problem data. For the readers who donâ€™t like
    to stare at blank screens for a long time, this design recipe offers a way to
    make progress in a systematic manner. For those of you who teach others to design
    programs, the recipe is a device for diagnosing a noviceâ€™s difficulties. For others,
    our recipe might be something that they can apply to other areasâ€”<wbr>say, medicine,
    journalism, or engineering. For those who wish to become real programmers, the
    design recipe also offers a way to understand and work on existing programsâ€”<wbr>though
    not all programmers use a method like this design recipe to come up with programs.
    The rest of this chapter is dedicated to the first baby steps into the world of
    the design recipe; the following chapters and parts refine and expand the recipe
    in one way or another.
  prefs: []
  type: TYPE_NORMAL
- en: 3.1Designing Functions[ðŸ”—](#(part._sec~3adesign-func) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Information and Data The purpose of a program is to describe a computational
    process that consumes some information and produces new information. In this sense,
    a program is like the instructions a mathematics teacher gives to grade school
    students. Unlike a student, however, a program works with more than numbers: it
    calculates with navigation information, looks up a personâ€™s address, turns on
    switches, or inspects the state of a video game. All this information comes from
    a part of the real worldâ€”<wbr>often called the programâ€™s domainâ€”<wbr>and the results
    of a programâ€™s computation represent more information in this domain.'
  prefs: []
  type: TYPE_NORMAL
- en: Information plays a central role in our description. Think of information as
    facts about the programâ€™s domain. For a program that deals with a furniture catalog,
    a â€œtable with five legsâ€ or a â€œsquare table of two by two metersâ€ are pieces of
    information. A game program deals with a different kind of domain, where â€œfiveâ€
    might refer to the number of pixels per clock tick that some object travels on
    its way from one part of the canvas to another. Or, a payroll program is likely
    to deal with â€œfive deductions.â€
  prefs: []
  type: TYPE_NORMAL
- en: For a program to process information, it must turn it into some form of data
    in the programming language; then it processes the data; and once it is finished,
    it turns the resulting data into information again. An interactive program may
    even intermingle these steps, acquiring more information from the world as needed
    and delivering information in between.
  prefs: []
  type: TYPE_NORMAL
- en: We use BSL and DrRacket so that you do not have to worry about the translation
    of information into data. In DrRacketâ€™s BSL you can apply a function directly
    to data and observe what it produces. As a result, we avoid the serious chicken-and-egg
    problem of writing functions that convert information into data and vice versa.
    For simple kinds of information, designing such program pieces is trivial; for
    anything other than simple information, you need to know about parsing, for example,
    and that immediately requires a lot of expertise in program design.
  prefs: []
  type: TYPE_NORMAL
- en: Software engineers use the slogan model-view-controller (MVC) for the way BSL
    and DrRacket separate data processing from parsing information into data and turning
    data into information. Indeed, it is now accepted wisdom that well-engineered
    software systems enforce this separation, even though most introductory books
    still commingle them. Thus, working with BSL and DrRacket allows you to focus
    on the design of the core of programs, and, when you have enough experience with
    that, you can learn to design the information-data translation parts.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here we use two preinstalled teachpacks to demonstrate the separation of data
    and information: 2htdp/batch-io and 2htdp/universe. Starting with this chapter,
    we develop design recipes for batch and interactive programs to give you an idea
    of how complete programs are designed. Do keep in mind that the teachpacks of
    full-fledged programming languages offer many more contexts for complete programs,
    and that you will need to adapt the design recipes appropriately.'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/f3316d1a6608480b3460675ba4545e8b.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 15: From information to data, and back'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Given the central role of information and data, program design must start with
    the connection between them. Specifically, we, the programmers, must decide how
    to use our chosen programming language to represent the relevant pieces of information
    as data and how we should interpret data as information. [FigureÂ 15](#%28counter._%28figure._fig~3adata-info%29%29)
    explains this idea with an abstract diagram.
  prefs: []
  type: TYPE_NORMAL
- en: 'To make this idea concrete, letâ€™s work through some examples. Suppose you are
    designing a program that consumes and produces information in the form of numbers.
    While choosing a representation is easy, an interpretation requires explaining
    what a number such as 42 denotes in the domain:'
  prefs: []
  type: TYPE_NORMAL
- en: 42 may refer to the number of pixels from the top margin in the domain of images;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 42 may denote the number of pixels per clock tick that a simulation or game
    object moves;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 42 may mean a temperature, on the Fahrenheit, Celsius, or Kelvin scale for the
    domain of physics;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 42 may specify the size of some table if the domain of the program is a furniture
    catalog; or
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 42 could just count the number of characters in a string.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The key is to know how to go from numbers as information to numbers as data
    and vice versa.
  prefs: []
  type: TYPE_NORMAL
- en: Since this knowledge is so important for everyone who reads the program, we
    often write it down in the form of comments, which we call data definitions. A
    data definition serves two purposes. First, it names a collection of dataâ€”<wbr>a
    classâ€”<wbr>using a meaningful word. Second,Computing scientists use â€œclassâ€ to
    mean something like a â€œmathematical set.â€ it informs readers how to create elements
    of this class and how to decide whether some arbitrary piece of data belongs to
    the collection.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is a data definition for one of the above examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Temperature is a [Number](#%28tech._number%29). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents Celsius degrees |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The first line introduces the name of the data collection, [Temperature](#%28tech._temperature%29),
    and tells us that the class consists of all [Number](#%28tech._number%29)s. So,
    for example, if we ask whether 102 is a temperature, you can respond with â€œyesâ€
    because 102 is a number and all numbers are temperatures. Similarly, if we ask
    whether "cold" is a [Temperature](#%28tech._temperature%29), you will say â€œnoâ€
    because no string belongs to [Temperature](#%28tech._temperature%29). And, if
    we asked you to make up a sample [Temperature](#%28tech._temperature%29), you
    might come up with something like -400.
  prefs: []
  type: TYPE_NORMAL
- en: If you happen to know that the lowest possible temperature is approximately
    ![image](../Images/153d2d2ae1e63fd63305b563c188fe13.png) C, you may wonder whether
    it is possible to express this knowledge in a data definition. Since our data
    definitions are really just English descriptions of classes, you may indeed define
    the class of temperatures in a much more accurate manner than shown here. In this
    book, we use a stylized form of English for such data definitions, and the next
    chapter introduces the style for imposing constraints such as â€œlarger than -274.â€
  prefs: []
  type: TYPE_NORMAL
- en: 'So far, you have encountered the names of four classes of data: [Number](#%28tech._number%29),
    [String](#%28tech._string%29), [Image](#%28tech._image%29), and [Boolean](#%28tech._boolean%29).
    With that, formulating a new data definition means nothing more than introducing
    a new name for an existing form of data, say, â€œtemperatureâ€ for numbers. Even
    this limited knowledge, though, suffices to explain the outline of our design
    process.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The Design Process Once you understand how to represent input informationAt
    this point, you may wish to reread the section on [Systematic Program Design](part_preface.html#%28part._sec~3asystematic-design%29)
    in the Preface, especially [figureÂ 1](part_preface.html#%28counter._%28figure._fig~3athe-design-recipe%29%29).
    as data and to interpret output data as information, the design of an individual
    function proceeds according to a straightforward process:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Express how you wish to represent information as data. A one-line comment suffices:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ;Â We use numbers to represent centimeters.
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: Formulate data definitions, like the one for [Temperature](#%28tech._temperature%29),
    for the classes of data you consider relevant for the successful design of your
    program.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Write down a signature, a statement of purpose, and a function header.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A function signature is a comment that tells the readers of your design how
    many inputs your function consumes, from which classes they are drawn, and what
    kind of data it produces. Here are three examples for functions that respectively
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'consume one [String](#%28tech._string%29) and produce a [Number](#%28tech._number%29):'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: ;Â [String](#%28tech._string%29) -> [Number](#%28tech._number%29)
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'consume a [Temperature](#%28tech._temperature%29) and produce a [String](#%28tech._string%29):'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: ;Â [Temperature](#%28tech._temperature%29) -> [String](#%28tech._string%29)
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: As this signature points out, introducing a data definition as an alias for
    an existing form of data makes it easy to read the intention behind signatures.
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: Nevertheless, we recommend that you stay away from aliasing data definitions
    for now. A proliferation of such names can cause quite a lot of confusion. It
    takes practice to balance the need for new names and the readability of programs,
    and there are more important ideas to understand right now.
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: 'consume a [Number](#%28tech._number%29), a [String](#%28tech._string%29), and
    an [Image](#%28tech._image%29):'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: ;Â [Number](#%28tech._number%29)  [String](#%28tech._string%29)  [Image](#%28tech._image%29)
    -> [Image](#%28tech._image%29)
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: Stop! What does this function produce?
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: A purpose statement is a BSL comment that summarizes the purpose of the function
    in a single line. If you are ever in doubt about a purpose statement, write down
    the shortest possible answer to the question
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: what does the function compute?
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: Every reader of your program should understand what your functions compute without
    having to read the function itself.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'A multi-function program should also come with a purpose statement. Indeed,
    good programmers write two purpose statements: one for the reader who may have
    to modify the code and another one for the person who wishes to use the program
    but not read it.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Finally, a header is a simplistic function definition, also called a stub.
    Pick one variable name for each class of input in the signature; the body of the
    function can be any piece of data from the output class. These three function
    headers match the above three signatures:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)  (f  a-string)  0)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)  (g  n)  "a")
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)  (h  num  str  img)  ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)  100  100))
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Our parameter names reflect what kind of data the parameter represents. Sometimes,
    you may wish to use names that suggest the purpose of the parameter.When you formulate
    a purpose statement, it is often useful to employ the parameter names to clarify
    what is computed. For example,
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â [Number](#%28tech._number%29)  [String](#%28tech._string%29)  [Image](#%28tech._image%29)
    -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds s to img, |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â y pixels from the top and 10 from the left |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-imageÂ yÂ sÂ img)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 100Â 100))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: At this point, you can click the RUN button and experiment with the function.
    Of course, the result is always the same value, which makes these experiments
    quite boring.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Illustrate the signature and the purpose statement with some functional examples.
    To construct a functional example, pick one piece of data from each input class
    from the signature and determine what you expect back.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Suppose you are designing a function that computes the area of a square. Clearly
    this function consumes the length of the squareâ€™s side, and that is best represented
    with a (positive) number. Assuming you have done the first process step according
    to the recipe, you add the examples between the purpose statement and the header
    and get this:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â [Number](#%28tech._number%29) -> [Number](#%28tech._number%29) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the area of a square with side len |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given: 2, expect: 4 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given: 7, expect: 49 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (area-of-squareÂ len)Â 0)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: The next step is to take inventory, to understand what are the givens and what
    we need to compute.We owe the term â€œinventoryâ€ to Stephen Bloch. For the simple
    functions we are considering right now, we know that they are given data via parameters.
    While parameters are placeholders for values that we donâ€™t know yet, we do know
    that it is from this unknown data that the function must compute its result. To
    remind ourselves of this fact, we replace the functionâ€™s body with a template.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'For now, the template contains just the parameters, so that the preceding example
    looks like this:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (area-of-squareÂ len)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â lenÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: The dots remind you that this isnâ€™t a complete function, but a template, a suggestion
    for an organization.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The templates of this section look boring. As soon as we introduce new forms
    of data, templates become interesting.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: It is now time to code. In general, to code means to program, though often in
    the narrowest possible way, namely, to write executable expressions and function
    definitions.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To us, coding means to replace the body of the function with an expression
    that attempts to compute from the pieces in the template what the purpose statement
    promises. Here is the complete definition for area-of-square:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â [Number](#%28tech._number%29) -> [Number](#%28tech._number%29) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the area of a square with side len |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given: 2, expect: 4 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given: 7, expect: 49 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (area-of-squareÂ len)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([sqr](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqr%29%29)Â len))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Number](#%28tech._number%29)  [String](#%28tech._string%29)  [Image](#%28tech._image%29)
    -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds s to img, y pixels from top, 10 pixels to the left |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given: |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â Â 5 for y, |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â Â "hello" for s, and |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â Â ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)  100  100)
    for img |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â expected: |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)  ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)  "hello"  10  "red")  10  5  [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â Â where ... is ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)  100  100)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add-imageÂ yÂ sÂ img)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â sÂ 10Â "red")Â 10Â yÂ img))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 16: The completion of design step 5'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'To complete the add-image function takes a bit more work than that: see [figureÂ 16](#%28counter._%28figure._fig~3adesign1%29%29).
    In particular, the function needs to turn the given string s into an image, which
    is then placed into the given scene.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The last step of a proper design is to test the function on the examples that
    you worked out before. For now, testing works like this. Click the RUN button
    and enter function applications that match the examples in the interactions area:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| > (area-of-squareÂ 2) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| 4 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| > (area-of-squareÂ 7) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| 49 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: 'The results must match the output that you expect; you must inspect each result
    and make sure it is equal to what is written down in the example portion of the
    design. If the result doesnâ€™t match the expected output, consider the following
    three possibilities:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You miscalculated and determined the wrong expected output for some of the examples.
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Alternatively, the function definition computes the wrong result. When this
    is the case, you have a logical error in your program, also known as a bug.
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Both the examples and the function definition are wrong.
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: When you do encounter a mismatch between expected results and actual values,
    we recommend that you first reassure yourself that the expected results are correct.
    If so, assume that the mistake is in the function definition. Otherwise, fix the
    example and then run the tests again. If you are still encountering problems,
    you may have encountered the third, somewhat rare, situation.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '3.2Finger Exercises: Functions[ðŸ”—](#(part._sec~3afinger-design) "Link to here")'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The first few of the following exercises are almost copies of those in [Functions](#%28part._sec~3afuncs%29),
    though where the latter use the word â€œdefineâ€ the exercises below use the word
    â€œdesign.â€ What this difference means is that you should work through the design
    recipe to create these functions and your solutions should include all relevant
    pieces.
  prefs: []
  type: TYPE_NORMAL
- en: As the title of the section suggests, these exercises are practice exercises
    to help you internalize the process. Until the steps become second nature, never
    skip one because doing so leads to easily avoidable errors. There is plenty of
    room left in programming for complicated errors; we have no need to waste our
    time on silly ones.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 34\. Design the function string-first, which extracts the first character
    from a non-empty string. Donâ€™t worry about empty strings.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 35\. Design the function string-last, which extracts the last character
    from a non-empty string.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 36\. Design the function image-area, which counts the number of pixels
    in a given image.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 37\. Design the function string-rest, which produces a string like
    the given one with the first character removed.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 38\. Design the function string-remove-last, which produces a string
    like the given one with the last character removed.
  prefs: []
  type: TYPE_NORMAL
- en: 3.3Domain Knowledge[ðŸ”—](#(part._sec~3adomain) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'It is natural to wonder what knowledge it takes to code up the body of a function.
    A little bit of reflection tells you that this step demands an appropriate grasp
    of the domain of the program. Indeed, there are two forms of such domain knowledge:'
  prefs: []
  type: TYPE_NORMAL
- en: Knowledge from external domains, such as mathematics, music, biology, civil
    engineering, art, and so on. Because programmers cannot know all of the application
    domains of computing, they must be prepared to understand the language of a variety
    of application areas so that they can discuss problems with domain experts. Mathematics
    is at the intersection of many, but not all, domains. Hence, programmers must
    often pick up new languages as they work through problems with domain experts.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Knowledge about the teachpack functions in the chosen programming language.
    When your task is to translate a mathematical formula involving the tangent function,
    you need to know or guess that your chosen language comes with a function such
    as BSLâ€™s [tan](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._tan%29%29).
    When your task involves graphics, you will benefit from understanding the possibilities
    of the 2htdp/image teachpack.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Since you can never predict the area you will be working in, or which programming
    language you will have to use, it is imperative that you have a solid understanding
    of the full possibilities of whatever computer languages are around and suitable.
    Otherwise some domain expert with half-baked programming knowledge will take over
    your job.
  prefs: []
  type: TYPE_NORMAL
- en: You can recognize problems that demand domain knowledge from the data definitions
    that you work out. As long as the data definitions use classes that exist in the
    chosen programming language, the definition of the function body (and program)
    mostly relies on expertise in the domain. Later, when we introduce complex forms
    of data, the design of functions demands computer science knowledge.
  prefs: []
  type: TYPE_NORMAL
- en: 3.4From Functions to Programs[ðŸ”—](#(part._sec~3adesign) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Not all programs consist of a single function definition. Some require several
    functions; many also use constant definitions. No matter what, it is always important
    to design every function systematically, though global constants as well as auxiliary
    functions change the design process a bit.
  prefs: []
  type: TYPE_NORMAL
- en: When you have defined global constants, your functions may use them to compute
    results. To remind yourself of their existence, you may wish to add these constants
    to your templates; after all, they belong to the inventory of things that may
    contribute to the function definition.
  prefs: []
  type: TYPE_NORMAL
- en: Multi-function programs come about because interactive programs automatically
    need functions that handle key and mouse events, functions that render the state
    as music, and possibly more. Even batch programs may require several different
    functions because they perform several separate tasks. Sometimes the problem statement
    itself suggests these tasks; other times you will discover the need for auxiliary
    functions as you are in the middle of designing some function.
  prefs: []
  type: TYPE_NORMAL
- en: 'For these reasons, we recommend keeping around a list of needed functions or
    a wish list.We owe the term â€œwish listâ€ to John Stone. Each entry on a wish list
    should consist of three things: a meaningful name for the function, a signature,
    and a purpose statement. For the design of a batch program, put the main function
    on the wish list and start designing it. For the design of an interactive program,
    you can put the event handlers, the [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    function, and the scene-rendering function on the list. As long as the list isnâ€™t
    empty, pick a wish and design the function. If you discover during the design
    that you need another function, put it on the list. When the list is empty, you
    are done.'
  prefs: []
  type: TYPE_NORMAL
- en: 3.5On Testing[ðŸ”—](#(part._sec~3atesting) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Testing quickly becomes a labor-intensive chore. While it is easy to run small
    programs in the interactions area, doing so requires a lot of mechanical labor
    and intricate inspections. As programmers grow their systems, they wish to conduct
    many tests. Soon this labor becomes overwhelming, and programmers start to neglect
    it. At the same time, testing is the first tool for discovering and preventing
    basic flaws. Sloppy testing quickly leads to buggy functionsâ€”<wbr>that is, functions
    with hidden problemsâ€”<wbr>and buggy functions retard projects, often in multiple
    ways.
  prefs: []
  type: TYPE_NORMAL
- en: 'Hence, it is critical to mechanize tests instead of performing them manually.
    Like many programming languages, BSL includes a testing facility, and DrRacket
    is aware of this facility. To introduce this testing facility, we take a second
    look at the function that converts temperatures in Fahrenheit to Celsius temperatures
    from [Programs](#%28part._sec~3aprogs%29). Here is the definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](#%28tech._number%29) -> [Number](#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â converts Fahrenheit temperatures to Celsius |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given 32, expect 0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given 212, expect 100 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given -40, expect -40 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (f2cÂ f)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 5/9Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â fÂ 32)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Testing the functionâ€™s examples calls for three computations and three comparisons
    between two numbers each. You can formulate these tests and add them to the definitions
    area in DrRacket:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (f2cÂ -40)Â -40)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (f2cÂ 32)Â 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (f2cÂ 212)Â 100)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: When you now click the RUN button, you see a report from BSL that the program
    passed all three testsâ€”<wbr>and you have nothing else to do.In addition to getting
    tests to run automatically, the [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    forms show another advantage when tests fail. To see how this works, change one
    of the above tests so that the result is wrong, for example
  prefs: []
  type: TYPE_NORMAL
- en: ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (f2cÂ -40)Â 40)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'When you now click the RUN button, an additional window pops up. The windowâ€™s
    text explains that one of three tests failed. For the failed test, the window
    displays three pieces: the computed value, the result of the function call (-40);
    the expected value (40); and a hyperlink to the text of the failed test case.'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](#%28tech._number%29) -> [Number](#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â converts Fahrenheit temperatures to Celsius temperatures |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (f2cÂ -40)Â -40)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (f2cÂ 32)Â 0)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (f2cÂ 212)Â 100)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (f2cÂ f)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 5/9Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â fÂ 32)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 17: Testing in BSL'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: You can place [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    specifications above or below the function definitions that they test. When you
    click RUN, DrRacket collects all [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    specifications and evaluates them after all function definitions have been added
    to the â€œvocabularyâ€ of operations. [FigureÂ 17](#%28counter._%28figure._fig~3atesting%29%29)
    shows how to exploit this freedom to combine the example and test step. Instead
    of writing down the examples as comments, you can translate them directly into
    tests. When youâ€™re all done with the design of the function, clicking RUN performs
    the test. And if you ever change the function for some reason, the next click
    retests the function.
  prefs: []
  type: TYPE_NORMAL
- en: 'Last but not least, [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    also works for images. That is, you can test image-producing functions. Say you
    wish to design the function render, which places the image of a car, dubbed CAR,
    into a background scene, named BACKGROUND. For the design of this function, you
    may formulate the tests such as the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (renderÂ 50)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ![image](../Images/2ce08330179b531e7d4e3b0298bbcf8b.png)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (renderÂ 200)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ![image](../Images/3aed531e735aad47d8492c75311a27e8.png)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Alternatively, you could write them like this:For additional ways of formulating
    tests, see intermezzo 1.
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (renderÂ 50)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â CARÂ 50Â Y-CARÂ BACKGROUND))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (renderÂ 200)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â CARÂ 200Â Y-CARÂ BACKGROUND))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: This alternative approach helps you figure out how to express the function body
    and is therefore preferable. One way to develop such expressions is to experiment
    in the interactions area.
  prefs: []
  type: TYPE_NORMAL
- en: Because it is so useful to have DrRacket conduct the tests and not to check
    everything yourself manually, we immediately switch to this style of testing for
    the rest of the book. This form of testing is dubbed unit testing, and BSLâ€™s unit-testing
    framework is especially tuned for novice programmers. One day you will switch
    to some other programming language; one of your first tasks will be to figure
    out its unit-testing framework.
  prefs: []
  type: TYPE_NORMAL
- en: 3.6Designing World Programs[ðŸ”—](#(part._.D.K._sec~3adesign-world) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: While the previous chapter introduces the 2htdp/universe teachpack in an ad
    hoc way, this section demonstrates how the design recipe also helps you create
    world programs systematically. It starts with a brief summary of the 2htdp/universe
    teachpack based on data definitions and function signatures. Then it spells out
    the design recipe for world programs.
  prefs: []
  type: TYPE_NORMAL
- en: The teachpack expects that a programmer develops a data definition that represents
    the state of the world and a function render that knows how to create an image
    for every possible state of the world. Depending on the needs of the program,
    the programmer must then design functions that respond to clock ticks, keystrokes,
    and mouse events. Finally, an interactive program may need to stop when its current
    world belongs to a sub-class of states; end? recognizes these final states. [FigureÂ 18](#%28counter._.D.K._%28figure._fig~3aworld-signatures%29%29)
    spells out this idea in a schematic and simplified way.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â WorldState: data representing the current world (cw) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â WorldState -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â when needed, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    obtains the image of the current |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â state of the world by evaluating (render  cw) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (renderÂ cw)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â WorldState -> WorldState |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â for each tick of the clock, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    obtains the next |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â state of the world from (clock-tick-handler  cw) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (clock-tick-handlerÂ cw)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â WorldState  [String](#%28tech._string%29) -> WorldState |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â for each keystroke, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    obtains the next state |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â from (keystroke-handler  cw  ke); ke represents the key |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (keystroke-handlerÂ cwÂ ke)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â WorldState  [Number](#%28tech._number%29)  [Number](#%28tech._number%29)  [String](#%28tech._string%29)
    -> WorldState |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â for each mouse gesture, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    obtains the next state |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â from (mouse-event-handler  cw  x  y  me) where x and y are |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â the coordinates of the event and me is its description |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mouse-event-handlerÂ cwÂ xÂ yÂ me)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â WorldState -> Boolean |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â after each event, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    evaluates (end?  cw) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (end?Â cw)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 18: The wish list for designing world programs'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Assuming that you have a rudimentary understanding of the workings of [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29),
    you can focus on the truly important problem of designing world programs. Letâ€™s
    construct a concrete example for the following design recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a program that moves a car from left to right on the world
    canvas, three pixels per clock tick.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'For this problem statement, it is easy to imagine scenes for the domain:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/72462ff9b587b3104c8d3d7ba738af3b.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: '![image](../Images/2439280cff779c748f51c019e05056e2.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: '![image](../Images/677a1a2a862c955c0784be9210938bdb.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'In this book, we often refer to the domain of an interactive [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    program as a â€œworld,â€ and we speak of designing â€œworld programs.â€The design recipe
    for world programs, like the one for functions, is a tool for systematically moving
    from a problem statement to a working program. It consists of three big steps
    and one small one:'
  prefs: []
  type: TYPE_NORMAL
- en: 'For all those properties of the world that remain the same over time and are
    needed to render it as an [Image](#%28tech._image%29), introduce constants. In
    BSL, we specify such constants via definitions. For the purpose of world programs,
    we distinguish between two kinds of constants:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: â€œPhysicalâ€ constants describe general attributes of objects in the world, such
    as the speed or velocity of an object, its color, its height, its width, its radius,
    and so forth. Of course these constants donâ€™t really refer to physical facts,
    but many are analogous to physical aspects of the real world.
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the context of our sample problem, the radius of the carâ€™s wheels and the
    distance between the wheels are such â€œphysicalâ€ constants:'
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTH-OF-WORLDÂ 200)
    |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WHEEL-RADIUSÂ 5)
    |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WHEEL-DISTANCEÂ ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â WHEEL-RADIUSÂ 5))
    |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Note how the second constant is computed from the first.
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: Graphical constants are images of objects in the world. The program composes
    them into images that represent the complete state of the world.
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Here are graphical constants for wheel images of our sample car:'
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WHEEL
    |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â WHEEL-RADIUSÂ "solid"Â "black"))
    |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| We suggest you experiment in DrRacketâ€™s interactions area to develop such
    graphical constants. |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â SPACE
    |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â WHEEL-RADIUSÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â "white"))
    |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â BOTH-WHEELS
    |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â WHEELÂ SPACEÂ WHEEL))
    |'
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Graphical constants are usually computed, and the computations tend to involve
    physical constants and other images.
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: It is good practice to annotate constant definitions with a comment that explains
    what they mean.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Those properties that change over timeâ€”<wbr>in reaction to clock ticks, keystrokes,
    or mouse actionsâ€”<wbr>give rise to the current state of the world. Your task is
    to develop a data representation for all possible states of the world. The development
    results in a data definition, which comes with a comment that tells readers how
    to represent world information as data and how to interpret data as information
    about the world.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose simple forms of data to represent the state of the world.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'For the running example, it is the carâ€™s distance from the left margin that
    changes over time. While the distance to the right margin changes, too, it is
    obvious that we need only one or the other to create an image. A distance is measured
    in numbers, so the following is an adequate data definition:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â A WorldState is a [Number](#%28tech._number%29). |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation the number of pixels between |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â the left border of the scene and the car |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: An alternative is to count the number of clock ticks that have passed and to
    use this number as the state of the world. We leave this design variant as an
    exercise.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Once you have a data representation for the state of the world, you need to
    design a number of functions so that you can form a valid [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To start with, you need a function that maps any given state into an image
    so that [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    can render the sequence of states as images:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ;Â render
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Next you need to decide which kind of events should change which aspects of
    the world state. Depending on your decisions, you need to design some or all of
    the following three functions:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â clock-tick-handler |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â keystroke-handler |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â mouse-event-handler |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Finally, if the problem statement suggests that the program should stop if the
    world has certain properties, you must design
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ;Â end?
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: For the generic signatures and purpose statements of these functions, see [figureÂ 18](#%28counter._.D.K._%28figure._fig~3aworld-signatures%29%29).
    Adapt these generic purpose statements to the particular problems you solve so
    that readers know what they compute.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: In short, the desire to design an interactive program automatically creates
    several initial entries for your wish list. Work them off one by one and you get
    a complete world program.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Letâ€™s work through this step for the sample program. While [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    dictates that we must design a rendering function, we still need to figure out
    whether we want any event-handling functions. Since the car is supposed to move
    from left to right, we definitely need a function that deals with clock ticks.
    Thus, we get this wish list:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._.D.K._worldstate%29) -> [Image](#%28tech._image%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â places the image of the car x pixels from |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â the left margin of the BACKGROUND image |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (renderÂ x)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â BACKGROUND) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [WorldState](#%28tech._.D.K._worldstate%29) -> [WorldState](#%28tech._.D.K._worldstate%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds 3 to x to move the car right |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tockÂ x)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â x) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Note how we tailored the purpose statements to the problem at hand, with an
    understanding of how [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    will use these functions.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Finally, you need a main function. Unlike all other functions, a main function
    for world programs doesnâ€™t demand design or testing. Its sole reason for existing
    is that you can launch your world program conveniently from DrRacketâ€™s interactions
    area.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The one decision you must make concerns mainâ€™s arguments. For our sample problem,
    we opt for one argument: the initial state of the world. Here we go:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._.D.K._worldstate%29) -> [WorldState](#%28tech._.D.K._worldstate%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â launches the program from some initial state |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ ws)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â ws
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â tock]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render]))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Hence, you can launch this interactive program with
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| > (mainÂ 13) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: to watch the car start at 13 pixels from the left margin. It will stop when
    you close [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)â€™s
    window. Remember that [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    returns the current state of the world when the evaluation stops.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Naturally, you donâ€™t have to use the name â€œWorldStateâ€ for the class of data
    that represents the states of the world. Any name will do as long as you use it
    consistently for the signatures of the event-handling functions. Also, you donâ€™t
    have to use the names tock, end?, or render. You may name these functions whatever
    you like, as long as you use the same names when you write down the clauses of
    the [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression. Lastly, you may have noticed that you may list the clauses of a [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression in any order as long as you list the initial state first.
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s now work through the rest of the program design process, using the design
    recipe for functions and other design concepts spelled out so far.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 39\. Good programmers ensure that an image such as CAR can be enlarged
    or reduced via a single change to a constant definition.Good programmers establish
    a single point of control for all aspects of their programs, not just the graphical
    constants. Several chapters deal with this issue. We started the development of
    our car image with a single plain definition:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WHEEL-RADIUSÂ 5)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The definition of WHEEL-DISTANCE is based on the wheelâ€™s radius. Hence, changing
    WHEEL-RADIUS from 5 to 10 doubles the size of the car image. This kind of program
    organization is dubbed single point of control, and good design employs this idea
    as much as possible.
  prefs: []
  type: TYPE_NORMAL
- en: Develop your favorite image of an automobile so that WHEEL-RADIUS remains the
    single point of control.
  prefs: []
  type: TYPE_NORMAL
- en: 'The next entry on the wish list is the clock tick handling function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._.D.K._worldstate%29) -> [WorldState](#%28tech._.D.K._worldstate%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â moves the car by 3 pixels for every clock tick |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tockÂ cw)Â cw)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Since the state of the world represents the distance between the left margin
    of the canvas and the car, and since the car moves at three pixels per clock tick,
    a concise purpose statement combines these two facts into one. This also makes
    it easy to create examples and to define the function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._.D.K._worldstate%29) -> [WorldState](#%28tech._.D.K._worldstate%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â moves the car by 3 pixels for every clock tick |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â examples: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â given: 20, expect 23 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â given: 78, expect 81 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tockÂ cw)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â cwÂ 3))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The last design step calls for confirmation that the examples work as expected.
    So we click the RUN button and evaluate these expressions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (tockÂ 20) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 23 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (tockÂ 78) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 81 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Since the results are as expected, the design of tock is finished.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 40\. Formulate the examples as BSL tests, that is, using the [check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    form. Introduce a mistake. Re-run the tests.
  prefs: []
  type: TYPE_NORMAL
- en: 'Our second entry on the wish list specifies a function that translates the
    state of the world into an image:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._.D.K._worldstate%29) -> [Image](#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â places the car into the BACKGROUND scene, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â according to the given world state |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (renderÂ cw)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â BACKGROUND) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: To make examples for a rendering function, we suggest arranging a table like
    the upper half of [figureÂ 19](#%28counter._.D.K._%28figure._fig~3amoving-car%29%29).
    It lists the given world states and the desired scenes. For your first few rendering
    functions, you may wish to draw these images by hand.
  prefs: []
  type: TYPE_NORMAL
- en: '| cw |  | its image |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| 50 |  | ![image](../Images/8191b471508206a3f0fc559a99a2e19f.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| 100 |  | ![image](../Images/8e0777653eba3a29a272e725d46c80b2.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| 150 |  | ![image](../Images/77b21fc14d6dfc889c7407bcbb9d4885.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| 200 |  | ![image](../Images/a10f5139a15734e2a08251aba6e0b67e.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|  |  |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| cw |  | an expression |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| 50 |  | ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â CARÂ 50Â Y-CARÂ BACKGROUND)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| 100 |  | ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â CARÂ 100Â Y-CARÂ BACKGROUND)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| 150 |  | ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â CARÂ 150Â Y-CARÂ BACKGROUND)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| 200 |  | ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â CARÂ 200Â Y-CARÂ BACKGROUND)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 19: Examples for a moving car program'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Even though this kind of image table is intuitive and explains what the running
    function is going to displayâ€”<wbr>a moving carâ€”<wbr>it does not explain how the
    function creates this result. To get from here to there, we recommend writing
    down expressions like those in the lower half of [figureÂ 19](#%28counter._.D.K._%28figure._fig~3amoving-car%29%29)
    that create the images in the table. The capitalized names refer to the obvious
    constants: the image of a car, its fixed y-coordinate, and the background scene,
    which is currently empty.'
  prefs: []
  type: TYPE_NORMAL
- en: 'This extended table suggests a pattern for the formula that goes into the body
    of the render function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._.D.K._worldstate%29) -> [Image](#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â places the car into the BACKGROUND scene, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â according to the given world state |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (renderÂ cw)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â CARÂ cwÂ Y-CARÂ BACKGROUND))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: And that is mostly all there is to designing a simple world program.ExerciseÂ 41\.
    Finish the sample problem and get the program to run. That is, assuming that you
    have solved [exerciseÂ 39](#%28counter._.D.K._%28exercise._design6%29%29), define
    the constants BACKGROUND and Y-CAR. Then assemble all the function definitions,
    including their tests. When your program runs to your satisfaction, add a tree
    to the scenery. We used
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â tree
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([underlay/xy](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._underlay%2Fxy%29%29)Â ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 10Â "solid"Â "green")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 9Â 15 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â 2Â 20Â "solid"Â "brown")))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: to create a tree-like shape. Also add a clause to the [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression that stops the animation when the car has disappeared on the right
    side.
  prefs: []
  type: TYPE_NORMAL
- en: After settling on an initial data representation for world states, a careful
    programmer may have to revisit this fundamental design decision during the rest
    of the design process. For example, the data definition for the sample problem
    represents the car as a point. But (the image of) the car isnâ€™t just a mathematical
    point without width and height. Hence, the interpretation statementâ€”<wbr>the number
    of pixels from the left marginâ€”<wbr>is an ambiguous statement. Does this statement
    measure the distance between the left margin and the left end of the car? Its
    center point? Or even its right end? We ignored this issue here and leave it to
    BSLâ€™s image primitives to make the decision for us. If you donâ€™t like the result,
    revisit the data definition above and modify it or its interpretation statement
    to suit your taste.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 42\. Modify the interpretation of the sample data definition so that
    a state denotes the x-coordinate of the right-most edge of the car.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 43\. Letâ€™s work through the same problem statement with a time-based
    data definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An AnimationState is a [Number](#%28tech._number%29). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation the number of clock ticks |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â since the animation started |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Like the original data definition, this one also equates the states of the world
    with the class of numbers. Its interpretation, however, explains that the number
    means something entirely different.
  prefs: []
  type: TYPE_NORMAL
- en: Design the functions tock and render. Then develop a [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression so that once again you get an animation of a car traveling from left
    to right across the worldâ€™s canvas.
  prefs: []
  type: TYPE_NORMAL
- en: 'How do you think this program relates to [animate](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._%28%28lib._2htdp%2Funiverse..rkt%29._animate%29%29)
    from [Prologue: How to Program](part_prologue.html)?'
  prefs: []
  type: TYPE_NORMAL
- en: Use the data definition to design a program that moves the car according to
    a sine wave. (Donâ€™t try to drive like that.)
  prefs: []
  type: TYPE_NORMAL
- en: We end the section with an illustration of mouse event handling, which also
    illustrates the advantages that a separation of view and model provide.
  prefs: []
  type: TYPE_NORMAL
- en: Dealing with mouse movements is occasionally tricky because they arenâ€™t exactly
    what they seem to be. For a first idea of why that is, read [On Mice and Keys](../notes/note_mice-and-chars.html).
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Suppose we wish to allow people to move the car through â€œhyperspaceâ€:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a program that moves a car across the world canvas, from
    left to right, at the rate of three pixels per clock tick. If the mouse is clicked
    anywhere on the canvas, the car is placed at the x-coordinate of that click.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The bold part is the expansion of the sample problem from above.When we are
    confronted with a modified problem, we use the design process to guide us to the
    necessary changes. If used properly, this process naturally determines what we
    need to add to our existing program to cope with the expansion of the problem
    statement. So here we go:'
  prefs: []
  type: TYPE_NORMAL
- en: There are no new properties, meaning we do not need new constants.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The program is still concerned with just one property that changes over time,
    the x-coordinate of the car. Hence, the data representation suffices.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The revised problem statement calls for a mouse-event handler, without giving
    up on the clock-based movement of the car. Hence, we state an appropriate wish:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._.D.K._worldstate%29)  [Number](#%28tech._number%29)  [Number](#%28tech._number%29)  [String](#%28tech._string%29)
    -> [WorldState](#%28tech._.D.K._worldstate%29) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â places the car at x-mouse |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if the given me is "button-down" |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (hyperÂ x-position-of-carÂ x-mouseÂ y-mouseÂ me)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â x-position-of-car) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: 'Lastly, we need to modify main to take care of mouse events. All this requires
    is the addition of an [on-mouse](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-mouse%29%29)
    clause that defers to the new entry on our wish list:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ ws)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â ws
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â tock]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â [[on-mouse](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-mouse%29%29)Â hyper]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render]))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: After all, the modified problem calls for dealing with mouse clicks and everything
    else remains the same.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The rest is a mere matter of designing one more function, and for that we use
    the design recipe for functions.An entry on the wish list covers the first two
    steps of the design recipe for functions. Hence, our next step is to develop some
    functional examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._.D.K._worldstate%29)  [Number](#%28tech._number%29)  [Number](#%28tech._number%29)  [String](#%28tech._string%29)
    -> [WorldState](#%28tech._.D.K._worldstate%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â places the car at x-mouse |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if the given me is "button-down" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given: 21  10  20  "enter" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â wanted: 21 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given: 42  10  20  "button-down" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â wanted: 10 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â given: 42  10  20  "move" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â wanted: 42 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (hyperÂ x-position-of-carÂ x-mouseÂ y-mouseÂ me)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â x-position-of-car) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The examples say that if the string argument is equal to "button-down", the
    function returns x-mouse; otherwise it returns x-position-of-car.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 44\. Formulate the examples as BSL tests. Click RUN and watch them
    fail.
  prefs: []
  type: TYPE_NORMAL
- en: 'To complete the function definition, we must appeal to your fond memories from
    [Prologue: How to Program](part_prologue.html),In the next chapter, we explain
    designing with [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    in detail. specifically memories about the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)itional
    form. Using [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29),
    hyper is a two-line definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._.D.K._worldstate%29)  [Number](#%28tech._number%29)  [Number](#%28tech._number%29)  [String](#%28tech._string%29)
    -> [WorldState](#%28tech._.D.K._worldstate%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â places the car at x-mouse |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if the given me is "button-down" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (hyperÂ x-position-of-carÂ x-mouseÂ y-mouseÂ me)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "button-down"Â me)Â x-mouse]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â x-position-of-car]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: If you solved [exerciseÂ 44](#%28counter._.D.K._%28exercise._car-test-again%29%29),
    rerun the program and watch all tests succeed. Assuming the tests do succeed,
    evaluate
  prefs: []
  type: TYPE_NORMAL
- en: (mainÂ 1)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: in DrRacketâ€™s interactions area and transport your car through hyperspace.
  prefs: []
  type: TYPE_NORMAL
- en: You may wonder why this program modification is so straightforward. There are
    really two reasons. First, this book and its software strictly separate the data
    that a program tracksâ€”<wbr>the modelâ€”<wbr>and the image that it showsâ€”<wbr>the
    view. In particular, functions that deal with events have nothing to do with how
    the state is rendered. If we wish to modify how a state is rendered, we can focus
    on the function specified in a [to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)
    clause. Second, the design recipes for programs and functions organize programs
    in the right way. If anything changes in a problem statement, following the design
    recipe a second time naturally points out where the original problem solution
    has to change. While this may look obvious for the simple kind of problems we
    are dealing with now, it is critical for the kind of problems that programmers
    encounter in the real world.
  prefs: []
  type: TYPE_NORMAL
- en: 3.7Virtual Pet Worlds[ðŸ”—](#(part._sec~3azoo1) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: This exercise section introduces the first two elements of a virtual pet game.
    It starts with just a display of a cat that keeps walking across the canvas. Of
    course, all the walking makes the cat unhappy and its unhappiness shows. As with
    all pets, you can try petting, which helps some, or you can try feeding, which
    helps a lot more.
  prefs: []
  type: TYPE_NORMAL
- en: 'So letâ€™s start with an image of our favorite cat:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â cat1Â ![](../Images/2c441c7aba78a31d425a55678b9d4027.png))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Copy the cat image and paste it into DrRacket, then give the image a name with
    [define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29),
    just like above.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 45\. Design a â€œvirtual catâ€ world program that continuously moves the
    cat from left to right. Letâ€™s call it cat-prog and letâ€™s assume it consumes the
    starting position of the cat. Furthermore, make the cat move three pixels per
    clock tick. Whenever the cat disappears on the right, it reappears on the left.
    You may wish to read up on the [modulo](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._modulo%29%29)
    function.
  prefs: []
  type: TYPE_NORMAL
- en: The two images are different.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 46\. Improve the cat animation with a slightly different image:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â cat2Â ![](../Images/75a7f056c3dda341d3c3681cee6fd692.png))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Adjust the rendering function from [exerciseÂ 45](#%28counter._%28exercise._design12%29%29)
    so that it uses one cat image or the other based on whether the x-coordinate is
    odd. Read up on [odd?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._odd~3f%29%29)
    in the HelpDesk, and use a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression to select cat images.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 47\. Design a world program that maintains and displays a â€œhappiness
    gauge.â€ Letâ€™s call it gauge-prog, and letâ€™s agree that happiness is a number between
    0 and 100 (inclusive).
  prefs: []
  type: TYPE_NORMAL
- en: The gauge-prog program consumes the current level of happiness. With each clock
    tick, the happiness level decreases by 0.1; it never falls below 0 though. Every
    time the down arrow key is pressed, happiness decreases by 1/5; every time the
    up arrow is pressed, happiness jumps by 1/3.
  prefs: []
  type: TYPE_NORMAL
- en: To show the level of happiness, we use a scene with a solid, red rectangle with
    a black frame. For a happiness level of 0, the red bar should be gone; for the
    maximum happiness level of H, the bar should go all the way across the scene.
  prefs: []
  type: TYPE_NORMAL
- en: Note When you know enough, we will explain how to combine the gauge program
    with the solution of [exerciseÂ 45](#%28counter._%28exercise._design12%29%29).
    Then we will be able to help the cat because as long as you ignore it, it becomes
    less happy. If you pet the cat, it becomes happier. If you feed the cat, it becomes
    much, much happier. So you can see why you want to know a lot more about designing
    world programs than these first three chapters can tell you.
  prefs: []
  type: TYPE_NORMAL
- en: 4Intervals, Enumerations, and Itemizations[ðŸ”—](#(part._ch~3aintervals-enums)
    "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'At the moment, you have four choices to represent information as data: numbers,
    strings, images, and Boolean values. For many problems this is enough, but there
    are many more for which these four collections of data in BSL (or other programming
    languages) donâ€™t suffice. Actual designers need additional ways of representing
    information as data.'
  prefs: []
  type: TYPE_NORMAL
- en: At a minimum, good programmers must learn to design programs with restrictions
    on these built-in collections. One way to restrict is to enumerate a bunch of
    elements from a collection and to say that these are the only ones that are going
    to be used for some problem. Enumerating elements works only when there is a finite
    number of them. To accommodate collections with â€œinfinitelyâ€ many elements, we
    introduce intervals, which are collections of elements that satisfy a specific
    property.
  prefs: []
  type: TYPE_NORMAL
- en: Infinite may just mean â€œso large that enumerating the elements is entirely impractical.â€
  prefs: []
  type: TYPE_NORMAL
- en: Defining enumerations and intervals means distinguishing among different kinds
    of elements. To distinguish in code requires conditional functions, that is, functions
    that choose different ways of computing results depending on the value of some
    argument. Both [Many Ways to Compute](part_prologue.html#%28part._pro-cond%29)
    and [Mixing It Up with Booleans](#%28part._sec~3aboolean-if%29) illustrate with
    examples of how to write such functions. Neither section uses design, however.
    Both just present some new construct in your favorite programming language (thatâ€™s
    BSL), and offer some examples on how to use it.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we discuss a general design for enumerations and intervals,
    new forms of data descriptions. We start with a second look at the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression. Then we go through three different kinds of data descriptions: enumerations,
    intervals, and itemizations. An enumeration lists every single piece of data that
    belongs to it, while an interval specifies a range of data. The last one, itemizations,
    mixes the first two, specifying ranges in one clause of its definition and specific
    pieces of data in another. The chapter ends with the general design strategy for
    such situations.'
  prefs: []
  type: TYPE_NORMAL
- en: 4.1Programming with Conditionals[ðŸ”—](#(part._sec~3acond) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Recall the brief introduction to conditional expressions in [Prologue: How
    to Program](part_prologue.html). Since [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    is the most complicated expression form in this book, letâ€™s take a close look
    at its general shape:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [ConditionExpression1Â ResultExpression1] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [ConditionExpression2Â ResultExpression2] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â Brackets
    make [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines stand out. It is fine to use ( ... ) in place of [ ... ]. |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [ConditionExpressionNÂ ResultExpressionN]) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'A [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression starts with (cond, its keyword, and ends in ). Following the keyword,
    a programmer writes as many [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines as needed; each [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line consists of two expressions, enclosed in opening and closing brackets: [
    and ].'
  prefs: []
  type: TYPE_NORMAL
- en: A [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line is also known as a cond clause.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is a function definition that uses a conditional expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (nextÂ traffic-light-state)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "red"Â traffic-light-state)Â "green"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "green"Â traffic-light-state)Â "yellow"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "yellow"Â traffic-light-state)Â "red"]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Like the mathematical example in [Prologue: How to Program](part_prologue.html),
    this example illustrates the convenience of using [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expressions. In many problem contexts, a function must distinguish several different
    situations. With a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression, you can use one line per possibility and thus remind the reader of
    the code for the different situations from the problem statement.'
  prefs: []
  type: TYPE_NORMAL
- en: 'A note on pragmatics: Contrast [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expressions with [if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    expressions from [Mixing It Up with Booleans](#%28part._sec~3aboolean-if%29).
    The latter distinguish one situation from all others. As such, [if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)
    expressions are much less suited for multi-situation contexts; they are best used
    when all we wish to say is â€œone or the other.â€ We therefore always use [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    for situations when we wish to remind the reader of our code that some distinct
    situations come directly from data definitions. For other pieces of code, we use
    whatever construct is most convenient.'
  prefs: []
  type: TYPE_NORMAL
- en: 'When the conditions get too complex in a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression, you occasionally wish to say something like "in all other cases."
    For these kinds of problems, [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expressions permit the use of the [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    keyword for the very last [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [ConditionExpression1Â ResultExpression1] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [ConditionExpression2Â ResultExpression2] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â DefaultResultExpression])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'If you make the mistake of using [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    in some other [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line, BSL in DrRacket signals an error:'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e%29%29)Â xÂ 0)Â 10]
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â 20]
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â xÂ 10)Â 30])
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| cond:found an else clause that isn''t the last clause in its cond expression
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'That is, BSL rejects grammatically incorrect phrases because it makes no sense
    to figure out what such a phrase might mean.Imagine designing a function that,
    as part of a game-playing program, computes some award at the end of the game.
    Here is its header:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A PositiveNumber is a [Number](#%28tech._number%29) greater than/equal
    to 0. |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [PositiveNumber](#%28tech._positivenumber%29) -> [String](#%28tech._string%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the reward level from the given score s |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'And here are two variants for a side-by-side comparison:'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (rewardÂ s)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â sÂ 10)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â "bronze"] &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 10Â s)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â Â Â Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â sÂ 20))
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â "silver"] &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 20Â s)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â "gold"])) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (rewardÂ s)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â sÂ 10)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â "bronze"] &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 10Â s)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â Â Â Â Â Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â sÂ 20))
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â "silver"] &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â "gold"])) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The variant on the left uses a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    with three full-fledged conditions; on the right, the function comes with an [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    clause. To formulate the last condition for the function on the left, you must
    calculate that ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)  20  s)
    holds because
  prefs: []
  type: TYPE_NORMAL
- en: s is in [PositiveNumber](#%28tech._positivenumber%29)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)  0  s  10)
    is #false'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)  ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)  10  s)  ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)  s  20))
    evaluates to #false as well.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: While the calculation looks simple in this case, it is easy to make small mistakes
    and to introduce bugs into your program. It is therefore better to formulate the
    function definition as shown on the right, if you know that you want the exact
    oppositeâ€”<wbr>called the complementâ€”<wbr>of all previous conditions in a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: 4.2Computing Conditionally[ðŸ”—](#(part._sec~3aworks) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'From reading the [Many Ways to Compute](part_prologue.html#%28part._pro-cond%29)
    and [Mixing It Up with Booleans](#%28part._sec~3aboolean-if%29), you roughly know
    how DrRacket evaluates conditional expressions. Letâ€™s go over the idea a bit more
    precisely for [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expressions. Take another look at this definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (rewardÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â sÂ 10)Â "bronze"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 10Â s)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â sÂ 20))Â "silver"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: This function consumes a numeric scoreâ€”<wbr>a positive numberâ€”<wbr>and produces
    a color.
  prefs: []
  type: TYPE_NORMAL
- en: Just looking at the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression, you cannot predict which of the three [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses is going to be used. And that is the point of a function. The function
    deals with many different inputs, for example, 2, 3, 7, 18, 29. For each of these
    inputs, it may have to proceed in a different manner. Differentiating among the
    varying classes of inputs is the purpose of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression.
  prefs: []
  type: TYPE_NORMAL
- en: Take, for example
  prefs: []
  type: TYPE_NORMAL
- en: (rewardÂ 3)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: You know that DrRacket replaces function applications with the functionâ€™s body
    after substituting the argument for the parameter. Hence,
  prefs: []
  type: TYPE_NORMAL
- en: '| (rewardÂ 3)Â ;Â say â€œequalsâ€ |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â 3Â 10)Â "bronze"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 10Â 3)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 3Â 20))Â "silver"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'At this point, DrRacket evaluates one condition at a time. For the first one
    to evaluate to #true, it continues with the result expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (rewardÂ 3) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â 3Â 10)Â "bronze"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 10Â 3)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 3Â 20))Â "silver"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [#trueÂ "bronze"] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 10Â 3)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 3Â 20))Â "silver"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "bronze" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Here the first condition holds because 3 is between 0 and 10.Here is a second
    example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (rewardÂ 21) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â 21Â 10)Â "bronze"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 10Â 21)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 21Â 20))Â "silver"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [#falseÂ "bronze"] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 10Â 21)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 21Â 20))Â "silver"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 10Â 21)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 21Â 20))Â "silver"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Note how the first condition evaluated to #false this time, and as mentioned
    in [Many Ways to Compute](part_prologue.html#%28part._pro-cond%29) the entire
    [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause is dropped. The rest of the calculation proceeds as expected:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â 10Â 21)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 21Â 20))Â "silver"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â #trueÂ ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 21Â 20))Â "silver"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â #trueÂ #false)Â "silver"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [#falseÂ "silver"] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| == |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â "gold"])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â "gold" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Like the first condition, the second one also evaluates to #false and thus
    the calculation proceeds to the third [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line. The [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    tells DrRacket to replace the entire [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with the answer from this clause.'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 48\. Enter the definition of reward followed by (reward  18) into the
    definitions area of DrRacket and use the stepper to find out how DrRacket evaluates
    applications of the function.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 49\. A [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression is really just an expression and may therefore show up in the middle
    of another expression:'
  prefs: []
  type: TYPE_NORMAL
- en: ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â 200Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)Â [([>](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e%29%29)Â yÂ 200)Â 0]Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â y]))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Use the stepper to evaluate the expression for y as 100 and 210.
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ Â 100)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ Â 60)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MTSCNÂ Â ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHT))Â ;Â short
    for empty scene |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ROCKETÂ ![](../Images/b927b276855f672434339692f24d7af2.png))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ROCKET-CENTER-TO-TOP
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHTÂ ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â ([image-height](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-height%29%29)Â ROCKET)Â 2)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (create-rocket-scene.v5Â h)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â hÂ ROCKET-CENTER-TO-TOP)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 50Â hÂ MTSCN)]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e%29%29)Â hÂ ROCKET-CENTER-TO-TOP)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 50Â ROCKET-CENTER-TO-TOPÂ MTSCN)]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 20: Recall from [One Program, Many Definitions](part_prologue.html#%28part._pro-many-def%29)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Nesting [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expressions can eliminate common expressions. Consider the function for launching
    a rocket, repeated in [figureÂ 20](#%28counter._%28figure._fig~3av5-from-prologue%29%29).
    Both branches of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression have the same shape except as indicated with [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29):'
  prefs: []
  type: TYPE_NORMAL
- en: ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ XÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â MTSCN)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Reformulate create-rocket-scene.v5 to use a nested expression; the resulting
    function mentions [place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)
    only once.
  prefs: []
  type: TYPE_NORMAL
- en: 4.3Enumerations[ðŸ”—](#(part._sec~3aenums) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Not all strings represent mouse events. If you looked in HelpDesk when the
    last section introduced the [on-mouse](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-mouse%29%29)
    clause for [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29),
    you found out that only six strings are used to notify programs of mouse events:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A MouseEvt is one of these [String](#%28tech._string%29)s: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "button-down" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "button-up" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "drag" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "move" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "enter" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "leave" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The interpretation of these strings is quite obvious. One of the first two
    strings shows up when the computer user clicks the mouse button or releases it.
    In contrast, the third and fourth are about moving the mouse and possibly holding
    down the mouse button at the same time. Finally, the last two strings represent
    the events of a mouse moving over the edge of the canvas: either going into the
    canvas from the outside or exiting the canvas.More importantly, the data definition
    for representing mouse events as strings looks quite different from the data definitions
    we have seen so far. It is called an enumeration, and it is a data representation
    in which every possibility is listed. It should not come as a surprise that enumerations
    are common. Here is a simple one:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A TrafficLight is one of the following [String](#%28tech._string%29)s:
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "red" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "green" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "yellow" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation the three strings represent the three |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â possible states that a traffic light may assume |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'It is a simplisticWe call it â€œsimplisticâ€ because it does not include the â€œoffâ€
    state, the â€œblinking redâ€ state, or the â€œblinking yellowâ€ state. representation
    of the states that a traffic light can take on. Unlike others, this data definition
    also uses a slightly different phrase to explain what the term [TrafficLight](#%28tech._trafficlight%29)
    means, but this is an inessential difference.Programming with enumerations is
    mostly straightforward. When a functionâ€™s input is a class of data whose description
    spells out its elements on a case-by-case basis, the function should distinguish
    just those cases and compute the result on a per-case basis. For example, if you
    wanted to define a function that computes the next state of a traffic light, given
    the current state as an element of [TrafficLight](#%28tech._trafficlight%29),
    you would come up with a definition like this one:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [TrafficLight](#%28tech._trafficlight%29) -> [TrafficLight](#%28tech._trafficlight%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â yields the next state given current state s |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (traffic-light-nextÂ "red")Â "green")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (traffic-light-nextÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "red"Â s)Â "green"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "green"Â s)Â "yellow"]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "yellow"Â s)Â "red"]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Because the data definition for [TrafficLight](#%28tech._trafficlight%29) consists
    of three distinct elements, the traffic-light-next function naturally distinguishes
    between three different cases. For each case, the result expression is just another
    string, the one that corresponds to the next case.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 50\. If you copy and paste the above function definition into the definitions
    area of DrRacket and click RUN, DrRacket highlights two of the three [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines. This coloring tells you that your test cases do not cover the full [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)itional.
    Add enough tests to make DrRacket happy.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 51\. Design a [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    program that simulates a traffic light for a given duration. The program renders
    the state of a traffic light as a solid circle of the appropriate color, and it
    changes state on every clock tick. Hint Read the documentation for [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29);
    there is a reason all these â€œwordsâ€ are linked to their documentation. What is
    the most appropriate initial state? Ask your engineering friends.
  prefs: []
  type: TYPE_NORMAL
- en: The main idea of an enumeration is that it defines a collection of data as a
    finite number of pieces of data. Each item explicitly spells out which piece of
    data belongs to the class of data that we are defining. Usually, the piece of
    data is just shown as is; on some occasions, the item of an enumeration is an
    English sentence that describes a finite number of elements of pieces of data
    with a single phrase.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is an important example:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A 1String is a [String](#%28tech._string%29) of length 1, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â including |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "\\" (the backslash), |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  " " (the space bar), |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "\t" (tab), |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "\r" (return), and |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "\b" (backspace). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents keys on the keyboard |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: You know that such a data definition is proper if you can describe all of its
    elements with a BSL test. In the case of [1String](#%28tech._1string%29), you
    can find out whether some string s belongs to the collection with
  prefs: []
  type: TYPE_NORMAL
- en: ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â s)Â 1)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'An alternative way to check that you have succeeded is to enumerate all the
    members of the collection of data that you wish to describe:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A 1String is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "q" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "w" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "e" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "r" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "\t" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "\r" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "\b" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: If you look at your keyboard, you find â†, â†‘, and similar labels. Our chosen
    programming language, BSL, uses its own data definition to represent this information.
    Here is an excerpt:You know where to find the full definition.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A KeyEvent is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [1String](#%28tech._1string%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "left" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "right" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "up" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The first item in this enumeration describes the same bunch of strings that
    [1String](#%28tech._1string%29) describes. The clauses that follow enumerate strings
    for special key events, such as pressing one of the four arrow keys or releasing
    a key.At this point, we can actually design a key-event handler systematically.
    Here is a sketch:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._worldstate%29)  [KeyEvent](#%28tech._keyevent%29)
    -> ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (handle-key-eventsÂ wÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â ke)Â 1)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "left"Â ke)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "right"Â ke)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "up"Â ke)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "down"Â ke)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: This event-handling function uses a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression, and for each line in the enumeration of the data definition, there
    is one [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line. The condition in the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line identifies the [KeyEvent](#%28tech._keyevent%29)s identified in the first
    line of the enumeration, the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause corresponds to the second data enumeration line, and so on.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Position is a [Number](#%28tech._number%29). |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation distance between the left margin and the ball |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Position](#%28tech._position%29)  [KeyEvent](#%28tech._keyevent%29) ->
    [Position](#%28tech._position%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the next location of the ball |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (kehÂ 13Â "left")Â 8)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (kehÂ 13Â "right")Â 18)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (kehÂ 13Â "a")Â 13)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (kehÂ pÂ k)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â ([string-length](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-length%29%29)Â k)Â 1)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â p] &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "left"Â k)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â pÂ 5)]
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "right"Â k)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â pÂ 5)]
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â p]))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (kehÂ pÂ k)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â  &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â  &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "left"Â k)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â pÂ 5)]
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "right"Â k)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â pÂ 5)]
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â p]))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 21: Conditional functions and special enumerations'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: When programs rely on data definitions that come with the chosen programming
    language (such as BSL) or its teachpacks (such as the 2htdp/universe teachpack),
    it is common that they use only a part of the enumeration. To illustrate this
    point, let us look at a representative problem.
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a key-event handler that moves a red dot left or right
    on a horizontal line in response to pressing the left and right arrow keys.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 21](#%28counter._%28figure._fig~3acond-enum%29%29) presents two solutions
    to this problem. The function on the left is organized according to the basic
    idea of using one [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause per line in the data definition of the input, [KeyEvent](#%28tech._keyevent%29).
    In contrast, the right-hand side displays a version that uses the three essential
    lines: two for the keys that matter and one for everything else. The reordering
    is appropriate because only two of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)-lines
    are relevant, and they can be cleanly separated from other lines. Naturally, this
    kind of rearrangement is done after the function is designed properly.'
  prefs: []
  type: TYPE_NORMAL
- en: 4.4Intervals[ðŸ”—](#(part._sec~3aintervals) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Imagine yourself responding to the following sample design task:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a program that simulates the descent of a UFO.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: After a bit of thinking, you could come up with something like [figureÂ 22](#%28counter._%28figure._fig~3aufo%29%29).
    Stop! Study the definitions and replace the dots before you read on.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A WorldState is a [Number](#%28tech._number%29). |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation number of pixels between the top and the UFO |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ 300)Â ;Â distances
    in terms of pixels |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ 100)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â CLOSEÂ ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â HEIGHTÂ 3))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MTSCNÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHT))Â ;Â short
    for empty scene |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â UFOÂ ([overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)Â ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 10Â "solid"Â "green")Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [WorldState](#%28tech._worldstate%29) -> [WorldState](#%28tech._worldstate%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ y0)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â y0
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â nxt]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [WorldState](#%28tech._worldstate%29) -> [WorldState](#%28tech._worldstate%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes next location of UFO |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (nxtÂ 11)Â 14)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (nxtÂ y)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â yÂ 3))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [WorldState](#%28tech._worldstate%29) -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â places UFO at given height into the center of MTSCN |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (renderÂ 11)Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â UFOÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â 11Â MTSCN))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (renderÂ y)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â UFOÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â yÂ MTSCN))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 22: UFO, descending'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Before you release this "game" program, however, you may wish to add the display
    of the status line to the canvas:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Add a status line. It says "descending" when the UFOâ€™s height
    is above one third of the height of the canvas. It switches to "closing in" below
    that. And finally, when the UFO has reached the bottom of the canvas, the status
    notifies the player that the UFO has "landed". You are free to use appropriate
    colors for the status line.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In this case, we donâ€™t have a finite enumeration of distinct elements or distinct
    sub-classes of data. After all, conceptually, the interval between 0 and HEIGHT
    (for some number greater than 0) contains an infinite number of numbers and a
    large number of integers. Therefore we use intervals to superimpose some organization
    on the generic data definition, which just uses â€œnumbersâ€ to describe the class
    of coordinates.
  prefs: []
  type: TYPE_NORMAL
- en: 'An interval is a description of a class of numbers via boundaries. The simplest
    interval has two boundaries: left and right. If the left boundary is to be included
    in the interval, we say it is closed on the left. Similarly, a right-closed interval
    includes its right boundary. Finally, if an interval does not include a boundary,
    it is said to be open at that boundary.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Pictures of, and notations for, intervals use brackets for closed boundaries
    and parentheses for open boundaries. Here are four such intervals:'
  prefs: []
  type: TYPE_NORMAL
- en: '[3,5] is a closed interval:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![image](../Images/289807d02ebd760a8f5bfd54de7d240c.png)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '(3,5] is a left-open interval:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![image](../Images/874d912a30a09b59a450540441e72100.png)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: '[3,5) is a right-open interval:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![image](../Images/3530d75bc8c36a348b51473de064700e.png)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: 'and (3,5) is an open interval:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![image](../Images/c9927c3c416caf1d192f3780a0aa3392.png)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: ExerciseÂ 52\. Which integers are contained in the four intervals above?
  prefs: []
  type: TYPE_NORMAL
- en: 'The interval concept helps us formulate a data definition that captures the
    revised problem statement better than the â€œnumbersâ€-based definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A WorldState falls into one of three intervals: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ between 0 and CLOSE |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ between CLOSE and HEIGHT |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ below HEIGHT |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Specifically, there are three intervals, which we may picture as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/428e77ff179b3c0b7b23ca5bbbddc112.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'What you see is the standard number line, turned vertical and broken into intervals.
    Each interval starts with an angular downward-pointing bracket (![image](../Images/59ce0d317dd0c2da1a6a3fef555468ed.png))
    and ends with an upward-pointing bracket (![image](../Images/f4312c4c317fc3153faf47aa6a484dbd.png)).
    The picture identifies three intervals in this manner:'
  prefs: []
  type: TYPE_NORMAL
- en: the upper interval goes from 0 to CLOSE;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: the middle one starts at CLOSE and reaches HEIGHT;On a plain number line, the
    last interval starts at HEIGHT and goes on forever. and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: the lower, invisible interval is just a single line at HEIGHT.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Visualizing the data definition in this manner helps with the design of functions
    in two ways. First, it immediately suggests how to pick examples. Clearly we want
    the function to work inside of all the intervals, and we want the function to
    work properly at the ends of each interval. Second, the image tells us that we
    need to formulate a condition that determines whether or not some â€œpointâ€ is within
    one of the intervals.
  prefs: []
  type: TYPE_NORMAL
- en: 'Putting the two together also raises a question, namely, how exactly the function
    deals with the end points. In the context of our example, two points on the number
    line belong to two intervals: CLOSE belongs to both the upper interval and the
    middle one, while HEIGHT seems to fall into both the middle one and the lowest
    one. Such overlaps usually cause problems for programs, and they ought to be avoided.'
  prefs: []
  type: TYPE_NORMAL
- en: 'BSL functions avoid them naturally due to the way [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expressions are evaluated. Consider this natural organization of a function that
    consumes elements of WorldState:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._worldstate%29) -> [WorldState](#%28tech._worldstate%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (fÂ y)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â yÂ CLOSE)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â CLOSEÂ yÂ HEIGHT)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â yÂ HEIGHT)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The three [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines correspond to the three intervals. Each condition identifies those values
    of y that are in between the limits of the intervals. Due to the way [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines are checked one by one, however, a y value of CLOSE makes BSL pick the first
    [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line, and a y value of HEIGHT triggers the evaluation of the second ResultExpression.If
    we wanted to make this choice obvious and immediate for every reader of our code,
    we would use different conditions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._worldstate%29) -> [WorldState](#%28tech._worldstate%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (gÂ y)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â yÂ CLOSE)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â CLOSEÂ y)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â yÂ HEIGHT))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e%29%29)Â yÂ HEIGHT)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Note how the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line uses [and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)
    to combine a strictly-less check with a less-than-or-equal check instead of fâ€™s
    [<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)
    with three arguments.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._worldstate%29) -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds a status line to the scene created by renderÂ Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (render/statusÂ 10)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "descending"Â 11Â "green")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â 10 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (renderÂ 10))) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render/statusÂ y)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â yÂ CLOSE)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "descending"Â 11Â "green")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â 10 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (renderÂ y))] |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â CLOSEÂ y)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â yÂ HEIGHT))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "closing
    in"Â 11Â "orange") |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â 10 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (renderÂ y))] |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e%29%29)Â yÂ HEIGHT)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "landed"Â 11Â "red")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â 10 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (renderÂ y))])) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 23: Rendering with a status line'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Given all that, we can complete the definition of the function that adds the
    requested status line to our UFO animation; see [figureÂ 23](#%28counter._%28figure._fig~3arender-status%29%29)
    for the complete definition. The function uses a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression to distinguish the three intervals. In each [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause, the ResultExpression uses render (from [figureÂ 22](#%28counter._%28figure._fig~3aufo%29%29))
    to create the image with the descending UFO and then places an appropriate text
    at position (10,10) with [place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'To run this version, you need to change main from [figureÂ 22](#%28counter._%28figure._fig~3aufo%29%29)
    a bit:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._worldstate%29) -> [WorldState](#%28tech._worldstate%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ y0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â y0
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â nxt]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â render/status]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'One aspect of this function definition might disturb you, and to clarify why,
    letâ€™s refine the sample problem from above just a tiny bit:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Add a status line, positioned at (20,20), that says â€œdescendingâ€
    when the UFOâ€™s height is above one third of the height of the canvas. ...
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This could be the response of a client who has watched your animation for a
    first time.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [WorldState](#%28tech._worldstate%29) -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds a status line to the scene created by renderÂ Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (render/statusÂ 42)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "closing
    in"Â 11Â "orange") |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 20Â 20 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (renderÂ 42))) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (render/statusÂ y)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â yÂ CLOSE)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "descending"Â 11Â "green")]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â CLOSEÂ y)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â yÂ HEIGHT))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "closing
    in"Â 11Â "orange")] |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â [([>](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e%29%29)Â yÂ HEIGHT)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "landed"Â 11Â "red")])
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â 20Â 20 |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (renderÂ y))) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 24: Rendering with a status line, revised'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'At this point, you have no choice but to change the function render/status
    at six distinct places because you have three copies of one external piece of
    information: the location of the status line. To avoid multiple changes for a
    single element, programmers try to avoid copies. You have two choices to fix this
    problem. The first one is to use constant definitions, which you might recall
    from early chapters. The second one is to think of the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression as an expression that may appear anywhere in a function, including
    in the middle of some other expression; see [figureÂ 24](#%28counter._%28figure._fig~3arender-status2%29%29)
    and compare with [figureÂ 23](#%28counter._%28figure._fig~3arender-status%29%29).
    In this revised definition of render/status, the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression is the first argument to [place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29).
    As you can see, its result is always a [text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)
    image that is placed at position (20,20) into the image created by (render  y).'
  prefs: []
  type: TYPE_NORMAL
- en: 4.5Itemizations[ðŸ”—](#(part._itemization._sec~3aitemization) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: An interval distinguishes different sub-classes of numbers, which, in principle,
    is an infinitely large class. An enumeration spells out item for item the useful
    elements of an existing class of data. Some data definitions need to include elements
    from both. They use itemizations, which generalize intervals and enumerations.
    They allow the combination of any already-defined data classes with each other
    and with individual pieces of data.
  prefs: []
  type: TYPE_NORMAL
- en: 'Consider the following example, a rewrite of an important data definition from
    [Enumerations](#%28part._sec~3aenums%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A KeyEvent is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [1String](#%28tech._1string%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "left" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "right" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "up" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: In this case, the KeyEvent data definition refers to the [1String](#%28tech._1string%29)
    data definition. Since functions that deal with [KeyEvent](#%28tech._itemization._keyevent%29)s
    often deal with [1String](#%28tech._1string%29)s separately from the rest and
    do so with auxiliary functions, we now have a convenient way to express signatures
    for these functions, too.The description of the [string->number](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3enumber%29%29)
    primitive employs the idea of an itemization in a sophisticated way. Its signature
    is
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [String](#%28tech._string%29) -> [NorF](#%28tech._itemization._norf%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â converts the given string into a number; |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces #false if impossible |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([string->number](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3enumber%29%29)Â s)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â sÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'meaning that the result signature names a simple class of data:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An NorF is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ a [Number](#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'This itemization combines one piece of data (#false) with a large, and distinct,
    class of data (Number).Now imagine a function that consumes the result of [string->number](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-~3enumber%29%29)
    and adds 3, dealing with #false as if it were 0:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [NorF](#%28tech._itemization._norf%29) -> [Number](#%28tech._number%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds 3 to the given number; 3 otherwise |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (add3Â #false)Â 3)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (add3Â 0.12)Â 3.12)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (add3Â x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([false?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._false~3f%29%29)Â x)Â 3]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â xÂ 3)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As above, the functionâ€™s body consists of a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with as many clauses as there are items in the enumeration of the data
    definition. The first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause recognizes when the function is applied to #false; the corresponding result
    is 3 as requested. The second clause is about numbers and adds 3 as required.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Letâ€™s study a somewhat more purposeful design task:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a program that launches a rocket when the user of your
    program presses the space bar. The program first displays the rocket sitting at
    the bottom of the canvas. Once launched, it moves upward at three pixels per clock
    tick.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This revised version suggests a representation with two classes of states:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An LR (short for launching rocket) is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "resting" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [NonnegativeNumber](#%28tech._nonnegativenumber%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  "resting" represents a grounded rocket |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â a number denotes the height of a rocket in flight |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'While the interpretation of "resting" is obvious, the interpretation of numbers
    is ambiguous in its notion of height:'
  prefs: []
  type: TYPE_NORMAL
- en: the word â€œheightâ€ could refer to the distance between the ground and the rocketâ€™s
    point of reference, say, its center; or
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: it could mean the distance between the top of the canvas and the reference point.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Either one works fine. The second one uses the conventional computer meaning
    of the word â€œheight.â€ It is thus slightly more convenient for functions that translate
    the state of the world into an image, and we therefore choose to interpret the
    number in that spirit.
  prefs: []
  type: TYPE_NORMAL
- en: To drive home this choice, [exerciseÂ 57](#%28counter._itemization._%28exercise._interpret-height%29%29)
    below asks you to solve the exercises of this section using the first interpretation
    of height.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 53\. The design recipe for world programs demands that you translate
    information into data and vice versa to ensure a complete understanding of the
    data definition. Itâ€™s best to draw some world scenarios and to represent them
    with data and, conversely, to pick some data examples and to draw pictures that
    match them. Do so for the [LR](#%28tech._itemization._lr%29) definition, including
    at least HEIGHT and 0 as examples.
  prefs: []
  type: TYPE_NORMAL
- en: 'In reality, rocket launches come with countdowns:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a program that launches a rocket when the user presses
    the space bar. At that point, the simulation starts a countdown for three ticks,
    before it displays the scenery of a rising rocket. The rocket should move upward
    at a rate of three pixels per clock tick.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Following the program design recipe, we first collect constants:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ 300)Â ;Â distances
    in pixels |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ Â 100)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â YDELTAÂ 3)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â BACKGÂ Â ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHT))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ROCKETÂ ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â 5Â 30Â "solid"Â "red"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â CENTERÂ ([/](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2F%29%29)Â ([image-height](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-height%29%29)Â ROCKET)Â 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'While WIDTH and HEIGHT describe the dimensions of the canvas and the background
    scene, YDELTA describes how fast the rocket moves along the y-axis, as specified
    in the problem statement. The CENTER constant is the computed center of the rocket.Next
    we turn to the development of a data definition. This revision of the problem
    clearly calls for three distinct sub-classes of states:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An LRCD (for launching rocket countdown) is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  "resting" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ a [Number](#%28tech._number%29) between -3 and -1 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ a [NonnegativeNumber](#%28tech._nonnegativenumber%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation a grounded rocket, in countdown mode, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â a number denotes the number of pixels between the |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â top of the canvas and the rocket (its height) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The second, new sub-class of dataâ€”<wbr>three negative numbersâ€”<wbr>represents
    the world after the user pressed the space bar and before the rocket lifts off.At
    this point, we write down our wish list for a function that renders states as
    images and for any event-handling functions that we may need:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [LRCD](#%28tech._itemization._lrcd%29) -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders the state as a resting or flying rocket |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (showÂ x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â BACKG) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [LRCD](#%28tech._itemization._lrcd%29)  [KeyEvent](#%28tech._itemization._keyevent%29)
    -> [LRCD](#%28tech._itemization._lrcd%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â starts the countdown when space bar is pressed, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if the rocket is still resting |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (launchÂ xÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â x) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [LRCD](#%28tech._itemization._lrcd%29) -> [LRCD](#%28tech._itemization._lrcd%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â raises the rocket by YDELTA, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â  if it is moving already |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (flyÂ x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â x) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Remember that the design recipe for world programs dictates these signatures,
    though the choice of names for the data collection and the event handlers are
    ours. Also, we have specialized the purpose statements to fit our problem statement.From
    here, we use the design recipe for functions to create complete definitions for
    all three of them, starting with examples for the first one:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â (showÂ "resting") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 10Â HEIGHTÂ BACKG))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â (showÂ -2) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "-2"Â 20Â "red")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 3/4Â WIDTH)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 10Â HEIGHTÂ BACKG)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â (showÂ 53) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 10Â 53Â BACKG))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: As before in this chapter, we make one test per sub-class in the data definition.
    The first example shows the resting state, the second the middle of a countdown,
    and the last one the rocket in flight. Furthermore, we express the expected values
    as expressions that draw appropriate images. We used DrRacketâ€™s interactions area
    to create these images; what would you do?
  prefs: []
  type: TYPE_NORMAL
- en: A close look at the examples reveals that making examples also means making
    choices. Nothing in the problem statement actually demands how exactly the rocket
    is displayed before it is launched, but doing so is natural. Similarly, nothing
    says to display a number during the countdown, yet it adds a nice touch. Lastly,
    if you solved [exerciseÂ 53](#%28counter._itemization._%28exercise._cond5%29%29)
    you also know that 0 and HEIGHT are special points for the third clause of the
    data definition.
  prefs: []
  type: TYPE_NORMAL
- en: 'In general, intervals deserve special attention when you make up examples,
    that is, they deserve at least three kinds of examples: one from each end and
    another one from inside. Since the second sub-class of [LRCD](#%28tech._itemization._lrcd%29)
    is a (finite) interval and the third one is a half-open interval, letâ€™s take a
    look at their end points:'
  prefs: []
  type: TYPE_NORMAL
- en: Clearly, (show  -3) and (show  -1) must produce images like the one for (show  -2).
    After all, the rocket still rests on the ground, even if the countdown numbers
    differ.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The case for (show  HEIGHT) is different. According to our agreement, the value
    HEIGHT represents the state when the rocket has just been launched. Pictorially
    this means the rocket is still resting on the ground. Based on the last test case
    above, here is the test case that expresses this insight:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â (showÂ HEIGHT) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 10Â HEIGHTÂ BACKG))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: 'Except that if you evaluate the â€œexpected valueâ€ expression by itself in DrRacketâ€™s
    interactions area, you see that the rocket is halfway underground. This shouldnâ€™t
    be the case, of course, meaning that we need to adjust this test case and the
    above:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â (showÂ HEIGHT) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 10Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHTÂ CENTER)Â BACKG))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â (showÂ 53) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 10Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â 53Â CENTER)Â BACKG))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Finally, determine the result you now expect from (show  0). It is a simple
    but revealing exercise.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Following the precedents in this chapter, show uses a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression to deal with the three clauses of the data definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (showÂ x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â x)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â -3Â xÂ -1)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â xÂ 0)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Each clause identifies the corresponding sub-class with a precise condition:
    ([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)  x)
    picks the first sub-class, which consists of just one element, the string "resting";
    ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)  -3  x  -1)
    completely describes the second sub-class of data; and ([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)  x  0)
    is a test for all non-negative numbers.'
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 54\. Why would it be incorrect to use ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)  "resting"  x)
    as the first condition in show? Conversely, formulate a completely accurate condition,
    that is, a [Boolean](#%28tech._boolean%29) expression that evaluates to #true
    precisely when x belongs to the first sub-class of [LRCD](#%28tech._itemization._lrcd%29).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Combining the examples and the above skeleton of the show function yields a
    complete definition in a reasonably straightforward manner:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (showÂ x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 10Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHTÂ CENTER)Â BACKG)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â -3Â xÂ -1)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â ([number->string](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number-~3estring%29%29)Â x)Â 20Â "red")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 3/4Â WIDTH)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKET
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHTÂ CENTER)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â BACKG))] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â xÂ 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 10Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â xÂ CENTER)Â BACKG)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Indeed, this way of defining functions is highly effective and is an essential
    element of the full-fledged design approach in this book.ExerciseÂ 55\. Take another
    look at show. It contains three instances of an expression with the approximate
    shape:'
  prefs: []
  type: TYPE_NORMAL
- en: ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â ROCKETÂ 10Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â CENTER)Â BACKG)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This expression appears three times in the function: twice to draw a resting
    rocket and once to draw a flying rocket. Define an auxiliary function that performs
    this work and thus shorten show. Why is this a good idea? You may wish to reread
    [Prologue: How to Program](part_prologue.html).Letâ€™s move on to the second function,
    which deals with the key event to launch the rocket. We have its header material,
    so we formulate examples as tests:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (launchÂ "resting"Â "
    ")Â -3) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (launchÂ "resting"Â "a")Â "resting")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (launchÂ -3Â "
    ")Â -3) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (launchÂ -1Â "
    ")Â -1) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (launchÂ 33Â "
    ")Â 33) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (launchÂ 33Â "a")Â 33)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'An inspection of these six examples shows that the first two are about the
    first sub-class of [LRCD](#%28tech._itemization._lrcd%29), the third and fourth
    concern the countdown, and the last two are about key events when the rocket is
    already in the air.Since writing down the sketch of a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression worked well for the design of the show function, we do it again:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (launchÂ xÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â x)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â -3Â xÂ -1)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â xÂ 0)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Looking back at the examples suggests that nothing changes when the world is
    in a state that is represented by the second or third sub-class of data. Meaning,
    launch should produce x when this happens:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (launchÂ xÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â x)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â -3Â xÂ -1)Â x]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â xÂ 0)Â x]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Finally, the first example identifies the exact case when the launch function
    produces a new world state:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (launchÂ xÂ ke)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â x)Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "
    "Â ke)Â -3Â x)] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â -3Â xÂ -1)Â x]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â xÂ 0)Â x]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Specifically, when the state of the world is "resting" and the user presses
    the space bar, the function starts the countdown with -3.Copy the code into the
    definitions area of DrRacket and ensure that the above definitions work. At that
    point, you may wish to add a function for running the program:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [LRCD](#%28tech._itemization._lrcd%29) -> [LRCD](#%28tech._itemization._lrcd%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (main1Â s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â s
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â show]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â launch]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: This function does not specify what to do when the clock ticks; after all, we
    havenâ€™t designed fly yet. Still, with main1 it is possible to run this incomplete
    version of the program and to check that you can start the countdown. What would
    you provide as the argument in a call to main1?
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [LRCD](#%28tech._itemization._lrcd%29) -> [LRCD](#%28tech._itemization._lrcd%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â raises the rocket by YDELTA if it is moving already |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (flyÂ "resting")Â "resting")
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (flyÂ -3)Â -2)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (flyÂ -2)Â -1)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (flyÂ -1)Â HEIGHT)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (flyÂ 10)Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â 10Â YDELTA))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (flyÂ 22)Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â 22Â YDELTA))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (flyÂ x)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â x)Â x]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â -3Â xÂ -1)Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)Â xÂ -1)Â HEIGHTÂ ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â xÂ 1))]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â xÂ 0)Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â xÂ YDELTA)]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 25: Launching a countdown and a liftoff'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The design of flyâ€”<wbr>the clock-tick handlerâ€”<wbr>proceeds just like the design
    of the preceding two functions, and [figureÂ 25](#%28counter._itemization._%28figure._fig~3acountdown%29%29)
    displays the result of the design process. Once again the key is to cover the
    space of possible input data with a goodly bunch of examples, especially for the
    two intervals. These examples ensure that the countdown and the transition from
    the countdown to the liftoff work properly.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 56\. Define main2 so that you can launch the rocket and watch it lift
    off. Read up on the [on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)
    clause to determine the length of one tick and how to change it.
  prefs: []
  type: TYPE_NORMAL
- en: If you watch the entire launch, you will notice that once the rocket reaches
    the top something curious happens. Explain. Add a [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    clause to main2 so that the simulation of the liftoff stops gracefully when the
    rocket is out of sight.
  prefs: []
  type: TYPE_NORMAL
- en: The solution of [exerciseÂ 56](#%28counter._itemization._%28exercise._cond7%29%29)
    yields a complete, working program, but one that behaves a bit strangely. Experienced
    programmers tell you that using negative numbers to represent the countdown phase
    is too â€œbrittle.â€ The next chapter introduces the means to provide a good data
    definition for this problem. Before we go there, however, the next section spells
    out in detail how to design programs that consume data described by itemizations.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 57\. Recall that the word â€œheightâ€ forced us to choose one of two possible
    interpretations. Now that you have solved the exercises in this section, solve
    them again using the first interpretation of the word. Compare and contrast the
    solutions.
  prefs: []
  type: TYPE_NORMAL
- en: 4.6Designing with Itemizations[ðŸ”—](#(part._sec~3adesign-itemization) "Link to
    here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: What the preceding three sections have clarified is that the design of functions
    canâ€”<wbr>and mustâ€”<wbr>exploit the organization of the data definition. Specifically,
    if a data definition singles out certain pieces of data or specifies ranges of
    data, then the creation of examples and the organization of the function reflect
    these cases and ranges.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this section, we refine the design recipe of [From Functions to Programs](#%28part._sec~3adesign%29)
    so that you can proceed in a systematic manner when you encounter problems concerning
    functions that consume itemizations, including enumerations and intervals. To
    keep the explanation grounded, we illustrate the six design steps with the following,
    somewhat simplistic, example:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem The state of Tax Land has created a three-stage sales tax to
    cope with its budget deficit. Inexpensive items, those costing less than $1,000,
    are not taxed. Luxury items, with a price of more than $10,000, are taxed at the
    rate of eight percent (8.00%). Everything in between comes with a five percent
    (5.00%) markup.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Design a function for a cash register that, given the price of an item, computes
    the sales tax.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Keep this problem in mind as we revise the steps of the design recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: When the problem statement distinguishes different classes of input information,
    you need carefully formulated data definitions.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A data definition must use distinct clauses for each sub-class of data or in
    some cases just individual pieces of data. Each clause specifies a data representation
    for a particular sub-class of information. The key is that each sub-class of data
    is distinct from every other class, so that our function can proceed by analyzing
    disjoint cases.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Our sample problem deals with prices and taxes, which are usually positive
    numbers. It also clearly distinguishes three ranges:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â A Price falls into one of three intervals: |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  0 through 1000 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  1000 through 10000 |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  10000 and above. |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation the price of an itemÂ Â  |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Do you understand how these ranges relate to the original problem?
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: As far as the signature, purpose statement, and function header are concerned,
    you proceed as before.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Here is the material for our running example:Developers in the real world do
    not use plain numbers in the chosen programming language for representing amounts
    of money. See intermezzo 4 for some problems with numbers.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â [Price](#%28tech._price%29) -> [Number](#%28tech._number%29) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the amount of tax charged for p |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sales-taxÂ p)Â 0)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: For functional examples, however, it is imperative that you pick at least one
    example from each sub-class in the data definition. Also, if a sub-class is a
    finite range, be sure to pick examples from the boundaries of the range and from
    its interior.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Since our sample data definition involves three distinct intervals, letâ€™s pick
    all boundary examples and one price from inside each interval and determine the
    amount of tax for each: 0, 537, 1000, 1282, 10000, and 12017.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Stop! Try to calculate the tax for each of these prices.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Here is our first attempt, with rounded tax amounts:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| 0 |  | 537 |  | 1000 |  | 1282 |  | 10000 |  | 12017 |'
  prefs:
  - PREF_IND
  type: TYPE_TB
- en: '| 0 |  | 0 |  | ???? |  | 64 |  | ????? |  | 961 |'
  prefs:
  - PREF_IND
  type: TYPE_TB
- en: The question marks point out that the problem statement uses the vague phrase
    â€œthose costing less than $1,000â€ and â€œmore than $10,000â€ to specify the tax table.
    While a programmer may jump to the conclusion that these words mean â€œstrictly
    lessâ€ or â€œstrictly more,â€ the lawmakers may have meant to say â€œless than or equal
    toâ€ or â€œmore than or equal to,â€ respectively. Being skeptical, we decide here
    that Tax Land legislators always want more money to spend, so the tax rate for
    $1,000 is 5% and the rate for $10,000 is 8%. A programmer at a tax company would
    have to ask a tax-law specialist.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Now that we have figured out how the boundaries are to be interpreted in the
    domain, we could refine the data definition. We trust you can do this on your
    own.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Before we go, letâ€™s turn some of the examples into test cases:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sales-taxÂ 537)Â 0)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sales-taxÂ 1000)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 0.05Â 1000))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (sales-taxÂ 12017)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 0.08Â 12017))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Take a close look. Instead of just writing down the expected result, we write
    down how to compute the expected result. This makes it easier later to formulate
    the function definition.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Stop! Write down the remaining test cases. Think about why you may need more
    test cases than sub-classes in the data definition.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The biggest novelty is the conditional template. In general,
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: the template mirrors the organization of sub-classes with a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29).
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This slogan means two concrete things. First, the functionâ€™s body must be a
    conditional expression with as many clauses as there are distinct sub-classes
    in the data definition. If the data definition mentions three distinct sub-classes
    of input data, you need three [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses; if it has seventeen sub-classes, the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression contains seventeen clauses. Second, you must formulate one condition
    expression per [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause. Each expression involves the function parameter and identifies one of
    the sub-classes of data in the data definition:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sales-taxÂ p)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â p)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â pÂ 1000))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 1000Â p)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â pÂ 10000))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â pÂ 10000)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: When you have finished the template, you are ready to define the function. Given
    that the function body already contains a schematic [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression, it is natural to start from the various [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines. For each [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line, you may assume that the input parameter meets the condition and so you exploit
    the corresponding test cases. To formulate the corresponding result expression,
    you write down the computation for this example as an expression that involves
    the function parameter. Ignore all other possible kinds of input data when you
    work on one line; the other [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses take care of those.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (sales-taxÂ p)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â p)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â pÂ 1000))Â 0]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 1000Â p)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â pÂ 10000))Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 0.05Â p)]
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([>=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3e~3d%29%29)Â pÂ 10000)Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 0.08Â p)]))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Finally, run the tests and ensure that they cover all [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What do you do when one of your test cases fails? Review the end of [Designing
    Functions](#%28part._sec~3adesign-func%29) concerning test failures.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: ExerciseÂ 58\. Introduce constant definitions that separate the intervals for
    low prices and luxury prices from the others so that the legislators in Tax Land
    can easily raise the taxes even more.
  prefs: []
  type: TYPE_NORMAL
- en: 4.7Finite State Worlds[ðŸ”—](#(part._sec~3aworlds-more) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: With the design knowledge in this chapter, you can develop a complete simulation
    of American traffic lights. When such a light is green and it is time to stop
    the traffic, the light turns yellow, and, after that, it turns red. When the light
    is red and it is time to get the traffic going, the light simply switches to green.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/d95c02351c47201658e054e482501c71.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 26: How a traffic light functions'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The left-hand side of [FigureÂ 26](#%28counter._%28figure._fig~3atraffic-light%29%29)
    summarizes this description as a state transition diagram. Such a diagram consists
    of states and arrows that connect these states. Each state depicts a traffic light
    in one particular configuration: red, yellow, or green. Each arrow shows how the
    world can change, from which state it can transition to another state. Our sample
    diagram contains three arrows, because there are three possible ways in which
    the traffic light can change. Labels on the arrows indicate the reason for changes;
    a traffic light transitions from one state to another as time passes.'
  prefs: []
  type: TYPE_NORMAL
- en: In many situations, state transition diagrams have only a finite number of states
    and arrows. Computer scientists call such diagrams finite state machines (FSM),
    also known as finite state automata (FSA). Despite their simplicity, FSMs/FSAs
    play an important role in computer science.
  prefs: []
  type: TYPE_NORMAL
- en: To create a world program for an FSA, we must first pick a data representation
    for the possible â€œstates of the world,â€ which, according to [Designing World Programs](#%28part._.D.K._sec~3adesign-world%29),
    represents those aspects of the world that may change in some ways as opposed
    to those that remain the same. In the case of our traffic light, what changes
    is the color of the light, that is, which bulb is turned on. The size of the bulbs,
    their arrangement (horizontal or vertical), and other aspects donâ€™t change. Since
    there are only three states, we reuse the string-based data definition of [TrafficLight](#%28tech._trafficlight%29)
    from above.
  prefs: []
  type: TYPE_NORMAL
- en: The right-hand side of [figureÂ 26](#%28counter._%28figure._fig~3atraffic-light%29%29)
    is a diagrammatic interpretation of the [TrafficLight](#%28tech._trafficlight%29)
    data definition. Like the diagram in [figureÂ 26](#%28counter._%28figure._fig~3atraffic-light%29%29),
    it consists of three states, arranged in such a way that it is easy to view each
    data element as a representation of a concrete configuration. Also, the arrows
    are now labeled with tick to suggest that our world program uses the passing of
    time as the trigger that changes the state of the traffic light. If we wanted
    to simulate a manually operated light, we might choose transitions based on keystrokes.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that we know how to represent the states of our world, how to go from one
    to the next, and that the state changes at every tick of the clock, we can write
    down the signature, a purpose statement, and a stub for the two functions we must
    design:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [TrafficLight](#%28tech._trafficlight%29) -> [TrafficLight](#%28tech._trafficlight%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â yields the next state, given current state cs |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tl-nextÂ cs)Â cs)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [TrafficLight](#%28tech._trafficlight%29) -> [Image](#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders the current state cs as an image |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tl-renderÂ current-state)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 90Â 30))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Preceding sections use the names render and next to name the functions that
    translate a state of the world into an image and that deal with clock ticks. Here
    we prefix these names with some syllable that suggests to which world the functions
    belong. Because the specific functions have appeared before, we leave them as
    exercises.ExerciseÂ 59\. Finish the design of a world program that simulates the
    traffic light FSA. Here is the main function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [TrafficLight](#%28tech._trafficlight%29) -> [TrafficLight](#%28tech._trafficlight%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â simulates a clock-based American traffic light |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (traffic-light-simulationÂ initial-state)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â initial-state
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â tl-render]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â tl-nextÂ 1]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The functionâ€™s argument is the initial state for the [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression, which tells DrRacket to redraw the state of the world with tl-render
    and to handle clock ticks with tl-next. Also note that it informs the computer
    that the clock should tick once per second.
  prefs: []
  type: TYPE_NORMAL
- en: Complete the design of tl-render and tl-next. Start with copying [TrafficLight](#%28tech._trafficlight%29),
    tl-next, and tl-render into DrRacketâ€™s definitions area.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here are some test cases for the design of the latter:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (tl-renderÂ "red")Â ![image](../Images/f7aecea25163a3d560e0dd6dbd0d71db.png))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (tl-renderÂ "yellow")Â ![image](../Images/89d97caab9f5f39a68fd77b35f24cfb2.png))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Your function may use these images directly. If you decide to create images
    with the functions from the 2htdp/image teachpack, design an auxiliary function
    for creating the image of a one-color bulb. Then read up on the [place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)
    function, which can place bulbs into a background scene.ExerciseÂ 60\. An alternative
    data representation for a traffic light program may use numbers instead of strings:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â An N-TrafficLight is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  0  interpretation the traffic light shows red |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  1  interpretation the traffic light shows green |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  2  interpretation the traffic light shows yellow |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'It greatly simplifies the definition of tl-next:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [N-TrafficLight](#%28tech._n._trafficlight%29) -> [N-TrafficLight](#%28tech._n._trafficlight%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â yields the next state, given current state cs |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tl-next-numericÂ cs)Â ([modulo](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._modulo%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â csÂ 1)Â 3))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Reformulate tl-nextâ€™s tests for tl-next-numeric.
  prefs: []
  type: TYPE_NORMAL
- en: Does the tl-next function convey its intention more clearly than the tl-next-numeric
    function? If so, why? If not, why not?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 61\. As [From Functions to Programs](#%28part._sec~3adesign%29) says,
    programs must define constants and use names instead of actual constants. In this
    spirit, a data definition for traffic lights must use constants, too:This form
    of data definition is what a seasoned designer would use.
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â REDÂ 0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â GREENÂ 1)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â YELLOWÂ 2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An S-TrafficLight is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  RED |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  GREEN |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  YELLOW |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: If the names are chosen properly, the data definition does not need an interpretation
    statement.
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â [S-TrafficLight](#%28tech._s._trafficlight%29) -> [S-TrafficLight](#%28tech._s._trafficlight%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â yields the next state, given current state cs &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |  |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (tl-next-Â ...Â RED)Â GREEN)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (tl-next-Â ...Â YELLOW)Â RED)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |  |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tl-next-numericÂ cs)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([modulo](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._modulo%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â csÂ 1)Â 3))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tl-next-symbolicÂ cs)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([equal?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._equal~3f%29%29)Â csÂ RED)Â GREEN]
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([equal?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._equal~3f%29%29)Â csÂ GREEN)Â YELLOW]
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â [([equal?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._equal~3f%29%29)Â csÂ YELLOW)Â RED]))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 27: A symbolic traffic light'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[FigureÂ 27](#%28counter._%28figure._fig~3aex~3aalternative%29%29) displays
    two different functions that switch the state of a traffic light in a simulation
    program. Which of the two is properly designed using the recipe for itemization?
    Which of the two continues to work if you change the constants to the following'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â REDÂ "red")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â GREENÂ "green")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â YELLOWÂ "yellow")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Does this help you answer the questions?
  prefs: []
  type: TYPE_NORMAL
- en: Aside The [equal?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._equal~3f%29%29)
    function in [figureÂ 27](#%28counter._%28figure._fig~3aex~3aalternative%29%29)
    compares two arbitrary values, regardless of what these values are. Equality is
    a complicated topic in the world of programming. End
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is another finite state problem that introduces a few additional complications:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a world program that simulates the working of a door with
    an automatic door closer. If this kind of door is locked, you can unlock it with
    a key. An unlocked door is closed, but someone pushing at the door opens it. Once
    the person has passed through the door and lets go, the automatic door takes over
    and closes the door again. When a door is closed, it can be locked again.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'To tease out the essential elements, we again draw a transition diagram; see
    the left-hand side of [figureÂ 28](#%28counter._%28figure._fig~3adoor-closer%29%29).
    Like the traffic light, the door has three distinct states: locked, closed, and
    open. Locking and unlocking are the activities that cause the door to transition
    from the locked to the closed state and vice versa. As for opening an unlocked
    door, we say that one needs to push the door open. The remaining transition is
    unlike the others because it doesnâ€™t require any activities by anyone or anything
    else. Instead, the door closes automatically over time. The corresponding transition
    arrow is labeled with *time* to emphasize this.'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/6541af78e82ccf6c0b54c2dd46610172.png) Â Â Â Â Â Â Â Â Â Â  ![image](../Images/489d6c3223b9d0e25c29a8dbcf018204.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 28: A transition diagram for a door with an automatic closer'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Following our recipe, we start with a translation of the three real-world states
    into BSL data:'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â LOCKEDÂ "locked")
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â CLOSEDÂ "closed")
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â OPENÂ "open")
    &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â A DoorState is one of: &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  LOCKED &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  CLOSED &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  OPEN &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: We also keep in mind the lesson of [exerciseÂ 61](#%28counter._%28exercise._ex~3aalternative-data-design2%29%29),
    namely, that it is best to define symbolic constants and formulate data definitions
    in terms of such constants.
  prefs: []
  type: TYPE_NORMAL
- en: 'The next step of a world design demands that we translate the chosen actions
    in our domainâ€”<wbr>the arrows in the left-hand diagramâ€”<wbr>into interactions
    with the computer that the 2htdp/universe teachpack can deal with. Our pictorial
    representation of the doorâ€™s states and transitions, specifically the arrow from
    open to closed, suggests the use of clock ticks. For the other arrows, we could
    use either key presses or mouse clicks. Letâ€™s use three keystrokes: "u" for unlocking
    the door, "l" for locking it, and the space bar " " for pushing it open. The right-hand-side
    diagram of [figureÂ 28](#%28counter._%28figure._fig~3adoor-closer%29%29) expresses
    these choices graphically; it translates the state-machine diagram from the world
    of information into the world of data in BSL.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Once we have decided to use the passing of time for one action and key presses
    for the others, we must design functions that render the current state of the
    worldâ€”<wbr>represented as [DoorState](#%28tech._doorstate%29)â€”<wbr>and that transform
    it into the next state of the world. And that, of course, amounts to a wish list
    of [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    functions:'
  prefs: []
  type: TYPE_NORMAL
- en: door-closer, which closes the door during one tick;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: door-action, which acts on it in response to pressing a key; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: door-render, which translates the current state into an image.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Stop! Formulate appropriate signatures.We start with door-closer. Since door-closer
    acts as the [on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)
    handler, we get its signature from our choice of [DoorState](#%28tech._doorstate%29)
    as the collection of world states:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [DoorState](#%28tech._doorstate%29) -> [DoorState](#%28tech._doorstate%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â closes an open door over the period of one tick |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (door-closerÂ state-of-door)Â state-of-door)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Making up examples is trivial when the world can only be in one of three states.
    Here we use a table to express the basic idea, just like in some of the mathematical
    examples given above:'
  prefs: []
  type: TYPE_NORMAL
- en: '| given state |  | desired state |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| LOCKED |  | LOCKED |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| CLOSED |  | CLOSED |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| OPEN |  | CLOSED |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Stop! Express these examples as BSL tests.The template step demands a conditional
    with three clauses:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (door-closerÂ state-of-door)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â LOCKEDÂ state-of-door)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â CLOSEDÂ state-of-door)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â OPENÂ state-of-door)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'and the process of turning this template into a function definition is dictated
    by the examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (door-closerÂ state-of-door)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â LOCKEDÂ state-of-door)Â LOCKED]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â CLOSEDÂ state-of-door)Â CLOSED]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â OPENÂ state-of-door)Â CLOSED]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Donâ€™t forget to run your tests.The second function, door-action, takes care
    of the remaining three arrows of the diagram. Functions that deal with keyboard
    events consume both a world and a key event, meaning the signature is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [DoorState](#%28tech._doorstate%29)  [KeyEvent](#%28tech._keyevent%29)
    -> [DoorState](#%28tech._doorstate%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â turns key event k into an action on state s |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (door-actionÂ sÂ k)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â s) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'We once again present the examples in tabular form:'
  prefs: []
  type: TYPE_NORMAL
- en: '| given state |  | given key event |  | desired state |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| LOCKED |  | "u" |  | CLOSED |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| CLOSED |  | "l" |  | LOCKED |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| CLOSED |  | " " |  | OPEN |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| OPEN |  | â€”<wbr> |  | OPEN |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The examples combine information from our drawing with the choices we made
    about mapping actions to keyboard events. Unlike the table of examples for traffic
    light, this table is incomplete. Think of some other examples; then consider why
    our table suffices.From here, it is straightforward to create a complete design:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (door-actionÂ LOCKEDÂ "u")Â CLOSED)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (door-actionÂ CLOSEDÂ "l")Â LOCKED)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (door-actionÂ CLOSEDÂ "
    ")Â OPEN) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (door-actionÂ OPENÂ "a")Â OPEN)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (door-actionÂ CLOSEDÂ "a")Â CLOSED)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (door-actionÂ sÂ k)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â LOCKEDÂ s)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "u"Â k))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â CLOSED] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â CLOSEDÂ s)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "l"Â k))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â LOCKED] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â CLOSEDÂ s)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "
    "Â k)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â OPEN] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â s]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Note the use of [and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)
    to combine two conditions: one concerning the current state of the door and the
    other concerning the given key event.Lastly, we need to render the state of the
    world as a scene:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [DoorState](#%28tech._doorstate%29) -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â translates the state s into a large text image |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (door-renderÂ CLOSED)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â CLOSEDÂ 40Â "red"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (door-renderÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â sÂ 40Â "red"))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'This simplistic function uses large text. Here is how we run it all:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [DoorState](#%28tech._doorstate%29) -> [DoorState](#%28tech._doorstate%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â simulates a door with an automatic door closer |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (door-simulationÂ initial-state)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â initial-state
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â door-closer]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)Â door-action]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â door-render]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Now it is time for you to collect the pieces and run them in DrRacket to see
    whether it all works.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 62\. During a door simulation the â€œopenâ€ state is barely visible. Modify
    door-simulation so that the clock ticks once every three seconds. Rerun the simulation.
  prefs: []
  type: TYPE_NORMAL
- en: 5Adding Structure[ðŸ”—](#(part._ch~3astructure) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Suppose you want to design a world program that simulates a ball bouncing back
    and forth on a straight vertical line between the floor and ceiling of some imaginary,
    perfect room. Assume that it always moves two pixels per clock tick. If you follow
    the design recipe, your first goal is to develop a data representation for what
    changes over time. Here, the ballâ€™s position and its direction change over time,
    but thatâ€™s two values while [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    keeps track of just one. Thus the question arises how one piece of data can represent
    two changing quantities of information.
  prefs: []
  type: TYPE_NORMAL
- en: Mathematicians know tricks that â€œmergeâ€ two numbers into a single number such
    that it is possible to retrieve the original ones. Programmers consider these
    kinds of tricks evil because they obscure a programâ€™s true intentions.
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: Here is another scenario that raises the same question. Your cell phone is mostly
    a few million lines of code wrapped in plastic. Among other things, it administrates
    your contacts. Each contact comes with a name, a phone number, an email address,
    and perhaps some other information. When you have lots of contacts, each single
    contact is best represented as a single piece of data; otherwise the various pieces
    could get mixed up by accident.
  prefs: []
  type: TYPE_NORMAL
- en: Because of such programming problems, every programming language provides some
    mechanism to combine several pieces of data into a single piece of compound data
    and ways to retrieve the constituent values when needed. This chapter introduces
    BSLâ€™s mechanics, so-called structure type definitions, and how to design programs
    that work on compound data.
  prefs: []
  type: TYPE_NORMAL
- en: 5.1From Positions to posn Structures[ðŸ”—](#(part._sec~3aposn-structures) "Link
    to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'A position on a world canvas is uniquely identified by two pieces of data:
    the distance from the left margin and the distance from the top margin. The first
    is called an x-coordinate and the second one is the y-coordinate.'
  prefs: []
  type: TYPE_NORMAL
- en: DrRacket, which is basically a BSL program, represents such positions with posn
    structures. A posn structure combines two numbers into a single value. We can
    create a posn structure with the operation [make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29),
    which consumes two numbers and makes a posn. For example,
  prefs: []
  type: TYPE_NORMAL
- en: ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 3Â 4)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'is an expression that creates a posn structure whose x-coordinate is 3 and
    whose y-coordinate is 4.A posn structure has the same status as a number or a
    Boolean or a string. In particular, both primitive operations and functions may
    consume and produce structures. Also, a program can name a posn structure:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â one-posnÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 8Â 6))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Stop! Describe one-posn in terms of coordinates.
  prefs: []
  type: TYPE_NORMAL
- en: Before doing anything else, letâ€™s take a look at the laws of computation for
    posn structures. That way, we can both create functions that process posn structures
    and predict what they compute.
  prefs: []
  type: TYPE_NORMAL
- en: 5.2Computing with posns[ðŸ”—](#(part._sec~3aeval-posns) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: While functions and the laws of functions are completely familiar from pre-algebra,
    posn structures appear to be a new idea. Then again, the concept of a posn ought
    to look like the Cartesian points or positions in the plane you may have encountered
    before.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/083c70882fcadef8bbd1763197de3bf6.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 29: A Cartesian point'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Selecting a Cartesian pointâ€™s pieces is also a familiar process. For example,We
    thank Neil Toronto for the plot library. when a teacher says, â€œtake a look at
    the graph of [figureÂ 29](#%28counter._%28figure._fig~3acartesian-point%29%29)
    and tell me what px and py are,â€ you are likely to answer 31 and 26, respectively,
    because you know that you need to read off the values where the vertical and horizontal
    lines that radiate out from p hit the axes.
  prefs: []
  type: TYPE_NORMAL
- en: We can express this idea in BSL. Assume you add
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â pÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 31Â 26))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'to the definitions area, click RUN, and perform these interactions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 31 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 26 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Defining p is like marking the point in a Cartesian plane; using [posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)
    and [posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)
    is like subscripting p with indexes: px and py.Computationally speaking, posn
    structures come with two equations:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  x0  y0))
    |  | == |  | x0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  x0  y0))
    |  | == |  | y0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'DrRacket uses these equations during computations. Here is an example of a
    computation involving posn structures:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket replaces p with ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  31  26)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 31Â 26))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket uses the law for [posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| 31 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Stop! Confirm the second interaction above with your own computation. Also use
    DrRacketâ€™s stepper to double-check.
  prefs: []
  type: TYPE_NORMAL
- en: 5.3Programming with posn[ðŸ”—](#(part._sec~3aprogramming-posn) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Now consider designing a function that computes the distance of some location
    to the origin of the canvas:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/f180d53753fa815ae429247a0f0b4e98.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'The picture clarifies that â€œdistanceâ€ means the length of the most direct pathâ€”<wbr>â€œas
    the crow fliesâ€â€”<wbr>from the designated point to the top-left corner of the canvas.Here
    are the purpose statement and the header:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â computes the distance of ap to the origin |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (distance-to-0Â ap)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â 0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The key is that distance-to-0 consumes a single value, some posn. It produces
    a single value, the distance of the location to the origin.In order to make up
    examples, we need to know how to compute this distance. For points with 0 as one
    of the coordinates, the result is the other coordinate:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (distance-to-0Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 0Â 5))Â 5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (distance-to-0Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 7Â 0))Â 7)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'For the general case, we could try to figure out the formula on our own, or
    we may recall the formula from our geometry courses. As you know, this is domain
    knowledge that you might have, but in case you donâ€™t we supply it; after all,
    this domain knowledge isnâ€™t computer science. So, here is the distance formula
    for (x,y) again:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/3bcc995fde35661f1299e4353837ba17.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'Given this formula, we can easily make up some more functional examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (distance-to-0Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 3Â 4))Â 5)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (distance-to-0Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 8Â 6))Â 10)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (distance-to-0Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 5Â 12))Â 13)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Just in case youâ€™re wondering, we rigged the examples so that the results would
    be easy to figure out. This isnâ€™t the case for all posn structures.
  prefs: []
  type: TYPE_NORMAL
- en: Stop! Plug the x- and y-coordinates from the examples into the formula. Confirm
    the expected results for all five examples.
  prefs: []
  type: TYPE_NORMAL
- en: 'Next we can turn our attention to the definition of the function. The examples
    imply that the design of distance-to-0 does not need to distinguish between different
    situations; it always just computes the distance from the x- and y-coordinates
    inside the given posn structure. But the function must select these coordinates
    from the given posn structure. And for that, it uses the [posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)
    and [posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)
    primitives. Specifically, the function needs to compute ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)  ap)
    and ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)  ap)
    because ap is the name of the given, unknown posn structure:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (distance-to-0Â ap)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â ap)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â ap)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Using this template and the examples, the rest is straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (distance-to-0Â ap)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([sqrt](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqrt%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([sqr](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqr%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â ap))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â ([sqr](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqr%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â ap)))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The function squares ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)  ap)
    and ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)  ap),
    which represent the x- and y-coordinates, sums up the results, and takes the square
    root. With DrRacket, we can also quickly check that our new function produces
    the proper results for our examples.ExerciseÂ 63\. Evaluate the following expressions:'
  prefs: []
  type: TYPE_NORMAL
- en: (distance-to-0  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  3  4))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (distance-to-0  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  6  ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)  2  4)))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)  (distance-to-0  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  12  5))  10)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'by hand. Show all steps. Assume that [sqr](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._sqr%29%29)
    performs its computation in a single step. Check the results with DrRacketâ€™s stepper.ExerciseÂ 64\.
    The Manhattan distance of a point to the origin considers a path that follows
    the rectangular grid of streets found in Manhattan. Here are two examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/27c0fbfa2eddf6d47f67f9984206300b.png)Â Â Â Â Â Â Â Â Â Â ![image](../Images/6094a3a7df57141bbab594ab575ce6cd.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: The left one shows a â€œdirectâ€ strategy, going as far left as needed, followed
    by as many upward steps as needed. In comparison, the right one shows a â€œrandom
    walkâ€ strategy, going some blocks leftward, some upward, and so on until the destinationâ€”<wbr>here,
    the originâ€”<wbr>is reached.
  prefs: []
  type: TYPE_NORMAL
- en: Stop! Does it matter which strategy you follow?
  prefs: []
  type: TYPE_NORMAL
- en: Design the function manhattan-distance, which measures the Manhattan distance
    of the given posn to the origin.
  prefs: []
  type: TYPE_NORMAL
- en: 5.4Defining Structure Types[ðŸ”—](#(part._sec~3astructures) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Unlike numbers or Boolean values, structures such as posn usually donâ€™t come
    with a programming language. Only the mechanism to define structure types is provided;
    the rest is left up to the programmer. This is also true for BSL.
  prefs: []
  type: TYPE_NORMAL
- en: 'A structure type definition is another form of definition, distinct from constant
    and function definitions. Here is how the creator of DrRacket defined the posn
    structure type in BSL:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â posnÂ [xÂ y])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: In general, a structure type definition has this shape:The use of brackets in
    a structure type definition is a convention, not a necessity. It makes the field
    names stand out. Replacing brackets with parentheses is perfectly acceptable.
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â StructureNameÂ [FieldNameÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The keyword [define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)
    signals the introduction of a new structure type. It is followed by the name of
    the structure. The third part of a structure type definition is a sequence of
    names enclosed in brackets; these names are the fields.A structure type definition
    actually defines functions. But, unlike an ordinary function definition, a structure
    type definition defines many functions simultaneously. Specifically, it defines
    three kinds of functions:'
  prefs: []
  type: TYPE_NORMAL
- en: one constructor, a function that creates structure instances. It takes as many
    values as there are fields; as mentioned, structure is short for structure instance.
    The phrase structure type is a generic name for the collection of all possible
    instances;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: one selector per field, which extracts the value of the field from a structure
    instance; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: one structure predicate, which, like ordinary predicates, distinguishes instances
    from all other kinds of values.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A program can use these as if they were functions or built-in primitives.
  prefs: []
  type: TYPE_NORMAL
- en: Curiously, a structure type definition makes up names for the various new operations
    it creates. For the name of the constructor, it prefixes the structure name with
    â€œmake-â€ and for the names of the selectors it postfixes the structure name with
    the field names. Finally, the predicate is just the structure name with â€œ?â€ added,
    pronounced â€œhuhâ€ when read aloud.
  prefs: []
  type: TYPE_NORMAL
- en: 'This naming convention looks complicated and perhaps even confusing. But, with
    a little bit of practice, youâ€™ll get the hang of it. It also explains the functions
    that come with posn structures: [make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    is the constructor, [posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)
    and [posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)
    are selectors. While we havenâ€™t encountered [posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)
    yet, we now know that it exists; the next chapter explains the role of these predicates
    in detail.'
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 65\. Take a look at the following structure type definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  movie  [title  producer  year])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  person  [name  hair  eyes  phone])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  pet  [name  number])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  CD  [artist  title  price])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  sweater  [material  size  producer])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Write down the names of the functions (constructors, selectors, and predicates)
    that each introduces.Enough with posn structures for a while. Letâ€™s look at a
    structure type definition that we might use to keep track of contacts such as
    those in your cell phone:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â entryÂ [nameÂ phoneÂ email])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Here are the names of the functions that this definition introduces:'
  prefs: []
  type: TYPE_NORMAL
- en: make-entry, which consumes three values and constructs an instance of entry;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: entry-name, entry-phone, and entry-email, which consume one instance of entry
    and select one of the three field values; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: entry?, the predicate.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Since each entry combines three values, the expression
  prefs: []
  type: TYPE_NORMAL
- en: (make-entryÂ "Al Abe"Â "666-7771"Â "lee@x.me")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: creates an entry structure with "Al Abe" in the name field, "666-7771" in the
    phone field, and "lee@x.me" in the email field.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 66\. Revisit the structure type definitions of [exerciseÂ 65](#%28counter._%28exercise._struct3%29%29).
    Make sensible guesses as to what kind of values go with which fields. Then create
    at least one instance per structure type definition.
  prefs: []
  type: TYPE_NORMAL
- en: Every structure type definition introduces a new kind of structure, distinct
    from all others. Programmers want this kind of expressive power because they wish
    to convey an intention with the structure name. Wherever a structure is created,
    selected, or tested, the text of the program explicitly reminds the reader of
    this intention. If it werenâ€™t for these future readers of code, programmers could
    use one structure definition for structures with one field, another for structures
    with two fields, a third for structures with three, and so on.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this context, letâ€™s study another programming problem:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Develop a structure type definition for a program that deals
    with â€œbouncing balls,â€ briefly mentioned at the very beginning of this chapter.
    The ballâ€™s location is a single number, namely the distance of pixels from the
    top. Its constant speed is the number of pixels it moves per clock tick. Its velocity
    is the speed plus the direction in which it moves.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Since the ball moves along a straight, vertical line, a number is a perfectly
    adequate data representation for its velocity:'
  prefs: []
  type: TYPE_NORMAL
- en: A positive number means the ball moves down.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A negative number means it moves up.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can use this domain knowledge to formulate a structure type definition:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â ballÂ [locationÂ velocity])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Both fields are going to contain numbers, so (make-ball  10  -3) is a good data
    example. It represents a ball that is 10 pixels from the top and moves up at 3
    pixels per clock tick.
  prefs: []
  type: TYPE_NORMAL
- en: Notice how, in principle, a ball structure merely combines two numbers, just
    like a posn structure. When a program contains the expression (ball-velocity  a-ball),
    it immediately conveys that this program deals with the representation of a ball
    and its velocity. In contrast, if the program used posn structures instead, ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)  a-ball)
    might mislead a reader of the code into thinking that the expression is about
    a y-coordinate.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 67\. Here is another way to represent bouncing balls:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â SPEEDÂ 3)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â balldÂ [locationÂ direction])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (make-balldÂ 10Â "up") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Interpret this code fragment and create other instances of balld.
  prefs: []
  type: TYPE_NORMAL
- en: 'Since structures are values, just like numbers or Booleans or strings, it makes
    sense that one instance of a structure occurs inside another instance. Consider
    game objects. Unlike bouncing balls, such objects donâ€™t always move along vertical
    lines. Instead, they move in some â€œobliqueâ€ manner across the canvas. Describing
    both the location and the velocity of a ball moving across a 2-dimensional world
    canvas demands two numbers: one per direction.It is physics that tells you to
    add an objectâ€™s velocity to its location to obtain its next location. Developers
    need to learn whom to ask about which domain. For the location part, the two numbers
    represent the x- and y-coordinates. Velocity describes the changes in the horizontal
    and vertical direction; in other words, these â€œchange numbersâ€ must be added to
    the respective coordinates to find out where the object will be next.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Clearly, posn structures can represent locations. For the velocities, we define
    the vel structure type:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â velÂ [deltaxÂ deltay])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'It comes with two fields: deltax and deltay. The word â€œdeltaâ€ is commonly used
    to speak of change when it comes to simulations of physical activities, and the
    x and y parts indicate which axis is concerned.Now we can use instances of ball
    to combine a posn structure with a vel structure to represent balls that move
    in straight lines but not necessarily along only vertical (or horizontal) lines:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ball1
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-ballÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 30Â 40)Â (make-velÂ -10Â 5)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: One way to interpret this instance is to think of a ball that is 30 pixels from
    the left and 40 pixels from the top. It moves 10 pixels toward the left per clock
    tick, because subtracting 10 pixels from the x-coordinate brings it closer to
    the left. As for the vertical direction, the ball drops at 5 pixels per clock
    tick, because adding positive numbers to a y-coordinate increases the distance
    from the top.ExerciseÂ 68\. An alternative to the nested data representation of
    balls uses four fields to keep track of the four properties:Yet another alternative
    is to use complex numbers. If you know about them, contemplate a data representation
    that uses them for both location and velocity. For example, in BSL, 4-3i is a
    complex number and could be used to represent the location or velocity (4,-3).
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â ballfÂ [xÂ yÂ deltaxÂ deltay])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Programmers call this a flat representation. Create an instance of ballf that
    has the same interpretation as ball1.For a second example of nested structures,
    letâ€™s briefly look at the example of contact lists. Many cell phones support contact
    lists that allow several phone numbers per name: one for a home line, one for
    the office, and one for a cell phone number. For phone numbers, we wish to include
    both the area code and the local number. Since this nests the information, itâ€™s
    best to create a nested data representation, too:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â centryÂ [nameÂ homeÂ officeÂ cell])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â phoneÂ [areaÂ number])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (make-centryÂ "Shriram Fisler" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â (make-phoneÂ 207Â "363-2421") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â (make-phoneÂ 101Â "776-1099") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â (make-phoneÂ 208Â "112-9981")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The intention here is that an entry on a contact list has four fields: a name
    and three phone records. The latter are represented with instance of phone, which
    separates the area code from the local phone number.'
  prefs: []
  type: TYPE_NORMAL
- en: In sum, nesting information is natural. The best way to represent such information
    with data is to mirror the nesting with nested structure instances. Doing so makes
    it easy to interpret the data in the application domain of the program, and it
    is also straightforward to go from examples of information to data. Of course,
    it is really the task of data definitions to specify how to go back and forth
    between information and data. Before we study data definitions for structure type
    definitions, however, we first take a systematic look at computing with, and thinking
    about, structures.
  prefs: []
  type: TYPE_NORMAL
- en: 5.5Computing with Structures[ðŸ”—](#(part._sec~3aeval-structs) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Structure types generalize Cartesian points in two ways. First, a structure
    type may specify an arbitrary number of fields: zero, one, two, three, and so
    forth. Second, structure types name fields, they donâ€™t number them.Most programming
    languages also support structure-like data that use numeric field names. This
    helps programmers read code because it is much easier to remember that a family
    name is available in a field called last-name than in the 7th field.'
  prefs: []
  type: TYPE_NORMAL
- en: In the same spirit, computing with structure instances generalizes the manipulation
    of Cartesian points. To appreciate this idea, let us first look at a diagrammatic
    way to think about structure instances as lockboxes with as many compartments
    as there are fields. Here is a representation of
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â plÂ (make-entryÂ "Al
    Abe"Â "666-7771"Â "lee@x.me"))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'as such a diagram:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/abc1068791547899f90f899357d7d37f.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'The boxâ€™s italicized label identifies it as an instance of a specific structure
    type; each compartment is labeled, too. Here is another instance:'
  prefs: []
  type: TYPE_NORMAL
- en: (make-entryÂ "Tara Harp"Â "666-7770"Â "th@smlu.edu")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'corresponds to a similar box diagram, though the content differs:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/3d4907c4750007b127b07c56336fec48.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'Not surprisingly, nested structure instances have a diagram of boxes nested
    in boxes. Thus, ball1 from above is equivalent to this diagram:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/7df3b7888fdb201314178d4992343e96.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: In this case, the outer box contains two boxes, one per field.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 69\. Draw box representations for the solution of [exerciseÂ 65](#%28counter._%28exercise._struct3%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'In the context of this imagery, a selector is like a key. It opens a specific
    compartment for a certain kind of box and thus enables the holder to extract its
    content. Hence, applying entry-name to pl from above yields a string:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (entry-nameÂ pl) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| "Al Abe" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'But entry-name applied to a posn structure signals an error:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (entry-nameÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 42Â 5))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| entry-name:expects an entry, given (make-posn 42 5) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'If a compartment contains a box, it might be necessary to use two selectors
    in a row to get to the desired number:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (ball-velocityÂ ball1) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (make-vel -10 5) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Applying ball-velocity to ball1 extracts the value of the velocity field, which
    is an instance of vel. To get to the velocity along the x axis, we apply a selector
    to the result of the first selection:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (vel-deltaxÂ (ball-velocityÂ ball1)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| -10 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Since the inner expression extracts the velocity from ball1, the outer expression
    extracts the value of the deltax field, which in this case is -10.The interactions
    also show that structure instances are values. DrRacket prints them exactly as
    entered, just like for plain values such as numbers:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (make-velÂ -10Â 5) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (make-vel -10 5) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (make-entryÂ "Tara Harp"Â "666-7770"Â "th@smlu.edu") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (make-entry "Tara Harp" "666-7770" "th@smlu.edu") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; > (make-centry &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â "Shriram Fisler" &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (make-phoneÂ 207Â "363-2421") &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (make-phoneÂ 101Â "776-1099") &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â (make-phoneÂ 208Â "112-9981")) &#124;'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| (make-centry ...) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Stop! Try this last interaction at home, so you see the proper result.
  prefs: []
  type: TYPE_NORMAL
- en: Generally speaking, a structure type definition not only creates new functions
    and new ways to create values, but it also adds new laws of computation to DrRacketâ€™s
    knowledge. These laws generalize those for posn structures in [Computing with
    posns](#%28part._sec~3aeval-posns%29), and they are best understood by example.
  prefs: []
  type: TYPE_NORMAL
- en: When DrRacket encounters a structure type definition with two fields,
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â ballÂ [locationÂ velocity])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'it introduces two laws, one per selector:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (ball-location  (make-ball  l0  v0)) |  | == |  | l0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (ball-velocity  (make-ball  l0  v0)) |  | == |  | v0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: For different structure type definitions, it introduces analogous laws. Thus,
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â velÂ [deltaxÂ deltay])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'DrRacket adds these two laws to its knowledge:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (vel-deltax  (make-vel  dx0  dy0)) |  | == |  | dx0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (vel-deltay  (make-vel  dx0  dy0)) |  | == |  | dy0 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Using these laws, we can now explain the interaction from above:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (vel-deltaxÂ (ball-velocityÂ ball1)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket replaces ball1 with its value |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (vel-deltax |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (ball-velocity |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (make-ballÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 30Â 40)Â (make-velÂ -10Â 5))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket uses the law for ball-velocity |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (vel-deltaxÂ (make-velÂ -10Â 5)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ==Â ;Â DrRacket uses the law for vel-deltax |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| -10 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'ExerciseÂ 70\. Spell out the laws for these structure type definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â centryÂ [nameÂ homeÂ officeÂ cell])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â phoneÂ [areaÂ number])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Use DrRacketâ€™s stepper to confirm 101 as the value of this expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (phone-area |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â (centry-office |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-centryÂ "Shriram Fisler" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (make-phoneÂ 207Â "363-2421") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (make-phoneÂ 101Â "776-1099") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (make-phoneÂ 208Â "112-9981"))))Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Predicates are the last idea that we must discuss to understand structure type
    definitions. As mentioned, every structure type definition introduces one new
    predicate. DrRacket uses these predicates to discover whether a selector is applied
    to the proper kind of value; the next chapter explains this idea in detail. Here
    we just want to convey that these predicates are just like the predicates from
    â€œarithmetic.â€ While [number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)
    recognizes numbers and [string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)
    recognizes strings, predicates such as [posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)
    and entry? recognize posn structures and entry structures. We can confirm our
    ideas of how they work with experiments in the interactions area. Assume that
    the definitions area contains these definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â apÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 7Â 0))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â plÂ (make-entryÂ "Al
    Abe"Â "666-7771"Â "lee@x.me")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'If [posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)
    is a predicate that distinguishes posns from all other values, we should expect
    that it yields #false for numbers and #true for ap:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â ap)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â 42)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > ([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 3Â 4))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Similarly, entry? distinguishes entry structures from all other values:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (entry?Â pl) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #true |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (entry?Â 42) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (entry?Â #true) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In general, a predicate recognizes exactly those values constructed with a
    constructor of the same name. [Intermezzo 1: Beginning Student Language](i1-2.html)
    explains this law in detail, and it also collects the laws of computing for BSL
    in one place.ExerciseÂ 71\. Place the following into DrRacketâ€™s definitions area:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â distances in terms of pixels: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â HEIGHTÂ 200)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MIDDLEÂ ([quotient](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._quotient%29%29)Â HEIGHTÂ 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â WIDTHÂ Â 400)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â CENTERÂ ([quotient](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._quotient%29%29)Â WIDTHÂ 2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â gameÂ [left-playerÂ right-playerÂ ball])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â game0
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-gameÂ MIDDLEÂ MIDDLEÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â CENTERÂ CENTER)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Click RUN and evaluate the following expressions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (game-ballÂ game0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â (game-ballÂ game0))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| (game-left-playerÂ game0) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Explain the results with step-by-step computations. Double-check your computations
    with DrRacketâ€™s stepper.
  prefs: []
  type: TYPE_NORMAL
- en: 5.6Programming with Structures[ðŸ”—](#(part._sec~3aprogstructs) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Proper programming calls for data definitions. With the introduction of structure
    type definitions, data definitions become interesting. Remember that a data definition
    provides a way of representing information into data and interpreting that data
    as information. For structure types, this calls for a description of what kind
    of data goes into which field. For some structure type definitions, formulating
    such descriptions is easy and obvious:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â posnÂ [xÂ y])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Posn is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  [Number](#%28tech._number%29)  [Number](#%28tech._number%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation a point x pixels from left, y from top |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'It doesnâ€™t make any sense to use other kinds of data to create a posn. Similarly,
    all fields of entryâ€”<wbr>our structure type definition for entries on a contact
    listâ€”<wbr>are clearly supposed to be strings, according to our usage in the preceding
    section:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â entryÂ [nameÂ phoneÂ email])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An Entry is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-entry  [String](#%28tech._string%29)  [String](#%28tech._string%29)  [String](#%28tech._string%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation a contact''s name, phone#, and email |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'For both posn and entry, a reader can easily interpret instances of these structures
    in the application domain.Contrast this simplicity with the structure type definition
    for ball, which obviously allows at least two distinct interpretations:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â ballÂ [locationÂ velocity])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Ball-1d is a structure:Â Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-ball  [Number](#%28tech._number%29)  [Number](#%28tech._number%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation 1 distance to top and velocity |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation 2 distance to left and velocity |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Whichever one we use in a program, we must stick to it consistently. As [Defining
    Structure Types](#%28part._sec~3astructures%29) shows, however, it is also possible
    to use ball structures in an entirely different manner:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Ball-2d is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-ball  [Posn](#%28tech._posn%29)  [Vel](#%28tech._vel%29)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation a 2-dimensional position and velocity |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â velÂ [deltaxÂ deltay])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Vel is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-vel  [Number](#%28tech._number%29)  [Number](#%28tech._number%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  (make-vel  dx  dy) means a velocity of |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â dx pixels [per tick] along the horizontal and |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â dy pixels [per tick] along the vertical direction |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Here we name a second collection of data, [Ball-2d](#%28tech._ball._2d%29),
    distinct from [Ball-1d](#%28tech._ball._1d%29), to describe data representations
    for balls that move in straight lines across a world canvas. In short, it is possible
    to use one and the same structure type in two different ways. Of course, within
    one program, it is best to stick to one and only one use; otherwise you are setting
    yourself up for problems.
  prefs: []
  type: TYPE_NORMAL
- en: Also, [Ball-2d](#%28tech._ball._2d%29) refers to another one of our data definitions,
    namely, the one for [Vel](#%28tech._vel%29). While all other data definitions
    have thus far referred to built-in data collections ([Number](#%28tech._number%29),
    [Boolean](#%28tech._boolean%29), [String](#%28tech._string%29)), it is perfectly
    acceptable, and indeed common, that one of your data definitions refers to another.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 72\. Formulate a data definition for the above phone structure type
    definition that accommodates the given examples.
  prefs: []
  type: TYPE_NORMAL
- en: 'Next formulate a data definition for phone numbers using this structure type
    definition:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â phone#Â [areaÂ switchÂ num])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Historically, the first three digits make up the area code, the next three the
    code for the phone switch (exchange) of your neighborhood, and the last four the
    phone with respect to the neighborhood. Describe the content of the three fields
    as precisely as possible with intervals.
  prefs: []
  type: TYPE_NORMAL
- en: At this point, you might be wondering what data definitions really mean. This
    question, and its answer, is the topic of the next section. For now, we indicate
    how to use data definitions for program design.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is a problem statement to set up some context:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Sample Problem Your team is designing an interactive game program that moves
    a red dot across a ![image](../Images/2e7c3a3683fb083a963341e02a1087cd.png) canvas
    and allows players to use the mouse to reset the dot. Here is how far you got
    together:'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MTSÂ ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 100Â 100))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â DOTÂ ([circle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._circle%29%29)Â 3Â "solid"Â "red"))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A [Posn](#%28tech._posn%29) represents the state of the world. |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Posn](#%28tech._posn%29) -> [Posn](#%28tech._posn%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ p0)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â p0
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-tick](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29)Â x+]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[on-mouse](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-mouse%29%29)Â reset-dot]
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)Â scene+dot]))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Your task is to design scene+dot, the function that adds a red dot to the empty
    canvas at the specified position.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The problem context dictates the signature of your function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Posn](#%28tech._posn%29) -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds a red spot to MTS at p |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (scene+dotÂ p)Â MTS)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Adding a purpose statement is straightforward. As [Designing Functions](#%28part._sec~3adesign-func%29)
    mentions, it uses the functionâ€™s parameter to express what the function computes.Now
    we work out a couple of examples and formulate them as tests:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (scene+dotÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 20))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â DOTÂ 10Â 20Â MTS))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (scene+dotÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 88Â 73))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â DOTÂ 88Â 73Â MTS))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Given that the function consumes a [Posn](#%28tech._posn%29), we know that
    the function can extract the values of the x and y fields:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (scene+dotÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Once we see these additional pieces in the body of the function, the rest of
    the definition is straightforward. Using [place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29),
    the function puts DOT into MTS at the coordinates contained in p:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (scene+dotÂ p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â DOTÂ ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â MTS))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'A function may produce structures. Letâ€™s resume our sample problem from above
    because it includes just such a task:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem A colleague is asked to define x+, a function that consumes a
    [Posn](#%28tech._posn%29) and increases the x-coordinate by 3.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Recall that the x+ function handles clock ticks.We can adapt the first few
    steps of the design of scene+dot:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Posn](#%28tech._posn%29) -> [Posn](#%28tech._posn%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â increases the x-coordinate of p by 3 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (x+Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 0))Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 13Â 0))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (x+Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The signature, the purpose, and the example all come out of the problem statement.
    Instead of a headerâ€”<wbr>a function with a default resultâ€”<wbr>our sketch contains
    the two selector expressions for [Posn](#%28tech._posn%29)s. After all, the information
    for the result must come from the inputs, and the input is a structure that contains
    two values.Finishing the definition is easy now. Since the desired result is a
    [Posn](#%28tech._posn%29), the function uses [make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    to combine the pieces:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (x+Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â 3)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ExerciseÂ 73\. Design the function posn-up-x, which consumes a [Posn](#%28tech._posn%29)
    p and a Number n. It produces a [Posn](#%28tech._posn%29) like p with n in the
    x field.
  prefs: []
  type: TYPE_NORMAL
- en: 'A neat observation is that we can define x+ using posn-up-x:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (x+Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (posn-up-xÂ pÂ ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â 3)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Note Functions such as posn-up-x are often called updaters or functional setters.
    They are extremely useful when you write large programs.A function may also produce
    instances from atomic data. While [make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    is a built-in primitive that does so, our running problem provides another fitting
    illustration:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Another colleague is tasked to design reset-dot, a function that
    resets the dot when the mouse is clicked.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'To tackle this problem, you need to recall from [Designing World Programs](#%28part._.D.K._sec~3adesign-world%29)
    that mouse-event handlers consume four values: the current state of the world,
    the x- and y-coordinates of the mouse click, and a [MouseEvt](#%28tech._mouseevt%29).By
    adding the knowledge from the sample problem to the program design recipe, we
    get a signature, a purpose statement, and a header:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Posn](#%28tech._posn%29)  [Number](#%28tech._number%29)  [Number](#%28tech._number%29)  [MouseEvt](#%28tech._mouseevt%29)
    -> [Posn](#%28tech._posn%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â for mouse clicks, ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  x  y);
    otherwise p |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (reset-dotÂ pÂ xÂ yÂ me)Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Examples for mouse-event handlers need a [Posn](#%28tech._posn%29), two numbers,
    and a [MouseEvt](#%28tech._mouseevt%29), which is just a special kind of [String](#%28tech._string%29).
    A mouse click, for example, is represented with one of two strings: "button-down"
    and "button-up". The first one signals that a user clicked the mouse button, the
    latter signals its release. With this in mind, here are two examples, which you
    may wish to study and interpret:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (reset-dotÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 20)Â 29Â 31Â "button-down")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 29Â 31))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (reset-dotÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 20)Â 29Â 31Â "button-up")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 20))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Although the function consumes only atomic forms of data, its purpose statement
    and the examples suggest that it differentiates between two kinds of [MouseEvt](#%28tech._mouseevt%29)s:
    "button-down" and all others. Such a case split suggests a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (reset-dotÂ pÂ xÂ yÂ me)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([mouse=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._mouse~3d~3f%29%29)Â "button-down"Â me)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â pÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â xÂ yÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â pÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â xÂ yÂ [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Following the design recipe, this skeleton mentions the parameters to remind
    you of what data is available.The rest is straightforward again because the purpose
    statement itself dictates what the function computes in each of the two cases:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (reset-dotÂ pÂ xÂ yÂ me)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([mouse=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._mouse~3d~3f%29%29)Â meÂ "button-down")Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â xÂ y)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â p]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: As above, we could have mentioned that [make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    creates instances of [Posn](#%28tech._posn%29), but you know this and we donâ€™t
    need to remind you constantly.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 74\. Copy all relevant constant and function definitions to DrRacketâ€™s
    definitions area. Add the tests and make sure they pass. Then run the program
    and use the mouse to place the red dot.
  prefs: []
  type: TYPE_NORMAL
- en: 'Many programs deal with nested structures. We illustrate this point with another
    small excerpt from a world program:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Your team is designing a game program that keeps track of an
    object that moves across the canvas at changing speed. The chosen data representation
    requires two data definitions:Remember, itâ€™s about physics.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â ufoÂ [locÂ vel])
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A UFO is a structure: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-ufo  [Posn](#%28tech._posn%29)  [Vel](#%28tech._vel%29)) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  (make-ufo  p  v) is at location |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â p moving at velocity v |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: It is your task to develop ufo-move-1. The function computes the location of
    a given [UFO](#%28tech._ufo%29) after one clock tick passes.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Let us start with some examples that explore the data definitions a bit:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â v1Â (make-velÂ 8Â -3))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â v2Â (make-velÂ -5Â -3))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| The order of these definitions matters. See [Intermezzo 1: Beginning Student
    Language](i1-2.html). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â p1Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 22Â 80))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â p2Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 30Â 77))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â u1Â (make-ufoÂ p1Â v1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â u2Â (make-ufoÂ p1Â v2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â u3Â (make-ufoÂ p2Â v1))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â u4Â (make-ufoÂ p2Â v2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The first four are elements of [Vel](#%28tech._vel%29) and [Posn](#%28tech._posn%29).
    The last four combine the first four in all possible combinations.Next we write
    down a signature, a purpose, some examples, and a function header:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [UFO](#%28tech._ufo%29) -> [UFO](#%28tech._ufo%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â determines where u moves in one clock tick; |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â leaves the velocity as is |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (ufo-move-1Â u1)Â u3)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (ufo-move-1Â u2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (make-ufoÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 17Â 77)Â v2))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (ufo-move-1Â u)Â u)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'For the function examples, we use the data examples and our domain knowledge
    of positions and velocities. Specifically, we know that a vehicle that is moving
    north at 60 miles per hour and west at 10 miles per hour is going to end up 60
    miles north from its starting point and 10 miles west after one hour of driving.
    After two hours, it will be 120 miles north from the starting point and 20 miles
    to its west.As always, a function that consumes a structure instance can (and
    probably must) extract information from the structure to compute its result. So
    once again we add selector expressions to the function definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (ufo-move-1Â u)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (ufo-locÂ u)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (ufo-velÂ u)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Note The selector expressions raise the question whether we need to refine
    this sketch even more. After all, the two expressions extract instances of [Posn](#%28tech._posn%29)
    and [Vel](#%28tech._vel%29), respectively. These two are also structure instances,
    and we could extract values from them in turn. Here is what the resulting skeleton
    would look like:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [UFO](#%28tech._ufo%29) -> [UFO](#%28tech._ufo%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (ufo-move-1Â u)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â (ufo-locÂ u))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â (ufo-locÂ u))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (vel-deltaxÂ (ufo-velÂ u))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (vel-deltayÂ (ufo-velÂ u))Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Doing so obviously makes the sketch look quite complex, however. For truly realistic
    programs, following this idea to its logical end would create incredibly complex
    program outlines. More generally,
  prefs: []
  type: TYPE_NORMAL
- en: If a function deals with nested structures, develop one function per level of
    nesting.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'In the second part of the book, this guideline becomes even more important
    and we refine it a bit. EndHere we focus on how to combine the given [Posn](#%28tech._posn%29)
    and the given [Vel](#%28tech._vel%29) in order to obtain the next location of
    the [UFO](#%28tech._ufo%29)â€”<wbr>because thatâ€™s what our physics knowledge tells
    us. Specifically, it says to â€œaddâ€ the two together, where â€œaddingâ€ canâ€™t mean
    the operation we usually apply to numbers. So let us imagine that we have a function
    for adding a [Vel](#%28tech._vel%29) to a [Posn](#%28tech._posn%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Posn](#%28tech._posn%29)  [Vel](#%28tech._vel%29) -> [Posn](#%28tech._posn%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds v to p |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (posn+Â pÂ v)Â p)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Writing down the signature, purpose, and header like this is a legitimate way
    of programming. It is called â€œmaking a wishâ€ and is a part of â€œmaking a wish listâ€
    as described in [From Functions to Programs](#%28part._sec~3adesign%29).The key
    is to make wishes in such a way that we can complete the function that we are
    working on. In this manner, we can split difficult programming tasks into different
    tasks, a technique that helps us solve problems in reasonably small steps. For
    the sample problem, we get a complete definition for ufo-move-1:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (ufo-move-1Â u)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (make-ufoÂ (posn+Â (ufo-locÂ u)Â (ufo-velÂ u)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (ufo-velÂ u))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Because ufo-move-1 and posn+ are complete definitions, we can even click RUN,
    which checks that DrRacket doesnâ€™t complain about grammatical problems with our
    work so far. Naturally, the tests fail because posn+ is just a wish, not the function
    we need.Now it is time to focus on posn+. We have completed the first two steps
    of the design (data definitions, signature/purpose/header),In geometry, the operation
    corresponding to posn+ is called a translation. so we must create examples. One
    easy way to create functional examples for a â€œwishâ€ is to use the examples for
    the original function and to turn them into examples for the new function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (posn+Â p1Â v1)Â p2)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (posn+Â p1Â v2)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 17Â 77))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'For this problem, we know that (ufo-move-1  (make-ufo  p1  v1)) is to produce
    p2. At the same time, we know that ufo-move-1 applies posn+ to p1 and v1, implying
    that posn+ must produce p2 for these inputs. Stop! Check our manual calculations
    to ensure that you are following what we are doing.We are now able to add selector
    expressions to our design sketch:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (posn+Â pÂ v)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (vel-deltaxÂ v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (vel-deltayÂ v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Because posn+ consumes instances of [Posn](#%28tech._posn%29) and [Vel](#%28tech._vel%29)
    and because each piece of data is an instance of a two-field structure, we get
    four expressions. In contrast to the nested selector expressions from above, these
    are simple applications of a selector to a parameter.If we remind ourselves what
    these four expressions represent, or if we recall how we computed the desired
    results from the two structures, our completion of the definition of posn+ is
    straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (posn+Â pÂ v)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â p)Â (vel-deltaxÂ v))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â ([+](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2B%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â p)Â (vel-deltayÂ v))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The first step is to add the velocity in the horizontal direction to the x-coordinate
    and the velocity in the vertical direction to the y-coordinate. This yields two
    expressions, one per new coordinate. With [make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    we can combine them into a single [Posn](#%28tech._posn%29) again.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 75\. Enter these definitions and their test cases into the definitions
    area of DrRacket and make sure they work. This is the first time that you have
    dealt with a â€œwish,â€ and you need to make sure you understand how the two functions
    work together.
  prefs: []
  type: TYPE_NORMAL
- en: 5.7The Universe of Data[ðŸ”—](#(part._data-uni._sec~3adata-uni) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Every language comes with a universe of data. This data represents information
    from and about the external world; it is what programs manipulate. This universe
    of data is a collection that not only containsRemember that mathematicians call
    data collections or data classes sets. all built-in data but also any piece of
    data that any program may ever create.
  prefs: []
  type: TYPE_NORMAL
- en: The left side of [figureÂ 30](#%28counter._data-uni._%28figure._fig~3auniverse%29%29)
    shows one way to imagine the universe of BSL. Since there are infinitely many
    numbers and strings, the collection of all data is infinite. We indicate â€œinfinityâ€
    in the figure with â€œ...â€, but a real definition would have to avoid this imprecision.
  prefs: []
  type: TYPE_NORMAL
- en: Neither programs nor individual functions in programs deal with the entire universe
    of data. It is the purpose of a data definition to describe parts of this universe
    and to name these parts so that we can refer to them concisely. Put differently,
    a named data definition is a description of a collection of data, and that name
    is usable in other data definitions and in function signatures. In a function
    signature, the name specifies what data a function will deal with and, implicitly,
    which part of the universe of data it wonâ€™t deal with.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/d41f193abe3d782f8e663aebf199e0bc.png)Â Â Â Â Â Â Â Â Â Â ![image](../Images/600a6a8633c1e3c44f1e88a7c0391d46.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 30: The universe of data'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Practically, the data definitions of the first four chapters restrict built-in
    collections of data. They do so via an explicit or implicit itemization of all
    included values. For example, the region shaded with gray on the right side in
    [figureÂ 30](#%28counter._data-uni._%28figure._fig~3auniverse%29%29) depicts the
    following data definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A BS is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  "hello", |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  "world", or |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  [pi](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._pi%29%29).
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: While this particular data definition looks silly, note the stylized mix of
    English and BSL that is used. Its meaning is precise and unambiguous, clarifying
    exactly which elements belong to [BS](#%28tech._data-uni._b%29) and which donâ€™t.
  prefs: []
  type: TYPE_NORMAL
- en: The definition of structure types completely revised the picture. When a programmer
    defines a structure type, the universe expands with all possible structure instances.
    For example, the addition of posn means that instances of posn with all possible
    values in the two fields appear. The middle bubble in [figureÂ 31](#%28counter._data-uni._%28figure._fig~3auni-struct%29%29)
    depicts the addition of these values, including such seeming nonsense as ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  "hello"  0)
    and ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  0  1)  2).
    And yes, some of these instances of posn make no sense to us. But, a BSL program
    may construct any of them.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/60c835d289de3e33d84df4afb96658ce.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 31: Adding structure to a universe'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Adding yet another structure type definition mixes and matches everything again.
    Say we add the definition for ball, also with two fields. As the third bubble
    in [figureÂ 31](#%28counter._data-uni._%28figure._fig~3auni-struct%29%29) shows,
    this addition creates instances of ball that contain numbers, posn structures,
    and so on, as well as instances of posn that contain instances of ball. Try it
    out in DrRacket! Add
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â ballÂ [locationÂ velocity])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: to the definitions area, hit RUN, and create some structure instances.As far
    as the pragmatics of data definitions is concerned, a data definition for structure
    types describes large collections of data via combinations of existing data definitions
    with instances. When we write
  prefs: []
  type: TYPE_NORMAL
- en: ;Â Posn is ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  [Number](#%28tech._number%29)  [Number](#%28tech._number%29))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'we are describing an infinite number of possible instances of posn. Like above,
    the data definitions use combinations of natural language, data collections defined
    elsewhere, and data constructors. Nothing else should show up in a data definition
    at the moment.A data definition for structures specifies a new collection of data
    made up of those instances to be used by our functions. For example, the data
    definition for [Posn](#%28tech._posn%29)s identifies the region shaded in gray
    in the center bubble of the universe in [figureÂ 31](#%28counter._data-uni._%28figure._fig~3auni-struct%29%29),
    which includes all those posn structures whose two fields contain numbers. At
    the same time, it is perfectly possible to construct an instance of posn that
    doesnâ€™t satisfy the requirement that both fields contain numbers:'
  prefs: []
  type: TYPE_NORMAL
- en: ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 1Â 1)Â "hello")
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This structure contains a posn in the x field and a string in the y field.ExerciseÂ 76\.
    Formulate data definitions for the following structure type definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  movie  [title  producer  year])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  person  [name  hair  eyes  phone])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  pet  [name  number])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  CD  [artist  title  price])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  sweater  [material  size  producer])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Make sensible assumptions as to what kind of values go into each field.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 77\. Provide a structure type definition and a data definition for
    representing points in time since midnight. A point in time consists of three
    numbers: hours, minutes, and seconds.'
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 78\. Provide a structure type and a data definition for representing
    three-letter words. A word consists of lowercase letters, represented with the
    [1String](#%28tech._1string%29)s "a" through "z" plus #false. Note This exercise
    is a part of the design of a hangman game; see [exerciseÂ 396](part_four.html#%28counter._%28exercise._ex~3ahangman-list%29%29).'
  prefs: []
  type: TYPE_NORMAL
- en: Programmers not only write data definitions, they also read them in order to
    understand programs, to expand the kind of data they can deal with, to eliminate
    errors, and so on. We read a data definition to understand how to create data
    that belongs to the designated collection and to determine whether some piece
    of data belongs to some specified class.
  prefs: []
  type: TYPE_NORMAL
- en: 'Since data definitions play such a central and important role in the design
    process, it is often best to illustrate data definitions with examples just like
    we illustrate the behavior of functions with examples. And indeed, creating data
    examples from a data definition is straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: for a built-in collection of data (number, string, Boolean, images), choose
    your favorite examples;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Note On occasion, people use descriptive names to qualify built-in data collections,
    such as NegativeNumber or OneLetterString. They are no replacement for a well-written
    data definition. End
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: for an enumeration, use several of the items of the enumeration;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: for intervals, use the end points (if they are included) and at least one interior
    point;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: for itemizations, deal with each part separately; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: for data definitions for structures, follow the natural language description;
    that is, use the constructor and pick an example from the data collection named
    for each field.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Thatâ€™s all there is to constructing examples from data definitions for most
    of this book, though data definitions are going to become much more complex than
    what you have seen so far.ExerciseÂ 79\. Create examples for the following data
    definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Color is one of: |'
  prefs:
  - PREF_UL
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  "white" |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  "yellow" |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  "orange" |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  "green" |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  "red" |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  "blue" |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  "black" |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Note DrRacket recognizes many more strings as colors. End
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â H is a [Number](#%28tech._number%29) between 0 and 100. |'
  prefs:
  - PREF_UL
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents a happiness value |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â personÂ [fstnameÂ lstnameÂ male?])
    |'
  prefs:
  - PREF_UL
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Person is a structure: |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-person  [String](#%28tech._string%29)  [String](#%28tech._string%29)  [Boolean](#%28tech._boolean%29))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Is it a good idea to use a field name that looks like the name of a predicate?
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â dogÂ [ownerÂ nameÂ ageÂ happiness])
    |'
  prefs:
  - PREF_UL
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Dog is a structure: |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-dog  [Person](#%28tech._data-uni._person%29)  [String](#%28tech._string%29)  [PositiveInteger](#%28tech._positiveinteger%29)  [H](#%28tech._data-uni._h%29))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Add an interpretation to this data definition, too.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â A Weapon is one of: |'
  prefs:
  - PREF_UL
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  #false |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€”<wbr>  [Posn](#%28tech._posn%29) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  #false means the missile hasn''t |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â been fired yet; a [Posn](#%28tech._posn%29) means it is in flight |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: The last definition is an unusual itemization, combining built-in data with
    a structure type. The next chapter deals with such definitions in depth.
  prefs: []
  type: TYPE_NORMAL
- en: 5.8Designing with Structures[ðŸ”—](#(part._sec~3adesignstructs) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The introduction of structure types reinforces the need for all six steps in
    the design recipe. It no longer suffices to rely on built-in data collections
    to represent information; it is now clear that programmers must create data definitions
    for all but the simplest problems.
  prefs: []
  type: TYPE_NORMAL
- en: 'This section adds a design recipe, illustrating it with the following:'
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a function that computes the distance of objects in a
    3-dimensional space to the origin.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Here we go:'
  prefs: []
  type: TYPE_NORMAL
- en: When a problem calls for the representation of pieces of information that belong
    together or describe a natural whole, you need a structure type definition. It
    requires as many fields as there are relevant properties. An instance of this
    structure type corresponds to the whole, and the values in the fields correspond
    to its attributes.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A data definition for a structure type introduces a name for the collection
    of instances that are legitimate. Furthermore, it must describe which kind of
    data goes with which field. Use only names of built-in data collections or previously
    defined data definitions.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: In the end, we (and others) must be able to use the data definition to create
    sample structure instances. Otherwise, something is wrong with our data definition.
    To ensure that we can create instances, our data definitions should come with
    data examples.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Here is how we apply this idea to the sample problem:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â r3Â [xÂ yÂ z])
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An R3 is a structure: |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-r3  [Number](#%28tech._number%29)  [Number](#%28tech._number%29)  [Number](#%28tech._number%29))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ex1Â (make-r3Â 1Â 2Â 13))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ex2Â (make-r3Â -1Â 0Â 3))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: The structure type definition introduces a new kind of structure, r3, and the
    data definition introduces [R3](#%28tech._r3%29) as the name for all instances
    of r3 that contain only numbers.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You still need a signature, a purpose statement, and a function header but they
    remain the same. Stop! Do it for the sample problem.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Use the examples from the first step to create functional examples. For each
    field associated with intervals or enumerations, make sure to pick end points
    and intermediate points to create functional examples. We expect you to continue
    working on the sample problem.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A function that consumes structures usuallyâ€”<wbr>though not alwaysâ€”<wbr>extracts
    the values from the various fields in the structure. To remind yourself of this
    possibility, add a selector for each field to the templates for such functions.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Here is what we have for the sample problem:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '| ;Â [R3](#%28tech._r3%29) -> [Number](#%28tech._number%29) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â determines the distance of p to the origin |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (r3-distance-to-0Â p)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (r3-xÂ p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (r3-yÂ p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (r3-zÂ p)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: You may want to write down next to each selector expression what kind of data
    it extracts from the given structure; you can find this information in the data
    definition. Stop! Just do it!
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Use the selector expressions from the template when you define the function.
    Keep in mind that you may not need some of them.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Test. Test as soon as the function header is written. Test until all expressions
    have been covered. Test again when you make changes.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Finish the sample problem. If you cannot remember the distance of a 3-dimensional
    point to the origin, look it up in a geometry book.There you will find a formula
    such as ![image](../Images/a4bbf83748b5c5054955928ca10d4882.png).ExerciseÂ 80\.
    Create templates for functions that consume instances of the following structure
    types:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  movie  [title  director  year])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  pet  [name  number])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  CD  [artist  title  price])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)  sweater  [material  size  [color](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._color%29%29)])
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: No, you do not need data definitions for this task.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 81\. Design the function time->seconds, which consumes instances of
    time structures (see [exerciseÂ 77](#%28counter._data-uni._%28exercise._ex~3atime-structure%29%29))
    and produces the number of seconds that have passed since midnight. For example,
    if you are representing 12 hours, 30 minutes, and 2 seconds with one of these
    structures and if you then apply time->seconds to this instance, the correct result
    is 45002.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 82\. Design the function compare-word. The function consumes two three-letter
    words (see [exerciseÂ 78](#%28counter._data-uni._%28exercise._struct9%29%29)).
    It produces a word that indicates where the given ones agree and disagree. The
    function retains the content of the structure fields if the two agree; otherwise
    it places #false in the field of the resulting word. Hint The exercises mentions
    two tasks: the comparison of words and the comparison of â€œletters.â€'
  prefs: []
  type: TYPE_NORMAL
- en: 5.9Structure in the World[ðŸ”—](#(part._sec~3aworld-structs) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: When a world program must track two independent pieces of information, we must
    use a collection of structures to represent the world state data. One field keeps
    track of one piece of information and the other field the second piece of information.
    Naturally, if the domain world contains more than two independent pieces of information,
    the structure type definition must specify as many fields as there are distinct
    pieces of information.
  prefs: []
  type: TYPE_NORMAL
- en: 'Consider a space invader game that consists of a UFO and a tank. The UFO descends
    along a straight vertical line and a tank moves horizontally at the bottom of
    a scene. If both objects move at known constant speeds, all thatâ€™s needed to describe
    these two objects is one piece of information per object: the y-coordinate for
    the UFO and the x-coordinate for the tank. Putting those together requires a structure
    with two fields:'
  prefs: []
  type: TYPE_NORMAL
- en: ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â space-gameÂ [ufoÂ tank])
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: We leave it to you to formulate an adequate data definition for this structure
    type definition, including an interpretation. Ponder the hyphen in the name of
    the structure. BSL really allows the use of all kinds of characters in the names
    of variables, functions, structures, and field names. What are the selector names
    for this structure? The name of the predicate?
  prefs: []
  type: TYPE_NORMAL
- en: Every time we say â€œpiece of information,â€ we donâ€™t necessarily mean a single
    number or a single word. A piece of information may itself combine several pieces
    of information. Creating a data representation for that kind of information naturally
    leads to nested structures.
  prefs: []
  type: TYPE_NORMAL
- en: 'Letâ€™s add a modicum of spice to our imaginary space invader game. A UFO that
    descends only along a vertical line is boring. To turn this idea into an interesting
    game where the tank attacks the UFO with some weapon, the UFO must be able to
    descend in nontrivial lines, perhaps jumping randomly. An implementation of this
    idea means that we need two coordinates to describe the location of the UFO, so
    that our revised data definition for the space game becomes:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A SpaceGame is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-space-game  [Posn](#%28tech._posn%29)  [Number](#%28tech._number%29)).
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  (make-space-game  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  ux  uy)  tx)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â describes a configuration where the UFO is |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â at (ux,uy) and the tank''s x-coordinate is tx |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Understanding what kind of data representations are needed for world programs
    takes practice. The following two sections introduce several reasonably complex
    problem statements. Solve them before moving on to the kind of games that you
    might like to design on your own.
  prefs: []
  type: TYPE_NORMAL
- en: 5.10A Graphical Editor[ðŸ”—](#(part._sec~3aedit1) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: To program in BSL, you open DrRacket, type on the keyboard, and watch text appear.
    Pressing the left arrow on the keyboard moves the cursor to the left; pressing
    the backspace (or delete) key erases a single letter to the left of the cursorâ€”<wbr>if
    there is a letter to start with.
  prefs: []
  type: TYPE_NORMAL
- en: This process is called â€œediting,â€ though its precise name should be â€œtext editing
    of programsâ€ because we will use â€œeditingâ€ for a more demanding task than typing
    on a keyboard. When you write and revise other kinds of documents, say, an English
    assignment, you are likely to use other software applications, called word processors,
    though computer scientists dub all of them editors or even graphical editors.
  prefs: []
  type: TYPE_NORMAL
- en: You are now in a position to design a world program that acts as a one-line
    editor for plain text. Editing here includes entering letters and somehow changing
    the already existing text, including the deletion and the insertion of letters.
    This implies some notion of position within the text. People call this position
    a cursor; most graphical editors display it in such a way that it can easily be
    spotted.
  prefs: []
  type: TYPE_NORMAL
- en: 'Take a look at the following editor configuration:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/d2c329266f3cf44a6c1a27976d4243e4.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'Someone might have entered the text â€œhelloworldâ€ and hit the left arrow key
    five times, causing the cursor to move from the end of the text to the position
    between â€œoâ€ and â€œw.â€ Pressing the space bar would now cause the editor to change
    its display as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/b699ea59935f753b8f04482e7838fcee.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: 'In short, the action inserts â€œ â€ and places the cursor between it and â€œw.â€Given
    this much, an editor must track two pieces of information:'
  prefs: []
  type: TYPE_NORMAL
- en: the text entered so far, and
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: the current location of the cursor.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'And this suggests a structure type with two fields.We can imagine several different
    ways of going from the information to data and back. For example, one field in
    the structure may contain the entire text entered, and the other the number of
    characters between the first character (counting from the left) and the cursor.
    Another data representation is to use two strings in the two fields: the part
    of the text to the left of the cursor and the part of the text to its right. Here
    is our preferred approach to representing the state of an editor:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â editorÂ [preÂ post])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â An Editor is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-editor  [String](#%28tech._string%29)  [String](#%28tech._string%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  (make-editor  s  t) describes an editor |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â whose visible text is ([string-append](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string-append%29%29)  s  t)
    with |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â the cursor displayed between s and t |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Solve the next few exercises based on this data representation.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 83\. Design the function render, which consumes an [Editor](#%28tech._editor%29)
    and produces an image.
  prefs: []
  type: TYPE_NORMAL
- en: The purpose of the function is to render the text within an empty scene of ![image](../Images/50b76603f0069d912d51c4c9c1a5c2ea.png)
    pixels. For the cursor, use a ![image](../Images/253607f0ed25d1ca29475ed400c834a8.png)
    red rectangle and for the strings, black text of size 16.
  prefs: []
  type: TYPE_NORMAL
- en: 'Develop the image for a sample string in DrRacketâ€™s interactions area. We started
    with this expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([overlay/align](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%2Falign%29%29)Â "left"Â "center"
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([text](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29)Â "hello
    world"Â 11Â "black") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â 200Â 20))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: You may wish to read up on [beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29),
    [above](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29),
    and such functions. When you are happy with the looks of the image, use the expression
    as a test and as a guide to the design of render.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 84\. Design edit. The function consumes two inputs, an editor ed and
    a [KeyEvent](#%28tech._keyevent%29) ke, and it produces another editor. Its task
    is to add a single-character [KeyEvent](#%28tech._keyevent%29) ke to the end of
    the pre field of ed, unless ke denotes the backspace ("\b") key. In that case,
    it deletes the character immediately to the left of the cursor (if there are any).
    The function ignores the tab key ("\t") and the return key ("\r").
  prefs: []
  type: TYPE_NORMAL
- en: 'The function pays attention to only two [KeyEvent](#%28tech._keyevent%29)s
    longer than one letter: "left" and "right". The left arrow moves the cursor one
    character to the left (if any), and the right arrow moves it one character to
    the right (if any). All other such [KeyEvent](#%28tech._keyevent%29)s are ignored.'
  prefs: []
  type: TYPE_NORMAL
- en: Develop a goodly number of examples for edit, paying attention to special cases.
    When we solved this exercise, we created 20 examples and turned all of them into
    tests.
  prefs: []
  type: TYPE_NORMAL
- en: Hint Think of this function as consuming [KeyEvent](#%28tech._keyevent%29)s,
    a collection that is specified as an enumeration. It uses auxiliary functions
    to deal with the [Editor](#%28tech._editor%29) structure. Keep a wish list handy;
    you will need to design additional functions for most of these auxiliary functions,
    such as string-first, string-rest, string-last, and string-remove-last. If you
    havenâ€™t done so, solve the exercises in [Functions](#%28part._sec~3afuncs%29).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 85\. Define the function run. Given the pre field of an editor, it
    launches an interactive editor, using render and edit from the preceding two exercises
    for the [to-draw](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29)
    and [on-key](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-key%29%29)
    clauses, respectively.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 86\. Notice that if you type a lot, your editor program does not display
    all of the text. Instead the text is cut off at the right margin. Modify your
    function edit from [exerciseÂ 84](#%28counter._%28exercise._struct-edit1%29%29)
    so that it ignores a keystroke if adding it to the end of the pre field would
    mean the rendered text is too wide for your canvas.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 87\. Develop a data representation for an editor based on our first
    idea, using a string and an index. Then solve the preceding exercises again. Retrace
    the design recipe. Hint if you havenâ€™t done so, solve the exercises in [Functions](#%28part._sec~3afuncs%29).
  prefs: []
  type: TYPE_NORMAL
- en: Note on Design Choices The exercise is a first study of making design choices.
    It shows that the very first design choice concerns the data representation. Making
    the right choice requires planning ahead and weighing the complexity of each.
    Of course, getting good at this is a question of gaining experience.
  prefs: []
  type: TYPE_NORMAL
- en: 5.11More Virtual Pets[ðŸ”—](#(part._sec~3azoo2) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: In this section we continue our virtual zoo project from [Virtual Pet Worlds](#%28part._sec~3azoo1%29).
    Specifically, the goal of the exercise is to combine the cat world program with
    the program for managing its happiness gauge. When the combined program runs,
    you see the cat walking across the canvas, and, with each step, its happiness
    goes down. The only way to make the cat happy is to feed it or pet it (up arrow).
    Finally, the goal of the last exercise in this section is to create another virtual,
    happy pet.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 88\. Define a structure type that keeps track of the catâ€™s x-coordinate
    and its happiness. Then formulate a data definition for cats, dubbed VCat, including
    an interpretation.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 89\. Design the happy-cat world program, which manages a walking cat
    and its happiness level. Letâ€™s assume that the cat starts out with perfect happiness.
  prefs: []
  type: TYPE_NORMAL
- en: Hints (1) Reuse the functions from the world programs in [Virtual Pet Worlds](#%28part._sec~3azoo1%29).
    (2) Use structure type from the preceding exercise to represent the state of the
    world.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 90\. Modify the happy-cat program from the preceding exercises so that
    it stops whenever the catâ€™s happiness falls to 0.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 91\. Extend your structure type definition and data definition from
    [exerciseÂ 88](#%28counter._%28exercise._struct12%29%29) to include a direction
    field. Adjust your happy-cat program so that the cat moves in the specified direction.
    The program should move the cat in the current direction, and it should turn the
    cat around when it reaches either end of the scene.
  prefs: []
  type: TYPE_NORMAL
- en: ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â chamÂ ![](../Images/765bbcf6f0798ca77b1d223d92d98faa.png))
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The above drawing of a chameleon is a transparent image. To insert it into DrRacket,
    insert it with the â€œInsert Imageâ€ menu item. Using this instruction preserves
    the transparency of the drawingâ€™s pixels.
  prefs: []
  type: TYPE_NORMAL
- en: 'When a partly transparent image is combined with a colored shape, say a rectangle,
    the image takes on the underlying color. In the chameleon drawing, it is actually
    the inside of the animal that is transparent; the area outside is solid white.
    Try out this expression in your DrRacket:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â background
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([rectangle](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._rectangle%29%29)Â ([image-width](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-width%29%29)Â cham)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â ([image-height](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._image-height%29%29)Â cham)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â "solid" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â "red")) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([overlay](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29)Â chamÂ background)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ExerciseÂ 92\. Design the cham program, which has the chameleon continuously
    walking across the canvas from left to right. When it reaches the right end of
    the canvas, it disappears and immediately reappears on the left. Like the cat,
    the chameleon gets hungry from all the walking, and, as time passes by, this hunger
    expresses itself as unhappiness.
  prefs: []
  type: TYPE_NORMAL
- en: 'For managing the chameleonâ€™s happiness gauge, you may reuse the happiness gauge
    from the virtual cat. To make the chameleon happy, you feed it (down arrow, two
    points only); petting isnâ€™t allowed. Of course, like all chameleons, ours can
    change color, too: "r" turns it red, "b" blue, and "g" green. Add the chameleon
    world program to the virtual cat game and reuse functions from the latter when
    possible.'
  prefs: []
  type: TYPE_NORMAL
- en: Start with a data definition, VCham, for representing chameleons.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 93\. Copy your solution to [exerciseÂ 92](#%28counter._%28exercise._struct16%29%29)
    and modify the copy so that the chameleon walks across a tricolor background.
    Our solution uses these colors:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â BACKGROUND
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([beside](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29)Â ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHTÂ "green")Â Have
    some Italian pizza when youâ€™re done. |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHTÂ "white")
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â ([empty-scene](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-scene%29%29)Â WIDTHÂ HEIGHTÂ "red")))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: but you may use any colors. Observe how the chameleon changes colors to blend
    in as it crosses the border between two colors.
  prefs: []
  type: TYPE_NORMAL
- en: Note When you watch the animation carefully, you see the chameleon riding on
    a white rectangle. If you know how to use image editing software, modify the picture
    so that the white rectangle is invisible. Then the chameleon will really blend
    in.
  prefs: []
  type: TYPE_NORMAL
- en: 6Itemizations and Structures[ðŸ”—](#(part._ch~3amix) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The preceding two chapters introduce two ways of formulating data definitions.
    Those that employ itemization (enumeration and intervals) are used to create small
    collections from large ones. Those that use structures combine multiple collections.
    Since the development of data representations is the starting point for proper
    program design, it cannot surprise you that programmers frequently want to itemize
    data definitions that involve structures or to use structures to combine itemized
    data.
  prefs: []
  type: TYPE_NORMAL
- en: 'Recall the imaginary space invader game from [Structure in the World](#%28part._sec~3aworld-structs%29)
    in the preceding chapter. Thus far, it involves one UFO, descending from space,
    and one tank on the ground, moving horizontally. Our data representation uses
    a structure with two fields: one for the data representation of the UFO and another
    one for the data representation of the tank. Naturally, players will want a tank
    that can fire off a missile. All of a sudden, we can think of a second kind of
    state that contains three independently moving objects: the UFO, the tank, and
    the missile. Thus we have two distinct structures: one for representing two independently
    moving objects and another one for the third. Since a world state may now be one
    of these two structures, it is natural to use an itemization to describe all possible
    states:'
  prefs: []
  type: TYPE_NORMAL
- en: the state of the world is a structure with two fields, or
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: the state of the world is a structure with three fields.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: As far as our domain isNo worries, the next part of the book is about firing
    as many missiles as you want, without reloading. concernedâ€”<wbr>the actual gameâ€”<wbr>the
    first kind of state represents the time before the tank has launched its sole
    missile and the second one the time after the missile has been fired.
  prefs: []
  type: TYPE_NORMAL
- en: This chapter introduces the basic idea of itemizing data definitions that involve
    structures. Because we have all the other ingredients we need, we start straight
    with itemizing structures. After that, we discuss some examples, including world
    programs that benefit from our new power. The last section is about errors in
    programming.
  prefs: []
  type: TYPE_NORMAL
- en: 6.1Designing with Itemizations, Again[ðŸ”—](#(part._mix._sec~3aitemization-design2)
    "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: Letâ€™s start with a refined problem statement for our space invader game from
    [Programming with Structures](#%28part._sec~3aprogstructs%29).
  prefs: []
  type: TYPE_NORMAL
- en: Sample Problem Design a game program using the 2htdp/universe teachpack for
    playing a simple space invader game. The player is in control of a tank (a small
    rectangle) that must defend our planet (the bottom of the canvas) from a UFO (see
    [Intervals](#%28part._sec~3aintervals%29) for one possibility) that descends from
    the top of the canvas to the bottom. In order to stop the UFO from landing, the
    player may fire a single missile (a triangle smaller than the tank) by hitting
    the space bar. In response, the missile emerges from the tank. If the UFO collides
    with the missile, the player wins; otherwise the UFO lands and the player loses.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Here are some details concerning the three game objects and their movements.
    First, the tank moves a constant speed along the bottom of the canvas, though
    the player may use the left arrow key and the right arrow key to change directions.
    Second, the UFO descends at a constant velocity but makes small random jumps to
    the left or right. Third, once fired, the missile ascends along a straight vertical
    line at a constant speed at least twice as fast as the UFO descends. Finally,
    the UFO and the missile collide if their reference points are close enough, for
    whatever you think â€œclose enoughâ€ means.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The following two subsections use this sample problem as a running example,
    so study it well and solve the following exercise before you continue. Doing so
    will help you understand the problem in enough depth.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 94\. Draw some sketches of what the game scenery looks like at various
    stages. Use the sketches to determine the constant and the variable pieces of
    the game. For the former, develop physical and graphical constants that describe
    the dimensions of the world (canvas) and its objects. Also develop some background
    scenery. Finally, create your initial scene from the constants for the tank, the
    UFO, and the background.
  prefs: []
  type: TYPE_NORMAL
- en: Defining Itemizations The first step in our design recipe calls for the development
    of data definitions. One purpose of a data definition is to describe the construction
    of data that represents the state of the world; another is to describe all possible
    pieces of data that the event-handling functions of the world program may consume.
    Since we havenâ€™t seen itemizations that include structures, this first subsection
    introduces this idea. While this probably wonâ€™t surprise you, pay close attention.
  prefs: []
  type: TYPE_NORMAL
- en: 'For this space invader game, we could get away with one structure type definition
    of three fields where the third field contains #false until the missile is fired,
    and a Posn for the missileâ€™s coordinates thereafter. See below.'
  prefs: []
  type: TYPE_NORMAL
- en: 'As argued in the introduction to this chapter, the space invader game with
    a missile-firing tank requires a data representation for two different kinds of
    game states. We choose two structure type definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â aimÂ [ufoÂ tank])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â firedÂ [ufoÂ tankÂ missile])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The first one is for the time period when the player is trying to get the tank
    in position for a shot, and the second one is for representing states after the
    missile is fired. Before we can formulate a data definition for the complete game
    state, however, we need data representations for the tank, the UFO, and the missile.Assuming
    constant definitions for such physical constants as WIDTH and HEIGHT, which are
    the subject of [exerciseÂ 94](#%28counter._mix._%28exercise._mix1%29%29), we formulate
    the data definitions like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A UFO is a [Posn](#%28tech._posn%29). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  x  y)
    is the UFO''s location |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â (using the top-down, left-to-right convention) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â tankÂ [locÂ vel])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Tank is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-tank  [Number](#%28tech._number%29)  [Number](#%28tech._number%29)).
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  (make-tank  x  dx) specifies the position: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â (x, HEIGHT) and the tank''s speed: dx pixels/tick |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A Missile is a [Posn](#%28tech._posn%29). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  x  y)
    is the missile''s place |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Each of these data definitions describes nothing but a structure, either a
    newly defined one, tank, or a built-in data collection, [Posn](#%28tech._posn%29).
    Concerning the latter, it may surprise you a little bit that [Posn](#%28tech._posn%29)s
    are used to represent two distinct aspects of the world. Then again, we have used
    numbers (and strings and Boolean values) to represent many different kinds of
    information in the real world, so reusing a collection of structures such as Posn
    isnâ€™t a big deal.Now we are in a position to formulate the data definitions for
    the state of the space invader game:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A SIGS is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  (make-aim  [UFO](#%28tech._mix._ufo%29)  [Tank](#%28tech._mix._tank%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  (make-fired  [UFO](#%28tech._mix._ufo%29)  [Tank](#%28tech._mix._tank%29)  [Missile](#%28tech._mix._missile%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents the complete state of a |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â space invader game |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The shape of the data definition is that of an itemization. Each clause, however,
    describes the content of a structure type, just like the data definition for structure
    types we have seen so far. Still, this data definition shows that not every data
    definition comes with exactly one structure type definition; here one data definition
    involves two distinct structure type definitions.The meaning of such a data definition
    is also straightforward. It introduces the name [SIGS](#%28tech._mix._sig%29)
    for the collection of all those structure instances that you can create according
    to the definition. So let us create some:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is an instance that describes the tank maneuvering into position to fire
    the missile:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: (make-aimÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 10)Â (make-tankÂ 28Â -3))
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This one is just like the previous one but the missile has been fired:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| (make-firedÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 10)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (make-tankÂ 28Â -3) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 28Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHTÂ TANK-HEIGHT)))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: Of course, the capitalized names refer to the physical constants that you defined.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Finally, here is one where the missile is about to collide with the UFO:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| (make-firedÂ ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 100)
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â (make-tankÂ 100Â 3) |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 22Â 103))
    |'
  prefs:
  - PREF_IND
  - PREF_BQ
  type: TYPE_TB
- en: This example assumes that the canvas is more than 100 pixels tall.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Notice that the first instance of [SIGS](#%28tech._mix._sig%29) is generated
    according to the first clause of the data definition, and the second and third
    follow the second clause. Naturally the numbers in each field depend on your choices
    for global game constants.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 95\. Explain why the three instances are generated according to the
    first or second clause of the data definition.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 96\. Sketch how each of the three game states could be rendered assuming
    a ![image](../Images/97e2464895e55686e71240be7caa71b0.png) canvas.
  prefs: []
  type: TYPE_NORMAL
- en: 'The Design Recipe With a new way of formulating data definitions comes an inspection
    of the design recipe. This chapter introduces a way to combine two or more means
    of describing data, and the revised design recipe reflects this, especially the
    first step:'
  prefs: []
  type: TYPE_NORMAL
- en: When do you need this new way of defining data? You already know that the need
    for itemizations is due to distinctions among different classes of information
    in the problem statement. Similarly, the need for structure-based data definitions
    is due to the demand to group several different pieces of information.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: An itemization of different forms of dataâ€”<wbr>including collections of structuresâ€”<wbr>is
    required when your problem statement distinguishes different kinds of information
    and when at least some of these pieces of information consist of several different
    pieces.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: One thing to keep in mind is that data definitions may refer to other data definitions.
    Hence, if a particular clause in a data definition looks overly complex, it is
    acceptable to write down a separate data definition for this clause and refer
    to this auxiliary definition.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: And, as always, formulate data examples using the data definitions.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The second step remains the same. Formulate a function signature that mentions
    only the names of defined or built-in data collections, add a purpose statement,
    and create a function header.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Nothing changes for the third step. You still need to formulate functional examples
    that illustrate the purpose statement from the second step, and you still need
    one example per item in the itemization.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The development of the template now exploits two different dimensions: the
    itemization itself and the use of structures in its clauses.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: By the first, the body of the template consists of a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression that has as many [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses as the itemizations has items. Furthermore, you must add a condition to
    each [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause that identifies the sub-class of data in the corresponding item.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: By the second, if an item deals with a structure, the template contains the
    selector expressionsâ€”<wbr>in the [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause that deals with the sub-class of data described in the item.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: When you choose to describe the data with a separate data definition, however,
    you do not add selector expressions. Instead, you create a template for the separate
    data definition to the task at hand and refer to that template with a function
    call. The latter indicates that this sub-class of data is being processed separately.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Before going through the work of developing a template, briefly reflect on the
    nature of the function. If the problem statement suggests that there are several
    tasks to be performed, it is likely that a composition of several, separately
    designed functions is needed instead of a template. In that case, skip the template
    step.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Fill the gaps in the template. The more complex you make your data definitions,
    the more complex this step becomes. The good news is that this design recipe can
    help in many situations.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you are stuck, fill the easy cases first and use default values for the others.
    While this makes some of the test cases fail, you are making progress and you
    can visualize this progress.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: If you are stuck on some cases of the itemization, analyze the examples that
    correspond to those cases. Determine what the pieces of the template compute from
    the given inputs. Then consider how to combine these pieces (plus some constants)
    to compute the desired output. Keep in mind that you might need an auxiliary function.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Also, if your template â€œcallsâ€ another template because the data definitions
    refer to each other, assume that the other function delivers what its purpose
    statement and its examples promiseâ€”<wbr>even if this other functionâ€™s definition
    isnâ€™t finished yet.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Test. If tests fail, determine whatâ€™s wrong: the function, the tests, or both.
    Go back to the appropriate step.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Go back to [Designing Functions](#%28part._sec~3adesign-func%29), reread the
    description of the simple design recipe, and compare it to this revision.
  prefs: []
  type: TYPE_NORMAL
- en: Letâ€™s illustrate the design recipe with the design of a rendering function for
    the sample problem at the beginning of this section. Recall that a [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    expression needs such a rendering function to turn the state of the world into
    an image after every clock tick, mouse click, or keystroke.
  prefs: []
  type: TYPE_NORMAL
- en: 'The signature of this rendering function says that it maps an element of the
    state-of-the-world class to the class of [Image](#%28tech._image%29)s:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [SIGS](#%28tech._mix._sig%29) -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds TANK, UFO, and possibly MISSILE to |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â the BACKGROUND scene |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (si-renderÂ s)Â BACKGROUND)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Here TANK, UFO, MISSILE, and BACKGROUND are the requested image constants from
    [exerciseÂ 94](#%28counter._mix._%28exercise._mix1%29%29). Recall that this signature
    is just an instance of the general signature for rendering functions, which always
    consume the collections of world states and produce some image.
  prefs: []
  type: TYPE_NORMAL
- en: '| s |  | (si-render  s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|  |  |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (make-aim &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 20)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â (make-tankÂ 28Â -3)) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![image](../Images/205e04fee6ccd823f6f3086bfac04731.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (make-fired &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 20Â 100)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â (make-tankÂ 100Â 3) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 22Â 103))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![image](../Images/cca2bb892c8b46f3c0d06d1ddf641e94.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; (make-fired &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 10Â 20)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â (make-tankÂ 28Â -3) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 32Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHTÂ TANK-HEIGHTÂ 10)))
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![image](../Images/1f090d9d8d2c5395cbd9707edb3c6b37.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 32: Rendering space invader game states, by example'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Since the itemization in the data definition consists of two items, letâ€™s make
    three examples, using the data examples from above. See [figureÂ 32](#%28counter._mix._%28figure._fig~3asigs-examples%29%29).
    Unlike the function tables found in mathematics books, this table is rendered
    vertically. The left column contains sample inputs for our desired function; the
    right column lists the corresponding desired results. As you can see, we used
    the data examples from the first step of the design recipe, and they cover both
    items of the itemization.
  prefs: []
  type: TYPE_NORMAL
- en: 'Next we turn to the development of the template, the most important step of
    the design process. First, we know that the body of si-render must be a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with two [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses. Following the design recipe, the two conditions are (aim?  s) and (fired?  s),
    and they distinguish the two possible kinds of data that si-render may consume:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (si-renderÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(aim?Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(fired?Â s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Second, we add selector expressions to every [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause that deals with structures. In this case, both clauses concern the processing
    of structures: aim and fired. The former comes with two fields and thus requires
    two selector expressions for the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause, and the latter kind of structures consists of three values and thus demands
    three selector expressions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (si-renderÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(aim?Â s)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (aim-tankÂ s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (aim-ufoÂ s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(fired?Â s)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fired-tankÂ s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fired-ufoÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (fired-missileÂ s)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: The template contains nearly everything we need to finish our task. To complete
    the definition, we figure out for each [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    line how to combine the values we have in order to compute the expected result.
    Beyond the pieces of the input, we may also use globally defined constants, for
    example, BACKGROUND, which is obviously of help here; primitive or built-in operations;
    and, if all else fails, wish-list functions, that is, we describe functions we
    wish we had.
  prefs: []
  type: TYPE_NORMAL
- en: 'Consider the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause, where we have a data representation of a tank, that is, (aim-tank  s),
    and the data representation of a UFO, that is, (aim-ufo  s). From the first example
    in [figureÂ 32](#%28counter._mix._%28figure._fig~3asigs-examples%29%29), we know
    that we need to add the two objects to the background scenery. In addition, the
    design recipe suggests that if these pieces of data come with their own data definition,
    we are to consider defining helper (auxiliary) functions and to use those to compute
    the result:'
  prefs: []
  type: TYPE_NORMAL
- en: '| [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â (tank-renderÂ (aim-tankÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (ufo-renderÂ (aim-ufoÂ s)Â BACKGROUND)) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Here tank-render and ufo-render are wish-list functions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Tank](#%28tech._mix._tank%29)  [Image](#%28tech._image%29) -> [Image](#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds t to the given image im |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (tank-renderÂ tÂ im)Â im)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [UFO](#%28tech._mix._ufo%29)  [Image](#%28tech._image%29) -> [Image](#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds u to the given image im |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (ufo-renderÂ uÂ im)Â im)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [SIGS](#%28tech._mix._sig%29) -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders the given game state on top of BACKGROUND |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â for examples see [figureÂ 32](#%28counter._mix._%28figure._fig~3asigs-examples%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (si-renderÂ s)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(aim?Â s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â (tank-renderÂ (aim-tankÂ s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (ufo-renderÂ (aim-ufoÂ s)Â BACKGROUND))] |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(fired?Â s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â (tank-render |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â (fired-tankÂ s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â (ufo-renderÂ (fired-ufoÂ s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (missile-renderÂ (fired-missileÂ s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â BACKGROUND)))])) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 33: The complete rendering function'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'With a bit of analogy, we can deal with the second [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause in the same way. [FigureÂ 33](#%28counter._mix._%28figure._fig~3asi-render%29%29)
    shows the complete definition. Best of all, we can immediately reuse our wish-list
    functions, tank-render and ufo-render, and all we need to add is a function for
    including a missile in the scene. The appropriate wish-list entry is:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Missile](#%28tech._mix._missile%29)  [Image](#%28tech._image%29) -> [Image](#%28tech._image%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds m to the given image im |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (missile-renderÂ mÂ im)Â im)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As above, the comment describes in sufficient detail what we want.ExerciseÂ 97\.
    Design the functions tank-render, ufo-render, and missile-render. Compare this
    expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (tank-render |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (fired-tankÂ s) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (ufo-renderÂ (fired-ufoÂ s) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â (missile-renderÂ (fired-missileÂ s) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â BACKGROUND))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'with this one:'
  prefs: []
  type: TYPE_NORMAL
- en: '| (ufo-render |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (fired-ufoÂ s) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (tank-renderÂ (fired-tankÂ s) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (missile-renderÂ (fired-missileÂ s) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â BACKGROUND))) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: When do the two expressions produce the same result?
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 98\. Design the function si-game-over? for use as the [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    handler. The game stops if the UFO lands or if the missile hits the UFO. For both
    conditions, we recommend that you check for proximity of one object to another.
  prefs: []
  type: TYPE_NORMAL
- en: The [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    clause allows for an optional second sub-expression, namely a function that renders
    the final state of the game. Design si-render-final and use it as the second part
    for your [stop-when](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29)
    clause in the main function of [exerciseÂ 100](#%28counter._mix._%28exercise._mix-ufo-fire%29%29).
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 99\. Design si-move. This function is called for every clock tick to
    determine to which position the objects move now. Accordingly, it consumes an
    element of [SIGS](#%28tech._mix._sig%29) and produces another one.
  prefs: []
  type: TYPE_NORMAL
- en: Moving the tank and the missile (if any) is relatively straightforward. They
    move in straight lines at a constant speed. Moving the UFO calls for small random
    jumps to the left or the right. Since you have never dealt with functions that
    create random numbers, the rest of this exercise is a longish hint on how to deal
    with this issue.
  prefs: []
  type: TYPE_NORMAL
- en: 'BSL comes with a function that creates random numbers. Introducing this function
    illustrates why the signatures and purpose statements play such an important role
    during the design. Here is the relevant material for the function you need:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](#%28tech._number%29) -> [Number](#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â produces a number in the interval [0,n), |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â possibly a different one each time it is called |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ([random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)Â n)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Since the signature and purpose statement precisely describe what a function
    computes, you can now experiment with [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    in DrRacketâ€™s interactions area. Stop! Do so!If [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    produces different numbers (almost) every time it is called, testing functions
    that use [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    is difficult. To start with, separate si-move and its proper functionality into
    two parts:The idea that you must use [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    is BSL knowledge, not a part of the design skills you must acquire, which is why
    we provide this hint. Also, [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    is the first and only BSL primitive that is not a mathematical function. Functions
    in programming are inspired by mathematical functions, but they are not identical
    concepts.
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (si-moveÂ w)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (si-move-properÂ wÂ ([random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [SIGS](#%28tech._mix._sig%29) Number -> [SIGS](#%28tech._mix._sig%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â moves the space-invader objects predictably by delta |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (si-move-properÂ wÂ delta)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â w) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: With this definition you separate the creation of a random number from the act
    of moving the game objects. While [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    may produce different results every time it is called, si-move-proper can be tested
    on specific numeric inputs and is thus guaranteed to return the same result when
    given the same inputs. In short, most of the code remains testable.
  prefs: []
  type: TYPE_NORMAL
- en: Instead of calling [random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._random%29%29)
    directly, you may wish to design a function that creates a random x-coordinate
    for the UFO. Consider using [check-random](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-random%29%29)
    from BSLâ€™s testing framework to test such a function.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 100\. Design the function si-control, which plays the role of the
    key-event handler. As such, it consumes a game state and a [KeyEvent](#%28tech._keyevent%29)
    and produces a new game state. It reacts to three different keys:'
  prefs: []
  type: TYPE_NORMAL
- en: pressing the left arrow ensures that the tank moves left;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: pressing the right arrow ensures that the tank moves right; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: pressing the space bar fires the missile if it hasnâ€™t been launched yet.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Once you have this function, you can define the si-main function, which uses
    [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    to spawn the game-playing window. Enjoy!
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [SIGS.v2](#%28tech._mix._sigs..v2%29) -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â renders the given game state on top of BACKGROUND |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (si-render.v2Â s)
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â (tank-render |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (sigs-tankÂ s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â (ufo-renderÂ (sigs-ufoÂ s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (missile-render.v2Â (sigs-missileÂ s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â BACKGROUND)))) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 34: Rendering game states again'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Data representations are rarely unique. For example, we could use a single
    structure type to represent the states of a space invader game:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â sigsÂ [ufoÂ tankÂ missile])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A SIGS.v2 (short for SIGS version 2) is a structure: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-sigs  [UFO](#%28tech._mix._ufo%29)  [Tank](#%28tech._mix._tank%29)  [MissileOrNot](#%28tech._mix._missileornot%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents the complete state of a |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â space invader game |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A MissileOrNot is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [Posn](#%28tech._posn%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation#false means the missile is in the tank; |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Posn](#%28tech._posn%29) says the missile is at that location |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Unlike the first data representation for game states, this second version does
    not distinguish between before and after the missile launch. Instead, each state
    contains some data about the missile though this piece of data may just be #false,
    indicating that the missile hasnâ€™t been fired yet.'
  prefs: []
  type: TYPE_NORMAL
- en: As a result, the functions for this second data representation of states differ
    from the functions for the first one. In particular, functions that consume an
    element of [SIGS.v2](#%28tech._mix._sigs..v2%29) do not use a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression because there is only one kind of element in the collection. In terms
    of design approach, the design recipe for structures from [Designing with Structures](#%28part._sec~3adesignstructs%29)
    suffices. [FigureÂ 34](#%28counter._mix._%28figure._fig~3amix-ufo2%29%29) shows
    the result of designing the rendering function for this data representation.
  prefs: []
  type: TYPE_NORMAL
- en: 'In contrast, the design of functions using [MissileOrNot](#%28tech._mix._missileornot%29)
    requires the recipe from this section. Letâ€™s look at the design of missile-render.v2,
    whose job it is to add a missile to an image. Here is the header material:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [MissileOrNot](#%28tech._mix._missileornot%29)  [Image](#%28tech._image%29)
    -> [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â adds an image of missile m to scene s |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (missile-render.v2Â mÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â s) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As for examples, we must consider at least two cases: one when m is #false
    and another one when m is a [Posn](#%28tech._posn%29). In the first case, the
    missile hasnâ€™t been fired, which means that no image of a missile is to be added
    to the given scene. In the second case, the missileâ€™s position is specified and
    that is where the image of the missile must show up. [FigureÂ 35](#%28counter._mix._%28figure._fig~3amissile-render%29%29)
    demonstrates the workings of the function with two distinct scenarios.'
  prefs: []
  type: TYPE_NORMAL
- en: '| m |  | (missile-render.v2  m  s) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|  |  |  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |  | ![image](../Images/85debffb3b5732af15e7b31af68a7406.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â 32 &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â ([-](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._-%29%29)Â HEIGHT
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â TANK-HEIGHT &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â Â Â Â Â 10)) &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  | ![image](../Images/a5708b022a31c637db33c2fd73939cdf.png) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 35: Rendering the space invader games, with tanks'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ExerciseÂ 101\. Turn the examples in [figureÂ 35](#%28counter._mix._%28figure._fig~3amissile-render%29%29)
    into test cases.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now we are ready to develop the template. Because the data definition for the
    major argument (m) is an itemization with two items, the function body is likely
    to consist of a [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    expression with two clauses:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (missile-render.v2Â mÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([boolean?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3f%29%29)Â m)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â m)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Following the data definition again, the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause checks whether m is a [Boolean](#%28tech._boolean%29) value and the second
    one checks whether it is an element of [Posn](#%28tech._posn%29). And, if someone
    were to accidentally apply missile-render.v2 to #true and to some image, the function
    would use the first [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clause to compute the result. We have more to say on such errors below.The second
    template step requests selector expressions in all those [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses that deal with structures. In our example, this is true for the second
    clause, and the selector expressions extract the x- and y-coordinates from the
    given [Posn](#%28tech._posn%29):'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (missile-render.v2Â mÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([boolean?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3f%29%29)Â m)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â m)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â m)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â m)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Compare this template with the one for si-render above. The data definition
    for the latter deals with two distinct structure types, and therefore the function
    template for si-render contains selector expressions in both [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    clauses. The data definition for [MissileOrNot](#%28tech._mix._missileornot%29),
    however, mixes items that are plain values with items that describe structures.
    Both kinds of definitions are perfectly fine; the key for you is to follow the
    recipe and to find a code organization that matches the data definition.Here is
    the complete function definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (missile-render.v2Â mÂ s)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([boolean?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3f%29%29)Â m)Â s]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â m)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â ([place-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._place-image%29%29)Â MISSILEÂ ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â m)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â m)Â s)]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Doing this step-by-step, you first work on the easy clauses; in this function
    thatâ€™s the first one. Since it says the missile hasnâ€™t been fired, the function
    returns the given s. For the second clause, you need to remember that ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)  m)
    and ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)  m)
    select the coordinates for the image of the missile. This function must add MISSILE
    to s, so you have to figure out the best combination of primitive operations and
    your own functions to combine the four values. The choice of this combining operation
    is precisely where your creative insight as a programmer comes into play.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 102\. Design all other functions that are needed to complete the game
    for this second data definition.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 103\. Develop a data representation for the following four kinds of
    zoo animals:'
  prefs: []
  type: TYPE_NORMAL
- en: spiders, whose relevant attributes are the number of remaining legs (we assume
    that spiders can lose legs in accidents) and the space they need in case of transport;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: elephants, whose only attributes are the space they need in case of transport;
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: boa constrictors, whose attributes include length and girth; and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: armadillos, for which you must determine appropriate attributes, including one
    that determines the space needed for transport.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Develop a template for functions that consume zoo animals.
  prefs: []
  type: TYPE_NORMAL
- en: Design the fits? function, which consumes a zoo animal and a description of
    a cage. It determines whether the cageâ€™s volume is large enough for the animal.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 104\. Your home town manages a fleet of vehicles: automobiles, vans,
    buses, and SUVs. Develop a data representation for vehicles. The representation
    of each vehicle must describe the number of passengers that it can carry, its
    license plate number, and its fuel consumption (miles per gallon). Develop a template
    for functions that consume vehicles.'
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 105\. Some program contains the following data definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A Coordinate is one of: |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ a [NegativeNumber](#%28tech._negativenumber%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation on the y axis, distance from top |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ a [PositiveNumber](#%28tech._positivenumber%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation on the x axis, distance from left |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ a [Posn](#%28tech._posn%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation an ordinary Cartesian point |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Make up at least two data examples per clause in the data definition. For each
    of the examples, explain its meaning with a sketch of a canvas.
  prefs: []
  type: TYPE_NORMAL
- en: 6.2Mixing Up Worlds[ðŸ”—](#(part._sec~3aworlds-mix) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: This section suggests several design problems for world program, starting with
    simple extension exercises concerning our virtual pets.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 106\. In [More Virtual Pets](#%28part._sec~3azoo2%29) we discussed
    the creation of virtual pets that come with happiness gauges. One of the virtual
    pets is a cat; the other one, a chameleon. Each program is dedicated to a single
    pet, however.
  prefs: []
  type: TYPE_NORMAL
- en: 'Design the cat-cham world program. Given both a location and an animal, it
    walks the latter across the canvas, starting from the given location. Here is
    the chosen data representation for animals:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A VAnimal is either |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ a VCat |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“ a VCham |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: where VCat and VCham are your data definitions from [exercisesÂ 88](#%28counter._%28exercise._struct12%29%29)
    [andÂ 92](#%28counter._%28exercise._struct16%29%29).Given that [VAnimal](#%28tech._vanimal%29)
    is the collection of world states, you need to design
  prefs: []
  type: TYPE_NORMAL
- en: a rendering function from [VAnimal](#%28tech._vanimal%29) to [Image](#%28tech._image%29);
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: a function for handling clock ticks, from [VAnimal](#%28tech._vanimal%29) to
    [VAnimal](#%28tech._vanimal%29); and
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: a function for dealing with key events so that you can feed and pet and colorize
    your animalâ€”<wbr>as applicable.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It remains impossible to change the color of a cat or to pet a chameleon.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 107\. Design the cham-and-cat program, which deals with both a virtual
    cat and a virtual chameleon. You need a data definition for a â€œzooâ€ containing
    both animals and functions for dealing with it.
  prefs: []
  type: TYPE_NORMAL
- en: 'The problem statement leaves open how keys manipulate the two animals. Here
    are two possible interpretations:'
  prefs: []
  type: TYPE_NORMAL
- en: Each key event goes to both animals.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Each key event applies to only one of the two animals.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For this alternative, you need a data representation that specifies a focus
    animal, that is, the animal that can currently be manipulated. To switch focus,
    have the key-handling function interpret "k" for â€œkittyâ€ and "l" for lizard. Once
    a player hits "k", the following keystrokes apply to the cat onlyâ€”<wbr>until the
    player hits "l".
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Choose one of the alternatives and design the appropriate program.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 108\. In its default state, a pedestrian crossing light shows an orange
    person standing, on a black background. When it is time to allow the pedestrian
    to cross the street, the light receives a signal and switches to a green, walking
    person. This phase lasts for 10 seconds. After that the light displays the digits
    9, 8, ..., 0 with odd numbers colored orange and even numbers colored green. When
    the countdown reaches 0, the light switches back to its default state.
  prefs: []
  type: TYPE_NORMAL
- en: Design a world program that implements such a pedestrian traffic light. The
    light switches from its default state when you press the space bar on your keyboard.
    All other transitions must be reactions to clock ticks. You may wish to use the
    following images
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/be5d43d7338ff0d8b1b8ceaddcedd523.png) ![](../Images/a7e2e2a1765e2aa7b8b2ac5ea3a4f34e.png)'
  prefs:
  - PREF_BQ
  type: TYPE_IMG
- en: or you can make up your own stick figures with the the 2htdp/image teachpack
    teachpack.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 109\. Design a world program that recognizes a pattern in a sequence
    of [KeyEvent](#%28tech._keyevent%29)s. Initially the program shows a 100 by 100
    white rectangle. Once your program has encountered the first desired letter, it
    displays a yellow rectangle of the same size. After encountering the final letter,
    the color of the rectangle turns green. If any â€œbadâ€ key event occurs, the program
    displays a red rectangle.
  prefs: []
  type: TYPE_NORMAL
- en: '| conventional |  | defined abbreviations |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â ExpectsToSee.v1 is one of: &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  "start, expect an ''a''" &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  "expect ''b'', ''c'', or ''d''" &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  "finished" &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  "error, illegal key" &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|  |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â ExpectsToSee.v2 is one of: &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  AA &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  BB &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  DD &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ;Â â€“  ER &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; Â  &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â AAÂ "start,
    ...") &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â BBÂ "expect
    ...") &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â DDÂ "finished")
    &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '&#124; ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â ERÂ "error,
    ...") &#124;'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: '|'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 36: Two ways of writing a data definition for FSMs'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The specific sequences that your program looks for start with "a", followed
    by an arbitrarily long mix of "b" and "c", and ended by a "d". Clearly, "acbd"
    is one example of an acceptable string; two others are "ad" and "abcbbbcd". Of
    course, "da", "aa", or "d" do not match.
  prefs: []
  type: TYPE_NORMAL
- en: '![image](../Images/17bdc21205066a4618e41490baaa2ccf.png)'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_IMG
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 37: A finite state machine as a diagram'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Hint Your solution implements a finite state machine (FSM), an idea introduced
    in [Finite State Worlds](#%28part._sec~3aworlds-more%29) as one design principle
    behind world programs. As the name says, an FSM program may be in one of a finite
    number of states. The first state is called an initial state. Each key event causes
    the machine to reconsider its current state; it may transition to the same state
    or to another one. When your program recognizes a proper sequence of key events,
    it transitions to a final state.
  prefs: []
  type: TYPE_NORMAL
- en: For a sequence-recognition problem, states typically represent the letters that
    the machine expects to see next; see [figureÂ 36](#%28counter._%28figure._fig~3afsm-dd%29%29)
    for a data definition.The data definition on the right uses the naming technique
    introduced in [exerciseÂ 61](#%28counter._%28exercise._ex~3aalternative-data-design2%29%29).
    Take a look at the last state, which says an illegal input has been encountered.
    [FigureÂ 37](#%28counter._%28figure._fig~3afsm-a-b-or-c%2A-d%29%29) shows how to
    think of these states and their relationships in a diagrammatic manner. Each node
    corresponds to one of the four finite states; each arrow specifies which [KeyEvent](#%28tech._keyevent%29)
    causes the program to transition from one state to another.
  prefs: []
  type: TYPE_NORMAL
- en: History In the 1950s, Stephen C. Kleene, whom we would call a computer scientist,
    invented regular expressions as a notation for the problem of recognizing text
    patterns. For the above problem, Kleene would write
  prefs: []
  type: TYPE_NORMAL
- en: a (b|c)* d
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: which means a followed by b or c arbitrarily often until d is encountered.
  prefs: []
  type: TYPE_NORMAL
- en: 6.3Input Errors[ðŸ”—](#(part._sec~3ainput-errors) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: One central point of this chapter concerns the role of predicates. They are
    critical when you must design functions that process mixes of data. Such mixes
    come up naturally when your problem statement mentions many different kinds of
    information, but they also come up when you hand your functions and programs to
    others. After all, you know and respect your data definitions and function signatures.
    You never know, however, what your friends and colleagues do, and youIt is a form
    of self-delusion to expect that we always respect our own function signatures.
    Calling a function on the wrong kind of data happens to the best of us. While
    many languages are like BSL and expect programmers to check signatures on their
    own, others do so automatically at the cost of some additional complexity. especially
    donâ€™t know how someone without knowledge of BSL and programming uses your programs.
    This section therefore presents one way of protecting programs from inappropriate
    inputs.
  prefs: []
  type: TYPE_NORMAL
- en: 'Letâ€™s demonstrate this point with a simple program, a function for computing
    the area of a disk:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Number](#%28tech._number%29) -> [Number](#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the area of a disk with radius r |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (area-of-diskÂ r)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â 3.14Â ([*](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._%2A%29%29)Â rÂ r)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Our friends may wish to use this function for their geometry homework. Unfortunately,
    when our friends use this function, they may accidentally apply it to a string
    rather than a number. When that happens, the function stops the program execution
    with a mysterious error message:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (area-of-diskÂ "my-disk") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| *:expects a number, given "my-disk" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: With predicates, you can prevent this kind of cryptic error message and signal
    an informative error of your own choice.
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â Any  BSL value is one of: |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [Number](#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [Boolean](#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [String](#%28tech._string%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  [Image](#%28tech._image%29) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)  [Any](#%28tech._any%29)  [Any](#%28tech._any%29))
    |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â ... |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â â€“  (make-tank  [Any](#%28tech._any%29)  [Any](#%28tech._any%29)) |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â ... |'
  prefs:
  - PREF_BQ
  - PREF_BQ
  - PREF_BQ
  type: TYPE_TB
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'FigureÂ 38: The universe of BSL data'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Specifically, we can define checked versions of our functions, when we wish
    to hand them to our friends. Because our friends may not know much BSL, we must
    expect that they apply this checked function to arbitrary BSL values: numbers,
    strings, images, [Posn](#%28tech._posn%29)s, and so on. Although we cannot anticipate
    which structure types will be defined in BSL, we know the rough shape of the data
    definition for the collection of all BSL values. [FigureÂ 38](#%28counter._%28figure._fig~3absl-universe%29%29)
    displays this shape of this data definition. As discussed in [The Universe of
    Data](#%28part._data-uni._sec~3adata-uni%29), the data definition for [Any](#%28tech._any%29)
    is open-ended because every structure type definition adds new instances. These
    instances may contain [Any](#%28tech._any%29) values again, which implies that
    the data definition of [Any](#%28tech._any%29) must refer to itselfâ€”<wbr>a scary
    thought at first.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Based on this itemization, the template for a checked function has the following
    rough shape:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Any](#%28tech._any%29) -> ??? |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (checked-fÂ v)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)Â v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([boolean?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3f%29%29)Â v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([image?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._image~3f%29%29)Â v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â v)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â ;Â which selectors are needed in the next clause? |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(tank?Â v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Of course, nobody can list all clauses of this definition; fortunately, thatâ€™s
    not necessary. What we do know is that for all those values in the class of values
    for which the original function is defined, the checked version must produce the
    same results; for all others, it must signal an error.Concretely, our sample function
    checked-area-of-disk consumes an arbitrary BSL value and uses area-of-disk to
    compute the area of a disk if the input is a number. It must stop with an error
    message otherwise; in BSL we use the function [error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)
    to accomplish this. The error function consumes a string and stops the program:'
  prefs: []
  type: TYPE_NORMAL
- en: '([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â "area-of-disk:
    number expected")'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Hence the rough definition of checked-area-of-disk looks like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MESSAGEÂ "area-of-disk:
    number expected") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (checked-area-of-diskÂ v)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)Â v)Â (area-of-diskÂ v)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([boolean?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3f%29%29)Â v)Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â MESSAGE)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â v)Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â MESSAGE)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([image?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._image~3f%29%29)Â v)Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â MESSAGE)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â v)Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â MESSAGE)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(tank?Â v)Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â MESSAGE)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The use of [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    helps us finish this definition in the natural way:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Any](#%28tech._any%29) -> [Number](#%28tech._number%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â computes the area of a disk with radius v, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if v is a number |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (checked-area-of-diskÂ v)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)Â v)Â (area-of-diskÂ v)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â "area-of-disk:
    number expected")])) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'And just to make sure we get what we want, letâ€™s experiment:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (checked-area-of-diskÂ "my-disk") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| area-of-disk:number expected |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Writing checked functions is important if we distribute our programs for others
    to use. Designing programs that work properly, however, is far more important.
    This book focuses on the design process for proper program design, and, to do
    this without distraction, we agree that we always adhere to data definitions and
    signatures. At least, we almost always do so, and on rare occasions we may ask
    you to design checked versions of a function or a program.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 110\. A checked version of area-of-disk can also enforce that the arguments
    to the function are positive numbers, not just arbitrary numbers. Modify checked-area-of-disk
    in this way.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 111\. Take a look at these definitions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define-struct](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define-struct%29%29)Â vecÂ [xÂ y])
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â A vec is |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â (make-vec  PositiveNumber  PositiveNumber) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â interpretation represents a velocity vector |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Develop the function checked-make-vec, which is to be understood as a checked
    version of the primitive operation make-vec. It ensures that the arguments to
    make-vec are positive numbers. In other words, checked-make-vec enforces our informal
    data definition.Predicates You might wonder how you can design your own predicates.
    After all, checked functions really seem to have this general shape:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Any](#%28tech._any%29) -> ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â checks that a is a proper input for function g |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (checked-gÂ a)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [(XYZ?Â a)Â (gÂ a)] |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â "g:
    bad input")])) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'where g itself is defined like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [XYZ](#%28tech._xyz%29) -> ... |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (gÂ some-x)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'We assume that there is a data definition labeled XYZ, and that (XYZ?  a) produces
    #true when a is an element of [XYZ](#%28tech._xyz%29) and #false otherwise.'
  prefs: []
  type: TYPE_NORMAL
- en: For area-of-disk, which consumes [Number](#%28tech._number%29)s, [number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)
    is clearly the appropriate predicate. In contrast, for some functions like missile-render
    from above, we clearly need to define our own predicate because [MissileOrNot](#%28tech._mix._missileornot%29)
    is a made-up, not a built-in, data collection. So let us design a predicate for
    [MissileOrNot](#%28tech._mix._missileornot%29).
  prefs: []
  type: TYPE_NORMAL
- en: 'We recall the signature for predicates:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Any](#%28tech._any%29) -> [Boolean](#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â is a an element of the [MissileOrNot](#%28tech._mix._missileornot%29) collection
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (missile-or-not?Â a)Â #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'It is a good practice to use questions as purpose statements for predicates,
    because applying a predicate is like asking a question about a value. The question
    mark â€œ?â€ at the end of the name also reinforces this idea; some people may tack
    on â€œhuhâ€ to pronounce the name of such functions.Making up examples is also straightforward:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (missile-or-not?Â #false)Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (missile-or-not?Â ([make-posn](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._make-posn%29%29)Â 9Â 2))Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (missile-or-not?Â "yellow")Â #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'The first two examples recall that every element of [MissileOrNot](#%28tech._mix._missileornot%29)
    is either #false or some [Posn](#%28tech._posn%29). The third test says that strings
    arenâ€™t elements of the collection. Here are three more tests:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (missile-or-not?Â #true)Â #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (missile-or-not?Â 10)Â #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (missile-or-not?Â [empty-image](http://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._empty-image%29%29))Â #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: Explain the expected answers!
  prefs: []
  type: TYPE_NORMAL
- en: Since predicates consume all possible BSL values, their templates are just like
    the templates for checked-f. Stop! Find the template and take a second look before
    you read on.
  prefs: []
  type: TYPE_NORMAL
- en: 'As with checked functions, a predicate doesnâ€™t need all possible [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    lines. Only those that might produce #true are required:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (missile-or-not?Â v)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([boolean?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3f%29%29)Â v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â v)Â ([...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-x](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-x%29%29)Â v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â ([posn-y](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn-y%29%29)Â v)Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â #false]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'All other cases are summarized via an [else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)
    line that produces #false.Given the template, the definition of missile-or-not?
    is a simple matter of thinking through each case:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (missile-or-not?Â v)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([boolean?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3f%29%29)Â v)Â ([boolean=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3d~3f%29%29)Â #falseÂ v)]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â v)Â #true]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â #false]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Only #false is a legitimate [MissileOrNot](#%28tech._mix._missileornot%29);
    #true isnâ€™t. We express this idea with ([boolean=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3d~3f%29%29)  #false  v),
    but ([false?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._false~3f%29%29)  v)
    would also do:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (missile-or-not?Â v)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([false?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._false~3f%29%29)Â v)Â #true]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([posn?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._posn~3f%29%29)Â v)Â #true]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â #false]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Naturally all elements of Posn are also members of [MissileOrNot](#%28tech._mix._missileornot%29),
    which explains the #true in the second line.'
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 112\. Reformulate the predicate now using an [or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)
    expression.
  prefs: []
  type: TYPE_NORMAL
- en: 'ExerciseÂ 113\. Design predicates for the following data definitions from the
    preceding section: [SIGS](#%28tech._mix._sig%29), [Coordinate](#%28tech._mix._coordinate%29)
    ([exerciseÂ 105](#%28counter._mix._%28exercise._mix-coordinates%29%29)), and [VAnimal](#%28tech._vanimal%29).'
  prefs: []
  type: TYPE_NORMAL
- en: To wrap up, let us mention [key-event?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key-event~3f%29%29)
    and [mouse-event?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._mouse-event~3f%29%29)
    as two important predicates that you may wish to use in your world programs. They
    check the expected property, but you should check out their documentation to make
    sure you understand what they compute.
  prefs: []
  type: TYPE_NORMAL
- en: 6.4Checking the World[ðŸ”—](#(part._sec~3aworld-checking) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: In a world program, many things can go wrong. Although we just agreed to trust
    that our functions are always applied to the proper kind of data, in a world program
    we may juggle too many things at once to place that much trust in ourselves. When
    we design a world program that takes care of clock ticks, mouse clicks, keystrokes,
    and rendering, it is just too easy to get one of those interplays wrong. Of course,
    going wrong doesnâ€™t mean that BSL recognizes the mistake immediately. For example,
    one of our functions may produce a result that isnâ€™t quite an element of your
    data representation for world states. At the same time, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    accepts this piece of data and holds on to it, until the next event takes place.
    It is only when the following event handler receives this inappropriate piece
    of data that the program may fail. But it may get worse because even the second
    and third and fourth event-handling step may actually cope with inappropriate
    state values, and it all blows up much later in the process.
  prefs: []
  type: TYPE_NORMAL
- en: 'To help with this kind of problem, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    comes with an optional [check-with](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._check-with%29%29)
    clause that accepts a predicate for world states. If, for example, we chose to
    represent all world states with [Number](#%28tech._number%29), we could express
    this fact easily like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ s0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â s0Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)Â [[check-with](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._check-with%29%29)Â [number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)]Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'As soon as any event-handling function produces something other than a number,
    the world stops with an appropriate error message.A [check-with](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._check-with%29%29)
    clause is even more useful when the data definition is not just a class of data
    with a built-in predicate like [number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)
    but something subtle such as this interval definition:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â A UnitWorld is a number |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â Â Â between 0 (inclusive) and 1 (exclusive). |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'In that case you want to formulate a predicate for this interval:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Any](#%28tech._any%29) -> [Boolean](#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â is x between 0 (inclusive) and 1 (exclusive) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (between-0-and-1?Â "a")Â #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (between-0-and-1?Â 1.2)Â #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (between-0-and-1?Â 0.2)Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (between-0-and-1?Â 0.0)Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (between-0-and-1?Â 1.0)Â #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (between-0-and-1?Â x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â ([number?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._number~3f%29%29)Â x)Â ([<=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c~3d%29%29)Â 0Â x)Â ([<](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3c%29%29)Â xÂ 1)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'With this predicate you can now monitor every single transition in your world
    program:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (mainÂ s0)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)Â s0
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â [[check-with](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._check-with%29%29)Â between-0-and-1?]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â [...](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._......%29%29)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: If any of the world-producing handlers creates a number outside of the interval,
    or worse, a non-numeric-value, our program discovers this mistake immediately
    and gives us a chance to fix the mistake.
  prefs: []
  type: TYPE_NORMAL
- en: ExerciseÂ 114\. Use the predicates from [exerciseÂ 113](#%28counter._%28exercise._predicate1%29%29)
    to check the space invader world program, the virtual pet program ([exerciseÂ 106](#%28counter._%28exercise._zoo3%29%29)),
    and the editor program ([A Graphical Editor](#%28part._sec~3aedit1%29)).
  prefs: []
  type: TYPE_NORMAL
- en: 6.5Equality Predicates[ðŸ”—](#(part._sec~3aequality1) "Link to here")
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'An equality predicate is a function that compares two elements of the same
    collection of data. Recall the definition of [TrafficLight](#%28tech._trafficlight%29),
    which is the collection of three strings: "red", "green", and "yellow". Here is
    one way to define the light=? function:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [TrafficLight](#%28tech._trafficlight%29)  [TrafficLight](#%28tech._trafficlight%29)
    -> [Boolean](#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â are the two (states of) traffic lights equal |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (light=?Â "red"Â "red")Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (light=?Â "red"Â "green")Â #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (light=?Â "green"Â "green")Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (light=?Â "yellow"Â "yellow")Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (light=?Â a-valueÂ another-value)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â a-valueÂ another-value))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'When we click RUN, all tests succeed, but unfortunately other interactions
    reveal conflicts with our intentions:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > (light=?Â "salad"Â "greens") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| #false |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| > (light=?Â "beans"Â 10) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| string=?:expects a string, given 10 |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Compare these interactions with other, built-in equality predicates:'
  prefs: []
  type: TYPE_NORMAL
- en: '| > ([boolean=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._boolean~3d~3f%29%29)Â "#true"Â 10)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| boolean=?:expects a boolean as 1st argument, given "#true" |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Try ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)  10  #true)
    and ([=](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._~3d%29%29)  20  "help")
    on your own. All of them signal an error about being applied to the wrong kind
    of argument.A checked version of light=? enforces that both arguments belong to
    [TrafficLight](#%28tech._trafficlight%29);The case of characters matters; "red"
    is different from "Red" or "RED". if not, it signals an error like those that
    built-in equality predicates issue. We call the predicate for TrafficLight light?
    for brevity:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ;Â [Any](#%28tech._any%29) -> [Boolean](#%28tech._boolean%29) |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â is the given value an element of [TrafficLight](#%28tech._trafficlight%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (light?Â x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [([string?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3f%29%29)Â x)Â ([or](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._or%29%29)Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "red"Â x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "green"Â x)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â "yellow"Â x))]
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â [[else](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._else%29%29)Â #false]))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: 'Now we can wrap up the revision of light=? by just following our original analysis.
    First, the function determines that the two inputs are elements of [TrafficLight](#%28tech._trafficlight%29);
    if not it uses [error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)
    to signal the mistake:'
  prefs: []
  type: TYPE_NORMAL
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â MESSAGE
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â "traffic light expected, given some other value") |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â [Any](#%28tech._any%29)  [Any](#%28tech._any%29) -> [Boolean](#%28tech._boolean%29)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â are the two values elements of [TrafficLight](#%28tech._trafficlight%29)
    and, |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ;Â if so, are they equal |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (light=?Â "red"Â "red")Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (light=?Â "red"Â "green")Â #false)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (light=?Â "green"Â "green")Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([check-expect](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._check-expect%29%29)Â (light=?Â "yellow"Â "yellow")Â #true)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â  |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| ([define](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._define%29%29)Â (light=?Â a-valueÂ another-value)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â ([if](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._if%29%29)Â ([and](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._and%29%29)Â (light?Â a-value)Â (light?Â another-value))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([string=?](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._string~3d~3f%29%29)Â a-valueÂ another-value)
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: '| Â Â Â Â Â Â ([error](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._error%29%29)Â MESSAGE)))
    |'
  prefs:
  - PREF_BQ
  type: TYPE_TB
- en: ExerciseÂ 115\. Revise light=? so that the error message specifies which of the
    two arguments isnâ€™t an element of [TrafficLight](#%28tech._trafficlight%29).
  prefs: []
  type: TYPE_NORMAL
- en: While it is unlikely that your programs will use light=?, they ought to use
    [key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)
    and [mouse=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._mouse~3d~3f%29%29),
    two equality predicates that we briefly mentioned at the end of the last subsection.
    Naturally, [key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)
    is an operation for comparing two [KeyEvent](#%28tech._keyevent%29)s; similarly,
    [mouse=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._mouse~3d~3f%29%29)
    compares two [MouseEvt](#%28tech._mouseevt%29)s. While both kinds of events are
    represented as strings, it is important to realize that not all strings represent
    key events or mouse events.
  prefs: []
  type: TYPE_NORMAL
- en: We recommend using [key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)
    in key-event handlers and [mouse=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._mouse~3d~3f%29%29)
    in mouse-event handlers from now on. The use of [key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)
    in a key-event handler ensures that the function really compares strings that
    represent key events and not arbitrary strings. As soon as, say, the function
    is accidentally applied to "hello\n world", [key=?](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._key~3d~3f%29%29)
    signals an error and thus informs us that something is wrong.
  prefs: []
  type: TYPE_NORMAL
- en: 7Summary[ðŸ”—](#(part._ch~3asummary1) "Link to here")
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In this first part of the book, you learned a bunch of simple but important
    lessons. Here is a summary:'
  prefs: []
  type: TYPE_NORMAL
- en: A good programmer designs programs. A bad programmer tinkers until the program
    seems to work.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The design recipe has two dimensions. One concerns the process of design, that
    is, the sequence of steps to be taken. The other explains how the chosen data
    representation influences the design process.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Every well-designed program consists of many constant definitions, structure
    type definitions, data definitions, and function definitions. For batch programs,
    one function is the â€œmainâ€ function, and it typically composes several other functions
    to perform its computation. For interactive programs, the [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29)
    function plays the role of the main function; it specifies the initial state of
    the program, an image-producing output function, and at most three event handlers:
    one for clock ticks, one for mouse clicks, and one for key events. In both kinds
    of programs, function definitions are presented â€œtop down,â€ starting with the
    main function, followed by those functions mentioned in the main function, and
    so on.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Like all programming languages, Beginning Student Language comes with a vocabulary
    and a grammar. Programmers must be able to determine the meaning of each sentence
    in a language so that they can anticipate how the program performs its computation
    when given an input. The following intermezzo explains this idea in detail.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Programming languages, including BSL, come with a rich set of teachpacks so
    that programmers donâ€™t have to reinvent the wheel all the time. A programmer should
    become comfortable with the functions that a teachpack provides, especially their
    signatures and purpose statements. Doing so simplifies life.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'A programmer must get to know the â€œtoolsâ€ that a chosen programming language
    offers. These tools are either part of the languageâ€”<wbr>such as [cond](http://docs.racket-lang.org/htdp-langs/beginner.html#%28form._%28%28lib._lang%2Fhtdp-beginner..rkt%29._cond%29%29)
    or [max](http://docs.racket-lang.org/htdp-langs/beginner.html#%28def._htdp-beginner._%28%28lib._lang%2Fhtdp-beginner..rkt%29._max%29%29)â€”<wbr>or
    they are â€œimportedâ€ from a teachpack. In this spirit, make sure you understand
    the following terms: structure type definition, function definition, constant
    definition, structure instance, data definition, [big-bang](http://docs.racket-lang.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29),
    and event-handling function.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
