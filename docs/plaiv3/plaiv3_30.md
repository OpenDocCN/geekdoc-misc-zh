## 使用真值-假值

一些语言使用真值-假值来处理部分函数。当参数无法处理时，它们不会返回错误信号，而是返回一个假值。例如，在 Racket 中通常返回 `#false`，在 Python 中返回 `None` 作为错误代码，而在正常执行时返回适当的值。考虑以下 Racket 示例：

```
(define (g s)
  (+ 1 (or (string->number s) 0)))
```

此函数接受一个可能表示也可能不表示数字的字符串。如果它表示数字，则返回一个更大的数字；否则返回 `1`：

```
(test (g "5") 6)
(test (g "hello") 1)
```

这之所以可行，是因为 `string->number` 返回一个数字，如果字符串不合法，则返回 `#false`。在 Racket 中，所有非 `#false` 的值都是真值。因此，合法的字符串会短路 `or` 的评估，而非数字字符串则导致 `0`。因此，这些在那些没有（或曾经没有）适当的数据类型构造函数的语言中充当了粗略的选项类型。

我们将在本书的后续部分进一步讨论这个问题 [👉]。
