# 冗长的日志会扰乱你的睡眠

# 冗长的日志会扰乱你的睡眠

当我遇到已经开发或生产一段时间的系统时，真正麻烦的第一个迹象总是一个混乱的日志。你知道我在说什么。在一个网页的正常流程中点击一个链接结果会导致系统提供的唯一日志中涌现大量消息。太多的日志记录可能和没有一样没用。

如果你的系统像我的一样，当你的工作完成时，别人的工作才刚刚开始。系统开发完成后，希望它能够长久繁荣地为客户服务。如果你很幸运的话。当系统处于生产状态时出现问题，你如何知道，又该如何处理？

或许有人会替你监视你的系统，或者你自己会监视它。无论哪种方式，日志很可能都是监控的一部分。如果出现了什么问题，你必须被叫醒来处理，你希望有一个很好的理由。如果我的系统出问题了，我想知道。但如果只是一个小问题，我宁愿享受美容觉。

对于许多系统来说，出现问题的第一个迹象通常是某个日志记录了一条消息。大多数情况下，这将是错误日志。所以请你做个好事：从第一天开始确保，如果错误日志中记录了什么，你愿意被人叫醒来处理。如果在系统测试期间可以模拟系统负载，查看一个无噪音的错误日志也是一个很好的第一指标，表明你的系统相当健壮。或者，如果不是这样的话，那么就是一个早期的警告。

分布式系统增加了另一个复杂性层次。你必须决定如何处理外部依赖失败。如果你的系统非常分布式，这可能是一个常见的情况。确保你的日志记录策略考虑到这一点。

一般来说，一切正常的最好指标是，优先级较低的消息在愉快地运行。我希望每个重要的应用事件都有一个 INFO 级别的日志消息。

一个混乱的日志表明，一旦系统投入生产，它将很难控制。如果你不期望错误日志中出现任何内容，当确实出现问题时，就会更容易知道该怎么做。

作者：[约翰内斯·布罗德沃尔](http://programmer.97things.oreilly.com/wiki/index.php/Johannes_Brodwall)
