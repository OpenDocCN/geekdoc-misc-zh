# 为人们编写测试

# 为人们编写测试

你正在为一些或全部生产代码编写自动化测试。恭喜！你是在编写代码之前写测试？更好！！仅仅这样做就让你成为了软件工程实践的领先者之一。但是你在写好的测试吗？你怎么知道呢？一个方法是问：“我在为谁写这些测试？”如果答案是“为我自己，以节省修复错误的工作量”或“为了编译器，以便它们能够执行”，那么你写的可能不是最好的测试。那么你应该为谁编写测试？为试图理解你的代码的人。

良好的测试充当了它们测试的代码的文档。它们描述了代码的工作原理。对于每个使用场景，测试：

1.  描述必须满足的上下文、起点或前置条件

1.  说明软件如何调用

1.  描述要验证的预期结果或后置条件

不同的使用场景会有稍微不同的这三种情况。试图理解你的代码的人应该能够查看几个测试，并通过比较这些问题测试的这三个部分，看到是什么导致软件的行为不同。每个测试应该清楚地说明这三个部分之间的因果关系。这意味着测试中看不见的部分和看得见的部分一样重要。测试中的太多代码会用不重要的琐事分散读者的注意力。尽可能地隐藏这种琐事在有意义的方法调用后面——提取方法重构是你最好的朋友。并确保为每个测试命名一个有意义的名称，描述特定的使用场景，这样测试读者就不必逆向工程每个测试来理解各种场景。在测试类和类方法的名称之间，应该包含起点和软件如何被调用的至少一部分。这允许通过快速扫描方法名称来验证测试覆盖率。在测试方法名称中包含预期结果也可能很有用，只要这不会导致名称太长而无法看到或阅读。

测试你的测试也是一个好主意。你可以通过将这些错误插入到生产代码中（当然是你自己的私人副本，你会扔掉的）。确保它们以一种有用和有意义的方式报告错误。你还应该验证你的测试是否清晰地传达给试图理解你的代码的人。唯一的方法就是让一个不熟悉你代码的人读你的测试并告诉你他们学到了什么。仔细听听他们说的话。如果他们对某些事情理解不清楚，那可能不是因为他们不够聪明。更有可能的是你表达不够清楚。（放心，通过阅读他们的测试来交换角色吧！）

由[杰拉德·梅萨罗斯](http://programmer.97things.oreilly.com/wiki/index.php/Gerard_Meszaros)撰写
