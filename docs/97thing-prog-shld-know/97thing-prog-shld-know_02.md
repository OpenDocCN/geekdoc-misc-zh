# 应用函数式编程原则

# 应用函数式编程原则

函数式编程最近受到主流编程社区的重新关注。部分原因是因为函数式范式的新兴属性很好地适应了我们行业向多核转变所带来的挑战。然而，虽然这确实是一个重要的应用，但这并不是本文告诫您*了解您的函数式编程*的原因。

精通函数式编程范式可以极大地提高您在其他情境下编写的代码质量。如果您深刻理解并应用函数式范式，您的设计将表现出更高程度的*引用透明度*。

引用透明度是一个非常可取的属性：它意味着函数在给定相同输入时一致产生相同的结果，不管它们何时何地被调用。也就是说，函数的评估减少了 —— 理想情况下，完全不依赖于可变状态的副作用。

在命令式代码中缺陷的主要原因之一归因于可变变量。阅读此文的每个人都会调查为什么在特定情况下某个值不如预期那样。可见性语义可以帮助减轻这些隐匿的缺陷，或者至少大大缩小它们的位置范围，但其真正罪魁祸首实际上可能是采用过度可变性的设计。

而我们在这方面确实没有得到行业的太多帮助。面向对象的介绍潜在地促进了这种设计，因为它们经常显示由相对长寿的对象组成的图形示例，这些对象愉快地调用彼此的变异方法，这可能是危险的。然而，通过敏锐的测试驱动设计，特别是当确保["Mock Roles, not Objects"](http://www.jmock.org/oopsla2004.pdf)时，可以设计掉不必要的可变性。

其净结果是一种设计，通常具有更好的责任分配，具有更多的、更小的函数，这些函数作用于传递给它们的参数，而不是引用可变成员变量。缺陷会更少，而且它们通常更容易调试，因为在这些设计中定位引入异常值的位置比推断导致错误赋值的特定上下文更容易。这累加到一个更高程度的引用透明度，而且没有什么比学习函数式编程语言更能让这些理念深入人心的了，在这种计算模型是常态的地方。

当然，这种方法并不是在所有情况下都是最优的。例如，在面向对象的系统中，这种风格通常在领域模型开发（即，协作用于分解业务规则的复杂性）方面比在用户界面开发方面产生更好的结果。

掌握函数式编程范式，这样你就能明智地将所学到的经验应用到其他领域。你的对象系统（其中之一）将会 resonant with referential transparency goodness，并且比许多人所认为的更接近它们的函数式对应物。事实上，有些人甚至会断言函数式编程和面向对象的顶点*仅仅是彼此的反射*，一种计算上的阴阳之形。

作者：[Edward Garson](http://programmer.97things.oreilly.com/wiki/index.php/Edward_Garson)
