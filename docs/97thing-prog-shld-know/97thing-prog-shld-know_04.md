# 自动化你的编码标准

# 自动化你的编码标准

你可能也有过这种经历。在项目开始时，每个人都有很多良好的意图——把它们称为“新项目的决议”。很多时候，这些决议会被记录在文件中。关于代码的决议最终会出现在项目的编码标准中。在启动会议上，主要开发人员会浏览文档，最好的情况是，每个人都同意他们将尽量遵循这些决议。然而，一旦项目启动，这些良好的意图就会一个接一个地被抛弃。当项目最终交付时，代码看起来一团糟，似乎没有人知道它是怎么变成这样的。

事情什么时候开始出错了？可能是在启动会议上就已经出错了。一些项目成员没有注意到。其他人不理解其中的要点。更糟糕的是，一些人不同意并已经在计划他们的编码标准叛乱。最后，一些人理解了并同意了，但是当项目压力过大时，他们不得不放弃一些东西。格式良好的代码不会给希望获得更多功能的客户赢得分数。此外，如果没有自动化，遵循编码标准可能会是一项相当无聊的任务。试着手动缩进一个凌乱的类，看看吧。

但如果这是一个问题，为什么我们首先要有编码标准呢？统一格式化代码的一个原因是为了没有人可以通过以自己的私人方式格式化代码来“拥有”代码的一部分。我们可能希望防止开发人员使用某些反模式，以避免一些常见的错误。总之，编码标准应该使项目中的工作更加容易，并从开始到结束保持开发速度。因此，每个人都应该对编码标准达成一致意见——如果一个开发人员使用三个空格来缩进代码，另一个开发人员使用四个空格，那就没有帮助了。

存在大量工具可用于生成代码质量报告，并记录和维护编码标准，但这并不是全部解决方案。应尽可能自动化并强制执行。以下是一些示例：

+   确保代码格式化是构建过程的一部分，这样每次编译代码时都会自动运行它。

+   使用静态代码分析工具扫描代码中的不良反模式。如果发现任何问题，就中断构建过程。

+   学会配置这些工具，这样你就可以扫描自己的、特定于项目的反模式。

+   不仅要测量测试覆盖率，还要自动检查结果。同样地，如果测试覆盖率太低，就中断构建过程。

尽量对你认为重要的每一项都这样做。你无法自动化你真正关心的一切。至于那些无法自动标记或修复的事情，把它们视为自动化的编码标准的一套补充准则，但接受你和你的同事可能不会如此认真地遵守它们。

最后，编码标准应该是动态的，而不是静态的。随着项目的发展，项目的需求也会发生变化，开始时看起来聪明的东西，几个月后不一定还是聪明的。

由[Filip van Laenen](http://programmer.97things.oreilly.com/wiki/index.php/Filip_van_Laenen)提供。
