# 利用代码分析工具

# 利用代码分析工具

测试的价值是从软件开发者的早期编程阶段就被灌输的。近年来，单元测试、测试驱动开发和敏捷方法的兴起引起了人们对在开发周期的所有阶段充分利用测试的兴趣激增。然而，测试只是你可以用来提高代码质量的众多工具之一。

在很久以前，当 C 语言仍然是一种新现象时，CPU 时间和任何形式的存储都是宝贵的资源。最初的 C 编译器考虑到了这一点，因此通过减少对代码的遍历次数来减少一些语义分析。这意味着编译器仅检查了可以在编译时检测到的一小部分错误。为了弥补这一点，Stephen Johnson 编写了一个名为*lint*的工具——它可以从你的代码中去除多余的内容——实现了从其姐妹 C 编译器中删除的一些静态分析。然而，静态分析工具因给出大量错误警告和关于风格约定的警告而声名狼藉，这些风格约定并不总是必须遵循。

当前的语言、编译器和静态分析工具的格局已经大不相同。内存和 CPU 时间现在相对便宜，因此编译器可以负担得起检查更多的错误。几乎每种语言都至少拥有一种检查违反样式指南、常见陷阱以及有时难以捕捉的巧妙错误的工具，例如潜在的空指针解引用。更复杂的工具，如 C 语言的 Splint 或 Python 的 Pylint，是可配置的，这意味着你可以选择工具发出的错误和警告，通过配置文件、命令行开关或在你的 IDE 中进行设置。Splint 甚至可以让你在注释中注释你的代码，以便为其提供更好的关于程序如何工作的提示。

如果一切都失败了，你发现自己在寻找编译器、IDE 或 lint 工具未捕捉到的简单错误或标准违规，那么你总是可以自己编写静态检查器。这并不像听起来那么困难。大多数语言，特别是那些被标记为*动态*的语言，将其抽象语法树和编译器工具作为标准库的一部分暴露出来。值得深入了解你正在使用的语言开发团队常用的标准库中的角落，因为这些常常包含对静态分析和动态测试有用的隐藏宝藏。例如，Python 标准库包含一个反汇编器，可以告诉你生成某些编译代码或代码对象所使用的字节码。这听起来像是 python-dev 团队编译器编写者的一种冷僻工具，但实际上在日常情况下非常有用。这个库可以反汇编的其中一件事就是你的最后一个堆栈跟踪，为你提供关于最后一个未捕获异常抛出的确切字节码指令的反馈。

因此，不要让测试成为你质量保证的终点 —— 利用分析工具，并且不要害怕自己动手。

由[Sarah Mount](http://programmer.97things.oreilly.com/wiki/index.php/Sarah_Mount)
