# 代码布局很重要

# 代码布局很重要

很多年前，我曾经在一个 Cobol 系统上工作过，员工们不被允许改变缩进，除非他们已经有理由改变代码，因为曾经有人让一行代码滑入了行首的特殊列中，导致某些事情出错。即使布局具有误导性，有时我们也必须非常仔细地阅读代码，因为我们不能相信它。这个政策肯定花了大量的程序员精力。

有研究表明，我们所有人花在导航和阅读代码上的时间要比实际输入的时间多得多 —— 找到*在哪里*进行更改 —— 所以这是我们要优化的。

+   *易于扫描。* 人类在视觉模式匹配方面非常擅长（这是我们在草原上必须发现狮子的时代的遗留物），所以我可以通过标准化所有与领域无关的东西来帮助自己，所有与大多数商业语言一起出现的“偶发复杂性”都会淡化成背景。如果行为相同的代码看起来相同，那么我的感知系统将帮助我找出差异。这就是为什么我也遵循关于如何在编译单元中布局类的部分的约定：常量、字段、公共方法、私有方法。

+   *表达布局。* 我们都学会了花时间找到正确的名称，以便我们的代码尽可能清晰地表达它的功能，而不仅仅是列出步骤 —— 对吧？代码的布局也是这种表现力的一部分。首先，团队要就基本的自动格式化程序达成一致，然后在编码时我可能会手动进行调整。除非存在积极的分歧，一个团队会很快达成共识，采用一种共同的“手工完成”的风格。一个格式化程序无法理解我的意图（我应该知道，我曾经写过一个），对我来说更重要的是，行断和分组反映了代码的意图，而不仅仅是语言的语法。（Kevin McGuire 使我摆脱了对自动代码格式化程序的束缚。）

+   *紧凑的格式。* 我在屏幕上能看到的越多，就能在不通过滚动或切换文件的情况下保持上下文，这意味着我可以减少脑海中的状态。长的过程注释和大量的空白对于 8 个字符的名称和行打印机是有意义的，但现在我生活在一个可以做语法着色和交叉链接的 IDE 中。像素是我的限制因素，所以我希望每一个像素都有助于我理解代码。我希望布局能帮助我理解代码，但不要超过这个范围。

一个非程序员朋友曾经评论说代码看起来像诗。我从真正优秀的代码中感受到这种感觉，即文本中的每个内容都有一个目的，并且它们都是为了帮助我理解这个想法。不幸的是，编写代码并没有写诗的浪漫形象。

作者：[Steve Freeman](http://programmer.97things.oreilly.com/wiki/index.php/Steve_Freeman)
